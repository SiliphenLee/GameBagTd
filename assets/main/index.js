System.register("chunks:///_virtual/Account.ts",["cc","./CurrentMax.ts","./CfgGeneral.ts"],(function(n){var t,i,e;return{setters:[function(n){t=n.cclegacy},function(n){i=n.CurrentMax},function(n){e=n.CfgGeneral}],execute:function(){var s;t._RF.push({},"e0796T9LL9Og6TQJfFCrCnA","Account",void 0);var c=n("AccountBag",(function(){this.grade=new Map,this.deploy=Array(),this.unlocked=Array(),this.stamina=new i})),o=n("AccuntLevel",(function(){this.levelIdx=1,this.waveIdx=0})),a=n("AccountDaySign",(function(){this.DaySign=1,this.Received=!1})),h=n("AccuntInvite",(function(){this.IsInviter=void 0,this.InviterId=void 0,this.InviteCount=1,this.Invite_check=void 0,this.Aready_InviteCount=0})),u=n("AccuntInfo",(function(){this.Uid=void 0,this.Last_login_time=void 0})),r=n("AccountMoney",(function(){this.money001=0,this.money002=0})),d=n("Account",function(){function n(){this.money=new r,this.bag=new c,this.mainLevel=new o,this.accuntInfo=new u,this.accuntInvite=new h,this.items=new Map,this.stamina=new i,this.waveReward=new Map,this.accountdaysign=new a}return n.prototype.init=function(){var n,t;this.money.money001=500,this.money.money002=500,this.bag.deploy.splice(0,this.bag.deploy.length),(n=this.bag.deploy).push.apply(n,e.ins.BagInitDeployedIds),this.bag.unlocked.splice(0,this.bag.unlocked.length),(t=this.bag.unlocked).push.apply(t,e.ins.BagInitUnlockedIds),this.stamina.current=30,this.stamina.max=30},n}());s=d,d.ins=new s,t._RF.pop()}}}));

System.register("chunks:///_virtual/AccountPersist.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Account.ts","./ItemData.ts"],(function(e){var a,n,o,t,r;return{setters:[function(e){a=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,o=e.sys},function(e){t=e.Account},function(e){r=e.ItemData}],execute:function(){n._RF.push({},"e4807aFiuBAQJuPt8VMU1Po","AccountPersist",void 0);e("AccountPersist",function(){function e(){}return e.load=function(){var e=o.localStorage.getItem("Account");if(null!=e&&""!=e){var a=JSON.parse(e);this.loadBag(a.Bag),this.loadMainLevel(a.MainLevel),this.loadMoney(a.Money),this.loadItem(a.Item),this.loadMainLevelWaveReward(a.MainLevelWaveReward)}},e.loadItem=function(e){if(null!=e)for(var a=t.ins,n=0;n<e.length;++n){var o=e[n],i=(new r,o.ItemId),l=Number(o.ItemCount);a.items.set(i,l)}},e.loadMoney=function(e){if(null!=e){var a=t.ins;a.money.money001=Number(e.Money1),a.money.money002=Number(e.Money2)}},e.loadBag=function(e){if(null!=e){var a=t.ins,n=e.Grade;for(var o in n)a.bag.grade.set(o,n[o]);a.bag.deploy=e.Ready,a.bag.unlocked=e.Unlocked}},e.loadMainLevel=function(e){if(null!=e){var a=t.ins;a.mainLevel.levelIdx=e.LevelIdx,a.mainLevel.waveIdx=e.WaveIdx}},e.loadMainLevelWaveReward=function(e){if(null!=e)for(var n=t.ins.waveReward,o=0;o<e.length;++o){for(var r,i=e[o],l=Number(i.LevelIdx),v=i.Waves,u=new Set,s=a(v);!(r=s()).done;){var d=r.value;u.add(d)}n.set(l,u)}},e.save=function(){var e={},a=this.makeBag();e.Bag=a,e.MainLevel=this.makeMainLevel(),e.Money=this.makeMoney(),e.Item=this.makeItem(),e.MainLevelWaveReward=this.makeWaveReward();var n=JSON.stringify(e);o.localStorage.setItem("Account",n)},e.makeWaveReward=function(){for(var e,n=t.ins.waveReward,o=[],r=a(n);!(e=r()).done;){for(var i,l=e.value,v=l[0],u=l[1],s=[],d=a(u);!(i=d()).done;){var c=i.value;s.push(c)}var m={};m.LevelIdx=v,m.Waves=s,o.push(m)}return o},e.makeItem=function(){for(var e,n=t.ins,o=[],r=a(n.items);!(e=r()).done;){var i=e.value,l={};l.ItemId=i[0],l.ItemCount=i[1],o.push(l)}return o},e.makeMoney=function(){var e=t.ins,a={};return a.Money1=e.money.money001,a.Money2=e.money.money002,a},e.makeBag=function(){var e=t.ins,n={},o={};n.Grade=o;for(var r,i=a(e.bag.grade);!(r=i()).done;){var l=r.value;o[l[0]]=l[1]}return n.Ready=e.bag.deploy,n.Unlocked=e.bag.unlocked,n},e.makeMainLevel=function(){var e=t.ins,a={};return a.LevelIdx=e.mainLevel.levelIdx,a.WaveIdx=e.mainLevel.waveIdx,a},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Ad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdBase.ts","./AdTt.ts","./AdGp.ts"],(function(t){var n,i,s,e,c,r;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,s=t.sys},function(t){e=t.AdBase},function(t){c=t.AdTt},function(t){r=t.AdGp}],execute:function(){i._RF.push({},"0f6d4FJCLJMtKXNsYSzMJMX","Ad",void 0),t("Ad",function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.createIns=function(){switch(s.platform){case s.Platform.WECHAT_GAME:this.ins=new e,this.ins.init();break;case s.Platform.BYTEDANCE_MINI_GAME:this.ins=new c,this.ins.init();break;case s.Platform.ANDROID:this.ins=new r,this.ins.init();break;default:this.ins=new e,this.ins.init()}},i}(e)).ins=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/AdBase.ts",["cc"],(function(t){var n,o,e,i,r,s,a,l;return{setters:[function(t){n=t.cclegacy,o=t.find,e=t.Input,i=t.Label,r=t.tween,s=t.resources,a=t.Prefab,l=t.instantiate}],execute:function(){n._RF.push({},"aea6e43lnVDPrK58aM5Ww6p","AdBase",void 0);t("AdBase",function(){function t(){}var n=t.prototype;return n.init=function(){console.log("AdBase.init")},n.bannerShow=function(){console.log("AdBase.showBanner")},n.bannerHide=function(){console.log("AdBase.hideBanner")},n.interstitialShow=function(){console.log("AdBase.showInterstitial")},n.customShow=function(){console.log("AdBase.showCustom")},n.rewardShow=function(t,n,i){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),console.log("AdBase.showRewardedVideo"),c.create((function(r){var s=o("Canvas");r.root.setParent(s,!1),r.btnError.on(e.EventType.TOUCH_END,(function(){r.root.destroy(),null==i||i("出现错误")})),r.btnComplete.on(e.EventType.TOUCH_END,(function(){r.root.destroy(),null==t||t()})),r.btnCancel.on(e.EventType.TOUCH_END,(function(){r.root.destroy(),null==n||n()}))}))},t}());var c=t("UiAdSimReward",function(){function t(){this.root=void 0,this.btnError=void 0,this.btnCancel=void 0,this.btnComplete=void 0}return t.create=function(n){s.load("Common/Ui/AdSimReward",a,(function(o,e){var i=l(e),r=new t;r.init(i),n(r)}))},t.prototype.init=function(t){this.root=t,this.btnError=this.root.getChildByPath("BtnList/btnError"),this.btnCancel=this.root.getChildByPath("BtnList/btnCancel"),this.btnComplete=this.root.getChildByPath("BtnList/btnComplete");var n=this.root.getChildByPath("Countdown").getComponent(i),o=180;r(n).sequence(r(n).call((function(){n.string=o.toString(),o--})),r(n).delay(1)).repeatForever().start()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AdForegroundSwitch.ts",["cc","./Ad.ts"],(function(n){var t,e,i,o;return{setters:[function(n){t=n.cclegacy,e=n.game,i=n.Game},function(n){o=n.Ad}],execute:function(){t._RF.push({},"2eadeIiBPNHH4gJI30teSIf","AdForegroundSwitch",void 0);n("AdForegroundSwitch",function(){function n(){}return n.init=function(){e.on(i.EVENT_SHOW,(function(){console.log("切换到前台"),o.ins.interstitialShow()}))},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/AdGp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdBase.ts"],(function(t){var n,e,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){s=t.AdBase}],execute:function(){e._RF.push({},"2480aRJyJ5GRajM5G+IVPWm","AdGp",void 0);t("AdGp",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/AdInit.ts",["cc","./Ad.ts"],(function(n){var t,e;return{setters:[function(n){t=n.cclegacy},function(n){e=n.Ad}],execute:function(){t._RF.push({},"8dec6/zr/xPPZzth2db7epI","AdInit",void 0);n("AdInit",function(){function n(){}return n.exe=function(){null==e.ins&&e.createIns()},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/AdRewardVideoFailHandler.ts",["cc","./UiDialog.ts","./LanguageData.ts"],(function(n){var t,e,r,i;return{setters:[function(n){t=n.cclegacy,e=n.find},function(n){r=n.UiDialog},function(n){i=n.t}],execute:function(){t._RF.push({},"bd2f9h8fbVEw7ffrbPEha3X","AdRewardVideoFailHandler",void 0);n("AdRewardVideoFailHandler",function(){function n(){}return n.exe=function(n){e("Canvas");if(null!=n){var t=i("Ad_Error")+n,a=r.create(e("Canvas"));return a.title.string="广告播放失败",a.txt.string=t,!0}return!1},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/AdStartup.ts",["cc"],(function(t){var n,u;return{setters:[function(t){n=t.cclegacy,u=t.sys}],execute:function(){var e;n._RF.push({},"d7732E1EKFJ8alKJ9LYlESq","AdStartup",void 0),t("AdStartup",function(){function t(){}return t.exe=function(){o.ins.load();o.ins.count;o.ins.count++,o.ins.save(),this.times},t}()).times=2;var o=function(){function t(){this.count=0}var n=t.prototype;return n.load=function(){var t=u.localStorage.getItem("AdStartupCount");null!=t&&""!=t&&(this.count=Number(t))},n.save=function(){u.localStorage.setItem("AdStartupCount",this.count)},t}();e=o,o.ins=new e,n._RF.pop()}}}));

System.register("chunks:///_virtual/AdTt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Music2.ts","./AdBase.ts","./AdRewardVideoFailHandler.ts"],(function(n){var t,i,o,e,r,s,d;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,o=n.tween,e=n.director},function(n){r=n.Music},function(n){s=n.AdBase},function(n){d=n.AdRewardVideoFailHandler}],execute:function(){i._RF.push({},"bdaa89H7upD56sse0CmA8Cg","AdTt",void 0);n("AdTt",function(n){function i(){for(var t,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return(t=n.call.apply(n,[this].concat(o))||this).banner=void 0,t.interstitial=void 0,t.rewardedVideo=void 0,t}t(i,n);var s=i.prototype;return s.init=function(){"devtools"!=tt.getSystemInfoSync().platform&&(this.banner=new a,this.banner.init(),this.interstitial=new l,this.interstitial.init(),this.rewardedVideo=new c,this.rewardedVideo.init())},s.bannerShow=function(){},s.bannerHide=function(){},s.interstitialShow=function(){var n;null==(n=this.interstitial)||n.show()},s.rewardShow=function(n,t,i){var e=this;if(void 0===t&&(t=null),void 0===i&&(i=null),null!=this.rewardedVideo){this.rewardedVideo.onSuccess=function(){e.resumeBgm(),o(e).delay(.5).call((function(){n()})).start()},this.rewardedVideo.onFailed=function(n){e.resumeBgm(),d.exe(n),null==i||i(n)},this.rewardedVideo.onCancel=function(){null==t||t()},this.rewardedVideo.show()}else null==n||n()},s.resumeBgm=function(){e.getScene().name;r.ins.bg1()},i}(s));var a=function(){function n(){this.bannerAd=null,this.isLoaded=!1}var t=n.prototype;return t.init=function(){var n=this,t=tt.getSystemInfoSync(),i=t.windowWidth,o=t.windowHeight,e=tt.createBannerAd({adUnitId:"1fl16h0lomd647n0o0",adIntervals:60,style:{width:50,top:o-28.125}});this.bannerAd=e,e.style.left=(i-50)/2,e.onResize((function(n){console.log(n.width,n.height)})),e.onError((function(n){console.log("banner 广告错误:"+n)})),e.onLoad((function(){console.log("banner 广告加载成功"),n.isLoaded=!0,n.show()}))},t.show=function(){var n;this.isLoaded&&(null==(n=this.bannerAd)||n.show())},t.hide=function(){var n;null==(n=this.bannerAd)||n.hide()},n}(),l=function(){function n(){this.interstitialAd=void 0}var t=n.prototype;return t.init=function(){if(tt.createInterstitialAd){var n=tt.createInterstitialAd({adUnitId:"80uwb2shjw11mh3efq"});this.interstitialAd=n,n.onLoad((function(){console.log("插屏 广告加载成功")})),n.onError((function(n){console.log("插屏 加载错误："+n)}))}},t.show=function(){var n=this.interstitialAd;n&&n.show().catch((function(n){console.error(n)}))},n}(),c=function(){function n(){this.onSuccess=null,this.onFailed=null,this.onCancel=void 0,this.videoAd=void 0}var t=n.prototype;return t.init=function(){var n=this,t=tt.createRewardedVideoAd({adUnitId:"2b831d1g4ak2dmf3j2"});this.videoAd=t,t.onLoad((function(){console.log("激励视频 广告加载成功")})),t.onError((function(t){console.log(t),null==n.onFailed||n.onFailed(t.toString())})),t.onClose((function(t){t&&t.isEnded||void 0===t?null==n.onSuccess||n.onSuccess():null==n.onCancel||n.onCancel()}))},t.show=function(){var n=this.videoAd;n&&n.show().catch((function(){n.load().then((function(){return n.show()})).catch((function(t){console.log("激励视频 广告显示失败"),n.load().then((function(){return n.show()}))}))}))},n}();i._RF.pop()}}}));

System.register("chunks:///_virtual/AdWx.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Music2.ts","./AdBase.ts","./AdRewardVideoFailHandler.ts"],(function(n){var t,i,e,o,r,s,d,a,c;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,e=n.find,o=n.UITransform,r=n.tween,s=n.director},function(n){d=n.Music},function(n){a=n.AdBase},function(n){c=n.AdRewardVideoFailHandler}],execute:function(){i._RF.push({},"f5d75IWIGtBRIRzqSAjaTe6","AdWx",void 0);n("AdWx",function(n){function i(){for(var t,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(t=n.call.apply(n,[this].concat(e))||this).custom=void 0,t.banner=void 0,t.interstitial=void 0,t.rewardedVideo=void 0,t}t(i,n);var a=i.prototype;return a.init=function(){var n=l.myself(),t=e("Canvas").getComponent(o).contentSize;t.width/t.height>=720/1380||(this.banner=new f,this.banner.init(n.bannerId)),this.interstitial=new w,this.interstitial.init(n.interstitialId),this.rewardedVideo=new v,this.rewardedVideo.init(n.rewardedVideoId),this.custom=new h,this.custom.init(n.customId)},a.bannerShow=function(){var n;null==(n=this.banner)||n.show()},a.bannerHide=function(){var n;null==(n=this.banner)||n.hide()},a.interstitialShow=function(){var n;null==(n=this.interstitial)||n.show()},a.rewardShow=function(n,t,i){var e=this;void 0===t&&(t=null),void 0===i&&(i=null);this.rewardedVideo.onSuccess=function(){e.resumeBgm(),r(e).delay(.5).call((function(){n()})).start()},this.rewardedVideo.onError=function(n){e.resumeBgm(),null!=i?i(n):c.exe(n)},this.rewardedVideo.onCancel=function(){e.resumeBgm(),null==t||t()},this.rewardedVideo.show()},a.resumeBgm=function(){s.getScene().name;d.ins.bg1()},a.customShow=function(){var n;null==(n=this.custom)||n.show()},i}(a));var u=function(){this.bannerId=null,this.customId=null,this.interstitialId=null,this.rewardedVideoId=null},l=function(){function n(){}return n.myself=function(){var n=new u;return n.customId="adunit-2a7ec63d7c13a4ad",n.bannerId="adunit-2fb5df994068613a",n.interstitialId="adunit-510d8aa624507588",n.rewardedVideoId="adunit-595220d2516c0e66",n},n.lht=function(){var n=new u;return n.customId="adunit-82c13098f30b3ec9",n.bannerId="adunit-f47a79562dbbe928",n.interstitialId="adunit-a18e521886049e81",n.rewardedVideoId="adunit-6e069bac4cb1000f",n},n}(),h=function(){function n(){this.CustomAd=null}var t=n.prototype;return t.init=function(n){var t=wx.getSystemInfoSync();console.log(t);var i=t.screenWidth/2,e=(t.screenHeight,wx.createCustomAd({adUnitId:n,style:{left:i-145,top:0,width:350}}));this.CustomAd=e,e.onError((function(n){console.error(n.errMsg)})),e.onLoad((function(){console.log("原生模板广告加载成功")}))},t.show=function(){this.CustomAd.show()},n}(),f=function(){function n(){this.bannerAd=null}var t=n.prototype;return t.init=function(n){var t=wx.getSystemInfoSync();console.log(t);var i=t.screenWidth/2,e=t.screenHeight,o=wx.createBannerAd({adUnitId:n,adIntervals:60,style:{left:0,top:0,width:400,height:100}});this.bannerAd=o,o.onError((function(n){console.log("广告错误:"+n)})),o.onLoad((function(){console.log("banner 广告加载成功")})),o.onResize((function(){o.style.left=i-o.style.realWidth/2+.1,o.style.top=e-o.style.realHeight+.1,console.log(o.style.top)}))},t.show=function(){var n;null==(n=this.bannerAd)||n.show()},t.hide=function(){var n;null==(n=this.bannerAd)||n.hide()},n}(),w=function(){function n(){this.interstitialAd=void 0}var t=n.prototype;return t.init=function(n){if(wx.createInterstitialAd){var t=wx.createInterstitialAd({adUnitId:n});this.interstitialAd=t,t.onLoad((function(){console.log("插屏 广告加载成功")})),t.onError((function(n){console.log(n)}))}},t.show=function(){var n=this.interstitialAd;n&&n.show().catch((function(n){console.error(n)}))},n}(),v=function(){function n(){this.onSuccess=null,this.onError=null,this.onCancel=null,this.videoAd=void 0}var t=n.prototype;return t.init=function(n){var t=this,i=wx.createRewardedVideoAd({adUnitId:n});this.videoAd=i,i.onLoad((function(){console.log("激励视频 广告加载成功")})),i.onError((function(n){console.log(n),null==t.onError||t.onError(n.toString())})),i.onClose((function(n){n&&n.isEnded||void 0===n?null==t.onSuccess||t.onSuccess():null==t.onCancel||t.onCancel()}))},t.show=function(){var n=this.videoAd;n&&n.show().catch((function(){n.load().then((function(){return n.show()})).catch((function(t){console.log("激励视频 广告显示失败"),n.load().then((function(){return n.show()}))}))}))},n}();i._RF.pop()}}}));

System.register("chunks:///_virtual/Affix.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"65a65YNg4JI+L4F+axXN3WU","Affix",void 0);e("Affix",(function(){this.type=a.None,this.argN=0,this.argNList=null,this.argStr=null,this.argStrList=null}));var a=e("AffixType",function(e){return e.None="None",e.GetMomeyNow="GetMomeyNow",e.GetMomeyPerWave="GetMomeyPerWave",e.HpMaxIncrease="HpMaxIncrease",e.HpMaxIncreasePercent="HpMaxIncreasePercent",e.HpMaxIncreaseIncreasePercent="HpMaxIncreaseIncreasePercent",e.HpRegenIncreasePercent="HpRegenIncreasePercent",e.HpRegenIncrease="HpRegenIncrease",e.HpRegenSpeedIncreasePercent="HpRegenSpeedIncreasePercent",e.ExpIncreasePercent="ExpIncreasePercent",e.RndArticleMergeGradeUpgrade="RndArticleMergeGradeUpgrade",e.AuraAttackSpeedIncreasePercent="AuraAttackSpeedIncreasePercent",e.AuraAttackDamageIncreasePercent="AuraAttackDamageIncreasePercent",e.AuraAttackDamageIncreaseAllPercent="AuraAttackDamageIncreaseAllPercent",e.AuraAttackCritProbabilityIncrease="AuraAttackCritProbabilityIncrease",e.AttackDamageIncreasePercent="AttackDamageIncreasePercent",e.AttackDamageIncreasePercentFullHp="AttackDamageIncreasePercentFullHp",e.AttackSpeedIncreasePercent="AttackSpeedIncreasePercent",e.AttackLifeStealingPercent="AttackLifeStealingPercent",e.AttackCritPerAttackNTimes="AttackCritPerAttackNTimes",e.AttackCritPerAttackNTimesIncrease="AttackCritPerAttackNTimesIncrease",e.AttackCritProbabilityIncreasePercent="AttackCritProbabilityIncreasePercent",e.AttackCritMultipleIncreasePercent="AttackCritMultipleIncreasePercent",e.AttackBulletMoveSpeedIncreasePercent="AttackBulletMoveSpeedIncreasePercent",e.AttackBulletPassIncrease="AttackBulletPassIncrease",e.AttackBulletBounceRectIncrease="AttackBulletBounceRectIncrease",e.AttackBulletBounceRectEnemyIncrease="AttackBulletBounceRectEnemyIncrease",e.AttackBulletBounceBetweenEnemiesIncrease="AttackBulletBounceBetweenEnemiesIncrease",e.AttackBulletPassInfiniteAndBounceRectIncrease="AttackBulletPassInfiniteAndBounceRectIncrease",e.AttackBulletScatterIncrease="AttackBulletScatterIncrease",e.AttackBulletScatterIncreaseProbability="AttackBulletScatterIncreaseProbability",e.AttackBulletSizeIncreasePercent="AttackBulletSizeIncreasePercent",e.AttackContinuous="AttackContinuous",e.AttackBulletAddBuff="AttackBulletAddBuff",e.AttackBulletAddBuffRadius="AttackBulletAddBuffRadius",e.AttackBulletAddBuffRadiusIncreasePercent="AttackBulletAddBuffRadiusIncreasePercent",e.AttackBulletAddBuffRadiusBuffIncreasePercent="AttackBulletAddBuffRadiusBuffIncreasePercent",e.AttackBulletProbabilityAddBuff="AttackBulletProbabilityAddBuff",e.AttackBulletPoisoningDamageIncreasePercent="AttackBulletPoisoningDamageIncreasePercent",e.AttackBulletPoisoningDurationIncreasePercent="AttackBulletPoisoningDurationIncreasePercent",e.AttackBulletExplodeRadiusIncreasePercent="AttackBulletExplodeRadiusIncreasePercent",e.AttackBulletExplodeDamageIncreasePercent="AttackBulletExplodeDamageIncreasePercent",e.HpRegenIncreasePercentBelowPercentPerWave="HpRegenIncreasePercentBelowPercentPerWave",e.MergeEnable="MergeEnable",e.OverlapEnable="OverlapEnable",e.Burn="Burn",e.Poisoning="Poisoning",e.PoisoningPercent="PoisoningPercent",e.Frozen="Frozen",e.MoveSpeedDecreasePercent="MoveSpeedDecreasePercent",e.Stun="Stun",e.Knockback="Knockback",e.Explode="Explode",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Ai001.ts",["cc","./RoleMgr.ts","./RoleMove.ts"],(function(t){var o,e,i;return{setters:[function(t){o=t.cclegacy},function(t){e=t.RoleMgr},function(t){i=t.RoleMove}],execute:function(){o._RF.push({},"5aa80EmvolOYpJH8L91RBx3","Ai001",void 0);t("Ai001",function(){function t(){}return t.update=function(t){t.ai.target=e.ins.local,this.chase(t)},t.chase=function(t){var o=t.ai.target.view.root.position.clone().subtract(t.view.root.position);i.exe(t,o)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Ai002.ts",["cc","./PlayerRole.ts","./RoleAnimSpine.ts","./RoleAttack.ts","./RoleMove.ts"],(function(t){var e,i,o,n,a;return{setters:[function(t){e=t.cclegacy},function(t){i=t.PlayerRole},function(t){o=t.RoleAnimSpine},function(t){n=t.RoleAttack},function(t){a=t.RoleMove}],execute:function(){e._RF.push({},"f0737PJSX1Omr8vUSrY//x2","Ai002",void 0);t("Ai002",function(){function t(){}return t.update=function(t){switch(t.ai.state){case 0:this.state_pathMove(t);break;case 1:this.state_chase(t)}},t.state_pathMove=function(t){var e=t.ai.pathMoved,o=e.path,n=o[e.idx],s=n.clone().subtract(t.view.root.position);if(s.lengthSqr()<=400){if(e.idx++,e.idx>=o.length)return t.ai.target=i.ins.main,void(t.ai.state=1);s=(n=o[e.idx]).clone().subtract(t.view.root.position)}a.exe(t,s)&&(t.ai.pathMoved.lenMoved+=t.move.offset.lengthSqr())},t.state_chase=function(t){var e=t.ai.target;if(1!=e.life.isDead){var i=e.view.root.position.clone().subtract(t.view.root.position);i.lengthSqr()>1e4?a.exe(t,i):n.exe(t,i)}else o.playIdle(t.view.skeleton)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/AiCom.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"590e7aQjg9CyJHnh8hCna1d","AiCom",void 0);t("AiCom",(function(){this.type=0,this.state=0,this.target=void 0,this.pathMoved=null}));e._RF.pop()}}}));

System.register("chunks:///_virtual/AiSys.ts",["cc","./RoleMgr.ts","./Ai002.ts"],(function(t){var n,e,i;return{setters:[function(t){n=t.cclegacy},function(t){e=t.RoleMgr},function(t){i=t.Ai002}],execute:function(){n._RF.push({},"9337auS3PhDeKsEd1xAlhtx","AiSys",void 0);t("AiSys",function(){function t(){}return t.update=function(){for(var t=e.ins.allEnemies,n=0;n<t.length;++n){var i=t[n];null!=i.ai&&this.updateRole(i)}},t.updateRole=function(t){i.update(t)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ArticleString.ts",["cc","./Lang.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.Lang}],execute:function(){e._RF.push({},"ce762I+rZ9AQZcyaVERKQ8Y","ArticleString",void 0);t("ArticleString",function(){function t(){}return t.getName=function(t){var e=t.split("_");2==e.length&&(t=e[0]+"_1");var r="ArticleName_"+t;return n.get(r)},t.getDescription=function(t){var e=t.split("_");2==e.length&&(t=e[0]+"_1");var r="ArticleDescr_"+t;return n.get(r)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ArticleUnlockLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Account.ts","./AccountPersist.ts","./CfgArticleUnlock.ts","./UiArticleUnlock.ts","./UiMain.ts"],(function(n){var e,t,c,i,o,r,l;return{setters:[function(n){e=n.createForOfIteratorHelperLoose},function(n){t=n.cclegacy},function(n){c=n.Account},function(n){i=n.AccountPersist},function(n){o=n.CfgArticleUnlock},function(n){r=n.UiArticleUnlock},function(n){l=n.UiMain}],execute:function(){t._RF.push({},"ced85HcShdKSro8VgeCe8+3","ArticleUnlockLevel",void 0);n("ArticleUnlockLevel",function(){function n(){}return n.exe=function(){for(var n,t=new Array,r=e(o.data);!(n=r()).done;){var l=n.value[1];if(0!=this.canUnlock(l)){var u=l.id;t.push(u),c.ins.bag.unlocked.push(u)}}return t.length>0&&(i.save(),this.ui(t)),t},n.canUnlock=function(n){if(n.levelIdx<=-1)return!1;var e=n.id,t=c.ins.mainLevel.levelIdx;return!(n.levelIdx>t)&&-1==c.ins.bag.unlocked.findIndex((function(n){return n==e}))},n.ui=function(n){r.loadAndCreate((function(e){e.root.setParent(l.ins.root,!1),e.refresh(n),e.show()}))},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/AttackCom.ts",["cc","./CurrentMax.ts"],(function(t){var i,n;return{setters:[function(t){i=t.cclegacy},function(t){n=t.CurrentMax}],execute:function(){i._RF.push({},"6d0ab/kJ5hKqLiUyLg9YNIB","AttackCom",void 0);t("AttackCom",(function(){this.lockCount=0,this.bulletId=null,this.scatterCount=0,this.cd=new n,this.damage=1,this.crit=new c,this.lifeStealing=new e,this.targeSelType=r.First,this.count=0}));var e=t("AttackLifeStealing",(function(){this.percent=0})),c=t("AttackCrit",(function(){this.probability=0,this.multiple=0})),r=t("AttackTargetSelectionType",function(t){return t.None="None",t.First="First",t.Rnd="Rnd",t}({}));i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioSettingsPersist.ts",["cc","./Sound.ts","./Music2.ts"],(function(n){var t,e,i,s;return{setters:[function(n){t=n.cclegacy,e=n.sys},function(n){i=n.Sound},function(n){s=n.Music}],execute:function(){t._RF.push({},"31aedM2splOi4GeIWR7lr1A","AudioSettingsPersist",void 0);n("AudioSettingsPersist",function(){function n(){}return n.load=function(){this.loadMusic(),this.loadSound()},n.save=function(){this.saveMusic(),this.saveSound()},n.loadMusic=function(){var n=e.localStorage.getItem("AudioMusicEnabled");null!=n&&""!=n&&(s.ins.enabled="1"==n)},n.saveMusic=function(){e.localStorage.setItem("AudioMusicEnabled",1==s.ins.enabled?"1":"0")},n.loadSound=function(){var n=e.localStorage.getItem("AudioSoundEnabled");null!=n&&""!=n&&(i.ins.enabled="1"==n)},n.saveSound=function(){e.localStorage.setItem("AudioSoundEnabled",1==i.ins.enabled?"1":"0")},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/AuraCom.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"4d58aQDkZZHh5s8aJ5xskUk","AuraCom",void 0);t("AuraCom",(function(){this.list=new Array}));r._RF.pop()}}}));

System.register("chunks:///_virtual/AuraHint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgArticleGrade.ts","./CfgBuff.ts","./Affix.ts","./WorldNode.ts","./TowerAuraScopeExpand.ts","./EffectFactory.ts"],(function(t){var e,a,r,i,o,n,s,c,f,l;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,r=t.Label,i=t.tween},function(t){o=t.CfgArticleGrade},function(t){n=t.CfgBuff},function(t){s=t.AffixType},function(t){c=t.WorldNode},function(t){f=t.TowerAuraScopeExpand},function(t){l=t.EffectFactory}],execute:function(){a._RF.push({},"5bd72vIrQJC4o3fs18ea7SE","AuraHint",void 0);t("TowerAuraHint",function(){function t(){this.set=new Set,this.set2=new Set,this.map=new Map,this.auraPool=new Map,this.towerDamage=new Array}var a=t.prototype;return a.exe=function(t,a){if(null!=t&&null!=a){this.set2.clear(),this.set.clear();for(var r,i=e(this.map);!(r=i()).done;){var o=r.value[1];o.txt.string="",o.flagAttackDamage=!1,o.flagAttackSpeed=!1,o.flagAttackCritProbability=!1}for(var n,c=this.getBuffs(t.cfg),l=e(c);!(n=l()).done;){var u=n.value;switch(u.affixType){case s.AuraAttackDamageIncreasePercent:for(var d,h=f.exe(u.auraScopeType,a),v=e(h.article);!(d=v()).done;){var g=d.value;if(g!=t&&0!=this.canAttack(g)){this.set.add(g);var p=this.genOrGetEffect(g);1!=p.flagAttackDamage&&(p.flagAttackDamage=!0,p.txt.string+="加攻击\n")}}break;case s.AuraAttackSpeedIncreasePercent:for(var A,k=f.exe(u.auraScopeType,a),x=e(k.article);!(A=x()).done;){var y=A.value;if(y!=t&&0!=this.canAttack(y)){this.set.add(y);var w=this.genOrGetEffect(y);1!=w.flagAttackSpeed&&(w.flagAttackSpeed=!0,w.txt.string+="加攻速\n")}}break;case s.AuraAttackCritProbabilityIncrease:for(var m,b=f.exe(u.auraScopeType,a),P=e(b.article);!(m=P()).done;){var S=m.value;if(S!=t&&0!=this.canAttack(S)){this.set.add(S);var C=this.genOrGetEffect(S);1!=C.flagAttackCritProbability&&(C.flagAttackCritProbability=!0,C.txt.string+="加暴击概率\n")}}}}for(var E,I=e(this.map);!(E=I()).done;){var T=E.value[0];0==this.set.has(T)&&this.set2.add(T)}for(var D,H=e(this.set2);!(D=H()).done;){var F=D.value,G=this.map.get(F);this.map.delete(F),G.root.destroy()}}else this.clear()},a.place=function(){for(var t,a=e(this.map);!(t=a()).done;){var r=t.value[0];if(null!=r.cells&&0!=r.cells.length){var i=l.create("AuraHint2");i.setParent(c.ins.layer2,!1),i.worldPosition=r.view.root.worldPosition}}this.clear()},a.clear=function(){for(var t,a=e(this.map);!(t=a()).done;){t.value[1].root.destroy()}this.map.clear(),this.set2.clear(),this.set.clear()},a.canAttack=function(t){return 0!=t.cfg.tower.atkDamage},a.genOrGetEffect=function(t){var e=this.map.get(t);return null==e&&(e=u.create(),this.map.set(t,e),e.root.setParent(c.ins.layer1,!1),e.root.worldPosition=t.view.root.worldPosition),e},a.getBuffs=function(t){var a=this.auraPool.get(t.id);if(null!=a)return a;for(var r,i=new Array,s=e(t.tower.buffs);!(r=s()).done;){var c=r.value,f=n.data.get(c);0!=f.isAura&&i.push(f)}var l=o.data.get(t.gradeLineId);if(null!=l)for(var u,d=e(l);!(u=d()).done;){for(var h,v=u.value,g=e(v.buffIds);!(h=g()).done;){var p=h.value,A=n.data.get(p);0!=A.isAura&&i.push(A)}for(var k,x=e(v.unlocked);!(k=x()).done;){var y=k.value,w=n.data.get(y);0!=w.isAura&&i.push(w)}}return this.auraPool.set(t.id,i),i},t}());var u=function(){function t(){this.flagAttackDamage=!1,this.flagAttackSpeed=!1,this.flagAttackCritProbability=!1,this.root=void 0,this.txt=void 0}return t.create=function(){var e=new t,a=l.create("AuraHint",!1);return e.init(a),e},t.prototype.init=function(t){this.root=t,this.txt=this.root.getComponentInChildren(r),this.txt.string="";var e=this.txt.node.position.clone(),a=this.txt.node.position.clone().add3f(0,-10,0);i(this.txt.node).sequence(i(this.txt.node).to(.5,{position:a}),i(this.txt.node).to(.5,{position:e})).repeatForever().start()},t}();a._RF.pop()}}}));

System.register("chunks:///_virtual/AuraScopeType.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"10740jXsy1FTpI5IbG2OSTZ","AuraScopeType",void 0);e("AuraScopeType",function(e){return e.Dir4="Dir4",e.Dir8="Dir8",e.HV="HV",e.All="All",e}({}));r._RF.pop()}}}));

System.register("chunks:///_virtual/BagArticle.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"0fb21XOvWFHSakVPpNnMNLA","BagArticle",void 0);i("BagArticle",(function(){this.cfg=void 0,this.cfgShape=void 0,this.cells=new Array,this.grade=1,this.gradeMerge=1,this.isBagExpand=!1,this.tower=null,this.view=null})),i("BagArticleView",(function(){this.root=void 0,this.main=void 0,this.posShapeCoordOrig=void 0,this.size=void 0,this.effectMergeHintShape=void 0,this.tweenMergeHint=null,this.adTag=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BagArticleFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgArticle.ts","./BagArticle.ts","./PfMgr.ts","./UiBagCfg.ts","./CfgShape.ts","./TowerFactory.ts"],(function(e){var t,a,r,i,n,c,o,s,g,l,u,f,p,d;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,r=e.Layout,i=e.UITransform,n=e.instantiate,c=e.Vec2,o=e.Vec3},function(e){s=e.CfgArticleMgr},function(e){g=e.BagArticle,l=e.BagArticleView},function(e){u=e.PfMgrBagArticle},function(e){f=e.UiBagCfg},function(e){p=e.CfgShape},function(e){d=e.TowerFactory}],execute:function(){a._RF.push({},"d0f4cvxS11K5oRgIArKBmmn","BagArticleFactory",void 0);e("BagArticleFactory",function(){function e(){}return e.create=function(e){var t=new g;return y.set(t,e),h.set(t),d.create(t),t},e}());var y=function(){function e(){}return e.set=function(e,t){var a=s.data.get(t);e.cfg=a,e.gradeMerge=a.mergeGrade,e.cfgShape=p.data.get(a.bagShapeId),1==t.startsWith("BagExpand")&&(e.isBagExpand=!0)},e}(),h=function(){function e(){}return e.set=function(e){var t,a=e.view=new l,n=this.createView(e.cfg.id);a.root=n,a.main=n.getChildByPath("Main"),a.posShapeCoordOrig=this.calcPos(e.cfgShape.coords),null==(t=n.getComponent(r))||t.destroy(),this.mergeGrade(e),a.size=n.getComponent(i).getBoundingBoxToWorld().size},e.createView=function(e){var t=u.getPf(e);return n(t)},e.calcPos=function(e){for(var a,r=f.ins.cellSize,i=new c(-1,-1),n=t(e);!(a=n()).done;){var s=a.value;s.x>i.x&&(i.x=s.x),s.y>i.y&&(i.y=s.y)}i.x+=1,i.y+=1;var g=new o;return g.x=i.x*r.width/-2+r.width/2,g.y=i.y*r.height/-2+r.height/2,g},e.mergeGrade=function(e){var t="MergeGrade/Grade"+e.gradeMerge,a=u.bagArticle.getChildByPath(t);if(null!=a){var r=n(a);switch(r.setParent(e.view.root,!1),r.position=o.ZERO,e.cfgShape.id){case"Dot":r.position=new o(25,-20).multiplyScalar(1.5);break;case"H2":r.position=new o(60,-20).multiplyScalar(1.5);break;case"H3":break;case"V2":r.position=new o(25,-60).multiplyScalar(1.5);break;case"V3":r.position=new o(25,-100).multiplyScalar(1.5);break;case"R2x2_3_2":r.position=new o(-10,-60).multiplyScalar(1.5);break;case"R2x2_3_1":case"R2x2_3_3":case"R2x2_3_4":case"R2x2":r.position=new o(60,-60).multiplyScalar(1.5);break;case"T":r.position=new o(25,-60).multiplyScalar(1.5)}}},e}();a._RF.pop()}}}));

System.register("chunks:///_virtual/BagArticleGradeHelper.ts",["cc","./Account.ts","./CfgArticle.ts","./CfgArticleGrade.ts"],(function(e){var r,n,t,a;return{setters:[function(e){r=e.cclegacy},function(e){n=e.Account},function(e){t=e.CfgArticleMgr},function(e){a=e.CfgArticleGrade}],execute:function(){r._RF.push({},"9dd88aip79DVqOegpRbJsUv","BagArticleGradeHelper",void 0);e("BagArticleGradeHelper",function(){function e(){}return e.getGradeByLineId=function(e){var r=n.ins.bag.grade.get(e);return null==r&&(r=1),r},e.getCfgCurrent=function(e){var r=t.data.get(e);if(null==r)return null;var u=a.data.get(r.gradeLineId);if(null==u)return null;var l=n.ins.bag.grade.get(r.gradeLineId);return null==l&&(l=1),u[--l]},e.getCfgNext=function(e){var r=t.data.get(e);if(null==r)return null;var u=a.data.get(r.gradeLineId);if(null==u)return null;var l=n.ins.bag.grade.get(r.gradeLineId);return null==l&&(l=1),l>=u.length?null:u[l]},e.getCfgCurrentItems=function(e){var r=t.data.get(e);if(null==r)return null;var u=a.data.get(r.gradeLineId);if(null==u)return null;var l=n.ins.bag.grade.get(r.gradeLineId);null==l&&(l=1),l--;for(var g=new Array,i=0;i<=l;++i){var d=u[i];g.push(d)}return g},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BagArticleGridPlace.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiBagGrid.ts"],(function(e){var o,r,t,i,n,l;return{setters:[function(e){o=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,t=e.Vec2,i=e.UITransform,n=e.tween},function(e){l=e.UiBagGrid}],execute:function(){r._RF.push({},"1ab2ePuaLhLeb8MUUS0x/h2","BagArticleGridPlace",void 0);e("BagArticleGridPlace",function(){function e(){}return e.exe=function(e,o,r){void 0===r&&(r=!0),this.unbind(e),this.bind(e,o);var t=this.getOrigCellInBoundingRect(o);this.view(e,t,r)},e.getOrigCellInBoundingRect=function(e){for(var r,i=new t(Number.MAX_VALUE,Number.MAX_VALUE),n=o(e);!(r=n()).done;){var c=r.value;c.coord.x<i.x&&(i.x=c.coord.x),c.coord.y<i.y&&(i.y=c.coord.y)}return l.ins.getCell(i)},e.view=function(e,o,r){void 0===r&&(r=!0);var t=e.view.root.scale.clone();e.view.root.setParent(l.ins.root,!0),e.view.root.scale=t;var c=e.view.root.getComponent(i),a=c.convertToWorldSpaceAR(e.view.posShapeCoordOrig);a.subtract(c.node.worldPosition);var s=o.root.worldPosition.clone().subtract(a);r?n(e.view.root).to(.2,{worldPosition:s}).start():e.view.root.worldPosition=s},e.bind=function(e,r){for(var t,i=o(r);!(t=i()).done;){t.value.article=e}e.cells.splice(0,e.cells.length);for(var n,l=o(r);!(n=l()).done;){var c=n.value;e.cells.push(c)}},e.unbind=function(e){for(var r,t=o(e.cells);!(r=t()).done;){r.value.article=null}e.cells.splice(0,e.cells.length)},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BagArticleGridPlaceByPos.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridTraverse.ts","./UiBagGrid.ts","./MergeGrid.ts","./UiTray.ts","./GridHint.ts","./BagArticleGridPlace.ts","./GridModeTransition.ts","./UiBagTouch.ts","./MergeTray.ts","./BagArticleSpeak.ts"],(function(e){var r,n,i,t,a,l,o,c,u,s,d,f;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){i=e.GridTraverse},function(e){t=e.UiBagGrid},function(e){a=e.MergeGrid},function(e){l=e.UiTray},function(e){o=e.GridHint},function(e){c=e.BagArticleGridPlace},function(e){u=e.GridModeTransition},function(e){s=e.UiBagTouch},function(e){d=e.MergeTray},function(e){f=e.BagArticleSpeak}],execute:function(){n._RF.push({},"2e4d6tDaWVKHr90H+f5GLmU","BagArticleGridPlaceByPos",void 0);e("BagArticleGridPlaceByPos",function(){function e(){}return e.exe=function(e){e.isBagExpand&&this.placeBagExpand(e);var r=this.getCellsPlace(e);if(null==r){if(1==d.tryMerge(e))return;return l.ins.insertArticle(e),void(e.isBagExpand&&(u.toNormal(),s.ins.limit.clear()))}o.hintPlaceableClear(),l.ins.removeAndArrange(e),1!=a.tryMerge(e,r)&&(this.goToTray(r,e),c.exe(e,r),f.place(e))},e.placeBagExpand=function(e){},e.goToTray=function(e,n){for(var i,t=new Set,a=r(e);!(i=a()).done;){var o=i.value;null!=o.article&&t.add(o.article)}for(var c,u=r(t);!(c=u()).done;){var s=c.value;s!=n&&l.ins.insertArticle(s)}},e.getCellsPlace=function(e){var n=this.matchCell(e);if(null==n)return null;var i=this.getShapeCells(n.coord,e.cfgShape.coords);if(null!=i){for(var t,a=r(i);!(t=a()).done;){if(t.value.unlocked==e.isBagExpand)return null}return i}},e.matchCell=function(e){var r=e.view.root.worldPosition.clone().add(e.view.posShapeCoordOrig),n=Number.MAX_VALUE,t=null;return i.exe((function(e){var i=e.root.worldPosition.clone().subtract(r).lengthSqr();i<4e4&&i<n&&(n=i,t=e)})),t},e.getShapeCells=function(e,n){for(var i,a=new Array,l=r(n);!(i=l()).done;){var o=i.value,c=e.clone().add(o),u=t.ins.getCell(c);if(null==u)return null;a.push(u)}return a},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BagArticleHelper.ts",["cc","./GridTraverse.ts"],(function(t){var e,i;return{setters:[function(t){e=t.cclegacy},function(t){i=t.GridTraverse}],execute:function(){e._RF.push({},"0c9016BxQ1G4bMUY0ldUoDp","BagArticleHelper",void 0),t("ArticleHelper",function(){function t(){}return t.getAllAriclesInGrid=function(){var t=this;return this.list.splice(0,this.list.length),i.exe((function(e){var i=e.article;null!=i&&-1==t.list.indexOf(i)&&t.list.push(i)})),this.list},t}()).list=new Array,e._RF.pop()}}}));

System.register("chunks:///_virtual/BagArticleReloaded.ts",["cc","./GridTraverse.ts","./TowerMgr.ts"],(function(e){var t,r,n;return{setters:[function(e){t=e.cclegacy},function(e){r=e.GridTraverse},function(e){n=e.TowerMgr}],execute:function(){t._RF.push({},"69b83F9VDhLq5tTqlFUEpI5","BagArticleReloaded",void 0);e("BagArticleReloaded",function(){function e(){}return e.exe=function(){n.ins.clear(),r.exe((function(e){null!=e.article&&n.ins.add(e.article.tower)}))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BagArticleSpeak.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiBubble.ts","./Lang.ts","./WorldNode.ts"],(function(e){var o,t,r,n,l,c;return{setters:[function(e){o=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,r=e.tween},function(e){n=e.UiBubble},function(e){l=e.Lang},function(e){c=e.WorldNode}],execute:function(){t._RF.push({},"13eadGFS5xEIr5XUhlstjLP","BagArticleSpeak",void 0),e("BagArticleSpeak",function(){function e(){}return e.clearMemory=function(){this.memory.clear()},e.place=function(e){var t=this,i=e.cfg.id;if(1!=this.memory.has(i)){this.memory.add(i);var a=l.get("AriclePlaceSpeak#"+i);if(null!=a&&""!=a){var s=n.create();s.root.setParent(c.ins.layer2,!0),s.root.active=!1,r(s.root).sequence(r(s.root).delay(.3),r(s.root).call((function(){if(0!=e.cells.length){s.root.active=!0,s.setString(a);for(var r,n=e.view.root.worldPosition.clone().add3f(0,0,0),l=e.cells[0],c=o(e.cells);!(r=c()).done;){var u=r.value;u.coord.y>l.coord.y&&(l=u)}n.y=l.root.worldPosition.y+150,s.root.worldPosition=n}else t.memory.delete(i)})),r(s.root).delay(1),r(s.root).call((function(){s.root.destroy()}))).start()}}},e}()).memory=new Set,t._RF.pop()}}}));

System.register("chunks:///_virtual/BagGridDraw.ts",["cc","./UiBagCfg.ts","./UiBagGrid.ts"],(function(i){var t,n,e,r,a;return{setters:[function(i){t=i.cclegacy,n=i.Vec3,e=i.instantiate},function(i){r=i.UiBagCfg},function(i){a=i.UiBagGrid}],execute:function(){t._RF.push({},"1936dspi5RGiZKxtffWJv80","BagGridDraw",void 0);i("BagGridDraw",function(){function i(){}return i.exe=function(){this.drawCell()},i.drawCell=function(){var i=a.ins.cellPf,t=a.ins.gridSize,o=a.ins.grid,c=r.ins.cellSize,d=new n;d.x=t.width*c.width/-2+c.width/2,d.y=t.height*c.height/-2+c.height/2;for(var s=0;s<t.height;++s)for(var g=0;g<t.width;++g){var h=e(i);h.setParent(a.ins.root);var f=o[s][g];f.init(h);var u=new n(g*c.width,s*c.height);f.root.position=d.clone().add(u),0==f.unlocked&&(f.root.active=!1)}},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BagTrayAricleGen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Account.ts","./UiTray.ts","./CfgGameBagTrayAricleGen.ts","./WeightProbability.ts","./PfMgr.ts","./CfgArticle.ts","./CfgShape.ts"],(function(n){var a,r,t,e,i,d,o,g,l,s,c,u;return{setters:[function(n){a=n.createForOfIteratorHelperLoose},function(n){r=n.cclegacy,t=n.instantiate,e=n.Vec3,i=n.randomRangeInt},function(n){d=n.Account},function(n){o=n.UiTray},function(n){g=n.CfgGameBagTrayAricleGen},function(n){l=n.WeightProbability},function(n){s=n.PfMgrBagArticle},function(n){c=n.CfgArticleMgr},function(n){u=n.CfgShape}],execute:function(){var f;r._RF.push({},"bbf2f5MejBCMIwUpHBun0TE","BagTrayAricleGen",void 0);var p=n("BagTrayAricleGen",function(){function n(){this.BagExpandCount=0}var r=n.prototype;return r.genFirst=function(){o.ins.clear();for(var n=0,a=0,r=0;r<2;++r){var t=this.rndDeployWeapon(2);null!=t&&(o.ins.addArticleById(t),++a)}for(var e=a;e<3;++e){var i=null;n<1?(i=this.rnd2()).startsWith("BagExpand")&&n++:i=this.rndDeploy(),o.ins.addArticleById(i)}this.addAdTag()},r.gen=function(){var n=0;o.ins.clear();for(var a=0;a<3;++a){var r=null;n<1?(r=this.rnd2()).startsWith("BagExpand")&&n++:r=this.rndDeploy(),o.ins.addArticleById(r)}this.addAdTag()},r.addAdTag=function(){for(var n=function(n){return n.cfg.mergeGrade>=3||1==n.isBagExpand&&n.cfgShape.coords.length>=3},a=o.ins.articles,r=0;r<a.length;++r){var i=a[r];if(0!=n(i)){var d="AdTag/"+i.cfgShape.id,g=s.bagArticle.getChildByPath(d);if(null!=g){var l=t(g);i.view.adTag=l,l.setParent(i.view.root,!1),l.position=e.ZERO}}}},r.genGrade2=function(){this.BagExpandCount=0,o.ins.clear();var n=this.rndDeployGrade(2);o.ins.addArticleById(n);for(var a=0;a<2;++a){var r=this.rnd2();if(r.startsWith("BagExpand")){if(this.BagExpandCount>=1){a--;continue}this.BagExpandCount++}else r=this.rndGrade(r);o.ins.addArticleById(r)}},r.rnd1=function(){var n=d.ins.bag.deploy;return n[i(0,n.length)]},r.rnd2=function(){for(var n,r=new l,t=d.ins.bag.deploy,e=a(t);!(n=e()).done;){var i=n.value,o=g.data.get(i);null!=o&&r.add(i,o.pw)}for(var s=g.common,c=0;c<s.length;++c){var u=s[c];r.add(u.id,u.pw)}return r.get()},r.rndDeployGrade=function(n){return this.rndDeploy().split("_")[0]+"_"+n},r.rndDeploy=function(){for(var n,r=new l,t=d.ins.bag.deploy,e=a(t);!(n=e()).done;){var i=n.value,o=g.data.get(i);null!=o&&r.add(i,o.pw)}return r.get()},r.rndDeployWeapon=function(n){void 0===n&&(n=2);for(var r,t=new l,e=d.ins.bag.deploy,i=a(e);!(r=i()).done;){var o=r.value,s=c.data.get(o);if(!(s.tower.atkDamage<=0)&&!(u.data.get(s.bagShapeId).coords.length<n)){var f=g.data.get(o);null!=f&&t.add(o,f.pw)}}return t.get()},r.rndGrade=function(n){for(var a=new l,r=g.data.get(n),t=0;t<r.grade.length;++t){var e=r.grade[t],i=(t+1).toString();a.add(i,e)}var d=a.get();return n.split("_")[0]+"_"+d},n}());f=p,p.ins=new f,r._RF.pop()}}}));

System.register("chunks:///_virtual/BagView.ts",["cc","./WorldNode.ts","./UiBagBottom.ts","./UiTray.ts","./BagTrayAricleGen.ts","./UiBagTouch.ts","./UiFeature.ts","./PlayerRole.ts"],(function(t){var n,i,o,e,a,s,r,c,u,l,f;return{setters:[function(t){n=t.cclegacy,i=t.Vec3,o=t.tween,e=t.UIOpacity},function(t){a=t.WorldNode},function(t){s=t.UiBagBottom},function(t){r=t.UiTray},function(t){c=t.BagTrayAricleGen},function(t){u=t.UiBagTouch},function(t){l=t.UiFeature},function(t){f=t.PlayerRole}],execute:function(){n._RF.push({},"2027czko+NMqZaJhC51gMVm","BagView",void 0);t("BagView",function(){function t(){}return t.enterDirect=function(){var t=1.6;a.ins.root.scale=new i(t,t,t),a.ins.root.position=new i(t,100,t),s.ins.root.active=!0,r.ins.root.active=!0,c.ins.genFirst(),u.ins.root.active=!0,r.ins.root.scale=new i(t,t,t),l.ins.root.parent.active=!1,a.ins.layer0_Road.active=!1,a.ins.layer0_Spawn.active=!1,f.ins.main.view.root.active=!1},t.enter=function(){var t=a.ins.root;o(t).to(.5,{position:new i(0,100,0)}).start(),o(t).sequence(o(t).to(.5,{scale:new i(1.6,1.6,1.6)}),o(t).call((function(){s.ins.root.active=!0,r.ins.root.active=!0,c.ins.gen(),u.ins.root.active=!0}))).start(),this.fadeOut(l.ins.root.parent),this.fadeOut(f.ins.main.view.root),this.fadeOut(a.ins.layer0_Road),this.fadeOut(a.ins.layer0_Spawn)},t.leave=function(){o(a.ins.root).to(.5,{position:new i(0,0,0)}).start(),o(a.ins.root).to(.5,{scale:new i(1,1,1)}).start(),s.ins.root.active=!1,r.ins.root.active=!1,r.ins.clear(),u.ins.root.active=!1,this.fadeIn(l.ins.root.parent),this.fadeIn(f.ins.main.view.root),this.fadeIn(a.ins.layer0_Road),this.fadeIn(a.ins.layer0_Spawn)},t.fadeOut=function(t){var n=t.getComponent(e);null==n&&(n=t.addComponent(e)),o(n).to(.3,{opacity:0}).call((function(){t.active=!1})).start()},t.fadeIn=function(t){var n=t.getComponent(e);null==n&&(n=t.addComponent(e)),t.active=!0,n.opacity=0,o(n).to(.3,{opacity:255}).call((function(){})).start()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BezierCalc.ts",["cc"],(function(r){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"9addcFmD11F2rv3q4373V9/","BezierCalc",void 0);r("BezierCalc",function(){function r(){}return r.bezier2Path=function(r,e,a,c){for(var n=new Array,l=1;l<=c;l++){var t=l/c,i=this.bezier2(r,e,a,t);n.push(i)}return n},r.bezier2=function(r,e,a,c){var n=r.clone();n.multiplyScalar((1-c)*(1-c));var l=a.clone().multiplyScalar(2*c*(1-c));return n.add(l),l=e.clone().multiplyScalar(c*c),n.add(l),n},r.bezier3Path=function(r,e,a,c,n){for(var l=new Array,t=1;t<=n;t++){var i=t/n;l[t-1]=this.bezier3(r,e,a,c,i)}return l},r.bezier3=function(r,e,a,c,n){var l=1-n,t=r.clone().multiplyScalar(l*l*l),i=a.clone().multiplyScalar(3*n*l*l);return t.add(i),i=c.clone().multiplyScalar(3*n*n*l),t.add(i),i=e.clone().multiplyScalar(n*n*n),t.add(i),t},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/BezierMove.ts",["cc"],(function(e){var n,t,o;return{setters:[function(e){n=e.cclegacy,t=e.tween,o=e.Vec3}],execute:function(){n._RF.push({},"4c78eH10u5HzqlotViX38qY","BezierMove",void 0);e("BezierMove",function(){function e(){}return e.exe2Order=function(e,n,i,c,r){void 0===r&&(r=null);var u=e.position,s=t(e.position).to(n,i,{onUpdate:function(n,t){e.position=function(e,n,t,i){var c=(1-e)*(1-e)*n.x+2*e*(1-e)*t.x+e*e*i.x,r=(1-e)*(1-e)*n.y+2*e*(1-e)*t.y+e*e*i.y;return new o(c,r,0)}(t,u,c,i)}});null!=r&&s.call((function(){r()})),s.start()},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Buff_HpRegenIncreasePercentBelowPercentPerWave.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TowerMgr.ts","./Affix.ts"],(function(e){var r,n,t,f;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){t=e.TowerMgr},function(e){f=e.AffixType}],execute:function(){n._RF.push({},"5efcaYtKntEAKM/g7YfweuR","Buff_HpRegenIncreasePercentBelowPercentPerWave",void 0);e("Buff_HpRegenIncreasePercentBelowPercentPerWave",function(){function e(){}return e.tryExe=function(e){for(var n,a=0,c=r(t.ins.data);!(n=c()).done;)for(var o,i=n.value,u=r(i.buff.list);!(o=u()).done;){var s=o.value;if(s.affix.type==f.HpRegenIncreasePercentBelowPercentPerWave&&1!=s.extra)e.life.hp.current/e.life.hp.max<s.affix.argNList[1]&&(a+=s.affix.argNList[0],s.extra=!0)}if(!(a<=0)){var l=e.life.hp.max*a;e.life.add(l),e.view.hpBar.refresh()}},e.resetAllTowers=function(){for(var e,n=r(t.ins.data);!(e=n()).done;)for(var f,a=e.value,c=r(a.buff.list);!(f=c()).done;){var o=f.value;this.resetBuff(o)}},e.resetBuff=function(e){e.affix.type==f.HpRegenIncreasePercentBelowPercentPerWave&&(e.extra=!1)},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Buff_RndArticleMergeGradeUpgrade.ts",["cc","./GridTraverse.ts","./BagArticleGridPlace.ts","./EffectFactory.ts","./TowerAllUpdate.ts","./TowerFactory.ts","./BagArticleFactory.ts","./TowerMgr.ts"],(function(e){var r,t,n,i,c,o,a,l,u,f;return{setters:[function(e){r=e.cclegacy,t=e.Vec3,n=e.randomRangeInt},function(e){i=e.GridTraverse},function(e){c=e.BagArticleGridPlace},function(e){o=e.EffectFactory},function(e){a=e.TowerAllUpdate},function(e){l=e.TowerFactory},function(e){u=e.BagArticleFactory},function(e){f=e.TowerMgr}],execute:function(){r._RF.push({},"afe94D+xLFOjLZZTJrP08D2","Buff_RndArticleMergeGradeUpgrade",void 0);e("Buff_RndArticleMergeGradeUpgrade",function(){function e(){}return e.exe=function(){var e=this.getRndAritcle();null!=e&&(this.replace(e),a.updateAll())},e.replace=function(e){var r=e.cells.slice();c.unbind(e),e.view.root.destroy(),null!=e.tower&&f.ins.remove(e.tower);var n=e.cfg.id.split("_")[0]+"_"+(e.cfg.mergeGrade+1),i=u.create(n);i.view.root.setParent(e.view.root.parent),i.view.root.position=e.view.root.position,c.bind(i,r);var a=l.create(i);f.ins.data.push(a);var s=o.create("Merge");return s.setParent(i.view.root,!1),s.position=t.ZERO,i},e.getRndAritcle=function(){var e=new Array;if(i.exe((function(r){var t=r.article;null==t||t.cfg.mergeGrade>=4||e.push(t)})),0==e.length)return null;var r=n(0,e.length);return e[r]},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Buff.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"8b389wWpshEKri+y/jX8kEC","Buff",void 0);var e=t("Buff",(function(){this.cfg=null,this.iconId=void 0,this.affix=null,this.duration=null,this.interval=null,this.isNative=!1,this.extra=void 0,this.sender=void 0}));t("BuffRole",function(t){function n(){for(var i,n=arguments.length,e=new Array(n),u=0;u<n;u++)e[u]=arguments[u];return(i=t.call.apply(t,[this].concat(e))||this).interval=null,i}return i(n,t),n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/BuffCom.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"98e2f5L85xIOY+3z8UUxlX/","BuffCom",void 0);t("BuffCom",function(){function t(){this.list=new Array}var i=t.prototype;return i.add=function(t){-1==this.list.indexOf(t)&&this.list.push(t)},i.remove=function(t){var i=this.list.indexOf(t);-1!=i&&this.list.splice(i,1)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/BuffFactory.ts",["cc","./CfgBuff.ts","./CurrentMax.ts","./Affix.ts","./Buff.ts"],(function(f){var t,r,n,a,i;return{setters:[function(f){t=f.cclegacy},function(f){r=f.CfgBuff},function(f){n=f.CurrentMax},function(f){a=f.Affix},function(f){i=f.Buff}],execute:function(){t._RF.push({},"ec269CutAhMR6gWPVjb+C6X","BuffFactory",void 0);f("BuffFactory",function(){function f(){}return f.create=function(f){var t=new i,e=r.data.get(f);if(null!=e){var u;if(t.cfg=e,t.affix=new a,t.affix.type=e.affixType,t.affix.argN=e.affixArgN,null!=e.affixArgNList)t.affix.argNList=new Array,(u=t.affix.argNList).push.apply(u,e.affixArgNList);return t.affix.argStr=e.affixArgStr,t.duration=new n,t.duration.setCurrentAndMax(e.duration),t.interval=new n,t.interval.setCurrentAndMax(e.interval),t}console.error("BuffFactory.create 配置为空：id:"+f)},f}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BuffIncreaseCalc.ts",["cc","./Affix.ts"],(function(e){var a,t;return{setters:[function(e){a=e.cclegacy},function(e){t=e.AffixType}],execute:function(){a._RF.push({},"8bbcbXz8oxK4LdXVCndnAsO","BuffIncreaseCalc",void 0);e("DataIncrease",function(){function e(){this.attackDamageIncreasePercent=0,this.attackSpeedIncreasePercent=0,this.attackCritProbabilityIncreasePercent=0,this.attackCritMultipleIncreasePercent=0,this.attackLifeStealingPercent=0,this.AttackBulletPoisoningDamageIncreasePercent=0,this.AttackBulletPoisoningDurationIncreasePercent=0,this.AttackBulletExplodeRadiusIncreasePercent=0,this.AttackBulletExplodeDamageIncreasePercent=0,this.AttackBulletAddBuffRadiusIncreasePercent=0,this.AttackBulletAddBuffRadiusBuffIncreasePercent=0,this.AttackDamageIncreasePercentFullHp=0,this.AttackBulletProbabilityAddBuff=new Map,this.hpMaxIncrease=0,this.hpMaxIncreaseIncreasePercent=0,this.hpRegenIncreasePercent=0,this.hpRegenSpeedIncreasePercent=0,this.moveSpeedIncreasePercent=0}return e.prototype.reset=function(){for(var e in this)"number"==typeof this[e]&&(this[e.toString()]=0);this.AttackBulletProbabilityAddBuff.clear()},e}()),e("BuffIncreaseCalc",function(){function e(){}return e.exeBuffs=function(e,a){for(var t=0;t<e.length;++t)this.exeBuff(e[t],a)},e.exeBuff=function(e,a){var c=e.affix;switch(c.type){case t.AttackDamageIncreasePercent:case t.AuraAttackDamageIncreasePercent:case t.AuraAttackDamageIncreaseAllPercent:a.attackDamageIncreasePercent+=c.argN;break;case t.AttackSpeedIncreasePercent:case t.AuraAttackSpeedIncreasePercent:a.attackSpeedIncreasePercent+=c.argN;break;case t.AttackCritProbabilityIncreasePercent:case t.AuraAttackCritProbabilityIncrease:a.attackCritProbabilityIncreasePercent+=c.argN;break;case t.AttackCritMultipleIncreasePercent:a.attackCritMultipleIncreasePercent+=c.argN;break;case t.AttackLifeStealingPercent:a.attackLifeStealingPercent+=c.argN;break;case t.HpMaxIncrease:a.hpMaxIncrease+=c.argN;break;case t.HpMaxIncreaseIncreasePercent:a.hpMaxIncreaseIncreasePercent+=c.argN;break;case t.HpRegenIncreasePercent:0==e.isNative&&(a.hpRegenIncreasePercent+=c.argN);break;case t.HpRegenSpeedIncreasePercent:a.hpRegenSpeedIncreasePercent+=c.argN;break;case t.MoveSpeedDecreasePercent:a.moveSpeedIncreasePercent+=e.affix.argN;break;case t.AttackBulletProbabilityAddBuff:var r=a.AttackBulletProbabilityAddBuff.get(e.affix.argStr);null==r&&(r=0),r+=e.affix.argN,a.AttackBulletProbabilityAddBuff.set(e.affix.argStr,r);break;case t.AttackDamageIncreasePercentFullHp:a.AttackDamageIncreasePercentFullHp+=e.affix.argN;break;case t.AttackBulletExplodeRadiusIncreasePercent:a.AttackBulletExplodeRadiusIncreasePercent+=e.affix.argN;break;case t.AttackBulletExplodeDamageIncreasePercent:a.AttackBulletExplodeDamageIncreasePercent+=e.affix.argN;break;case t.AttackBulletAddBuffRadiusIncreasePercent:a.AttackBulletAddBuffRadiusIncreasePercent+=e.affix.argN;break;case t.AttackBulletAddBuffRadiusBuffIncreasePercent:a.AttackBulletAddBuffRadiusBuffIncreasePercent+=e.affix.argN;break;case t.AttackBulletPoisoningDamageIncreasePercent:a.AttackBulletPoisoningDamageIncreasePercent+=e.affix.argN;break;case t.AttackBulletPoisoningDurationIncreasePercent:a.AttackBulletPoisoningDurationIncreasePercent+=e.affix.argN}},e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/BuffOp.ts",["cc","./RoleAttributeUpdate.ts","./EffectPfMgr.ts","./Affix.ts","./BuffFactory.ts","./RoleAnimSpine.ts"],(function(e){var t,n,o,i,a,r,s,u,c;return{setters:[function(e){t=e.cclegacy,n=e.UITransform,o=e.instantiate,i=e.Vec3},function(e){a=e.RoleAttributeUpdate},function(e){r=e.EffectPfMgr},function(e){s=e.AffixType},function(e){u=e.BuffFactory},function(e){c=e.RoleAnimSpine}],execute:function(){t._RF.push({},"a4e673N2uFFlaAN5MnRkUrK","BuffOp",void 0);e("BuffOp",function(){function e(){}return e.roleAdd=function(e,t){var n=u.create(t),o=e.buff.list.find((function(e){return e.affix.type==n.affix.type}));return null==o?(this.roleAddNew(e,n),[!0,n]):(o.duration.max=n.duration.max,o.duration.setCurrentAsMax(),o.interval.max=n.interval.max,[!1,o])},e.roleAddNew=function(e,t){switch(e.buff.list.push(t),t.affix.type){case s.MoveSpeedDecreasePercent:a.exe(e);var u=o(r.ins.root.getChildByPath("BuffMoveSpeedDecrease"));u.setParent(e.view.root,!1),u.position=i.ZERO,u.setSiblingIndex(0);break;case s.AttackSpeedIncreasePercent:a.exe(e);break;case s.Burn:var f=o(r.ins.root.getChildByPath("BuffBurn"));f.setParent(e.view.root,!1),f.position=i.ZERO;break;case s.Poisoning:case s.PoisoningPercent:var l=o(r.ins.root.getChildByPath("BuffPoisoning"));l.setParent(e.view.root,!1),l.position=i.ZERO;break;case s.Frozen:e.move.lockCount++,e.attack.lockCount++,e.view.skeleton.paused=!0;var v=o(r.ins.root.getChildByPath("BuffFrozen"));v.setParent(e.view.root,!1),v.position=i.ZERO;var d=v.getChildByPath("Main").getComponent(n),h=d.getBoundingBox(),g=e.view.main.getComponent(n).getBoundingBox();g.height+=20;var p=g.height/h.height;h.width*=p,h.height*=p,d.contentSize=h.size;break;case s.Stun:e.move.lockCount++,e.attack.lockCount++,c.playIdle(e.view.skeleton);var B=e.view.main.getComponent(n).contentSize.height,P=o(r.ins.root.getChildByPath("BuffStun"));P.setParent(e.view.root,!1),P.position=new i(0,B+30,0)}},e.roleRemove=function(e,t){var n=e.buff.list[t];switch(e.buff.list.splice(t,1),n.affix.type){case s.MoveSpeedDecreasePercent:a.exe(e);var o=e.view.root.getChildByPath("BuffMoveSpeedDecrease");null==o||o.destroy();break;case s.AttackSpeedIncreasePercent:a.exe(e);break;case s.Burn:var i=e.view.root.getChildByPath("BuffBurn");null==i||i.destroy();break;case s.Poisoning:case s.PoisoningPercent:var r=e.view.root.getChildByPath("BuffPoisoning");null==r||r.destroy();break;case s.Frozen:e.move.lockCount--,e.attack.lockCount--,e.view.skeleton.paused=!1;var u=e.view.root.getChildByPath("BuffFrozen");null==u||u.destroy();break;case s.Stun:e.move.lockCount--,e.attack.lockCount--;var c=e.view.root.getChildByPath("BuffStun");null==c||c.destroy()}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BuffResetMergeGrade.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"9d66dIeMK1I3IdhMbs+wxjs","BuffResetMergeGrade",void 0);e("BuffResetMergeGrade",function(){function e(){}return e.exe=function(e,r){var t=e.cfg,n=this.getMergeGradeFactor(t.mergeGradeFactor,r);e.affix.argN=t.affixArgN*n},e.getMergeGradeFactor=function(e,r){return null==e?1:e[r-1]},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BuffString.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgBuff.ts","./Lang.ts","./ArticleString.ts"],(function(e){var t,n,r,i,f;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){r=e.CfgBuff},function(e){i=e.Lang},function(e){f=e.ArticleString}],execute:function(){n._RF.push({},"e4f397LmRdKEZm6+xeFGlzG","BuffString",void 0);e("BuffString",function(){function e(){}return e.getDescription=function(e){console.log("BuffString.getDescription "+e);var t=this.get1(e);return null!=t||null!=(t=this.get2(e))?t:null},e.get1=function(e){var t="Buff@"+e,n=i.get(t);return null==n||""==n?null:n=this.replace(e,n)},e.get2=function(e){var t=r.data.get(e),n="Buff@";null!=t.specified?n+="Specified-":n+="General-",n+=t.affixType.toString();var f=i.get(n);return null==f?f:f=this.replace(e,f)},e.replace=function(e,n){var i=r.data.get(e);if(null!=i.specified){for(var u,l=null,c=t(i.specified);!(u=c()).done;){l=u.value;break}var a=f.getName(l);n=n.replace("{name}",a)}var o=i.affixArgN;return o=Math.abs(o),-1==e.indexOf("Percent")&&-1==e.indexOf("Probability")||(o*=100),n=n.replace("{1}",o.toString())},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["cc","./Life.ts","./MoveCom.ts"],(function(e){var t,n,i;return{setters:[function(e){t=e.cclegacy},function(e){n=e.Life},function(e){i=e.MoveCom}],execute:function(){t._RF.push({},"57d4djsO21K/o+mG4cpXo0Y","Bullet",void 0);e("Bullet",(function(){this.id=void 0,this.cfg=null,this.view=new l,this.life=new n,this.Lifecycle=0,this.damge=0,this.crit=null,this.lifeStealing=null,this.move=new i,this.pathMove=null,this.target=new u,this.passCount=0,this.bounce=null,this.buffIds=new Array,this.buffs=new Array,this.sender=null}));var o=e("BulletMoveType",function(e){return e.None="None",e.Linear="Linear",e.Chase="Chase",e.Boomerang="Boomerang",e}({})),u=e("BulletTarget",(function(){this.targetRole=null,this.moveType=o.Linear})),s=(e("BulletBounce",(function(){this.bounceRectEnemy=0,this.bounceRect=0,this.bounceEnemy=0,this.bounceBetweenEnemies=new s})),e("BulletBounceBetweenEnemies",(function(){this.count=0,this.record=new Set}))),l=e("BulletView",(function(){this.root=void 0,this.rotationType=c.None})),c=e("BulletRotationType",function(e){return e.None="None",e.Direction="Direction",e.Forever="Forever",e}({}));e("Sender",(function(){this.id=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BulletBounceRect.ts",["cc","./WorldNode.ts"],(function(t){var e,n,o;return{setters:[function(t){e=t.cclegacy,n=t.UITransform},function(t){o=t.WorldNode}],execute:function(){var c;e._RF.push({},"daf0c7idqtH2rotxmps4COf","BulletBounceRect",void 0);var r=t("BulletBounceRect",function(){function t(){this.rect=void 0}return t.prototype.init=function(){var t=o.ins.root.getChildByPath("Cfg/BulletBounceRect");this.rect=t.getComponent(n).getBoundingBox(),t.destroy()},t}());c=r,r.ins=new c,e._RF.pop()}}}));

System.register("chunks:///_virtual/BulletFactory.ts",["cc","./Bullet.ts","./BulletPfMgr.ts","./CollisionBullet.ts","./CfgBullet.ts","./FrameSecConvert.ts"],(function(e){var t,n,o,u,c,l,i,r,f,a;return{setters:[function(e){t=e.cclegacy,n=e.instantiate,o=e.Collider2D,u=e.Contact2DType},function(e){c=e.Bullet,l=e.BulletBounce},function(e){i=e.BulletPfMgr},function(e){r=e.CollisionBullet},function(e){f=e.CfgBullet},function(e){a=e.FrameSecConvert}],execute:function(){t._RF.push({},"77312EHItRDTo10Sk/MycVd","BulletFactory",void 0);e("BulletFactory",function(){function e(){}return e.create=function(e){var t=new c;return t.id=e,t.Lifecycle=a.toFrame(300),s.exe(t),B.exe(t),t},e}());var s=e("BulletCfgSet",function(){function e(){}return e.exe=function(e){var t=f.data.get(e.id);e.cfg=t,e.view.rotationType=t.rotationType,e.life.hp.setCurrentAndMax(1),e.move.speed=t.moveSpeed,e.passCount=t.passCount,e.bounce=new l,e.bounce.bounceRect=t.bounceRect,e.bounce.bounceEnemy=t.bounceEnemy,e.bounce.bounceRectEnemy=t.bounceRectEnemy,e.bounce.bounceBetweenEnemies.count=t.BounceBetweenEnemies,e.target.moveType=t.moveType,null!=t.buffId&&e.buffIds.push(t.buffId)},e}()),B=e("BulletViewSet",function(){function e(){}return e.exe=function(e){var t=f.data.get(e.id),o=null!=t.viewId?t.viewId:e.id,u=i.ins.root.getChildByPath(o);e.view.root=n(u),this.collsion(e)},e.collsion=function(e){var t=e.view.root.getComponentInChildren(o);null!=t&&(t.Bullet=e,t.on(u.BEGIN_CONTACT,r.onBeginContact,r))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BulletMgr.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"aaf62bSv8tCw4ZbA4pt7lyO","BulletMgr",void 0),t("BulletMgr",function(){function t(){this.data=new Array}var n=t.prototype;return n.add=function(t){-1==this.data.indexOf(t)&&this.data.push(t)},n.remove=function(t){var n=this.data.indexOf(t);-1!=n&&this.data.splice(n,1)},t}()).ins=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/BulletMoveCalc.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"4e4cfCTw8hO56HMwQ81ISne","BulletMoveCalc",void 0);e("BulletMoveCalc",function(){function e(){}return e.exe=function(e,t){e.direction.set(t),e.direction.normalize();var o=e.offset;o.set(e.direction),o.multiplyScalar(e.speed)},e.target=function(t){var o=t.target.targetRole;if(null!=o){var n=o.view.collider.node,i=n.worldPosition.clone().subtract(t.view.root.worldPosition);e.exe(t.move,i)}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BulletMoveSys.ts",["cc","./Bullet.ts","./BulletBounceRect.ts","./BulletMoveCalc.ts","./BulletViewHelper.ts"],(function(e){var t,o,n,i,c,u;return{setters:[function(e){t=e.cclegacy},function(e){o=e.BulletRotationType,n=e.BulletMoveType},function(e){i=e.BulletBounceRect},function(e){c=e.BulletMoveCalc},function(e){u=e.BulletViewHelper}],execute:function(){t._RF.push({},"b9986qaQh1O55r2cNg1+4n3","BulletMoveSys",void 0);e("BulletMove",function(){function e(){}return e.update=function(e){null==e.pathMove?(this.move(e),this.rectBounce(e),this.view(e)):this.pathMove(e)},e.pathMove=function(e){var t=e.pathMove,o=t.path,n=o[t.idx],i=n.clone().subtract(e.view.root.position);if(i.lengthSqr()<=2500){if(t.idx++,t.idx>=o.length)return void(e.life.hp.current=0);(i=(n=o[t.idx]).clone().subtract(e.view.root.position)).normalize(),i.multiplyScalar(e.move.speed),e.move.offset=i}var c=e.view.root.position.clone();c.add(e.move.offset),e.view.root.position=c},e.view=function(e){switch(e.view.rotationType){case o.Direction:u.rotateDir(e)}},e.move=function(e){if(null==e.target.targetRole||e.target.moveType!=n.Chase){var t=e.view.root.position.clone();t.add(e.move.offset),e.view.root.position=t}else this.chaseTarget(e)},e.chaseTarget=function(e){c.target(e);var t=e.view.root.position.clone();t.add(e.move.offset),e.view.root.position=t},e.rectBounce=function(e){var t=i.ins.rect,o=e.view.root.position;if(o.x<t.xMin||o.x>t.xMax){if(e.bounce.bounceRect>0)e.bounce.bounceRect--;else{if(!(e.bounce.bounceRectEnemy>0))return;e.bounce.bounceRectEnemy--}e.move.offset.x*=-1,e.move.direction.x*=-1}else if(o.y<t.yMin||o.y>t.yMax){if(e.bounce.bounceRect>0)e.bounce.bounceRect--;else{if(!(e.bounce.bounceRectEnemy>0))return;e.bounce.bounceRectEnemy--}e.move.offset.y*=-1,e.move.direction.y*=-1}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BulletPfMgr.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var r;e._RF.push({},"aff218DpgNDFa39NqSA5/T2","BulletPfMgr",void 0);var n=t("BulletPfMgr",(function(){this.root=void 0}));r=n,n.ins=new r,e._RF.pop()}}}));

System.register("chunks:///_virtual/BulletSys.ts",["cc","./BulletMgr.ts","./BulletMoveSys.ts"],(function(t){var e,i,n,s,u;return{setters:[function(t){e=t.cclegacy,i=t.view,n=t.Rect},function(t){s=t.BulletMgr},function(t){u=t.BulletMove}],execute:function(){e._RF.push({},"848c1lUeMxNDpssMvO565bz","BulletSys",void 0),t("BulletSys",function(){function t(){}return t.update=function(){for(var t=s.ins.data,e=t.length-1;e>=0;--e){var i=t[e];this.outOfBounds(i),this.lifecycle(i),i.life.hp.current<=0?this.die(i):u.update(i)}},t.lifecycle=function(t){t.Lifecycle>0&&(t.Lifecycle--,0==t.Lifecycle&&(t.life.hp.current=0))},t.outOfBounds=function(t){if(null==this.rectBounds){var e=i.getVisibleSize();this.rectBounds=new n,this.rectBounds.xMin=-1*(e.width+200),this.rectBounds.xMax=e.width+200,this.rectBounds.yMin=-1*(e.height+200),this.rectBounds.yMax=e.height+200}var s=t.view.root.worldPosition;(s.x<this.rectBounds.xMin||s.x>this.rectBounds.xMax||s.y<this.rectBounds.yMin||s.y>this.rectBounds.yMax)&&(t.life.hp.current=0)},t.die=function(t){s.ins.remove(t),t.view.root.destroy()},t}()).rectBounds=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/BulletViewHelper.ts",["cc"],(function(e){var t,r,o;return{setters:[function(e){t=e.cclegacy,r=e.math,o=e.Vec3}],execute:function(){t._RF.push({},"0e08ceYC0FC+bfBbmxys+Dd","BulletViewHelper",void 0);e("BulletViewHelper",function(){function e(){}return e.rotateDir=function(e){var t=e.move.offset,c=r.toDegree(Math.atan2(t.y,t.x));e.view.root.eulerAngles=new o(0,0,c);var n=e.view.root.scale.clone();t.x<0?n.y>0&&(n.y*=-1,e.view.root.scale=n):n.y<0&&(n.y=Math.abs(n.y),e.view.root.scale=n)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonInterval.ts",["cc"],(function(t){var n,e,u;return{setters:[function(t){n=t.cclegacy,e=t.game,u=t.Input}],execute:function(){n._RF.push({},"732ff/Zv89PAJ+1Is22BSlU","ButtonInterval",void 0);t("ButtonInterval",function(){function t(){}return t.set=function(t,n,o){void 0===o&&(o=500);var c=e.totalTime;t.on(u.EventType.TOUCH_END,(function(){var t=e.totalTime;t-c<o||(c=t,n())}))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CellExpand.ts",["cc","./UiBagGrid.ts"],(function(n){var e,l;return{setters:[function(n){e=n.cclegacy},function(n){l=n.UiBagGrid}],execute:function(){e._RF.push({},"584be8DNxNNv53QoSP31RK/","CellExpand",void 0);n("CellExpand",function(){function n(){}return n.exe4=function(n){var e=new Array,u=n.clone();u.y+=1;var t=l.ins.getCell(u);return null!=t&&e.push(t),(u=n.clone()).x+=1,null!=(t=l.ins.getCell(u))&&e.push(t),(u=n.clone()).y-=1,null!=(t=l.ins.getCell(u))&&e.push(t),(u=n.clone()).x-=1,null!=(t=l.ins.getCell(u))&&e.push(t),e},n.exe8=function(n){var e=this.exe4(n),u=n.clone();u.x+=1,u.y+=1;var t=l.ins.getCell(u);return null!=t&&e.push(t),(u=n.clone()).x+=1,u.y+=-1,null!=(t=l.ins.getCell(u))&&e.push(t),(u=n.clone()).x+=-1,u.y+=-1,null!=(t=l.ins.getCell(u))&&e.push(t),(u=n.clone()).x+=-1,u.y+=1,null!=(t=l.ins.getCell(u))&&e.push(t),e},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CfgArticle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MergeDefinition.ts","./CfgTower.ts"],(function(e){var i,r,t,n,a;return{setters:[function(e){i=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy},function(e){t=e.MergeDefinition},function(e){n=e.CfgTowerItem,a=e.CfgTowerParser}],execute:function(){r._RF.push({},"d9b9diEXXtBiInUljslalWI","CfgArticle",void 0);var o=e("CfgArticleMgr",(function(){}));o.data=new Map;var l=e("CfgArticle",(function(){this.id=void 0,this.dataOrig=void 0,this.bagShapeId=void 0,this.mergeGrade=-1,this.gradeLineId=void 0,this.tower=new n,this.quality=1}));e("CfgArticleParser",function(){function e(){}return e.parseJson=function(e){t.ins=new t;for(var i=0;i<e.length;++i){var r=e[i],n=r.Id;if(null!=n&&""!=n){var d=new l;o.data.set(n,d),d.id=n;var s=null;d.dataOrig=r,d.bagShapeId=r.BagShapeId,null!=(s=r.MergeGrade)&&""!=s&&(d.mergeGrade=Number(s)),d.gradeLineId=r.GradeLineId,null!=(s=r.Quality)&&""!=s&&(d.quality=Number(s)),this.handleMergeDefinition(n,r),a.parseTowerItem(d.tower,r)}}},e.handleMergeDefinition=function(e,r){var n=r.MergeDefinition;if(null!=n&&""!=n){var a="true"==r.MergeHybrid;a&&t.ins.allowData.set(e,!1);for(var o,l=n.split(","),d=i(l);!(o=d()).done;){var s=o.value.split("->"),u=s[0].trim(),f=s[1].trim();t.ins.addDefinition(e,u,f,a)}}},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/CfgArticleGrade.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"ddda28VFtJCPqcphvmpNjgz","CfgArticleGrade",void 0);var t=e("CfgArticleGrade",(function(){}));t.data=new Map;var a=e("CfgArticleGradeItem",(function(){this.grade=0,this.unlocked=new Array,this.attackDamage=0,this.hpMaxIncrease=0,this.hpRegenIncreasePercent=0,this.hpRegenIncrease=0,this.getMomeyPerWave=0,this.buffIds=new Array,this.upgrade=new u})),u=e("CfgArticleGradeItemUpgrade",(function(){this.money1=0,this.itemId=null,this.itemCount=0}));e("CfgArticleGradeParser",function(){function e(){}return e.parseJson=function(e){for(var n,u=t.data,l=0;l<e.length;++l){var i=e[l],c=i.Id;if(null!=c&&""!=c){var s=u.get(c);null==s&&(s=new Array,u.set(c,s));var g=new a;if(s.push(g),g.grade=s.length,null!=(n=i.Unlocked)&&""!=n)for(var o,p=n.split(/[,\n]/),d=r(p);!(o=d()).done;){var f=o.value;g.unlocked.push(f)}if(null!=(n=i.AttackDamage)&&""!=n&&(g.attackDamage=Number(n)),null!=(n=i.HpMaxIncrease)&&""!=n&&(g.hpMaxIncrease=Number(n)),null!=(n=i.HpRegenIncreasePercent)&&""!=n&&(g.hpRegenIncreasePercent=Number(n)),null!=(n=i.HpRegenIncrease)&&""!=n&&(g.hpRegenIncrease=Number(n)),null!=(n=i.GetMomeyPerWave)&&""!=n&&(g.getMomeyPerWave=Number(n)),null!=(n=i.Buff)&&""!=n){var h,m=n.split(/[,\n]/);(h=g.buffIds).push.apply(h,m)}if(null!=(n=i.UpgradeMoney1)&&""!=n&&(g.upgrade.money1=Number(n)),null!=(n=i.UpgradeFragment)&&""!=n){var v=n.split(",");g.upgrade.itemId=v[0].trim(),g.upgrade.itemCount=Number(v[1])}}}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CfgArticleUnlock.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"0494dqLFAFNzK/uNeRVodAn","CfgArticleUnlock",void 0);var t=e("CfgArticleUnlock",(function(){}));t.data=new Map;var c=e("CfgArticleUnlockItem",(function(){this.id=void 0,this.levelIdx=-1}));e("CfgArticleUnlockParser",function(){function e(){}return e.parseJson=function(e){for(var n=0;n<e.length;++n){var r=e[n],i=r.Id;if(null!=i&&""!=i){var l=new c;t.data.set(i,l),l.id=i;var o=r.LevelIdx;l.levelIdx=Number(o)}}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CfgBuff.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Affix.ts","./AuraScopeType.ts","./FrameSecConvert.ts"],(function(r){var e,a,t,i,u;return{setters:[function(r){e=r.createForOfIteratorHelperLoose},function(r){a=r.cclegacy},function(r){t=r.AffixType},function(r){i=r.AuraScopeType},function(r){u=r.FrameSecConvert}],execute:function(){a._RF.push({},"a95d3MGL+lK+JIZBMm8k48h","CfgBuff",void 0);var n=r("CfgBuff",(function(){}));n.data=new Map;var f=r("CfgBuffItem",(function(){this.id=void 0,this.affixType=t.None,this.affixArgN=0,this.affixArgNList=null,this.affixArgStr=void 0,this.duration=0,this.interval=-2,this.grade=1,this.specified=null,this.isAura=!1,this.auraOverlay=!0,this.auraScopeType=i.Dir8,this.mergeGradeFactor=null,this.unlockCount=-1}));r("CfgBuffParser",function(){function r(){}return r.parseJson=function(r){for(var a=null,t=0;t<r.length;++t){var i=r[t],l=i.Id;if(null!=l&&""!=l){var o=new f;if(n.data.set(l,o),o.id=l,null!=(a=i.Type)&&""!=a&&(o.affixType=a),null!=(a=i.ArgN)&&""!=a)if("number"==typeof a)o.affixArgN=a;else{var s=a.split(",");if(1==s.length)o.affixArgN=Number(a);else{o.affixArgN=Number(s[0]),o.affixArgNList=new Array;for(var c,p=e(s);!(c=p()).done;){var v=c.value;o.affixArgNList.push(Number(v))}}}if(null!=(a=i.ArgStr)&&""!=a&&(o.affixArgStr=a),null!=(a=i.Duration)&&""!=a&&(o.duration=u.toFrame(Number(a))),null!=(a=i.Interval)&&""!=a&&(o.interval=u.toFrame(Number(a))),null!=(a=i.Grade)&&""!=a&&(o.grade=Number(a)),null!=(a=i.Specified)&&""!=a&&"All"!=a){o.specified=new Set;for(var d,g=a.split(/[,\n]/).filter(Boolean),A=e(g);!(d=A()).done;){var h=d.value;h=h.trim(),o.specified.add(h)}}if(null!=(a=i.IsAura)&&""!=a&&(o.isAura="true"==a),null!=(a=i.AuraOverlay)&&""!=a&&(o.auraOverlay="true"==a),null!=(a=i.AuraScope)&&""!=a&&(o.auraScopeType=a),null!=(a=i.MergeGradeFactor)&&""!=a){var m=a.split(",");o.mergeGradeFactor=new Array;for(var N,y=e(m);!(N=y()).done;){var x=N.value;o.mergeGradeFactor.push(Number(x))}}null!=(a=i.UnlockCount)&&""!=a&&(o.unlockCount=Number(a))}}},r}());a._RF.pop()}}}));

System.register("chunks:///_virtual/CfgBullet.ts",["cc","./Bullet.ts","./FrameSecConvert.ts"],(function(e){var n,t,u,o;return{setters:[function(e){n=e.cclegacy},function(e){t=e.BulletRotationType,u=e.BulletMoveType},function(e){o=e.FrameSecConvert}],execute:function(){n._RF.push({},"3c37clQ5dBDbpSQ5H7zBVBR","CfgBullet",void 0);var l=e("CfgBullet",(function(){}));l.data=new Map;var i=e("CfgBulletItem",(function(){this.id=void 0,this.viewId=void 0,this.moveSpeed=void 0,this.passCount=0,this.rotationType=t.None,this.bounceRect=0,this.bounceEnemy=0,this.bounceRectEnemy=0,this.BounceBetweenEnemies=0,this.moveType=u.Linear,this.buffId=null}));e("CfgBulletParser",function(){function e(){}return e.parseJson=function(e){for(var n=0;n<e.length;++n){var t=e[n],u=t.Id;if(null!=u&&""!=u){var c=new i;l.data.set(u,c),c.id=u;var r=Number(t.MoveSpeed);c.moveSpeed=o.toSecond(r);var s=null;null!=(s=t.RotationType)&&""!=s&&(c.rotationType=s),null!=(s=t.Pass)&&""!=s&&(c.passCount=Number(s)),null!=(s=t.BounceRect)&&""!=s&&(c.bounceRect=Number(s)),null!=(s=t.BounceEnemy)&&""!=s&&(c.bounceEnemy=Number(s)),null!=(s=t.BounceRectEnemy)&&""!=s&&(c.bounceRectEnemy=Number(s)),null!=(s=t.BounceBetweenEnemies)&&""!=s&&(c.BounceBetweenEnemies=Number(s)),null!=(s=t.ViewId)&&""!=s&&(c.viewId=s),null!=(s=t.MoveType)&&""!=s&&(c.moveType=s.trim()),null!=(s=t.BuffId)&&""!=s&&(c.buffId=s)}}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CfgDailyCheckin.ts",["cc","./ItemData.ts"],(function(n){var t,r;return{setters:[function(n){t=n.cclegacy},function(n){r=n.ItemData}],execute:function(){t._RF.push({},"2dedaVLOThNNrCclyT4cQ3Z","CfgDailyCheckin",void 0);var a=n("CfgDailyCheckin",(function(){}));a.data=new Array;n("CfgDailyCheckinParser",function(){function n(){}return n.parseJson=function(n){for(var t=a.data,e=0;e<n.length;++e){var i=n[e],c=i.Id;if(null!=c&&""!=c){var u=new Array;t.push(u);for(var f=null,o=1;;++o){var l="Item"+o;if(""==(f=i[l])||null==f)break;var s=new r;u.push(s),s.id=f.trim(),l="Item1Count",s.count=Number(i[l])}}}},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CfgDaySign.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,n,a;return{setters:[function(t){r=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,a=t._decorator}],execute:function(){n._RF.push({},"c9cf02TGKtFtqtxoHyzDUj9","CfgDaySign",void 0);a.ccclass,a.property;var e=t("CfgDaySign",(function(){this.id=void 0,this.DayGifts=new Array})),i=t("CfgDaySignMgr",(function(){}));i.data=new Map;t("CfgDaySignParser",function(){function t(){}return t.parseJson=function(t){for(var n=0;n<t.length;++n){var a=t[n],o=a.Id;if(null!=o&&""!=o){var s=new e;i.data.set(o,s),s.id=o;var f=a.DayGifts;if(f&&"string"==typeof f)for(var c,u=f.split(/[|\n]/),g=r(u);!(c=g()).done;){var l=c.value,y=Number(l.trim());isNaN(y)||s.DayGifts.push(y)}}}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CfgFarm.ts",["cc"],(function(n){var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"03dec31GRlCDLw6dbkUIuaJ","CfgFarm",void 0);var e=n("CfgFarm",(function(){}));e.data=new Array;var t=n("CfgFarmItem",(function(){this.id=void 0,this.unlock_level=void 0}));n("CfgFarmParser",function(){function n(){}return n.parseJson=function(n){for(var r=0;r<n.length;++r){var a=n[r],i=a.Id;if(null!=i&&""!=i){var u=a.UnlockLevel;if(null!=u&&""!=u){var c=new t;c.id=i,c.unlock_level=u,e.data.push(c),c.id=i}}}},n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/CfgFeature.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"5b39dUHpeVOm6oVZgn59HTh","CfgFeature",void 0);var n=e("CfgFeature",(function(){}));n.data=new Array;var r=e("CfgFeatureItem",(function(){this.id=void 0}));e("CfgFeatureParser",function(){function e(){}return e.parseJson=function(e){for(var t=0;t<e.length;++t){var u=e[t].Id;if(null!=u&&""!=u){var a=new r;n.data.push(a),a.id=u}}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CfgGameBagTrayAricleGen.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"20119oS42xIN7BOPbXN2NHE","CfgGameBagTrayAricleGen",void 0);var a=e("CfgGameBagTrayAricleGen",(function(){}));a.data=new Map,a.common=Array();var n=e("CfgGameBagTrayAricleGenItem",(function(){this.id=void 0,this.pw=void 0,this.grade=void 0}));e("CfgGameBagTrayAricleGenParser",function(){function e(){}return e.parseJson=function(e){for(var r=null,i=0;i<e.length;++i){var t=e[i],o=t.Id;if(null!=o&&""!=o){var c=new n;null!=(r=t.isCommon)&&""!=r?a.common.push(c):a.data.set(o,c),c.id=o,c.pw=Number(t.Weight),c.grade=new Array;for(var u=1;u<10;++u){var g=t["MergeGrade"+u],s=0;null!=g&&""!=g&&(s=Number(g)),c.grade.push(s)}}}},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/CfgGeneral.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){var a;n._RF.push({},"59e2bTWKGRBJY6mQG6312R1","CfgGeneral",void 0);var r=e("CfgGeneral",(function(){this.BagInitDeployedIds=new Array,this.BagInitUnlockedIds=new Array,this.BagAllArticleIds=new Array}));a=r,r.ins=new a;e("CfgGeneralParser",function(){function e(){}return e.parseJson=function(e){for(var n=0;n<e.length;++n){var a=e[n],l=a.Id;if(null!=l&&""!=l){var s=a.Val;switch(l){case"BagInitDeployedIds":var t,i=s.split(",").filter(Boolean);(t=r.ins.BagInitDeployedIds).push.apply(t,i);break;case"BagInitUnlockedIds":var c,o=s.split(",").filter(Boolean);(c=r.ins.BagInitUnlockedIds).push.apply(c,o);break;case"BagAllArticleIds":var p,d=s.split(",").filter(Boolean);(p=r.ins.BagAllArticleIds).push.apply(p,d)}}}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CfgGiftGroup.ts",["cc"],(function(r){var t,e;return{setters:[function(r){t=r.cclegacy,e=r._decorator}],execute:function(){t._RF.push({},"d2fa6SQEjNFS6JbrGUCTCr2","CfgGiftGroup",void 0);e.ccclass,e.property;var u=r("CfgGiftGroup",(function(){this.Id=void 0,this.ItemsId=new Array,this.ItemsNum=new Array})),n=r("CfgGiftGroupMgr",(function(){}));n.data=new Map;r("CfgGiftGroupParser",function(){function r(){}return r.parseJson=function(r){for(var t=0;t<r.length;++t){var e=r[t],s=e.Id;if(null==s||""==s)return;var f=new u;n.data.set(s,f),f.Id=s;var i=e.ItemsId;if(null!=i&&"number"==typeof i&&f.ItemsId.push(Number(i)),""!=i&&"string"==typeof i){var a=i.split(/[|\n]/);for(var o in a){var p=Number(o);f.ItemsId.push(p)}}if(null!=(i=e.ItemsNum)&&"number"==typeof i&&f.ItemsNum.push(Number(i)),""!=i){var c,m=i.split(/[|\n]/);(c=f.ItemsNum).push.apply(c,m.map((function(r){return Number(r)})))}}},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CfgInviteConfig.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"59e91VT/SRPP4VcLxACyObJ","CfgInviteConfig",void 0);var i=n("CfgInviteConfig",(function(){this.Id=void 0,this.InviteCount=void 0,this.GiftID=void 0})),e=n("CfgInviteConfigMgr",(function(){}));e.data=new Map;n("CfgInviteConfigParser",function(){function n(){}return n.parseJson=function(n){for(var t=0;t<n.length;++t){var f=n[t],o=f.Id;if(null==o||""==o)return;var r=new i;e.data.set(o,r),r.Id=o,r.InviteCount=Number(f.InviteCount),r.GiftID=f.GiftID}},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CfgItem.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"411bfTeoNtBy6v5C5aOJjGd","CfgItem",void 0);var e=t("CfgItem",(function(){this.id=void 0,this.quality=void 0})),i=t("CfgItemMgr",(function(){}));i.data=new Map;t("CfgItemParser",function(){function t(){}return t.parseJson=function(t){for(var n=0;n<t.length;++n){var r=t[n],u=r.Id;if(null!=u&&""!=u){var a=new e;i.data.set(u,a),a.id=u;var f;null!=(f=r.Quality)&&""!=f&&(a.quality=Number(f))}}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CfgItemDraw.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"b25d0rIjJtMO7Jy8GKFxsTc","CfgItemDraw",void 0);var e=t("CfgItemDraw",(function(){}));e.data=new Map;var n=t("CfgItemDrawItem",(function(){this.id=void 0,this.min=0,this.max=0,this.items=new Array})),i=t("CfgItemDrawItemItem",(function(){this.id=null,this.w=0}));t("CfgItemDrawParser",function(){function t(){}return t.parseJson=function(t){for(var r=0;r<t.length;++r){var a=t[r],s=a.Id;if(null!=s&&""!=s){var u=new n;e.data.set(s,u),u.id=s,u.min=Number(a.Min),u.max=Number(a.Max);for(var m=1;;++m){var f=a["Item"+m];if(null==f||""==f)break;var c=f.split(",");if(!(c.length<2)){var o=new i;u.items.push(o),o.id=c[0].trim(),o.w=Number(c[1])}}}}},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/CfgItemReward.ts",["cc","./ItemData.ts"],(function(t){var e,r;return{setters:[function(t){e=t.cclegacy},function(t){r=t.ItemData}],execute:function(){e._RF.push({},"e6b796jcHJF7rTT9kwF+Yn+","CfgItemReward",void 0);var n=t("CfgItemRewardMgr",(function(){}));n.data=new Map;var a=t("CfgItemRewardItem",(function(){this.id=void 0,this.list=new Array}));t("CfgItemRewardParser",function(){function t(){}return t.parseJson=function(t){for(var e=0;e<t.length;++e){var i=t[e],u=i.Id;if(null!=u&&""!=u){var c=new a;n.data.set(u,c),c.id=u;for(var f=null,s=1;s<20;++s){if(""==(f=i["Item"+s])||null==f)break;var o=f.split(","),d=new r;c.list.push(d),d.id=o[0].trim(),d.count=Number(o[1])}}}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CfgLevelGeneralMgr.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"450b5o96qRPGLxuDZtVHV0C","CfgLevelGeneralMgr",void 0);var r=e("CfgLevelGeneralMgr",(function(){}));r.data=new Map;var t=e("CfgLevelGeneralItem",(function(){this.id=void 0,this.mapId=void 0}));e("CfgLevelGeneralParser",function(){function e(){}return e.parseJson=function(e){for(var n=r.data,a=0;a<e.length;++a){var i=e[a],o=i.Id.toString();if(null!=o&&""!=o){var u=new t;n.set(o,u),u.id=o,u.mapId=i.MapId}}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CfgLevelWaveMgr.ts",["cc","./FrameSecConvert.ts"],(function(e){var r,a;return{setters:[function(e){r=e.cclegacy},function(e){a=e.FrameSecConvert}],execute:function(){r._RF.push({},"e253d1KPNNBuIFHbIXoP3ac","CfgLevelWaveMgr",void 0);var t=e("CfgLevelWaveMgr",(function(){}));t.data=new Map,t.main=Array(null);var n=e("LevelData",(function(){this.id=void 0,this.waves=new Array(null)})),i=e("WaveData",(function(){this.rewards=new Array,this.items=new Array})),o=e("WaveItem",(function(){this.triggerTime=void 0,this.genRoleId=void 0,this.hpMaxFactor=1,this.attackFactor=1}));e("CfgLevelWaveParser",function(){function e(){}return e.parseJson=function(e){for(var r=t.data,a=0;a<e.length;++a){var i=e[a],o=i.Id.toString();if(null!=o&&""!=o){var v=r.get(o);null==v&&((v=new n).id=o,r.set(o,v));var u=this.parseWave(i);v.waves.push(u)}}for(var s=1;;++s){var c=s.toString(),l=r.get(c);if(null==l)break;t.main.push(l)}},e.parseWave=function(e){var r=new i,t=1,n=e.HpMaxFactor;null!=n&&""!=n&&(t=Number(n));var v=1;null!=(n=e.AttackFactor)&&""!=n&&(v=Number(n));for(var u=1;;++u){var s=e["G"+u+"_Id"];if(null==s||""==s)break;n=e["G"+u+"_Delay"];var c=a.toFrame(Number(n)),l="G"+u+"_Count";n=e[l];var f=Number(n);n=e[l="G"+u+"_Interval"];for(var g=a.toFrame(Number(n)),m=0;m<f;++m){var h=new o;r.items.push(h),h.genRoleId=s,h.triggerTime=c+m*g,h.hpMaxFactor=t,h.attackFactor=v}}return r.items.sort((function(e,r){return e<r?-1:e>r?1:0})),r},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/CfgLoad.ts",["cc","./CfgLevelWaveMgr.ts","./CfgArticle.ts","./CfgArticleGrade.ts","./CfgArticleUnlock.ts","./CfgBuff.ts","./CfgBullet.ts","./CfgFeature.ts","./CfgGameBagTrayAricleGen.ts","./CfgGeneral.ts","./CfgItem.ts","./CfgItemDraw.ts","./CfgRole.ts","./CfgShape.ts","./CfgUpgrade.ts","./CfgLevelGeneralMgr.ts","./CfgItemReward.ts","./CfgDailyCheckin.ts","./CfgShop.ts","./LoaderRemote.ts"],(function(t){var e,n,a,s,o,r,i,f,c,g,u,h,d,l,C,p,P,m,j,J;return{setters:[function(t){e=t.cclegacy},function(t){n=t.CfgLevelWaveParser},function(t){a=t.CfgArticleParser},function(t){s=t.CfgArticleGradeParser},function(t){o=t.CfgArticleUnlockParser},function(t){r=t.CfgBuffParser},function(t){i=t.CfgBulletParser},function(t){f=t.CfgFeatureParser},function(t){c=t.CfgGameBagTrayAricleGenParser},function(t){g=t.CfgGeneralParser},function(t){u=t.CfgItemParser},function(t){h=t.CfgItemDrawParser},function(t){d=t.CfgRoleParser},function(t){l=t.CfgShapeParser},function(t){C=t.CfgUpgradeParser},function(t){p=t.CfgLevelGeneralParser},function(t){P=t.CfgItemRewardParser},function(t){m=t.CfgDailyCheckinParser},function(t){j=t.CfgShopParser},function(t){J=t.LoaderRemote}],execute:function(){e._RF.push({},"31addwCJMtGN5KpujUXG7z9","CfgLoad",void 0);t("CfgLoad",function(){function t(){this.pathMode=1,this.flag=!1}var e=t.prototype;return e.exe=function(t){if(1!=this.flag){this.flag=!1,this.pathMode=2;var e=new J;e.onComplete=t,this.common(e),this.home(e),this.game(e),e.exe()}else t()},e.getPath=function(t){var e=t;switch(this.pathMode){case 1:e="Common/Cfg/"+t;break;case 2:e="https://bagtd.oss-cn-beijing.aliyuncs.com/test001/"+t+".json"}return e},e.common=function(t){t.add(this.getPath("General"),(function(t){g.parseJson(t.json)})),t.add(this.getPath("Item"),(function(t){u.parseJson(t.json)})),t.add(this.getPath("ItemDraw"),(function(t){h.parseJson(t.json)}))},e.home=function(t){t.add(this.getPath("ArticleUnlock"),(function(t){o.parseJson(t.json)})),t.add(this.getPath("ItemReward"),(function(t){P.parseJson(t.json)})),t.add(this.getPath("DailyCheckin"),(function(t){m.parseJson(t.json)})),t.add(this.getPath("Shop"),(function(t){j.parseJson(t.json)}))},e.game=function(t){t.add(this.getPath("LevelGeneral"),(function(t){p.parseJson(t.json)})),t.add(this.getPath("LevelWave"),(function(t){n.parseJson(t.json)})),t.add(this.getPath("Article"),(function(t){a.parseJson(t.json)})),t.add(this.getPath("Bullet"),(function(t){i.parseJson(t.json)})),t.add(this.getPath("Role"),(function(t){d.parseJson(t.json)})),t.add(this.getPath("Upgrade"),(function(t){C.parseJson(t.json)})),t.add(this.getPath("Feature"),(function(t){f.parseJson(t.json)})),t.add(this.getPath("Buff"),(function(t){r.parseJson(t.json)})),t.add(this.getPath("Shape"),(function(t){l.parseJson(t.json)})),t.add(this.getPath("ArticleGrade"),(function(t){s.parseJson(t.json)})),t.add(this.getPath("GameBagTrayAricleGen"),(function(t){c.parseJson(t.json)}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CfgMushrom.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"aca58gHBhtFc45LcTfY3PuK","CfgMushrom",void 0);var r=n("CfgMushroom",(function(){}));r.data=new Map;var o=n("CfgMushroomItem",(function(){this.id=void 0,this.name=void 0}));n("CfgMushroomParser",function(){function n(){}return n.parseJson=function(n){for(var t=0;t<n.length;++t){var u=n[t],a=u.Id;if(null!=a&&""!=a){var e=u.Name;if(null!=e&&""!=e){var i=new o;i.id=a,i.name=e,r.data.set(a,i),i.id=a}}}},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CfgRole.ts",["cc","./FrameSecConvert.ts"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy},function(e){a=e.FrameSecConvert}],execute:function(){t._RF.push({},"7e640EPnTlGJa4Zq+30djS6","CfgRole",void 0);var i=e("CfgRole",(function(){}));i.data=new Map;var n=e("CfgRoleItem",(function(){this.id=void 0,this.viewId=void 0,this.dataOrig=void 0,this.attackDamage=void 0,this.attackCd=void 0,this.moveSpeed=void 0,this.exp=void 0,this.lifeHpMax=void 0,this.hpBarId=null}));e("CfgRoleParser",function(){function e(){}return e.parseJson=function(e){for(var t=0;t<e.length;++t){var o=e[t],r=o.Id;if(null!=r&&""!=r){var d=new n;d.id=r,i.data.set(r,d);var u=o.View;null!=u&&""!=u&&(d.viewId=u),d.dataOrig=o,d.moveSpeed=a.toSecond(Number(o.MoveSpeed)),d.exp=Number(o.Exp),d.lifeHpMax=Number(o.LifeHpMax),null!=(u=o.AttackDamage)&&""!=u&&(d.attackDamage=Number(u)),null!=(u=o.AttackCd)&&""!=u&&(d.attackCd=a.toFrame(Number(u))),null!=(u=o.HpBarId)&&""!=u&&(d.hpBarId=u)}}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CfgShape.ts",["cc","./TileShapeDataParser.ts"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy},function(e){a=e.TileShapeDataParser}],execute:function(){t._RF.push({},"7adf8bFX2ZCWYQVIVKoJ1Hs","CfgShape",void 0);var r=e("CfgShape",(function(){}));r.data=new Map;var n=e("CfgShapeItem",(function(){this.id=void 0,this.str=void 0,this.coords=void 0}));e("CfgShapeParser",function(){function e(){}return e.parseJson=function(e){for(var t=0;t<e.length;++t){var i=e[t],s=i.Id;if(null!=s&&""!=s){var o=new n;r.data.set(s,o),o.id=s,o.str=i.Shape,o.coords=a.exe(o.str)}}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CfgShop.ts",["cc","./ItemData.ts"],(function(t){var a,i;return{setters:[function(t){a=t.cclegacy},function(t){i=t.ItemData}],execute:function(){a._RF.push({},"a1853dOPhlIbaugnVP8ekJz","CfgShop",void 0);var e=t("CfgShop",(function(){}));e.data=new Map,e.daliyFixed=new Array,e.daliy=new Array,e.money001=new Array;var n=t("CfgShopItem",(function(){this.id=void 0,this.nameLangId=void 0,this.target=void 0,this.cost=void 0,this.adDaliyLimitId=null,this.adDaliyLimitTotal=0}));t("CfgShopParser",function(){function t(){}return t.parseJson=function(t){for(var a=e.data,o=0;o<t.length;++o){var r=t[o],d=r.Id;if(null!=d&&""!=d){var s=new n;a.set(d,s),s.id=d,s.nameLangId=r.NameLangId,s.target=new i,s.target.id=r.ItemId,s.target.count=Number(r.ItemCount),s.cost=new i,s.cost.id=r.CostItemId,s.cost.count=Number(r.CostItemCount);var u=r.AdDaliyLimitId;null!=u&&""!=u&&(s.adDaliyLimitId=u,u=r.AdDaliyLimitTotal,s.adDaliyLimitTotal=Number(u)),d.startsWith("Money001")?e.money001.push(s):d.startsWith("DaliyFixed")?e.daliyFixed.push(s):d.startsWith("Daliy")&&e.daliy.push(s)}}},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/CfgTower.ts",["cc","./AttackCom.ts","./FrameSecConvert.ts"],(function(t){var e,r,a;return{setters:[function(t){e=t.cclegacy},function(t){r=t.AttackTargetSelectionType},function(t){a=t.FrameSecConvert}],execute:function(){e._RF.push({},"7536eWeUWxNDY+OPrHQCaIP","CfgTower",void 0);t("CfgTowerItem",(function(){this.atkBulletId=void 0,this.atkDamage=0,this.atkCd=0,this.atkCritProbability=0,this.atkCritMultiple=2,this.atkTargeSelType=r.None,this.atkBulletScatterCount=0,this.buffs=new Array})),t("CfgTowerParser",function(){function t(){}return t.parseTowerItem=function(t,e){var l;if(null!=(l=e.AttackBulletId)&&""!=l&&(t.atkBulletId=l),null!=(l=e.AttackValue)&&""!=l&&(t.atkDamage=Number(l)),null!=(l=e.AttackCd)&&""!=l&&(t.atkCd=a.toFrame(Number(l))),l=e.AttackTargetSelectionType,t.atkTargeSelType=null!=l&&""!=l?l:r.First,null!=(l=e.AttackCritProb)&&""!=l&&(t.atkCritProbability=100*Number(l)),null!=(l=e.AttackCritMultiple)&&""!=l&&(t.atkCritMultiple=Number(l)),null!=(l=e.AttackBulletScatterCount)&&""!=l&&(t.atkBulletScatterCount=Number(l)),null!=(l=e.Buffs)&&""!=l)for(var u=l.split(/[,\n]/),i=0;i<u.length;++i){var n=u[i];t.buffs.push(n.trim())}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CfgUpgrade.ts",["cc"],(function(r){var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){n._RF.push({},"8093805mEpGcLhky07bqEU8","CfgUpgrade",void 0);var e=r("CfgUpgrade",(function(){}));e.data=new Array;r("CfgUpgradeParser",function(){function r(){}return r.parseJson=function(r){e.data.push(0);for(var n=0;n<r.length;++n){var t=r[n],a=t.Id;null!=a&&""!=a&&e.data.push(Number(t.Exp))}},r}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Channel.ts",["cc","./ChannelType.ts"],(function(e){var n,t,a;return{setters:[function(e){n=e.cclegacy,t=e.sys},function(e){a=e.ChannelType}],execute:function(){n._RF.push({},"83ba3dFHFZNELtk2eUlIimL","Channel",void 0);var c=e("Channel",(function(){}));c.type=void 0;e("ChannelInit",function(){function e(){}return e.exe=function(){switch(this.setChannelType(),c.type){case a.Minigame_ByteDance:}},e.setChannelType=function(){switch(c.type=a.None,t.platform){case t.Platform.ANDROID:c.type=a.XiaoMi;break;case t.Platform.WECHAT_GAME:break;case t.Platform.BYTEDANCE_MINI_GAME:c.type=a.Minigame_ByteDance}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ChannelType.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"593e9kuq3xGoY0q/AEnzTD/","ChannelType",void 0);e("ChannelType",function(e){return e.None="None",e.GooglePlay="GooglePlay",e.XiaoMi="XiaoMi",e.Minigame_ByteDance="Minigame_ByteDance",e.Minigame_Wx_Mine="Minigame_Wx_Mine",e.Minigame_Wx_LHT="Minigame_Wx_LHT",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/CollisionBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletMgr.ts","./RoleGetDamage.ts","./RoleMgr.ts","./BulletMoveCalc.ts","./BuffOp.ts","./FrameSecConvert.ts","./RoleMoveSys.ts","./PlayerRole.ts","./Affix.ts","./CfgBuff.ts","./BulletFactory.ts","./WorldNode.ts","./EffectFactory.ts","./FrameCall.ts","./BulletPfMgr.ts","./RoleAttributeUpdate.ts","./BuffIncreaseCalc.ts"],(function(e){var t,n,a,r,o,i,c,l,u,s,f,d,g,v,B,m,p,A,b,h,I,P,x,R,C,y,k;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,a=e.randomRangeInt,r=e.UITransform,o=e.Vec3,i=e.CircleCollider2D,c=e.instantiate,l=e.Contact2DType},function(e){u=e.BulletMgr},function(e){s=e.RoleGetDamage,f=e.DamageValueShow},function(e){d=e.RoleMgr},function(e){g=e.BulletMoveCalc},function(e){v=e.BuffOp},function(e){B=e.FrameSecConvert},function(e){m=e.RoleMoveSys},function(e){p=e.PlayerRole},function(e){A=e.AffixType},function(e){b=e.CfgBuff},function(e){h=e.BulletFactory},function(e){I=e.WorldNode},function(e){P=e.EffectFactory},function(e){x=e.FrameCall},function(e){R=e.BulletPfMgr},function(e){C=e.RoleAttributeUpdate},function(e){y=e.DataIncrease,k=e.BuffIncreaseCalc}],execute:function(){n._RF.push({},"af07bq4RHNEtIuaOMrJMF4I","CollisionBullet",void 0),e("CollisionBullet",function(){function e(){}return e.onBeginContact=function(e,t,n){var a=e.Bullet,r=t.Role;null!=r&&this.bulletAndRole(a,r)},e.bulletAndRole=function(e,t){console.log("子弹击中角色"),e.target.targetRole==t&&(e.target.targetRole=null),this.buff(e,t),this.damage(e,t),this.bounce(e,t),this.pass(e)},e.pass=function(e){e.passCount--,e.passCount<0&&(e.life.hp.current=0)},e.damage=function(e,t){var n=e.damge,a=this.crit(e),r=a!=n;n=a,s.exe(t,n,!r,e.sender),r&&f.crit(t.view.root.worldPosition.clone().add3f(0,50,0),n),this.lifeStealing(e,n)},e.crit=function(e){var t=e.damge,n=e.crit;if(null==n)return t;var r=e.crit.probability;return r<=0||(r*=100,a(0,100)<r&&(t*=e.crit.multiple)),t},e.lifeStealing=function(e,t){var n=e.lifeStealing;if(null!=n&&0!=n.percent){var a=t*n.percent;p.ins.main.life.add(a),p.ins.main.view.hpBar.refresh()}},e.bounce=function(e,t){if(e.bounce.bounceBetweenEnemies.count>0)return e.bounce.bounceBetweenEnemies.count--,e.bounce.bounceBetweenEnemies.record.add(t),e.target.targetRole=this.findNearest(e.view.root.position,e.bounce.bounceBetweenEnemies.record),g.target(e),void e.passCount++;if(e.bounce.bounceEnemy>0)e.bounce.bounceEnemy--;else{if(!(e.bounce.bounceRectEnemy>0))return;e.bounce.bounceRectEnemy--}var n=t.view.main.getComponent(r).getBoundingBox(),a=e.view.root.getComponent(r).convertToWorldSpaceAR(o.ZERO);t.view.main.parent.getComponent(r).convertToNodeSpaceAR(a,a);var i=Math.abs(a.y-n.yMax),c=Math.abs(a.y-n.yMin),l=Math.abs(a.x-n.xMin),u=Math.abs(a.x-n.xMax);(l<i&&l<c&&l<u||u<i&&u<c&&u<l)&&(e.move.offset.x*=-1,e.move.direction.x*=-1,e.bounce.bounceRect--,e.passCount++),(i<c&&i<l&&i<u||c<i&&c<l&&c<u)&&(e.move.offset.y*=-1,e.move.direction.y*=-1,e.bounce.bounceRect--,e.passCount++)},e.buff=function(e,t){this.dataIncr.reset(),k.exeBuffs(e.buffs,this.dataIncr),this.AttackBulletProbabilityAddBuff(e,t,this.dataIncr),this.AttackDamageIncreasePercentFullHp(e,t,this.dataIncr);for(var n=0;n<e.buffIds.length;++n){var a=e.buffIds[n],r=b.data.get(a);if(null!=r)switch(r.affixType){case A.Knockback:var o=e.move.direction.clone();m.ins.add(t,.2,80,o);break;case A.PoisoningPercent:this.PoisoningPercent(e,t,a);break;case A.Explode:this.Explode(e,t,r);break;case A.AttackBulletAddBuffRadius:this.AttackBulletAddBuffRadius(e,t,r);break;default:v.roleAdd(t,a)[1].sender=e.sender}}},e.AttackBulletProbabilityAddBuff=function(e,n,r){for(var o,i=t(this.dataIncr.AttackBulletProbabilityAddBuff);!(o=i()).done;){var c=o.value,l=c[1],u=c[0];if(a(0,100)<100*l)v.roleAdd(n,u)[1].sender=e.sender}},e.AttackDamageIncreasePercentFullHp=function(e,t,n){if(this.dataIncr.AttackDamageIncreasePercentFullHp>0&&t.life.hp.current==t.life.hp.max){var a=e.damge;a*=1+this.dataIncr.AttackDamageIncreasePercentFullHp,e.damge=a}},e.PoisoningPercent=function(e,t,n){var a=v.roleAdd(t,n),r=a[0],o=a[1];if(0!=r){o.sender=e.sender;var i=e.damge*o.affix.argN;if(this.dataIncr.AttackBulletPoisoningDamageIncreasePercent>0&&(i*=1+this.dataIncr.AttackBulletPoisoningDamageIncreasePercent),this.dataIncr.AttackBulletPoisoningDurationIncreasePercent>0){var c=o.duration.max;c*=1+this.dataIncr.AttackBulletPoisoningDurationIncreasePercent,o.duration.setCurrentAndMax(c)}i=Math.round(i),o.affix.argN=i}},e.Explode=function(e,t,n){var a=this,r=e.view.root.worldPosition;x.ins.once((function(){var t=h.create("Explode");t.view.root.setParent(I.ins.layer2,!1),t.view.root.worldPosition=r,t.Lifecycle=B.toFrame(.1),t.damge=e.damge*n.affixArgN,t.sender=e.sender,u.ins.add(t);var o=t.view.root.getComponentInChildren(i);if(null!=n.affixArgNList){var c=n.affixArgNList[1];o.radius=c}a.dataIncr.AttackBulletExplodeRadiusIncreasePercent>0&&(o.radius*=1+a.dataIncr.AttackBulletExplodeRadiusIncreasePercent),a.dataIncr.AttackBulletExplodeDamageIncreasePercent>0&&(t.damge*=1+a.dataIncr.AttackBulletExplodeDamageIncreasePercent);var l=n.affixArgStr;null==l&&(l="Explore");var s=P.create(l);s.setParent(I.ins.layer2,!1),s.worldPosition=r,s.scale=t.view.root.scale}))},e.AttackBulletAddBuffRadius=function(e,t,n){var a=this,r=e.view.root.parent,o=e.view.root.position.clone();x.ins.once((function(){var t=n.affixArgN,u=n.affixArgStr,s=R.ins.root.getChildByPath("Collider/Circle"),f=c(s);f.name="AttackBulletAddBuffRadius",f.setParent(r,!1),f.position=o;a.dataIncr.AttackBulletAddBuffRadiusIncreasePercent>0&&(t*=1+a.dataIncr.AttackBulletAddBuffRadiusIncreasePercent);var d=f.getComponent(i);d.radius=t,d.on(l.BEGIN_CONTACT,(function(t,n,r){var o=n.Role;if(null!=o){var i=v.roleAdd(o,u);if(0!=i[0]){var c=i[1];switch(c.affix.argN+=a.dataIncr.AttackBulletAddBuffRadiusBuffIncreasePercent,c.sender=e.sender,c.affix.type){case A.PoisoningPercent:var l=e.damge*c.affix.argN;l=Math.round(l),c.affix.argN=l}C.exe(o)}}})),x.ins.once((function(){f.destroy()}),5)}))},e.findNearest=function(e,n){void 0===n&&(n=null);for(var a,r=Number.MAX_VALUE,o=null,i=t(d.ins.allEnemies);!(a=i()).done;){var c=a.value;if(null==n||!n.has(c)){var l=c.view.root.position.clone().subtract(e).lengthSqr();r>l&&(r=l,o=c)}}return o},e}()).dataIncr=new y,n._RF.pop()}}}));

System.register("chunks:///_virtual/CollisionHandler.ts",["cc","./SkillCloseDamage.ts"],(function(n){var o,e;return{setters:[function(n){o=n.cclegacy},function(n){e=n.SkillCloseDamageOp}],execute:function(){o._RF.push({},"50dbcdC32RKnYcyNBQh+aq1","CollisionHandler",void 0);n("CollisionHandler",function(){function n(){}return n.init=function(){},n.onBeginContact=function(n,o,e){},n.onEndContact=function(n,o,l){console.log("onEndContact");var t=n.Role;if(null!=t){t.move.enabled=!0;var c=o.Role;null!=c&&(c.move.enabled=!0,e.tryRemove(t,c),e.tryRemove(c,t))}},n.onPreSolve=function(n,o,e){console.log("onPreSolve")},n.onPostSolve=function(n,o,e){console.log("onPostSolve")},n}());o._RF.pop()}}}));

System.register("chunks:///_virtual/CurrentMax.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"8fc4aBVNfxGubqLK/+sVI5v","CurrentMax",void 0);t("CurrentMax",function(){function t(){this.current=0,this.max=0}var r=t.prototype;return r.setCurrentAsMax=function(){this.current=this.max},r.setCurrentAndMax=function(t){this.current=this.max=t},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/DailyCheckinData.ts",["cc","./DateTimeUtil.ts","./DateTimeMgr.ts"],(function(t){var e,a,n,i;return{setters:[function(t){e=t.cclegacy,a=t.sys},function(t){n=t.DateTimeUtil},function(t){i=t.DateTimeMgr}],execute:function(){var c;e._RF.push({},"51012naULlDtbdSj8Zj1Bck","DailyCheckinData",void 0);var s=t("DailyCheckinData",function(){function t(){this.lastDate=new Date(0),this.count=0}var e=t.prototype;return e.checkin=function(){this.lastDate=i.ins.getNowDateTime(),this.count++},e.isTodayCheckin=function(){var t=i.ins.getNowDateTime();return n.dateEquals(this.lastDate,t)},t}());c=s,s.ins=new c;t("DailyCheckinDataPersist",function(){function t(){}return t.load=function(){var t=a.localStorage.getItem("DailyCheckin");if(null!=t&&""!=t){var e=null;try{e=JSON.parse(t)}catch(t){return}if(null!=e.Date){var n=new Date(Date.parse(e.Date));s.ins.lastDate=n,s.ins.count=Number(e.Count)}}},t.save=function(){var t={};t.Date=n.toDateString(s.ins.lastDate),t.Count=s.ins.count;var e=JSON.stringify(t);a.localStorage.setItem("DailyCheckin",e)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/DailyLimit.ts",["cc","./DateTimeUtil.ts"],(function(t){var i,e,r;return{setters:[function(t){i=t.cclegacy,e=t.sys},function(t){r=t.DateTimeUtil}],execute:function(){i._RF.push({},"9997fNhX+JHJ5lsNG6zqO4t","DailyLimit",void 0);t("DailyLimit",function(){function t(t,i){void 0===i&&(i=10),this.id="DailyLimit_XXX",this.max=0,this.current=0,this.id=t,this.max=i}var i=t.prototype;return i.decrement=function(){this.current<=0||(this.current--,this.save())},i.load=function(){var t=e.localStorage.getItem(this.id);if(null!=t&&""!=t){var i=JSON.parse(t);this.current=Number(i.Current);var n=new Date(i.Date),a=new Date(Date.now());0==r.dateEquals(n,a)&&(this.current=this.max)}else this.current=this.max},i.save=function(){var t={};t.Date=r.toDateString(new Date(Date.now())),t.Current=this.current;var i=JSON.stringify(t);e.localStorage.setItem(this.id,i)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/DateTimeMgr.ts",["cc"],(function(t){var n,e,o,i;return{setters:[function(t){n=t.cclegacy,e=t.game,o=t.tween,i=t.sys}],execute:function(){n._RF.push({},"91051Fy9dtOU7zibYOpVpUI","DateTimeMgr",void 0),t("DateTimeSync",function(){function t(){}return t.exe=function(t){var n=this;u.getFromSuNing((function(e,i){if(0==e)return console.log("时间同步失败,1秒后重试"),n.count--,n.count<=0?void t(!1):void o(n).delay(1).call((function(){n.exe(t)})).start();c.ins=new c,c.ins.dtStart=i,t(!0)}))},t}()).count=20;var u=t("DateTimeRequest",function(){function t(){}return t.getFromSuNing=function(t){i.platform!=i.Platform.WECHAT_GAME?i.platform==i.Platform.BYTEDANCE_MINI_GAME?this.ttRequest(t):this.fetch(t):this.wxRequest(t)},t.fetch=function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}((function(t){fetch("https://quan.suning.com/getSysTime.do").then((function(t){return t.json()})).then((function(n){var e=new Date(n.sysTime2);console.log("获取服务器时间完成："+e.toString()),t(!0,e)})).catch((function(n){console.log("获取服务器时间出错"),t(!1,null)}))})),t.wxRequest=function(t){wx.request({url:"https://quan.suning.com/getSysTime.do",success:function(n){console.log(n.data);var e=new Date(n.data.sysTime2);t(!0,e)},fail:function(){t(!1,null)}})},t.ttRequest=function(t){tt.request({url:"https://quan.suning.com/getSysTime.do",success:function(n){console.log(n.data);var e=new Date(n.data.sysTime2);t(!0,e)},fail:function(){t(!1,null)}})},t}()),c=t("DateTimeMgr",function(){function t(){this.dtStart=null}return t.prototype.getNowDateTime=function(){var t=Math.floor(e.totalTime/1e3),n=new Date(this.dtStart);return n.setSeconds(this.dtStart.getSeconds()+t),n},t}());c.ins=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/DateTimeUtil.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a47967MEdJDGbK1aZjuWfJC","DateTimeUtil",void 0);t("DateTimeUtil",function(){function t(){}return t.dateEquals=function(t,e){var n=t.getFullYear(),u=e.getFullYear(),r=t.getMonth(),a=e.getMonth(),i=t.getDate(),g=e.getDate();return n==u&&r==a&&i==g},t.toString=function(t){return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},t.toDateString=function(t){return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/EffectFactory.ts",["cc","./EffectPfMgr.ts"],(function(t){var e,n,c,r;return{setters:[function(t){e=t.cclegacy,n=t.instantiate,c=t.sp},function(t){r=t.EffectPfMgr}],execute:function(){e._RF.push({},"603bciP7zNKGZzODLXC9zNq","EffectFactory",void 0);t("EffectFactory",function(){function t(){}return t.create=function(t,e){void 0===e&&(e=!0);var o=r.ins.root.getChildByPath(t);if(null==o)return null;var f,i=n(o),u=i.getComponent(c.Skeleton);(null==u&&(u=i.getComponentInChildren(c.Skeleton)),e)&&(null==(f=u)||f.setCompleteListener((function(){i.destroy()})));return i},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/EffectPfMgr.ts",["cc"],(function(t){var f;return{setters:[function(t){f=t.cclegacy}],execute:function(){var c;f._RF.push({},"ef3fcng08FBxLfdq3CrdOaj","EffectPfMgr",void 0);var e=t("EffectPfMgr",(function(){this.root=void 0}));c=e,e.ins=new c,f._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyGen.ts",["cc","./UiHpBar.ts","./RoleFactory.ts","./RoleMgr.ts","./WorldNode.ts","./EnemyMovePath.ts","./AiCom.ts","./RoleAttributeUpdate.ts","./PathMove.ts"],(function(t){var e,n,o,i,r,a,c,s,u,v,d;return{setters:[function(t){e=t.cclegacy,n=t.UITransform,o=t.Vec3},function(t){i=t.UiHpBar},function(t){r=t.RoleFactory},function(t){a=t.RoleMgr},function(t){c=t.WorldNode},function(t){s=t.EnemyMovePath},function(t){u=t.AiCom},function(t){v=t.RoleAttributeUpdate},function(t){d=t.PathMove}],execute:function(){e._RF.push({},"316b1BDHpJKRY3q0ToCnk4m","EnemyGen",void 0);t("EnemyGen",function(){function t(){}return t.genOne=function(t){var e=r.create(t);a.ins.add(e);var f=e.cfg.hpBarId,p=i.create(f);e.view.hpBar=p,p.role=e,p.root.setParent(e.view.root,!0);var h=e.view.main.getComponent(n).getBoundingBox();return p.root.position=new o(0,h.yMax+10),p.refresh(),e.view.root.setParent(c.ins.layer1,!1),e.view.root.position=s.ins.data[0],e.ai=new u,e.ai.pathMoved=new d,e.ai.pathMoved.idx=1,e.ai.pathMoved.path=s.ins.data,v.exe(e),e},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyMovePath.ts",["cc","./WorldNode.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.WorldNode}],execute:function(){var i;n._RF.push({},"17170n+ymxE+4SWb2J7eIav","EnemyMovePath",void 0);var o=t("EnemyMovePath",function(){function t(){this.data=new Array}return t.prototype.init=function(){this.data.splice(0,this.data.length);for(var t=e.ins.root.getChildByPath("Cfg/Path"),n=0;n<t.children.length;++n){var i=t.children[n];this.data.push(i.position)}t.destroy()},t}());i=o,o.ins=new i,n._RF.pop()}}}));

System.register("chunks:///_virtual/Entry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Init.ts","./ZOrderCtrl.ts","./RoleSys.ts","./TowerSys.ts","./BulletSys.ts","./AiSys.ts","./LevelCtrl.ts","./RoleMoveSys.ts","./FrameCall.ts"],(function(t){var n,e,o,r,s,u,i,c,l,a,p,y,f;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Component},function(t){s=t.Init},function(t){u=t.ZOrderCtrl},function(t){i=t.RoleSys},function(t){c=t.TowerSys},function(t){l=t.BulletSys},function(t){a=t.AiSys},function(t){p=t.LevelCtrl},function(t){y=t.RoleMoveSys},function(t){f=t.FrameCall}],execute:function(){var d;e._RF.push({},"8bcdeCxFm1B0p4AnO8DNc/t","Entry",void 0);var S=o.ccclass;o.property,t("Entry",S("Entry")(d=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){s.exe()},o.update=function(t){u.ins.update(),c.update(),l.update(),i.update(),a.update(),p.ins.update(),y.ins.update(),f.ins.update()},e}(r))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/Entry2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Init2.ts"],(function(t){var n,r,e,o,c;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,o=t.Component},function(t){c=t.Init}],execute:function(){var i;r._RF.push({},"411f8F1CjZNUIPMbSbQw/l9","Entry",void 0);var u=e.ccclass;e.property,t("Entry",u("Entry")(i=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var e=r.prototype;return e.start=function(){c.exe()},e.update=function(t){},r}(o))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/Entry3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Init3.ts"],(function(t){var n,r,e,o,c;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,o=t.Component},function(t){c=t.Init}],execute:function(){var i;r._RF.push({},"d32beR/J71ETKfb/X1j35iZ","Entry",void 0);var u=e.ccclass;e.property,t("Entry",u("Entry")(i=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var e=r.prototype;return e.start=function(){c.exe()},e.update=function(t){},r}(o))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/FeatureAcquire.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgBuff.ts","./MoneyFly.ts","./Affix.ts","./BuffFactory.ts","./TowerAllUpdate.ts","./Player.ts","./PlayerBuffAffect.ts","./UiMoney001.ts","./UiMain2.ts","./UiFeature.ts","./FeatureExtract.ts","./MergeDefinition.ts","./PlayerGradeOp.ts","./Buff_RndArticleMergeGradeUpgrade.ts"],(function(e){var t,n,r,f,o,i,a,c,u,s,l,p,g,y,d,A,F,M;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e.UITransform,f=e.Vec3},function(e){o=e.CfgBuff},function(e){i=e.MoneyFly},function(e){a=e.AffixType},function(e){c=e.BuffFactory},function(e){u=e.TowerAllUpdate},function(e){s=e.Player},function(e){l=e.PlayerBuffAffect},function(e){p=e.UiMoney001},function(e){g=e.UiMain},function(e){y=e.UiFeature},function(e){d=e.FeatureExtract},function(e){A=e.MergeDefinition},function(e){F=e.PlayerGradeOp},function(e){M=e.Buff_RndArticleMergeGradeUpgrade}],execute:function(){n._RF.push({},"ffbbeDHgsFK8I1Fc21ggcSp","FeatureAcquire",void 0);e("FeatureAcquire",function(){function e(){}return e.exe=function(e){for(var t=0;t<e.length;++t){var n=e[t];if(1!=this.now(n)){var r=c.create(n);s.ins.buff.list.push(r),d.countLimit(n)}}u.updateAll(),l.affectAllRoles(),y.ins.refresh()},e.now=function(e){var n=o.data.get(e);if(null!=n){switch(n.affixType){case a.GetMomeyNow:var c=p.ins.icon.getComponent(r).convertToWorldSpaceAR(f.ZERO);return g.ins.root.getComponent(r).convertToNodeSpaceAR(c,c),i.money001Fly(g.ins.root,f.ZERO,c),s.ins.money001+=n.affixArgN,p.ins.refresh(),!0;case a.MergeEnable:for(var u,l=n.affixArgStr.split(","),y=t(l);!(u=y()).done;){var d=u.value;A.ins.allowData.set(d,!0)}return!0;case a.ExpIncreasePercent:F.expFactor+=n.affixArgN;break;case a.RndArticleMergeGradeUpgrade:return M.exe(),!0}return!1}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/FeatureExtract.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Account.ts","./CfgBuff.ts","./CfgFeature.ts","./Shuffle.ts","./BagArticleGradeHelper.ts"],(function(t){var n,e,r,u,a,o,i;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy},function(t){r=t.Account},function(t){u=t.CfgBuff},function(t){a=t.CfgFeature},function(t){o=t.Shuffle},function(t){i=t.BagArticleGradeHelper}],execute:function(){e._RF.push({},"01e110QFcZJz74b3SVYFpm+","FeatureExtract",void 0);var c=t("FeatureExtractPool",function(){function t(){this.count=new Map,this.data=new Array}var e=t.prototype;return e.init=function(){var t=this.getCommon(),n=this.getDeploy();n.push.apply(n,t);for(var e=0;e<n.length;++e){var r=u.data.get(n[e]);this.data.push(r),r.unlockCount>0&&this.count.set(r.id,r.unlockCount)}},e.getDeploy=function(){for(var t=new Array,e=r.ins.bag.deploy,u=0;u<e.length;++u)for(var a,o=e[u],c=i.getCfgCurrentItems(o),f=n(c);!(a=f()).done;){var s=a.value;t.push.apply(t,s.unlocked)}return t},e.getCommon=function(){for(var t,e=new Array,r=n(a.data);!(t=r()).done;){var u=t.value;e.push(u.id)}return e},t}());c.ins=null;t("FeatureExtract",function(){function t(){}return t.exe=function(){var t=new Array;return this.rnd(t),t},t.rnd=function(t){var n=c.ins.data,e=new Array;e.push.apply(e,n),o.shuffleArray(e);c.ins.count;for(var r=0;r<3&&r<e.length;++r){var u=e[r];t.push(u)}},t.countLimit=function(t){var n=c.ins.data,e=c.ins.count,r=e.get(t);if(null!=r)if(--r>0)e.set(t,r);else{var u=n.findIndex((function(n){return n.id==t}));-1!=u&&(n.splice(u,1),e.delete(t))}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/FrameCall.ts",["cc","./CurrentMax.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.CurrentMax}],execute:function(){e._RF.push({},"f1567Uz1fFEEKq0wuefANOw","FrameCall",void 0),t("FrameCall",function(){function t(){this.items=new Array}var e=t.prototype;return e.once=function(t,e){void 0===e&&(e=0);var n=new r;n.interval.setCurrentAndMax(e),n.times=1,n.fn=t,this.items.push(n)},e.update=function(){for(var t=this.items.length-1;t>=0;--t){var e=this.items[t];e.interval.current--,e.interval.current>0||(null==e.fn||e.fn(),e.times--,e.times<=0&&this.items.splice(t,1),e.interval.setCurrentAsMax())}},t}()).ins=null;var r=t("FrameCallDataItem",(function(){this.interval=new n,this.times=1,this.fn=null}));e._RF.pop()}}}));

System.register("chunks:///_virtual/FrameSecConvert.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"c2687i5SalKfIZ3zjXKDWGh","FrameSecConvert",void 0),t("FrameSecConvert",function(){function t(){}return t.toFrame=function(t){return Math.floor(this.fps*t)},t.toSecond=function(t){return t/this.fps},t}()).fps=60,e._RF.pop()}}}));

System.register("chunks:///_virtual/GameArg.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var n;t._RF.push({},"1becbjRLG9ASYC3Da7/Xojr","GameArg",void 0);var r=e("GameArg",(function(){this.levelId=void 0,this.mainIdx=-1}));n=r,r.ins=new n,t._RF.pop()}}}));

System.register("chunks:///_virtual/GameLose.ts",["cc","./ItemDraw.ts","./ItemGet.ts","./GameArg.ts","./UiMain2.ts","./UiLose.ts","./GamePause.ts"],(function(e){var t,n,s,i,o,a,c;return{setters:[function(e){t=e.cclegacy},function(e){n=e.ItemDraw},function(e){s=e.ItemGet},function(e){i=e.GameArg},function(e){o=e.UiMain},function(e){a=e.UiLose},function(e){c=e.GamePause}],execute:function(){t._RF.push({},"1b148J3nKpPfL5a1ZP5ly2+","GameLose",void 0);e("GameLose",function(){function e(){}return e.exe=function(){console.log("死亡"),c.pause();var e=a.create(o.ins.root);e.show();var t="Level_"+i.ins.levelId+"_Lose",u=n.exe(t);e.itemList.refresh(u),e.itemList.showAnim(),s.addList(u)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GamePause.ts",["cc"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy,t=e.find}],execute:function(){n._RF.push({},"76995oFGJxBA64FcEXcTdx5","GamePause",void 0);e("GamePause",function(){function e(){}return e.pause=function(){t("Entry").active=!1},e.resume=function(){t("Entry").active=!0},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameStart.ts",["cc","./BagArticleReloaded.ts","./LevelCtrl.ts","./TowerAllUpdate.ts","./Buff_HpRegenIncreasePercentBelowPercentPerWave.ts","./PlayerRole.ts","./WorldNode.ts","./EffectFactory.ts","./GamePause.ts"],(function(e){var t,n,r,a,c,o,s,l,u,i;return{setters:[function(e){t=e.cclegacy,n=e.Vec3},function(e){r=e.BagArticleReloaded},function(e){a=e.LevelCtrl},function(e){c=e.TowerAllUpdate},function(e){o=e.Buff_HpRegenIncreasePercentBelowPercentPerWave},function(e){s=e.PlayerRole},function(e){l=e.WorldNode},function(e){u=e.EffectFactory},function(e){i=e.GamePause}],execute:function(){t._RF.push({},"419ceUY93BHjIemrFWLNtD+","GameStart",void 0);e("GameStart",function(){function e(){}return e.start=function(){i.resume();var e=u.create("Battle");e.setParent(l.ins.layer2,!0),e.position=n.ZERO,r.exe(),c.updateAll(),o.resetAllTowers(),o.tryExe(s.ins.main),a.ins.start()},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GestureArticleInfo.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"06165gxSJNI16DL4T9FYmAE","GestureArticleInfo",void 0);t("GestureClick",function(){function t(){this.posOrig=null,this.val=!0}var n=t.prototype;return n.rest=function(){this.val=!0},n.start=function(t){this.posOrig=t},n.move=function(t){0!=this.val&&(this.posOrig.clone().subtract(t).lengthSqr()>400&&(this.val=!1))},n.getVal=function(){return this.val},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GridHelper.ts",["cc","./UiBagGrid.ts","./UiBagCfg.ts"],(function(i){var e,n,t,r,c,o;return{setters:[function(i){e=i.cclegacy,n=i.Rect,t=i.Vec2,r=i.Size},function(i){c=i.UiBagGrid},function(i){o=i.UiBagCfg}],execute:function(){e._RF.push({},"6fa9fiLuopNsIU25JkAXBRY","GridHelper",void 0);i("GridHelper",function(){function i(){}return i.getBoundingRectShapeUnlocked=function(){for(var i=new n,e=new t(9999,9999),r=new t(-1,-1),o=c.ins.grid,d=c.ins.gridSize,h=0;h<d.height;++h)for(var g=0;g<d.width;++g){0!=o[h][g].unlocked&&(g<e.x&&(e.x=g),h<e.y&&(e.y=h),g>r.x&&(r.x=g),h>r.y&&(r.y=h))}return i.xMin=e.x,i.yMin=e.y,i.xMax=r.x,i.yMax=r.y,i},i.getBoundingRectUnlocked=function(){var i=this.getBoundingRectShapeUnlocked(),e=c.ins.grid,d=new t(i.xMin,i.yMin),h=new t(i.xMax,i.yMax),g=o.ins.cellSize,u=new t,a=e[i.yMin][i.xMin],x=e[i.yMax][i.xMax],s=a.root.position.clone().add(x.root.position).divide3f(2,2,2);u.x=s.x,u.y=s.y;var y=new r;y.width=(h.x-d.x+1)*g.width,y.height=(h.y-d.y+1)*g.height,y.width+=40,y.height+=40;var w=new n;return w.size=y,w.center=u,w},i.getBoundingRectEntirety=function(){var i=o.ins.cellSize,e=c.ins.gridSize,d=new r;d.width=e.width*i.width,d.height=e.height*i.height,d.width+=40,d.height+=40;var h=new n;return h.size=d,h.center=t.ZERO,h},i}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GridHint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridTraverse.ts"],(function(e){var n,t,i;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy},function(e){i=e.GridTraverse}],execute:function(){t._RF.push({},"055ff2obKdMyZjBWtXym/ub","GridHint",void 0);e("GridHint",function(){function e(){}return e.hintPlaceableShow=function(e){for(var t,i=n(e);!(t=i()).done;){var r=t.value;r.hintPlaceable.active=!0,r.hintExpandable.active=!1}},e.hintPlaceableClear=function(){i.exe((function(e){e.hintPlaceable.active=!1,e.hintExpandable.active=!e.unlocked}))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GridModeTransition.ts",["cc","./UiBagBottom.ts","./UiBagExpandOp.ts","./UiBagGrid.ts","./UiBagGridBg.ts"],(function(i){var n,t,o,s,e;return{setters:[function(i){n=i.cclegacy},function(i){t=i.UiBagBottom},function(i){o=i.UiBagExpandOp},function(i){s=i.UiBagGrid},function(i){e=i.UiBagGridBg}],execute:function(){n._RF.push({},"ad12czOnxBM9pJwwBwmA6yY","GridModeTransition",void 0),i("GridModeTransition",function(){function i(){}return i.init=function(){e.ins.unlocked(),s.ins.alignBgCenter(0),o.ins.hide(),t.ins.show(),this.mode=1},i.toExpandable=function(){2!=this.mode&&(this.mode=2,s.ins.showExpandable(),s.ins.alignBgCenter(),o.ins.show(),t.ins.hide())},i.toNormal=function(){1!=this.mode&&(this.mode=1,s.ins.showNormal(),s.ins.alignBgCenter(),o.ins.hide(),t.ins.show())},i}()).mode=1,n._RF.pop()}}}));

System.register("chunks:///_virtual/GridTraverse.ts",["cc","./UiBagGrid.ts"],(function(r){var e,n;return{setters:[function(r){e=r.cclegacy},function(r){n=r.UiBagGrid}],execute:function(){e._RF.push({},"e7e48k+iA9OR6wYdli3NkmX","GridTraverse",void 0);r("GridTraverse",function(){function r(){}return r.exe=function(r){for(var e=n.ins.grid,i=0;i<e.length;++i)for(var t=e[i],c=0;c<t.length;++c){r(t[c])}},r.exe2=function(r){for(var e=n.ins.grid,i=0;i<e.length;++i)for(var t=e[i],c=0;c<t.length;++c){if(0==r(t[c]))return}},r}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Guide.ts",["cc","./UiBagBottom.ts","./UiTray.ts","./UiBagTouch.ts","./GameArg.ts","./UiMain2.ts","./UiBagGrid.ts","./UiGuideCover.ts","./SoundBtnClickSetter.ts","./BagArticleGridPlaceByPos.ts","./UiTextBox.ts","./Lang.ts","./GuideData.ts"],(function(t){var e,i,o,n,r,a,s,c,l,d,u,v,h,f,B,g,x,p,y,w,P,T,G,m;return{setters:[function(t){e=t.cclegacy,i=t.Node,o=t.UITransform,n=t.BlockInputEvents,r=t.Vec3,a=t.resources,s=t.Prefab,c=t.instantiate,l=t.Input,d=t.tween,u=t.Vec2,v=t.Tween},function(t){h=t.UiBagBottom},function(t){f=t.UiTray},function(t){B=t.UiBagTouch},function(t){g=t.GameArg},function(t){x=t.UiMain},function(t){p=t.UiBagGrid},function(t){y=t.UiGuideCover},function(t){w=t.SoundBtnClickSetter},function(t){P=t.BagArticleGridPlaceByPos},function(t){T=t.UiTextBox},function(t){G=t.Lang},function(t){m=t.GuideData}],execute:function(){e._RF.push({},"8fa6eatUfhNS7Bu/K3J/mug","Guide",void 0);var C=t("Guide",function(){function t(){}return t.exe1=function(){var t=this;if(0!=(1==g.ins.mainIdx))if(m.ins=new m,m.ins.load(),1!=m.ins.hasRecord1()){h.ins.hide(),f.ins.clear(),f.ins.addArticleById("004_1"),f.ins.addArticleById("005_1"),f.ins.addArticleById("002_1");var e=new i("BlockInput");this.blockInput=e,e.addComponent(o).setContentSize(99999,99999),e.addComponent(n),e.setParent(x.ins.root,!1),e.position=r.ZERO;a.load(["Game/Misc/Guide","Common/Ui/GuideCover"],s,(function(e,i){var o=c(i[0]);t.pf=o,(t.hand=o.getChildByPath("Hand")).setParent(x.ins.root,!1);var n=c(i[1]);t.cover=new y,t.cover.init(n),t.cover.root.setParent(x.ins.root,!1),t.cover.root.active=!1,t.textBox=new T,t.textBox.init(o.getChildByPath("Text")),t.textBox.root.active=!1,t.textBox.root.setParent(x.ins.root,!1),t.guideStep0(o.getChildByPath("Ui1"))}))}else m.ins=null},t.guideStep0=function(t){var e=this;t.setParent(x.ins.root,!1),t.position=r.ZERO;var i=t.getChildByPath("Cover");i.getComponent(o).setContentSize(9999,9999),i.on(l.EventType.TOUCH_END,(function(){t.destroy(),e.guideStep1()}));var n=t.getChildByPath("Prompt");d(n).sequence(d(n).to(.5,{scale:new r(1.2,1.2,1.2)}),d(n).to(.5,{scale:new r(1,1,1)})).repeatForever().start()},t.guideStep1=function(){var t=this;this.textBox.root.active=!0,this.textBox.root.position=new r(0,600),this.textBox.label.string=G.get("Game_Guide_3");var e=this.blockInput;e.active=!1,this.guideTrayToGrid(f.ins.articles[0],new u(1,2),(function(){e.active=!0,d(x.ins.root).delay(.2).call((function(){e.active=!1,t.guideTrayToGrid(f.ins.articles[0],new u(2,2),(function(){e.active=!0,d(x.ins.root).delay(.2).call((function(){e.active=!1,t.guideTrayToGrid(f.ins.articles[0],new u(2,3),(function(){e.active=!0,t.hand.active=!1,B.ins.root.active=!1,t.guideBtnRefresh()}))})).start()}))})).start()}))},t.guideBtnRefresh=function(){var t=this;this.textBox.root.active=!0,this.textBox.root.position=new r(0,-600),this.textBox.label.string=G.get("Game_Guide_4"),this.blockInput.active=!1;var e=h.ins.btnRefresh,i=c(e);i.active=!0,i.setParent(x.ins.root,!0),i.worldPosition=e.parent.worldPosition,w.exe(i),i.on(l.EventType.TOUCH_END,(function(){i.destroy(),t.cover.root.active=!1,t.textBox.root.active=!1,f.ins.clear(),f.ins.addArticleById("004_1"),f.ins.addArticleById("006_1"),f.ins.addArticleById("003_1"),t.blockInput.active=!0,d(x.ins.root).delay(.5).call((function(){t.blockInput.active=!1,t.guideStep2()})).start()})),this.coverBtn(i)},t.guideStep2=function(){var t=this;this.textBox.root.active=!0,this.textBox.root.position=new r(0,600),this.textBox.label.string=G.get("Game_Guide_5");var e=this.blockInput;e.active=!1,B.ins.root.active=!0,this.guideTrayToGrid(f.ins.articles[0],new u(1,2),(function(){e.active=!0,d(x.ins.root).delay(.2).call((function(){e.active=!1,t.guideTrayToGrid(f.ins.articles[0],new u(1,4),(function(){e.active=!0,d(x.ins.root).delay(.2).call((function(){e.active=!1,t.guideTrayToGrid(f.ins.articles[0],new u(3,2),(function(){e.active=!0,t.hand.active=!1,t.textBox.root.active=!1,B.ins.root.active=!1,t.guideBtnStart()}))})).start()}))})).start()}))},t.guideBtnStart=function(){var t=this;this.textBox.root.active=!0,this.textBox.root.position=new r(0,-600),this.textBox.label.string=G.get("Game_Guide_6"),this.blockInput.active=!1;var e=h.ins.btnStart,i=c(e);i.active=!0,i.setParent(x.ins.root,!0),i.worldPosition=e.parent.worldPosition,w.exe(i),i.on(l.EventType.TOUCH_END,(function(){i.destroy(),t.textBox.root.active=!1,t.complete(),e.emit(l.EventType.TOUCH_END)})),this.coverBtn(i)},t.complete=function(){B.ins.onBeforeArticlePlace=null,B.ins.onBeforeArticleSelect=null,B.ins.onCompleteArticlePlace=null,this.blockInput.destroy(),this.cover.root.destroy(),this.hand.destroy(),m.ins.record1(),m.ins.save(),m.ins=null},t.coverBtn=function(t){t.active=!0;var e=t.getComponent(o).contentSize.clone(),i=e.clone();i.width*=15,i.height*=15,i.set(3e3,3e3),this.cover.root.active=!0,this.cover.mask.worldPosition=t.worldPosition,this.cover.maskUiTrans.setContentSize(i),this.cover.showAnim(t.worldPosition,e,.5)},t.guideTrayToGrid=function(t,e,i){var o=f.ins.articles.indexOf(t),n=f.ins.articles[o],r=n.view.root.worldPosition,a=p.ins.getCell(e).root.worldPosition;this.hand.active=!0,this.handMove(this.hand,r,a),B.ins.onBeforeArticleSelect=function(t){return n==t},B.ins.onBeforeArticlePlace=function(t){var n=P.getCellsPlace(t);return 0==(null!=n&&null!=n.find((function(t){return t.coord.equals(e)})))?(f.ins.insertArticleByIndex(t,o),B.ins.towerAuraHint.clear(),!1):(d(x.ins.root).delay(.01).call(i).start(),!0)}},t.handMove=function(t,e,i){var o=e.clone().subtract(i).length()/400,n=e.clone();t.worldPosition=n,v.stopAllByTarget(t),d(t).sequence(d(t).call((function(){t.worldPosition=n})),d(t).to(o,{worldPosition:i}),d(t).delay(.1)).repeatForever().start()},t}());C.pf=void 0,C.hand=void 0,C.textBox=null,C.cover=void 0,C.blockInput=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/GuideData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,a,r;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,r=t.sys}],execute:function(){a._RF.push({},"9c2d7wc+DRLRaxLqrJLkF55","GuideData",void 0),t("GuideData",function(){function t(){this.data=new Map}var a=t.prototype;return a.record1=function(){this.data.set("Record1","2024.11.11")},a.hasRecord1=function(){var t=this.data.get("Record1");return null!=t&&""!=t&&"2024.11.11"==t},a.load=function(){var t=r.localStorage.getItem("GameGuide");if(null!=t&&""!=t){var e=JSON.parse(t);for(var a in e)this.data.set(a,e[a])}},a.save=function(){for(var t,a={},n=e(this.data);!(t=n()).done;){var o=t.value;a[o[0]]=o[1]}var i=JSON.stringify(a);r.localStorage.setItem("GameGuide",i)},t}()).ins=null,a._RF.pop()}}}));

System.register("chunks:///_virtual/HitTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiTray.ts","./GridTraverse.ts"],(function(t){var r,e,n,o,i,u;return{setters:[function(t){r=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,n=t.Vec3,o=t.UITransform},function(t){i=t.UiTray},function(t){u=t.GridTraverse}],execute:function(){e._RF.push({},"a5f3eWuzvxOfr6Ahr9KF1de","HitTest",void 0);t("HitTest",function(){function t(){}return t.hit=function(r){var e=t.hitTray(r);return null!=e?e:e=t.hitGrid(r)},t.hitTray=function(t){for(var e,u=new n(t.x,t.y),a=i.ins.root.getComponent(o).convertToNodeSpaceAR(u),c=i.ins.articles,s=r(c);!(e=s()).done;){var l=e.value;if(l.view.root.position.clone().subtract(a).lengthSqr()<1e4)return l}return null},t.hitGrid=function(t){var r=Number.MAX_VALUE,e=null,o=new n(t.x,t.y);return u.exe((function(t){var n=t.root.worldPosition.clone().subtract(o),i=n.lengthSqr();Math.abs(n.x)<150&&Math.abs(n.y)<150&&i<r&&(r=i,e=t.article)})),e},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Init.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiBag.ts","./Player.ts","./Test.ts","./WorldNode.ts","./UiMain2.ts","./RoleMgr.ts","./LevelLoad.ts","./CollisionHandler.ts","./BagView.ts","./UiBagBottom.ts","./BagTrayAricleGen.ts","./GameStart.ts","./EnemyMovePath.ts","./CfgLevelWaveMgr.ts","./LevelCtrl.ts","./BulletBounceRect.ts","./PlayerRole.ts","./FeatureExtract.ts","./BulletMgr.ts","./UiTray.ts","./GridModeTransition.ts","./GridTraverse.ts","./UiToast.ts","./Lang.ts","./UiBagExpandOp.ts","./PlayerInit.ts","./UiDialog.ts","./Ad.ts","./UiMoney001.ts","./MoneyFly.ts","./GameArg.ts","./FrameCall.ts","./MergeDefinition.ts","./Stats.ts","./Music2.ts","./Guide.ts"],(function(n){var t,i,e,o,s,a,r,c,u,l,f,g,d,y,v,B,T,U,p,M,m,h,w,E,D,x,C,L,P,G,R,I,O,F,S,_,N,H,A,W,b,V,j;return{setters:[function(n){t=n.createForOfIteratorHelperLoose},function(n){i=n.cclegacy,e=n.director,o=n.Node,s=n.find,a=n.Input,r=n.Vec3},function(n){c=n.UiBag},function(n){u=n.Player},function(n){l=n.Test},function(n){f=n.WorldNodeInit},function(n){g=n.UiMain},function(n){d=n.RoleMgr},function(n){y=n.LevelLoad},function(n){v=n.CollisionHandler},function(n){B=n.BagView},function(n){T=n.UiBagBottom},function(n){U=n.BagTrayAricleGen},function(n){p=n.GameStart},function(n){M=n.EnemyMovePath},function(n){m=n.CfgLevelWaveMgr},function(n){h=n.LevelCtrl},function(n){w=n.BulletBounceRect},function(n){E=n.PlayerRoleInit},function(n){D=n.FeatureExtractPool},function(n){x=n.BulletMgr},function(n){C=n.UiTray},function(n){L=n.GridModeTransition},function(n){P=n.GridTraverse},function(n){G=n.UiToast},function(n){R=n.Lang},function(n){I=n.UiBagExpandOp},function(n){O=n.PlayerInit},function(n){F=n.UiDialog},function(n){S=n.Ad},function(n){_=n.UiMoney001},function(n){N=n.MoneyFly},function(n){H=n.GameArg},function(n){A=n.FrameCall},function(n){W=n.MergeDefinition},function(n){b=n.Stats},function(n){V=n.Music},function(n){j=n.Guide}],execute:function(){i._RF.push({},"13dce5RhppLR6LzmTN+3BB6","Init",void 0);n("Init",function(){function n(){}return n.exe=function(){y.load(),f.exe();var n=H.ins.levelId;h.ins=new h,h.ins.levelData=m.data.get(n),A.ins=new A,D.ins=new D,D.ins.init(),O.exe(),g.ins=new g,g.ins.init(),v.init(),M.ins.init(),d.ins=new d,x.ins=new x,E.init(),w.ins.init(),this.initBag(),b.ins=new b,l.exe(),V.ins.game(),j.exe1(),e.getScene().on(o.EventType.NODE_DESTROYED,(function(){console.log("销毁"),k.exe()}))},n.initBag=function(){c.createIns(s("Canvas/World/Bag")),T.ins=new T,T.ins.init(g.ins.root.getChildByPath("Ui/BagBottom")),C.ins=new C,C.ins.init(g.ins.root.getChildByPath("Ui/BagTray")),I.ins=new I,I.ins.init(g.ins.root.getChildByPath("Ui/BagExpandOp"));for(var n,i=t(W.ins.allowData);!(n=i()).done;){var e=n.value;W.ins.allowData.set(e[0],!1)}L.init(),B.enterDirect();var o=T.ins;o.btnStart.on(a.EventType.TOUCH_END,(function(){var n=!1;P.exe2((function(t){return null==t.article||(n=!0,!1)})),0!=n?(B.leave(),p.start()):G.show(g.ins.root,R.get("Game_Prompt_Deploy"))})),o.btnRefresh.on(a.EventType.TOUCH_END,(function(){var n=u.ins.money001-15;if(n<0){var t=F.create(g.ins.root);return t.txt.string="阳光不足，\n是否观看广告，获得30阳光",t.show(),void t.btnOK.on(a.EventType.TOUCH_END,(function(){S.ins.rewardShow((function(){u.ins.money001+=30,_.ins.refresh(),N.money001Fly2(g.ins.root,r.ZERO,_.ins.icon)}))}))}u.ins.money001=n,_.ins.refresh(),U.ins.gen()}))},n}());var k=n("Deinit",function(){function n(){}return n.exe=function(){d.ins=null,x.ins=null},n}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Init2.ts",["cc","./AccountPersist.ts","./ResLoad.ts","./Lang.ts","./UiKeyboard2.ts","./Account.ts","./UiToast.ts","./UiWin.ts","./UiLose.ts","./AdInit.ts","./WxHelper.ts","./UiBar.ts","./PlatformInit.ts","./StaminaRecovery.ts","./AudioSettingsPersist.ts","./DateTimeMgr.ts","./DailyCheckinData.ts","./Test2.ts"],(function(n){var t,i,e,o,s,a,c,r,u,f,l,d,g,P,h,R,m,v,S,U,p;return{setters:[function(n){t=n.cclegacy,i=n.find,e=n.Label,o=n.director},function(n){s=n.AccountPersist},function(n){a=n.ResLoad},function(n){c=n.Lang},function(n){r=n.UiKeyboard},function(n){u=n.Account},function(n){f=n.UiToast},function(n){l=n.UiWin},function(n){d=n.UiLose},function(n){g=n.AdInit},function(n){P=n.WxHelper},function(n){h=n.UiBar},function(n){R=n.PlatformInit},function(n){m=n.StaminaRecoveryPersist},function(n){v=n.AudioSettingsPersist},function(n){S=n.DateTimeMgr},function(n){U=n.DailyCheckinDataPersist},function(n){p=n.Test}],execute:function(){t._RF.push({},"690f0e1P9dCzpaEcz9+ORER","Init",void 0);n("Init",function(){function n(){}return n.exe=function(){S.ins=new S,S.ins.dtStart=new Date(Date.now()),c.init();var n=new P;P.enableShareMenu(),n.initShare(),n.CheckIsShare(),r.ins=new r,r.ins.init();var t=new h;t.init(i("Canvas/Progress")),t.bar.fillRange=0;var o=t.root.getComponentInChildren(e);a.onProgress=function(n){var i=Math.floor(100*n);o.string=i+" %",t.bar.fillRange=n/1},a.exe(this.onCompleteResLoad.bind(this)),l.loadPf(),d.loadPf(),f.loadPf(),R.exe(),p.exe()},n.onCompleteResLoad=function(){g.exe(),o.loadScene("Home"),u.ins.init(),s.load(),m.load(),v.load(),U.load()},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Init3.ts",["cc","./UiMain.ts","./ArticleUnlockLevel.ts","./Music2.ts"],(function(n){var t,i,c,e;return{setters:[function(n){t=n.cclegacy},function(n){i=n.UiMain},function(n){c=n.ArticleUnlockLevel},function(n){e=n.Music}],execute:function(){t._RF.push({},"f24a9cTqgJAqIWtRho7MrAW","Init",void 0);n("Init",function(){function n(){}return n.exe=function(){e.ins.home(),i.ins.init(),c.exe()},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/InitTt.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"4fdd4oF+9tDl7YgbYWhDeYn","InitTt",void 0);n("InitTt",function(){function n(){}return n.exe=function(){this.enableShareMenu()},n.enableShareMenu=function(){tt.showShareMenu({success:function(n){console.log("已成功显示转发按钮")},fail:function(n){console.log("showShareMenu 调用失败",n.errMsg)},complete:function(n){console.log("showShareMenu 调用完成")}})},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/InitWx.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"91acc+HywZDLJJ9+aErRN69","InitWx",void 0);e("InitWx",function(){function e(){}return e.exe=function(){this.enableShareMenu()},e.enableShareMenu=function(){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},e.setShareAppMessage=function(){wx.onShareAppMessage((function(){return{title:"消除方块，智力大挑战！",imageUrlId:"YI8fyUsLSca1KjLA7jWVMw==",imageUrl:"https://mmocgame.qpic.cn/wechatgame/aEQNKrkEbHicZunEoHAWKw65HtBMlPVXhicgoAQxHrESKeeuOk4naCcB7pMMicYXxia5/0"}}))},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemData.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"db066gdqeNPX41AsH1aDrBf","ItemData",void 0);t("ItemData",(function(t,i){void 0===t&&(t=null),void 0===i&&(i=0),this.id=void 0,this.count=0,this.cfg=void 0,this.id=t,this.count=i}));i._RF.pop()}}}));

System.register("chunks:///_virtual/ItemDraw.ts",["cc","./WeightProbability.ts","./CfgItemDraw.ts","./ItemData.ts","./CfgItem.ts","./ItemType.ts"],(function(t){var n,e,i,r,a,u,c;return{setters:[function(t){n=t.cclegacy,e=t.randomRangeInt},function(t){i=t.WeightProbability},function(t){r=t.CfgItemDraw},function(t){a=t.ItemData},function(t){u=t.CfgItemMgr},function(t){c=t.ItemType}],execute:function(){n._RF.push({},"5a4e51NKOdOQL7784LIpmR0","ItemDraw",void 0);t("ItemDraw",function(){function t(){}return t.exe=function(t){var n=new Array,c=r.data.get(t);if(null==c)return n;for(var f=new i,o=0;o<c.items.length;++o){var s=c.items[o];f.add(s.id,s.w)}for(var g=e(c.min,c.max+1),m=function(){var t=f.get(),e=n.find((function(n){return n.id==t}));null==e&&((e=new a).id=t,e.cfg=u.data.get(t),n.push(e)),e.count++},d=0;d<g;++d)m();return this.sort(n),n},t.sort=function(t){var n=new Map;n.set(c.Money001,1),n.set(c.Money002,2),t.sort((function(t,e){var i=n.has(t.id)?n.get(t.id):10,r=n.has(e.id)?n.get(e.id):10;return i<r?-1:i>r||t.cfg.quality<e.cfg.quality?1:t.cfg.quality>e.cfg.quality?-1:0}))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemGet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiStamina.ts","./Account.ts","./AccountPersist.ts","./ItemType.ts","./UiMoney002.ts","./UiMoney0012.ts"],(function(n){var t,e,o,i,s,c,r,u,a;return{setters:[function(n){t=n.createForOfIteratorHelperLoose},function(n){e=n.cclegacy,o=n.isValid},function(n){i=n.UiStamina},function(n){s=n.Account},function(n){c=n.AccountPersist},function(n){r=n.ItemType},function(n){u=n.UiMoney002},function(n){a=n.UiMoney001}],execute:function(){e._RF.push({},"b09cfuUPrRIs5P0vngazT3I","ItemGet",void 0);n("ItemGet",function(){function n(){}return n.addList=function(n){for(var e,f=t(n);!(e=f()).done;){var m=e.value,y=m.id;switch(y){case r.Money001:s.ins.money.money001+=m.count,o(a.ins.root)&&a.ins.refresh();break;case r.Money002:s.ins.money.money002+=m.count,o(u.ins.root)&&u.ins.refresh();break;case r.Stamina:s.ins.stamina.current+=m.count,o(i.ins.root)&&i.ins.refresh();break;default:var l=s.ins.items.get(y);null==l&&(l=0),l+=m.count,s.ins.items.set(y,l)}}c.save()},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ItemSub.ts",["cc","./Account.ts","./ItemType.ts","./UiToast.ts","./UiMain.ts","./AccountPersist.ts","./UiMoney0012.ts","./UiMoney002.ts","./UiStamina.ts","./Lang.ts"],(function(t){var n,e,o,i,s,r,a,u,c,m,f;return{setters:[function(t){n=t.cclegacy,e=t.isValid},function(t){o=t.Account},function(t){i=t.ItemType},function(t){s=t.UiToast},function(t){r=t.UiMain},function(t){a=t.AccountPersist},function(t){u=t.UiMoney001},function(t){c=t.UiMoney002},function(t){m=t.UiStamina},function(t){f=t.Lang}],execute:function(){n._RF.push({},"2a37aTvIClEoqwJCRAotjJS","ItemSub",void 0);t("ItemSub",function(){function t(){}return t.exe=function(t){for(var n=1.5,y=o.ins,g=0;g<t.length;++g){var h=t[g];switch(h.id){case i.Money001:if(y.money.money001<h.count)return s.show(r.ins.root,f.get("Home_Money001NotEnough"),n),!1;break;case i.Money002:if(y.money.money002<h.count)return s.show(r.ins.root,f.get("Home_Money002NotEnough"),n),!1;break;case i.Stamina:if(y.stamina.current<h.count)return s.show(r.ins.root,f.get("Home_SiaminaNotEnough"),n),!1;break;default:if(h.id.startsWith("Fragment")){var M=y.items.get(h.id);if(null==M&&(M=0),M<h.count)return s.show(r.ins.root,f.get("Home_FragmentNotEnough"),n),!1}}}for(var d=0;d<t.length;++d){var v=t[d];switch(v.id){case i.Money001:y.money.money001-=v.count,e(u.ins.root)&&u.ins.refresh();break;case i.Money002:y.money.money002-=v.count,e(c.ins.root)&&c.ins.refresh();break;case i.Stamina:y.stamina.current-=v.count,e(m.ins.root)&&m.ins.refresh();break;default:if(v.id.startsWith("Fragment")){var l=y.items.get(v.id);l-=v.count,y.items.set(v.id,l)}}}return a.save(),!0},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemType.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"adac0MJRO1PjZtyp9S7+nCt","ItemType",void 0);e("ItemType",function(e){return e.None="None",e.Money001="Money001",e.Money002="Money002",e.Stamina="Stamina",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/Lang.ts",["cc","./LanguageData.ts"],(function(n){var t,u,c;return{setters:[function(n){t=n.cclegacy},function(n){u=n.init,c=n.t}],execute:function(){t._RF.push({},"b404bAgRH5Dk5p6NN1yuuRF","Lang",void 0);n("Lang",function(){function n(){}return n.init=function(){u("zh")},n.get=function(n){return c(n)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var n,a;return{setters:[function(e){n=e.cclegacy,a=e.director}],execute:function(){e({init:t,t:function(e){var n=window;if(!n.languages)return e;for(var a=e.split("."),t=n.languages[r],u=0;u<a.length;u++)if(!(t=t[a[u]]))return"";return t||""},updateSceneRenderers:u}),n._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);var r=e("_language","zh");e("ready",!1);function t(n){e("ready",!0),r=e("_language",n)}function u(){for(var e=a.getScene().children,n=[],r=0;r<e.length;++r){var t=e[r].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(n,t)}for(var u=0;u<n.length;++u){var i=n[u];i.node.active&&i.updateLabel()}for(var o=[],g=0;g<e.length;++g){var c=e[g].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(o,c)}for(var l=0;l<o.length;++l){var p=o[l];p.node.active&&p.updateSprite()}}window._languageData={get language(){return r},init:function(e){t(e)},updateSceneRenderers:function(){u()}},n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelCtrl.ts",["cc","./RoleMgr.ts","./WaveCtrl.ts","./WaveSettle.ts"],(function(t){var e,n,s,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.RoleMgr},function(t){s=t.WaveCtrl},function(t){a=t.WaveSettle}],execute:function(){e._RF.push({},"cfb1aj0+gdN87A3ecDqobuU","LevelCtrl",void 0),t("LevelCtrl",function(){function t(){this.levelData=null,this.currentWaveIdx=1,this.state=0}var e=t.prototype;return e.start=function(){this.startWave()},e.reset=function(){this.currentWaveIdx=1},e.startWave=function(){var t=this.levelData.waves[this.currentWaveIdx];s.ins.data=t,s.ins.onComplete=this.onCompleted_Wave.bind(this),s.ins.start(),this.state=1},e.onCompleted_Wave=function(){this.currentWaveIdx++,this.state=2},e.update=function(){switch(this.state){case 1:s.ins.update();break;case 2:this.updateWaveEnemy()}},e.updateWaveEnemy=function(){n.ins.allEnemies.length>0||(this.state=0,this.onClearWaveAllEnemies())},e.onClearWaveAllEnemies=function(){a.exe()},t}()).ins=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/LevelLoad.ts",["cc"],(function(e){var n,t,a,o;return{setters:[function(e){n=e.cclegacy,t=e.find,a=e.instantiate,o=e.Vec3}],execute:function(){n._RF.push({},"7c48evsGQlFvbqgQBQygb5J","LevelLoad",void 0),e("LevelLoad",function(){function e(){}return e.load=function(){this.load2()},e.load2=function(){var e=t("Canvas/World/Layer0");null!=e&&e.destroy();var n=a(this.pfMap);n.name="Layer0",n.setParent(t("Canvas/World"),!1),n.position=o.ZERO,n.setSiblingIndex(0)},e}()).pfMap=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelString.ts",["cc","./Lang.ts"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy},function(e){t=e.Lang}],execute:function(){n._RF.push({},"28f1apKn9lCoJhjV04JOE+z","LevelString",void 0);e("LevelString",function(){function e(){}return e.getName=function(e){var n="MainLevel_Name_"+e;return t.get(n)},e.getMainLevelName=function(e){var n="MainLevel_Name_"+(e+1);return t.get(n)},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Life.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CurrentMax.ts"],(function(t){var e,n,r;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){r=t.CurrentMax}],execute:function(){n._RF.push({},"4b97bMK9IRA/Jd2acIExwxT","Life",void 0);t("Life",function(){function t(){this.hp=new r}return t.prototype.add=function(t){t=Math.floor(t),this.hp.current+=t,this.hp.current>this.hp.max&&(this.hp.current=this.hp.max)},e(t,[{key:"isAlive",get:function(){return this.hp.current>0}},{key:"isDead",get:function(){return this.hp.current<=0}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ListHelper.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"a8980093RZAN62vGVDZLC0l","ListHelper",void 0);e("ListHelper",function(){function e(){}return e.addUniquely=function(e,n){-1==e.indexOf(n)&&e.push(n)},e.remove=function(e,n){var t=e.indexOf(n);-1!=t&&e.splice(t,1)},e.clear=function(e){e.splice(0,e.length)},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LoaderBase.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"55d68491MNH14z3xfa6FLW+","LoaderBase",void 0);e("LoaderBase",function(){function e(){this.onComplete=null,this.onProgress=null}var n=e.prototype;return n.add=function(e,n){},n.exe=function(){},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LoaderRemote.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoaderBase.ts"],(function(e){var t,n,o,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e.assetManager},function(e){r=e.LoaderBase}],execute:function(){n._RF.push({},"364e6rTiBpOB5xdRG3CZj1f","LoaderRemote",void 0);e("LoaderRemote",function(e){function n(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).onComplete=null,t.onProgress=null,t.list=new Array,t}t(n,e);var r=n.prototype;return r.add=function(e,t){var n={};n.path=e,n.handler=t,this.list.push(n)},r.exe=function(){for(var e=this,t=this.list.length,n=0,r=function(){var r=e.list[s],a=r.path,l=r.handler,i=a;o.loadRemote(i,(function(o,r){null==o?(l(r),++n==t&&e.onComplete()):console.error("读取配置出错："+i)}))},s=0;s<this.list.length;++s)r()},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/LoaderResources.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoaderBase.ts"],(function(e){var t,r,n,s;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e.resources},function(e){s=e.LoaderBase}],execute:function(){r._RF.push({},"94198qx4vVFZ6nhqlENupof","LoaderResources",void 0);e("LoaderResources",function(e){function r(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).onComplete=null,t.onProgress=null,t.list=new Array,t.val=0,t}t(r,e);var s=r.prototype;return s.add=function(e,t){var r={};r.path=e,r.handler=t,this.list.push(r)},s.exe=function(){for(var e=this,t=new Array,r=0;r<this.list.length;++r)t.push(this.list[r].path);n.load(t,this._onProgress.bind(this),(function(t,r){for(var n=0;n<r.length;++n){var s=r[n];(0,e.list[n].handler)(s)}null==e.onComplete||e.onComplete()}))},s._onProgress=function(e,t,r){var n,s=e/t;s<this.val||(this.val=s,null==(n=this.onProgress)||n.call(this,this.val))},r}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,o,a,l,c,s,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,l=e._decorator,c=e.Component},function(e){s=e.ready,u=e.init,p=e.t}],execute:function(){var y,d,b,f,h,L;a._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);var g=l.ccclass,v=l.property,k=l.executeInEditMode;e("LocalizedLabel",(y=g("LocalizedLabel"),d=v({visible:!1}),b=v({displayName:"Key",visible:!0}),y(f=k((L=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).label=null,r(t,"key",L,n(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){s||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()},a.updateLabel=function(){this.label&&(this.label.string=p(this.key))},o(t,[{key:"_key",get:function(){return this.key},set:function(e){this.updateLabel(),this.key=e}}]),t}(c)).prototype,"key",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(h.prototype,"_key",[b],Object.getOwnPropertyDescriptor(h.prototype,"_key"),h.prototype),f=h))||f)||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,a,o,p,s,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.SpriteFrame,s=e.Component},function(e){c=e.ready,u=e.init,l=e._language}],execute:function(){var f,h,d,g,y,z,L,m,b,v,S;a._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);var F=o.ccclass,_=o.property,w=o.executeInEditMode,D=(f=F("LocalizedSpriteItem"),h=_({type:p}),f((y=t((g=function(){i(this,"language",y,this),i(this,"spriteFrame",z,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),z=t(g.prototype,"spriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d);e("LocalizedSprite",(L=F("LocalizedSprite"),m=_({type:D}),L(b=w((S=t((v=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).sprite=null,i(t,"spriteList",S,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},a.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===l){this.sprite.spriteFrame=t.spriteFrame;break}}},t}(s)).prototype,"spriteList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b)||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Account.ts","./AccountPersist.ts","./Ad.ts","./AdBase.ts","./AdGp.ts","./AdTt.ts","./AdWx.ts","./AdForegroundSwitch.ts","./AdInit.ts","./AdRewardVideoFailHandler.ts","./AdStartup.ts","./AudioSettingsPersist.ts","./Music2.ts","./Sound.ts","./SoundBtnClickSetter.ts","./CfgArticle.ts","./CfgArticleGrade.ts","./CfgArticleUnlock.ts","./CfgBuff.ts","./CfgBullet.ts","./CfgDaySign.ts","./CfgFarm.ts","./CfgFeature.ts","./CfgGameBagTrayAricleGen.ts","./CfgGeneral.ts","./CfgGiftGroup.ts","./CfgInviteConfig.ts","./CfgItem.ts","./CfgItemDraw.ts","./CfgItemReward.ts","./CfgLoad.ts","./CfgMushrom.ts","./CfgRole.ts","./CfgShape.ts","./CfgTower.ts","./CfgUpgrade.ts","./TileShapeDataParser.ts","./UiGuideCover.ts","./ItemData.ts","./ItemDraw.ts","./ItemGet.ts","./ItemSub.ts","./ItemType.ts","./UiItem.ts","./UiItemIcon.ts","./UiItemList.ts","./LoaderBase.ts","./LoaderRemote.ts","./LoaderResources.ts","./DailyLimit.ts","./FrameSecConvert.ts","./Lang.ts","./MoneyFly.ts","./SeqScaleShow.ts","./StaminaRecovery.ts","./TweenHelper.ts","./PfLoad.ts","./PfMgr.ts","./PfMgrHeroUp.ts","./PfMgrIcon.ts","./PfMgrIconBuff.ts","./PfMgrMoney.ts","./PfMgrMushroom.ts","./PfMgrNumber.ts","./Channel.ts","./ChannelType.ts","./InitTt.ts","./InitWx.ts","./PlatformInit.ts","./ArticleString.ts","./UiArticleIcon.ts","./UiBgQuality.ts","./UiBubble.ts","./UiBubbleWithIcon.ts","./UiDebug.ts","./UiDialog.ts","./UiLoadingScene.ts","./UiPopupBase.ts","./UiSettings.ts","./UiToast.ts","./UiArticleDetail.ts","./UiArticleDetailAttribute.ts","./UiArticleDetailIcon.ts","./BagArticle.ts","./BagArticleFactory.ts","./BagArticleGradeHelper.ts","./BagArticleGridPlace.ts","./BagArticleGridPlaceByPos.ts","./BagArticleSpeak.ts","./BagArticleHelper.ts","./BagGridDraw.ts","./CellExpand.ts","./GridHelper.ts","./GridHint.ts","./GridModeTransition.ts","./GridTraverse.ts","./UiBagCell.ts","./UiBagGrid.ts","./UiBagGridBg.ts","./UiBag.ts","./UiBagBottom.ts","./UiBagCfg.ts","./UiBagExpandOp.ts","./UiTray.ts","./EffectFactory.ts","./MergeDefinition.ts","./MergeEffect.ts","./MergeGrid.ts","./MergeGridHybrid.ts","./MergeHint.ts","./MergeHybridHint.ts","./MergeTray.ts","./AuraHint.ts","./GestureArticleInfo.ts","./HitTest.ts","./UiBagTouch.ts","./Entry.ts","./GameArg.ts","./Guide.ts","./GuideData.ts","./UiTextBox.ts","./Init.ts","./LevelLoad.ts","./Test.ts","./TweenSpeed.ts","./UiBar.ts","./UiBar2.ts","./UiHpBar.ts","./UiFeature.ts","./UiKeyboard.ts","./UiMain2.ts","./UiMoney001.ts","./UiPlayerGrade.ts","./UiTop2.ts","./UiWaveInfo.ts","./FeatureAcquire.ts","./FeatureExtract.ts","./UiFeatureSel.ts","./UiFeatureSelBtnList.ts","./UiFeatureSelItem.ts","./UiFeatureSelItemList.ts","./UiLose.ts","./UiWin.ts","./UiPause.ts","./UiStats.ts","./Ai001.ts","./Ai002.ts","./AiCom.ts","./AiSys.ts","./PathMove.ts","./Affix.ts","./AuraCom.ts","./AuraScopeType.ts","./Buff.ts","./BuffCom.ts","./BuffFactory.ts","./BuffIncreaseCalc.ts","./BuffOp.ts","./BuffResetMergeGrade.ts","./BuffString.ts","./Buff_HpRegenIncreasePercentBelowPercentPerWave.ts","./Buff_RndArticleMergeGradeUpgrade.ts","./Bullet.ts","./BulletBounceRect.ts","./BulletFactory.ts","./BulletMgr.ts","./BulletMoveCalc.ts","./BulletMoveSys.ts","./BulletPfMgr.ts","./BulletSys.ts","./BulletViewHelper.ts","./CollisionBullet.ts","./CollisionHandler.ts","./Life.ts","./Role.ts","./RoleFactory.ts","./RoleMgr.ts","./PfMgrRole.ts","./RoleAnimSpine.ts","./RoleAttack.ts","./RoleAttributeUpdate.ts","./RoleDie.ts","./RoleGetDamage.ts","./RoleMove.ts","./RoleMoveSys.ts","./RoleSys.ts","./MoveCom.ts","./MoveRole.ts","./RoleMoveView.ts","./SkillBase.ts","./SkillCloseDamage.ts","./SkillCom.ts","./SkillType.ts","./EffectPfMgr.ts","./FrameCall.ts","./Stats.ts","./Vec2dHelper.ts","./WorldNode.ts","./ZOrderCtrl.ts","./CurrentMax.ts","./TowerAttack.ts","./TowerAttackTargetSelect.ts","./TowerBulletEmit.ts","./AttackCom.ts","./Tower.ts","./TowerFactory.ts","./TowerMgr.ts","./TowerAllUpdate.ts","./TowerAttributeUpdate.ts","./TowerAuraEmit.ts","./TowerAuraScopeExpand.ts","./TowerSys.ts","./TowerSysBuff.ts","./BagArticleReloaded.ts","./BagTrayAricleGen.ts","./BagView.ts","./EnemyMovePath.ts","./GameLose.ts","./GamePause.ts","./GameStart.ts","./CfgLevelGeneralMgr.ts","./CfgLevelWaveMgr.ts","./EnemyGen.ts","./LevelCtrl.ts","./LevelString.ts","./WaveCtrl.ts","./WaveSettle.ts","./Player.ts","./PlayerBuffAffect.ts","./PlayerGradeOp.ts","./PlayerInit.ts","./PlayerRole.ts","./Entry3.ts","./Init3.ts","./ArticleUnlockLevel.ts","./UiBagArticleDetail.ts","./UiBagArticleDetailBaseAttribute.ts","./UiBagArticleDetailBtnList.ts","./UiBagArticleDetailUnlocked.ts","./ReplaceModeEnter.ts","./UiBag2.ts","./UiBagDeploy.ts","./UiBagItem.ts","./UiBagItemLocked.ts","./UiBagLocked.ts","./UiBagPrefab.ts","./UiBagReplace.ts","./UiBagUnlocked.ts","./UiMoney0012.ts","./UiMoney002.ts","./UiStamina.ts","./UiTop.ts","./PfLevelThumbnail.ts","./UiBattle.ts","./UiLeft.ts","./UiLevel.ts","./UiLevelArrow.ts","./UiLevelBtnList.ts","./UiLevelInfo.ts","./UiLevelThumbnail.ts","./UiRight.ts","./UiWaveReward.ts","./CfgShop.ts","./UiListItemGenMgr.ts","./UiShop.ts","./UiShopDaily.ts","./UiShopItem.ts","./UiShopMoney001.ts","./Test1.ts","./Test22.ts","./UiBottomTab.ts","./UiMain.ts","./CfgDailyCheckin.ts","./DailyCheckinData.ts","./UiDailyCheckin.ts","./UiArticleUnlock.ts","./UiGet.ts","./UiHybridGuide.ts","./UiStaminaBuy.ts","./World.ts","./Entry2.ts","./Init2.ts","./ResLoad.ts","./Test2.ts","./UiKeyboard2.ts","./Music.ts","./Sound2.ts","./BezierCalc.ts","./BezierMove.ts","./OsJudge.ts","./ScreenAdaptResolutionPolicy.ts","./TweenHelper2.ts","./UiMoreGames.ts","./ButtonInterval.ts","./NodeSizeFit.ts","./NumberRolling.ts","./Shake.ts","./TextureOriginalRatioSprite.ts","./UiEffect.ts","./UiSwitch.ts","./UiTabHeader.ts","./WxHelper.ts","./DateTimeMgr.ts","./DateTimeUtil.ts","./ListHelper.ts","./Random.ts","./Shuffle.ts","./WeightProbability.ts","./StringUtil.ts","./LanguageData.ts","./LocalizedLabel.ts","./LocalizedSprite.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MergeDefinition.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"0d039ecz4FNuqK/+7iQVJEf","MergeDefinition",void 0),i("MergeDefinition",function(){function i(){this.orig=new Array,this.data=new Map,this.hybrid=new Map,this.allowData=new Map}var t=i.prototype;return t.addDefinition=function(i,t,e,r){void 0===r&&(r=!1);var a=new n(i,t,e,r);if(this.orig.push(a),i!=t){var d=0==r?this.data:this.hybrid;this.addDefinitionSingle(i,t,e,d),this.addDefinitionSingle(t,i,e,d)}else this.addDefinitionSingle(i,t,e,this.data)},t.addDefinitionSingle=function(i,t,n,e){var r=e.get(i);null==r&&(r=new Map,e.set(i,r)),r.set(t,n)},t.getMergedId=function(i,t){var n=this.data.get(i);return null==n?null:n.get(t)},t.getMergedIdhybrid=function(i,t){var n=this.allowData.get(i);if(0==n)return null;if(0==(n=this.allowData.get(t)))return null;var e=this.hybrid.get(i);return null==e?null:e.get(t)},i}()).ins=null;var n=i("MergeDataItem",(function(i,t,n,e){void 0===i&&(i=null),void 0===t&&(t=null),void 0===n&&(n=null),void 0===e&&(e=!1),this.id1=void 0,this.id2=void 0,this.id3=void 0,this.isHybrid=!1,this.id1=i,this.id2=t,this.id3=n,this.isHybrid=e}));t._RF.pop()}}}));

System.register("chunks:///_virtual/MergeEffect.ts",["cc","./EffectFactory.ts"],(function(e){var t,c,r,n;return{setters:[function(e){t=e.cclegacy,c=e.Vec3,r=e.tween},function(e){n=e.EffectFactory}],execute:function(){t._RF.push({},"7e71dJHN6VNHICuRsj8CiN9","MergeEffect",void 0);e("MergeEffect",function(){function e(){}return e.merge=function(e){var t=n.create("Merge");t.setParent(e.view.root,!1),t.position=c.ZERO;var o=e.view.root;r(o).to(.2,{scale:new c(1.3,1.3,1.3)}).to(.2,{scale:new c(1,1,1)}).start()},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/MergeGrid.ts",["cc","./BagArticleFactory.ts","./BagArticleGridPlace.ts","./UiTray.ts","./MergeDefinition.ts","./MergeGridHybrid.ts","./MergeEffect.ts"],(function(e){var r,t,i,n,c,g,o;return{setters:[function(e){r=e.cclegacy},function(e){t=e.BagArticleFactory},function(e){i=e.BagArticleGridPlace},function(e){n=e.UiTray},function(e){c=e.MergeDefinition},function(e){g=e.MergeGridHybrid},function(e){o=e.MergeEffect}],execute:function(){r._RF.push({},"d56d38dK/pNXp5ySYdsRRCx","MergeGrid",void 0);e("MergeGrid",function(){function e(){}return e.tryMerge=function(e,r){return 1==g.tryMerge(e,r)||0!=this.canMerge(e,r)&&(this.merge(e,r[0].article),!0)},e.canMerge=function(e,r){var t=r[0].article;return null!=t&&(e!=t&&(t.cells[0]==r[0]&&(console.log("合成 全重叠"),null!=c.ins.getMergedId(e.cfg.id,t.cfg.id))))},e.merge=function(e,r){i.unbind(e),n.ins.removeAndArrange(e),e.view.root.destroy();var g=r.cells.slice(0,r.cells.length);i.unbind(r),r.view.root.destroy();var d=c.ins.getMergedId(e.cfg.id,r.cfg.id),s=t.create(d);i.exe(s,g,!1),o.merge(s)},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/MergeGridHybrid.ts",["cc","./BagArticleFactory.ts","./BagArticleGridPlace.ts","./BagArticleGridPlaceByPos.ts","./UiTray.ts","./MergeDefinition.ts","./CfgArticle.ts","./MergeEffect.ts"],(function(e){var r,t,i,n,o,c,a,g;return{setters:[function(e){r=e.cclegacy},function(e){t=e.BagArticleFactory},function(e){i=e.BagArticleGridPlace},function(e){n=e.BagArticleGridPlaceByPos},function(e){o=e.UiTray},function(e){c=e.MergeDefinition},function(e){a=e.CfgArticleMgr},function(e){g=e.MergeEffect}],execute:function(){r._RF.push({},"62a6egBtcFDXqIL4B2oIq+G","MergeGridHybrid",void 0);e("MergeGridHybrid",function(){function e(){}return e.tryMerge=function(e,r){var t=this.canMerge(e,r);return null!=t&&(this.merge(e,t[1],t[0]),!0)},e.canMerge=function(e,r){for(var t=0;t<r.length;++t){var i=r[t].article;if(null!=i&&e!=i){var n=c.ins.getMergedIdhybrid(e.cfg.id,i.cfg.id);if(null!=n)return[n,i]}}return null},e.merge=function(e,r,c){var u=r.view.root.parent,f=a.data.get(c).bagShapeId==e.cfg.bagShapeId?e.view.root.worldPosition:r.view.root.worldPosition;i.unbind(e),o.ins.removeAndArrange(e),e.view.root.destroy(),i.unbind(r),r.view.root.destroy();var d=t.create(c);d.view.root.setParent(u,!1),d.view.root.worldPosition=f,n.exe(d),g.merge(d)},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/MergeHint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MergeDefinition.ts","./BagArticleHelper.ts","./UiTray.ts"],(function(e){var t,n,r,i,o,l,a,c;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e.tween,i=e.Vec3,o=e.Tween},function(e){l=e.MergeDefinition},function(e){a=e.ArticleHelper},function(e){c=e.UiTray}],execute:function(){n._RF.push({},"f8a61wYULNIaqIqLrzGKGTN","MergeHint",void 0);e("MergeHint",function(){function e(){}return e.mergeable=function(e){var n=a.getAllAriclesInGrid();n.push.apply(n,c.ins.articles);for(var r,i=e.cfg.id,o=t(n);!(r=o()).done;){var s=r.value;if(e!=s)null!=l.ins.getMergedId(i,s.cfg.id)&&this.anim(s)}},e.anim=function(e){var t=e.view.root,n=r(t).sequence(r(t).to(.5,{scale:new i(.9,.9,.9)}),r(t).to(.5,{scale:new i(1,1,1)})).repeatForever().start();e.view.tweenMergeHint=n},e.restore=function(){o.stopAllByTag(10001);var e=a.getAllAriclesInGrid();e.push.apply(e,c.ins.articles);for(var n,l=t(e);!(n=l()).done;){var s=n.value;null!=s.view.tweenMergeHint&&(s.view.tweenMergeHint.stop(),s.view.tweenMergeHint=null,r(s.view.root).to(.1,{scale:i.ONE}).start())}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/MergeHybridHint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WorldNode.ts","./GridTraverse.ts","./MergeDefinition.ts","./EffectFactory.ts"],(function(e){var t,r,n,i,o,a,c,s,f,l;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,n=e.Vec3,i=e.Node,o=e.UITransform,a=e.math},function(e){c=e.WorldNode},function(e){s=e.GridTraverse},function(e){f=e.MergeDefinition},function(e){l=e.EffectFactory}],execute:function(){r._RF.push({},"48695v/J+NJ74qcqfxWhU+S","MergeHybridHint",void 0),e("MergeHybridHintMgr",function(){function e(){this.record=new Set,this.effect=new Array}var r=e.prototype;return r.exe=function(){var e=new Array;s.exe((function(t){var r=t.article;null!=r&&-1==e.indexOf(r)&&e.push(r)}));for(var t=0,r=e;t<r.length;t++){var n=r[t];this.hideShape(n)}for(var i=0;i<e.length;++i)for(var o=e[i],a=i+1;a<e.length;++a){var c=e[a],l=f.ins.getMergedIdhybrid(o.cfg.id,c.cfg.id);if(null!=l&&(this.showShape(o),this.showShape(c),1!=this.record.has(l))){this.record.add(l);var u=h.show(o,c);this.effect.push(u)}}},r.showShape=function(e){if(null==e.view.effectMergeHintShape){var t="MergeHintShape_"+e.cfg.bagShapeId,r=l.create(t,!1);if(null==r)return;r.setParent(e.view.root,!1),r.position=n.ZERO,r.setSiblingIndex(0),e.view.effectMergeHintShape=r}e.view.effectMergeHintShape.active=!0},r.hideShape=function(e){var t=e.view.effectMergeHintShape;null!=t&&(t.active=!1)},r.clearAllLines=function(){for(var e,r=t(this.effect);!(e=r()).done;){e.value.destroy()}this.effect.splice(0,this.effect.length)},e}()).ins=null;var h=e("MergeHybridHint",function(){function e(){}return e.show=function(e,t){var r=new i("MergeHint1");r.addComponent(o),r.setParent(c.ins.layer2,!1);var s=e.view.root.getComponent(o).convertToWorldSpaceAR(n.ZERO);c.ins.layer2.getComponent(o).convertToNodeSpaceAR(s,s),r.position=s;var f=l.create("MergeHint1",!1);f.setParent(r,!1),f.position=n.ZERO;var h=t.view.root.position.clone().subtract(e.view.root.position),u=h.length()/320;f.scale=new n(u,1,1);var v=a.toDegree(Math.atan2(h.y,h.x));f.eulerAngles=new n(0,0,v);var d=h.multiplyScalar(.5),g=l.create("MergeHint2",!1);return g.setParent(r,!1),g.position=d,r},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/MergeTray.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiTray.ts","./BagArticleGridPlace.ts","./MergeDefinition.ts","./BagArticleFactory.ts","./MergeEffect.ts"],(function(e){var r,t,i,n,o,c,u;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy},function(e){i=e.UiTray},function(e){n=e.BagArticleGridPlace},function(e){o=e.MergeDefinition},function(e){c=e.BagArticleFactory},function(e){u=e.MergeEffect}],execute:function(){t._RF.push({},"4df3eG0ygNEHLll1RDanxZi","MergeTray",void 0);e("MergeTray",function(){function e(){}return e.tryMerge=function(e){var r=this.getTarget(e);if(null==r)return!1;var t=o.ins.getMergedId(e.cfg.id,r.cfg.id);if(null==t&&null==(t=o.ins.getMergedIdhybrid(e.cfg.id,r.cfg.id)))return!1;var l=c.create(t);return l.view.root.setParent(r.view.root,!1),l.view.root.worldPosition=r.view.root.worldPosition,n.unbind(r),i.ins.remove(r),r.view.root.destroy(),n.unbind(e),i.ins.remove(e),e.view.root.destroy(),i.ins.insertArticle(l),u.merge(l),!0},e.getTarget=function(e){for(var t,n=r(i.ins.articles);!(t=n()).done;){var o=t.value;if(e!=o)if(o.view.root.worldPosition.clone().subtract(e.view.root.worldPosition).lengthSqr()<=22500)return o}return null},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyFly.ts",["cc","./PfMgrMoney.ts"],(function(n){var o,t,e,i,c,r,y;return{setters:[function(n){o=n.cclegacy,t=n.UITransform,e=n.Vec3,i=n.instantiate,c=n.randomRangeInt,r=n.tween},function(n){y=n.PfMgrMoney}],execute:function(){o._RF.push({},"c4430RPk3tDh7UfeyKeazcz","MoneyFly",void 0);n("MoneyFly",function(){function n(){}return n.money001Fly=function(n,o,t,e,i){void 0===e&&(e=10),void 0===i&&(i=null),this.fly("Money001",n,o,t,e,i)},n.money001Fly2=function(n,o,i,c,r){void 0===c&&(c=10),void 0===r&&(r=null);var y=i.getComponent(t).convertToWorldSpaceAR(e.ZERO);n.getComponent(t).convertToNodeSpaceAR(y,y),this.money001Fly(n,o,y,c,r)},n.fly=function(n,o,t,l,u,a){void 0===u&&(u=10),void 0===a&&(a=null);for(var s=y.ins.root.getChildByPath(n),f=function(){var n=i(s);n.setParent(o,!1);var y=new e;y.x=c(-150,150),y.y=c(-150,150),y.add(t),n.position=t,r(n).sequence(r(n).to(.3,{position:y}),r(n).delay(.2),r(n).to(.8,{position:l}),r(n).call((function(){n.destroy(),null==a||a()}))).start()},d=0;d<u;++d)f()},n}());o._RF.pop()}}}));

System.register("chunks:///_virtual/MoveCom.ts",["cc"],(function(e){var t,o;return{setters:[function(e){t=e.cclegacy,o=e.Vec3}],execute:function(){t._RF.push({},"f2dcdrDop5L/4c/V6wmboNN","MoveCom",void 0);e("MoveCom",(function(){this.enabled=!0,this.lockCount=0,this.speed=1,this.direction=new o,this.offset=new o,this.positionTest=new o}));t._RF.pop()}}}));

System.register("chunks:///_virtual/MoveRole.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"043b5sUahBMc5wI65gT0VWe","MoveRole",void 0);e("MoveRole",function(){function e(){}return e.exe=function(e,o){var t=e.move;this.preCalc(e,o),this.translate(e,t.offset,t.speed)},e.preCalc=function(e,o){var t=o.clone().normalize();e.move.direction=t;var n=t.multiplyScalar(e.move.speed);e.move.offset=n,e.move.positionTest=e.view.root.position.clone().add(n)},e.translate=function(e,o,t){return e.view.root.position=e.move.positionTest,!0},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Music.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,o,n,u,e,c;return{setters:[function(i){t=i.createClass},function(i){o=i.cclegacy,n=i.Node,u=i.AudioSource,e=i.resources,c=i.AudioClip}],execute:function(){o._RF.push({},"1d410N+GSFLToF1NfZZP3Pq","Music",void 0);i("Music",function(){function i(){this.m_enabled=!0,this.audioSrc=null}var o=i.prototype;return o.play=function(i,t){var o=this;if(void 0===t&&(t=!0),0!=this.enabled){if(this.stop(),null==this.audioSrc){var s=new n;this.audioSrc=s.getComponent(u),null==this.audioSrc&&(this.audioSrc=s.addComponent(u))}e.load(i,c,(function(i,n){o.audioSrc.clip=n,o.audioSrc.loop=t,o.audioSrc.play()}))}},o.stop=function(){null!=this.audioSrc&&this.audioSrc.stop()},t(i,[{key:"enabled",get:function(){return this.m_enabled},set:function(i){this.m_enabled=i,0==i&&this.stop()}}]),i}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Music2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Music.ts"],(function(i){var n,t,e;return{setters:[function(i){n=i.inheritsLoose},function(i){t=i.cclegacy},function(i){e=i.Music}],execute:function(){var u;t._RF.push({},"eb456vXz8FIz7VRzS1IiGDD","Music",void 0);var o=i("Music",function(i){function t(){return i.apply(this,arguments)||this}n(t,i);var e=t.prototype;return e.home=function(){this.play("Common/Audio/Bgm/Guitalele's Happy Place")},e.game=function(){this.play("Common/Audio/Bgm/game")},t}(e));u=o,o.ins=new u,t._RF.pop()}}}));

System.register("chunks:///_virtual/NodeSizeFit.ts",["cc"],(function(t){var e,i,n;return{setters:[function(t){e=t.cclegacy,i=t.UITransform,n=t.Sprite}],execute:function(){e._RF.push({},"d8be0Q1JTdN+b3y1ZtEhyIz","NodeSizeFit",void 0);t("NodeSizeFit",function(){function t(){}return t.set=function(t,e){var n=e.width/e.height,o=t.getComponent(i),h=o.contentSize.clone();n>1?h.height=h.width/n:n<1&&(h.width=h.height*n),o.setContentSize(h)},t.set2=function(t,e,n){e=e.clone();var o=n.width/n.height,h=t.getComponent(i);o>1?e.height=e.width/o:o<1&&(e.width=e.height*o),h.setContentSize(e)},t.trimmed=function(e,o){e.trim=!0,e.sizeMode=n.SizeMode.TRIMMED;var h=e.node.getComponent(i).contentSize;t.set2(e.node,o,h)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/NumberRolling.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t.Component}],execute:function(){e._RF.push({},"29502SFN3pFfaeaQMp22yGi","NumberRolling",void 0);t("NumberRolling",function(){function t(){}return t.exe=function(t,n,e,i){var o=null;null==(o=t.getComponent(u))&&(o=t.addComponent(u)),o.enabled=!0,o.label=t,o.num1=e,o.num2=i,o.setValue=this.setVal,o.duration=n,o.onComplete=function(){o.enabled=!1},o.init()},t.setVal=function(t){return t.toString()},t}());var u=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),u=0;u<e;u++)i[u]=arguments[u];return(n=t.call.apply(t,[this].concat(i))||this).label=null,n.num1=0,n.num2=0,n.duration=0,n.onComplete=null,n.setValue=null,n.diff=0,n.timeCount=0,n}n(e,t);var i=e.prototype;return i.init=function(){this.diff=this.num2-this.num1,this.timeCount=0,this.update(0)},i.update=function(t){this.timeCount+=t;var n=this.timeCount/this.duration;if(n>=1)return this.showNumber(this.num2),this.enabled=!1,void(null!=this.onComplete&&this.onComplete());var e=this.diff*n;e=this.num1+e,e=Math.floor(e),this.showNumber(e)},i.showNumber=function(t){this.label.string=this.setValue(t)},e}(i);e._RF.pop()}}}));

System.register("chunks:///_virtual/OsJudge.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"b5ce1/KdhhF5oaQIRetP8vw","OsJudge",void 0);e("OsJudge",function(){function e(){}return e.isWx=function(){return/MicroMessenger/i.test(window.navigator.userAgent)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/PathMove.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ebce9CZ5DhNd67mYz51sR6F","PathMove",void 0);t("PathMove",(function(){this.path=new Array,this.idx=0,this.lenMoved=0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/PfLevelThumbnail.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var e;n._RF.push({},"f8a75cS3pVFhKKBB0pwk5VS","PfLevelThumbnail",void 0);var i=t("PfLevelThumbnail",function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t},t}());e=i,i.ins=new e,n._RF.pop()}}}));

System.register("chunks:///_virtual/PfLoad.ts",["cc","./UiBag.ts","./UiHpBar.ts","./UiFeatureSel.ts","./BulletPfMgr.ts","./PfMgrRole.ts","./EffectPfMgr.ts","./UiBagArticleDetail.ts","./UiBag2.ts","./UiDialog.ts","./UiLoadingScene.ts","./PfMgr.ts","./PfMgrIcon.ts","./PfMgrIconBuff.ts","./PfMgrMoney.ts","./PfMgrNumber.ts","./UiBubble.ts","./UiSettings.ts","./PfLevelThumbnail.ts","./UiStaminaBuy.ts","./UiGet.ts","./UiDailyCheckin.ts","./UiHybridGuide.ts"],(function(e){var i,n,a,t,o,c,r,s,f,l,u,m,U,g,b,B,k,P,h,G,M,d,H,p,v,y;return{setters:[function(e){i=e.cclegacy,n=e.resources,a=e.Prefab,t=e.instantiate},function(e){o=e.UiBag},function(e){c=e.UiHpBar},function(e){r=e.UiFeatureSel},function(e){s=e.BulletPfMgr},function(e){f=e.PfMgrRole},function(e){l=e.EffectPfMgr},function(e){u=e.UiBagArticleDetail},function(e){m=e.UiBag},function(e){U=e.UiDialog},function(e){g=e.UiLoadingScene},function(e){b=e.PfMgrBagArticle},function(e){B=e.PfMgrIcon},function(e){k=e.PfMgrIconBuff},function(e){P=e.PfMgrMoney},function(e){h=e.PfMgrNumber},function(e){G=e.UiBubble},function(e){M=e.UiSettings},function(e){d=e.PfLevelThumbnail},function(e){H=e.UiStaminaBuy},function(e){p=e.UiGet},function(e){v=e.UiDailyCheckin},function(e){y=e.UiHybridGuide}],execute:function(){i._RF.push({},"89bc5tRkkNO2YwxotU+lk+2","PfLoad",void 0);var S=e("PfLoad",function(){function e(){}return e.exe=function(e){var i=this;if(1!=this.flag){this.flag=!1;var t=["Common/Ui/Money","Common/Ui/LoadingScene","Common/Ui/Dialog","Common/Ui/Icon","Common/Ui/Bubble","Common/Ui/Settings","Home/Ui/ArticleDetail","Home/Ui/Bag","Home/Ui/LevelThumbnail","Home/Ui/StaminaBuy","Home/Ui/Get","Home/Ui/DailyCheckin","Home/Ui/HybridGuide","Bag/Bag","Bag/Article","Game/Role/Role","Game/Ui/Number","Game/Ui/Bar","Game/Bullet/Bullet","Game/Ui/FeatureSel","Game/Ui/Icon","Game/Misc/Effect"];n.load(t,a,this._onProgress.bind(this),(function(n,a){for(var o=0;o<a.length;++o){var c=t[o],r=a[o];i.handlePf(c,r)}null==e||e()}))}else e()},e.handlePf=function(e,i){switch(e){case"Common/Ui/Money":P.ins.init(t(i));break;case"Common/Ui/LoadingScene":g.ins.init(t(i));break;case"Common/Ui/Dialog":U.pf=i;break;case"Common/Ui/Icon":B.ins.init(t(i));break;case"Common/Ui/Bubble":G.pf=i;break;case"Common/Ui/Settings":M.pf=i;break;case"Home/Ui/ArticleDetail":u.pf=i;break;case"Home/Ui/Bag":m.pf=i;break;case"Home/Ui/LevelThumbnail":d.ins.init(t(i));break;case"Home/Ui/StaminaBuy":H.pf=i;break;case"Home/Ui/Get":p.pf=i;break;case"Home/Ui/DailyCheckin":v.pf=i;break;case"Home/Ui/HybridGuide":y.pf=i;break;case"Bag/Bag":o.pf=i;break;case"Bag/Article":b.bagArticle=t(i);break;case"Game/Role/Role":f.pf=t(i);break;case"Game/Ui/Number":h.ins.init(t(i));break;case"Game/Ui/Bar":c.pf=t(i);break;case"Game/Bullet/Bullet":s.ins.root=t(i);break;case"Game/Ui/FeatureSel":r.pf=i;break;case"Game/Ui/Icon":k.ins.root=t(i);break;case"Game/Misc/Effect":l.ins.root=t(i)}},e._onProgress=function(e,i,n){var a,t=e/i;t<this.val||(this.val=t,null==(a=this.onProgress)||a.call(this,this.val))},e}());S.onProgress=void 0,S.val=0,S.flag=!1,i._RF.pop()}}}));

System.register("chunks:///_virtual/PfMgr.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"22aeaPZWX1CjJ4DQKJqqnOQ","PfMgr",void 0),t("PfMgrBagArticle",function(){function t(){}return t.getPf=function(e){var r=e.split("_");if(r.length>=2){var n=r[0]+"/"+e;return t.bagArticle.getChildByPath(n)}return t.bagArticle.getChildByPath(e)},t}()).bagArticle=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/PfMgrHeroUp.ts",["cc"],(function(t){var r,n;return{setters:[function(t){r=t.cclegacy,n=t.Sprite}],execute:function(){var o;r._RF.push({},"c570aaV+M5BWLKMl9fp8HsC","PfMgrHeroUp",void 0);var e=t("PfMgrHeroUp",function(){function t(){this.root=void 0}var r=t.prototype;return r.init=function(t){this.root=t},r.getSprite=function(t){return this.root.getChildByPath(t.toString()).getComponent(n)},t}());o=e,e.ins=new o,r._RF.pop()}}}));

System.register("chunks:///_virtual/PfMgrIcon.ts",["cc"],(function(t){var o,n;return{setters:[function(t){o=t.cclegacy,n=t.Sprite}],execute:function(){var i;o._RF.push({},"897a093RKRCfq0BAV3s3ZJg","PfMgrIcon",void 0);var e=t("PfMgrIcon",function(){function t(){this.root=void 0,this.money001=void 0,this.money002=void 0,this.stamina=void 0}return t.prototype.init=function(t){this.root=t,this.money001=this.root.getChildByPath("Money/Money001").getComponent(n),this.money002=this.root.getChildByPath("Money/Money002").getComponent(n),this.stamina=this.root.getChildByPath("Stamina").getComponent(n)},t}());i=e,e.ins=new i,o._RF.pop()}}}));

System.register("chunks:///_virtual/PfMgrIconBuff.ts",["cc"],(function(t){var n,o;return{setters:[function(t){n=t.cclegacy,o=t.Sprite}],execute:function(){var e;n._RF.push({},"45378B8mGVPipcXrkdys2Ki","PfMgrIconBuff",void 0);var r=t("PfMgrIconBuff",function(){function t(){this.root=void 0}return t.prototype.getIconById=function(t){var n,e=t.split("-");if(e.length>=2){var r=e[0]+"/"+t,i=this.root.getChildByPath(r),u=null==i?void 0:i.getComponent(o);if(null!=u)return u}var c=null==(n=this.root.getChildByPath(t))?void 0:n.getComponent(o);return null!=c?c:c=this.root.getChildByPath("Default").getComponent(o)},t}());e=r,r.ins=new e,n._RF.pop()}}}));

System.register("chunks:///_virtual/PfMgrMoney.ts",["cc"],(function(t){var e,o;return{setters:[function(t){e=t.cclegacy,o=t.Sprite}],execute:function(){var i;e._RF.push({},"c4718r9kTxImr5oSKd/EV2O","PfMgrMoney",void 0);var n=t("PfMgrMoney",function(){function t(){this.root=void 0,this.money001=void 0,this.meat=void 0,this.heroSpiece1=void 0}var e=t.prototype;return e.init=function(t){this.root=t,this.money001=this.root.getChildByPath("Money001"),this.meat=this.root.getChildByPath("Meat").getComponent(o),this.heroSpiece1=this.root.getChildByPath("HeroPiece1").getComponent(o)},e.get_sprite_by_id=function(t){return this.root.getChildByPath(t).getComponent(o)},t}());i=n,n.ins=new i,e._RF.pop()}}}));

System.register("chunks:///_virtual/PfMgrMushroom.ts",["cc"],(function(t){var o,r;return{setters:[function(t){o=t.cclegacy,r=t.Sprite}],execute:function(){var n;o._RF.push({},"eaabaU+Ev9AFobIn1ua4Oxn","PfMgrMushroom",void 0);var e=t("PfMgrMushroom",function(){function t(){this.root=void 0}var o=t.prototype;return o.init=function(t){this.root=t},o.getSprite=function(t){return this.root.getChildByPath(t.toString()).getComponent(r)},t}());n=e,e.ins=new n,o._RF.pop()}}}));

System.register("chunks:///_virtual/PfMgrNumber.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){var r;i._RF.push({},"63711Fq4zRDo6KIFtV0akY4","PfMgrNumber",void 0);var e=t("PfMgrNumber",function(){function t(){this.root=void 0,this.damage=void 0,this.damageCrit=void 0}return t.prototype.init=function(t){this.root=t,this.damage=this.root.getChildByPath("Damage"),this.damageCrit=this.root.getChildByPath("DamageCrit")},t}());r=e,e.ins=new r,i._RF.pop()}}}));

System.register("chunks:///_virtual/PfMgrRole.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"ace045kH11IWqljig7ItdKz","PfMgrRole",void 0),e("PfMgrRole",(function(){})).pf=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformInit.ts",["cc","./InitWx.ts","./InitTt.ts"],(function(t){var n,e,c,i;return{setters:[function(t){n=t.cclegacy,e=t.sys},function(t){c=t.InitWx},function(t){i=t.InitTt}],execute:function(){n._RF.push({},"c323eKJT1JA9qLD7zzBsPy3","PlatformInit",void 0);t("PlatformInit",function(){function t(){}return t.exe=function(){switch(e.platform){case e.Platform.WECHAT_GAME:c.exe();break;case e.Platform.BYTEDANCE_MINI_GAME:i.exe();break;case e.Platform.ANDROID:}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["cc","./BuffCom.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.BuffCom}],execute:function(){t._RF.push({},"5e38cUVFU9PFolUgjAOUdly","Player",void 0),e("Player",(function(){this.bag=new i,this.grade=new r,this.buff=new n,this.money001=0,this.getGridExpandCount=3})).ins=null;var i=e("PlayerBag",(function(){this.cells=new Array})),r=e("PlayerGrade",(function(){this.grade=1,this.exp=0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerBuffAffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Affix.ts","./RoleMgr.ts","./RoleAttributeUpdate.ts","./Player.ts"],(function(e){var t,f,n,r,o,c;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){f=e.cclegacy},function(e){n=e.AffixType},function(e){r=e.RoleMgr},function(e){o=e.RoleAttributeUpdate},function(e){c=e.Player}],execute:function(){f._RF.push({},"86850iadLhM3IHfHLR2fgsf","PlayerBuffAffect",void 0);e("PlayerBuffAffect",function(){function e(){}return e.affectAllRoles=function(){for(var e,f=t(r.ins.allEnemies);!(e=f()).done;){var n=e.value;o.exe(n)}},e.affectRole=function(e){for(var f,r=c.ins.buff.list,u=t(r);!(f=u()).done;){var a=f.value;switch(a.affix.type){case n.MoveSpeedDecreasePercent:e.buff.add(a)}}o.exe(e)},e}());f._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerGradeOp.ts",["cc","./CfgUpgrade.ts","./UiPlayerGrade.ts","./UiFeatureSel.ts","./Player.ts"],(function(e){var r,a,t,n,i;return{setters:[function(e){r=e.cclegacy},function(e){a=e.CfgUpgrade},function(e){t=e.UiPlayerGrade},function(e){n=e.UiFeatureSel},function(e){i=e.Player}],execute:function(){r._RF.push({},"40e3d3qhkVHc5fNZjsVh5Iz","PlayerGradeOp",void 0),e("PlayerGradeOp",function(){function e(){}return e.addExp=function(e){i.ins.grade.exp+=e*this.expFactor,this.upgrade(),t.ins.refresh()},e.upgrade=function(){var e=i.ins.grade;if(!(e.grade>a.data.length)){var r=a.data[e.grade];if(!(e.exp<r)){e.grade++,e.exp=e.exp-r;var t=n.ins;t.refresh(),t.show()}}},e}()).expFactor=1,r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInit.ts",["cc","./Player.ts"],(function(n){var e,t,r;return{setters:[function(n){e=n.cclegacy,t=n.Vec2},function(n){r=n.Player}],execute:function(){e._RF.push({},"98359n4iI1J2bMKp6/RatKg","PlayerInit",void 0);n("PlayerInit",function(){function n(){}return n.exe=function(){for(var n=r.ins=new r,e=new t(1,2),c=0;c<3;++c)for(var i=0;i<3;++i)n.bag.cells.push(e.clone().add2f(i,c));n.money001=15},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerRole.ts",["cc","./UiHpBar.ts","./RoleFactory.ts","./WorldNode.ts"],(function(e){var o,t,r,n,i,a;return{setters:[function(e){o=e.cclegacy,t=e.UITransform,r=e.Vec3},function(e){n=e.UiHpBar},function(e){i=e.RoleFactory},function(e){a=e.WorldNode}],execute:function(){var l;o._RF.push({},"e6ee8qNQGBHEY65NsVvNM4T","PlayerRole",void 0);var s=e("PlayerRole",(function(){this.main=void 0}));l=s,s.ins=new l;e("PlayerRoleInit",function(){function e(){}return e.init=function(){var e=a.ins.root.getChildByPath("Cfg/PlayerRole"),o=i.create("G1#Player001");s.ins.main=o,o.view.root.setParent(a.ins.layer1,!1),o.view.root.worldPosition=e.worldPosition;var l=o.view.main.getComponent(t).getBoundingBox(),c=n.create("HpBarPlayerRole");o.view.hpBar=c,c.role=o,c.root.setParent(o.view.root,!1),c.root.position=new r(0,l.yMax+20),c.refresh()},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Random.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"ddbbcAFyqVH0rrtlvc2epag","Random",void 0);n("Random",function(){function n(){}return n.rangeInt=function(n,t){return Math.floor(Math.random()*(t+1-n))+n},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ReplaceModeEnter.ts",["cc","./Account.ts","./AccountPersist.ts","./UiBag2.ts"],(function(e){var n,t,i,o,c,r,s,a;return{setters:[function(e){n=e.cclegacy,t=e.instantiate,i=e.tween,o=e.Vec3,c=e.Input},function(e){r=e.Account},function(e){s=e.AccountPersist},function(e){a=e.UiBag}],execute:function(){n._RF.push({},"03be7LWwt1LFZb2DFG4ATpr","ReplaceModeEnter",void 0);e("ReplaceModeEnter",function(){function e(){}return e.enter=function(e){var n=this;a.ins.sv.active=!1,a.ins.replace.root.active=!0;var i=a.ins.unlocked.items.find((function(n){return n.articleId==e})),o=t(i.root);o.setParent(a.ins.replace.root,!1),a.ins.replace.item.active=!1,o.position=a.ins.replace.item.position;for(var r=a.ins.deploy.items,s=function(){var t=r[u],i=t.root;n.deployItemAnim(i);var o=t.articleId;t.root.off(c.EventType.TOUCH_END),t.root.on(c.EventType.TOUCH_END,(function(){n.swap(e,o)}))},u=0;u<r.length;++u)s()},e.deployItemAnim=function(e){i(e).sequence(i(e).to(.8,{scale:new o(1.1,1.1,1.1)}),i(e).to(.8,{scale:new o(.9,.9,.9)})).repeatForever().start()},e.swap=function(e,n){var t=r.ins.bag.deploy.indexOf(n);r.ins.bag.deploy[t]=e;var i=r.ins.bag.unlocked,o=i.indexOf(e),c=i.indexOf(n),u=i[o];i[o]=i[c],i[c]=u,s.save(),a.ins.sv.active=!0,a.ins.replace.root.active=!1,a.ins.deploy.refresh(),a.ins.unlocked.refresh()},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ResLoad.ts",["cc","./CfgLoad.ts","./PfLoad.ts"],(function(n){var o,e,t;return{setters:[function(n){o=n.cclegacy},function(n){e=n.CfgLoad},function(n){t=n.PfLoad}],execute:function(){o._RF.push({},"35fb29kRfRJjLBx4DZuTNcM","ResLoad",void 0),n("ResLoad",function(){function n(){}return n.exe=function(n){var o=this;(new e).exe((function(){t.onProgress=o.onProgress,t.exe((function(){n()}))}))},n}()).onProgress=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/Role.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"25cadL4EK1HhYtOtZy6HKw+","Role",void 0);i("Role",(function(){this.id=void 0,this.cfg=void 0,this.attack=null,this.move=null,this.life=null,this.view=null,this.skill=null,this.exp=null,this.ai=null,this.buff=null})),i("RoleView",(function(){this.root=void 0,this.main=void 0,this.skeleton=null,this.hpBar=null,this.collider=null})),i("Exp",(function(){this.val=0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleAnimSpine.ts",["cc","./FrameSecConvert.ts"],(function(n){var t,e;return{setters:[function(n){t=n.cclegacy},function(n){e=n.FrameSecConvert}],execute:function(){t._RF.push({},"31e7epz931JW48qTdTfnO7W","RoleAnimSpine",void 0);n("RoleAnimSpine",function(){function n(){}return n.playIdle=function(n){this.play(n,"idle")},n.playMove=function(n){this.play(n,"move")},n.playAttack=function(n){if(null!=n){var t="attack";if(n.getCurrent(0).animation.name!=t){n.setAnimation(0,t,!1);n.addAnimation(0,"idle",!0)}}},n.play=function(n,t){if(null!=n){var e=n.getCurrent(0);null!=e?e.animation.name!=t&&n.setAnimation(0,t,!0):n.setAnimation(0,t,!0)}},n}()),n("RoleAnimSpineAttackTimeScaleUpdate",function(){function n(){}return n.update=function(n){var t=e.toSecond(n.attack.cd.max);n.view.skeleton.getState().data.skeletonData.findAnimation("attack").duration},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleAttack.ts",["cc","./RoleAnimSpine.ts","./RoleGetDamage.ts"],(function(t){var e,n,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.RoleAnimSpine},function(t){a=t.RoleGetDamage}],execute:function(){e._RF.push({},"ff970H9BbZMm4Gs8CEJ98Vr","RoleAttack",void 0);t("RoleAttack",function(){function t(){}return t.exe=function(t,e){0!=this.canAttack(t)&&(t.attack.cd.setCurrentAsMax(),n.playAttack(t.view.skeleton),this.targetGetDamage(t))},t.canAttack=function(t){return!(t.attack.lockCount>0)&&!(t.attack.cd.current>0)},t.getBulletEmitPos=function(t,e){var n=e.clone().multiply3f(100,100,1);return n.y+=100,n.add(t.view.root.position),n},t.targetGetDamage=function(t){var e=t.ai.target;null!=e&&a.exe(e,t.attack.damage)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleAttributeUpdate.ts",["cc","./CfgRole.ts","./Player.ts","./Affix.ts","./BuffIncreaseCalc.ts"],(function(e){var t,a,n,c,f,r;return{setters:[function(e){t=e.cclegacy},function(e){a=e.CfgRole},function(e){n=e.Player},function(e){c=e.AffixType},function(e){f=e.DataIncrease,r=e.BuffIncreaseCalc}],execute:function(){t._RF.push({},"ef7d02CNQxAe5tWZAhouKu5","RoleAttributeUpdate",void 0),e("RoleAttributeUpdate",function(){function e(){}return e.exe=function(e){this.buff(e)},e.buff=function(e){this.setRoleAsOrig(e),this.dataIncr.reset(),r.exeBuffs(n.ins.buff.list,this.dataIncr),r.exeBuffs(e.buff.list,this.dataIncr),this.handleIncr(e,this.dataIncr)},e.setRoleAsOrig=function(e){var t=a.data.get(e.id);e.move.speed=t.moveSpeed,e.attack.cd.max=t.attackCd},e.handleIncr=function(e,t){0!=t.moveSpeedIncreasePercent&&(e.move.speed+=e.move.speed*t.moveSpeedIncreasePercent);var a=t.attackSpeedIncreasePercent;if(0!=a){var n=e.attack,c=n.cd.max;a>0?n.cd.max=Math.round(c/(1+a)):n.cd.max+=Math.round(c*Math.abs(a))}},e.buffList=function(e,t){for(var n=a.data.get(e.id).moveSpeed,f=0;f<t.length;++f){var r=t[f];switch(r.affix.type){case c.MoveSpeedDecreasePercent:e.move.speed+=n*r.affix.argN}}},e}()).dataIncr=new f,t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleDie.ts",["cc","./EffectFactory.ts","./PlayerGradeOp.ts","./BulletMgr.ts","./WorldNode.ts","./RoleMgr.ts"],(function(t){var e,o,r,n,i,l;return{setters:[function(t){e=t.cclegacy},function(t){o=t.EffectFactory},function(t){r=t.PlayerGradeOp},function(t){n=t.BulletMgr},function(t){i=t.WorldNode},function(t){l=t.RoleMgr}],execute:function(){e._RF.push({},"88936Y+5RhGJb5+hzaODHaw","RoleDie",void 0);t("RoleDie",function(){function t(){}return t.exe=function(t){var e=o.create("RoleDie");e.setParent(i.ins.layer2,!1),e.worldPosition=t.view.root.worldPosition,l.ins.remove(t),t.view.root.destroy(),r.addExp(t.exp.val),this.bullet(t)},t.bullet=function(t){for(var e=n.ins.data.length-1;e>=0;--e){var o=n.ins.data[e];o.target.targetRole==t&&(o.target.targetRole=null)}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/RoleFactory.ts",["cc","./PfMgrRole.ts","./Role.ts","./Life.ts","./CfgRole.ts","./SkillCom.ts","./MoveCom.ts","./BuffCom.ts","./AttackCom.ts"],(function(e){var t,n,o,i,c,l,a,f,u,r,s,v,m,w;return{setters:[function(e){t=e.cclegacy,n=e.sp,o=e.instantiate,i=e.Collider2D},function(e){c=e.PfMgrRole},function(e){l=e.Exp,a=e.RoleView,f=e.Role},function(e){u=e.Life},function(e){r=e.CfgRole},function(e){s=e.SkillCom},function(e){v=e.MoveCom},function(e){m=e.BuffCom},function(e){w=e.AttackCom}],execute:function(){t._RF.push({},"e43e17AuTNH14u9ToeCgHob","RoleFactory",void 0);e("RoleFactory",function(){function e(){}return e.create=function(e){var t=new f;return t.id=e,C.exe(t),d.exe(t),t},e}());var C=e("RoleCfgSet",function(){function e(){}return e.exe=function(e){var t=r.data.get(e.id);e.cfg=t,this.attack(e,t),this.life(e,t),this.move(e,t),this.skill(e,t),this.exp(e,t),e.buff=new m},e.attack=function(e,t){e.attack=new w,e.attack.damage=t.attackDamage,e.attack.cd.current=0,e.attack.cd.max=t.attackCd},e.exp=function(e,t){e.exp=new l,e.exp.val=t.exp},e.life=function(e,t){e.life=new u,e.life.hp.setCurrentAndMax(t.lifeHpMax)},e.move=function(e,t){e.move=new v,e.move.speed=t.moveSpeed},e.skill=function(e,t){e.skill=new s},e}()),d=e("RoleViewSet",function(){function e(){}return e.exe=function(e){var t=this.createView(e.cfg);e.view=new a,e.view.root=t,e.view.main=t.getChildByPath("Main"),e.view.skeleton=e.view.main.getComponent(n.Skeleton),this.collsion(e)},e.createView=function(e){var t=null;if(null==e.viewId){var n=e.id.split("#");t=n[0]+"/"+n[1]}else t=e.viewId;var i=c.pf.getChildByPath(t);return o(i)},e.collsion=function(e){var t=e.view.root.getComponentInChildren(i);null!=t&&(e.view.collider=t,t.Role=e)},e.onBeginContact=function(e,t,n){console.log("碰撞")},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleGetDamage.ts",["cc","./PfMgrNumber.ts","./WorldNode.ts","./PlayerRole.ts","./Buff_HpRegenIncreasePercentBelowPercentPerWave.ts","./Stats.ts"],(function(e){var n,t,o,i,r,l,a,s,c,u,f,w,d;return{setters:[function(e){n=e.cclegacy,t=e.Tween,o=e.Color,i=e.tween,r=e.randomRangeInt,l=e.instantiate,a=e.Label,s=e.Vec3},function(e){c=e.PfMgrNumber},function(e){u=e.WorldNode},function(e){f=e.PlayerRole},function(e){w=e.Buff_HpRegenIncreasePercentBelowPercentPerWave},function(e){d=e.Stats}],execute:function(){n._RF.push({},"bdf3fQJPjhF2IW14CE8Qzl4","RoleGetDamage",void 0);e("RoleGetDamage",function(){function e(){}return e.exe=function(e,n,t,o){var i;void 0===t&&(t=!0),void 0===o&&(o=null),e.life.hp.current-=n,null==(i=e.view.hpBar)||i.refresh(),t&&g.normal(e.view.root.worldPosition.clone().add3f(0,50,0),n),this.view(e),v.exe(e),null!=o&&d.ins.damage(o.id,n)},e.view=function(e){null!=e.view.skeleton&&(t.stopAllByTarget(e.view.skeleton),e.view.skeleton.color=o.RED,i(e.view.skeleton).delay(.1).call((function(){e.view.skeleton.color=o.WHITE})).start())},e}());var v=e("RoleGetDamageLocal",function(){function e(){}return e.exe=function(e){e==f.ins.main&&w.tryExe(e)},e}()),g=e("DamageValueShow",function(){function e(){}return e.crit=function(e,n){this.show(c.ins.damageCrit,e,n)},e.normal=function(e,n){this.show(c.ins.damage,e,n)},e.rndPos=function(e){e.x+=r(-50,50),e.y+=r(-20,20)},e.show=function(e,n,t){var o=l(e),r=o.getComponent(a);null==r&&(r=o.getComponentInChildren(a)),r.string="-"+t.toString();var c=u.ins.layer2;o.setParent(c,!1),o.worldPosition=n;var f=new s(0,200);this.rndPos(f),o.scale=new s(.5,.5,.5),i(o).sequence(i(o).parallel(i(o).by(.3,{position:f}),i(o).to(.3,{scale:new s(1,1,1)})),i(o).delay(.2),i(o).parallel(i(o).by(.3,{position:new s(0,50)}),i(o).to(.3,{scale:new s(.5,.5,.5)})),i(o).call((function(){o.destroy()}))).start()},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleMgr.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"1c372+JzKtOlKTO1UEkKJRY","RoleMgr",void 0),e("RoleMgr",function(){function e(){this.local=null,this.allEnemies=new Array}var n=e.prototype;return n.add=function(e){-1==this.allEnemies.indexOf(e)&&this.allEnemies.push(e)},n.remove=function(e){var n=this.allEnemies.indexOf(e);-1!=n&&this.allEnemies.splice(n,1)},e}()).ins=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleMove.ts",["cc","./RoleAnimSpine.ts","./RoleMoveView.ts","./MoveRole.ts"],(function(e){var n,o,t,i;return{setters:[function(e){n=e.cclegacy},function(e){o=e.RoleAnimSpine},function(e){t=e.RoleMoveView},function(e){i=e.MoveRole}],execute:function(){n._RF.push({},"ee392ivE5dIZ4GDT26R2uZO","RoleMove",void 0);e("RoleMove",function(){function e(){}return e.exe=function(e,n){return 0!=this.canMove(e)&&(t.exe(e,n),i.exe(e,n),!0)},e.stop=function(e){0!=this.canMove(e)&&o.playIdle(e.view.skeleton)},e.canMove=function(e){if(1==e.life.isDead)return!1;var n=e.move;return null!=n&&0!=n.enabled&&!(n.lockCount>0)},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleMoveSys.ts",["cc","./FrameSecConvert.ts"],(function(e){var t,o,i;return{setters:[function(e){t=e.cclegacy,o=e.isValid},function(e){i=e.FrameSecConvert}],execute:function(){var n;t._RF.push({},"bd38aE1+DhFjLGb/hlL2XJe","RoleMoveSys",void 0);var r=e("RoleMoveSys",function(){function e(){this.items=new Array}var t=e.prototype;return t.add=function(e,t,o,n,r){void 0===r&&(r=null);var l=new s;this.items.push(l),l.role=e,l.frame=i.toFrame(t),l.offset=n.clone().multiplyScalar(o/l.frame),l.onComplete=r},t.clear=function(){this.items.splice(0,this.items.length)},t.update=function(){for(var e=this.items.length-1;e>=0;--e){var t=this.items[e];if(t.frame--,t.frame<0||0==o(t.role.view.root))null==t.onComplete||t.onComplete(),this.items.splice(e,1);else{var i=t.role.view.root.position.clone();i.add(t.offset),t.role.view.root.position=i}}},e}());n=r,r.ins=new n;var s=e("RoleMoveSysItem",(function(){this.role=void 0,this.frame=0,this.offset=void 0,this.onComplete=null}));t._RF.pop()}}}));

System.register("chunks:///_virtual/RoleMoveView.ts",["cc","./RoleAnimSpine.ts"],(function(e){var n,i;return{setters:[function(e){n=e.cclegacy},function(e){i=e.RoleAnimSpine}],execute:function(){n._RF.push({},"3778djaNMpJwp6uj4HPC0fD","RoleMoveView",void 0);e("RoleMoveView",function(){function e(){}return e.exe=function(e,n){this.orien(e,n),i.playMove(e.view.skeleton)},e.orien=function(e,n){if(0!=n.x){var i=e.view.main,t=i.getScale(),o=n.x<0?-1:1;t.x=Math.abs(t.x)*o,i.setScale(t)}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleSys.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameLose.ts","./PlayerRole.ts","./Affix.ts","./BuffOp.ts","./SkillBase.ts","./SkillCloseDamage.ts","./Stats.ts","./RoleMgr.ts","./RoleDie.ts","./RoleGetDamage.ts"],(function(e){var t,n,r,i,a,o,s,l,u,c,f,g;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){r=e.GameLose},function(e){i=e.PlayerRole},function(e){a=e.AffixType},function(e){o=e.BuffOp},function(e){s=e.SkillType},function(e){l=e.SkillCloseDamageOp},function(e){u=e.Stats},function(e){c=e.RoleMgr},function(e){f=e.RoleDie},function(e){g=e.RoleGetDamage}],execute:function(){n._RF.push({},"c7359xYfp1CyLikQztnhM4E","RoleSys",void 0);e("RoleSys",function(){function e(){}return e.update=function(){for(var e=c.ins.allEnemies,t=e.length-1;t>=0;--t){var n=e[t];if(n.life.hp.current<=0)f.exe(n);else{var a=n.attack.cd;a.current>0&&a.current--,this.skill(n),p.update(n)}}i.ins.main.life.hp.current<=0&&r.exe()},e.skill=function(e){var n=e.skill;if(null!=n)for(var r,i=t(n.list);!(r=i()).done;){var a=r.value;if(a.cd.current>0&&a.cd.current--,0==a.cd.current)switch(a.type){case s.CloseDamage:var o=a;l.exe(o)}}},e}());var p=e("RoleBuffSys",function(){function e(){}return e.update=function(e){for(var t=e.buff.list,n=t.length-1;n>=0;--n){var r=t[n];r.duration.current--,r.duration.current<0?o.roleRemove(e,n):r.interval.max>=0&&(r.interval.current--,-1==r.interval.current&&(r.interval.setCurrentAsMax(),this.trigger(e,r)))}},e.trigger=function(e,t){switch(t.affix.type){case a.Burn:g.exe(e,t.affix.argN),u.ins.damage(t.sender.id,t.affix.argN);break;case a.Poisoning:case a.PoisoningPercent:g.exe(e,t.affix.argN),u.ins.damage(t.sender.id,t.affix.argN)}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenAdaptResolutionPolicy.ts",["cc"],(function(e){var t,i,o,n;return{setters:[function(e){t=e.cclegacy,i=e.screen,o=e.view,n=e.ResolutionPolicy}],execute:function(){t._RF.push({},"d6052MGPp5DF7jmCvRD+VSV","ScreenAdaptResolutionPolicy",void 0);e("ScreenAdaptResolutionPolicy",function(){function e(){}return e.exeRatio=function(e){void 0===e&&(e=.5625);var t=i.resolution;e>=t.width/t.height?o.setResolutionPolicy(n.FIXED_WIDTH):o.setResolutionPolicy(n.FIXED_HEIGHT)},e.exeDesignResolution=function(){var e=o.getDesignResolutionSize();this.exeRatio(e.width/e.height)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SeqScaleShow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,c,o,r;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,c=e.tween,o=e.Vec3,r=e.Tween}],execute:function(){n._RF.push({},"4f6cdx0/I5OvJpECd3GJbDU","SeqScaleShow",void 0);e("SeqScaleShow",function(){function e(){}return e.exe=function(e,t){var n=this;void 0===t&&(t=.1),this.stop(e);for(var r=c(e[0]),a=function(){var c=e[l];c.scale=o.ZERO,r.call((function(){n.scale(c)})),r.delay(t)},l=0;l<e.length;++l)a();return r.start(),r},e.scale=function(e){e.active=!0,e.scale=new o(.2,.2,.2),c(e).sequence(c(e).to(.2,{scale:new o(1.2,1.2,1.2)}),c(e).to(.1,{scale:new o(1,1,1)})).start()},e.stop=function(e){for(var n,c=t(e);!(n=c()).done;){var o=n.value;r.stopAllByTarget(o)}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Shake.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,u,r;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,u=e.tween,r=e.Vec3}],execute:function(){t._RF.push({},"dd401Bq5UlPaJhJttDOC+7v","Shake",void 0);e("Shake",function(){function e(){}return e.exePreset=function(e,t,u){void 0===u&&(u=1);for(var r,s=this.genData(t),o=n(s);!(r=o()).done;){var a=r.value[0];a.multiply3f(u,u,u),a.add(e.position)}this.exe(e,s)},e.exe=function(e,n){for(var t=u(e),r=0;r<n.length;++r){var s=n[r],o=s[0],a=s[1],h=u(e).to(a,{position:o});t.then(h)}t.start()},e.genData=function(e){var n=null;return"1"==e?((n=new Array).push([new r(10,-10),.1]),n.push([new r(0,0),.05])):"2"==e?((n=new Array).push([new r(6,10),.1]),n.push([new r(10,-7),.1]),n.push([new r(-5,-4),.05]),n.push([new r(5,5),.05]),n.push([new r(0,0),.05])):"3"==e&&((n=new Array).push([new r(10,1),.05]),n.push([new r(-9,-7),.1]),n.push([new r(13,5),.05]),n.push([new r(2,-7),.05]),n.push([new r(9,-1),.05]),n.push([new r(5,1),.05]),n.push([new r(0,0),.05])),n},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Shuffle.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"a1d0fWZhoRFvbY8qRtxJMBo","Shuffle",void 0);n("Shuffle",function(){function n(){}return n.shuffleArray=function(n){for(var t=0;t<n.length;++t){var e=this.rangeInt(0,n.length-1),r=n[t];n[t]=n[e],n[e]=r}},n.rangeInt=function(n,t){return Math.floor(Math.random()*(t+1-n))+n},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBase.ts",["cc","./CurrentMax.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.CurrentMax}],execute:function(){t._RF.push({},"49dc8ImZt9D8rKAOmFhbey5","SkillBase",void 0);e("SkillBase",(function(){this.type=i.None,this.cd=new n}));var i=e("SkillType",function(e){return e[e.None=0]="None",e[e.CloseDamage=1]="CloseDamage",e[e.Fist=2]="Fist",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillCloseDamage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoleGetDamage.ts","./SkillBase.ts"],(function(e){var t,n,l,a,r,i;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy},function(e){a=e.RoleGetDamage},function(e){r=e.SkillType,i=e.SkillBase}],execute:function(){l._RF.push({},"d41e26HJDZEKK3rn/Z/toAd","SkillCloseDamage",void 0);e("SkillCloseDamage",function(e){function n(){var t;return(t=e.call(this)||this).damageVal=1,t.targets=new Array,t.type=r.CloseDamage,t.cd.setCurrentAndMax(60),t}return t(n,e),n}(i)),e("SkillCloseDamageOp",function(){function e(){}return e.tryAdd=function(e,t){var n,l=null==(n=e.skill)?void 0:n.list.find((function(e){return e.type==r.CloseDamage}));if(null!=l){var a=l;-1==a.targets.indexOf(t)&&a.targets.push(t)}},e.tryRemove=function(e,t){var n,l=null==(n=e.skill)?void 0:n.list.find((function(e){return e.type==r.CloseDamage}));if(null!=l){var a=l,i=a.targets.indexOf(t);-1!=i&&a.targets.splice(i,1)}},e.exe=function(e){if(0!=e.targets.length){for(var t,l=n(e.targets);!(t=l()).done;){var r=t.value;console.log("造成伤害"),a.exe(r,e.damageVal)}e.cd.setCurrentAsMax()}},e}());l._RF.pop()}}}));

System.register("chunks:///_virtual/SkillCom.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"0cb140LPLlKR4cir2FWsqFB","SkillCom",void 0);t("SkillCom",(function(){this.list=new Array}));c._RF.pop()}}}));

System.register("chunks:///_virtual/SkillType.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d3a27Xq4IRI9qV2/i35FTKi","SkillType",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Sound.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Sound2.ts"],(function(n){var o,t,u;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy},function(n){u=n.Sound}],execute:function(){var e;t._RF.push({},"5e998Xfc/NHorqEqpNbs9Ln","Sound",void 0);var i=n("Sound",function(n){function t(){for(var o,t=arguments.length,u=new Array(t),e=0;e<t;e++)u[e]=arguments[e];return(o=n.call.apply(n,[this].concat(u))||this).enabled=!0,o}o(t,n);var u=t.prototype;return u.btnClick=function(){this.play("Common/Audio/Sound/btnClick")},u.getReward=function(){this.play("Common/Audio/Sound/获得奖励")},t}(u));e=i,i.ins=new e,t._RF.pop()}}}));

System.register("chunks:///_virtual/Sound2.ts",["cc"],(function(o){var n,t,u,e,i;return{setters:[function(o){n=o.cclegacy,t=o.resources,u=o.AudioClip,e=o.Node,i=o.AudioSource}],execute:function(){n._RF.push({},"f1363+aoNhGyY9GBQpL3Lf3","Sound",void 0);o("Sound",function(){function o(){this.enabled=!0,this.audioSrc=null;var o=new e;this.audioSrc=o.addComponent(i)}return o.prototype.play=function(o,n){var e=this;void 0===n&&(n=1),0!=this.enabled&&t.load(o,u,(function(o,t){e.audioSrc.playOneShot(t,n)}))},o}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SoundBtnClickSetter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Sound.ts"],(function(n){var e,t,o,i,r;return{setters:[function(n){e=n.createForOfIteratorHelperLoose},function(n){t=n.cclegacy,o=n.Button,i=n.Input},function(n){r=n.Sound}],execute:function(){t._RF.push({},"ca6c4Ihy39DUKYX1doIhUYD","SoundBtnClickSetter",void 0);n("SoundBtnClickSetter",function(){function n(){}return n.exe=function(n){for(var t,r=n.getComponentsInChildren(o),u=e(r);!(t=u()).done;){var c=t.value;c.node.off(i.EventType.TOUCH_END,this.play,this),c.node.on(i.EventType.TOUCH_END,this.play,this)}},n.remove=function(n){for(var t,r=n.getComponentsInChildren(o),u=e(r);!(t=u()).done;){t.value.node.off(i.EventType.TOUCH_END,this.play,this)}},n.play=function(){r.ins.btnClick()},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/StaminaRecovery.ts",["cc","./Account.ts","./AccountPersist.ts"],(function(t){var e,n,a,i;return{setters:[function(t){e=t.cclegacy,n=t.sys},function(t){a=t.Account},function(t){i=t.AccountPersist}],execute:function(){var r;e._RF.push({},"510a1Tp6fFKeJ7rSETIna55","StaminaRecovery",void 0);var c=t("StaminaRecovery",function(){function t(){this.cycle=1200,this.time=-1,this.state=0,this.countdown=0}return t.prototype.exe=function(){var t=a.ins.stamina;switch(this.state){case 0:if(t.current>=t.max)return;this.time=Math.floor(Date.now()/1e3),this.state=1,s.save();break;case 1:var e=Math.floor(Date.now()/1e3),n=e-this.time;if(this.countdown=this.cycle-n,this.countdown<0&&(this.countdown=0),n<this.cycle)return;var r=Math.floor(n/this.cycle);t.current+=r,t.current>t.max&&(t.current=t.max),i.save(),t.current>=t.max?this.state=0:this.time=e,s.save()}},t}());r=c,c.ins=new r;var s=t("StaminaRecoveryPersist",function(){function t(){}return t.load=function(){var t=c.ins,e=n.localStorage.getItem("StaminaRecovery");if(null!=e&&""!=e){var a=JSON.parse(e),i=a.State;t.state=Number(i),i=a.Time,t.time=Number(i)}},t.save=function(){var t=c.ins,e={};e.State=t.state,e.Time=t.time;var a=JSON.stringify(e);n.localStorage.setItem("StaminaRecovery",a)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Stats.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var a,e;return{setters:[function(t){a=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"2d451BPuaBKT4dSQOBTG2nZ","Stats",void 0),t("Stats",function(){function t(){this.data=new Map,this.list=new Array}var e=t.prototype;return e.damage=function(a,e){var i=a.split("_");i.length>=2&&(a=i[0]+"_1");var n=this.data.get(a);null==n&&((n=new s).id=a,t.ins.data.set(a,n)),n.damage+=e},e.sort=function(){this.list.splice(0,this.list.length);for(var t,e=a(this.data);!(t=e()).done;){var s=t.value[1];this.list.push(s)}return this.list.sort((function(t,a){return t.damage<a.damage?1:t.damage>a.damage?-1:0})),this.list},t}()).ins=null;var s=t("StatsItem",(function(){this.id=void 0,this.damage=0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"88d50fH2nRFkpyA4+MD4ssn","StringUtil",void 0);n("StringUtil",function(){function n(){}return n.fillZero=function(n,t){return(Array(t).join("0")+n).slice(-t)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Test.ts",["cc","./UiBag.ts","./UiTray.ts","./MoneyFly.ts","./UiMain2.ts","./UiMoney001.ts","./BuffIncreaseCalc.ts","./BuffString.ts","./ItemDraw.ts","./UiBubble.ts"],(function(t){var n,e,i,o,c,r,s,a,u,f,d,l,y,B;return{setters:[function(t){n=t.cclegacy,e=t.Vec3,i=t.director,o=t.UITransform,c=t.find},function(t){r=t.UiBag},function(t){s=t.UiTray},function(t){a=t.MoneyFly},function(t){u=t.UiMain},function(t){f=t.UiMoney001},function(t){d=t.DataIncrease},function(t){l=t.BuffString},function(t){y=t.ItemDraw},function(t){B=t.UiBubble}],execute:function(){n._RF.push({},"96954QcX8dI3IIpDKRzDD3O","Test",void 0);t("Test",function(){function t(){}return t.exe=function(){},t.test4=function(){var t=B.create(),n=u.ins.root;t.root.setParent(n,!1),t.root.position=e.ZERO,t.setString("test测试测测\nsfsdf\n测试")},t.test3=function(){l.getDescription("005-AttackBulletBounceBetweenEnemiesIncrease1");var t=new d;t.attackCritMultipleIncreasePercent=10,t.reset(),t.hpMaxIncrease=20,t.reset();y.exe("MainLevel_001")},t.test2=function(){var t=i.tick;i.tick=function(n){t.call(i,3*n)}},t.test1=function(){var t=f.ins.root.getComponent(o).convertToWorldSpaceAR(e.ZERO);u.ins.root.getComponent(o).convertToNodeSpaceAR(t,t),a.money001Fly(u.ins.root,e.ZERO,t)},t.testBag=function(){r.create(c("Canvas")),s.ins.addArticleById("001"),s.ins.addArticleById("001"),s.ins.addArticleById("001"),s.ins.addArticleById("BagExpand_002")},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Test1.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var e;n._RF.push({},"432d5nQX5JMCLWSPAyQYRKZ","Test1",void 0);var i=t("Test1",function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t},t}());e=i,i.ins=new e,n._RF.pop()}}}));

System.register("chunks:///_virtual/Test2.ts",["cc"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy,n=t.assetManager}],execute:function(){e._RF.push({},"a0689ePAapH3IhaIM1lSkZ3","Test",void 0);t("Test",function(){function t(){}return t.exe=function(){},t.exe1=function(){var t="http://192.168.22.225/Cfg/Article.json";n.loadRemote(t,(function(t,e){console.log(e.json)})),fetch(t).then((function(t){return t.text()})).then((function(t){console.log(t)}))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Test22.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var e;n._RF.push({},"337953xZoZJzrFI2eZIsEqI","Test2",void 0);var o=t("Test2",function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t},t}());e=o,o.ins=new e,n._RF.pop()}}}));

System.register("chunks:///_virtual/TextureOriginalRatioSprite.ts",["cc"],(function(t){var e,i;return{setters:[function(t){e=t.cclegacy,i=t.UITransform}],execute:function(){e._RF.push({},"76f8fj3cnBJxrtApOgqOhXq","TextureOriginalRatioSprite",void 0);t("TextureOriginalRatioSprite",function(){function t(){}return t.exe=function(t,e){void 0===e&&(e=null);var n=t.getComponent(i);e=null==e?n.contentSize.clone():e.clone();var r=t.spriteFrame.originalSize,o=r.width/r.height;r.width>r.height?e.height=e.width/o:r.height>r.width&&(e.width=e.height*o),n.setContentSize(e)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TileShapeDataParser.ts",["cc"],(function(e){var r,t;return{setters:[function(e){r=e.cclegacy,t=e.Vec2}],execute:function(){r._RF.push({},"0f1d6jdS/RAK7VxeqXTBo8J","TileShapeDataParser",void 0);e("TileShapeDataParser",function(){function e(){}return e.exe=function(e){for(var r=new Array,n=e.split("\n"),a=n.length-1;a>=0;--a)for(var c=n[a],i=0;i<c.length;++i)if("0"!=c.charAt(i)){var u=new t(i,n.length-a-1);r.push(u)}return r},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Tower.ts",["cc","./CurrentMax.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.CurrentMax}],execute:function(){n._RF.push({},"82112AO3/dB6Y4NcrJMGSMO","Tower",void 0);t("Tower",(function(){this.article=null,this.attack=null,this.view=new i,this.buff=null,this.aura=null,this.hpMaxIncrease=null,this.hpRegen=null}));var i=t("TowerView",(function(){this.root=void 0}));t("HpMaxIncrease",(function(){this.val=0})),t("HpRegen",(function(){this.cd=new e,this.percent=0}));n._RF.pop()}}}));

System.register("chunks:///_virtual/TowerAllUpdate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./PlayerRole.ts","./TowerMgr.ts","./TowerAttributeUpdate.ts","./TowerAuraEmit.ts","./BuffIncreaseCalc.ts","./TowerFactory.ts","./BuffFactory.ts","./BuffResetMergeGrade.ts"],(function(e){var r,a,t,n,f,i,u,s,c,o,l;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy},function(e){t=e.Player},function(e){n=e.PlayerRole},function(e){f=e.TowerMgr},function(e){i=e.TowerAttributeUpdate},function(e){u=e.TowerAuraHandler},function(e){s=e.DataIncrease},function(e){c=e.TowerCfgSet},function(e){o=e.BuffFactory},function(e){l=e.BuffResetMergeGrade}],execute:function(){a._RF.push({},"57366MOfzdCwqUv5hNb7yid","TowerAllUpdate",void 0);e("TowerAllUpdate",function(){function e(){}return e.updateAll=function(){this.resetBuff(),this.playerBuff(),u.aura();for(var e=new s,r=0;r<f.ins.data.length;++r){var a=f.ins.data[r];i.exe(a);var t=i.dataIncrease;e.hpMaxIncrease+=t.hpMaxIncrease+t.hpMaxIncrease*t.hpMaxIncreaseIncreasePercent}this.role(e)},e.playerBuff=function(){for(var e=0;e<f.ins.data.length;++e)for(var a,n=f.ins.data[e],i=r(t.ins.buff.list);!(a=i()).done;){var u=a.value,s=u.cfg;if(0!=this.isSpecified(s.specified,n.article.cfg.id)){var c=o.create(s.id);l.exe(u,n.article.cfg.mergeGrade),0==s.isAura?n.buff.list.push(c):n.aura.list.push(c)}}},e.resetBuff=function(){for(var e=function(e){for(var r=e.length-1;r>=0;--r)1!=e[r].isNative&&e.splice(r,1)},r=0;r<f.ins.data.length;++r){var a=f.ins.data[r];e(a.buff.list),e(a.aura.list),c.buff(a,a.article.cfg.tower),c.buffGrade(a)}},e.role=function(e){var r=n.ins.main,a=r.life.hp,t=a.current/a.max;e.hpMaxIncrease>0?(a.max=r.cfg.lifeHpMax+Math.round(e.hpMaxIncrease),a.current=Math.round(a.max*t),r.view.hpBar.refresh()):(a.max=r.cfg.lifeHpMax,a.current=Math.round(a.max*t),r.view.hpBar.refresh())},e.isSpecified=function(e,r){return null==e||0==e.size||1==e.has(r)},e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/TowerAttack.ts",["cc","./RoleMgr.ts","./TowerBulletEmit.ts"],(function(t){var e,n,c,r,u;return{setters:[function(t){e=t.cclegacy,n=t.tween,c=t.Vec3},function(t){r=t.RoleMgr},function(t){u=t.TowerBulletEmit}],execute:function(){e._RF.push({},"927f9CgejJGnpOll1AxvTSR","TowerAttack",void 0);t("TowerAttack",function(){function t(){}return t.exe=function(t){this.attackAnim(t),t.attack.count++,u.exe(t)},t.canAttack=function(t){if(0==r.ins.allEnemies.length)return!1;var e=t.attack;return null!=e&&null!=e.bulletId},t.attackAnim=function(t){var e=t.article.view.root;n(e).sequence(n(e).to(.2,{scale:new c(1.2,1.2,1.2)}),n(e).to(.2,{scale:new c(1,1,1)})).start()},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerAttackTargetSelect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BulletMoveCalc.ts","./RoleMgr.ts","./AttackCom.ts"],(function(e){var t,r,n,a,o,c;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,n=e.randomRangeInt},function(e){a=e.BulletMoveCalc},function(e){o=e.RoleMgr},function(e){c=e.AttackTargetSelectionType}],execute:function(){r._RF.push({},"d461eur16FA2K4BwsgZrQYu","TowerAttackTargetSelect",void 0);e("TowerAttackTargetSelect",function(){function e(){}return e.exe=function(e,t){switch(e.attack.targeSelType){case c.First:t.target.targetRole=this.first();break;case c.Rnd:t.target.targetRole=this.rnd()}a.target(t)},e.first=function(){for(var e,r=null,n=-Number.MIN_VALUE,a=t(o.ins.allEnemies);!(e=a()).done;){var c=e.value,l=c.ai.pathMoved.lenMoved;l>n&&(n=l,r=c)}return r},e.rnd=function(){var e=o.ins.allEnemies;return e[n(0,e.length)]},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/TowerAttributeUpdate.ts",["cc","./BagArticleGradeHelper.ts","./Affix.ts","./BuffIncreaseCalc.ts"],(function(e){var t,a,r,c,i;return{setters:[function(e){t=e.cclegacy},function(e){a=e.BagArticleGradeHelper},function(e){r=e.AffixType},function(e){c=e.DataIncrease,i=e.BuffIncreaseCalc}],execute:function(){t._RF.push({},"015568f6LBG9aNeT8+HThj1","TowerAttributeUpdate",void 0),e("TowerAttributeUpdate",function(){function e(){}return e.exe=function(e){this.setAsOrig(e),this.grade(e),this.buff(e),this.buff2(e)},e.setAsOrig=function(e){var t=e.article.cfg.tower,a=e.attack;a.damage=t.atkDamage,a.cd.max=t.atkCd,a.crit.probability=t.atkCritProbability,a.crit.multiple=t.atkCritMultiple,a.lifeStealing.percent=0},e.grade=function(e){var t=e.article.cfg,r=a.getCfgCurrent(e.article.cfg.id);null!=r&&(e.attack.damage=r.attackDamage*t.mergeGrade)},e.buff=function(e){this.dataIncrease.reset(),i.exeBuffs(e.buff.list,this.dataIncrease);var t=this.dataIncrease;if(0!=t.attackDamageIncreasePercent&&(e.attack.damage+=Math.round(e.attack.damage*t.attackDamageIncreasePercent)),t.attackSpeedIncreasePercent>0){var a=e.attack.cd.max;e.attack.cd.max=Math.round(a/(1+t.attackSpeedIncreasePercent))}if(e.attack.crit.probability+=t.attackCritProbabilityIncreasePercent,e.attack.crit.multiple+=t.attackCritMultipleIncreasePercent,e.attack.lifeStealing.percent+=t.attackLifeStealingPercent,t.hpRegenIncreasePercent>0){var c=e.buff.list.find((function(e){return e.affix.type==r.HpRegenIncreasePercent&&1==e.isNative}));c.affix.argN+=c.affix.argN*t.hpRegenIncreasePercent}if(t.hpRegenSpeedIncreasePercent>0){var n=e.buff.list.find((function(e){return e.affix.type==r.HpRegenIncreasePercent&&1==e.isNative})),f=n.interval.max;n.interval.max=Math.round(f/(1+t.hpRegenSpeedIncreasePercent)),n.interval.current=n.interval.max}},e.buff2=function(e){for(var t=e.buff.list,a=0;a<t.length;++a){var c=t[a];switch(c.affix.type){case r.AttackCritPerAttackNTimesIncrease:var i=t.find((function(e){return e.affix.type==r.AttackCritPerAttackNTimes}));null!=i&&(i.affix.argN+=c.affix.argN,i.affix.argN<1&&(i.affix.argN=1))}}},e}()).dataIncrease=new c,t._RF.pop()}}}));

System.register("chunks:///_virtual/TowerAuraEmit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Affix.ts","./BuffFactory.ts","./TowerMgr.ts","./TowerAuraScopeExpand.ts"],(function(e){var a,r,t,n,c,f;return{setters:[function(e){a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy},function(e){t=e.AffixType},function(e){n=e.BuffFactory},function(e){c=e.TowerMgr},function(e){f=e.TowerAuraScopeExpand}],execute:function(){r._RF.push({},"8d652hzzjhJOoEfT846phet","TowerAuraEmit",void 0);e("TowerAuraHandler",function(){function e(){}return e.aura=function(){for(var e=0;e<c.ins.data.length;++e){var a=c.ins.data[e];this.auraEmit(a)}},e.auraEmit=function(e){for(var r,i=e.buff.list.find((function(e){return e.affix.type==t.OverlapEnable})),u=a(e.aura.list);!(r=u()).done;){var o=r.value,s=n.create(o.cfg.id);switch(s.isNative=!1,o.affix.type){case t.AuraAttackDamageIncreasePercent:case t.AuraAttackSpeedIncreasePercent:case t.AuraAttackCritProbabilityIncrease:var l=f.exe(o.cfg.auraScopeType,e.article.cells);this.buffAdd(l.towers,s,e,i);break;case t.AuraAttackDamageIncreaseAllPercent:var d=c.ins.data;this.buffAdd(d,s,e)}}},e.buffAdd=function(e,r,t,n){void 0===n&&(n=null);for(var c,f=a(e);!(c=f()).done;){var i=c.value;if(0==r.cfg.auraOverlay)if(null!=n);else if(null!=i.buff.list.find((function(e){return e.cfg.id==r.cfg.id})))continue;i.buff.list.push(r);var u=i.article.cfg.id+" 增加Buff 来源："+t.article.cfg.id;console.log(u)}},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/TowerAuraScopeExpand.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiBagGrid.ts","./TowerMgr.ts","./CellExpand.ts","./AuraScopeType.ts","./GridTraverse.ts"],(function(e){var r,n,t,a,i,c,o,l;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,t=e.Vec2},function(e){a=e.UiBagGrid},function(e){i=e.TowerMgr},function(e){c=e.CellExpand},function(e){o=e.AuraScopeType},function(e){l=e.GridTraverse}],execute:function(){n._RF.push({},"1a3055UfolF3Y5yojr8JF30","TowerAuraScopeExpand",void 0);var u=e("TowerAuraScopeExpandRet",(function(){this.cells=new Set,this.article=new Set,this.towers=new Array}));e("TowerAuraScopeExpand",function(){function e(){}return e.exe=function(e,r){switch(e){case o.Dir8:return this.dir8(r);case o.HV:return this.hv(r);case o.All:return this.all()}},e.all=function(){var e,r=new u;return(e=r.towers).push.apply(e,i.ins.data),l.exe((function(e){0!=e.unlocked&&(r.cells.add(e),null!=e.article&&r.article.add(e.article))})),r},e.dir8=function(e){for(var n=new u,t=0;t<e.length;++t)for(var a,o=e[t],l=c.exe8(o.coord),s=function(){var e=a.value;n.cells.add(e);var r=e.article;if(null!=r&&0==n.article.has(r)){n.article.add(r);var t=i.ins.data.find((function(e){return e.article==r}));if(null==t)return 1;n.towers.push(t)}},d=r(l);!(a=d()).done;)s();return n},e.hv=function(e){for(var r=new u,n=a.ins.gridSize,c=function(e){var n=a.ins.getCell(e);if(null!=n){r.cells.add(n);var t=n.article;if(null!=t&&1!=r.article.has(t)){r.article.add(t);var c=i.ins.data.find((function(e){return e.article==t}));r.towers.push(c)}}},o=new t,l=0;l<e.length;++l){var s=e[l].coord;for(o.x=s.x,o.y=s.y,o.x=0;o.x<n.width;++o.x)c(o);for(o.x=s.x,o.y=s.y,o.y=0;o.y<n.height;++o.y)c(o)}return r},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/TowerBulletEmit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bullet.ts","./BulletFactory.ts","./BulletMgr.ts","./WorldNode.ts","./BulletMoveCalc.ts","./AttackCom.ts","./Affix.ts","./TowerAttackTargetSelect.ts","./Vec2dHelper.ts","./BezierCalc.ts","./PathMove.ts"],(function(e){var t,a,c,r,n,o,l,i,u,s,f,d,k,b,B,p,v,g;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,c=e.randomRangeInt,r=e.tween,n=e.Vec3},function(e){o=e.BulletMoveType,l=e.BulletRotationType,i=e.Sender},function(e){u=e.BulletFactory},function(e){s=e.BulletMgr},function(e){f=e.WorldNode},function(e){d=e.BulletMoveCalc},function(e){k=e.AttackCrit},function(e){b=e.AffixType},function(e){B=e.TowerAttackTargetSelect},function(e){p=e.Vec2dHelper},function(e){v=e.BezierCalc},function(e){g=e.PathMove}],execute:function(){a._RF.push({},"dfad1qWN99NFJZ1UvFX78AM","TowerBulletEmit",void 0);e("TowerBulletEmit",function(){function e(){}return e.exe=function(e){var t=e.attack.scatterCount,a=this.bulletGen(e);this.buff(e,a),B.exe(e,a),this.view(a),this.scatter(e,a),e.attack.scatterCount=t,a.target.moveType==o.Boomerang&&this.boomerang(a)},e.boomerang=function(e){var t=e.target.targetRole,a=e.view.root.position.clone(),r=t.view.root.position.clone(),n=r.clone().subtract(a),o=n.clone().normalize();r.add(o.clone().multiplyScalar(50));var l=(n=r.clone().subtract(a)).clone().multiplyScalar(.5).add(a),i=n.x;n.x=n.y,n.y=i,0==c(0,2)?n.y*=-1:n.x*=-1,n.normalize(),n.multiplyScalar(500);var u=l.clone().add(n),s=l.clone().add(n.multiplyScalar(-1)),f=v.bezier2Path(a,r,u,5),d=v.bezier2Path(r,a,s,5);f.push.apply(f,d),f.splice(0,0,a),e.pathMove=new g,e.pathMove.path=f},e.view=function(e){switch(e.view.rotationType){case l.Forever:r(e.view.root).by(.5,{eulerAngles:new n(0,0,360)}).repeatForever().start()}},e.bulletGen=function(e){var t=e.article.view.root.worldPosition,a=u.create(e.attack.bulletId);return a.view.root.setParent(f.ins.layer2,!1),a.view.root.worldPosition=t,s.ins.add(a),a.damge=e.attack.damage,a.crit=new k,a.crit.multiple=e.attack.crit.multiple,a.crit.probability=e.attack.crit.probability,a.lifeStealing=e.attack.lifeStealing,a.sender=new i,a.sender.id=e.article.cfg.id,a},e.scatter=function(e,t){var a=t.move.direction,c=e.attack;if(0!=c.scatterCount)for(var r=15,n=0;n<c.scatterCount;++n){r=15*Math.floor((n+2)/2),n%2==1&&(r*=-1);var o=this.bulletGen(e),l=a.clone();p.rotate(l,r),d.exe(o.move,l)}},e.buff=function(e,a){for(var r,n=0,o=t(e.buff.list);!(r=o()).done;){var l=r.value;switch(l.affix.type){case b.AttackCritPerAttackNTimes:var i=l.affix.argN;e.attack.count%i==0&&(a.crit.probability=1);break;case b.AttackBulletMoveSpeedIncreasePercent:var u=a.cfg.moveSpeed*l.affix.argN;a.move.speed+=u;break;case b.AttackBulletBounceRectEnemyIncrease:a.bounce.bounceRectEnemy+=l.affix.argN;break;case b.AttackBulletBounceBetweenEnemiesIncrease:a.bounce.bounceBetweenEnemies.count+=l.affix.argN;break;case b.AttackBulletBounceRectIncrease:a.bounce.bounceRect+=l.affix.argN;break;case b.AttackBulletPassIncrease:a.passCount+=l.affix.argN;break;case b.AttackBulletPassInfiniteAndBounceRectIncrease:a.passCount+=9999,a.bounce.bounceRect+=l.affix.argN;break;case b.AttackBulletScatterIncrease:e.attack.scatterCount+=l.affix.argN;break;case b.AttackBulletScatterIncreaseProbability:var s=l.affix.argNList[0],f=l.affix.argNList[1];f*=100,c(0,100)<f&&(e.attack.scatterCount+=s);break;case b.AttackBulletAddBuff:a.buffIds.push(l.affix.argStr);break;case b.AttackBulletAddBuffRadius:a.buffIds.push(l.cfg.id);break;case b.AttackBulletProbabilityAddBuff:case b.AttackDamageIncreasePercentFullHp:case b.AttackBulletExplodeRadiusIncreasePercent:case b.AttackBulletExplodeDamageIncreasePercent:case b.AttackBulletAddBuffRadiusIncreasePercent:case b.AttackBulletAddBuffRadiusBuffIncreasePercent:case b.AttackBulletPoisoningDamageIncreasePercent:case b.AttackBulletPoisoningDurationIncreasePercent:a.buffs.push(l);break;case b.AttackBulletSizeIncreasePercent:n+=l.affix.argN}}if(n>0){var d=a.view.root.scale;d.multiplyScalar(1+n),a.view.root.scale=d}},e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/TowerFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgBuff.ts","./FrameSecConvert.ts","./BagArticleGradeHelper.ts","./Affix.ts","./AuraCom.ts","./Buff.ts","./BuffCom.ts","./BuffFactory.ts","./BuffResetMergeGrade.ts","./CurrentMax.ts","./TowerAttributeUpdate.ts","./AttackCom.ts","./Tower.ts"],(function(e){var t,r,a,n,f,i,u,c,s,o,l,g,d,p,v,x;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy},function(e){a=e.CfgBuff},function(e){n=e.FrameSecConvert},function(e){f=e.BagArticleGradeHelper},function(e){i=e.AffixType,u=e.Affix},function(e){c=e.AuraCom},function(e){s=e.Buff},function(e){o=e.BuffCom},function(e){l=e.BuffFactory},function(e){g=e.BuffResetMergeGrade},function(e){d=e.CurrentMax},function(e){p=e.TowerAttributeUpdate},function(e){v=e.AttackCom},function(e){x=e.Tower}],execute:function(){r._RF.push({},"94ae6tN3jhFJqlh15mgM2as","TowerFactory",void 0);e("TowerFactory",function(){function e(){}return e.create=function(e){var t=new x;return t.article=e,e.tower=t,b.exe(t),t},e}());var b=e("TowerCfgSet",function(){function e(){}return e.exe=function(e){var t=e.article.cfg.tower;this.attack(e,t),this.buff(e,t),this.buffGrade(e),p.grade(e)},e.attack=function(e,t){var r=e.attack;null==r&&(r=e.attack=new v),r.bulletId=t.atkBulletId,r.cd.current=0,r.cd.max=t.atkCd,r.damage=t.atkDamage,r.targeSelType=t.atkTargeSelType,r.crit.probability=t.atkCritProbability,r.crit.multiple=t.atkCritMultiple,r.scatterCount=t.atkBulletScatterCount},e.buff=function(e,r){null==e.buff&&(e.buff=new o),null==e.aura&&(e.aura=new c);for(var a,n=t(r.buffs);!(a=n()).done;){var f=a.value;this.handeBuff(e,f)}},e.buffGrade=function(e){var t=f.getCfgCurrentItems(e.article.cfg.id);if(null!=t)for(var r=0;r<t.length;++r)for(var a=t[r].buffIds,n=0;n<a.length;++n){var i=a[n];this.handeBuff(e,i)}},e.handeBuff=function(e,t){if(0==a.data.get(t).isAura){var r=e.buff.list.find((function(e){return e.cfg.id==t}));return null==r&&(r=l.create(t),e.buff.list.push(r),r.isNative=!0),void g.exe(r,e.article.cfg.mergeGrade)}var n=e.aura.list.find((function(e){return e.cfg.id==t}));null==n&&(n=l.create(t),e.aura.list.push(n),n.isNative=!0),g.exe(n,e.article.cfg.mergeGrade)},e.grade2=function(e){var t=f.getCfgCurrent(e.article.cfg.id);if(null!=t){var r=1;switch(e.article.cfg.mergeGrade){case 1:r=1;break;case 2:r=2;break;case 3:r=4;break;case 4:r=8}if(t.hpMaxIncrease>0){var a=e.buff.list.find((function(e){return e.affix.type==i.HpMaxIncrease&&1==e.isNative}));null==a&&(a=new s,e.buff.list.push(a),a.isNative=!0,a.affix=new u,a.affix.type=i.HpMaxIncrease),a.affix.argN=t.hpMaxIncrease*r}if(t.hpRegenIncreasePercent>0){var c=e.buff.list.find((function(e){return e.affix.type==i.HpRegenIncreasePercent&&1==e.isNative}));null==c&&(c=new s,e.buff.list.push(c),c.interval=new d,c.isNative=!0,c.affix=new u,c.affix.type=i.HpRegenIncreasePercent),c.interval.setCurrentAndMax(n.toFrame(3)),c.affix.argN=t.hpRegenIncreasePercent*e.article.cfg.mergeGrade}if(t.hpRegenIncrease>0){var o=e.buff.list.find((function(e){return e.affix.type==i.HpRegenIncrease&&1==e.isNative}));null==o&&(o=new s,e.buff.list.push(o),o.interval=new d,o.isNative=!0,o.affix=new u,o.affix.type=i.HpRegenIncrease),o.interval.setCurrentAndMax(n.toFrame(3)),o.affix.argN=t.hpRegenIncrease*r}}},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/TowerMgr.ts",["cc","./ListHelper.ts"],(function(t){var e,r;return{setters:[function(t){e=t.cclegacy},function(t){r=t.ListHelper}],execute:function(){var n;e._RF.push({},"d9b38PgkptK37Jhk7mCqO17","TowerMgr",void 0);var i=t("TowerMgr",function(){function t(){this.data=new Array}var e=t.prototype;return e.add=function(t){r.addUniquely(this.data,t)},e.remove=function(t){r.remove(this.data,t)},e.clear=function(){r.clear(this.data)},t}());n=i,i.ins=new n,e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerSys.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TowerMgr.ts","./TowerAttack.ts","./Affix.ts","./TowerSysBuff.ts","./FrameCall.ts","./FrameSecConvert.ts"],(function(t){var e,n,r,a,o,c,u,f,i;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},function(t){r=t.TowerMgr},function(t){a=t.TowerAttack},function(t){o=t.AffixType},function(t){c=t.TowerSysBuff},function(t){u=t.FrameCall,f=t.FrameCallDataItem},function(t){i=t.FrameSecConvert}],execute:function(){n._RF.push({},"a9a07oKqoNMnIgrbIyxSIPx","TowerSys",void 0);t("TowerSys",function(){function t(){}return t.update=function(){for(var t,n=e(r.ins.data);!(t=n()).done;){var a=t.value;this.updateTower(a)}},t.updateTower=function(t){this.attack(t),c.update(t)},t.attack=function(t){var e=t.attack;if(!(e.cd.current>0&&(e.cd.current--,e.cd.current>0))&&0!=a.canAttack(t)){a.exe(t),e.cd.setCurrentAsMax();var n=t.buff.list.find((function(t){return t.affix.type==o.AttackContinuous}));if(null!=n){var r=new f;r.interval.setCurrentAndMax(i.toFrame(.3)),r.times=n.affix.argN,r.fn=function(){0!=a.canAttack(t)&&a.exe(t)},u.ins.items.push(r)}}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/TowerSysBuff.ts",["cc","./PlayerRole.ts","./Affix.ts"],(function(e){var r,n,t;return{setters:[function(e){r=e.cclegacy},function(e){n=e.PlayerRole},function(e){t=e.AffixType}],execute:function(){r._RF.push({},"c593d5K7r1PzaaCKGaHOHlg","TowerSysBuff",void 0);e("TowerSysBuff",function(){function e(){}return e.update=function(e){for(var r=e.buff.list,n=r.length-1;n>=0;--n){var t=r[n],a=t.interval;null!=a&&a.max>=0&&(a.current--,-1==a.current&&(a.setCurrentAsMax(),this.trigger(e,t)))}},e.trigger=function(e,r){switch(r.affix.type){case t.HpRegenIncrease:var a=n.ins.main;a.life.add(r.affix.argN),a.view.hpBar.refresh();break;case t.HpRegenIncreasePercent:var f=n.ins.main,i=f.life.hp.max*r.affix.argN;f.life.add(i),f.view.hpBar.refresh()}},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/TweenHelper.ts",["cc"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy,t=e.tween}],execute:function(){n._RF.push({},"bd3ff04CHpE4ppEReDwK97c","TweenHelper",void 0);e("TweenHelper",function(){function e(){}return e.contentSize=function(e,n,c){var i=e.contentSize,r={};r.size=i;t(r).to(c,{size:n},{onUpdate:function(n,t){var c=n.size;e.setContentSize(c)}}).start()},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/TweenHelper2.ts",["cc"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy,t=e.tween}],execute:function(){n._RF.push({},"d4bceARWcxChraQpTi4z0mA","TweenHelper",void 0);e("TweenHelper",function(){function e(){}return e.contentSize=function(e,n,c){var i=e.contentSize,r={};r.size=i,t(r).to(c,{size:n},{onUpdate:function(n,t){var c=n.size;e.setContentSize(c)}}).start()},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/TweenSpeed.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,c,l,a,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,l=e.Node,a=e.Label,s=e.director,p=e.Component}],execute:function(){var u,d,f,y,h,b,g;o._RF.push({},"35c17fAmghEarfyvC3Rnfeh","TweenSpeed",void 0);var v=c.ccclass,T=c.property;e("TweenSpeed",(u=v("TweenSpeed"),d=T(l),f=T(a),u((b=t((h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,i(t,"cocos1",b,n(t)),i(t,"label",g,n(t)),t.speedFlag=!1,t.oldTick=s.tick,t}r(t,e);var o=t.prototype;return o.start=function(){var e=this;s.tick=function(t){e.oldTick.call(s,t*(e.speedFlag?1:3))}},o.onDestroy=function(){s.tick=this.oldTick},t}(p)).prototype,"cocos1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(h.prototype,"label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=h))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/UiArticleDetail.ts",["cc","./ArticleString.ts","./UiEffect.ts","./UiArticleDetailAttribute.ts","./UiArticleDetailIcon.ts"],(function(t){var i,e,r,o,n,s,h,a;return{setters:[function(t){i=t.cclegacy,e=t.Input,r=t.Label,o=t.RichText},function(t){n=t.ArticleString},function(t){s=t.UiEffectScale},function(t){h=t.UiArticleDetailAttribute},function(t){a=t.UiArticleDetailIcon}],execute:function(){var c;i._RF.push({},"daaa9mDKrlDz6rGnmBB/cHa","UiArticleDetail",void 0);var l=t("UiArticleDetail",function(){function t(){this.root=void 0,this.name=void 0,this.icon=void 0,this.gradeMerge=void 0,this.intro=void 0,this.attribute=void 0}var i=t.prototype;return i.init=function(t){var i=this;this.root=t,this.root.active=!1,this.root.getChildByPath("btnClose").on(e.EventType.TOUCH_END,(function(){i.root.active=!1})),this.name=this.root.getChildByPath("Name/val").getComponent(r),this.gradeMerge=this.root.getChildByPath("MergeGrade").getComponent(r),this.icon=new a,this.icon.init(this.root.getChildByPath("Icon")),this.intro=this.root.getChildByPath("Intro").getComponent(o),this.attribute=new h,this.attribute.init(this.root.getChildByPath("Info/Attribute"))},i.show=function(){this.root.active=!0,s.show(this.root)},i.refresh=function(t){var i=t.cfg,e=i.id;this.name.string=n.getName(e),this.icon.refresh(t),this.gradeMerge.string="合成 lv."+i.mergeGrade,this.intro.string="<br>"+n.getDescription(e)+"</br>",this.attribute.article=t,this.attribute.refresh()},t}());c=l,l.ins=new c,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiArticleDetailAttribute.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameSecConvert.ts","./Lang.ts","./Affix.ts"],(function(t){var e,a,i,r,o,c,s;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,i=t.Label,r=t.RichText},function(t){o=t.FrameSecConvert},function(t){c=t.Lang},function(t){s=t.AffixType}],execute:function(){a._RF.push({},"e2812tNGzdA3p1C7cbge0Qf","UiArticleDetailAttribute",void 0);t("UiArticleDetailAttribute",function(){function t(){this.article=null,this.root=void 0,this.cd=new n,this.target=new n,this.attackDamage=new n,this.hpMaxIncrease=new n,this.HpRegen=new n,this.Money001=new n,this.AuraAttackDamage=new n,this.AuraAttackSpeed=new n,this.AuraAttackCritProbability=new n}var a=t.prototype;return a.init=function(t){this.root=t,this.target.init(this.root.getChildByPath("Target")),this.cd.init(this.root.getChildByPath("Cd")),this.attackDamage.init(this.root.getChildByPath("Attack")),this.hpMaxIncrease.init(this.root.getChildByPath("HpMaxIncrease")),this.HpRegen.init(this.root.getChildByPath("HpRegen")),this.Money001.init(this.root.getChildByPath("Money001")),this.AuraAttackDamage.init(this.root.getChildByPath("AuraAttackDamage")),this.AuraAttackSpeed.init(this.root.getChildByPath("AuraAttackSpeed")),this.AuraAttackCritProbability.init(this.root.getChildByPath("AuraAttackCritProbability")),this.hideAll()},a.refresh=function(){this.hideAll(),this.refreshAttack(),this.refreshMisc()},a.hideAll=function(){this.target.root.active=!1,this.cd.root.active=!1,this.attackDamage.root.active=!1,this.hpMaxIncrease.root.active=!1,this.HpRegen.root.active=!1,this.Money001.root.active=!1,this.AuraAttackDamage.root.active=!1,this.AuraAttackSpeed.root.active=!1,this.AuraAttackCritProbability.root.active=!1},a.refreshAttack=function(){if(!(this.article.tower.attack.damage<=0)){this.attackDamage.root.active=!0,this.attackDamage.val.string="<b>"+this.article.tower.attack.damage.toString()+"</b>",this.target.root.active=!0,this.target.val.string="<b>"+c.get("AttackTargeSelType_"+this.article.cfg.tower.atkTargeSelType)+"</b>",this.cd.root.active=!0;var t=o.toSecond(this.article.tower.attack.cd.max);t=Math.round(100*t)/100,this.cd.val.string="<b>"+t.toString()+"</b>"}},a.refreshMisc=function(){for(var t,a="<b>{1}</b>",i="<b>{1}%</b>",r=e(this.article.tower.buff.list);!(t=r()).done;){var o=t.value;switch(o.affix.type){case s.HpMaxIncrease:this.hpMaxIncrease.root.active=!0,this.hpMaxIncrease.val.string=a.replace("{1}",o.affix.argN.toString());break;case s.HpRegenIncrease:this.HpRegen.root.active=!0,this.HpRegen.val.string=a.replace("{1}",o.affix.argN.toString());break;case s.HpRegenIncreasePercent:this.HpRegen.root.active=!0;var c=100*o.affix.argN;this.HpRegen.val.string=i.replace("{1}",c.toString());break;case s.GetMomeyPerWave:this.Money001.root.active=!0,this.Money001.val.string=a.replace("{1}",o.affix.argN.toString())}}for(var n,h=e(this.article.tower.aura.list);!(n=h()).done;){var g=n.value;switch(g.affix.type){case s.AuraAttackDamageIncreasePercent:this.AuraAttackDamage.root.active=!0;var l=100*g.affix.argN;this.AuraAttackDamage.val.string=i.replace("{1}","+"+l.toString());break;case s.AuraAttackSpeedIncreasePercent:var v=this.AuraAttackSpeed;v.root.active=!0;var u=100*g.affix.argN;v.val.string=i.replace("{1}","+"+u.toString());break;case s.AuraAttackCritProbabilityIncrease:var A=this.AuraAttackCritProbability;A.root.active=!0;var f=100*g.affix.argN;A.val.string=i.replace("{1}","+"+f.toString())}}},t}());var n=function(){function t(){this.root=void 0,this.name=void 0,this.icon=void 0,this.val=void 0}return t.prototype.init=function(t){this.root=t,this.name=this.root.getChildByPath("Name").getComponent(i),this.val=this.root.getChildByPath("Val").getComponent(r)},t}();a._RF.pop()}}}));

System.register("chunks:///_virtual/UiArticleDetailIcon.ts",["cc","./NodeSizeFit.ts","./PfMgr.ts"],(function(i){var t,e,n,o,c,s,r;return{setters:[function(i){t=i.cclegacy,e=i.Sprite,n=i.UITransform,o=i.sp,c=i.Vec3},function(i){s=i.NodeSizeFit},function(i){r=i.PfMgrBagArticle}],execute:function(){t._RF.push({},"59d485WT99Larv/cT4/K9iR","UiArticleDetailIcon",void 0);i("UiArticleDetailIcon",function(){function i(){this.root=void 0,this.icon=void 0,this.iconSk=void 0,this.iconSize=void 0}var t=i.prototype;return t.init=function(i){this.root=i,this.icon=this.root.getChildByPath("Icon").getComponent(e),this.iconSize=this.icon.getComponent(n).contentSize.clone(),this.iconSk=this.root.getChildByPath("IconSk").getComponent(o.Skeleton)},t.refresh=function(i){this.icon.node.active=!1,this.iconSk.node.active=!1;var t=i.cfg.id,n=r.getPf(t).getChildByPath("Main"),o=n.getComponent(e);if(null!=o)return this.icon.node.active=!0,this.icon.spriteFrame=o.spriteFrame,void s.set2(this.icon.node,this.iconSize,this.icon.spriteFrame.originalSize);this.refreshSkeleton(n)},t.refreshSkeleton=function(i){var t=i.getComponent(o.Skeleton);if(null!=t){this.iconSk.node.active=!0,this.iconSk.skeletonData=t.skeletonData;var e=this.iconSk.skeletonData.getRuntimeData().animations[0].name;this.iconSk.setAnimation(0,e,!0);var r=this.iconSk.node,a=r.getComponent(n).getBoundingBox();r.setParent(this.icon.node.parent),s.set2(r,this.iconSize,this.icon.spriteFrame.originalSize),r.position=new c(0,-a.height/2,0)}},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/UiArticleIcon.ts",["cc","./PfMgr.ts","./NodeSizeFit.ts","./CfgArticle.ts"],(function(t){var i,e,n,o,c,r,h,s;return{setters:[function(t){i=t.cclegacy,e=t.Sprite,n=t.UITransform,o=t.sp,c=t.Vec3},function(t){r=t.PfMgrBagArticle},function(t){h=t.NodeSizeFit},function(t){s=t.CfgArticleMgr}],execute:function(){i._RF.push({},"73ddd0EA5lJDIKaxVyR8f7e","UiArticleIcon",void 0);t("UiArticleIcon",function(){function t(){this.root=void 0,this.icon=void 0,this.iconSk=void 0,this.iconSize=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.icon=this.root.getChildByPath("Icon").getComponent(e),this.iconSize=this.icon.getComponent(n).contentSize.clone(),this.iconSk=this.root.getChildByPath("IconSk").getComponent(o.Skeleton)},i.refresh=function(t){this.icon.node.active=!1,this.iconSk.node.active=!1;var i=r.getPf(t).getChildByPath("Main"),n=i.getComponent(e);if(null!=n)return this.icon.node.active=!0,this.icon.spriteFrame=n.spriteFrame,void h.trimmed(this.icon,this.iconSize);this.refreshSkeleton(i)},i.refreshSkeleton=function(t){var i=t.getComponent(o.Skeleton);if(null!=i&&(this.iconSk.node.active=!0,this.iconSk.skeletonData!=i.skeletonData)){this.iconSk.skeletonData=i.skeletonData;var e=this.iconSk.skeletonData.getRuntimeData().animations[0].name;this.iconSk.setAnimation(0,e,!0);var r=this.iconSk.node,h=r.getComponent(n).contentSize;r.setParent(this.icon.node.parent);var s=h.width/h.height;if(s>1){var a=this.iconSize.width/h.width;r.setScale(new c(a,a,a))}else if(s<1||1==s){var l=this.iconSize.height/h.height;r.setScale(new c(l,l,l))}h=r.getComponent(n).getBoundingBox(),r.position=new c(0,-h.height/2,0)}},t}()),t("UiArticleIconBg",function(){function t(){this.root=void 0}var i=t.prototype;return i.init=function(t){this.root=t},i.refresh=function(t){for(var i=0;i<this.root.children.length;++i)this.root.children[i].active=!1;var e=s.data.get(t).quality-1;e>=this.root.children.length&&(e=this.root.children.length),this.root.children[e].active=!0},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiArticleUnlock.ts",["cc","./UiArticleIcon.ts","./ArticleString.ts","./Lang.ts","./UiEffect.ts"],(function(t){var i,n,o,e,c,r,s,h,a,u;return{setters:[function(t){i=t.cclegacy,n=t.Input,o=t.RichText,e=t.resources,c=t.Prefab,r=t.instantiate},function(t){s=t.UiArticleIcon},function(t){h=t.ArticleString},function(t){a=t.Lang},function(t){u=t.UiEffectPopup}],execute:function(){i._RF.push({},"53fe1CtEKNIU6FyvnFjoJ65","UiArticleUnlock",void 0);t("UiArticleUnlock",function(){function t(){this.root=void 0,this.mask=void 0,this.icon=new s,this.description=void 0}t.loadAndCreate=function(i){e.load("Home/Ui/ArticleUnlock",c,(function(n,o){var e=r(o),c=new t;c.init(e),i(c)}))};var i=t.prototype;return i.init=function(t){var i=this;this.root=t,this.mask=this.root.getChildByPath("mask"),this.mask.on(n.EventType.TOUCH_END,(function(){i.root.destroy()})),this.icon.init(this.root.getChildByPath("Icon")),this.description=this.root.getChildByPath("Description").getComponent(o)},i.refresh=function(t){this.icon.refresh(t[0]);var i=t[0],n=h.getName(i),o=a.get("Home_AricleUnlock_Description");o=o.replace("{name}",n),this.description.string=o},i.show=function(){u.show(this.root)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBag.ts",["cc","./UiBagGrid.ts","./UiBagTouch.ts","./UiArticleDetail.ts"],(function(i){var t,n,o,e,r;return{setters:[function(i){t=i.cclegacy,n=i.instantiate},function(i){o=i.UiBagGrid},function(i){e=i.UiBagTouch},function(i){r=i.UiArticleDetail}],execute:function(){t._RF.push({},"60265s+LCdPEJGGXxkH6uIQ","UiBag",void 0);var s=i("UiBag",function(){function i(){this.root=void 0}return i.createIns=function(t){var n=new i;this.ins=n,n.init(t)},i.create=function(t){void 0===t&&(t=null);var o=n(this.pf),e=new i;return e.init(o),e.root.setParent(t,!1),e},i.prototype.init=function(i){this.root=i,o.ins=new o,o.ins.init(this.root.getChildByPath("Grid")),e.ins=new e,e.ins.init(this.root.getChildByPath("Touch")),r.ins=new r,r.ins.init(this.root.getChildByPath("ArticleInfo"))},i}());s.ins=void 0,s.pf=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/UiBag2.ts",["cc","./UiBagDeploy.ts","./UiBagUnlocked.ts","./UiBagLocked.ts","./UiBagPrefab.ts","./UiBagReplace.ts"],(function(t){var i,e,o,n,s,h,c,a;return{setters:[function(t){i=t.cclegacy,e=t.Input,o=t.instantiate},function(t){n=t.UiBagDeploy},function(t){s=t.UiBagUnlocked},function(t){h=t.UiBagLocked},function(t){c=t.UiBagPrefab},function(t){a=t.UiBagReplace}],execute:function(){var r;i._RF.push({},"81ab3dhFOtNyoe96PwnyWxv","UiBag",void 0);var d=t("UiBag",function(){function t(){this.root=void 0,this.deploy=void 0,this.unlocked=void 0,this.locked=void 0,this.replace=void 0,this.sv=void 0}t.create=function(){var t=o(this.pf);this.ins.init(t)};var i=t.prototype;return i.init=function(t){var i=this;this.root=t,this.root.getChildByPath("btnBack").on(e.EventType.TOUCH_END,(function(){i.root.active=!1})),c.ins=new c,c.ins.init(this.root.getChildByPath("Prefab")),this.deploy=new n,this.deploy.init(this.root.getChildByPath("Deploy")),this.sv=this.root.getChildByPath("sv"),this.sv.active=!0,this.unlocked=new s,this.unlocked.init(this.root.getChildByPath("sv/view/content/Unlocked")),this.locked=new h,this.locked.init(this.root.getChildByPath("sv/view/content/Locked")),this.replace=new a,this.replace.init(this.root.getChildByPath("Replace")),this.replace.root.active=!1},i.show=function(){this.root.active=!0,this.deploy.refresh(),this.unlocked.refresh(),this.locked.refresh()},t}());r=d,d.ins=new r,d.pf=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagArticleDetail.ts",["cc","./CfgArticle.ts","./CfgArticleGrade.ts","./Account.ts","./ArticleString.ts","./UiBagArticleDetailBaseAttribute.ts","./UiBagArticleDetailUnlocked.ts","./UiBagArticleDetailBtnList.ts","./UiEffect.ts","./SoundBtnClickSetter.ts"],(function(t){var i,e,n,o,r,s,c,h,a,l,u,d,f;return{setters:[function(t){i=t.cclegacy,e=t.Input,n=t.Label,o=t.instantiate},function(t){r=t.CfgArticleMgr},function(t){s=t.CfgArticleGrade},function(t){c=t.Account},function(t){h=t.ArticleString},function(t){a=t.UiBagArticleDetailBaseAttribute},function(t){l=t.UiBagArticleDetailUnlocked},function(t){u=t.UiBagArticleDetailBtnList},function(t){d=t.UiEffectPopup},function(t){f=t.SoundBtnClickSetter}],execute:function(){i._RF.push({},"0e6f3U1kEBKxpo3AEsbJ8fr","UiBagArticleDetail",void 0),t("UiBagArticleDetail",function(){function t(){this.articleId=null,this.root=void 0,this.name=void 0,this.intro=void 0,this.btnList=new u,this.attribute=new a,this.unlocked=new l,this.item=void 0,this.unlockedInfo=void 0}t.create=function(i){var e=o(this.pf),n=new t;return n.init(e),n.root.setParent(i,!1),n};var i=t.prototype;return i.init=function(t){var i=this;this.root=t,f.exe(this.root),this.root.getChildByPath("btnClose").on(e.EventType.TOUCH_END,(function(){i.root.destroy()})),this.btnList.detail=this,this.btnList.init(this.root.getChildByPath("btnList")),this.btnList.setShowModeAsDeploy(),this.name=this.root.getChildByPath("Name").getComponent(n),this.intro=this.root.getChildByPath("Intro/val").getComponent(n),this.attribute.init(this.root.getChildByPath("Attribute")),this.unlocked.detail=this,this.unlocked.init(this.root.getChildByPath("Unlocked")),this.unlockedInfo=this.root.getChildByPath("UnlockedInfo").getComponent(n),this.unlockedInfo.node.active=!1},i.show=function(){this.root.active=!0,d.show(this.root)},i.refresh=function(){var t=r.data.get(this.articleId),i=t.gradeLineId,e=s.data.get(i),n=c.ins.bag.grade.get(i);null==n&&(n=1),n>e.length?this.btnList.btnUpgrade.root.active=!1:this.btnList.btnUpgrade.refresh(),this.attribute.cfgArctile=t,this.attribute.refresh(),this.intro.string=h.getDescription(this.articleId),this.unlocked.cfgArctile=t,this.unlocked.refresh()},t}()).pf=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagArticleDetailBaseAttribute.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameSecConvert.ts","./BagArticleGradeHelper.ts","./Lang.ts","./CfgBuff.ts","./Affix.ts"],(function(t){var e,i,a,r,n,s,o,c,h;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,a=t.Label,r=t.RichText},function(t){n=t.FrameSecConvert},function(t){s=t.BagArticleGradeHelper},function(t){o=t.Lang},function(t){c=t.CfgBuff},function(t){h=t.AffixType}],execute:function(){i._RF.push({},"6a5bem+sQVKjae3/ns4AdmK","UiBagArticleDetailBaseAttribute",void 0);t("UiBagArticleDetailBaseAttribute",function(){function t(){this.cfgArctile=null,this.root=void 0,this.cd=new g,this.target=new g,this.attackDamage=new g,this.hpMaxIncrease=new g,this.HpRegen=new g,this.AttackDamageAura=new g,this.Money001=new g,this.cfgCurrent=null,this.cfgNext=null}var i=t.prototype;return i.init=function(t){this.root=t,this.target.init(this.root.getChildByPath("Target")),this.target.root.active=!1,this.cd.init(this.root.getChildByPath("Cd")),this.cd.root.active=!1,this.attackDamage.init(this.root.getChildByPath("Attack")),this.attackDamage.root.active=!1,this.hpMaxIncrease.init(this.root.getChildByPath("HpMaxIncrease")),this.hpMaxIncrease.root.active=!1,this.HpRegen.init(this.root.getChildByPath("HpRegen")),this.HpRegen.root.active=!1,this.AttackDamageAura.init(this.root.getChildByPath("AttackAura")),this.AttackDamageAura.root.active=!1,this.Money001.init(this.root.getChildByPath("Money001")),this.Money001.root.active=!1},i.refresh=function(){this.cfgCurrent=s.getCfgCurrent(this.cfgArctile.id),this.cfgNext=s.getCfgNext(this.cfgArctile.id),this.refreshAttack(),this.refreshMisc()},i.refreshAttack=function(){var t=this.cfgCurrent.attackDamage;if(0!=t){if(this.attackDamage.root.active=!0,this.attackDamage.val.string="<b>"+t.toString()+"</b>",null!=this.cfgNext){var e=this.cfgNext.attackDamage-this.cfgCurrent.attackDamage;e>0&&(this.attackDamage.val.string+="<b><color=Green>+"+e+"</color></b>")}this.target.root.active=!0,this.target.val.string="<b>"+o.get("AttackTargeSelType_"+this.cfgArctile.tower.atkTargeSelType)+"</b>",this.cd.root.active=!0,this.cd.val.string="<b>"+n.toSecond(this.cfgArctile.tower.atkCd).toString()+"</b>"}},i.refreshMisc=function(){for(var t,i="<b>{1}</b>",a="<b>{1}%</b>",r=s.getCfgCurrentItems(this.cfgArctile.id),n=e(r);!(t=n()).done;)for(var o,g=t.value.buffIds,f=e(g);!(o=f()).done;){var l=o.value,u=c.data.get(l);switch(u.affixType){case h.HpMaxIncrease:this.hpMaxIncrease.root.active=!0,this.hpMaxIncrease.val.string=i.replace("{1}",u.affixArgN.toString());break;case h.HpRegenIncrease:this.HpRegen.root.active=!0,this.HpRegen.val.string=i.replace("{1}",u.affixArgN.toString());break;case h.HpRegenIncreasePercent:this.HpRegen.root.active=!0;var v=100*u.affixArgN;this.HpRegen.val.string=a.replace("{1}",v.toString());break;case h.GetMomeyPerWave:this.Money001.root.active=!0,this.Money001.val.string=i.replace("{1}",u.affixArgN.toString());break;case h.AuraAttackDamageIncreasePercent:this.AttackDamageAura.root.active=!0;var p=100*u.affixArgN;this.AttackDamageAura.val.string=a.replace("{1}",p.toString())}}},t}());var g=function(){function t(){this.root=void 0,this.name=void 0,this.icon=void 0,this.val=void 0}return t.prototype.init=function(t){this.root=t,this.name=this.root.getChildByPath("Name").getComponent(a),this.val=this.root.getChildByPath("Val").getComponent(r)},t}();i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagArticleDetailBtnList.ts",["cc","./Account.ts","./AccountPersist.ts","./CfgArticle.ts","./ReplaceModeEnter.ts","./UiBag2.ts","./BagArticleGradeHelper.ts","./UiToast.ts","./UiMain.ts","./UiMoney0012.ts"],(function(t){var e,i,n,o,s,r,a,l,d,h,c,u;return{setters:[function(t){e=t.cclegacy,i=t.Input,n=t.Label},function(t){o=t.Account},function(t){s=t.AccountPersist},function(t){r=t.CfgArticleMgr},function(t){a=t.ReplaceModeEnter},function(t){l=t.UiBag},function(t){d=t.BagArticleGradeHelper},function(t){h=t.UiToast},function(t){c=t.UiMain},function(t){u=t.UiMoney001}],execute:function(){e._RF.push({},"e2406H9ZFpJE4NTE4rEY37d","UiBagArticleDetailBtnList",void 0);t("UiBagArticleDetailBtnList",function(){function t(){this.detail=null,this.root=void 0,this.btnUpgrade=void 0,this.btnRemove=void 0,this.btnDeploy=void 0}var e=t.prototype;return e.init=function(t){this.root=t,this.btnUpgrade=new g,this.btnUpgrade.detail=this.detail,this.btnUpgrade.init(this.root.getChildByPath("btnUpgrade")),this.btnRemove=this.root.getChildByPath("btnRemove"),this.btnRemove.on(i.EventType.TOUCH_END,this.onClick_btnRemove,this),this.btnDeploy=this.root.getChildByPath("btnDeploy"),this.btnDeploy.on(i.EventType.TOUCH_END,this.onClick_btnDeploy,this)},e.setShowModeAsDeploy=function(){this.btnRemove.active=!0,this.btnDeploy.active=!1},e.setShowModeAsUnlocked=function(){this.btnRemove.active=!1,this.btnDeploy.active=!0},e.onClick_btnRemove=function(){var t=this.detail.articleId,e=o.ins.bag.deploy.indexOf(t);o.ins.bag.deploy.splice(e,1),s.save(),l.ins.deploy.refresh(),l.ins.unlocked.refresh(),this.detail.root.destroy()},e.onClick_btnDeploy=function(){if(o.ins.bag.deploy.length<8){var t=this.detail.articleId;return o.ins.bag.deploy.push(t),s.save(),l.ins.deploy.refresh(),l.ins.unlocked.refresh(),void this.detail.root.destroy()}this.detail.root.destroy(),a.enter(this.detail.articleId)},t}());var g=t("UiBagArticleDetailUpgrade",function(){function t(){this.detail=null,this.root=void 0,this.upgradeCost=void 0}var e=t.prototype;return e.init=function(t){this.root=t,this.root.on(i.EventType.TOUCH_END,this.onClick,this),this.upgradeCost=this.root.getChildByPath("Cost/val").getComponent(n)},e.refresh=function(){var t=d.getCfgCurrent(this.detail.articleId);this.upgradeCost.string=t.upgrade.money1.toString()},e.onClick=function(){var t=this.detail.articleId;if(0!=this.check()){var e=r.data.get(t).gradeLineId,i=o.ins.bag.grade.get(e);null==i&&(i=1),i++,o.ins.bag.grade.set(e,i),s.save(),l.ins.deploy.refresh(),l.ins.unlocked.refresh(),this.detail.unlocked.refresh(),this.detail.refresh(),this.detail.item.refresh(),u.ins.refresh()}},e.check=function(){var t=o.ins,e=d.getCfgCurrent(this.detail.articleId);if(t.money.money001<e.upgrade.money1)return h.show(c.ins.root,"金币不足"),!1;var i=t.items.get(e.upgrade.itemId);return null==i&&(i=0),i<e.upgrade.itemCount?(h.show(c.ins.root,"碎片不足",1.5),!1):(t.money.money001-=e.upgrade.money1,i-=e.upgrade.itemCount,t.items.set(e.upgrade.itemId,i),s.save(),!0)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagArticleDetailUnlocked.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgArticleGrade.ts","./BuffString.ts","./Account.ts","./BagArticleGradeHelper.ts","./CfgBuff.ts","./PfMgrIconBuff.ts","./NodeSizeFit.ts"],(function(t){var i,e,n,o,r,c,s,h,a,l,f,d,u;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,n=t.instantiate,o=t.RichText,r=t.Sprite,c=t.UITransform},function(t){s=t.CfgArticleGrade},function(t){h=t.BuffString},function(t){a=t.Account},function(t){l=t.BagArticleGradeHelper},function(t){f=t.CfgBuff},function(t){d=t.PfMgrIconBuff},function(t){u=t.NodeSizeFit}],execute:function(){e._RF.push({},"da0dbAs+AVBcKV5x4ycYNCa","UiBagArticleDetailUnlocked",void 0);t("UiBagArticleDetailUnlocked",function(){function t(){this.detail=null,this.cfgArctile=null,this.root=void 0,this.content=void 0,this.items=new Array,this.pfItem=void 0,this.pfItem2=void 0}var e=t.prototype;return e.init=function(t){this.root=t,this.content=this.root.getChildByPath("sv/view/content"),this.pfItem=this.content.children[0],this.pfItem.active=!1,this.pfItem2=this.content.children[1],this.pfItem2.active=!1;for(var i=this.content.children.length;i>2;--i)this.content.children[i].destroy()},e.refresh=function(){for(var t,e=this,o=i(this.items);!(t=o()).done;){t.value.root.destroy()}this.items.splice(0,this.items.length);for(var r=l.getGradeByLineId(this.cfgArctile.gradeLineId),c=s.data.get(this.cfgArctile.gradeLineId),h=0;h<c.length;++h){var f=c[h];if(0!=f.unlocked.length||0!=f.buffIds.length){var d=f.grade<=r;1==d&&(d=-1!=a.ins.bag.unlocked.findIndex((function(t){return t==e.cfgArctile.id})));var u=d?this.pfItem:this.pfItem2,v=n(u);v.active=!0,v.setParent(this.content,!1);var p=new g;this.items.push(p),p.init(v),p.cfgGradeItem=f,p.isUnlocked=d,p.refresh()}}r==c.length&&(this.detail.btnList.btnUpgrade.root.active=!1)},t}());var g=t("UiBagArticleDetailUnlockedItem",function(){function t(){this.isUnlocked=!0,this.cfgGradeItem=null,this.root=void 0,this.txt=void 0,this.icon=new v}var i=t.prototype;return i.init=function(t){this.root=t,this.txt=this.root.getComponentInChildren(o),this.icon.init(this.root.getChildByPath("Icon"))},i.refresh=function(){var t=null;if(null!=(t=this.cfgGradeItem.unlocked.length>0?this.cfgGradeItem.unlocked[0]:this.cfgGradeItem.buffIds.find((function(t){return-1!=t.indexOf("MergeEnable")})))){var i=h.getDescription(t);if(this.isUnlocked)i="<outline color=black width=4><b>"+i+"</b></outline>";else i="<outline color=black width=4><b>"+"<color=#AFFBFA>Lv.{1}解锁：</color>".replace("{1}",this.cfgGradeItem.grade.toString())+i+"</b></outline>";this.txt.string=i,this.icon.refresh(t)}},t}()),v=function(){function t(){this.root=void 0,this.iconBgList=Array(),this.icon=void 0,this.iconSize=void 0}var e=t.prototype;return e.init=function(t){this.root=t,this.icon=t.getChildByPath("val").getComponent(r),this.iconSize=this.icon.getComponent(c).contentSize.clone();for(var i=1;;i++){var e="bg"+i,n=this.root.getChildByPath(e);if(null==n)break;this.iconBgList.push(n)}},e.refresh=function(t){var e=d.ins.getIconById(t);this.icon.spriteFrame=e.spriteFrame,u.trimmed(this.icon,this.iconSize);for(var n,o=f.data.get(t),r=i(this.iconBgList);!(n=r()).done;){n.value.active=!1}var c=o.grade-1;this.iconBgList.length<=c||(this.iconBgList[c].active=!0)},t}();e._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagBottom.ts",["cc","./UiTray.ts","./BagTrayAricleGen.ts","./Ad.ts","./Player.ts"],(function(t){var n,i,e,r,o,s,h,a;return{setters:[function(t){n=t.cclegacy,i=t.Input,e=t.Label,r=t.randomRangeInt},function(t){o=t.UiTray},function(t){s=t.BagTrayAricleGen},function(t){h=t.Ad},function(t){a=t.Player}],execute:function(){n._RF.push({},"43f6b+abVhH1ZNBDu4ZCMS4","UiBagBottom",void 0),t("UiBagBottom",function(){function t(){this.root=void 0,this.btnStart=void 0,this.btnRefresh=void 0,this.btnRefreshGrade2=void 0,this.btnGetGridExpand=void 0,this.refreshGrade2Count=0}var n=t.prototype;return n.init=function(t){this.root=t,this.btnStart=this.root.getChildByPath("BtnList/btnStart"),this.btnStart.on(i.EventType.TOUCH_END,this.onClick_Start,this),this.btnRefresh=this.root.getChildByPath("BtnList/btnRefresh"),this.btnRefreshGrade2=this.root.getChildByPath("BtnList/btnRefreshGrade2"),this.btnRefreshGrade2.on(i.EventType.TOUCH_END,this.onClick_btnRefreshGrade2,this),this.btnGetGridExpand=new d,this.btnGetGridExpand.init(this.root.getChildByPath("btnGetGridExpand"))},n.show=function(){this.root.active=!0,this.showAllBtns(!0)},n.hide=function(){this.root.active=!1},n.showAllBtns=function(t){void 0===t&&(t=!0),this.btnStart.active=t,this.btnRefresh.active=t,this.btnRefreshGrade2.active=t,this.btnGetGridExpand.root.active=t},n.onClick_Start=function(){},n.onClick_Refresh=function(){},n.onClick_btnRefreshGrade2=function(){var t=this;h.ins.rewardShow((function(){s.ins.genGrade2(),t.refreshGrade2Count++,t.refreshGrade2Count>=2&&(t.btnRefreshGrade2.active=!1)}))},t}()).ins=null;var d=t("UiBtnGetGridExpand",function(){function t(){this.root=void 0,this.count=void 0}var n=t.prototype;return n.init=function(t){this.root=t,this.root.on(i.EventType.TOUCH_END,this.onClick_btnGetGridExpand,this),this.count=this.root.getChildByPath("Count").getComponent(e),this.count.string="x3",this.refresh()},n.refresh=function(){var t=a.ins.getGridExpandCount;t<=0?this.root.destroy():this.count.string="x"+t},n.onClick_btnGetGridExpand=function(){var t=this;h.ins.rewardShow((function(){var n=["BagExpand_H2","BagExpand_V2"],i=n[r(0,n.length)];o.ins.addArticleById(i,2),a.ins.getGridExpandCount--,t.refresh()}))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagCell.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"bcee1zW3XVF26+C2bO3ZgF4","UiBagCell",void 0);t("UiBagCell",function(){function t(){this.unlocked=!1,this.coord=void 0,this.article=null,this.root=void 0,this.bg=void 0,this.hintPlaceable=void 0,this.hintExpandable=void 0}return t.prototype.init=function(t){this.root=t,this.bg=t.getChildByPath("bg"),this.hintPlaceable=t.getChildByPath("HintPlaceable"),this.hintPlaceable.active=!1,this.hintExpandable=t.getChildByPath("HintExpandable"),this.hintExpandable.active=!1},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagCfg.ts",["cc"],(function(i){var c;return{setters:[function(i){c=i.cclegacy}],execute:function(){c._RF.push({},"7eb70DNqJBABp/4zcjskijE","UiBagCfg",void 0),i("UiBagCfg",(function(){this.cellSize=null})).ins=null,c._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagDeploy.ts",["cc","./UiBagItem.ts","./Account.ts","./UiBagArticleDetail.ts","./UiMain.ts","./UiBagPrefab.ts","./CfgArticle.ts","./SoundBtnClickSetter.ts","./UiHybridGuide.ts"],(function(t){var i,e,n,o,r,s,a,c,l,h,u,f,g;return{setters:[function(t){i=t.cclegacy,e=t.Label,n=t.Input,o=t.instantiate,r=t.Vec3},function(t){s=t.UiBagItem},function(t){a=t.Account},function(t){c=t.UiBagArticleDetail},function(t){l=t.UiMain},function(t){h=t.UiBagPrefab},function(t){u=t.CfgArticleMgr},function(t){f=t.SoundBtnClickSetter},function(t){g=t.UiHybridGuide}],execute:function(){i._RF.push({},"ef458BwxoFFbYmZ4U31FCXP","UiBagDeploy",void 0);t("UiBagDeploy",function(){function t(){this.root=void 0,this.items=new Array,this.count=void 0,this.list=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.count=this.root.getChildByPath("Title/Count").getComponent(e),this.list=this.root.getChildByPath("List"),this.root.getChildByPath("btnHybridGuide").on(n.EventType.TOUCH_END,(function(){g.create(l.ins.root).show()})),this.refresh()},i.refresh=function(){var t=this;this.items.splice(0,this.items.length),this.list.removeAllChildren();for(var i=a.ins.bag.deploy,e=function(){var e=i[r],a=u.data.get(e).quality,c=h.ins.items[a-1],l=new s;t.items.push(l),l.init(o(c)),l.root.active=!0,l.root.setParent(t.list,!1),l.articleId=e,l.refresh(),l.root.on(n.EventType.TOUCH_END,(function(){t.onClick_Item(l)}))},r=0;r<i.length;++r)e();for(var c=i.length;c<8;++c){o(h.ins.itemEmpty).setParent(this.list,!1)}this.count.string=i.length+"/8",f.exe(this.root)},i.onClick_Item=function(t){var i=c.create(l.ins.root);i.articleId=t.articleId,i.name.string=t.name.string,i.refresh(),i.show(),i.btnList.setShowModeAsDeploy();var e=i.root.getChildByPath("Item"),n=o(t.root);n.scale=new r(1.2,1.2,1.2),n.setParent(e.parent,!1),n.position=e.position,e.destroy();var a=new s;i.item=a,a.init(n),a.name.node.active=!1,a.articleId=t.articleId,a.refresh()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagExpandOp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagArticleGridPlace.ts","./GridModeTransition.ts","./GridTraverse.ts","./CellExpand.ts","./UiTray.ts","./UiToast.ts","./UiMain2.ts","./Lang.ts","./UiBagTouch.ts"],(function(t){var n,i,e,o,r,a,c,s,l,u,d,f,p,v;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,e=t.Input,o=t.tween,r=t.Vec3},function(t){a=t.BagArticleGridPlace},function(t){c=t.GridModeTransition},function(t){s=t.GridTraverse},function(t){l=t.CellExpand},function(t){u=t.UiTray},function(t){d=t.UiToast},function(t){f=t.UiMain},function(t){p=t.Lang},function(t){v=t.UiBagTouch}],execute:function(){var h;i._RF.push({},"d3556N5QHtK6ogxNV498f9g","UiBagExpandOp",void 0);var x=t("UiBagExpandOp",function(){function t(){this.root=void 0,this.btnOK=void 0,this.prompt=void 0}var n=t.prototype;return n.init=function(t){this.root=t,this.root.active=!0,this.btnOK=this.root.getChildByPath("btnOK"),this.btnOK.on(e.EventType.TOUCH_END,this.onClick_OK,this),this.prompt=this.root.getChildByPath("Prompt"),o(this.prompt).sequence(o(this.prompt).to(.9,{scale:new r(1.2,1.2,1.2)}),o(this.prompt).to(.9,{scale:new r(1,1,1)})).repeatForever().start()},n.show=function(){this.root.active=!0},n.hide=function(){this.root.active=!1},n.onClick_OK=function(){g.exe(),v.ins.limit.clear()},t}());h=x,x.ins=new h;var g=t("GirdExpandCtrl",function(){function t(){}return t.exe=function(){this.exe2()},t.exe1=function(){s.exe((function(t){var i=t.article;if(null!=i&&0!=i.isBagExpand){for(var e,o=n(i.cells);!(e=o()).done;){var r=e.value;r.unlocked=!0,r.bg.active=!0,r.hintPlaceable.active=!1,r.hintExpandable.active=!1}i.view.root.destroy(),a.unbind(i)}})),c.toNormal()},t.exe2=function(){var t=this;s.exe((function(n){var i=n.article;null!=i&&0!=i.isBagExpand&&(1==t.isNextToUnlocked(i)?t.articleToUnlocked(i):(a.unbind(i),u.ins.insertArticle(i),d.show(f.ins.root,p.get("Game_Prompt_CannotPlaceBagExpand"))))})),c.toNormal()},t.articleToUnlocked=function(t){for(var i,e=n(t.cells);!(i=e()).done;){var o=i.value;o.unlocked=!0,o.bg.active=!0,o.hintPlaceable.active=!1,o.hintExpandable.active=!1}t.view.root.destroy(),a.unbind(t)},t.isNextToUnlocked=function(t){for(var i,e=n(t.cells);!(i=e()).done;){var o=i.value;if(-1!=l.exe4(o.coord).findIndex((function(t){return 1==t.unlocked})))return!0}return!1},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagGrid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagGridDraw.ts","./UiBagGridBg.ts","./Player.ts","./GridTraverse.ts","./UiBagCell.ts","./UiEffect.ts","./UiBagCfg.ts"],(function(i){var t,e,n,o,r,a,s,c,l,d,u,h,f,g,v,p;return{setters:[function(i){t=i.createForOfIteratorHelperLoose},function(i){e=i.cclegacy,n=i.find,o=i.UITransform,r=i.Vec2,a=i.tween,s=i.Tween,c=i.Vec3,l=i.Size},function(i){d=i.BagGridDraw},function(i){u=i.UiBagGridBg},function(i){h=i.Player},function(i){f=i.GridTraverse},function(i){g=i.UiBagCell},function(i){v=i.UiEffectFade},function(i){p=i.UiBagCfg}],execute:function(){var w;e._RF.push({},"6e751NjNglBt7OCZj9HoQAM","UiBagGrid",void 0);var B=i("UiBagGrid",function(){function i(){this.root=void 0,this.gridSize=new l(5,7),this.grid=new Array,this.cellPf=void 0,this.posOrig=void 0,this.showMode=1}var e=i.prototype;return e.init=function(i){this.root=i,this.posOrig=this.root.position.clone(),this.cellPf=n("Cell",i),p.ins=new p,p.ins.cellSize=this.cellPf.getComponent(o).contentSize,this.initGrid(),d.exe(),u.ins.init(this.root.getChildByPath("bg"))},e.initGrid=function(){for(var i=this.gridSize,e=this.grid,n=0;n<i.height;++n){var o=new Array;e.push(o);for(var a=0;a<i.width;++a){var s=new g;o.push(s),s.unlocked=!1,s.coord=new r(a,n)}}for(var c,l=t(h.ins.bag.cells);!(c=l()).done;){var d=c.value;e[d.y][d.x].unlocked=!0}},e.getCell=function(i){return i.x<0||i.y<0||i.x>=this.gridSize.width||i.y>=this.gridSize.height?null:this.grid[i.y][i.x]},e.showExpandable=function(){u.ins.entiretyAnim(.2),a(this.root).delay(.2).call((function(){f.exe((function(i){0==i.unlocked&&(i.root.active=!0,i.bg.active=!1,i.hintExpandable.active=!0,v.fade(i.hintExpandable,.2,0,255))}))})).start(),f.exe((function(i){var t=i.article;null!=t&&v.fade(t.view.root,.4,255,127.5)}))},e.showNormal=function(){s.stopAllByTarget(this.root),f.exe((function(i){0==i.unlocked?i.root.active=!1:(i.root.active=!0,i.bg.active=!0,i.hintExpandable.active=!1,i.hintPlaceable.active=!1);var t=i.article;null!=t&&v.fade(t.view.root,.4,127.5,255)})),u.ins.unlockedAnim(.2)},e.alignBgCenter=function(i){void 0===i&&(i=.2);var t=u.ins.rect.center,e=new c(t.x,t.y),n=this.posOrig.clone().subtract(e);0==i?this.root.position=n:a(this.root).to(i,{position:n}).start()},i}());w=B,B.ins=new w,e._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagGridBg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridHelper.ts","./TweenHelper.ts"],(function(e){var t,i,n,o,r,s,d,c,l;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,n=e.Vec3,o=e.UITransform,r=e.Widget,s=e.Tween,d=e.tween},function(e){c=e.GridHelper},function(e){l=e.TweenHelper}],execute:function(){var g;i._RF.push({},"97c12KRS3ZLbJhmSO1uI7ZP","UiBagGridBg",void 0);var u=e("UiBagGridBg",function(){function e(){this.rect=void 0,this.root=void 0}var i=e.prototype;return i.init=function(e){this.root=e},i.entirety=function(e){void 0===e&&(e=0);var t=c.getBoundingRectEntirety();this.setBg(t,e)},i.entiretyAnim=function(e){void 0===e&&(e=.5),this.entirety(e)},i.unlocked=function(e){void 0===e&&(e=0);var t=c.getBoundingRectUnlocked();this.setBg(t,e)},i.unlockedAnim=function(e){void 0===e&&(e=.5),this.unlocked(e)},i.setBg=function(e,t){var i=this;void 0===t&&(t=0),this.rect=e;var c=new n(e.center.x,e.center.y),g=this.root.getComponent(o);0==t?(this.root.position=c,this.setBgChildrenAlignMode(r.AlignMode.ALWAYS),g.setContentSize(e.size),this.setBgChildrenAlignMode(r.AlignMode.ON_WINDOW_RESIZE)):(this.setBgChildrenAlignMode(r.AlignMode.ALWAYS),l.contentSize(g,e.size,t),s.stopAllByTarget(this.root),d(this.root).to(t,{position:c}).call((function(){i.setBgChildrenAlignMode(r.AlignMode.ON_WINDOW_RESIZE)})).start())},i.setBgChildrenAlignMode=function(e){void 0===e&&(e=r.AlignMode.ON_WINDOW_RESIZE);for(var i,n=this.root.getComponentsInChildren(r),o=t(n);!(i=o()).done;){i.value.alignMode=e}},e}());g=u,u.ins=new g,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagItem.ts",["cc","./PfMgr.ts","./NodeSizeFit.ts","./ArticleString.ts","./CfgArticle.ts","./Account.ts","./UiBagPrefab.ts","./BagArticleGradeHelper.ts"],(function(t){var i,e,a,n,r,o,s,h,g,d,c,l,u,p;return{setters:[function(t){i=t.cclegacy,e=t.Label,a=t.Sprite,n=t.instantiate,r=t.Vec3,o=t.Tween,s=t.tween},function(t){h=t.PfMgrBagArticle},function(t){g=t.NodeSizeFit},function(t){d=t.ArticleString},function(t){c=t.CfgArticleMgr},function(t){l=t.Account},function(t){u=t.UiBagPrefab},function(t){p=t.BagArticleGradeHelper}],execute:function(){i._RF.push({},"a3826qCMOVCaJdwFJLruJk6","UiBagItem",void 0);t("UiBagItem",function(){function t(){this.articleId=void 0,this.root=void 0,this.name=void 0,this.icon=void 0,this.grade=void 0,this.shape=void 0,this.updateFragment=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.name=this.root.getChildByPath("Name").getComponent(e),this.icon=this.root.getChildByPath("Icon").getComponent(a),this.grade=this.root.getChildByPath("Grade/val").getComponent(e),this.shape=this.root.getChildByPath("Shape");var i=this.root.getChildByPath("Fragment");null!=i&&(this.updateFragment=new f,this.updateFragment.init(i))},i.refresh=function(){this.name.string=d.getName(this.articleId);var t=h.getPf(this.articleId);this.icon.spriteFrame=t.getChildByPath("Main").getComponent(a).spriteFrame,g.set(this.icon.node,this.icon.spriteFrame.originalSize);var i=c.data.get(this.articleId),e=1;1==l.ins.bag.grade.has(i.gradeLineId)&&(e=l.ins.bag.grade.get(i.gradeLineId)),this.grade.string="等级"+e.toString();var o=u.ins.root.getChildByPath("Shape/"+i.bagShapeId);if(null!=o){var s=n(o);s.name="Shape",s.setParent(this.shape,!1),s.position=r.ZERO}null!=this.updateFragment&&(this.updateFragment.articleId=this.articleId,this.updateFragment.refresh())},t}());var f=t("UiBagItemUpgradeFragment",function(){function t(){this.articleId=void 0,this.root=void 0,this.bar=void 0,this.count=void 0,this.icon=void 0,this.upgradeable=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.bar=this.root.getChildByPath("bar").getComponent(a),this.bar.fillRange=0,this.count=this.root.getChildByPath("val").getComponent(e),this.count.string="0/0",this.upgradeable=this.root.getChildByPath("Upgradeable"),this.upgradeable.active=!1,this.icon=this.root.getChildByPath("Icon")},i.refresh=function(){var t=p.getCfgCurrent(this.articleId),i=l.ins.items.get(t.upgrade.itemId);null==i&&(i=0),this.count.string=i+"/"+t.upgrade.itemCount,this.bar.fillRange=i/t.upgrade.itemCount,i>=t.upgrade.itemCount?(this.upgradeable.active=!0,this.playAnimUpgradeable()):this.upgradeable.active=!1},i.playAnimUpgradeable=function(){var t=this.upgradeable;if(1!=t.tween){t.tween=!0,o.stopAllByTarget(t);var i=t.position.clone().add3f(0,10,0),e=t.position.clone().add3f(0,-10,0);s(t).sequence(s(t).to(.5,{position:i}),s(t).to(.5,{position:e})).repeatForever().start()}},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagItemLocked.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiBagItem.ts","./CfgArticleUnlock.ts"],(function(t){var e,o,n,r,i,c,l;return{setters:[function(t){e=t.inheritsLoose,o=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,r=t.Label,i=t.Sprite},function(t){c=t.UiBagItem},function(t){l=t.CfgArticleUnlock}],execute:function(){n._RF.push({},"bb0d2mFQpVA+IroUtF4qPiO","UiBagItemLocked",void 0);t("UiBagItemLocked",function(t){function n(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).unlockInfo=void 0,e}e(n,t);var c=n.prototype;return c.init=function(e){t.prototype.init.call(this,e),this.unlockInfo=this.root.getChildByPath("UnlockInfo").getComponent(r)},c.refresh=function(){t.prototype.refresh.call(this);for(var e,n=this.shape.getChildByPath("Shape"),r=o(n.children);!(e=r()).done;){e.value.getComponent(i).grayscale=!0}this.refreshUnlockInfo()},c.refreshUnlockInfo=function(){var t=l.data.get(this.articleId);if(null!=t){var e="通过章节{1}解锁";return e=e.replace("{1}",t.levelIdx.toString()),void(this.unlockInfo.string=e)}},n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagLocked.ts",["cc","./UiBagItem.ts","./Account.ts","./UiBagPrefab.ts","./UiBagArticleDetail.ts","./UiMain.ts","./CfgGeneral.ts","./UiBagItemLocked.ts","./SoundBtnClickSetter.ts"],(function(t){var e,n,i,o,r,c,s,a,u,l,f,d;return{setters:[function(t){e=t.cclegacy,n=t.instantiate,i=t.Vec3,o=t.Input},function(t){r=t.UiBagItem},function(t){c=t.Account},function(t){s=t.UiBagPrefab},function(t){a=t.UiBagArticleDetail},function(t){u=t.UiMain},function(t){l=t.CfgGeneral},function(t){f=t.UiBagItemLocked},function(t){d=t.SoundBtnClickSetter}],execute:function(){e._RF.push({},"adeb9Kn8DJKFrmGjOBbyYCe","UiBagLocked",void 0);t("UiBagLocked",function(){function t(){this.root=void 0,this.items=new Array}var e=t.prototype;return e.init=function(t){this.root=t,this.refresh()},e.refresh=function(){var t=this;this.items.splice(0,this.items.length),this.root.removeAllChildren();var e=l.ins.BagAllArticleIds.slice(),i=c.ins.bag.unlocked,r=e.filter((function(t){return!i.includes(t)})),a=c.ins.bag.deploy;r=r.filter((function(t){return!a.includes(t)}));for(var u=function(){var e=new f;t.items.push(e),e.init(n(s.ins.itemLocked)),e.root.active=!0,e.root.setParent(t.root,!1),e.articleId=r[g],e.refresh(),e.root.on(o.EventType.TOUCH_END,(function(){t.onClick_Item(e)}))},g=0;g<r.length;++g)u();d.exe(this.root)},e.onClick_Item=function(t){var e=a.create(u.ins.root);e.articleId=t.articleId,e.name.string=t.name.string,e.refresh(),e.show(),e.btnList.setShowModeAsUnlocked();var o=e.root.getChildByPath("Item"),c=n(t.root);c.scale=new i(1.2,1.2,1.2),c.setParent(o.parent,!1),c.position=o.position,o.destroy();var s=new r;e.item=s,s.init(c),s.name.node.active=!1,s.articleId=t.articleId,s.refresh(),e.btnList.root.active=!1,e.unlockedInfo.node.active=!0,e.unlockedInfo.string=t.unlockInfo.string},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagPrefab.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"ec039fWh/ZHeZTMhtqloeLQ","UiBagPrefab",void 0),t("UiBagPrefab",function(){function t(){this.root=void 0,this.items=new Array,this.itemLocked=void 0,this.itemEmpty=void 0}return t.prototype.init=function(t){this.root=t;for(var i=1;i<=4;++i){var e=this.root.getChildByPath("Item"+i);this.items.push(e)}this.itemLocked=this.root.getChildByPath("ItemLocked"),this.itemEmpty=this.root.getChildByPath("ItemEmpty")},t}()).ins=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagReplace.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"627e9rnihpBrZ+dhdHkyBCM","UiBagReplace",void 0);t("UiBagReplace",function(){function t(){this.root=void 0,this.item=void 0}return t.prototype.init=function(t){this.root=t,this.item=this.root.getChildByPath("Item")},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagTouch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiTray.ts","./HitTest.ts","./GridHint.ts","./GestureArticleInfo.ts","./GridModeTransition.ts","./UiMain2.ts","./BagArticleGridPlaceByPos.ts","./MergeHybridHint.ts","./MergeHint.ts","./AuraHint.ts","./WorldNode.ts","./UiDialog.ts","./Ad.ts","./UiArticleDetail.ts"],(function(t){var i,e,n,o,r,l,a,c,s,u,h,f,v,d,T,g,p,w,A;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,n=t.Input,o=t.Vec3,r=t.UIOpacity},function(t){l=t.UiTray},function(t){a=t.HitTest},function(t){c=t.GridHint},function(t){s=t.GestureClick},function(t){u=t.GridModeTransition},function(t){h=t.UiMain},function(t){f=t.BagArticleGridPlaceByPos},function(t){v=t.MergeHybridHintMgr},function(t){d=t.MergeHint},function(t){T=t.TowerAuraHint},function(t){g=t.WorldNode},function(t){p=t.UiDialog},function(t){w=t.Ad},function(t){A=t.UiArticleDetail}],execute:function(){e._RF.push({},"b19a3/nvHFJgLdHYJtPFtMr","UiBagTouch",void 0),t("UiBagTouch",function(){function t(){this.onBeforeArticleSelect=null,this.onBeforeArticlePlace=null,this.onCompleteArticlePlace=null,this.root=void 0,this.limit=new H,this.articleSel=null,this.gestureClick=new s,this.towerAuraHint=new T}var i=t.prototype;return i.init=function(t){this.root=t,this.root.on(n.EventType.TOUCH_START,this.onTouchStart,this),this.root.on(n.EventType.TOUCH_MOVE,this.onTouchMove,this),this.root.on(n.EventType.TOUCH_END,this.onTouchEnd,this),this.root.on(n.EventType.TOUCH_CANCEL,this.onTouchEnd,this),v.ins=new v},i.onTouchStart=function(t){var i=t.getUILocation(),e=a.hit(i);null!=e&&(null!=this.onBeforeArticleSelect&&0==this.onBeforeArticleSelect(e)||null!=this.limit.article&&this.limit.article!=e||(1==e.isBagExpand&&(u.toExpandable(),this.limit.limit(e)),this.gestureClick.rest(),this.gestureClick.start(i),this.articleSel=e,e.view.root.parent==l.ins.root?e.view.root.setSiblingIndex(999):e.view.root.setParent(g.ins.layer2,!0),v.ins.clearAllLines(),v.ins.hideShape(e),d.mergeable(e)))},i.onTouchMove=function(t){if(null!=this.articleSel){var i=t.getUILocation(),e=new o(i.x,i.y);this.articleSel.view.root.worldPosition=e,c.hintPlaceableClear();var n=f.getCellsPlace(this.articleSel);null!=n&&c.hintPlaceableShow(n),this.towerAuraHint.exe(this.articleSel,n),this.gestureClick.move(i)}},i.onTouchEnd=function(t){var i,e;if(null!=this.articleSel){var n=this.articleSel;this.articleSel=null,null==n.view.adTag?0!=(null==(i=this.onBeforeArticlePlace)?void 0:i.call(this,n))&&(this.articlePlace(n),null==(e=this.onCompleteArticlePlace)||e.call(this,n)):this.adGet(n)}},i.articlePlace=function(t){this.gestureClick.getVal()&&this.showArticleInfo(t),f.exe(t),v.ins.exe(),this.towerAuraHint.place(),d.restore()},i.articleGotoTray=function(t){l.ins.insertArticle(t),c.hintPlaceableClear(),v.ins.exe(),this.towerAuraHint.clear(),d.restore()},i.adGet=function(t){var i=this,e=p.create(h.ins.root,"是否观看视频获得该物品");e.btnClose.on(n.EventType.TOUCH_END,(function(){i.articleGotoTray(t)})),e.btnOK.on(n.EventType.TOUCH_END,(function(){var e=function(){i.articleGotoTray(t)};w.ins.rewardShow((function(){t.view.adTag.destroy(),t.view.adTag=null,i.articlePlace(t)}),e,e)}))},i.showArticleInfo=function(t){if(!t.isBagExpand){var i=A.ins;i.root.setParent(h.ins.root),i.show(),i.refresh(t)}},t}()).ins=null;var H=t("TouchLimit",function(){function t(){this.article=null}var e=t.prototype;return e.limit=function(t){this.article=t;for(var e,n=l.ins.articles,o=i(n);!(e=o()).done;){var a=e.value;if(a!=t){var c=a.view.root.getComponent(r);null==c&&(c=a.view.root.addComponent(r)),c.opacity=150}}},e.clear=function(){this.article=null;for(var t,e=l.ins.articles,n=i(e);!(t=n()).done;){var o=t.value.view.root.getComponent(r);null!=o&&o.destroy()}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiBagUnlocked.ts",["cc","./UiBagItem.ts","./Account.ts","./UiBagPrefab.ts","./CfgArticle.ts","./UiBagArticleDetail.ts","./UiMain.ts","./SoundBtnClickSetter.ts"],(function(t){var e,i,n,o,r,c,s,a,u,l,f;return{setters:[function(t){e=t.cclegacy,i=t.instantiate,n=t.Vec3,o=t.Input},function(t){r=t.UiBagItem},function(t){c=t.Account},function(t){s=t.UiBagPrefab},function(t){a=t.CfgArticleMgr},function(t){u=t.UiBagArticleDetail},function(t){l=t.UiMain},function(t){f=t.SoundBtnClickSetter}],execute:function(){e._RF.push({},"bc39fdQ9r5NWI8Rmbz9qWQu","UiBagUnlocked",void 0);t("UiBagUnlocked",function(){function t(){this.root=void 0,this.items=new Array}var e=t.prototype;return e.init=function(t){this.root=t,this.refresh()},e.refresh=function(){var t=this;this.items.splice(0,this.items.length),this.root.removeAllChildren();for(var e=c.ins.bag.deploy,n=c.ins.bag.unlocked.filter((function(t){return!e.includes(t)})),u=function(){var e=n[l],c=a.data.get(e).quality,u=s.ins.items[c-1],f=new r;t.items.push(f),f.init(i(u)),f.root.active=!0,f.root.setParent(t.root,!1),f.articleId=n[l],f.refresh(),f.root.on(o.EventType.TOUCH_END,(function(){t.onClick_Item(f)}))},l=0;l<n.length;++l)u();f.exe(this.root)},e.onClick_Item=function(t){var e=u.create(l.ins.root);e.articleId=t.articleId,e.name.string=t.name.string,e.refresh(),e.show(),e.btnList.setShowModeAsUnlocked();var o=e.root.getChildByPath("Item"),c=i(t.root);c.scale=new n(1.2,1.2,1.2),c.setParent(o.parent,!1),c.position=o.position,o.destroy();var s=new r;e.item=s,s.init(c),s.name.node.active=!1,s.articleId=t.articleId,s.refresh()},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiBar.ts",["cc"],(function(t){var i,r;return{setters:[function(t){i=t.cclegacy,r=t.Sprite}],execute:function(){i._RF.push({},"40677uLTU1OB6MrZ5CzObX0","UiBar",void 0);t("UiBar",function(){function t(){this.root=void 0,this.bar=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.bar=this.root.getChildByPath("bar").getComponent(r)},i.setProgress=function(t,i){this.bar.fillRange=t/i},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBar2.ts",["cc"],(function(t){var i,n,r,o;return{setters:[function(t){i=t.cclegacy,n=t.Sprite,r=t.Tween,o=t.tween}],execute:function(){i._RF.push({},"b1040QMsU1G9Y39fqBvmc9i","UiBar2",void 0);t("UiBar2",function(){function t(){this.root=void 0,this.bar=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.bar=this.root.getComponent(n)},i.setProgress=function(t){this.bar.fillRange=t},i.anim=function(t,i){r.stopAllByTarget(this.bar),o(this.bar).to(i,{fillRange:t}).start()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBattle.ts",["cc","./UiLevel.ts","./UiLeft.ts","./UiRight.ts"],(function(t){var i,n,e,o;return{setters:[function(t){i=t.cclegacy},function(t){n=t.UiLevel},function(t){e=t.UiLeft},function(t){o=t.UiRight}],execute:function(){var s;i._RF.push({},"801ff4OIxFKV5j7jlLSf9S2","UiBattle",void 0);var r=t("UiBattle",function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t,n.ins=new n,n.ins.init(this.root.getChildByPath("Level")),e.ins.init(this.root.getChildByPath("Left")),o.ins.init(this.root.getChildByPath("Right"))},t}());s=r,r.ins=new s,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBgQuality.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i;return{setters:[function(t){o=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"f715aThuH5GsLdIvSXXoRHx","UiBgQuality",void 0);t("UiBgQuality",function(){function t(){this.root=void 0}var i=t.prototype;return i.init=function(t){this.root=t},i.show=function(t){for(var i,e=this.root.children,n=o(e);!(i=n()).done;){i.value.active=!1}var r=t-1;e.length<=r?console.log("UiBgQuality.show 超出下标"):e[r].active=!0},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBottomTab.ts",["cc","./UiTabHeader.ts","./UiBag2.ts","./UiBattle.ts","./UiShop.ts","./Test1.ts","./Test22.ts"],(function(t){var i,e,o,n,s,a,r;return{setters:[function(t){i=t.cclegacy},function(t){e=t.UiTabHeaderBottom},function(t){o=t.UiBag},function(t){n=t.UiBattle},function(t){s=t.UiShop},function(t){a=t.Test1},function(t){r=t.Test2}],execute:function(){i._RF.push({},"4b50fjxVKVMDqla2SxluNuK","UiBottomTab",void 0),t("UiBottomTabPage",function(){function t(){this.root=void 0,this.thb=new e,this.page=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.initPage(),this.initTabHeader(),this.thb.show("Battle"),n.ins.root.active=!0},i.initPage=function(){this.page=this.root.getChildByPath("Page"),o.create(),o.ins.root.setParent(this.page,!1),o.ins.root.active=!1,n.ins.init(this.root.getChildByPath("Page/Battle")),n.ins.root.active=!1,s.ins.init(this.root.getChildByPath("Page/Shop")),s.ins.root.active=!1,a.ins.init(this.root.getChildByPath("Page/Test001")),a.ins.root.active=!1,r.ins.init(this.root.getChildByPath("Page/Test002")),r.ins.root.active=!1},i.initTabHeader=function(){var t=this,i=this.thb=new e;i.init(this.root.getChildByPath("BottomTabHeader")),i.onSelectChange=function(i){switch(i.root.name){case"Battle":n.ins.root.active=!0,n.ins.root.setSiblingIndex(10);break;case"Bag":o.ins.root.active=!0,o.ins.root.setSiblingIndex(10);break;case"Shop":s.ins.root.active=!0,s.ins.root.setSiblingIndex(10);break;case"Test001":t.hideAllPages(),a.ins.root.active=!0;break;case"Test002":t.hideAllPages(),r.ins.root.active=!0}}},i.hideAllPages=function(){n.ins.root.active=!1,o.ins.root.active=!1,s.ins.root.active=!1,a.ins.root.active=!1,r.ins.root.active=!1},t}()).ins=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBubble.ts",["cc"],(function(t){var i,n,e,o,s,r,h,c;return{setters:[function(t){i=t.cclegacy,n=t.UITransform,e=t.RichText,o=t.Size,s=t.Input,r=t.resources,h=t.Prefab,c=t.instantiate}],execute:function(){i._RF.push({},"95e962qkndIVqcyEfpei1pk","UiBubble",void 0),t("UiBubble",function(){function t(){this.root=void 0,this.bg=void 0,this.txt=void 0,this.bgTrans=void 0,this.txtTrans=void 0,this.hDiff=void 0}t.loadAndCreate=function(i){r.load("Common/Ui/Bubble",h,(function(n,e){var o=new t;o.init(c(e)),null==i||i(o)}))},t.create=function(){var i=new t;return i.init(c(this.pf)),i};var i=t.prototype;return i.init=function(t){this.root=t,this.bg=this.root.getChildByPath("bg"),this.bgTrans=this.bg.getComponent(n),this.txt=this.root.getComponentInChildren(e),this.txtTrans=this.txt.getComponent(n),this.hDiff=this.bgTrans.contentSize.height-this.txtTrans.contentSize.height},i.clickToDestroy=function(){var t=this;this.root.getComponent(n).setContentSize(new o(5e3,5e3)),this.root.on(s.EventType.TOUCH_END,(function(){t.root.destroy()}))},i.setString=function(t){this.txt.string=t,this.refreshSize()},i.refreshSize=function(){var t=this.txtTrans.contentSize.height+this.hDiff,i=this.bgTrans.contentSize.clone();i.height=t,this.bgTrans.contentSize=i},t}()).pf=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiBubbleWithIcon.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,r,n,l,c,a,u,s,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,c=t.Sprite,a=t.RichText,u=t.resources,s=t.Prefab,p=t.instantiate,f=t.Component}],execute:function(){var b,d,h,v,y,g,x,I;n._RF.push({},"65d3ee/8xlEF4GyI1RcU73l","UiBubbleWithIcon",void 0);var m=l.ccclass,w=l.property;t("UiBubbleWithIcon",(b=m("UiBubbleWithIcon"),d=w(c),h=w(a),b(((I=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))||this).root=void 0,e.bg=void 0,o(e,"sp",g,r(e)),o(e,"txt",x,r(e)),e}i(e,t),e.loadAndCreate=function(t){u.load("Common/Ui/BubbleWithIcon",s,(function(i,o){var r=new e;r.init(p(o)),null==t||t(r)}))};var n=e.prototype;return n.init=function(t){this.root=t},n.set_text=function(t,e){void 0===e&&(e=void 0);var i=t;e&&(i=e.reduce((function(t,e){var i="<outline color=#000000 width=5><color=#00ff00>{}</color></outline>".replace("{}",e);return t.replace("{}",i)}),t)),i="<b><outline color=#000000 width=5><color=#ffffff>{}</color></outline></b>".replace("{}",i),this.txt.string=i},e}(f)).pf=void 0,g=e((y=I).prototype,"sp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(y.prototype,"txt",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=y))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/UiDailyCheckin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiPopupBase.ts","./Lang.ts","./UiItemList.ts","./DailyCheckinData.ts","./UiGet.ts","./CfgDailyCheckin.ts","./UiMain.ts","./ItemGet.ts","./Ad.ts"],(function(t){var i,e,a,n,s,l,h,o,c,r,d,m,u,f,C;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,a=t.Input,n=t.Label,s=t.instantiate},function(t){l=t.UiPopupBase},function(t){h=t.Lang},function(t){o=t.UiItemList},function(t){c=t.DailyCheckinData,r=t.DailyCheckinDataPersist},function(t){d=t.UiGet},function(t){m=t.CfgDailyCheckin},function(t){u=t.UiMain},function(t){f=t.ItemGet},function(t){C=t.Ad}],execute:function(){e._RF.push({},"9580c5CL1lHCa/SNungQ/LB","UiDailyCheckin",void 0);t("UiDailyCheckin",function(t){function e(){for(var i,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return(i=t.call.apply(t,[this].concat(a))||this).items=new Array,i.btnGet=void 0,i.btnGetAd=void 0,i.claimedToday=void 0,i}i(e,t),e.create=function(t){var i=s(this.pf),a=new e;return a.init(i),a.root.setParent(t,!1),a};var n=e.prototype;return n.init=function(i){t.prototype.init.call(this,i),this.btnGet=this.root.getChildByPath("BtnList/btnGet"),this.btnGet.on(a.EventType.TOUCH_END,this.onClick_Get,this),this.btnGetAd=this.root.getChildByPath("BtnList/btnGetAd"),this.btnGetAd.active=!1,this.btnGetAd.on(a.EventType.TOUCH_END,this.onClick_GetAd,this),this.claimedToday=this.root.getChildByPath("BtnList/ClaimedToday"),this.claimedToday.active=!1;for(var e=this.root.getChildByPath("List"),n=0;n<e.children.length;++n){var s=new v;s.init(e.children[n]),this.items.push(s),s.title.string=h.get("DailyCheckin_DayX").replace("{1}",(n+1).toString());var l=m.data[n];s.refreshReward(l)}this.refresh()},n.refresh=function(){this.refreshBtn(),this.refreshListClaimState()},n.refreshBtn=function(){this.btnGet.active=!1,this.btnGetAd.active=!1,this.claimedToday.active=!1,c.ins.isTodayCheckin()?this.claimedToday.active=!0:(this.btnGet.active=!0,this.btnGetAd.active=!0)},n.refreshListClaimState=function(){var t=0,i=0;c.ins.isTodayCheckin()?(0==(t=c.ins.count%7)&&(t=7),i=t):(i=(t=c.ins.count%7)+1,this.items[t].setClaimable());for(var e=0;e<t;++e)this.items[e].setClaimed();for(var a=i;a<this.items.length;++a)this.items[a].setNotClaimable()},n.onClick_Get=function(){this.get(1)},n.onClick_GetAd=function(){var t=this;C.ins.rewardShow((function(){t.get(2)}))},n.get=function(t){void 0===t&&(t=1);var i=this.items.find((function(t){return t.claimType==y.Claimable}));if(null!=i){var e=i.rewardData;if(t>1){e=e.slice();for(var a=0;a<e.length;++a)e[a].count*=2}var n=d.create(u.ins.root);n.show(),n.itemList.refresh(e),f.addList(e),c.ins.checkin(),r.save(),this.refresh()}},e}(l));var v=t("UiDailyCheckinItem",function(){function t(){this.rewardData=null,this.claimType=y.None,this.root=void 0,this.title=void 0,this.claimableFlag=void 0,this.claimedFlag=void 0,this.tick=void 0,this.list=new o}var i=t.prototype;return i.init=function(t){this.root=t,this.title=this.root.getChildByPath("Title").getComponent(n),this.claimableFlag=this.root.getChildByPath("ClaimableFlag"),this.claimedFlag=this.root.getChildByPath("ClaimedFlag"),this.tick=this.root.getChildByPath("Tick"),this.tick.active=!1,this.list.init(this.root.getChildByPath("Reward"))},i.refreshReward=function(t){this.rewardData=t,this.list.refresh(t)},i.setClaimed=function(){this.claimType=y.Claimed,this.tick.active=!0,this.claimedFlag.active=!0,this.claimableFlag.active=!1},i.setClaimable=function(){this.claimType=y.Claimable,this.tick.active=!1,this.claimedFlag.active=!1,this.claimableFlag.active=!0},i.setNotClaimable=function(){this.claimType=y.NotClaimable,this.tick.active=!1,this.claimedFlag.active=!1,this.claimableFlag.active=!1},t}()),y=function(t){return t[t.None=0]="None",t[t.Claimed=1]="Claimed",t[t.Claimable=2]="Claimable",t[t.NotClaimable=3]="NotClaimable",t}(y||{});e._RF.pop()}}}));

System.register("chunks:///_virtual/UiDebug.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiTray.ts","./UiFeatureSel.ts","./UiMain2.ts","./TowerMgr.ts","./WaveSettle.ts","./LevelCtrl.ts","./WaveCtrl.ts","./RoleMgr.ts","./RoleGetDamage.ts","./PlayerRole.ts","./Account.ts","./CfgGeneral.ts","./AccountPersist.ts","./CfgArticle.ts","./UiLevel.ts","./GameArg.ts","./UiLoadingScene.ts","./GridTraverse.ts","./GridModeTransition.ts","./EnemyGen.ts","./BagTrayAricleGen.ts","./GameLose.ts","./EffectFactory.ts","./UiStamina.ts","./UiMoney0012.ts","./UiMoney002.ts"],(function(t){var n,e,i,o,r,a,s,l,h,c,u,d,g,v,f,y,p,C,m,T,B,E,b,G,P,U,D,A,I,N,S,x,L,O,H,_;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,i=t.Input,o=t.resources,r=t.Prefab,a=t.instantiate,s=t.find,l=t.EditBox,h=t.Vec3,c=t.sys},function(t){u=t.UiTray},function(t){d=t.UiFeatureSel},function(t){g=t.UiMain},function(t){v=t.TowerMgr},function(t){f=t.WaveSettle},function(t){y=t.LevelCtrl},function(t){p=t.WaveCtrl},function(t){C=t.RoleMgr},function(t){m=t.RoleGetDamage},function(t){T=t.PlayerRole},function(t){B=t.Account},function(t){E=t.CfgGeneral},function(t){b=t.AccountPersist},function(t){G=t.CfgArticleMgr},function(t){P=t.UiLevel},function(t){U=t.GameArg},function(t){D=t.SceneTransition},function(t){A=t.GridTraverse},function(t){I=t.GridModeTransition},function(t){N=t.EnemyGen},function(t){S=t.BagTrayAricleGen},function(t){x=t.GameLose},function(t){L=t.EffectFactory},function(t){O=t.UiStamina},function(t){H=t.UiMoney001},function(t){_=t.UiMoney002}],execute:function(){e._RF.push({},"2a648nxT3dGYq5m5s1mckLD","UiDebug",void 0);var M=t("UiDebug",function(){function t(){this.root=void 0,this.content=void 0,this.GameTrayArticleGen=void 0,this.GameFeatureSel=void 0}return t.loadAndCreateIns=function(){null==t.ins?o.load("Common/Ui/Debug",r,(function(n,e){var i=a(e),o=new t;o.init(i),o.root.setParent(s("Canvas")),t.ins=o,w.load()})):t.ins.root.active=!0},t.destroyIns=function(){this.ins.root.destroy(),this.ins=null},t.prototype.init=function(n){var e=this;this.root=n,this.root.getChildByPath("btnClose").on(i.EventType.TOUCH_END,(function(){e.root.destroy(),t.ins=null})),this.content=this.root.getChildByPath("sv/view/content"),this.GameTrayArticleGen=new k,this.GameTrayArticleGen.init(this.content.getChildByPath("GameTrayArticleGen")),this.GameFeatureSel=new R,this.GameFeatureSel.init(this.content.getChildByPath("GameFeatureSel")),(new F).init(this.content.getChildByPath("GameArticleInfo")),(new W).init(this.content.getChildByPath("GameFlow")),(new J).init(this.content.getChildByPath("BagArticle")),(new j).init(this.content.getChildByPath("Level")),(new q).init(this.content.getChildByPath("EnemyGen")),(new V).init(this.content.getChildByPath("Economic"))},t}());M.ins=null;var w=function(){function t(){}return t.save=function(){var t={},n=M.ins,e={};t.GameTrayArticleGen=e;var i=Array();e.edList=i;for(var o=0;o<n.GameTrayArticleGen.edList.length;++o){var r=n.GameTrayArticleGen.edList[o];i.push(r.string)}var a=JSON.stringify(t);c.localStorage.setItem("UiDebug",a)},t.load=function(){var t=c.localStorage.getItem("UiDebug");if(null!=t&&""!=t){var n=JSON.parse(t),e=M.ins,i=n.GameTrayArticleGen;if(i)for(var o=i.edList,r=0;r<o.length&&r<e.GameTrayArticleGen.edList.length;++r)e.GameTrayArticleGen.edList[r].string=o[r]}},t}(),k=function(){function t(){this.root=void 0,this.edList=new Array}return t.prototype.init=function(t){var n=this;this.root=t;for(var e=1;e<=5;++e){var o,r=null==(o=this.root.getChildByPath("EditBox-00"+e))?void 0:o.getComponent(l);if(null==r)break;this.edList.push(r)}this.root.getChildByPath("btnGen").on(i.EventType.TOUCH_END,(function(){w.save();var t=n.edList[0].string.split(/[, ]/);u.ins.clear();for(var e=0;e<t.length;++e){var i=t[e];u.ins.addArticleById(i)}})),this.root.getChildByPath("btnAdTag").on(i.EventType.TOUCH_END,(function(){S.ins.addAdTag()}))},t}(),R=function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t,this.root.getChildByPath("btnShow").on(i.EventType.TOUCH_END,(function(){var t=d.ins;t.refresh(),t.show(),M.ins.root.destroy(),M.ins=null}))},t}(),F=function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t,this.root.getChildByPath("btnShow").on(i.EventType.TOUCH_END,(function(){for(var t,e="物件信息：\n",i=n(v.ins.data);!(t=i()).done;){var o=t.value;e+=o.article.cfg.id+" Buff: ";for(var r,a=n(o.buff.list);!(r=a()).done;){var s=r.value;null!=s.cfg&&(e+=s.cfg.id+" ")}e+="\n"}console.log(e)}))},t}(),W=function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t;var e=this.root.getChildByPath("btnWin");e.on(i.EventType.TOUCH_END,(function(){M.destroyIns(),y.ins.currentWaveIdx=y.ins.levelData.waves.length,f.exe()})),(e=this.root.getChildByPath("btnLose")).on(i.EventType.TOUCH_END,(function(){M.destroyIns(),x.exe()})),(e=this.root.getChildByPath("btnWinWave")).on(i.EventType.TOUCH_END,(function(){p.ins.idx=p.ins.data.items.length+1,null==p.ins.onComplete||p.ins.onComplete();for(var t,e=n(C.ins.allEnemies);!(t=e()).done;){t.value.life.hp.current=0}M.destroyIns()})),(e=this.root.getChildByPath("btnPlayerRoleGetDamage")).on(i.EventType.TOUCH_END,(function(){m.exe(T.ins.main,50)})),(e=this.root.getChildByPath("btnGridMax")).on(i.EventType.TOUCH_END,(function(){A.exe((function(t){t.unlocked=!0})),I.mode=2,I.toNormal()}))},t}(),J=function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t;var e=this.root.getChildByPath("EditBox").getComponent(l),o=this.root.getChildByPath("btnArticleGet");o.on(i.EventType.TOUCH_END,(function(){for(var t,i=e.string.split(/[, ]/),o=n(i);!(t=o()).done;){var r=t.value;-1==B.ins.bag.unlocked.indexOf(r)&&B.ins.bag.unlocked.push(r)}b.save()})),(o=this.root.getChildByPath("btnArticleGetAll")).on(i.EventType.TOUCH_END,(function(){var t,n=E.ins.BagAllArticleIds;B.ins.bag.unlocked.splice(0,B.ins.bag.unlocked.length),(t=B.ins.bag.unlocked).push.apply(t,n),b.save()})),(o=this.root.getChildByPath("btnArticleDefault")).on(i.EventType.TOUCH_END,(function(){var t,n;B.ins.bag.unlocked.splice(0,B.ins.bag.unlocked.length),(t=B.ins.bag.unlocked).push.apply(t,E.ins.BagInitUnlockedIds),B.ins.bag.deploy.splice(0,B.ins.bag.deploy.length),(n=B.ins.bag.deploy).push.apply(n,E.ins.BagInitDeployedIds),b.save()})),(o=this.root.getChildByPath("btnSetGrade1")).on(i.EventType.TOUCH_END,(function(){var t;B.ins.bag.unlocked.splice(0,B.ins.bag.unlocked.length),(t=B.ins.bag.unlocked).push.apply(t,E.ins.BagInitUnlockedIds);for(var e,i=n(B.ins.bag.deploy);!(e=i()).done;){var o=e.value,r=G.data.get(o).gradeLineId;B.ins.bag.grade.set(r,1)}}))},t}(),j=function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t;var n=this.root.getChildByPath("EditBox").getComponent(l);n.string=B.ins.mainLevel.levelIdx.toString();var e=this.root.getChildByPath("btnSetCurrentLevelIdx");e.on(i.EventType.TOUCH_END,(function(){var t=n.string,e=Number(t);B.ins.mainLevel.levelIdx=e,b.save(),P.ins.setSelLevelIdx(e),P.ins.refresh()}));var o=this.root.getChildByPath("EditBoxLevelId").getComponent(l);(e=this.root.getChildByPath("btnEnter")).on(i.EventType.TOUCH_END,(function(){var t=o.string;U.ins.levelId=t,U.ins.mainIdx=-1,D.exe("Game")}));var r=this.root.getChildByPath("EditBoxWaveIdx").getComponent(l);(e=this.root.getChildByPath("btnSetCurrentWaveIdx")).on(i.EventType.TOUCH_END,(function(){var t=Number(r.string);B.ins.mainLevel.waveIdx=t,b.save(),P.ins.refresh()})),(e=this.root.getChildByPath("btnClearWaveRewardRecord")).on(i.EventType.TOUCH_END,(function(){Number(r.string);B.ins.waveReward.clear(),b.save(),P.ins.refresh()}))},t}(),q=function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t;var n=this.root.getChildByPath("EditBox").getComponent(l);this.root.getChildByPath("btnGen").on(i.EventType.TOUCH_END,(function(){if("HpBarBoss"==N.genOne(n.string).cfg.hpBarId){var t=L.create("BossIncoming");t.setParent(g.ins.root,!1),t.position=h.ZERO}}))},t}(),V=function(){function t(){this.root=void 0}var n=t.prototype;return n.init=function(t){this.root=t,this.initStamina(),this.initMoney001(),this.initMoney002()},n.initStamina=function(){var t=this.root.getChildByPath("Stamina/EditBox").getComponent(l);this.root.getChildByPath("Stamina/btnSet").on(i.EventType.TOUCH_END,(function(){var n=Number(t.string);B.ins.stamina.current=n,O.ins.refresh()}))},n.initMoney001=function(){var t=this.root.getChildByPath("Money001/EditBox").getComponent(l);this.root.getChildByPath("Money001/btnSet").on(i.EventType.TOUCH_END,(function(){var n=Number(t.string);B.ins.money.money001=n,H.ins.refresh(),b.save()}))},n.initMoney002=function(){var t=this.root.getChildByPath("Money002/EditBox").getComponent(l);this.root.getChildByPath("Money002/btnSet").on(i.EventType.TOUCH_END,(function(){var n=Number(t.string);B.ins.money.money002=n,_.ins.refresh(),b.save()}))},t}();e._RF.pop()}}}));

System.register("chunks:///_virtual/UiDialog.ts",["cc","./UiEffect.ts"],(function(t){var i,o,n,e,s;return{setters:[function(t){i=t.cclegacy,o=t.Input,n=t.Label,e=t.instantiate},function(t){s=t.UiEffectScale}],execute:function(){i._RF.push({},"98259xALHpI/4kWs0+P7qgu","UiDialog",void 0),t("UiDialog",function(){function t(){this.root=void 0,this.title=void 0,this.txt=void 0,this.btnOK=void 0,this.btnClose=void 0}t.create=function(i,o){void 0===o&&(o=null);var n=e(this.pf),s=new t;return s.init(n),s.root.setParent(i,!1),s.txt.string=o,s};var i=t.prototype;return i.init=function(t){var i=this;this.root=t,this.btnClose=this.root.getChildByPath("btnClose"),this.btnClose.on(o.EventType.TOUCH_END,(function(){i.root.destroy()})),this.title=this.root.getChildByPath("Title").getComponent(n),this.title.string="",this.txt=this.root.getChildByPath("Text").getComponent(n),this.txt.string="",this.btnOK=this.root.getChildByPath("btnOK"),this.btnOK.on(o.EventType.TOUCH_END,(function(){i.root.destroy()}))},i.show=function(){s.show(this.root)},t}()).pf=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiEffect.ts",["cc"],(function(t){var n,e,c,o;return{setters:[function(t){n=t.cclegacy,e=t.UIOpacity,c=t.tween,o=t.Vec3}],execute:function(){n._RF.push({},"ca63fiP02VMpIW0ra4L+A+p","UiEffect",void 0);t("UiEffectFade",function(){function t(){}return t.fade=function(t,n,o,a,i){void 0===i&&(i=null);var u=t.getComponent(e);null==u&&(u=t.addComponent(e)),o>=0&&(u.opacity=o);var f=c(u).to(n,{opacity:a});null!=i&&f.call((function(){i()})),f.start()},t.fadeOut=function(){},t}()),t("UiEffectScale",function(){function t(){}return t.show=function(t){t.active=!0,t.scale=new o(.6,.6),c(t).to(.2,{scale:new o(1.1,1.1,1.1)}).to(.1,{scale:new o(1,1,1)}).start()},t}()),t("UiEffectPopup",function(){function t(){}return t.show=function(t){t.active=!0,t.scale=new o(.6,.6),c(t).to(.2,{scale:new o(1.1,1.1,1.1)}).to(.1,{scale:new o(1,1,1)}).start();var n=t.getComponent(e);null==n&&(n=t.addComponent(e)),n.opacity=0,c(n).to(.3,{opacity:255}).start()},t.hide=function(t){c(t).to(.2,{scale:new o(1.1,1.1,1.1)}).to(.1,{scale:new o(.6,.6,.6)}).start();var n=t.getComponent(e);null==n&&(n=t.addComponent(e)),c(n).to(.3,{opacity:0}).call((function(){n.opacity=255,t.active=!1})).start()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UiFeature.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./UiBubble.ts","./UiMain2.ts","./BuffString.ts","./PfMgrIconBuff.ts","./NodeSizeFit.ts"],(function(t){var i,e,n,o,r,s,c,h,f,a,u,v,l,d;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,n=t.instantiate,o=t.Sprite,r=t.UITransform,s=t.Label,c=t.Input,h=t.Vec3},function(t){f=t.Player},function(t){a=t.UiBubble},function(t){u=t.UiMain},function(t){v=t.BuffString},function(t){l=t.PfMgrIconBuff},function(t){d=t.NodeSizeFit}],execute:function(){e._RF.push({},"718aa/n/o1IjpO/674hdJez","UiFeature",void 0),t("UiFeature",function(){function t(){this.root=void 0,this.content=void 0,this.items=new Array,this.pfItems=Array()}var e=t.prototype;return e.init=function(t){this.root=t,this.root.active=!0,this.content=this.root.getChildByPath("sv/view/content");for(var i=0;i<this.content.children.length;++i){var e=this.content.children[i];this.pfItems.push(e),e.active=!1}},e.refresh=function(){this.refresh2()},e.refresh2=function(){this.clear();for(var t=new Array,i=f.ins.buff.list,e=function(){var e=i[o].cfg,n=t.find((function(t){return t[0].id==e.id}));null==n?(n=[e,1],t.push(n)):n[1]++},o=0;o<i.length;++o)e();for(var r=0;r<t.length;++r){var s=t[r],c=s[0],h=s[1],a=n(this.pfItems[c.grade-1]);a.setParent(this.content,!1),a.active=!0;var u=new p;u.cfg=c,u.init(a),this.items.push(u),u.refresh(),u.refreshCount(h)}},e.refresh1=function(){this.clear();for(var t=f.ins.buff.list,i=0;i<t.length;++i){var e=t[i],o=e.cfg.grade,r=n(this.pfItems[o-1]);r.setParent(this.content,!1),r.active=!0;var s=new p;s.cfg=e.cfg,s.init(r),this.items.push(s),s.refresh()}},e.clear=function(){for(var t,e=i(this.items);!(t=e()).done;){t.value.root.destroy()}this.items.splice(0,this.items.length)},t}()).ins=void 0;var p=t("UiFeatureItem",function(){function t(){this.cfg=void 0,this.root=void 0,this.icon=void 0,this.count=void 0,this.iconSize=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.icon=t.getChildByPath("Icon").getComponent(o),this.iconSize=this.icon.getComponent(r).contentSize.clone(),this.count=this.root.getChildByPath("Count").getComponentInChildren(s),this.count.node.parent.active=!1,this.root.on(c.EventType.TOUCH_END,this.onClick,this)},i.onClick=function(){var t=this;a.loadAndCreate((function(i){i.clickToDestroy();var e=u.ins.root,n=t.root.getComponent(r).convertToWorldSpaceAR(h.ZERO);e.getComponent(r).convertToNodeSpaceAR(n,n),n.y+=80,i.root.setParent(e,!1),i.root.position=n,i.setString(v.getDescription(t.cfg.id))}))},i.refresh=function(){var t=this.cfg.id,i=l.ins.getIconById(t);this.icon.spriteFrame=i.spriteFrame,d.trimmed(this.icon,this.iconSize)},i.refreshCount=function(t){this.count.node.parent.active=t>1,this.count.string="x "+t},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiFeatureSel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePause.ts","./UiFeatureSelItemList.ts","./UiFeatureSelBtnList.ts","./FrameCall.ts","./SeqScaleShow.ts"],(function(t){var i,e,s,n,o,r,h,a;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,s=t.instantiate},function(t){n=t.GamePause},function(t){o=t.UiFeatureSelItemList},function(t){r=t.UiFeatureSelBtnList},function(t){h=t.FrameCall},function(t){a=t.SeqScaleShow}],execute:function(){e._RF.push({},"a80d6hQDnVJmZJCAh5h6IgK","UiFeatureSel",void 0);var u=t("UiFeatureSel",function(){function t(){this.root=void 0,this.title=void 0,this.list=void 0,this.itemList=new o,this.btnList=new r,this.prompt=void 0}t.create=function(i){var e=new t;return e.init(s(this.pf)),e.root.setParent(i,!1),e};var e=t.prototype;return e.init=function(t){this.root=t,this.title=this.root.getChildByPath("Title"),this.prompt=this.root.getChildByPath("Prompt"),this.btnList.featureSel=this,this.btnList.init(this.root.getChildByPath("BtnList")),this.itemList.featureSel=this,this.itemList.init(this.root.getChildByPath("List"))},e.show=function(){var t=this;this.root.active=!0,n.pause(),h.ins.once((function(){t.showAnim()}),2)},e.showAnim=function(){for(var t,e=new Array,s=i(this.itemList.items);!(t=s()).done;){var n=t.value;e.push(n.root)}e.push(this.btnList.root),e.push(this.prompt),a.exe(e)},e.refresh=function(){this.itemList.refresh(),this.showAnim()},t}());u.pf=void 0,u.ins=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/UiFeatureSelBtnList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePause.ts","./FeatureAcquire.ts","./FeatureExtract.ts","./Ad.ts"],(function(t){var e,i,n,r,o,s,u;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,n=t.Input},function(t){r=t.GamePause},function(t){o=t.FeatureAcquire},function(t){s=t.FeatureExtract},function(t){u=t.Ad}],execute:function(){i._RF.push({},"8c3e0zbNopLj4oIUarurqA+","UiFeatureSelBtnList",void 0);t("UiFeatureSelBtnList",function(){function t(){this.featureSel=null,this.root=void 0,this.btnRefresh=void 0,this.btnGetAll=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.btnRefresh=this.root.getChildByPath("btnRefresh"),this.btnRefresh.on(n.EventType.TOUCH_END,this.onClick_Refresh,this),this.btnGetAll=this.root.getChildByPath("btnGetAll"),this.btnGetAll.on(n.EventType.TOUCH_END,this.onClick_GetAll,this)},i.onClick_Refresh=function(){var t=this;u.ins.rewardShow((function(){t.featureSel.refresh()}))},i.onClick_GetAll=function(){var t=this;u.ins.rewardShow((function(){t.featureSel.root.active=!1;for(var i,n=new Array,u=e(t.featureSel.itemList.items);!(i=u()).done;){var a=i.value.cfgItem.id;n.push(a),s.countLimit(a)}o.exe(n),r.resume()}))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiFeatureSelItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PfMgrIconBuff.ts","./GamePause.ts","./FeatureAcquire.ts","./BuffString.ts","./NodeSizeFit.ts","./UiBgQuality.ts"],(function(t){var e,i,o,n,r,s,c,u,a,h,f,l,g,d,m,v;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,o=t.Sprite,n=t.UITransform,r=t.RichText,s=t.Input,c=t.Button,u=t.Layout,a=t.tween,h=t.Vec3},function(t){f=t.PfMgrIconBuff},function(t){l=t.GamePause},function(t){g=t.FeatureAcquire},function(t){d=t.BuffString},function(t){m=t.NodeSizeFit},function(t){v=t.UiBgQuality}],execute:function(){i._RF.push({},"4efdbtKKTFI/7Tu+WMPgRPt","UiFeatureSelItem",void 0);t("UiFeatureSelItem",function(){function t(){this.grade=1,this.featureSel=null,this.cfgItem=void 0,this.root=void 0,this.icon=void 0,this.iconSize=void 0,this.descr=void 0,this.bg=new v}var i=t.prototype;return i.init=function(t){this.root=t,this.icon=this.root.getChildByPath("Icon/val").getComponent(o),this.iconSize=this.icon.getComponent(n).contentSize.clone(),this.descr=this.root.getChildByPath("Descr").getComponent(r),this.root.on(s.EventType.TOUCH_END,this.onClick,this),this.bg.init(this.root.getChildByPath("bg"))},i.refresh=function(t){this.cfgItem=t,this.refreshIcon(t),this.refreshDescr(t),this.bg.show(t.grade)},i.refreshIcon=function(t){this.icon.node.active=!0;var e=f.ins.getIconById(t.id);this.icon.spriteFrame=e.spriteFrame,m.trimmed(this.icon,this.iconSize)},i.refreshDescr=function(t){var e=d.getDescription(t.id);e="<outline color=black width=4> <b>"+e+"</b> </outline>",this.descr.string=e},i.onClick=function(){var t=this,e=this.root.getComponent(c);0!=e.enabled&&(e.enabled=!1,this.playAnimSel((function(){t.featureSel.root.active=!1,l.resume(),g.exe([t.cfgItem.id])})))},i.playAnimSel=function(t){var i=this;this.featureSel.title.active=!1,this.featureSel.btnList.root.active=!1,this.featureSel.itemList.root.getComponent(u).enabled=!1;for(var o,n=e(this.featureSel.itemList.items);!(o=n()).done;){var r=o.value;r!=this&&(r.root.active=!1)}a(this.root).sequence(a(this.root).to(.2,{scale:new h(1.2,1.2,1.2)}),a(this.root).to(.1,{scale:new h(0,0,0)}),a(this.root).call((function(){null==t||t(),i.featureSel.root.active=!1,l.resume()}))).start()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiFeatureSelItemList.ts",["cc","./UiFeatureSelItem.ts","./FeatureExtract.ts","./SoundBtnClickSetter.ts"],(function(t){var e,i,n,s,o,r,u;return{setters:[function(t){e=t.cclegacy,i=t.Layout,n=t.Button,s=t.instantiate},function(t){o=t.UiFeatureSelItem},function(t){r=t.FeatureExtract},function(t){u=t.SoundBtnClickSetter}],execute:function(){e._RF.push({},"b7787slqgxHdLjxjucQ+vqG","UiFeatureSelItemList",void 0);t("UiFeatureSelItemList",function(){function t(){this.featureSel=null,this.root=void 0,this.items=new Array,this.layout=void 0,this.pfItem=null}var e=t.prototype;return e.init=function(t){this.root=t,this.layout=this.root.getComponent(i),this.pfItem=this.root.getChildByName("Item");var e=new o;e.init(this.pfItem),this.items.push(e)},e.refresh=function(){var t=r.exe();this.setItemCount(t.length);for(var e=0;e<t.length;++e){var i=t[e],s=this.items[e];s.featureSel=this.featureSel,s.refresh(i),s.root.setSiblingIndex(e),s.root.getComponent(n).enabled=!0}this.layout.enabled=!0,this.layout.updateLayout(!0),u.exe(this.root)},e.setItemCount=function(t){for(var e=t-this.items.length,i=0;i<e;++i){var n=s(this.pfItem);n.active=!0,n.setParent(this.root);var r=new o;r.init(n),this.items.push(r)}for(var u=this.items.length+e;u<this.items.length;++u)this.items[u].root.active=!1},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiGet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiPopupBase.ts","./UiItemList.ts","./Sound.ts"],(function(t){var i,n,e,o,s,r,u;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Input,o=t.instantiate},function(t){s=t.UiPopupBase},function(t){r=t.UiItemList},function(t){u=t.Sound}],execute:function(){n._RF.push({},"10903WfUuxPPb0V88O+2hzj","UiGet",void 0);t("UiGet",function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).itemList=new r,i}return i(n,t),n.create=function(t){var i=o(this.pf),e=new n;return e.init(i),e.root.setParent(t,!1),e},n.prototype.init=function(i){var n=this;t.prototype.init.call(this,i),this.itemList.init(this.root.getChildByPath("List")),this.root.on(e.EventType.TOUCH_END,(function(){n.root.destroy()})),u.ins.getReward()},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/UiGuideCover.ts",["cc"],(function(t){var o,i,n,s,e;return{setters:[function(t){o=t.cclegacy,i=t.UITransform,n=t.Vec3,s=t.BlockInputEvents,e=t.tween}],execute:function(){o._RF.push({},"64478rGDZxLvaeZteaS8n3A","UiGuideCover",void 0);t("UiGuideCover",function(){function t(){this.root=void 0,this.rootBlockInput=void 0,this.mask=void 0,this.maskUiTrans=void 0}var o=t.prototype;return o.init=function(t){this.root=t,this.root.getComponent(i).setContentSize(9999,9999),this.root.position=n.ZERO,this.rootBlockInput=this.root.getComponent(s),null==this.rootBlockInput&&(this.rootBlockInput=this.root.addComponent(s)),this.mask=this.root.getChildByPath("Mask"),this.maskUiTrans=this.mask.getComponent(i)},o.showAnim=function(t,o,i){var n=this;void 0===i&&(i=.5),this.rootBlockInput.enabled=!0,e(this.mask).parallel(e(this.mask).to(i,{worldPosition:t}),e(this.maskUiTrans).to(i,{contentSize:o})).call((function(){n.rootBlockInput.enabled=!1})).start()},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/UiHpBar.ts",["cc","./UiBar2.ts"],(function(t){var i,r,n,a;return{setters:[function(t){i=t.cclegacy,r=t.Label,n=t.instantiate},function(t){a=t.UiBar2}],execute:function(){i._RF.push({},"9e29aSILAJDvq1cACfZwiW9","UiHpBar",void 0),t("UiHpBar",function(){function t(){this.role=void 0,this.root=void 0,this.label=void 0,this.bar=new a,this.bar2=null}t.create=function(i){void 0===i&&(i=null),null==i&&(i="HpBar");var r=new t,a=n(this.pf.getChildByPath(i));return r.init(a),r};var i=t.prototype;return i.init=function(t){this.root=t,this.bar.init(this.root.getChildByPath("bar"));var i=this.root.getChildByPath("bar2");i&&(this.bar2=new a,this.bar2.init(i)),this.label=this.root.getComponentInChildren(r)},i.refresh=function(){var t=this.role.life.hp,i=t.current/t.max,r=this.bar.bar.fillRange-i;this.bar.bar.fillRange=i,null!=this.bar2&&(r>.02?this.bar2.anim(i,.8):this.bar2.bar.fillRange=i),null!=this.label&&(this.label.string=t.current+" / "+t.max)},t}()).pf=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiHybridGuide.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiPopupBase.ts","./UiArticleIcon.ts","./MergeDefinition.ts","./ArticleString.ts"],(function(t){var i,e,n,o,r,s,h,a,c,u,f,l;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Label,r=t.instantiate,s=t.sp,h=t.tween},function(t){a=t.UiPopupBase},function(t){c=t.UiArticleIcon,u=t.UiArticleIconBg},function(t){f=t.MergeDefinition},function(t){l=t.ArticleString}],execute:function(){n._RF.push({},"a7869Gw3RJF86Zs16WRGKtg","UiHybridGuide",void 0);t("UiHybridGuide",function(t){function n(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).pfItem=void 0,i}return i(n,t),n.create=function(t){var i=r(this.pf),e=new n;return e.init(i),e.root.setParent(t,!1),e},n.prototype.init=function(i){var n=this;t.prototype.init.call(this,i),this.pfItem=this.root.getChildByPath("sv/view/content/Item"),this.pfItem.active=!1;for(var o=function(){var t=f.ins.orig[a];if(0==t.isHybrid)return 1;var i=new g,o=r(n.pfItem);o.active=!0,o.setParent(n.pfItem.parent,!1),i.init(o),i.item1.refresh(t.id1),i.item2.refresh(t.id2),i.item3.refresh(t.id3);var c=i.root.getComponentsInChildren(s.Skeleton);h(i.root).delay(.01).call((function(){for(var t,i=e(c);!(t=i()).done;){t.value.addAnimation(0,"donghua",!0)}})).start()},a=0;a<f.ins.orig.length;++a)o()},n}(a));var g=t("UiHybridGuideItem",function(){function t(){this.root=null,this.item1=new m,this.item2=new m,this.item3=new m}return t.prototype.init=function(t){this.root=t,this.item1.init(this.root.getChildByPath("Item1")),this.item2.init(this.root.getChildByPath("Item2")),this.item3.init(this.root.getChildByPath("Item3"))},t}()),m=t("UiItem",function(){function t(){this.root=void 0,this.icon=new c,this.bg=new u,this.name=null}var i=t.prototype;return i.init=function(t){this.root=t,this.icon.init(this.root.getChildByPath("Icon")),this.bg.init(this.root.getChildByPath("bg")),this.name=this.root.getChildByPath("Name").getComponent(o),this.name.string=""},i.refresh=function(t){this.icon.refresh(t),this.bg.refresh(t),this.name.string=l.getName(t)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UiItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgItem.ts","./UiItemIcon.ts"],(function(t){var i,e,o,n,r;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,o=t.Label},function(t){n=t.CfgItemMgr},function(t){r=t.UiItemIcon}],execute:function(){e._RF.push({},"0a425yK0e1LV6pPMDi38LmL","UiItem",void 0);t("UiItem",function(){function t(){this.root=void 0,this.bg=void 0,this.icon=void 0,this.count=void 0}var e=t.prototype;return e.init=function(t){this.root=t,this.count=this.root.getChildByPath("Count").getComponent(o),this.icon=new r,this.icon.init(this.root),this.bg=this.root.getChildByPath("bg"),this.refreshBg(1)},e.refreshByItemData=function(t){this.count.string="x"+t.count;var i=t.cfg;null==i&&(i=n.data.get(t.id)),this.icon.refresh(t.id),this.refreshBg(i.quality)},e.refreshBg=function(t){if(null!=this.bg){for(var e,o=i(this.bg.children);!(e=o()).done;){e.value.active=!1}var n=t-1;n<0||n>=this.bg.children.length||(this.bg.children[n].active=!0)}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiItemIcon.ts",["cc","./PfMgr.ts","./NodeSizeFit.ts","./PfMgrIcon.ts","./ItemType.ts"],(function(i){var t,e,n,o,s,c,r;return{setters:[function(i){t=i.cclegacy,e=i.Sprite,n=i.UITransform},function(i){o=i.PfMgrBagArticle},function(i){s=i.NodeSizeFit},function(i){c=i.PfMgrIcon},function(i){r=i.ItemType}],execute:function(){t._RF.push({},"7fa481STq5HR7W/FWR/GiJf","UiItemIcon",void 0);i("UiItemIcon",function(){function i(){this.root=void 0,this.icon=void 0,this.flagmentFlag=void 0,this.iconSize=void 0}var t=i.prototype;return t.init=function(i){var t;this.root=i,this.icon=null==(t=this.root.getChildByPath("Icon"))?void 0:t.getComponent(e),null!=this.icon&&(this.iconSize=this.icon.node.getComponent(n).contentSize.clone()),this.flagmentFlag=this.root.getChildByPath("FragmentFlag"),null!=this.flagmentFlag&&(this.flagmentFlag.active=!1)},t.refresh=function(i){if(null!=this.icon)switch(i){case r.Money001:this.icon.spriteFrame=c.ins.money001.spriteFrame,s.trimmed(this.icon,this.iconSize);break;case r.Money002:this.icon.spriteFrame=c.ins.money002.spriteFrame,s.trimmed(this.icon,this.iconSize);break;case r.Stamina:this.icon.spriteFrame=c.ins.stamina.spriteFrame,s.trimmed(this.icon,this.iconSize);break;default:if(i.startsWith("Fragment")){this.flagmentFlag.active=!0;var t=i.replace("Fragment","")+"_1",n=o.getPf(t).getChildByPath("Main").getComponent(e);null!=n&&(this.icon.node.active=!0,this.icon.spriteFrame=n.spriteFrame,s.trimmed(this.icon,this.iconSize))}}},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/UiItemList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SeqScaleShow.ts","./UiItem.ts"],(function(t){var e,i,o,n,r,s;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,o=t.Widget,n=t.instantiate},function(t){r=t.SeqScaleShow},function(t){s=t.UiItem}],execute:function(){i._RF.push({},"cc7d68gCHJCuaEqXqgbw5bB","UiItemList",void 0);t("UiItemList",function(){function t(){this.root=void 0,this.pfItem=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.pfItem=this.root.getChildByPath("Item"),this.pfItem.active=!1;for(var i,n=this.pfItem.getComponentsInChildren(o),r=e(n);!(i=r()).done;){var s=i.value;s.enabled=!1,s.destroy()}for(var c=this.root.children.length-1;c>0;--c)this.root.children[c].destroy()},i.refresh=function(t){for(var e=0;e<t.length;++e){var i=n(this.pfItem);i.setParent(this.pfItem.parent,!1),i.active=!0;var o=new s;o.init(i),o.refreshByItemData(t[e])}},i.showAnim=function(t){void 0===t&&(t=.2);var e=this.root.children.slice(1);0!=e.length&&r.exe(e,t)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiKeyboard.ts",["cc","./BagView.ts","./PlayerGradeOp.ts","./UiDebug.ts"],(function(n){var e,t,i,o,c,s,u;return{setters:[function(n){e=n.cclegacy,t=n.input,i=n.Input,o=n.KeyCode},function(n){c=n.BagView},function(n){s=n.PlayerGradeOp},function(n){u=n.UiDebug}],execute:function(){e._RF.push({},"69095d10BRKN6HdL7QCdGcc","UiKeyboard",void 0),n("UiKeyboard",function(){function n(){}var e=n.prototype;return e.init=function(){t.on(i.EventType.KEY_DOWN,this.onKeyDown,this),t.on(i.EventType.KEY_UP,this.onKeyUp,this)},e.onKeyDown=function(n){switch(n.keyCode){case o.KEY_A:break;case o.KEY_D:null==u.ins?u.loadAndCreateIns():(u.ins.root.destroy(),u.ins=null);break;case o.KEY_W:case o.KEY_S:}},e.onKeyUp=function(n){switch(n.keyCode){case o.KEY_Q:this.onClick_Q();break;case o.KEY_A:this.onClick_A()}},e.onClick_Q=function(){s.addExp(150)},e.onClick_A=function(){c.enter()},n}()).ins=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/UiKeyboard2.ts",["cc","./UiDebug.ts"],(function(n){var e,t,o,i,s;return{setters:[function(n){e=n.cclegacy,t=n.input,o=n.Input,i=n.KeyCode},function(n){s=n.UiDebug}],execute:function(){e._RF.push({},"71558AlgU5E97vL4y4MJGW1","UiKeyboard",void 0),n("UiKeyboard",function(){function n(){}var e=n.prototype;return e.init=function(){t.on(o.EventType.KEY_DOWN,this.onKeyDown,this),t.on(o.EventType.KEY_UP,this.onKeyUp,this)},e.onKeyDown=function(n){switch(n.keyCode){case i.KEY_D:null==s.ins?s.loadAndCreateIns():(s.ins.root.destroy(),s.ins=null)}},e.onKeyUp=function(n){switch(n.keyCode){case i.KEY_Q:case i.KEY_A:}},n}()).ins=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/UiLeft.ts",["cc"],(function(t){var n,i;return{setters:[function(t){n=t.cclegacy,i=t.Input}],execute:function(){var e;n._RF.push({},"54797/JLEVFe7AMpZM8Gv6u","UiLeft",void 0);var o=t("UiLeft",function(){function t(){this.root=void 0,this.btnRanking=void 0,this.btnInvite=void 0}return t.prototype.init=function(t){this.root=t,this.btnInvite=this.root.getChildByPath("btnInvite"),this.btnRanking=this.root.getChildByPath("btnRanking"),this.btnInvite.on(i.EventType.TOUCH_END,(function(){}))},t}());e=o,o.ins=new e,n._RF.pop()}}}));

System.register("chunks:///_virtual/UiLevel.ts",["cc","./Account.ts","./CfgLevelWaveMgr.ts","./UiLevelThumbnail.ts","./UiLevelBtnList.ts","./UiLevelArrow.ts","./UiWaveReward.ts","./UiLevelInfo.ts"],(function(t){var e,i,n,s,h,r,l,o;return{setters:[function(t){e=t.cclegacy},function(t){i=t.Account},function(t){n=t.CfgLevelWaveMgr},function(t){s=t.UiLevelThumbnail},function(t){h=t.UiLevelBtnList},function(t){r=t.UiLevelArrow},function(t){l=t.UiWaveReward},function(t){o=t.UiLevelInfo}],execute:function(){e._RF.push({},"bd328sYdmtN8Kk6K8PaK7qr","UiLevel",void 0),t("UiLevel",function(){function t(){this.selLevelIdx=0,this.root=void 0,this.info=new o,this.arrow=new r,this.btnList=new h,this.thumbnail=new s,this.waveReward=new l}var e=t.prototype;return e.init=function(t){this.root=t,this.btnList.uiLevel=this,this.btnList.init(this.root.getChildByPath("BtnList")),this.info.uiLevel=this,this.info.init(this.root.getChildByPath("Info")),this.arrow.uiLevel=this,this.arrow.init(this.root.getChildByPath("Arrow")),this.thumbnail.init(this.root.getChildByPath("Thumbnail")),this.waveReward.init(this.root.getChildByPath("WaveReward")),this.setSelLevelIdx(i.ins.mainLevel.levelIdx),this.refresh()},e.setSelLevelIdx=function(t){t>=n.main.length&&(t=n.main.length-1),this.selLevelIdx=t},e.refresh=function(){this.arrow.refresh(),this.info.refresh(),this.btnList.refresh(this.selLevelIdx),this.thumbnail.refresh(this.selLevelIdx),this.waveReward.refresh(this.selLevelIdx)},t}()).ins=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/UiLevelArrow.ts",["cc","./CfgLevelWaveMgr.ts"],(function(t){var e,i,r;return{setters:[function(t){e=t.cclegacy,i=t.Input},function(t){r=t.CfgLevelWaveMgr}],execute:function(){e._RF.push({},"f58110JyRRBD7+DqCEO7wVO","UiLevelArrow",void 0);t("UiLevelArrow",function(){function t(){this.uiLevel=null,this.root=void 0,this.btnArrowLeft=void 0,this.btnArrowRight=void 0}var e=t.prototype;return e.init=function(t){this.root=t,this.btnArrowLeft=this.root.getChildByPath("btnArrowLeft"),this.btnArrowLeft.on(i.EventType.TOUCH_END,this.onClick_btnArrowLeft,this),this.btnArrowRight=this.root.getChildByPath("btnArrowRight"),this.btnArrowRight.on(i.EventType.TOUCH_END,this.onClick_btnArrowRight,this)},e.refresh=function(){var t=r.main;this.btnArrowLeft.active=this.uiLevel.selLevelIdx>1,this.btnArrowRight.active=this.uiLevel.selLevelIdx<t.length-1},e.onClick_btnArrowLeft=function(){0!=this.uiLevel.thumbnail.isMoveCompleted&&(this.uiLevel.selLevelIdx--,this.uiLevel.refresh())},e.onClick_btnArrowRight=function(){0!=this.uiLevel.thumbnail.isMoveCompleted&&(this.uiLevel.selLevelIdx++,this.uiLevel.refresh())},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiLevelBtnList.ts",["cc","./UiLoadingScene.ts","./GameArg.ts","./CfgLevelWaveMgr.ts","./UiLevel.ts","./Account.ts","./UiStamina.ts","./UiStaminaBuy.ts","./UiMain.ts","./UiToast.ts","./Lang.ts","./DailyLimit.ts","./Ad.ts","./UiWin.ts","./ItemDraw.ts","./ItemGet.ts","./Sound.ts","./UiMoney0012.ts","./UiMoney002.ts"],(function(t){var i,n,e,o,s,r,a,c,h,l,f,d,u,v,g,y,m,L,U,S,T,p,C,b;return{setters:[function(t){i=t.cclegacy,n=t.Label,e=t.Input,o=t.Tween,s=t.tween,r=t.Vec3},function(t){a=t.SceneTransition},function(t){c=t.GameArg},function(t){h=t.CfgLevelWaveMgr},function(t){l=t.UiLevel},function(t){f=t.Account},function(t){d=t.UiStamina},function(t){u=t.UiStaminaBuy},function(t){v=t.UiMain},function(t){g=t.UiToast},function(t){y=t.Lang},function(t){m=t.DailyLimit},function(t){L=t.Ad},function(t){U=t.UiWin},function(t){S=t.ItemDraw},function(t){T=t.ItemGet},function(t){p=t.Sound},function(t){C=t.UiMoney001},function(t){b=t.UiMoney002}],execute:function(){i._RF.push({},"a690c8A9JFI+Iv+nt51SptG","UiLevelBtnList",void 0);t("UiLevelBtnList",function(){function t(){this.uiLevel=void 0,this.root=void 0,this.btnStart=new G,this.lock=void 0,this.lockTxt=void 0,this.btnGrinding=new w}var i=t.prototype;return i.init=function(t){this.root=t,this.btnStart.init(this.root.getChildByPath("btnStart")),this.btnStart.refresh(),this.lock=this.root.getChildByPath("Lock"),this.lockTxt=this.lock.getComponentInChildren(n),this.btnGrinding.init(this.root.getChildByPath("btnGrinding"))},i.refresh=function(t){if(t<f.ins.mainLevel.levelIdx)this.btnStart.root.active=!0,this.lock.active=!1,this.btnGrinding.root.active=!0,this.btnGrinding.refresh();else if(t==f.ins.mainLevel.levelIdx)this.btnStart.root.active=!0,this.lock.active=!1,this.btnGrinding.root.active=!1;else{this.btnStart.root.active=!1,this.lock.active=!0;var i="通过章节{1}后解锁";i=i.replace("{1}",t.toString()),this.lockTxt.string=i,this.btnGrinding.root.active=!1}},t}());var G=t("UiBtnStart",function(){function t(){this.root=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.root.on(e.EventType.TOUCH_END,this.onClick,this),this.refresh()},i.refresh=function(){this.animScale()},i.animScale=function(){o.stopAllByTarget(this.root);s(this.root).sequence(s(this.root).to(.5,{scale:new r(1.1,1.1,1.1)}),s(this.root).to(.5,{scale:r.ONE}),s(this.root).delay(.5)).repeatForever().start()},i.onClick=function(){var t=f.ins.stamina,i=t.current-5;if(i<0)return u.create(v.ins.root).show(),void g.show(v.ins.root,y.get("Home_SiaminaNotEnough"));t.current=i,d.ins.refresh();var n=l.ins,e=h.main[n.selLevelIdx];c.ins.levelId=e.id,c.ins.mainIdx=n.selLevelIdx,a.exe("Game")},t}()),w=t("UiBtnGrinding",function(){function t(){this.root=void 0,this.leftToday=void 0,this.adFlag=void 0,this.dailyLimit=new m("DailyLimit_Grinding",5)}var i=t.prototype;return i.init=function(t){this.dailyLimit.load(),this.root=t,this.leftToday=this.root.getChildByPath("LeftToday").getComponent(n),this.adFlag=this.root.getChildByPath("AdFlag"),this.refresh(),this.root.on(e.EventType.TOUCH_END,this.onClick,this)},i.refresh=function(){if(this.leftToday.node.active=!1,this.adFlag.active=!1,this.dailyLimit.current<=0)this.adFlag.active=!0;else{this.leftToday.node.active=!0;var t=y.get("Home_LeftToday").replace("{1}",this.dailyLimit.current.toString());this.leftToday.string=t}},i.onClick=function(){var t=this;if(this.dailyLimit.current>0)return this.dailyLimit.decrement(),this.dailyLimit.save(),this.refresh(),void this.rewardGet();L.ins.rewardShow((function(){t.rewardGet()}),(function(){}),(function(){}))},i.rewardGet=function(){var t=l.ins.selLevelIdx.toString(),i=U.create(v.ins.root);i.show();var n="Level_"+t+"_Win",o=S.exe(n);i.itemList.refresh(o),i.itemList.showAnim(.1),T.addList(o),i.btnOK.off(e.EventType.TOUCH_END),i.btnOK.on(e.EventType.TOUCH_END,(function(){p.ins.btnClick(),i.root.destroy()})),i.btnShare.off(e.EventType.TOUCH_END),C.ins.refresh(),b.ins.refresh()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiLevelInfo.ts",["cc","./Account.ts","./CfgLevelWaveMgr.ts","./LevelString.ts"],(function(e){var t,i,n,s,l;return{setters:[function(e){t=e.cclegacy,i=e.Label},function(e){n=e.Account},function(e){s=e.CfgLevelWaveMgr},function(e){l=e.LevelString}],execute:function(){t._RF.push({},"59ecc3urYpBpKyFYEXwqKTM","UiLevelInfo",void 0);e("UiLevelInfo",function(){function e(){this.uiLevel=null,this.root=void 0,this.levelName=void 0,this.best=void 0}var t=e.prototype;return t.init=function(e){this.root=e,this.levelName=this.root.getChildByPath("LevelName").getComponent(i),this.best=this.root.getChildByPath("Best").getComponent(i)},t.refresh=function(){this.refreshLevelName(),this.refreshBest()},t.refreshLevelName=function(){var e=s.main,t=this.uiLevel.selLevelIdx,i=e[t],n=l.getName(i.id);n=t.toString()+"."+n,this.levelName.string=n},t.refreshBest=function(){var e=this.uiLevel.selLevelIdx;if(this.best.node.active=!0,e<n.ins.mainLevel.levelIdx)this.best.string="已通关";else if(e==n.ins.mainLevel.levelIdx){var t=s.main[e],i="最高记录：{1}/{2}";i=(i=i.replace("{1}",n.ins.mainLevel.waveIdx.toString())).replace("{2}",(t.waves.length-1).toString()),this.best.string=i}else this.best.node.active=!1},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/UiLevelThumbnail.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PfLevelThumbnail.ts","./Account.ts","./CfgLevelGeneralMgr.ts"],(function(e){var t,i,o,n,r,l,s,u,a,c;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,o=e.instantiate,n=e.Vec3,r=e.Sprite,l=e.Color,s=e.tween},function(e){u=e.PfLevelThumbnail},function(e){a=e.Account},function(e){c=e.CfgLevelGeneralMgr}],execute:function(){i._RF.push({},"ce6b022j29Pp7rBCWMBcyPS","UiLevelThumbnail",void 0);e("UiLevelThumbnail",function(){function e(){this.isMoveCompleted=!1,this.idx=-1,this.root=void 0,this.current=null}var i=e.prototype;return i.init=function(e){this.root=e},i.refresh=function(e){if(this.idx!=e){if(-1==this.idx)this.root.removeAllChildren(),this.current=this.create(e),this.isMoveCompleted=!0;else if(this.idx<e){this.isMoveCompleted=!1;var t=this.create(e);this.move(t,!0)}else{this.isMoveCompleted=!1;var i=this.create(e);this.move(i,!1)}this.idx=e}},i.create=function(e){var i=c.data.get(e.toString());if(null!=i){var s=i.mapId,v=u.ins.root.getChildByPath(s);if(null!=v){var h=o(v);h.setParent(this.root,!1),h.position=n.ZERO;var f=h.getComponentsInChildren(r);if(e<a.ins.mainLevel.levelIdx)for(var d,p=t(f);!(d=p()).done;){d.value.color=l.WHITE}else if(e==a.ins.mainLevel.levelIdx)for(var m,C=t(f);!(m=C()).done;){m.value.color=l.WHITE}else for(var x,g=t(f);!(x=g()).done;){x.value.color=l.GRAY}return h}}},i.move=function(e,t){var i=this;if(null!=this.current||null!=e){var o=1200,r=new n,l=new n;t?(r.x=-o,l.x=o):(r.x=o,l.x=-o);var u=this.current;null!=u&&s(u).to(.3,{position:r}).call((function(){i.isMoveCompleted=!0,u.destroy(),u=null})).start(),this.current=e,null!=e&&(e.position=l,s(e).to(.3,{position:n.ZERO}).call((function(){i.current=e,i.isMoveCompleted=!0})).start())}else this.isMoveCompleted=!0},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiListItemGenMgr.ts",["cc"],(function(t){var i,s;return{setters:[function(t){i=t.cclegacy,s=t.instantiate}],execute:function(){i._RF.push({},"b8731O5YsJCfrj/Yp/53b3O","UiListItemGenMgr",void 0);t("UiListItemGenMgr",function(){function t(){this.root=void 0,this.pf=void 0,this.list=new Array}var i=t.prototype;return i.init=function(t){this.root=t,this.pf=this.root.children[0],this.list.push(this.pf)},i.setItemCount=function(t){for(var i=t-this.list.length,e=0;e<i;++e){var n=s(this.pf);n.setParent(this.pf.parent),n.active=!0,this.list.push(n)}for(var r=this.list.length+i;r<this.list.length;++r)this.list[r].active=!1},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiLoadingScene.ts",["cc","./GameArg.ts","./LevelLoad.ts","./CfgLevelGeneralMgr.ts"],(function(t){var e,o,n,i,a,r,c,s,l,d;return{setters:[function(t){e=t.cclegacy,o=t.UIOpacity,n=t.director,i=t.tween,a=t.Tween,r=t.resources,c=t.Prefab},function(t){s=t.GameArg},function(t){l=t.LevelLoad},function(t){d=t.CfgLevelGeneralMgr}],execute:function(){var u;e._RF.push({},"51f81CQ3W5KT61EM/k5q8uW","UiLoadingScene",void 0);var p=t("UiLoadingScene",function(){function t(){this.root=void 0,this.opa=void 0,this.loading=void 0}var e=t.prototype;return e.init=function(t){this.root=t,this.root.active=!1,this.loading=this.root.getChildByPath("Loading"),this.opa=this.root.getComponent(o),this.opa.opacity=0,n.addPersistRootNode(this.root)},e.fadeIn=function(t){var e=this;void 0===t&&(t=null),this.loading.active=!1,this.root.active=!0,this.opa.opacity=0,i(this.opa).to(.2,{opacity:255}).call((function(){null==t||t(),i(e.loading).delay(.3).call((function(){e.loading.active=!0})).start()})).start()},e.fadeOut=function(){var t=this;i(this.opa).to(.2,{opacity:0}).call((function(){t.root.active=!1,a.stopAllByTarget(t.loading),t.loading.active=!1})).start()},t}());u=p,p.ins=new u;var f=t("SceneTransition",function(){function t(){}return t.exe=function(t){var e=this;this.sceneName=t,this.preloadComplete=!1,p.ins.fadeIn((function(){e.startCheck()})),n.preloadScene(t,(function(o){"Game"!=t?e.preloadComplete=!0:e.loadGameLevel()}))},t.startCheck=function(){var t=this,e=i(p.ins.root).sequence(i(p.ins.root).delay(.01),i(p.ins.root).call((function(){1==t.preloadComplete&&(e.stop(),n.loadScene(t.sceneName,(function(){p.ins.fadeOut()})))}))).repeatForever().start()},t.loadGameLevel=function(){var t=this,e=s.ins.mainIdx.toString(),o="Game/Level/"+d.data.get(e).mapId;r.load(o,c,(function(e,o){null==e?(l.pfMap=o,t.preloadComplete=!0):console.error("没有配置关卡地图")}))},t}());f.sceneName=null,f.preloadComplete=!1,e._RF.pop()}}}));

System.register("chunks:///_virtual/UiLose.ts",["cc","./UiLoadingScene.ts","./UiItemList.ts"],(function(t){var i,n,e,o,s,r,c;return{setters:[function(t){i=t.cclegacy,n=t.Input,e=t.resources,o=t.Prefab,s=t.instantiate},function(t){r=t.SceneTransition},function(t){c=t.UiItemList}],execute:function(){i._RF.push({},"1ec0cdb7glEeL9p1tZrkUUT","UiLose",void 0),t("UiLose",function(){function t(){this.root=void 0,this.itemList=new c}t.loadPf=function(){var t=this;null==this.pf&&e.load("Game/Ui/Settle/Lose",o,(function(i,n){t.pf=n}))},t.create=function(i){var n=s(this.pf),e=new t;return e.init(n),e.root.setParent(i,!1),e};var i=t.prototype;return i.init=function(t){this.root=t,this.root.getChildByPath("BtnList/btnOK").on(n.EventType.TOUCH_END,this.onClick_btnOK,this),this.root.getChildByPath("BtnList/btnShare").on(n.EventType.TOUCH_END,this.onClick_btnShare,this),this.itemList.init(this.root.getChildByPath("Reward"))},i.show=function(){this.root.active=!0},i.onClick_btnOK=function(){r.exe("Home")},i.onClick_btnShare=function(){},t}()).pf=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiMain.ts",["cc","./UiTop.ts","./SoundBtnClickSetter.ts","./UiBottomTab.ts"],(function(t){var n,i,o,e,s;return{setters:[function(t){n=t.cclegacy,i=t.find},function(t){o=t.UiTop},function(t){e=t.SoundBtnClickSetter},function(t){s=t.UiBottomTabPage}],execute:function(){var c;n._RF.push({},"12acenqnqBEuLq6FtRndKtn","UiMain",void 0);var r=t("UiMain",function(){function t(){this.root=void 0}return t.prototype.init=function(){this.root=i("Canvas"),s.ins=new s,s.ins.init(this.root),o.ins=new o,o.ins.init(this.root.getChildByPath("Top")),e.exe(this.root)},t}());c=r,r.ins=new c,n._RF.pop()}}}));

System.register("chunks:///_virtual/UiMain2.ts",["cc","./UiTop2.ts","./UiPlayerGrade.ts","./UiFeature.ts","./UiFeatureSel.ts","./SoundBtnClickSetter.ts"],(function(t){var i,n,e,o,r,s,a;return{setters:[function(t){i=t.cclegacy,n=t.find},function(t){e=t.UiTop},function(t){o=t.UiPlayerGrade},function(t){r=t.UiFeature},function(t){s=t.UiFeatureSel},function(t){a=t.SoundBtnClickSetter}],execute:function(){i._RF.push({},"92f069qqMFJSYdo9X+cR9zl","UiMain",void 0),t("UiMain",function(){function t(){this.root=void 0}return t.prototype.init=function(){this.root=n("Canvas"),s.ins=s.create(t.ins.root),s.ins.root.active=!1,(new e).init(this.root.getChildByPath("Ui/Top")),o.ins=new o,o.ins.init(n("Canvas/Ui/Bottom/Grade")),o.ins.refresh(),r.ins=new r,r.ins.init(n("Canvas/Ui/Bottom/Feature")),r.ins.refresh(),a.exe(this.root)},t}()).ins=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiMoney001.ts",["cc","./Player.ts"],(function(t){var i,n,o;return{setters:[function(t){i=t.cclegacy,n=t.Label},function(t){o=t.Player}],execute:function(){i._RF.push({},"6455bNwhclOspVQaPh2RHPy","UiMoney001",void 0),t("UiMoney001",function(){function t(){this.root=void 0,this.icon=void 0,this.val=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.val=this.root.getChildByPath("val").getComponent(n),this.val.string="",this.icon=this.root.getChildByPath("Icon"),this.refresh()},i.refresh=function(){this.val.string=o.ins.money001.toString()},t}()).ins=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiMoney0012.ts",["cc","./Account.ts","./UiBottomTab.ts","./UiShop.ts"],(function(t){var o,n,i,e,r,s,c;return{setters:[function(t){o=t.cclegacy,n=t.Label,i=t.Input,e=t.ScrollView},function(t){r=t.Account},function(t){s=t.UiBottomTabPage},function(t){c=t.UiShop}],execute:function(){o._RF.push({},"a7bc8mimOlIRq6HcdNwRB3t","UiMoney001",void 0),t("UiMoney001",function(){function t(){this.root=void 0,this.val=void 0}var o=t.prototype;return o.init=function(t){this.root=t,this.val=this.root.getChildByPath("val").getComponent(n),this.val.string="0",this.refresh(),this.root.on(i.EventType.TOUCH_END,this.onClick,this)},o.refresh=function(){var t=r.ins;this.val.string=t.money.money001.toString()},o.onClick=function(){s.ins.thb.items.find((function(t){return"Shop"==t.root.name})).root.emit(i.EventType.TOUCH_END),c.ins.root.getComponentInChildren(e).scrollToBottom()},t}()).ins=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/UiMoney002.ts",["cc","./Account.ts","./UiBottomTab.ts","./UiShop.ts"],(function(t){var o,n,i,e,s,r,c;return{setters:[function(t){o=t.cclegacy,n=t.Label,i=t.Input,e=t.ScrollView},function(t){s=t.Account},function(t){r=t.UiBottomTabPage},function(t){c=t.UiShop}],execute:function(){o._RF.push({},"08ea3KN7llJEaRyY7Vqmv8S","UiMoney002",void 0),t("UiMoney002",function(){function t(){this.root=void 0,this.icon=void 0,this.val=void 0}var o=t.prototype;return o.init=function(t){this.root=t,this.val=this.root.getChildByPath("val").getComponent(n),this.val.string="",this.icon=this.root.getChildByPath("Icon"),this.root.on(i.EventType.TOUCH_END,this.onClick,this),this.refresh()},o.refresh=function(){this.val.string=s.ins.money.money002.toString()},o.onClick=function(){r.ins.thb.items.find((function(t){return"Shop"==t.root.name})).root.emit(i.EventType.TOUCH_END),c.ins.root.getComponentInChildren(e).scrollToTop()},t}()).ins=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/UiMoreGames.ts",["cc","./OsJudge.ts"],(function(t){var i,e,n,o,s,r,a,h,c,d;return{setters:[function(t){i=t.cclegacy,e=t.Vec3,n=t.Input,o=t.UITransform,s=t.instantiate,r=t.Sprite,a=t.Label,h=t.resources,c=t.Prefab},function(t){d=t.OsJudge}],execute:function(){i._RF.push({},"3ee2bLpKAhDK55ZwSKDf20s","UiMoreGames",void 0);t("UiMoreGames",function(){function t(){this.root=void 0,this.btnClose=void 0,this.items=new Array,this.icons=void 0,this.pfItem=void 0,this.closeHandler=null,this.onClickItem=null}t.createRes=function(i,e){h.load(i,c,(function(i,n){var o=s(n),r=new t;r.init(o),e(r)}))};var i=t.prototype;return i.init=function(t){var i=this;this.root=t,this.root.position=e.ZERO,this.closeHandler=function(){i.root.destroy()},this.btnClose=this.root.getChildByPath("btnClose"),this.btnClose.on(n.EventType.TOUCH_END,(function(){i.closeHandler()}),this);var s=this.root.getChildByPath("mask");s.getComponent(o).setContentSize(2e3,2e3),s.on(n.EventType.TOUCH_END,(function(){i.closeHandler()}),this),this.icons=this.root.getChildByPath("Icons"),this.icons.active=!1,this.initItems()},i.initItems=function(){for(var t=this.root.getChildByPath("Items").children,i=t.length-1;i>0;--i)t[i].destroy();this.pfItem=t[0],this.pfItem.active=!1},i.refresh=function(t){this.clear();for(var i=0;i<t.items.length;++i){var e=t.items[i];t.thisAppId!=e.appId&&this.addItem(e)}},i.clear=function(){for(var t=0;t<this.items.length;++t)this.items[t].root.destroy();this.items.splice(0,this.items.length)},i.addItem=function(t){var i=this,e=this.pfItem.parent,o=s(this.pfItem);o.active=!0,o.setParent(e);var a=new m;this.items.push(a),a.init(o),a.name.string=t.name;var h=this.icons.children.find((function(i){return i.name==t.iconId})).getComponent(r);a.icon.spriteFrame=h.spriteFrame,o.on(n.EventType.TOUCH_END,(function(){i.navigateToMiniProgram(t.appId),null!=i.onClickItem&&i.onClickItem()}))},i.navigateToMiniProgram=function(t){0!=d.isWx()&&wx.navigateToMiniProgram({appId:t,path:"",extraData:null,envVersion:"",success:function(t){console.log("跳转成功")}})},t}());var m=t("UiMoreGamesItem",function(){function t(){this.root=void 0,this.icon=void 0,this.name=void 0}return t.prototype.init=function(t){this.root=t,this.icon=this.root.getChildByPath("Icon/val").getComponent(r),this.name=this.root.getChildByPath("Name").getComponent(a)},t}()),p=(t("UiMoreGamesCfg",function(){function t(){this.thisAppId=void 0,this.items=new Array}return t.create=function(i){var e=new t,n=new p;return e.items.push(n),n.appId="wx1eead536288187e6",n.iconId="BlockBlast",n.name="方块爆破",n=new p,e.items.push(n),n.appId="wxdaca7b7b61c07cd6",n.iconId="Snake",n.name="拖尾乱斗",e.thisAppId="wx1eead536288187e6",e.thisAppId=i,e},t}()),t("UiMoreGamesCfgItem",(function(){this.appId=void 0,this.iconId=void 0,this.name=void 0})));i._RF.pop()}}}));

System.register("chunks:///_virtual/UiPause.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GamePause.ts","./UiLoadingScene.ts","./SoundBtnClickSetter.ts","./UiSettings.ts","./UiMain2.ts","./UiFeature.ts"],(function(t){var e,n,i,o,r,s,u,a,c,f,h,l;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,i=t.Input,o=t.instantiate,r=t.resources,s=t.Prefab},function(t){u=t.GamePause},function(t){a=t.SceneTransition},function(t){c=t.SoundBtnClickSetter},function(t){f=t.UiSettings},function(t){h=t.UiMain},function(t){l=t.UiFeature}],execute:function(){n._RF.push({},"73425oVk1BOp5JBlwUOi8rp","UiPause",void 0),t("UiPause",function(){function t(){this.root=void 0}t.loadAndCreate=function(e,n){var i=this;r.load("Game/Ui/Pause",s,(function(r,s){i.pf=s;var u=o(i.pf),a=new t;a.init(u),a.root.setParent(e,!1),n(a)}))};var n=t.prototype;return n.init=function(t){var e=this;this.root=t,this.root.getChildByPath("BtnList/btnHome").on(i.EventType.TOUCH_END,(function(){a.exe("Home")})),this.root.getChildByPath("BtnList/btnContinue").on(i.EventType.TOUCH_END,(function(){u.resume(),e.root.destroy()})),this.root.getChildByPath("BtnList/btnSettings").on(i.EventType.TOUCH_END,(function(){f.create(h.ins.root).show()})),c.exe(this.root)},n.refresh=function(){for(var t,n=this.root.getChildByPath("Feature/sv/view/content"),i=e(l.ins.items);!(t=i()).done;){var r=t.value;o(r.root).setParent(n)}},t}()).pf=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/UiPlayerGrade.ts",["cc","./Player.ts","./CfgUpgrade.ts","./UiBar.ts"],(function(t){var i,r,e,a,n;return{setters:[function(t){i=t.cclegacy,r=t.Label},function(t){e=t.Player},function(t){a=t.CfgUpgrade},function(t){n=t.UiBar}],execute:function(){i._RF.push({},"ef6cdhGHi5FU6pxi3fLuMzY","UiPlayerGrade",void 0),t("UiPlayerGrade",function(){function t(){this.root=void 0,this.val=void 0,this.bar=new n}var i=t.prototype;return i.init=function(t){this.root=t,this.val=this.root.getChildByPath("val").getComponent(r),this.bar.init(this.root.getChildByPath("Bar"))},i.refresh=function(){var t=e.ins.grade;this.val.string="Lv."+t.grade;var i=a.data[t.grade];this.bar.setProgress(t.exp,i)},t}()).ins=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiPopupBase.ts",["cc","./UiEffect.ts","./SoundBtnClickSetter.ts"],(function(t){var o,n,i,e,s,r,c,u;return{setters:[function(t){o=t.cclegacy,n=t.Input,i=t.BlockInputEvents,e=t.UITransform,s=t.Sprite,r=t.instantiate},function(t){c=t.UiEffectPopup},function(t){u=t.SoundBtnClickSetter}],execute:function(){o._RF.push({},"66e5fzFWo5JQ4COV3WmF28W","UiPopupBase",void 0),t("UiPopupBase",function(){function t(){this.root=void 0,this.btnClose=void 0,this.cover=void 0}t.create=function(o){var n=r(this.pf),i=new t;return i.init(n),i.root.setParent(o,!1),i};var o=t.prototype;return o.init=function(t){this.root=t,u.exe(this.root),this.initBtnClose(),this.initCover()},o.initBtnClose=function(){var t,o=this;this.btnClose=this.root.getChildByPath("btnClose"),null==(t=this.btnClose)||t.on(n.EventType.TOUCH_END,(function(){o.root.destroy()}))},o.initCover=function(){var t=this.root.getChildByPath("Cover");if(null!=t){null==t.getComponent(i)&&t.addComponent(i),t.getComponent(e).setContentSize(9999,9999);var o=t.getComponent(s),n=o.color.clone();n.a=150,o.color=n,this.cover=o}},o.show=function(){c.show(this.root)},t}()).pf=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/UiRight.ts",["cc","./UiSettings.ts","./UiMain.ts","./UiDailyCheckin.ts"],(function(t){var i,n,e,o,s;return{setters:[function(t){i=t.cclegacy,n=t.Input},function(t){e=t.UiSettings},function(t){o=t.UiMain},function(t){s=t.UiDailyCheckin}],execute:function(){var h;i._RF.push({},"97d4f5GK7VBr5r0EHHs9ZmY","UiRight",void 0);var c=t("UiRight",function(){function t(){this.root=void 0,this.btnDailyCheckin=void 0,this.btnSettings=void 0}return t.prototype.init=function(t){this.root=t,this.btnDailyCheckin=this.root.getChildByPath("btnDailyCheckin"),this.btnSettings=this.root.getChildByPath("btnSettings"),this.btnSettings.on(n.EventType.TOUCH_END,(function(){e.create(o.ins.root).show()})),this.btnDailyCheckin.on(n.EventType.TOUCH_END,(function(){s.create(o.ins.root).show()}))},t}());h=c,c.ins=new h,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiSettings.ts",["cc","./UiSwitch.ts","./AudioSettingsPersist.ts","./Music2.ts","./Sound.ts","./SoundBtnClickSetter.ts","./UiEffect.ts"],(function(t){var i,n,o,e,s,c,u,r,f,h;return{setters:[function(t){i=t.cclegacy,n=t.Input,o=t.director,e=t.instantiate},function(t){s=t.UiSwitch},function(t){c=t.AudioSettingsPersist},function(t){u=t.Music},function(t){r=t.Sound},function(t){f=t.SoundBtnClickSetter},function(t){h=t.UiEffectPopup}],execute:function(){i._RF.push({},"466f8K7BSJFCKIMFm9nEX6N","UiSettings",void 0),t("UiSettings",function(){function t(){this.root=void 0}t.create=function(i){var n=e(this.pf),o=new t;return o.init(n),o.root.setParent(i,!1),o};var i=t.prototype;return i.init=function(t){var i=this;this.root=t,f.exe(this.root);var o=this.root.getChildByPath("btnClose");null==o||o.on(n.EventType.TOUCH_END,(function(){i.root.destroy()})),this.initVibrate(),this.initAudio()},i.show=function(){h.show(this.root)},i.initVibrate=function(){},i.initAudio=function(){var t=new s;t.init(this.root.getChildByPath("Sound/Switch")),t.isOn=r.ins.enabled,t.root.on(n.EventType.TOUCH_END,(function(){r.ins.enabled=t.isOn,c.save(),r.ins.btnClick()}));var i=new s;i.init(this.root.getChildByPath("Music/Switch")),i.isOn=u.ins.enabled,i.root.on(n.EventType.TOUCH_END,(function(){u.ins.enabled=i.isOn,c.save(),r.ins.btnClick(),0!=i.isOn&&("Home"==o.getScene().name||u.ins.home())}))},t}()).pf=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiShop.ts",["cc","./UiShopDaily.ts","./UiShopMoney001.ts"],(function(t){var i,n,o,e;return{setters:[function(t){i=t.cclegacy,n=t.Mask},function(t){o=t.UiShopDaily},function(t){e=t.UiShopMoney001}],execute:function(){var h;i._RF.push({},"f82a35HMz1M35OEimYIqJsd","UiShop",void 0);var a=t("UiShop",function(){function t(){this.root=void 0,this.sv=void 0}return t.prototype.init=function(t){this.root=t;var i=this.root.getChildByPath("sv").getChildByPath("view");i.getComponent(n).enabled=!0;var h=i.getChildByPath("content");(new o).init(h.getChildByPath("Daily")),(new e).init(h.getChildByPath("Money001"))},t}());h=a,a.ins=new h,i._RF.pop()}}}));

System.register("chunks:///_virtual/UiShopDaily.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiListItemGenMgr.ts","./DateTimeMgr.ts","./StringUtil.ts","./CfgShop.ts","./Lang.ts","./Shuffle.ts","./UiShopItem.ts","./UiToast.ts","./UiMain.ts","./DateTimeUtil.ts","./DailyLimit.ts","./Ad.ts"],(function(t){var i,e,n,o,s,r,a,h,f,l,d,u,c,v,g,p,y,D,m;return{setters:[function(t){i=t.createForOfIteratorHelperLoose,e=t.inheritsLoose},function(t){n=t.cclegacy,o=t.tween,s=t.Input,r=t.Label,a=t.sys},function(t){h=t.UiListItemGenMgr},function(t){f=t.DateTimeMgr},function(t){l=t.StringUtil},function(t){d=t.CfgShop},function(t){u=t.Lang},function(t){c=t.Shuffle},function(t){v=t.UiShopItem},function(t){g=t.UiToast},function(t){p=t.UiMain},function(t){y=t.DateTimeUtil},function(t){D=t.DailyLimit},function(t){m=t.Ad}],execute:function(){n._RF.push({},"ff982OHD0VI/rHoVZwgLpem","UiShopDaily",void 0);t("UiShopDaily",function(){function t(){this.data=new w,this.root=void 0,this.countdown=void 0,this.items=new Array,this.btnRefresh=null}var e=t.prototype;return e.init=function(t){this.root=t,(new L).init(this.root.getChildByPath("Refresh/Countdown")),this.btnRefresh=new T,this.btnRefresh.init(this.root.getChildByPath("Refresh/btnRefresh")),this.btnRefresh.shopDaily=this;var i=this.root.getChildByPath("List"),e=new h;e.init(i),e.setItemCount(8);for(var n=0;n<d.daliyFixed.length;++n){var o=new v;this.items.push(o),o.init(e.list[n])}for(var s=d.daliyFixed.length;s<8;++s){var r=new S;this.items.push(r),r.init(e.list[s]),r.shopDaily=this}this.data.load(),this.refreshFixed(),this.refreshRnd(),this.startCheckReset()},e.startCheckReset=function(){var t=this;o(this.root).sequence(o(this.root).delay(2),o(this.root).call((function(){if(1==t.data.checkGen()){for(var e,n=i(t.items);!(e=n()).done;){var o;null==(o=e.value.adDl)||o.load()}t.refreshFixed(),t.refreshRnd(),t.btnRefresh.dl.load(),t.btnRefresh.refreshLeft()}}))).repeatForever().start()},e.refreshFixed=function(){for(var t=d.daliyFixed,i=0;i<t.length;++i){var e=this.items[i];e.cfg=t[i],e.refresh()}},e.refreshRnd=function(){for(var t=this.data.data,i=0;i<t.length;++i){var e=t[i].id,n=d.data.get(e),o=d.daliyFixed.length+i;if(o>=this.items.length)break;var s=this.items[o];s.cfg=n,s.refresh()}},t}());var S=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).shopDaily=null,i}e(i,t);var n=i.prototype;return n.init=function(i){var e=this;t.prototype.init.call(this,i),this.root.off(s.EventType.TOUCH_END),this.root.on(s.EventType.TOUCH_END,(function(){e.onClick()})),this.onGetItems=function(){e.onGetItems_()}},n.refresh=function(){var i=this;t.prototype.refresh.call(this),this.soldOut.active=!1,this.shopDaily.data.data.find((function(t){return t.id==i.cfg.id})).left<=0&&this.setSoldOut()},n.onClick=function(){var i=this;this.shopDaily.data.data.find((function(t){return t.id==i.cfg.id})).left<=0?g.show(p.ins.root,u.get("Shop_SoldOut"),1):t.prototype.onClick.call(this)},n.setSoldOut=function(){this.cost.root.active=!1,this.costAd.active=!1,this.soldOut.active=!0},n.onGetItems_=function(){var t=this,i=this.shopDaily.data.data.find((function(i){return i.id==t.cfg.id}));i.left--,i.left<=0&&this.setSoldOut(),this.shopDaily.data.save()},i}(v),w=function(){function t(){this.data=new Array,this.dt=null}var i=t.prototype;return i.checkGen=function(){var t=f.ins.getNowDateTime();return 0==y.dateEquals(this.dt,t)&&(this.gen(),!0)},i.load=function(){var t=a.localStorage.getItem("ShopDaliy");if(null!=t&&""!=t){var i=JSON.parse(t);this.dt=new Date(i.Date);var e=f.ins.getNowDateTime();if(0!=y.dateEquals(this.dt,e))for(var n=i.Rnd,o=0;o<n.length;++o){var s=n[o],r=new R,h=s.Id;if(null==d.data.get(h))return void this.gen();this.data.push(r),r.id=h,r.left=Number(s.Left)}else this.gen()}else this.gen()},i.gen=function(){this.data.splice(0,this.data.length);for(var t=C.exe(8-d.daliyFixed.length),i=0;i<t.length;++i){var e=t[i],n=new R;n.id=e.id,n.left=1,this.data.push(n)}this.save()},i.save=function(){var t={};this.dt=f.ins.getNowDateTime(),t.Date=y.toDateString(this.dt);var i=[];t.Rnd=i;for(var e=0;e<this.data.length;++e){var n=this.data[e],o={};i.push(o),o.Id=n.id,o.Left=n.left}var s=JSON.stringify(t);a.localStorage.setItem("ShopDaliy",s)},t}(),R=function(){this.id=void 0,this.left=void 0},C=function(){function t(){}return t.exe=function(t){var i=d.daliy.slice();return c.shuffleArray(i),i.slice(0,t)},t}(),L=t("UiShopDailyCountdown",function(){function t(){this.root=void 0,this.val=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.val=this.root.getChildByPath("val").getComponent(r),this.refresh(),this.startAutoRefresh()},i.refresh=function(){var t=f.ins.getNowDateTime(),i=86400-(60*t.getMinutes()+60*t.getHours()*60+t.getSeconds());this.val.string=this.secondToString(i)},i.secondToString=function(t){var i=Math.floor(t/3600),e=t%3600,n=Math.floor(e/60);return e%=60,l.fillZero(i,2)+":"+l.fillZero(n,2)+":"+l.fillZero(e,2)},i.startAutoRefresh=function(){var t=this;o(this.root).sequence(o(this.root).delay(1),o(this.root).call((function(){t.refresh()}))).repeatForever().start()},t}()),T=t("UiShopDailyBtnRefresh",function(){function t(){this.shopDaily=void 0,this.root=void 0,this.left=void 0,this.dl=new D("DailyLimit_ShopDailyBtnRefresh",20)}var i=t.prototype;return i.init=function(t){this.root=t,this.root.on(s.EventType.TOUCH_END,this.onClick,this),this.left=this.root.getChildByPath("Left").getComponent(r),this.dl.load(),this.refreshLeft()},i.refreshLeft=function(){var t=u.get("Home_LeftToday").replace("{1}",this.dl.current.toString());this.left.string=t},i.onClick=function(){var t=this;if(this.dl.current<=0){var i=u.get("Home_NotEnoughForToday");g.show(p.ins.root,i)}else{m.ins.rewardShow((function(){t.dl.decrement(),t.dl.save(),t.refreshLeft(),t.shopDaily.data.gen(),t.shopDaily.refreshRnd()}),(function(){}),(function(){}))}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UiShopItem.ts",["cc","./UiItemIcon.ts","./Lang.ts","./UiGet.ts","./UiMain.ts","./ItemSub.ts","./ItemGet.ts","./Ad.ts","./UiBgQuality.ts","./CfgItem.ts","./DailyLimit.ts","./UiToast.ts"],(function(t){var i,s,o,n,e,h,c,r,a,u,d,f,l,g;return{setters:[function(t){i=t.cclegacy,s=t.Input,o=t.Label},function(t){n=t.UiItemIcon},function(t){e=t.Lang},function(t){h=t.UiGet},function(t){c=t.UiMain},function(t){r=t.ItemSub},function(t){a=t.ItemGet},function(t){u=t.Ad},function(t){d=t.UiBgQuality},function(t){f=t.CfgItemMgr},function(t){l=t.DailyLimit},function(t){g=t.UiToast}],execute:function(){i._RF.push({},"b276dDIIPtM+5Ni8aW8ke24","UiShopItem",void 0);t("UiShopItem",function(){function t(){this.cfg=null,this.onGetItems=null,this.root=void 0,this.icon=void 0,this.count=void 0,this.bg=void 0,this.name=void 0,this.cost=void 0,this.costAd=void 0,this.costAdLabel=void 0,this.soldOut=void 0,this.adDl=null}var i=t.prototype;return i.init=function(t){this.root=t,this.root.on(s.EventType.TOUCH_END,this.onClick,this),this.name=this.root.getChildByPath("Name").getComponent(o),this.icon=new n,this.icon.init(this.root.getChildByPath("Icon")),this.count=this.root.getChildByPath("Count").getComponent(o);var i=this.root.getChildByPath("Icon/bg");null!=i&&(this.bg=new d,this.bg.init(i)),this.cost=new m,this.cost.init(this.root.getChildByPath("Cost")),this.costAd=this.root.getChildByPath("CostAd"),this.costAd.active=!1,this.costAdLabel=this.costAd.getChildByPath("val").getComponent(o),this.soldOut=this.root.getChildByPath("SoldOut"),this.soldOut&&(this.soldOut.active=!1)},i.refresh=function(){this.refreshGeneral(),this.refreshCost()},i.refreshGeneral=function(){if(this.name.string=e.get(this.cfg.nameLangId),this.icon.refresh(this.cfg.target.id),this.count.string="x"+this.cfg.target.count,null!=this.bg){var t=f.data.get(this.cfg.target.id);null!=t&&this.bg.show(t.quality)}},i.refreshCost=function(){var t=null!=this.cfg.adDaliyLimitId;if(this.cost.root.active=!t,this.costAd.active=t,t){if(null==this.adDl){var i="DailyLimit_"+this.cfg.adDaliyLimitId;this.adDl=new l(i,this.cfg.adDaliyLimitTotal),this.adDl.load()}this.refreshAdLeft()}else this.cost.refresh(this.cfg.cost)},i.refreshAdLeft=function(){var t=e.get("Shop_Free")+"("+this.adDl.current+")";this.costAdLabel.string=t},i.onClick=function(){this.cfg.adDaliyLimitId?this.ad():0!=r.exe([this.cfg.cost])&&this.getItems()},i.ad=function(){var t=this;if(this.adDl.current<=0)g.show(c.ins.root,e.get("AdLeftNotEnough"));else{u.ins.rewardShow((function(){t.getItems(),t.adDl.decrement(),t.adDl.save(),t.refreshAdLeft()}),(function(){}),(function(){}))}},i.getItems=function(){var t,i=h.create(c.ins.root);i.itemList.refresh([this.cfg.target]),i.itemList.showAnim(),a.addList([this.cfg.target]),null==(t=this.onGetItems)||t.call(this)},t}());var m=t("UiCost",function(){function t(){this.root=void 0,this.icon=void 0,this.count=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.icon=new n,this.icon.init(this.root),this.count=this.root.getChildByPath("Count").getComponent(o)},i.refresh=function(t){this.icon.refresh(t.id),this.count.string=t.count.toString()},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiShopMoney001.ts",["cc","./UiListItemGenMgr.ts","./CfgShop.ts","./UiShopItem.ts"],(function(t){var n,i,o,e,r,c,s;return{setters:[function(t){n=t.cclegacy,i=t.instantiate,o=t.Vec3,e=t.randomRangeInt},function(t){r=t.UiListItemGenMgr},function(t){c=t.CfgShop},function(t){s=t.UiShopItem}],execute:function(){n._RF.push({},"ee18325uzFA04ixzz5A/aHI","UiShopMoney001",void 0);t("UiShopMoney001",function(){function t(){this.root=void 0}var n=t.prototype;return n.init=function(t){this.root=t;var n=c.money001,i=new r;i.init(this.root.getChildByPath("List")),i.setItemCount(n.length);for(var o=[3,10,45],e=0;e<n.length;++e){var h=new s;h.init(i.list[e]);var a=n[e];h.cfg=a,h.refresh(),this.rndIcon(h.icon.root.children[0],o[e])}},n.rndIcon=function(t,n){for(var r=0;r<n;++r){var c=i(t);c.setParent(t.parent,!1),c.position=new o(e(-80,80),e(-80,80))}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UiStamina.ts",["cc","./Account.ts","./StaminaRecovery.ts","./StringUtil.ts","./UiStaminaBuy.ts","./UiMain.ts"],(function(t){var n,i,o,e,s,r,a,c,u;return{setters:[function(t){n=t.cclegacy,i=t.Label,o=t.Input,e=t.tween},function(t){s=t.Account},function(t){r=t.StaminaRecovery},function(t){a=t.StringUtil},function(t){c=t.UiStaminaBuy},function(t){u=t.UiMain}],execute:function(){n._RF.push({},"29d227SAdFLfKZEmCL3JbSf","UiStamina",void 0),t("UiStamina",function(){function t(){this.root=void 0,this.val=void 0,this.countdown=void 0}var n=t.prototype;return n.init=function(t){this.root=t,this.val=this.root.getChildByPath("val").getComponent(i),this.val.string="0",this.countdown=this.root.getChildByPath("Countdown").getComponent(i),this.countdown.string="0",this.refresh(),this.autoRefreshStart(),this.root.on(o.EventType.TOUCH_END,this.onClick,this)},n.onClick=function(){c.create(u.ins.root).show()},n.autoRefreshStart=function(){var t=this;e(this.root).sequence(e(this.root).call((function(){t.refresh()})),e(this.root).delay(1)).repeatForever().start()},n.refresh=function(){var t=s.ins,n=t.stamina.current+"/"+t.stamina.max;this.val.string=n,this.refreshCountdown()},n.refreshCountdown=function(){var t=s.ins.stamina;if(t.current>=t.max)this.countdown.node.active=!1;else{r.ins.exe(),this.countdown.node.active=!0;var n=r.ins.countdown,i=Math.floor(n/60),o=n%60,e=a.fillZero(i,2)+":"+a.fillZero(o,2);this.countdown.string=e}},t}()).ins=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/UiStaminaBuy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Ad.ts","./UiDialog.ts","./UiMain.ts","./UiStamina.ts","./Account.ts","./UiToast.ts","./UiMoney002.ts","./Lang.ts","./UiPopupBase.ts","./DailyLimit.ts","./UiGet.ts","./ItemData.ts","./ItemType.ts"],(function(t){var i,n,e,o,s,r,a,c,h,m,u,y,f,l,d,p,L,g;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Input,o=t.Label,s=t.instantiate},function(t){r=t.Ad},function(t){a=t.UiDialog},function(t){c=t.UiMain},function(t){h=t.UiStamina},function(t){m=t.Account},function(t){u=t.UiToast},function(t){y=t.UiMoney002},function(t){f=t.Lang},function(t){l=t.UiPopupBase},function(t){d=t.DailyLimit},function(t){p=t.UiGet},function(t){L=t.ItemData},function(t){g=t.ItemType}],execute:function(){n._RF.push({},"70c04RXsPJEO5693tynSm6V","UiStaminaBuy",void 0);t("UiStaminaBuy",function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).itemAd=new v,i.itemMoney002=new v,i}i(n,t),n.create=function(t){var i=s(this.pf),e=new n;return e.init(i),e.root.setParent(t,!1),e};var o=n.prototype;return o.init=function(i){t.prototype.init.call(this,i),this.itemAd.dailyLimit=new d("DailyLimit_StaminaBuy_Ad",5),this.itemAd.init(this.root.getChildByPath("List/Ad")),this.itemAd.root.on(e.EventType.TOUCH_END,this.onClick_Ad,this),this.itemMoney002.dailyLimit=new d("DailyLimit_Money002_Ad",5),this.itemMoney002.init(this.root.getChildByPath("List/Money002")),this.itemMoney002.root.on(e.EventType.TOUCH_END,this.onClick_Money002,this)},o.onClick_Ad=function(){var t=this;if(this.itemAd.dailyLimit.current<=0)u.show(c.ins.root,f.get("Home_NotEnoughForToday"),1.5);else{r.ins.rewardShow((function(){m.ins.stamina.current+=10,h.ins.refresh();var i=p.create(c.ins.root);i.show(),i.itemList.refresh([new L(g.Stamina,10)]),i.root.on(e.EventType.TOUCH_END,(function(){var t=f.get("Home_SiaminaAdd").replace("{1}","10");u.show(c.ins.root,t,1.5)})),t.itemAd.dailyLimit.decrement(),t.itemAd.dailyLimit.save(),t.itemAd.refresh()}),(function(){a.create(c.ins.root,"要看完广告才能领取奖励呢~").show()}),(function(t){a.create(c.ins.root,"广告播放错误："+t).show()}))}},o.onClick_Money002=function(){if(this.itemMoney002.dailyLimit.current<=0)u.show(c.ins.root,f.get("Home_NotEnoughForToday"),1.5);else{var t=m.ins.money.money002;if((t-=100)<0)u.show(c.ins.root,f.get("Home_Money002NotEnough"),1.5);else{m.ins.money.money002=t,y.ins.refresh();var i=p.create(c.ins.root);i.show(),i.itemList.refresh([new L(g.Stamina,10)]),i.root.on(e.EventType.TOUCH_END,(function(){var t=f.get("Home_SiaminaAdd").replace("{1}","10");u.show(c.ins.root,t,1.5)})),m.ins.stamina.current+=10,h.ins.refresh(),this.itemMoney002.dailyLimit.decrement(),this.itemMoney002.dailyLimit.save(),this.itemMoney002.refresh()}}},n}(l));var v=t("UiStaminaBuyItem",function(){function t(){this.root=void 0,this.left=void 0,this.dailyLimit=null}var i=t.prototype;return i.init=function(t){this.root=t,this.left=this.root.getChildByPath("Left").getComponent(o),this.dailyLimit.load(),this.refresh()},i.refresh=function(){this.refreshLeft(this.dailyLimit.current)},i.refreshLeft=function(t){var i=f.get("Home_LeftToday").replace("{1}",t.toString());this.left.string=i},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UiStats.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Stats.ts","./ArticleString.ts","./UiArticleIcon.ts"],(function(t){var i,e,o,s,n,r,a,h,c,f,u,l,v,g,m;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,o=t.Input,s=t.Vec3,n=t.tween,r=t.Tween,a=t.instantiate,h=t.Label,c=t.Sprite,f=t.resources,u=t.Prefab},function(t){l=t.Stats},function(t){v=t.ArticleString},function(t){g=t.UiArticleIcon,m=t.UiArticleIconBg}],execute:function(){e._RF.push({},"ae30b/l6oJDuadrCazceflf","UiStats",void 0);t("UiStateBtn",function(){function t(){this.root=void 0,this.stats=null}var i=t.prototype;return i.init=function(t){this.root=t,this.root.on(o.EventType.TOUCH_END,this.onClick,this)},i.onClick=function(){var t=this;if(null!=this.stats){var i=!this.stats.root.active;this.stats.root.active=i,1==i?this.stats.autoRefreshStart():this.stats.autoRefreshStop()}else p.loadAndCreate((function(i){t.stats=i,t.stats.root.setParent(t.root,!1),t.stats.root.position=new s(20,-370),t.stats.autoRefreshStart()}))},t}());var p=t("UiStats",function(){function t(){this.root=void 0,this.pfItem=void 0,this.items=new Array}t.loadAndCreate=function(i){f.load("Game/Ui/Stats",u,(function(e,o){var s=a(o),n=new t;n.init(s),i(n)}))};var e=t.prototype;return e.init=function(t){this.root=t,this.pfItem=this.root.getChildByPath("List/Item"),this.pfItem.active=!1},e.autoRefreshStart=function(){var t=this;n(this.root).sequence(n(this.root).call((function(){t.refresh()})),n(this.root).delay(.5)).repeatForever().start()},e.autoRefreshStop=function(){r.stopAllByTarget(this.root)},e.refresh=function(){var t=l.ins.sort();this.setItemCount(t.length);for(var e,o=0,s=i(t);!(e=s()).done;){o+=e.value.damage}for(var n=0;n<t.length&&n<5;++n){var r=t[n],a=this.items[n];a.refresh(r);var h=r.damage/o;a.bar.fillRange=h;var c=Math.floor(1e3*h)/10;a.info.string=c+" %"}},e.setItemCount=function(t){for(var i=t-this.items.length,e=0;e<i;++e){var o=a(this.pfItem);o.setParent(this.pfItem.parent),o.active=!0;var s=new d;s.init(o),this.items.push(s)}for(var n=this.items.length+i;n<this.items.length;++n)this.items[n].root.active=!1},t}()),d=t("UiStatsItem",function(){function t(){this.item=null,this.root=void 0,this.icon=new g,this.iconBg=new m,this.name=void 0,this.info=void 0,this.bar=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.icon.init(this.root.getChildByPath("Icon")),this.iconBg.init(this.root.getChildByPath("Icon/bg")),this.name=this.root.getChildByPath("Name").getComponent(h),this.info=this.root.getChildByPath("Info").getComponent(h),this.bar=this.root.getChildByPath("Bar/bar").getComponent(c),this.bar.fillRange=0},i.refresh=function(t){this.item!=t&&(this.item=t,this.name.string=v.getName(t.id),this.icon.refresh(t.id),this.iconBg.refresh(t.id))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiSwitch.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,o,n;return{setters:[function(t){i=t.createClass},function(t){o=t.cclegacy,n=t.Input}],execute:function(){o._RF.push({},"eabcf84az1GvoxFfgg4kbwR","UiSwitch",void 0);t("UiSwitch",function(){function t(){this.root=void 0,this.on=void 0,this.off=void 0}return t.prototype.init=function(t){var i=this;this.root=t,this.on=this.root.getChildByPath("On"),this.off=this.root.getChildByPath("Off"),this.isOn=!0,this.root.on(n.EventType.TOUCH_END,(function(){i.isOn=!i.isOn}),this)},i(t,[{key:"isOn",get:function(){return this.on.active},set:function(t){this.on.active=t,this.off.active=!t}}]),t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/UiTabHeader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,o,n;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy,o=t.Label,n=t.Input}],execute:function(){e._RF.push({},"625e888/7ZEuZTFEJACb/bG","UiTabHeader",void 0);t("UiTabHeaderBottom",function(){function t(){this.onSelectChange=null,this.root=void 0,this.currentFlag=null,this.header=new r}var e=t.prototype;return e.init=function(t){var i=this;this.root=t,this.currentFlag=this.root.getChildByPath("CurrentFlag"),this.header.init(this.root.getChildByPath("TabHeader"));for(var e=function(){var t=i.header.items[o],e=t.root.name;t.root.off(n.EventType.TOUCH_END),t.root.on(n.EventType.TOUCH_END,(function(){i.show(e)}))},o=0;o<this.header.items.length;++o)e()},e.show=function(t){var i;if((null==(i=this.header.currentItem)?void 0:i.root.name)!=t){this.header.showByName(t);var e=this.header.currentItem,o=this.currentFlag.worldPosition.clone();o.x=e.root.worldPosition.x,this.currentFlag.worldPosition=o,null==this||this.onSelectChange(e)}},i(t,[{key:"items",get:function(){return this.header.items}}]),t}());var r=t("UiTabHeader",function(){function t(){this.currentItem=null,this.root=void 0,this.items=new Array}var i=t.prototype;return i.init=function(t){var i=this;this.root=t;for(var e=this.root.children,o=function(){var t=new s,o=e[r];t.init(o),i.items.push(t);var h=r;t.root.on(n.EventType.TOUCH_END,(function(){i.showByIndex(h)}))},r=0;r<e.length;++r)o()},i.showByName=function(t){var i=this.items.find((function(i){return i.root.name==t}));if(null!=i&&i!=this.currentItem){for(var e=0;e<this.items.length;++e){var o=this.items[e];o!=i&&o.show(!1)}this.currentItem=i,this.currentItem.show(!0)}},i.showByIndex=function(t){for(var i=0;i<this.items.length;++i){this.items[i].show(!1)}this.currentItem=this.items[t],this.currentItem.show(!0)},t}()),s=t("UiTabHeaderItem",function(){function t(){this.root=void 0,this.icon=void 0,this.txt=void 0}var i=t.prototype;return i.init=function(t){this.root=t,this.icon=this.root.getChildByPath("Icon"),this.txt=this.root.getChildByPath("Label").getComponent(o),this.show(!1)},i.show=function(t){var i=this.icon.position.clone();i.y=1==t?30:0,this.icon.position=i},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiTextBox.ts",["cc"],(function(t){var i,o;return{setters:[function(t){i=t.cclegacy,o=t.Label}],execute:function(){i._RF.push({},"f9849qw931OqKUXKhFHKy/H","UiTextBox",void 0);t("UiTextBox",function(){function t(){this.root=void 0,this.label=void 0}return t.prototype.init=function(t){this.root=t,this.label=this.root.getComponentInChildren(o),this.label.string=""},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiToast.ts",["cc"],(function(t){var o,n,i,e,r,s,a,c;return{setters:[function(t){o=t.cclegacy,n=t.Label,i=t.UITransform,e=t.tween,r=t.Vec3,s=t.resources,a=t.Prefab,c=t.instantiate}],execute:function(){o._RF.push({},"4ef5164GxFJX45gWQUvL3+h","UiToast",void 0),t("UiToast",function(){function t(){this.root=void 0,this.txt=void 0}t.loadPf=function(){var t=this;null==this.pf&&s.load("Common/Ui/Toast",a,(function(o,n){t.pf=n}))},t.create=function(o){var n=c(this.pf),i=new t;return i.init(n),i.root.setParent(o,!1),i},t.show=function(t,o,n){void 0===n&&(n=2);var i=this.create(t);return i.txt.string=o,i.show(n),i};var o=t.prototype;return o.init=function(t){this.root=t,this.txt=this.root.getComponentInChildren(n)},o.show=function(t){var o=this;void 0===t&&(t=2),this.txt.updateRenderData(!0);var n=this.txt.getComponent(i).contentSize.width,s=this.root.getComponent(i),a=s.contentSize.clone();a.width<n&&(a.width=n+60,s.setContentSize(a)),e(this.root).by(.5,{position:new r(0,100,0)}).delay(t).call((function(){o.root.destroy()})).start()},t}()).pf=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/UiTop.ts",["cc","./UiMoney0012.ts","./UiStamina.ts","./UiMoney002.ts"],(function(i){var t,n,o,e;return{setters:[function(i){t=i.cclegacy},function(i){n=i.UiMoney001},function(i){o=i.UiStamina},function(i){e=i.UiMoney002}],execute:function(){t._RF.push({},"3ff97jzBLxHSbMhsEs0I0QY","UiTop",void 0),i("UiTop",function(){function i(){this.root=void 0}return i.prototype.init=function(i){this.root=i,n.ins=new n,n.ins.init(this.root.getChildByPath("Money001")),e.ins=new e,e.ins.init(this.root.getChildByPath("Money002")),o.ins=new o,o.ins.init(this.root.getChildByPath("Stamina"))},i}()).ins=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/UiTop2.ts",["cc","./UiMoney001.ts","./UiPause.ts","./UiMain2.ts","./GamePause.ts","./UiWaveInfo.ts","./UiStats.ts","./UiHybridGuide.ts"],(function(t){var i,n,o,e,s,u,r,a,c;return{setters:[function(t){i=t.cclegacy,n=t.Input},function(t){o=t.UiMoney001},function(t){e=t.UiPause},function(t){s=t.UiMain},function(t){u=t.GamePause},function(t){r=t.UiWaveInfo},function(t){a=t.UiStateBtn},function(t){c=t.UiHybridGuide}],execute:function(){i._RF.push({},"dc69cIZNLpGN7geNIsXfvQH","UiTop",void 0);t("UiTop",function(){function t(){this.root=void 0}return t.prototype.init=function(t){this.root=t,o.ins=new o,o.ins.init(this.root.getChildByPath("Money001")),r.ins=new r,r.ins.init(this.root.getChildByPath("WaveInfo")),r.ins.refresh(),this.root.getChildByPath("btnPause").on(n.EventType.TOUCH_END,(function(){u.pause(),e.loadAndCreate(s.ins.root,(function(t){t.refresh()}))})),(new a).init(this.root.getChildByPath("btnStats")),this.root.getChildByPath("btnHybridGuide").on(n.EventType.TOUCH_END,(function(){c.create(s.ins.root).show()}))},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/UiTray.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagArticleGridPlace.ts","./BagArticleFactory.ts"],(function(t){var i,e,r,o,s,n,a;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,r=t.Vec3,o=t.Tween,s=t.tween},function(t){n=t.BagArticleGridPlace},function(t){a=t.BagArticleFactory}],execute:function(){e._RF.push({},"c6e91rAvuJLHLNOXH4Yfu3k","UiTray",void 0),t("UiTray",function(){function t(){this.articles=new Array,this.root=void 0}var e=t.prototype;return e.init=function(t){this.root=t},e.addArticleById=function(t,i){void 0===i&&(i=-1);var e=a.create(t);e.view.root.setParent(this.root,!1),e.view.root.position=r.ZERO,-1==i?this.articles.push(e):this.articles.splice(i,0,e),this.arrange()},e.insertArticle=function(t){n.unbind(t),t.view.root.setParent(this.root,!0),-1==this.articles.indexOf(t)&&this.articles.push(t),this.articles.sort((function(t,i){return t.view.root.worldPosition.x-i.view.root.worldPosition.x})),this.arrange()},e.insertArticleByIndex=function(t,i){n.unbind(t),t.view.root.setParent(this.root,!0);var e=this.articles.indexOf(t);-1!=e&&this.articles.splice(e,1),this.articles.splice(i,0,t),this.arrange()},e.removeAndArrange=function(t){this.remove(t),this.arrange()},e.remove=function(t){var i=this.articles.indexOf(t);-1!=i&&this.articles.splice(i,1)},e.arrange=function(){for(var t,e=0,r=i(this.articles);!(t=r()).done;){e+=t.value.view.size.width}for(var n,a=(e+=20*(this.articles.length-1))/2*-1,c=i(this.articles);!(n=c()).done;){var l=n.value,u=l.view.size.width,h=l.view.root.position.clone();h.x=a+u/2,h.y=0,a+=u+20,o.stopAllByTarget(l.view.root),s(l.view.root).to(.2,{position:h}).start()}},e.clear=function(){for(var t,e=i(this.articles);!(t=e()).done;){t.value.view.root.destroy()}this.articles.splice(0,this.articles.length)},t}()).ins=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/UiWaveInfo.ts",["cc","./LevelCtrl.ts"],(function(t){var e,n,i;return{setters:[function(t){e=t.cclegacy,n=t.Label},function(t){i=t.LevelCtrl}],execute:function(){e._RF.push({},"e90646RCQFGGZRv6cry1tiY","UiWaveInfo",void 0),t("UiWaveInfo",function(){function t(){this.root=void 0,this.txt=void 0}var e=t.prototype;return e.init=function(t){this.root=t,this.txt=this.root.getComponent(n)},e.refresh=function(){var t=i.ins.levelData.waves.length-1,e=i.ins.currentWaveIdx,n="第 {current}/{max} 波";n=(n=n.replace("{current}",e.toString())).replace("{max}",t.toString()),this.txt.string=n},t}()).ins=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/UiWaveReward.ts",["cc","./CfgItemReward.ts","./Account.ts","./Lang.ts","./AccountPersist.ts","./UiGet.ts","./UiMain.ts","./ItemGet.ts","./UiStamina.ts","./UiMoney0012.ts","./UiMoney002.ts","./UiToast.ts"],(function(t){var e,i,a,n,s,r,o,h,l,c,v,d,u,f,g,m,w;return{setters:[function(t){e=t.cclegacy,i=t.instantiate,a=t.Label,n=t.Input,s=t.tween,r=t.Vec3},function(t){o=t.CfgItemRewardMgr},function(t){h=t.Account},function(t){l=t.Lang},function(t){c=t.AccountPersist},function(t){v=t.UiGet},function(t){d=t.UiMain},function(t){u=t.ItemGet},function(t){f=t.UiStamina},function(t){g=t.UiMoney001},function(t){m=t.UiMoney002},function(t){w=t.UiToast}],execute:function(){e._RF.push({},"d26edkFYMJAUL/TUW/XUmp9","UiWaveReward",void 0);t("UiWaveReward",function(){function t(){this.root=void 0,this.items=new Array}var e=t.prototype;return e.init=function(t){this.root=t;for(var e=this.root.getChildByPath("List"),a=e.children[0],n=e.children.length-1;n>0;--n)e.children[n].destroy();var s=new I;this.items.push(s),s.init(a);for(var r=0;r<3;++r){var o=i(a);o.setParent(a.parent,!1);var h=new I;this.items.push(h),h.init(o)}},e.refresh=function(t){for(var e=new Array,i=new Map,a=0;a<20;++a){var n="LevelWave_"+t+"_"+a,s=o.data.get(n);null!=s&&(e.push(s),i.set(s,a))}for(var r=e.length;r<this.items.length;++r)this.items[r].root.active=!1;for(var h=0;h<e.length&&h<this.items.length;++h){var l=e[h],c=i.get(l),v=this.items[h];v.cfg=l,v.root.active=!0,v.levelIdx=t,v.waveIdx=c,v.refresh()}},t}());var I=t("UiWaveRewardItem",function(){function t(){this.levelIdx=0,this.waveIdx=0,this.cfg=null,this.state=0,this.root=void 0,this.waveInfo=void 0,this.claimed=void 0,this.claimable=void 0,this.unclaimable=void 0}var e=t.prototype;return e.init=function(t){this.root=t,this.claimed=this.root.getChildByPath("Claimed"),this.unclaimable=this.root.getChildByPath("Unclaimable"),this.claimable=this.root.getChildByPath("Claimable"),this.initClaimable(),this.waveInfo=this.root.getChildByPath("Wave").getComponent(a),this.waveInfo.string="",this.root.on(n.EventType.TOUCH_END,this.onClick,this)},e.initClaimable=function(){var t=this.claimable.getChildByPath("bg_light");s(t).by(5,{eulerAngles:new r(0,0,-360)}).repeatForever().start();var e=this.claimable.getChildByPath("Icon");s(e).sequence(s(e).to(.3,{eulerAngles:new r(0,0,10)}),s(e).to(.3,{eulerAngles:new r(0,0,-10)}),s(e).to(.3,{eulerAngles:new r(0,0,10)}),s(e).to(.3,{eulerAngles:new r(0,0,-10)}),s(e).to(.3,{eulerAngles:new r(0,0,0)}),s(e).delay(1)).repeatForever().start()},e.refresh=function(){var t=l.get("Home_Battle_WaveReward_WaveInfo").replace("{1}",this.waveIdx.toString());this.waveInfo.string=t,this.state=this.getState(),this.unclaimable.active=this.claimable.active=this.claimed.active=!1,1==this.state?this.claimed.active=!0:2==this.state?this.claimable.active=!0:3==this.state&&(this.unclaimable.active=!0)},e.getState=function(){var t=h.ins.mainLevel.levelIdx,e=h.ins.mainLevel.waveIdx;if(this.levelIdx<t||!(this.levelIdx>t)&&this.waveIdx<=e){var i=h.ins.waveReward.get(this.levelIdx);return null==i?2:1==i.has(this.waveIdx)?1:2}return 3},e.onClick=function(){1!=this.state?3!=this.state?this.get():w.show(d.ins.root,"尚未能领取哦"):w.show(d.ins.root,l.get("Home_Battle_WaveReward_Claimed"))},e.get=function(){var t=v.create(d.ins.root);t.itemList.refresh(this.cfg.list),t.itemList.showAnim(.1),u.addList(this.cfg.list),f.ins.refresh(),g.ins.refresh(),m.ins.refresh();var e=h.ins.waveReward.get(this.levelIdx);null==e&&(e=new Set,h.ins.waveReward.set(this.levelIdx,e)),e.add(this.waveIdx),c.save(),this.refresh()},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UiWin.ts",["cc","./UiLoadingScene.ts","./UiEffect.ts","./UiItemList.ts","./SoundBtnClickSetter.ts"],(function(t){var i,n,e,o,s,h,r,c,u;return{setters:[function(t){i=t.cclegacy,n=t.Input,e=t.resources,o=t.Prefab,s=t.instantiate},function(t){h=t.SceneTransition},function(t){r=t.UiEffectPopup},function(t){c=t.UiItemList},function(t){u=t.SoundBtnClickSetter}],execute:function(){i._RF.push({},"526262Xi6hJcbXcTEQWEyms","UiWin",void 0),t("UiWin",function(){function t(){this.root=void 0,this.btnOK=void 0,this.btnShare=void 0,this.itemList=new c}t.loadPf=function(){var t=this;null==this.pf&&e.load("Game/Ui/Settle/Win",o,(function(i,n){t.pf=n}))},t.create=function(i){var n=s(this.pf),e=new t;return e.init(n),e.root.setParent(i,!1),e};var i=t.prototype;return i.init=function(t){this.root=t,u.exe(this.root),this.btnOK=this.root.getChildByPath("BtnList/btnOK"),this.btnOK.on(n.EventType.TOUCH_END,this.onClick_btnOK,this),this.btnShare=this.root.getChildByPath("BtnList/btnShare"),this.btnShare.on(n.EventType.TOUCH_END,this.onClick_btnShare,this),this.itemList.init(this.root.getChildByPath("Reward"))},i.show=function(){this.root.active=!0,r.show(this.root)},i.onClick_btnOK=function(){h.exe("Home")},i.onClick_btnShare=function(){},t}()).pf=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/Vec2dHelper.ts",["cc"],(function(e){var t,c;return{setters:[function(e){t=e.cclegacy,c=e.math}],execute:function(){t._RF.push({},"d5e3bCMebFMkYLyQN/YqDwA","Vec2dHelper",void 0);e("Vec2dHelper",function(){function e(){}return e.rotate=function(e,t){var n=c.toRadian(t),r=Math.cos(n),u=Math.sin(n);e.x=e.x*r-e.y*u,e.y=e.x*u+e.y*r},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/WaveCtrl.ts",["cc","./EnemyGen.ts","./EffectFactory.ts","./UiMain2.ts"],(function(t){var e,i,n,a,s;return{setters:[function(t){e=t.cclegacy,i=t.Vec3},function(t){n=t.EnemyGen},function(t){a=t.EffectFactory},function(t){s=t.UiMain}],execute:function(){var r;e._RF.push({},"39364ScQetHILnnXrn7A4qO","WaveCtrl",void 0);var c=t("WaveCtrl",function(){function t(){this.onComplete=null,this.data=null,this.idx=null,this.frames=0,this.enable=!1}var e=t.prototype;return e.reset=function(){this.idx=0,this.frames=0,this.enable=!1},e.start=function(){this.reset(),this.enable=!0},e.update=function(){if(0!=this.enable){var t=this.data.items;if(!(this.idx>=t.length)){var e=t[this.idx];if(this.frames>=e.triggerTime){this.idx++;var r,c=n.genOne(e.genRoleId);if(c.life.hp.setCurrentAndMax(c.life.hp.max*e.hpMaxFactor),c.attack.damage=c.attack.damage*e.attackFactor,this.idx>=t.length)null==(r=this.onComplete)||r.call(this);if("HpBarBoss"==c.cfg.hpBarId){var o=a.create("BossIncoming");o.setParent(s.ins.root,!1),o.position=i.ZERO}}this.frames++}}},t}());r=c,c.ins=new r,e._RF.pop()}}}));

System.register("chunks:///_virtual/WaveSettle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiMoney001.ts","./Affix.ts","./TowerMgr.ts","./BagView.ts","./Player.ts","./LevelCtrl.ts","./UiMain2.ts","./MoneyFly.ts","./UiWin.ts","./UiWaveInfo.ts","./GameArg.ts","./Account.ts","./AccountPersist.ts","./GamePause.ts","./BulletMgr.ts","./MergeHybridHint.ts","./BagArticleSpeak.ts","./ItemDraw.ts","./ItemGet.ts"],(function(e){var t,n,i,o,r,a,s,c,l,f,u,v,m,g,d,p,y,w,M,x,A,h,I;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,i=e.UITransform,o=e.Vec3},function(e){r=e.UiMoney001},function(e){a=e.AffixType},function(e){s=e.TowerMgr},function(e){c=e.BagView},function(e){l=e.Player},function(e){f=e.LevelCtrl},function(e){u=e.UiMain},function(e){v=e.MoneyFly},function(e){m=e.UiWin},function(e){g=e.UiWaveInfo},function(e){d=e.GameArg},function(e){p=e.Account},function(e){y=e.AccountPersist},function(e){w=e.GamePause},function(e){M=e.BulletMgr},function(e){x=e.MergeHybridHintMgr},function(e){A=e.BagArticleSpeak},function(e){h=e.ItemDraw},function(e){I=e.ItemGet}],execute:function(){n._RF.push({},"78276OjxoJN+reSJqTJHwxa","WaveSettle",void 0);e("WaveSettle",function(){function e(){}return e.exe=function(){w.pause(),this.bulletClear(),g.ins.refresh(),this.towerBuff(),f.ins.currentWaveIdx>=f.ins.levelData.waves.length?this.levelSettle():(c.enter(),x.ins.exe(),A.clearMemory())},e.bulletClear=function(){for(var e=M.ins.data,t=0;t<e.length;++t){e[t].view.root.destroy()}e.splice(0,e.length)},e.levelSettle=function(){var e=m.create(u.ins.root);e.show();var t="Level_"+d.ins.levelId+"_Win",n=h.exe(t);if(e.itemList.refresh(n),e.itemList.showAnim(),I.addList(n),d.ins.mainIdx>=0){var i=d.ins.mainIdx+1;p.ins.mainLevel.levelIdx=i,p.ins.mainLevel.waveIdx=0,y.save()}},e.towerBuff=function(){for(var e,n=t(s.ins.data);!(e=n()).done;){for(var c,f=e.value,m=0,g=t(f.buff.list);!(c=g()).done;){var d=c.value;switch(d.affix.type){case a.GetMomeyPerWave:m+=d.affix.argN}}if(m>0){l.ins.money001+=m,r.ins.refresh();var p=u.ins.root,y=f.article.view.root.getComponent(i).convertToWorldSpaceAR(o.ZERO);p.getComponent(i).convertToNodeSpaceAR(y,y);var w=r.ins.icon.getComponent(i).convertToWorldSpaceAR(o.ZERO);p.getComponent(i).convertToNodeSpaceAR(w,w),v.money001Fly(p,y,w)}}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/WeightProbability.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"6eb6ddHrVZHsYivtr6Toae5","WeightProbability",void 0);t("WeightProbabilityItem",(function(){this.name=void 0,this.probability=void 0})),t("WeightProbability",function(){function t(){this.weightCount=0,this.data=new Array}var i=t.prototype;return i.init=function(t){this.weightCount=0,this.data.splice(0,this.data.length);for(var i=0;i<t.length;++i){var n=t[i],a={};a.min=this.weightCount,a.max=this.weightCount+n.probability,a.id=n.name,this.data.push(a),this.weightCount+=n.probability}},i.add=function(t,i){var n={};n.min=this.weightCount,n.max=this.weightCount+i,n.id=t,this.data.push(n),this.weightCount+=i},i.get=function(){for(var i=null,n=t.rangeInt(0,this.weightCount-1),a=0;a<this.data.length;++a){var h=this.data[a];h.min<=n&&n<h.max&&(i=h.id)}return i},i.clear=function(){this.data.splice(0,this.data.length),this.weightCount=0},t.rangeInt=function(t,i){return Math.floor(Math.random()*(i+1-t))+t},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/World.ts",["cc","./UiBag2.ts"],(function(t){var n,o,i,e;return{setters:[function(t){n=t.cclegacy,o=t.find,i=t.Input},function(t){e=t.UiBag}],execute:function(){n._RF.push({},"307c03B/mhLupQnxGxI+0Ts","World",void 0),t("World",function(){function t(){this.root=void 0}return t.prototype.init=function(){this.root=o("Canvas/World"),this.root.getChildByPath("Bag").on(i.EventType.TOUCH_END,(function(){e.ins.show()})),this.root.getChildByPath("Shop").on(i.EventType.TOUCH_END,(function(){})),this.root.getChildByPath("Jewel").on(i.EventType.TOUCH_END,(function(){})),this.root.getChildByPath("Farmland").on(i.EventType.TOUCH_END,(function(){}))},t}()).ins=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/WorldNode.ts",["cc"],(function(e){var r,o;return{setters:[function(e){r=e.cclegacy,o=e.find}],execute:function(){var a;r._RF.push({},"35262u+7AZAAq9eTOPoN/IF","WorldNode",void 0);var i=e("WorldNode",(function(){this.root=void 0,this.layer0=void 0,this.layer1=void 0,this.layer2=void 0,this.layer0_Road=void 0,this.layer0_Spawn=void 0}));a=i,i.ins=new a;e("WorldNodeInit",function(){function e(){}return e.exe=function(){var e=i.ins.root=o("Canvas/World"),r=i.ins;r.layer0=o("Layer0",e),r.layer1=o("Layer1",e),r.layer2=o("Layer2",e),r.layer0_Road=r.layer0.getChildByPath("Road"),r.layer0_Spawn=r.layer0.getChildByPath("Spawn")},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/WxHelper.ts",["cc","./OsJudge.ts","./Account.ts"],(function(e){var a,t,h,i;return{setters:[function(e){a=e.cclegacy,t=e.math},function(e){h=e.OsJudge},function(e){i=e.Account}],execute:function(){a._RF.push({},"3050f/P0WVAkJYDMu7R8KQi","WxHelper",void 0);e("WxHelper",function(){function e(){this.s_ShareImage1=new n("UdUAXFVBS3yw7fbDuAvMcQ==","https://mmocgame.qpic.cn/wechatgame/hed25SrAztwkv2L6PYGhFKrRZ2BRk71PhaKB2iaINew54fKlbGqd0746DFlnXCbXR/0"),this.s_ShareImage2=new n("QEB8rJY7TBaS5/cWh0YMcQ==","https://mmocgame.qpic.cn/wechatgame/IUv9yibo7sgJJVbT1asGE5QJiabkkM57opkqRmYjmFynJAWK0AYRgbqcItGT7OE3iam/0"),this.s_ShareImage3=new n("rPaH9z2LRDeDbAXo7Dml0A==","https://mmocgame.qpic.cn/wechatgame/cNhQ7XC07LgmmlVw89ibl5mpEaibuAOIudF2k0mFQZPX9rLKnjH9Ml8hzA880wuV30/0"),this.ShareImages=void 0}e.enableShareMenu=function(){0!=h.isWx()&&wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},e.vibrateShort=function(e){if(0!=h.isWx()){var a="light";1==e?a="light":2==e?a="medium":e>=3&&(a="heavy"),wx.vibrateShort({type:a})}},e.vibrateLong=function(){0!=h.isWx()&&wx.vibrateLong()};var a=e.prototype;return a.initShare=function(){if(0!=h.isWx()){this.ShareImages=[this.s_ShareImage1,this.s_ShareImage2,this.s_ShareImage3],console.log("WxShare 初始化");this.GetRandomParamShare();wx.onShareAppMessage((function(){return{}}))}},a.OpenShare=function(){if(0!=h.isWx()){this.ShareImages=[this.s_ShareImage1,this.s_ShareImage2,this.s_ShareImage3],console.log("WxShare 初始化");this.GetRandomParamShare();wx.ShareAppMessage((function(){return{query:i.ins.accuntInfo.Uid}}))}},a.CheckIsShare=function(){if(0!=h.isWx()){var e=wx.getLaunchOptionsSync();void 0!==e&&Object.keys(e).length>0&&console.log("邀请用户的ID:"+e.query)}},a.GetRandomParamShare=function(){return this.ShareImages[t.randomRangeInt(0,this.ShareImages.length)]},e}());var n=e("ShareImage",(function(e,a){this.ShareImageId=void 0,this.ShareImageUrl=void 0,this.ShareImageId=e,this.ShareImageUrl=a}));a._RF.pop()}}}));

System.register("chunks:///_virtual/ZOrderCtrl.ts",["cc","./RoleMgr.ts","./PlayerRole.ts","./CurrentMax.ts"],(function(t){var i,r,n,e;return{setters:[function(t){i=t.cclegacy},function(t){r=t.RoleMgr},function(t){n=t.PlayerRole},function(t){e=t.CurrentMax}],execute:function(){var s;i._RF.push({},"fb9059MVW5Kbpq0uFV7GAbF","ZOrderCtrl",void 0);var l=t("ZOrderCtrl",function(){function t(){this.interval=new e,this.list=new Array,this.interval.max=2}return t.prototype.update=function(){if(this.interval.current--,!(this.interval.current>0)){this.interval.setCurrentAsMax(),this.list.splice(0,this.list.length);for(var t=r.ins.allEnemies,i=0;i<t.length;++i){var e=t[i];this.list.push(e.view.root)}this.list.push(n.ins.main.view.root),this.list.sort((function(t,i){var r=t.position.y,n=i.position.y;return r<n?1:r>n?-1:0}));for(var s=0;s<this.list.length;++s){this.list[s].setSiblingIndex(s)}}},t}());s=l,l.ins=new s,i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map