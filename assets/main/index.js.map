{"version":3,"sources":["../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Account/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Account/Account.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Account/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Account/AccountPersist.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Ad.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/AdBase.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/AdForegroundSwitch.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/AdGp.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/AdInit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/AdRewardVideoFailHandler.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/AdStartup.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/AdTt.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/AdWx.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Affix.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/Ai001.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/Ai002.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/AiCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/AiSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/String/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/String/ArticleString.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Misc/ArticleUnlockLevel.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/AttackCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/AudioSettingsPersist.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/AuraCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/AuraHint.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/AuraScopeType.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticle.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticleFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticleGradeHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticleGridPlace.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticleGridPlaceByPos.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/BagArticleHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/BagArticleReloaded.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticleSpeak.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/BagGridDraw.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/BagTrayAricleGen.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/BagView.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/BezierCalc.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/BezierMove.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Specific/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Specific/Buff_HpRegenIncreasePercentBelowPercentPerWave.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Specific/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Specific/Buff_RndArticleMergeGradeUpgrade.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Buff.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffIncreaseCalc.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffOp.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffResetMergeGrade.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffString.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/Bullet.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletBounceRect.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletMoveCalc.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletMoveSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletPfMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletViewHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/ButtonInterval.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/CellExpand.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgArticle.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgArticleGrade.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgArticleUnlock.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgBuff.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgBullet.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/CfgDailyCheckin.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgDaySign.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgFarm.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgFeature.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgGameBagTrayAricleGen.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgGeneral.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgGiftGroup.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgInviteConfig.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgItem.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgItemDraw.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgItemReward.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/CfgLevelGeneralMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/CfgLevelWaveMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgLoad.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgMushrom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgRole.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgShape.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/CfgShop.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgTower.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgUpgrade.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/Channel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/Channel/Channel.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/Channel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/Channel/ChannelType.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Collision/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Collision/CollisionBullet.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Collision/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Collision/CollisionHandler.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/SimpleStruct/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/SimpleStruct/CurrentMax.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/DailyCheckinData.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/DailyLimit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/DateTimeMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/DateTimeUtil.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/EffectFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/EffectPfMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/EnemyGen.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/EnemyMovePath.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/Entry.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Entry.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Init/Entry.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/FeatureAcquire.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/FeatureExtract.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/FrameCall.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/FrameSecConvert.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/GameArg.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/GameLose.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/GamePause.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/GameStart.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/GestureArticleInfo.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/GridHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/GridHint.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/GridModeTransition.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/GridTraverse.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/Guide.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/GuideData.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/HitTest.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Init.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/Init.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Init/Init.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/InitTt.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/InitWx.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/ItemData.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/ItemDraw.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/ItemGet.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/ItemSub.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/ItemType.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/Lang.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/LanguageData.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/LevelCtrl.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/LevelLoad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/LevelLoad/LevelLoad.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/LevelString.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/Life.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/ListHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/LoaderBase.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/LoaderRemote.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/LoaderResources.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/LocalizedLabel.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/LocalizedSprite.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeDefinition.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeEffect.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeGrid.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeGridHybrid.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeHint.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeHybridHint.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeTray.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/MoneyFly.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/MoveCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/MoveRole.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Audio/Ver1/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Audio/Ver1/Music.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/Music.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/NodeSizeFit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/NumberRolling.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/OsJudge.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/PathMove.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/PfLevelThumbnail.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfLoad.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrHeroUp.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrIcon.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrIconBuff.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrMoney.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrMushroom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrNumber.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/PfMgrRole.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/PlatformInit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/Player.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/PlayerBuffAffect.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/PlayerGradeOp.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/PlayerInit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/PlayerRole.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/PlaySpeedCtrl.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/Random.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ReplaceModeEnter.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/ResLoad.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/Role.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleAnimSpine.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleAttack.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleAttributeUpdate.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleDie.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/RoleFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleGetDamage.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/RoleMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleMove.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleMoveSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/RoleMoveView.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/ScreenAdaptResolutionPolicy.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/SeqScaleShow.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/Shake.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/Shuffle.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/SkillBase.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/SkillCloseDamage/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/SkillCloseDamage/SkillCloseDamage.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/SkillCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/Sound.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Audio/Ver1/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Audio/Ver1/Sound.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/SoundBtnClickSetter.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/StaminaRecovery.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/Stats.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/StringUtil.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Test.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Test1/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Test1/Test1.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/Test.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Test2/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Test2/Test2.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/TextureOriginalRatioSprite.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/TileShapeDataParser.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/TimeScale.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/Tower.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/TowerAllUpdate.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/TowerAttack.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/TowerAttackTargetSelect.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/TowerAttributeUpdate.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/TowerAuraEmit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/TowerAuraScopeExpand.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/TowerBulletEmit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/TowerFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/TowerMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Sys/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Sys/TowerSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Sys/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Sys/TowerSysBuff.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/TweenHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/TweenHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/TweenSpeed.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/UiArticleDetail.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/UiArticleDetailAttribute.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/UiArticleDetailIcon.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiArticleIcon.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/UiArticleUnlock.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/UiBag.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBag.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/UiBagArticleDetail.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/UiBagArticleDetailBaseAttribute.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/UiBagArticleDetailBtnList.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/UiBagArticleDetailUnlocked.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/UiBagBottom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/UiBagCell.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/UiBagCfg.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagDeploy.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/UiBagExpandOp.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/UiBagGrid.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/UiBagGridBg.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagItem.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagItemLocked.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagLocked.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagPrefab.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagReplace.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/UiBagTouch.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagUnlocked.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/UiBar.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/UiBar2.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiBattle.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiBgQuality.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/UiBottomTab.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiBubble.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiBubbleWithIcon.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/UiDailyCheckin.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiDebug.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiDialog.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/UiEffect.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/Feature/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/Feature/UiFeature.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/UiFeatureSel.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/UiFeatureSelBtnList.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/UiFeatureSelItem.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/UiFeatureSelItemList.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/UiGet.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Guide/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Guide/UiGuideCover.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/UiHpBar.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/UiHybridGuide.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/UiItem.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/UiItemIcon.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/UiItemList.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/Input/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/Input/UiKeyboard.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/UiKeyboard.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLeft.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLevel.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLevelArrow.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLevelBtnList.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLevelInfo.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLevelThumbnail.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/UiListItemGenMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiLoadingScene.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/Settle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/Settle/UiLose.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/UiMain.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiMain.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiMoney001.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/UiMoney001.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/UiMoney002.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/MoreGames/Script/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/MoreGames/Script/UiMoreGames.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/UiPause.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiPlayerGrade.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiPlaySpeed.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiPopupBase.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiRight.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiSettings.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/UiShop.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/UiShopDaily.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/UiShopItem.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/UiShopMoney001.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/UiStamina.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/UiStaminaBuy.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/UiStats.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/UiSwitch.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/UiTabHeader.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/UiTextBox.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiToast.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/UiTop.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiTop.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/UiTray.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiWaveInfo.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiWaveReward.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/Settle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/Settle/UiWin.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/Vec2dHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/WaveCtrl.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/WaveSettle.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/WeightProbability.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/World/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/World/World.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/WorldNode.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Wx/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Wx/WxHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/ZOrderCtrl.ts"],"names":["AccountBag","this","grade","Map","deploy","Array","unlocked","deployCellUnlocked","Set","AccuntLevel","levelIdx","waveIdx","AccountDaySign","DaySign","Received","AccuntInvite","IsInviter","InviterId","InviteCount","Invite_check","Aready_InviteCount","AccuntInfo","Uid","Last_login_time","AccountMoney","money001","money002","Account","money","bag","mainLevel","accuntInfo","accuntInvite","items","stamina","CurrentMax","waveReward","accountdaysign","prototype","init","_this$bag$deploy","_this$bag$unlocked","splice","length","push","apply","CfgGeneral","ins","BagInitDeployedIds","BagInitUnlockedIds","current","max","_RF","pop","AccountPersist","load","str","sys","localStorage","getItem","json","JSON","parse","loadBag","loadMainLevel","loadMoney","loadItem","loadMainLevelWaveReward","j","a","i","t","id","ItemData","count","Number","set","jBag","jGrade","k","reward","_step","jItem","waves","_iterator","_createForOfIteratorHelperLoose","done","n","value","add","save","makeBag","makeMainLevel","makeMoney","makeItem","makeWaveReward","stringify","setItem","_step2","_iterator2","_step3","kv","wavesList","_iterator3","e","item","_step4","_iterator4","_step5","_iterator5","_AdBase","Ad","arguments","_inheritsLoose","createIns","platform","Platform","WECHAT_GAME","AdBase","BYTEDANCE_MINI_GAME","AdTt","ANDROID","AdGp","_proto","console","log","bannerShow","bannerHide","interstitialShow","customShow","rewardShow","onSuccess","onCancel","onError","UiAdSimReward","create","ui","parent","find","root","setParent","btnError","on","Input","EventType","TOUCH_END","destroy","btnComplete","btnCancel","cb","resources","Prefab","err","data","instantiate","node","getChildByPath","countdown","getComponent","Label","tween","sequence","call","string","toString","delay","repeatForever","start","AdForegroundSwitch","game","Game","EVENT_SHOW","AdInit","exe","AdRewardVideoFailHandler","i18n","UiDialog","title","txt","AdStartup","AdStartupData","times","_class2","_this","_len","args","_key","concat","banner","interstitial","rewardedVideo","tt","getSystemInfoSync","AdBanner","AdInterstitial","AdRewardedVideo","_this$interstitial","show","_this2","resumeBgm","onFailed","director","getScene","name","Music","bg1","bannerAd","isLoaded","_proto2","_this3","_tt$getSystemInfoSync","windowWidth","windowHeight","createBannerAd","adUnitId","adIntervals","style","width","top","targetBannerAdWidth","left","onResize","size","height","onLoad","_this$bannerAd","hide","_this$bannerAd2","interstitialAd","_proto3","createInterstitialAd","error","videoAd","_proto4","_this4","createRewardedVideoAd","onClose","res","isEnded","undefined","then","AdWx","custom","adIdBundle","AdIdBundleMgr","myself","UITransform","contentSize","bannerId","interstitialId","rewardedVideoId","AdCustom","customId","_this$banner","_this$banner2","_this$custom","AdIdBundle","bundle","lht","CustomAd","phone","wx","w","screenWidth","screenHeight","createCustomAd","errMsg","h","realWidth","realHeight","_proto5","type","AffixType","None","argN","argNList","argStr","argStrList","Ai001","update","role","ai","target","RoleMgr","local","chase","v","view","position","clone","subtract","RoleMove","Ai002","state","state_pathMove","state_chase","pathMove","pathMoved","path","targetPos","idx","lengthSqr","PlayerRole","main","lenMoved","move","offset","life","isDead","RoleAttack","RoleAnimSpine","playIdle","skeleton","AiSys","all","allEnemies","updateRole","ArticleString","getName","articleId","strs","split","key","Lang","get","getDescription","ArticleUnlockLevel","ret","CfgArticleUnlock","cfgItem","canUnlock","unlockDeployCell","bagDeployCellUnlocked","cellIdx","findIndex","ids","UiArticleUnlock","loadAndCreate","UiMain","refresh","lockCount","bulletId","scatterCount","cd","damage","crit","AttackCrit","lifeStealing","AttackLifeStealing","targeSelType","AttackTargetSelectionType","First","percent","probability","multiple","AudioSettingsPersist","loadMusic","loadSound","saveMusic","saveSound","val","enabled","Sound","list","TowerAuraHint","set2","map","auraPool","towerDamage","article","cells","clear","flagAttackDamage","flagAttackSpeed","flagAttackCritProbability","auras","getBuffs","cfg","aura","affixType","AuraAttackDamageIncreasePercent","TowerAuraScopeExpand","auraScopeType","canAttack","uiItem","genOrGetEffect","AuraAttackSpeedIncreasePercent","_step6","_iterator6","AuraAttackCritProbabilityIncrease","_step7","_iterator7","has","place","_step8","_iterator8","effect","EffectFactory","WorldNode","layer2","worldPosition","_step9","_iterator9","tower","atkDamage","UiTowerAuraHint","layer1","_step10","buffs","_iterator10","cfgBuffItem","CfgBuff","isAura","CfgArticleGrade","gradeLineId","_step11","_iterator11","_step12","_iterator12","buffIds","_step13","_iterator13","getComponentInChildren","pos1","pos2","add3f","to","AuraScopeType","cfgShape","gradeMerge","isBagExpand","posShapeCoordOrig","effectMergeHintShape","tweenMergeHint","adTag","BagArticleFactory","BagArticle","BagArticleCfgSet","BagArticleViewSet","TowerFactory","CfgArticleMgr","mergeGrade","CfgShape","bagShapeId","startsWith","_root$getComponent","BagArticleView","createView","calcPos","coords","Layout","getBoundingBoxToWorld","pf","PfMgrBagArticle","getPf","shape","tileSize","UiBagCfg","cellSize","Vec2","coord","x","y","pos","Vec3","bagArticle","ZERO","multiplyScalar","BagArticleGradeHelper","getGradeByLineId","currentGrade","getCfgCurrent","idArticle","cfgArticle","getCfgNext","getCfgCurrentItems","BagArticleGridPlace","animatedMovement","unbind","bind","cell","getOrigCellInBoundingRect","MAX_VALUE","UiBagGrid","getCell","cellOrig","s","scale","uitrans","convertToWorldSpaceAR","BagArticleGridPlaceByPos","placeBagExpand","getCellsPlace","MergeTray","tryMerge","UiTray","insertArticle","GridModeTransition","toNormal","UiBagTouch","limit","GridHint","hintPlaceableClear","removeAndArrange","MergeGrid","goToTray","BagArticleSpeak","articleIgnore","matchCell","getShapeCells","lenMin","cellRet","GridTraverse","len","coordStart","coord2","cell2","ArticleHelper","getAllAriclesInGrid","indexOf","BagArticleReloaded","TowerMgr","clearMemory","memory","UiBubble","active","setString","BagGridDraw","drawCell","cellPf","gridSize","grid","posStart","yCoord","xCoord","BagTrayAricleGen","BagExpandCount","genFirst","bagExpandCount","rndDeployWeapon","addArticleById","rnd2","rndDeploy","addAdTag","gen","canAddAdTag","articles","genGrade2","rndDeployGrade","rndGrade","rnd1","ready","randomRangeInt","WeightProbability","CfgGameBagTrayAricleGen","pw","common","cellLenMin","cfgArtile","strGrade","_class","BagView","enterDirect","UiBagBottom","UiFeature","layer0_Road","layer0_Spawn","UiPlaySpeed","enter","rootWorld","fadeOut","leave","fadeIn","opa","UIOpacity","addComponent","opacity","BezierCalc","bezier2Path","startPos","endPos","controlPos","bezier2","end","center","temp","bezier3Path","controlPos1","controlPos2","bezier3","t2","BezierMove","exe2Order","duration","ctrl","onComplete","onUpdate","ratio","p1","cp","p2","twoBezier","Buff_HpRegenIncreasePercentBelowPercentPerWave","tryExe","f","buff","affix","HpRegenIncreasePercentBelowPercentPerWave","extra","hp","hpBar","resetAllTowers","resetBuff","Buff_RndArticleMergeGradeUpgrade","getRndAritcle","replace","TowerAllUpdate","updateAll","slice","remove","id2","article2","tower2","Buff","iconId","interval","isNative","sender","_Buff","BuffRole","BuffCom","BuffFactory","_buff$affix$argNList","Affix","affixArgN","affixArgNList","affixArgStr","setCurrentAndMax","DataIncrease","attackDamageIncreasePercent","attackSpeedIncreasePercent","attackCritProbabilityIncreasePercent","attackCritMultipleIncreasePercent","attackLifeStealingPercent","AttackBulletPoisoningDamageIncreasePercent","AttackBulletPoisoningDurationIncreasePercent","AttackBulletExplodeRadiusIncreasePercent","AttackBulletExplodeDamageIncreasePercent","AttackBulletAddBuffRadiusIncreasePercent","AttackBulletAddBuffRadiusBuffIncreasePercent","AttackDamageIncreasePercentFullHp","AttackBulletProbabilityAddBuff","hpMaxIncrease","hpMaxIncreaseIncreasePercent","hpRegenIncreasePercent","hpRegenSpeedIncreasePercent","moveSpeedIncreasePercent","reset","BuffIncreaseCalc","exeBuffs","exeBuff","AttackDamageIncreasePercent","AuraAttackDamageIncreaseAllPercent","AttackSpeedIncreasePercent","AttackCritProbabilityIncreasePercent","AttackCritMultipleIncreasePercent","AttackLifeStealingPercent","HpMaxIncrease","HpMaxIncreaseIncreasePercent","HpRegenIncreasePercent","HpRegenSpeedIncreasePercent","MoveSpeedDecreasePercent","number","BuffOp","roleAdd","buffNew","roleAddNew","setCurrentAsMax","RoleAttributeUpdate","EffectPfMgr","setSiblingIndex","Burn","Poisoning","PoisoningPercent","Frozen","attack","paused","uitransEffect","rectEffect","getBoundingBox","rectRole","Stun","roleRemove","BuffResetMergeGrade","getMergeGradeFactor","mergeGradeFactor","BuffString","get1","get2","specified","buffId","Math","abs","BulletView","Life","Lifecycle","damge","MoveCom","BulletTarget","passCount","bounce","BulletMoveType","targetRole","moveType","Linear","BulletBounceBetweenEnemies","bounceRectEnemy","bounceRect","bounceEnemy","bounceBetweenEnemies","record","rotationType","BulletRotationType","BulletBounceRect","rect","BulletFactory","bullet","Bullet","FrameSecConvert","toFrame","BulletCfgSet","BulletViewSet","CfgBullet","speed","moveSpeed","BulletBounce","BounceBetweenEnemies","viewId","BulletPfMgr","collsion","collider","Collider2D","Contact2DType","BEGIN_CONTACT","CollisionBullet","onBeginContact","BulletMgr","BulletMoveCalc","dir","direction","normalize","BulletMove","rectBounce","Direction","BulletViewHelper","rotateDir","Chase","chaseTarget","xMin","xMax","yMin","yMax","BulletSys","outOfBounds","lifecycle","die","rectBounds","getVisibleSize","Rect","math","toDegree","atan2","eulerAngles","ButtonInterval","fn","totalTime","CellExpand","exe4","exe8","CfgArticle","dataOrig","CfgTowerItem","quality","CfgArticleParser","parseJson","MergeDefinition","row","handleMergeDefinition","CfgTowerParser","parseTowerItem","isHybrid","allowData","trim","id3","addDefinition","CfgArticleGradeItem","attackDamage","hpRegenIncrease","getMomeyPerWave","upgrade","CfgArticleGradeItemUpgrade","money1","itemId","itemCount","CfgArticleGradeParser","levelId","str2","_cfgItem$buffIds","CfgArticleUnlockItem","CfgArticleUnlockParser","CfgBuffItem","auraOverlay","Dir8","unlockCount","CfgBuffParser","filter","Boolean","CfgBulletItem","CfgBulletParser","toSecond","CfgDailyCheckin","CfgDailyCheckinParser","itemData","_decorator","ccclass","property","CfgDaySign","DayGifts","CfgDaySignMgr","CfgDaySignParser","num","isNaN","CfgFarm","CfgFarmItem","unlock_level","CfgFarmParser","CfgFeature","CfgFeatureItem","CfgFeatureParser","CfgGameBagTrayAricleGenItem","CfgGameBagTrayAricleGenParser","p","BagAllArticleIds","CfgGeneralParser","_CfgGeneral$ins$BagIn","_CfgGeneral$ins$BagIn2","_CfgGeneral$ins$BagAl","CfgGiftGroup","Id","ItemsId","ItemsNum","CfgGiftGroupMgr","CfgGiftGroupParser","_cfgItem$ItemsNum","CfgInviteConfig","GiftID","CfgInviteConfigMgr","CfgInviteConfigParser","CfgItem","CfgItemMgr","CfgItemParser","CfgItemDraw","CfgItemDrawItem","min","CfgItemDrawItemItem","CfgItemDrawParser","cfgItemItem","CfgItemRewardMgr","CfgItemRewardItem","CfgItemRewardParser","CfgLevelGeneralMgr","CfgLevelGeneralItem","mapId","CfgLevelGeneralParser","CfgLevelWaveMgr","LevelData","WaveData","rewards","WaveItem","triggerTime","genRoleId","hpMaxFactor","attackFactor","CfgLevelWaveParser","levelData","wave","parseWave","sort","b","CfgLoad","pathMode","flag","loader","LoaderResources","home","getPath","CfgShopParser","CfgRoleParser","CfgUpgradeParser","CfgShapeParser","CfgMushroom","CfgMushroomItem","CfgMushroomParser","CfgRole","CfgRoleItem","attackCd","exp","lifeHpMax","hpBarId","CfgShapeItem","TileShapeDataParser","CfgShop","daliyFixed","daliy","CfgShopItem","nameLangId","cost","adDaliyLimitId","adDaliyLimitTotal","atkBulletId","atkCd","atkCritProbability","atkCritMultiple","atkTargeSelType","atkBulletScatterCount","CfgUpgrade","Channel","ChannelInit","setChannelType","ChannelType","Minigame_ByteDance","XiaoMi","selfCollider","otherCollider","contact","bulletAndRole","pass","d","d2","hasCrit","RoleGetDamage","DamageValueShow","prob","ls","findNearest","convertToNodeSpaceAR","len1","len2","len3","len4","dataIncr","Knockback","RoleMoveSys","Explode","AttackBulletAddBuffRadius","isNew","round","FrameCall","once","explode","CircleCollider2D","r","radius","ignore","role2","CollisionHandler","onEndContact","role1","SkillCloseDamageOp","tryRemove","onPreSolve","onPostSolve","DailyCheckinData","lastDate","Date","checkin","DateTimeMgr","getNowDateTime","isTodayCheckin","dtNow","DateTimeUtil","dateEquals","DailyCheckinDataPersist","_unused","dtLast","obj","toDateString","DailyLimit","decrement","dt","now","DateTimeSync","DateTimeRequest","getFromSuNing","ok","date","dtStart","ttRequest","fetch","wxRequest","_fetch","_x","response","request","url","success","fail","floor","setSeconds","getSeconds","dt1","dt2","y1","getFullYear","y2","m1","getMonth","m2","d1","getDate","getHours","getMinutes","destroyIfComplete","_sk","sk","sp","Skeleton","setCompleteListener","EnemyGen","genOne","RoleFactory","UiHpBar","EnemyMovePath","AiCom","PathMove","children","point","_dec","_Component","Entry","Init","deltaTime","Component","ZOrderCtrl","TowerSys","RoleSys","LevelCtrl","FeatureAcquire","Player","FeatureExtract","countLimit","PlayerBuffAffect","affectAllRoles","GetMomeyNow","UiMoney001","icon","MoneyFly","money001Fly","MergeEnable","ExpIncreasePercent","PlayerGradeOp","expFactor","RndArticleMergeGradeUpgrade","FeatureExtractPool","ids1","getCommon","ids2","getDeploy","rnd","poolData","Shuffle","shuffleArray","FrameCallDataItem","second","fps","frame","GameArg","mainIdx","GameLose","GamePause","pause","uiLose","UiLose","ItemDraw","itemList","showAnim","ItemGet","addList","TimeScale","resume","playSpeed","GameStart","GestureClick","posOrig","rest","getVal","GridHelper","getBoundingRectShapeUnlocked","coord1","girdSize","getBoundingRectUnlocked","cell1","divide3f","Size","rectRet","getBoundingRectEntirety","hintPlaceableShow","hintPlaceable","hintExpandable","UiBagGridBg","alignBgCenter","UiBagExpandOp","mode","toExpandable","showExpandable","showNormal","exe2","Guide","exe1","GuideData","hasRecord1","blockInput","Node","setContentSize","BlockInputEvents","hand","rootCover","cover","UiGuideCover","textBox","UiTextBox","guideStep0","guideStep1","prompt","label","guideTrayToGrid","guideBtnRefresh","btn","btnRefresh","btn2","SoundBtnClickSetter","guideStep2","coverBtn","_this5","guideBtnStart","_this6","btnStart","complete","emit","onBeforeArticlePlace","onBeforeArticleSelect","onCompleteArticlePlace","record1","size1","mask","maskUiTrans","coordTarget","articleTarget","handMove","equals","insertArticleByIndex","towerAuraHint","pos12","Tween","stopAllByTarget","HitTest","hit","posWorld","hitTray","hitGrid","LevelLoad","WorldNodeInit","PlayerInit","PlayerRoleInit","initBag","Stats","Test","NODE_DESTROYED","Deinit","UiBag","uiBottom","hasArticle","UiToast","m","dial","btnOK","money001Fly2","_wxHelper","WxHelper","enableShareMenu","initShare","CheckIsShare","UiKeyboard","ProgressBar","UiBar","bar","fillRange","ResLoad","onProgress","val2","onCompleteResLoad","UiWin","loadPf","PlatformInit","loadScene","StaminaRecoveryPersist","InitTt","showShareMenu","InitWx","withShareTicket","menus","setShareAppMessage","onShareAppMessage","imageUrlId","imageUrl","_loop","mapping","ItemType","Money001","Money002","isValid","UiMoney002","Stamina","UiStamina","ItemSub","toastStayDuration","win","window","languages","searcher","_language","language","updateSceneRenderers","rootNodes","allLocalizedLabels","labels","getComponentsInChildren","updateLabel","allLocalizedSprites","sprites","sprite","updateSprite","_languageData","lang","currentWaveIdx","startWave","WaveCtrl","onCompleted_Wave","updateWaveEnemy","onClearWaveAllEnemies","WaveSettle","load2","layer0","pfMap","LevelString","getMainLevelName","_createClass","ListHelper","addUniquely","LoaderBase","handler","_LoaderBase","LoaderRemote","counter","assetManager","loadRemote","list2","_onProgress","dataItem","finished","total","_this$onProgress","executeInEditMode","_dec2","visible","_dec3","displayName","_descriptor","_applyDecoratedDescriptor","LocalizedLabel","_initializerDefineProperty","_assertThisInitialized","fetchRender","configurable","enumerable","writable","initializer","Object","getOwnPropertyDescriptor","LocalizedSpriteItem","SpriteFrame","_descriptor2","_dec4","_class4","_descriptor3","_class5","LocalizedSprite","spriteList","spriteFrame","orig","hybrid","id1","MergeDataItem","addDefinitionSingle","mapping2","getMergedId","getMergedIdhybrid","MergeEffect","merge","MergeGridHybrid","canMerge","articleNew","MergeHint","mergeable","a2","anim","restore","stopAllByTag","stop","ONE","MergeHybridHintMgr","_i","_all","hideShape","showShape","MergeHybridHint","clearAllLines","article1","v2","effect2","getTarget","fly","nodeTarget","PfMgrMoney","positionTest","MoveRole","preCalc","translate","vNormal","step","stepLen","m_enabled","audioSrc","play","isLoop","AudioSource","AudioClip","audio","clip","loop","_MusicBase","MusicBase","NodeSizeFit","uiTrans","size2","nodeSize","sizeOrig","trimmed","spr","sizeMode","Sprite","SizeMode","TRIMMED","NumberRolling","num1","num2","com","NumberRollingCom","setValue","setVal","diff","timeCount","showNumber","OsJudge","isWx","test","navigator","userAgent","PfLevelThumbnail","PfLoad","handlePf","UiLoadingScene","PfMgrIcon","UiSettings","UiBagArticleDetail","HomeUiBag","UiStaminaBuy","UiGet","UiDailyCheckin","UiHybridGuide","PfMgrRole","PfMgrNumber","UiFeatureSel","PfMgrIconBuff","PfMgrHeroUp","getSprite","getIconById","_this$root$getChildBy","pfIcon","meat","heroSpiece1","get_sprite_by_id","PfMgrMushroom","damageCrit","PlayerBag","PlayerGrade","getGridExpandCount","affectRole","buffList","addExp","UiPlayerGrade","g","expNeeded","uiFeatureSel","player","add2f","PlaySpeedCtrl","SpeedChangeData","make","sc","c","SpeedData","Random","rangeInt","random","ReplaceModeEnter","idUnlocked","sv","deployItemAnim","idDeploy","off","swap","idx1","idx2","skill","playMove","playAttack","getCurrent","animation","setAnimation","addAnimation","te","RoleAnimSpineAttackTimeScaleUpdate","getState","skeletonData","findAnimation","targetGetDamage","getBulletEmitPos","multiply3f","setRoleAsOrig","handleIncr","atk","moveSpeedOrig","RoleDie","Role","RoleCfgSet","RoleViewSet","AttackCom","Exp","SkillCom","RoleView","arg2","showDamageValue","_role$view$hpBar","normal","RoleGetDamageLocal","color","Color","RED","WHITE","rndPos","parallel","by","canMove","RoleMoveView","RoleMoveSysItem","orien","getScale","sign","setScale","RoleBuffSys","skillCom","SkillType","CloseDamage","closeDamage","trigger","ScreenAdaptResolutionPolicy","exeRatio","screen","resolution","setResolutionPolicy","ResolutionPolicy","FIXED_WIDTH","FIXED_HEIGHT","exeDesignResolution","getDesignResolutionSize","SeqScaleShow","nodes","Shake","exePreset","scalePos","genData","seq","_SkillBase","SkillCloseDamage","damageVal","targets","SkillBase","tryAdd","_role1$skill","skillbase","_role1$skill2","roleTarget","_SoundBase","btnClick","getReward","SoundBase","volume","playOneShot","btns","Button","StaminaRecovery","cycle","time","diffSce","recovery","StatsItem","StringUtil","fillZero","join","test4","test3","di","test2","oldTick","tick","test1","testBag","Test1","url2","text","Test2","TextureOriginalRatioSprite","sizeSpr","trans","originalSize","lines","line","charAt","tickOrig","TowerView","hpRegen","playerBuff","TowerAuraEmit","TowerAttributeUpdate","dataIncr2","dataIncrease","isSpecified","TowerCfgSet","buffGrade","idEntity","TowerAttack","attackAnim","TowerBulletEmit","TowerAttackTargetSelect","first","Rnd","MIN_VALUE","setAsOrig","buff2","cfgTower","cfgAricle","cfgGrade","AttackCritPerAttackNTimesIncrease","AttackCritPerAttackNTimes","TowerAuraHandler","auraEmit","buffOverlapEnable","OverlapEnable","buffAdd","towers","TowerAuraScopeExpandRet","dir8","HV","hv","All","_ret$towers","cells2","getTower","coordTemp","bulletGen","scatter","Boomerang","boomerang","vn","posM","pos11","path2","Forever","Sender","degree","bullet2","dir2","Vec2dHelper","rotate","AttackBulletSizeIncrease","AttackBulletMoveSpeedIncreasePercent","AttackBulletBounceRectEnemyIncrease","AttackBulletBounceBetweenEnemiesIncrease","AttackBulletBounceRectIncrease","AttackBulletPassIncrease","AttackBulletPassInfiniteAndBounceRectIncrease","AttackBulletScatterIncrease","AttackBulletScatterIncreaseProbability","AttackBulletAddBuff","AttackBulletSizeIncreasePercent","Tower","AuraCom","handeBuff","cfgItems","grade2","HpRegenIncrease","updateTower","TowerSysBuff","buffAttackContinuous","AttackContinuous","TweenHelper","TweenSpeed","speedFlag","onDestroy","UiArticleDetail","intro","attribute","UiArticleDetailIcon","RichText","UiArticleDetailAttribute","UiEffectScale","UiArticleDetailAttributeItem","HpRegen","AuraAttackDamage","AuraAttackSpeed","AuraAttackCritProbability","hideAll","refreshAttack","refreshMisc","str1","GetMomeyPerWave","iconSk","iconSize","refreshSkeleton","getRuntimeData","animations","UiArticleIcon","f2","UiArticleIconBg","description","UiEffectPopup","locked","UiBagPrefab","UiBagDeploy","UiBagUnlocked","UiBagLocked","UiBagReplace","btnList","UiBagArticleDetailBtnList","UiBagArticleDetailBaseAttribute","UiBagArticleDetailUnlocked","unlockedInfo","detail","setShowModeAsDeploy","cfgArctileItem","glId","btnUpgrade","cfgArctile","UiBagArticleDetailBaseAttributeItem","AttackDamageAura","cfgCurrent","cfgNext","btnRemove","btnDeploy","UiBagArticleDetailUpgrade","onClick_btnRemove","onClick_btnDeploy","setShowModeAsUnlocked","upgradeCost","onClick","check","content","pfItem","pfItem2","cfgGradeItem","isUnlocked","UiBagArticleDetailUnlockedItem","UiBagArticleDetailUnlockedItemIcon","iconBgList","btnRefreshGrade2","btnGetGridExpand","refreshGrade2Count","onClick_Start","onClick_btnRefreshGrade2","UiBtnGetGridExpand","showAllBtns","onClick_Refresh","onClick_btnGetGridExpand","UiBagCell","bg","removeAllChildren","q","UiBagItem","onClick_Item","empty","itemEmpty","uiDetail","itemRoot","uiItem2","onClick_OK","GirdExpandCtrl","isNextToUnlocked","articleToUnlocked","showMode","initGrid","entiretyAnim","UiEffectFade","fade","unlockedAnim","entirety","setBg","setBgChildrenAlignMode","Widget","AlignMode","ALWAYS","ON_WINDOW_RESIZE","alignMode","updateFragment","node2","UiBagItemUpgradeFragment","pfShape","upgradeable","playAnimUpgradeable","_UiBagItem","UiBagItemLocked","unlockInfo","grayscale","refreshUnlockInfo","cfgArticleUnlockItem","includes","itemLocked","TouchLimit","articleSel","gestureClick","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","onTouchEnd","TOUCH_CANCEL","event","getUILocation","_this$onBeforeArticle","_this$onCompleteArtic","articlePlace","adGet","showArticleInfo","articleGotoTray","uiDialog","btnClose","cancel","uiAricleDetail","setProgress","UiBar2","UiBattle","UiLevel","UiLeft","UiRight","UiBgQuality","UiBottomTabPage","thb","UiTabHeaderBottom","page","initPage","initTabHeader","UiShop","onSelectChange","hideAllPages","bgTrans","txtTrans","hDiff","clickToDestroy","refreshSize","_class3","UiBubbleWithIcon","set_text","template","values","result","reduce","acc","_UiPopupBase","btnGet","btnGetAd","claimedToday","onClick_Get","onClick_GetAd","UiDailyCheckinItem","rewardData","refreshReward","refreshBtn","refreshListClaimState","n1","n2","setClaimable","setClaimed","setNotClaimable","claimType","ClaimType","Claimable","uiGet","UiPopupBase","claimableFlag","claimedFlag","UiItemList","Claimed","NotClaimable","UiDebug","GameTrayArticleGen","GameFeatureSel","loadAndCreateIns","UiDebugPersist","destroyIns","UiDebug_GameTrayArticleGen","UiDebug_GameFeatureSel","UiDebug_GameArticleInfo","UiDebug_GameFlow","UiDebug_BagArticle","UiDebug_Level","UiDebug_EnemyGen","UiDebug_Economic","jGameTrayArticleGen","edList","ed","eb","EditBox","edit","_Account$ins$bag$unlo","_Account$ins$bag$unlo2","_Account$ins$bag$depl","_Account$ins$bag$unlo3","gId","setSelLevelIdx","EditBoxLevelId","SceneTransition","EditBoxWaveIdx","_proto9","initStamina","initMoney001","initMoney002","valStart","valEnd","pfItems","refresh2","UiFeatureItem","refreshCount","refresh1","UiFeatureSelItemList","UiFeatureSelBtnList","featureSel","btnGetAll","onClick_GetAll","UiFeatureSelItem","descr","refreshIcon","refreshDescr","playAnimSel","layout","getChildByName","setItemCount","updateLayout","rootBlockInput","bar2","rootBar2","UiHybridGuideItem","item1","item2","item3","sks","UiItem","UiItemIcon","refreshBg","refreshByItemData","flagmentFlag","ws","Interval","input","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","keyCode","KeyCode","KEY_A","KEY_D","KEY_W","KEY_S","KEY_Q","onClick_Q","onClick_A","btnRanking","btnInvite","selLevelIdx","info","UiLevelInfo","arrow","UiLevelArrow","UiLevelBtnList","thumbnail","UiLevelThumbnail","UiWaveReward","uiLevel","btnArrowLeft","btnArrowRight","onClick_btnArrowLeft","onClick_btnArrowRight","isMoveCompleted","UiBtnStart","lock","lockTxt","btnGrinding","UiBtnGrinding","currentLevelIdx","animScale","cfgLevel","leftToday","adFlag","dailyLimit","rewardGet","uiWin","btnShare","levelName","best","refreshLevelName","refreshBest","GRAY","isLeft","UiListItemGenMgr","loading","addPersistRootNode","sceneName","preloadComplete","startCheck","preloadScene","loadGameLevel","onClick_btnOK","onClick_btnShare","UiTop","ScrollView","scrollToBottom","scrollToTop","UiMoreGames","icons","closeHandler","onClickItem","createRes","initItems","thisAppId","appId","addItem","UiMoreGamesItem","navigateToMiniProgram","extraData","envVersion","UiMoreGamesCfgItem","UiMoreGamesCfg","UiPause","initBtnClose","initCover","_this$btnClose","coverNode","cr","btnDailyCheckin","btnSettings","initVibrate","initAudio","sound","UiSwitch","isOn","music","svView","Mask","UiShopDaily","UiShopMoney001","ShopDailyData","UiShopDailyCountdown","UiShopDailyBtnRefresh","shopDaily","UiShopItem","UiShopDailyItem","refreshFixed","refreshRnd","startCheckReset","checkGen","_uiItem$adDl","adDl","dl","refreshLeft","_UiShopItem","onGetItems","onGetItems_","soldOut","setSoldOut","costAd","j3","ShopDailyDataItem","ShopDailyExtract","startAutoRefresh","s2","secondToString","_this7","_this8","costAdLabel","UiCost","refreshGeneral","refreshCost","cfg2","isAd","refreshAdLeft","ad","getItems","_this$onGetItems","rndIcon","autoRefreshStart","refreshCountdown","itemAd","UiStaminaBuyItem","itemMoney002","onClick_Ad","onClick_Money002","m002","UiStateBtn","stats","autoRefreshStop","UiStats","UiStatsItem","iconBg","currentFlag","header","UiTabHeader","_this$header$currentI","currentItem","showByName","_loop2","UiTabHeaderItem","showByIndex","itemTemp","stayDuration","updateRenderData","UiWaveInfo","uiPause","arrange","xStart","w2","UiWaveRewardItem","cfgList","waveInfo","claimed","claimable","unclaimable","initClaimable","light","rad","toRadian","cosVal","cos","sinVal","sin","frames","enable","_this$onComplete","bulletClear","towerBuff","levelSettle","idxNext","moneyAdded","weightCount","probabilities","World","s_ShareImage1","ShareImage","s_ShareImage2","s_ShareImage3","ShareImages","vibrateShort","vibrateLong","GetRandomParamShare","OpenShare","ShareAppMessage","query","Lanuchinfo","getLaunchOptionsSync","keys","shareImageId","shareImageUrl","ShareImageId","ShareImageUrl","allenemies"],"mappings":"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","file":"all.js","sourcesContent":["import { CurrentMax } from \"../../Game/World/1.Base/Support/SimpleStruct/CurrentMax\";\nimport { CfgGeneral } from \"../Cfg/CfgGeneral\";\n\n\n// 背包\nexport class AccountBag {\n\n    // 装备等级\n    public grade = new Map< string , number >() ; \n\n    // 上阵的\n    public deploy = Array< string >() ; \n\n    // 获得的 已解锁的\n    public unlocked = Array< string >() ; \n\n    // 上阵位置解锁的\n    public deployCellUnlocked = new Set< Number >( [ 0 , 1 , 2 , 3 , 4 , 5  ] ) ;\n\n}\n\n\n// 主线关卡\nexport class AccuntLevel {\n\n    // 打到的关卡索引。从 1 开始，显示和逻辑一致，降低认知负担。\n    public levelIdx : number = 1 ; \n\n    // 打到的波数\n    public waveIdx = 0 ; \n\n}\n\nexport class AccountDaySign{\n\n    //可签到的天数\n    public DaySign:number=1;\n    //是否已领取\n    public Received:boolean=false;\n}\n\n/**\n * 邀请好友\n * */\nexport class AccuntInvite{\n\n    //是否通过邀请链接进入 0为否 1为是\n    public IsInviter:number;\n    //邀请玩家的id\n    public InviterId:string;\n    //当前邀请的次数\n    public InviteCount:number=1;\n    //邀请的校验码-用来判断是那一波的邀请\n    public Invite_check:string;\n    //已成功邀请的人数\n    public Aready_InviteCount:number=0;\n}\n\n//用户数据\nexport class AccuntInfo{\n\n    public Uid:number;\n\n    public Last_login_time:string;\n   \n}\n\nexport class AccountMoney {\n\n    // 货币 1级\n    public money001 = 0 ; \n\n    // 货币 2级\n    public money002 = 0 ; \n\n}\n\nexport class Account {\n\n    public static ins : Account = null ; \n\n    public money = new AccountMoney() ; \n\n    public bag = new AccountBag() ; \n\n    public mainLevel = new AccuntLevel() ;\n\n    public accuntInfo = new AccuntInfo();\n\n    public accuntInvite = new AccuntInvite();\n\n    // 拥有的物品\n    public items = new Map< string , number >() ;\n\n    // 体力\n    public stamina = new CurrentMax() ; \n    \n    // 波次奖励 领取记录\n    public waveReward = new Map< number , Set< number > >() ; \n\n    public accountdaysign=new AccountDaySign();\n\n    public constructor() {\n\n    }\n\n    public init() {\n\n        this.money.money001 = 500 ; \n        this.money.money002 = 500 ; \n\n        // 读取配置的\n        this.bag.deploy.splice( 0 , this.bag.deploy.length ) ; \n        this.bag.deploy.push( ... CfgGeneral.ins.BagInitDeployedIds ) ; \n\n        this.bag.unlocked.splice( 0 , this.bag.unlocked.length ) ; \n        this.bag.unlocked.push( ... CfgGeneral.ins.BagInitUnlockedIds ) ; \n\n        this.stamina.current = 30 ; \n        this.stamina.max = 30 ; \n        \n    }\n\n\n\n}\n","import { sys } from \"cc\";\nimport { Account } from \"./Account\";\nimport { ItemData } from \"../Item/ItemData\";\n\n\nexport class AccountPersist {\n\n    public static load() {\n\n        let a = Account.ins ; \n\n        let str = sys.localStorage.getItem( \"Account\" ) ; \n        if( str == null || str == \"\" ) return ; \n\n        let json = JSON.parse( str ) ; \n\n        this.loadBag( json[ \"Bag\" ] ) ; \n        this.loadMainLevel( json[ \"MainLevel\" ] ) ;\n        this.loadMoney( json[ \"Money\" ] ) ;\n        this.loadItem( json[ \"Item\" ] ) ; \n        this.loadMainLevelWaveReward( json[ \"MainLevelWaveReward\" ] ) ;\n        \n    }\n\n    public static loadItem( j : any ) {\n\n        if( j == null ) return ; \n\n        let a = Account.ins ; \n\n        for( let i = 0 ; i < j.length ; ++i ) {\n            let t = j[ i ] ; \n            let item = new ItemData() ; \n            let id = t[ \"ItemId\" ] ; \n            let count = Number( t[ \"ItemCount\" ] ) ; \n            a.items.set( id , count ) ; \n\n        } // end for\n\n    }\n\n    public static loadMoney( j : any ) {\n\n        if( j == null ) return ; \n\n        let a = Account.ins ; \n\n        a.money.money001 = Number( j[ \"Money1\" ] ) ; \n        a.money.money002 = Number( j[ \"Money2\" ] ) ; \n\n    }\n\n    public static loadBag( jBag : any ) {\n\n        if( jBag == null ) return ; \n\n        let a = Account.ins ; \n\n        // 等级\n        let jGrade = jBag[ \"Grade\" ] ;\n        // 遍历对象属性\n        for( let k in jGrade ) {\n            a.bag.grade.set( k , jGrade[ k ] ) ; \n        }\n\n        // 上阵的\n        a.bag.deploy = jBag[ \"Ready\" ] ;\n\n        // 解锁的\n        a.bag.unlocked = jBag[ \"Unlocked\" ] ;\n\n    }\n\n    public static loadMainLevel( j : any ) {\n\n        if( j == null ) return ; \n\n        let a = Account.ins ; \n\n        a.mainLevel.levelIdx = j[ \"LevelIdx\" ] ;\n        a.mainLevel.waveIdx = j[ \"WaveIdx\" ] ;\n\n\n    }\n\n    public static loadMainLevelWaveReward( j : any ) {\n\n        if( j == null ) return ;\n\n        let reward = Account.ins.waveReward ; \n\n        for( let i = 0 ; i < j.length ; ++i ) {\n            let jItem = j[ i ] ;\n\n            let levelIdx = Number( jItem[ \"LevelIdx\" ] ) ; \n            let waves = jItem[ \"Waves\" ] ; \n\n            let set = new Set< number >() ; \n            for( let n of waves ){ set.add( n ) ; } \n\n            reward.set( levelIdx , set ) ; \n\n        }\n\n    }\n\n\n    public static save() {\n\n        let json = {} ; \n\n        // 背包部分\n        let jBag = this.makeBag() ; \n        json[ \"Bag\" ] = jBag ; \n        json[ \"MainLevel\" ] = this.makeMainLevel() ; \n        json[ \"Money\" ] = this.makeMoney() ; \n        json[ \"Item\" ] = this.makeItem() ; \n        json[ \"MainLevelWaveReward\" ] = this.makeWaveReward() ; \n\n        let str = JSON.stringify( json ) ;\n\n        sys.localStorage.setItem( \"Account\" , str ) ; \n\n\n    }\n\n    public static makeWaveReward() : any {\n\n        let a = Account.ins ; \n        let reward = a.waveReward ; \n\n        let j = [] ; \n        for( let kv of reward ) {\n            let levelIdx = kv[ 0 ] ;\n            let waves = kv[ 1 ] ; \n\n            let wavesList = [] ;\n            for( let e of waves ){ wavesList.push( e ) ; }\n\n            let item = {} ;\n            item[ \"LevelIdx\" ] = levelIdx ; \n            item[ \"Waves\" ] = wavesList ; \n            j.push( item ) ;\n        }\n        \n        return j ; \n\n    }\n\n    public static makeItem() : any {\n\n        let a = Account.ins ; \n\n        let j = [] ; \n\n        for( let kv of a.items ) {\n            let item = {} ; \n            item[ \"ItemId\" ] = kv[ 0 ] ; \n            item[ \"ItemCount\" ] = kv[ 1 ] ; \n            j.push( item ) ;\n        }\n\n        return j ; \n\n    }\n\n    public static makeMoney() : any {\n\n        let a = Account.ins ; \n\n        let j = {} ;\n        j[ \"Money1\" ] = a.money.money001 ; \n        j[ \"Money2\" ] = a.money.money002 ; \n\n        return j ; \n\n    }\n\n    // 取得 Bag 表示的 表格对象\n    public static makeBag( ) : {} {\n\n        let a = Account.ins ; \n\n        let jBag = {} ;\n\n        // 等级\n        let jGrade = {} ;\n        jBag[ \"Grade\" ] = jGrade ; \n        for( let kv of a.bag.grade ) {\n            jGrade[ kv[0] ] = kv[1] ;\n        }\n\n        // 上阵的\n        jBag[ \"Ready\" ] = a.bag.deploy ; \n\n        // 解锁的\n        jBag[ \"Unlocked\" ] = a.bag.unlocked ; \n\n        return jBag ; \n\n    }\n\n    public static makeMainLevel( ) : {} {\n\n        let a = Account.ins ; \n\n        let j = {} ;\n\n        // 上阵的\n        j[ \"LevelIdx\" ] = a.mainLevel.levelIdx ; \n\n        // 解锁的\n        j[ \"WaveIdx\" ] = a.mainLevel.waveIdx ; \n\n        return j ; \n\n    }\n\n}","import { sys } from \"cc\";\nimport { AdBase } from \"./AdBase\";\nimport { AdWx } from \"./AdWx\";\nimport { AdTt } from \"./AdTt\";\nimport { AdGp } from \"./AdGp\";\n\n// 广告\nexport class Ad extends AdBase  {\n\n    public static ins : Ad = null ;\n\n    public static createIns() {\n\n        switch( sys.platform ) {\n\n            case sys.Platform.WECHAT_GAME : { \n\n                // this.ins = new AdWx() ; \n                this.ins = new AdBase() ; \n                this.ins.init() ; \n\n            }\n            break ; \n\n            case sys.Platform.BYTEDANCE_MINI_GAME : {\n\n                this.ins = new AdTt() ; \n                this.ins.init() ; \n\n            }\n            break ; \n\n            case sys.Platform.ANDROID : {\n\n                this.ins = new AdGp() ; \n                this.ins.init() ; \n                \n            }\n            break ; \n\n            default : {\n\n                this.ins = new AdBase() ; \n                this.ins.init() ; \n                \n            }\n            break ;\n\n\n\n        }\n\n    }\n\n\n}\n\n","import { find, Input, instantiate, Label, Node, Prefab, resources, tween } from \"cc\";\n\nexport class AdBase {\n\n    public init() {\n        console.log( \"AdBase.init\" ) ;\n    }\n\n    public bannerShow() {\n        console.log( \"AdBase.showBanner\" ) ;\n    }\n\n    public bannerHide() {\n        console.log( \"AdBase.hideBanner\" ) ;\n    }\n\n    public interstitialShow() {\n        console.log( \"AdBase.showInterstitial\" ) ;\n    }\n\n    public customShow() {\n        console.log( \"AdBase.showCustom\" ) ;\n    }\n\n    public rewardShow( \n        onSuccess : ()=>void = null , \n        onCancel : ()=>void = null ,\n        onError : ( err : string )=>void = null\n         ) {\n\n        console.log( \"AdBase.showRewardedVideo\" ) ;\n\n        UiAdSimReward.create( ( ui )=>{\n\n            let parent = find( \"Canvas\" ) ; \n            ui.root.setParent( parent , false ) ; \n\n            ui.btnError.on( Input.EventType.TOUCH_END , ()=>{\n                ui.root.destroy() ; \n                onError?.( \"出现错误\" ) ;\n            } );\n\n            ui.btnComplete.on( Input.EventType.TOUCH_END , ()=>{\n                ui.root.destroy() ; \n                onSuccess?.( ) ;\n            } );\n\n            ui.btnCancel.on( Input.EventType.TOUCH_END , ()=>{\n                ui.root.destroy() ; \n                onCancel?.( ) ;\n            } );\n\n        } ) ; \n        \n    }\n\n}\n\n\nexport class UiAdSimReward {\n\n    public static create( cb : ( ui : UiAdSimReward )=>void ) {\n\n        resources.load( \"Common/Ui/AdSimReward\" , Prefab , ( err , data )=>{\n\n            let root = instantiate( data ) ;\n\n            let ui = new UiAdSimReward() ; \n            ui.init( root ) ; \n            cb( ui ) ;\n\n        } ) ;\n\n    }\n\n    public root : Node ; \n\n    public btnError : Node ; \n    public btnCancel : Node ; \n    public btnComplete : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.btnError = this.root.getChildByPath( \"BtnList/btnError\" ) ;\n        this.btnCancel = this.root.getChildByPath( \"BtnList/btnCancel\" ) ;\n        this.btnComplete = this.root.getChildByPath( \"BtnList/btnComplete\" ) ;\n\n        // 倒计时\n        let countdown = this.root.getChildByPath( \"Countdown\" ).getComponent( Label ) ; \n        let count = 60 * 3 ;\n        tween( countdown ).sequence(\n            tween( countdown ).call( ()=>{\n                countdown.string = count.toString() ;\n                count-- ; \n            } ) , \n            tween( countdown ).delay( 1 ) , \n\n        ).repeatForever().start() ;\n\n\n    }\n\n}","import { Game, game } from \"cc\";\nimport { Ad } from \"../Ad\";\n\n\n// 前后台切换\nexport class AdForegroundSwitch {\n\n    public static init() {\n\n        game.on( Game.EVENT_SHOW , ()=>{\n\n            console.log( \"切换到前台\" ) ;\n\n            Ad.ins.interstitialShow() ; \n\n        } ) ;\n\n        // game.on( Game.EVENT_HIDE , ()=>{\n\n        //     console.log( \"切换到后台\" ) ;\n\n        // } ) ;\n\n    }\n\n}","\nimport { AdBase } from \"./AdBase\";\n\nexport class AdGp extends AdBase\n{\n\n}\n\n","import { UITransform, find } from \"cc\";\nimport { Music } from \"../../Audio/Music\";\nimport { Ad } from \"../Ad\";\n\n// 广告初始化\nexport class AdInit {\n\n    public static exe() {\n\n        if( Ad.ins != null ) return ; \n\n        Ad.createIns() ; \n\n        // Ad.ins.bannerShow() ;         \n        // Ad.ins.customShow() ; \n\n    }\n\n}\n","import { Node, find } from \"cc\";\nimport { UiDialog } from \"../../Ui/UiDialog\";\nimport * as i18n from 'db://i18n/LanguageData';\n\n// 激励视频失败处理器\nexport class AdRewardVideoFailHandler {\n\n    public static exe( err : string ) : boolean {\n\n        let parent = find( \"Canvas\" ) ; \n\n        if( err != null ) {\n\n            // let str = \"广告播放错误：\" + err ; \n            let str = i18n.t( \"Ad_Error\" ) + err ; \n            let ui = UiDialog.create( find( \"Canvas\" ) ) ;\n            ui.title.string = \"广告播放失败\" ; \n            ui.txt.string = str ;\n\n            return true ;\n        }\n\n        // if( err == null ) {\n\n        //     let str = \"要播完广告才行哦\" ; \n        //     let ui = UiDialog.show( str ) ;\n\n        //     return true ; \n        // }\n\n        return false ; \n\n    }\n\n}","import { sys } from \"cc\";\nimport { Ad } from \"../Ad\";\n\n// 启动时\nexport class AdStartup {\n\n    // 第 X 次进入时播放广告\n    public static times = 2 ; \n\n    public static exe() {\n\n        AdStartupData.ins.load() ; \n        let count = AdStartupData.ins.count ; \n        AdStartupData.ins.count++ ; \n        AdStartupData.ins.save() ; \n\n        if( count >= this.times ) {\n            // Ad.ins.showInterstitial() ; \n        }\n\n    }\n\n}\n\nclass AdStartupData {\n\n    public static ins = new AdStartupData() ;\n\n    // 计数器\n    public count = 0 ; \n\n    public load() {\n\n        let str = sys.localStorage.getItem( \"AdStartupCount\" ) as string ; \n        if( str == null || str == \"\" ) return ; \n\n        this.count = Number( str ) ; \n\n    }\n\n    public save() {\n        sys.localStorage.setItem( \"AdStartupCount\" , this.count ) ; \n    }\n\n}\n","\n\nimport { Music } from \"../Audio/Music\";\nimport { AdBase } from \"./AdBase\";\nimport { AdRewardVideoFailHandler } from \"./Misc/AdRewardVideoFailHandler\";\nimport { director, tween } from \"cc\";\n\n// 广告 抖音\nexport class AdTt extends AdBase {\n\n    public override init() {\n\n        /*\n            抖音的开发者工具 不支持广告播放，会报错，终止游戏运行。\n\n            兼容开发者工具运行。\n        */\n\n        // @ts-ignore\n        let info = tt.getSystemInfoSync();\n        if( info[ \"platform\" ] == \"devtools\" ) {\n            return ; \n        }\n\n        this.banner = new AdBanner() ;\n        this.banner.init() ;\n\n        this.interstitial = new AdInterstitial() ;\n        this.interstitial.init() ;\n\n        this.rewardedVideo = new AdRewardedVideo() ;\n        this.rewardedVideo.init() ; \n\n    }\n\n    public override bannerShow() {\n        \n        // this.banner?.show() ; \n\n    }\n\n    public override bannerHide() {\n        \n        // this.banner?.hide() ; \n\n    }\n\n    public override interstitialShow() {\n\n        this.interstitial?.show() ;\n    }\n\n    // onComplete 变量名不能为 ok 否者编译出错\n    public override rewardShow( \n        onSuccess : ()=>void , \n        onCancel : ()=>void = null , \n        onError : ( err : string )=>void = null , \n         ) {\n\n        if( this.rewardedVideo == null ) {\n\n            onSuccess?.() ; \n            return ; \n        }\n\n        let duration = 0.5 ; \n\n        this.rewardedVideo.onSuccess = ()=>{\n\n            this.resumeBgm() ; \n\n            tween( this ).delay( duration ).call( ()=>{ \n\n                onSuccess() ; \n\n            } ).start() ;\n\n        } ;\n        \n        this.rewardedVideo.onFailed = ( err : string )=>{ \n\n            this.resumeBgm() ; \n            \n            AdRewardVideoFailHandler.exe( err ) ; \n\n            onError?.( err ) ;\n\n        } ;\n\n        this.rewardedVideo.onCancel = ()=>{\n            onCancel?.() ; \n        } ;\n\n        this.rewardedVideo.show() ; \n\n    }\n\n    // 恢复音乐\n    private resumeBgm() {\n\n        let name = director.getScene().name ; \n        // if( name == \"Game\" ) {\n        //     Music.ins.bg1() ; \n        // }\n        // else if( name == \"Home\" ) {\n        //     Bgm.ins.home() ; \n        // }\n        Music.ins.bg1() ; \n    }\n\n    public banner : AdBanner ; \n    public interstitial : AdInterstitial ;\n    public rewardedVideo : AdRewardedVideo ; \n\n}\n\n\n// Banner 广告\nclass AdBanner {\n\n    public init() {\n        \n        /*\n            参考：\n            https://developer.open-douyin.com/docs/resource/zh-CN/mini-game/develop/api/ads/tt-create-banner-ad\n            https://developer.open-douyin.com/docs/resource/zh-CN/mini-game/develop/api/ads/banner-ad/banner-ad-on-resize\n\n\n            当广告没有填充时，会显示了一个无法改变位置的在底部的广告。\n            参考：\n            https://developer.open-douyin.com/docs/resource/zh-CN/mini-game/develop/api/ads/banner-ad/banner-ad\n\n        */ \n\n        // @ts-ignore\n        const { windowWidth, windowHeight } = tt.getSystemInfoSync();\n        const targetBannerAdWidth = 50 ;\n\n        // @ts-ignore\n        let bannerAd = tt.createBannerAd({\n            adUnitId: '1fl16h0lomd647n0o0',\n            adIntervals: 60 , \n            style: {\n                width: targetBannerAdWidth,\n                top: windowHeight - (targetBannerAdWidth / 16) * 9 , // 根据系统约定尺寸计算出广告高度\n                // top: windowHeight - (targetBannerAdWidth / windowHeight ) * windowWidth , // 根据系统约定尺寸计算出广告高度\n            },\n\n        })\n        this.bannerAd = bannerAd ;\n\n        // 也可以手动修改属性以调整广告尺寸\n        bannerAd.style.left = (windowWidth - targetBannerAdWidth) / 2;\n\n        // 尺寸调整时会触发回调，通过回调拿到的广告真实宽高再进行定位适配处理\n        // 注意：如果在回调里再次调整尺寸，要确保不要触发死循环！！！\n        bannerAd.onResize((size) => {\n\n            console.log(size.width, size.height);\n            // bannerAd.style.top = windowHeight - size.height;\n            // bannerAd.style.left = (windowWidth - size.width) / 2;\n\n        });\n\n\n\n        bannerAd.onError(err => {\n            console.log( \"banner 广告错误:\" + err)\n        })\n        \n        bannerAd.onLoad(() => {\n            console.log('banner 广告加载成功') ; \n\n            this.isLoaded = true ; \n\n            // 直接显示\n            this.show() ; \n\n        })\n\n\n\n    }\n\n    public show() {\n        \n        if( this.isLoaded ) {\n            this.bannerAd?.show() ; \n        }\n\n    }\n\n    public hide() {\n\n        this.bannerAd?.hide() ; \n\n    }\n\n    public bannerAd : any = null ; \n\n    public isLoaded = false ; \n\n}\n\n// 插屏广告\nclass AdInterstitial {\n\n    public init() {\n\n        // @ts-ignore\n        if (!tt.createInterstitialAd){\n            return ;\n        }\n\n        // 创建插屏广告实例，提前初始化\n        // @ts-ignore\n        let interstitialAd = tt.createInterstitialAd({\n            adUnitId: '80uwb2shjw11mh3efq'\n        })\n        this.interstitialAd = interstitialAd ; \n\n        interstitialAd.onLoad(() => {\n            console.log('插屏 广告加载成功')\n        })\n\n        interstitialAd.onError(err => {\n            console.log( \"插屏 加载错误：\" + err)\n        })\n\n\n    }\n\n    public show() {\n\n        let interstitialAd = this.interstitialAd ;\n        if (interstitialAd) {\n            interstitialAd.show().catch((err) => {\n                console.error(err)\n            })\n        }\n\n    }\n\n    public interstitialAd : any ;\n    \n}\n\n\n// 激励视频\nclass AdRewardedVideo {\n\n    // 成功\n    public onSuccess : ()=>void = null ; \n\n    // err == null 播放中途退出，不下发游戏奖励\n    public onFailed : ( err : string )=>void = null ; \n\n    public onCancel : ()=>void ; \n\n    public init() {\n\n        // 创建激励视频广告实例，提前初始化\n        // @ts-ignore\n        let videoAd = tt.createRewardedVideoAd({\n            adUnitId: '2b831d1g4ak2dmf3j2'\n        }) ;\n        this.videoAd = videoAd ; \n\n        videoAd.onLoad(() => {\n            console.log('激励视频 广告加载成功')\n        })\n        \n\n        videoAd.onError(err => {\n            console.log(err) ;\n            this.onFailed?.( err.toString() ) ;\n        })\n\n        videoAd.onClose(res => {\n            // 用户点击了【关闭广告】按钮\n            // 小于 2.1.0 的基础库版本，res 是一个 undefined\n            if (res && res.isEnded || res === undefined) {\n                // 正常播放结束，可以下发游戏奖励\n                this.onSuccess?.( ) ; \n            }\n            else {\n                // 播放中途退出，不下发游戏奖励\n                this.onCancel?.( )\n            }\n        })\n\n    }\n\n    public show() {\n\n        let videoAd = this.videoAd  ; \n        \n        if( !videoAd ) return ; \n\n        // 用户触发广告后，显示激励视频广告\n        videoAd.show().catch(() => {\n            // 失败重试\n            videoAd.load()\n            .then(() => videoAd.show())\n            .catch(err => {\n\n                console.log('激励视频 广告显示失败')\n\n                videoAd.load()\n                .then(() => videoAd.show())\n\n            })\n        })\n\n    }\n\n    public videoAd : any ; \n\n}","\n\n\nimport { Music } from \"../Audio/Music\";\nimport { AdBase } from \"./AdBase\";\nimport { AdRewardVideoFailHandler } from \"./Misc/AdRewardVideoFailHandler\";\nimport { UITransform, director, find, tween } from \"cc\";\n\n\n// 广告 微信\nexport class AdWx extends AdBase {\n\n    public override init() {\n\n        // 我的ID\n        let adIdBundle = AdIdBundleMgr.myself() ; \n\n        // 刘会涛的ID\n        // let adIdBundle = AdIdBundleMgr.lht() ;  \n\n        // 决定是否显示 Banner。某些分辨率显示 banner 会遮挡UI，体验很差，不显示。\n        let size = find( \"Canvas\" ).getComponent( UITransform ).contentSize ;\n        let f = size.width / size.height ;\n        let b = f >= 720 / ( 1280 + 100 ) ;\n        if( !b ){\n\n            this.banner = new AdBanner() ;\n            this.banner.init( adIdBundle.bannerId ) ;\n\n        }\n\n        this.interstitial = new AdInterstitial() ;\n        this.interstitial.init( adIdBundle.interstitialId ) ;\n\n        this.rewardedVideo = new AdRewardedVideo() ;\n        this.rewardedVideo.init( adIdBundle.rewardedVideoId ) ; \n\n        this.custom = new AdCustom() ;\n        this.custom.init( adIdBundle.customId ) ; \n\n    }\n\n    public override bannerShow() {\n        \n        this.banner?.show() ; \n\n    }\n\n    public override bannerHide() {\n        \n        this.banner?.hide() ; \n\n    }\n\n    public override interstitialShow() {\n\n        this.interstitial?.show() ;\n    }\n\n    // onComplete 变量名不能为 ok 否者编译出错\n    public override rewardShow( onSuccess : ()=>void , \n        onCancel : ()=>void = null ,\n        onError : ( err : string )=>void = null\n         ) {\n\n        let duration = 0.5 ; \n\n        // 成功\n        this.rewardedVideo.onSuccess = ()=>{\n\n            this.resumeBgm() ; \n\n            tween( this ).delay( duration ).call( ()=>{ \n\n                onSuccess() ; \n\n            } ).start() ;\n\n        } ;\n        \n        // 失败\n        this.rewardedVideo.onError = ( err : string )=>{ \n\n            this.resumeBgm() ; \n            \n            if( onError != null ) {\n                onError( err ) ;\n            }\n            else {\n                AdRewardVideoFailHandler.exe( err ) ; \n            }\n\n        } ;\n\n        // 取消\n        this.rewardedVideo.onCancel = ()=>{\n\n            this.resumeBgm() ; \n\n            onCancel?.() ; \n        }\n\n        this.rewardedVideo.show() ; \n\n    }\n\n    // 恢复音乐\n    private resumeBgm() {\n\n        let name = director.getScene().name ; \n        // if( name == \"Game\" ) {\n        //     Music.ins.bg1() ; \n        // }\n        // else if( name == \"Home\" ) {\n        //     Music.ins.bg1() ; \n        // }\n        Music.ins.bg1() ; \n\n    }\n\n    public override customShow() {\n\n        this.custom?.show() ; \n\n    }\n\n    public custom : AdCustom ;\n    public banner : AdBanner ; \n    public interstitial : AdInterstitial ;\n    public rewardedVideo : AdRewardedVideo ; \n\n}\n\n// 广告ID组\nclass AdIdBundle {\n\n    public bannerId : string = null ;\n    public customId : string = null ; \n    public interstitialId : string = null ; \n    public rewardedVideoId : string = null ; \n\n}\n\n// 广告ID组管理器\nclass AdIdBundleMgr {\n\n    // 我自己的\n    public static myself() : AdIdBundle {\n\n        let bundle = new AdIdBundle() ; \n        bundle.customId = 'adunit-2a7ec63d7c13a4ad' ; \n        bundle.bannerId = 'adunit-2fb5df994068613a' ; \n        bundle.interstitialId = 'adunit-510d8aa624507588' ;\n        bundle.rewardedVideoId = 'adunit-595220d2516c0e66' ; \n        return bundle ; \n\n    }\n\n    // 刘会涛的\n    public static lht() : AdIdBundle {\n\n        let bundle = new AdIdBundle() ; \n        bundle.customId = 'adunit-82c13098f30b3ec9' ; \n        bundle.bannerId = 'adunit-f47a79562dbbe928' ; \n        bundle.interstitialId = 'adunit-a18e521886049e81' ;\n        bundle.rewardedVideoId = 'adunit-6e069bac4cb1000f' ; \n        return bundle ; \n\n    }\n\n}\n\n// 原生模版\nclass AdCustom {\n\n    public init( id : string ) {\n\n        // @ts-ignore\n        var phone = wx.getSystemInfoSync();\n        console.log(phone);\n        var w = phone.screenWidth / 2;\n        var h = phone.screenHeight;\n\n        // 创建 原生模板 广告实例，提前初始化\n        // @ts-ignore\n        let CustomAd = wx.createCustomAd({\n            adUnitId: id ,\n            style: {\n                left: w - 290 / 2 , // 测试出来的经验值\n                // left: ( w - 350 ) / 2 , // 无效\n                top: 0,\n                width: 350 ,\n            }\n        })\n\n        this.CustomAd = CustomAd ; \n        \n        // 监听 原生模板 广告错误事件\n        CustomAd.onError(err => {\n            console.error(err.errMsg)\n        });\n\n        CustomAd.onLoad(() => {\n            console.log('原生模板广告加载成功')\n        })\n\n\n    }\n\n    public show() {\n\n        this.CustomAd.show()\n\n    }\n\n    private CustomAd : any = null ;\n\n}\n\n// Banner 广告\nclass AdBanner {\n\n    public init( id : string ) {\n        \n        // @ts-ignore\n        var phone = wx.getSystemInfoSync();\n        console.log(phone);\n        var w = phone.screenWidth / 2;\n        var h = phone.screenHeight;\n\n        // @ts-ignore\n        let bannerAd = wx.createBannerAd({\n            adUnitId: id ,\n            adIntervals: 60 , \n            style: {\n                left: 0,\n                top: 0,\n                width: 400 , \n                height : 100 , \n            }\n\n        })\n        this.bannerAd = bannerAd ;\n\n        bannerAd.onError(err => {\n            console.log( \"广告错误:\" + err)\n        })\n        \n        bannerAd.onLoad(() => {\n            console.log('banner 广告加载成功')\n        })\n\n        bannerAd.onResize( ()=> {\n            bannerAd.style.left = w - bannerAd.style.realWidth/2+0.1;\n            bannerAd.style.top = h - bannerAd.style.realHeight+0.1 ;\n            console.log( bannerAd.style.top );\n        })\n\n    }\n\n    public show() {\n        \n        this.bannerAd?.show() ; \n\n    }\n\n    public hide() {\n\n        this.bannerAd?.hide() ; \n\n    }\n\n    public bannerAd : any = null ; \n\n}\n\n// 插屏广告\nclass AdInterstitial {\n\n    public init( id : string ) {\n\n        // @ts-ignore\n        if (!wx.createInterstitialAd){\n            return ;\n        }\n\n        // 创建插屏广告实例，提前初始化\n        // @ts-ignore\n        let interstitialAd = wx.createInterstitialAd({\n            adUnitId: id \n        })\n        this.interstitialAd = interstitialAd ; \n\n        interstitialAd.onLoad(() => {\n            console.log('插屏 广告加载成功')\n        })\n\n        interstitialAd.onError(err => {\n            console.log(err)\n        })\n\n\n    }\n\n    public show() {\n\n        let interstitialAd = this.interstitialAd ;\n        if (interstitialAd) {\n            interstitialAd.show().catch((err) => {\n                console.error(err)\n            })\n        }\n\n    }\n\n    public interstitialAd : any ;\n    \n}\n\n\n// 激励视频\nclass AdRewardedVideo {\n\n    // 成功\n    public onSuccess : ()=>void = null ; \n\n    // err == null 播放中途退出，不下发游戏奖励\n    public onError : ( err : string )=>void = null ; \n\n    // 取消\n    public onCancel : ()=>void = null ; \n\n    public init( id : string ) {\n\n        // 创建激励视频广告实例，提前初始化\n        // @ts-ignore\n        let videoAd = wx.createRewardedVideoAd({\n            adUnitId: id\n        }) ;\n        this.videoAd = videoAd ; \n\n        videoAd.onLoad(() => {\n            console.log('激励视频 广告加载成功')\n        })\n\n        videoAd.onError(err => {\n            console.log(err) ;\n            this.onError?.( err.toString() ) ;\n        })\n\n        videoAd.onClose(res => {\n            // 用户点击了【关闭广告】按钮\n            // 小于 2.1.0 的基础库版本，res 是一个 undefined\n            if (res && res.isEnded || res === undefined) {\n                // 正常播放结束，可以下发游戏奖励\n                this.onSuccess?.( ) ; \n            }\n            else {\n                // 播放中途退出，不下发游戏奖励\n                this.onCancel?.( )\n            }\n        })\n\n    }\n\n    public show() {\n\n        let videoAd = this.videoAd  ; \n        \n        if( !videoAd ) return ; \n\n        // 用户触发广告后，显示激励视频广告\n        videoAd.show().catch(() => {\n            // 失败重试\n            videoAd.load()\n            .then(() => videoAd.show())\n            .catch(err => {\n\n                console.log('激励视频 广告显示失败')\n\n                videoAd.load()\n                .then(() => videoAd.show())\n\n            })\n        })\n\n    }\n\n    public videoAd : any ; \n\n}","\n// 词缀、能力。表示最小的能力条目\nexport class Affix {\n\n    public type = AffixType.None ; \n\n    // 参数 数字\n    public argN : number = 0 ; \n    // 参数 数字 列表\n    public argNList : Array< number > = null ;\n\n    // 参数 字符串\n    public argStr : string = null ; \n    // 参数 字符串 列表\n    public argStrList : Array< number > = null ;\n\n}\n\n/*\n    词缀类型\n\n    属性修改方式：\n        设置为指定值。\n        增加指定值。Increase 表示是增加\n\n    值的类型：\n        具体值。\n        百分比。Percent 表示百分比\n\n*/\nexport enum AffixType {\n\n    None = \"None\" , \n\n    // ——————————————————————————————————————————————————————————\n    // 综合性 的\n\n\n    // 立刻获得货币。\n    GetMomeyNow = \"GetMomeyNow\" , \n\n    // 每波后，额外获得货币。\n    // 具体值受合成等级影响 val *= 合成等级\n    GetMomeyPerWave = \"GetMomeyPerWave\" , \n\n    // 角色 血量 增加 具体值。\n    // 具体值受合成等级影响 val *= 合成等级\n    HpMaxIncrease = \"HpMaxIncrease\" , \n\n    // 角色 血量 增加 百分比\n    HpMaxIncreasePercent = \"HpMaxIncreasePercent\" , \n\n    // 角色 最大血量 增加 具体值 增加 百分比\n    HpMaxIncreaseIncreasePercent = \"HpMaxIncreaseIncreasePercent\" , \n\n    // 角色 血量 恢复 百分比。\n    // 具体值受合成等级影响 val *= 合成等级\n    HpRegenIncreasePercent = \"HpRegenIncreasePercent\" , \n\n    // 角色 血量 恢复 具体值\n    HpRegenIncrease = \"HpRegenIncrease\" , \n\n    // 角色 血量 回复 速度 增加 百分比\n    HpRegenSpeedIncreasePercent = \"HpRegenSpeedIncreasePercent\" , \n\n    // 经验获取 增加 百分比\n    ExpIncreasePercent = \"ExpIncreasePercent\" , \n    \n    // 随机一个物件合成等级提升一级\n    RndArticleMergeGradeUpgrade = \"RndArticleMergeGradeUpgrade\" , \n\n    // ——————————————————————————————————————————————————————————\n    // 作用在 Tower 上的 光环\n\n    // 光环 攻速 增加\n    AuraAttackSpeedIncreasePercent = \"AuraAttackSpeedIncreasePercent\" , \n\n    // 光环 伤害 增加\n    AuraAttackDamageIncreasePercent = \"AuraAttackDamageIncreasePercent\" , \n\n    // 光环 伤害 增加 全体\n    AuraAttackDamageIncreaseAllPercent = \"AuraAttackDamageIncreaseAllPercent\" , \n\n    // 光环 给周围武器加暴击概率。\n    AuraAttackCritProbabilityIncrease = \"AuraAttackCritProbabilityIncrease\" , \n\n\n    // ——————————————————————————————————————————————————————————\n    // 作用在 Tower 上的\n\n    // 攻击 伤害 增加 百分比\n    AttackDamageIncreasePercent = \"AttackDamageIncreasePercent\" , \n\n    // 攻击 伤害 增加 百分比 如果击中的是满血的\n    AttackDamageIncreasePercentFullHp = \"AttackDamageIncreasePercentFullHp\" , \n\n    // 攻击 速度 增加 百分比\n    AttackSpeedIncreasePercent = \"AttackSpeedIncreasePercent\" , \n\n    // 攻击子弹存活时间增加百分比\n    // AttackBulletLifeIncreasePercent = \"AttackBulletLifeIncreasePercent\" , \n\n    // 攻击 自身吸血 设置为 百分比\n    AttackLifeStealingPercent = \"AttackLifeStealingPercent\" , \n\n    // 攻击 N 次攻击之后暴击\n    AttackCritPerAttackNTimes = \"AttackCritPerAttackNTimes\" , \n    \n    // 攻击 N 次攻击之后暴击 次数 增加\n    AttackCritPerAttackNTimesIncrease = \"AttackCritPerAttackNTimesIncrease\" , \n\n    // 攻击 暴击概率 增加 百分比\n    AttackCritProbabilityIncreasePercent = \"AttackCritProbabilityIncreasePercent\" ,  \n\n    // 攻击 暴击 倍数 增加 百分比\n    AttackCritMultipleIncreasePercent = \"AttackCritMultipleIncreasePercent\" ,  \n\n\n\n    // 攻击 子弹 飞行速度 增加 百分比\n    AttackBulletMoveSpeedIncreasePercent = \"AttackBulletMoveSpeedIncreasePercent\" , \n\n    // 攻击 子弹 穿透 增加\n    AttackBulletPassIncrease = \"AttackBulletPassIncrease\" , \n\n    // 攻击 子弹 弹射边框次数 增加\n    AttackBulletBounceRectIncrease = \"AttackBulletBounceRectIncrease\" , \n\n    // 攻击 子弹 弹射边框和敌人次数 增加\n    AttackBulletBounceRectEnemyIncrease = \"AttackBulletBounceRectEnemyIncrease\" , \n\n    // 攻击 子弹 在敌人间弹射次数 增加\n    AttackBulletBounceBetweenEnemiesIncrease = \"AttackBulletBounceBetweenEnemiesIncrease\" , \n\n    // 攻击 子弹 穿透增加9999,边框反弹。\n    AttackBulletPassInfiniteAndBounceRectIncrease = \"AttackBulletPassInfiniteAndBounceRectIncrease\" , \n\n    // 攻击 子弹 散射 数量 增加\n    AttackBulletScatterIncrease = \"AttackBulletScatterIncrease\" , \n\n    // 攻击 子弹 散射 数量 增加 概率\n    AttackBulletScatterIncreaseProbability = \"AttackBulletScatterIncreaseProbability\" , \n\n    // 攻击 子弹 大小 增加 百分比\n    AttackBulletSizeIncreasePercent = \"AttackBulletSizeIncreasePercent\" , \n\n\n    // 攻击 子弹 连发\n    AttackContinuous = \"AttackContinuous\" , \n\n\n    // 攻击 子弹 给击中的Role添加指定Buff。\n    AttackBulletAddBuff = \"AttackBulletAddBuff\" , \n\n    // 攻击 子弹 击中目标后，范围内给Role添加Buff\n    AttackBulletAddBuffRadius = \"AttackBulletAddBuffRadius\" , \n\n    // 攻击 子弹 击中目标后，范围内给 Role 添加 Buff。范围 增加 百分比\n    AttackBulletAddBuffRadiusIncreasePercent = \"AttackBulletAddBuffRadiusIncreasePercent\" , \n\n    // 攻击 子弹 击中目标后，范围内给 Role 添加 Buff。Buff 数值 增加 百分比\n    AttackBulletAddBuffRadiusBuffIncreasePercent = \"AttackBulletAddBuffRadiusBuffIncreasePercent\" , \n\n    // 攻击 子弹 概率 给击中的Role添加指定Buff。每次击中都是一次独立的概率事件，击中后计算概率。\n    AttackBulletProbabilityAddBuff = \"AttackBulletProbabilityAddBuff\" , \n\n    // 攻击 子弹 附加的中毒Buff 伤害 增加 百分比\n    AttackBulletPoisoningDamageIncreasePercent = \"AttackBulletPoisoningDamageIncreasePercent\" , \n\n    // 攻击 子弹 附加的中毒Buff 持续时间 增加 百分比\n    AttackBulletPoisoningDurationIncreasePercent = \"AttackBulletPoisoningDurationIncreasePercent\" , \n\n    // 攻击 子弹 爆炸 半径 增加 百分比\n    AttackBulletExplodeRadiusIncreasePercent = \"AttackBulletExplodeRadiusIncreasePercent\" , \n\n    // 攻击 子弹 爆炸 伤害 增加 百分比\n    AttackBulletExplodeDamageIncreasePercent = \"AttackBulletExplodeDamageIncreasePercent\" , \n\n\n    // 每波低于30%血量立刻回复20%血\n    HpRegenIncreasePercentBelowPercentPerWave = \"HpRegenIncreasePercentBelowPercentPerWave\" , \n\n\n    // 合并 启用\n    MergeEnable = \"MergeEnable\" , \n\n    // 重叠开启。无参数表示开启实体所有Buff的重叠。\n    OverlapEnable = \"OverlapEnable\" , \n\n    // AttackBulletProbabilityAddBuff =\n\n    // ——————————————————————————————————————————————————————————\n    // 作用在 Player 上的 Buff 词缀\n\n\n\n    // ——————————————————————————————————————————————————————————\n    // 作用在 Role 身上的 Buff 词缀。\n\n    \n\n    // 燃烧\n    Burn = \"Burn\" , \n\n    // 中毒\n    Poisoning = \"Poisoning\" , \n\n    // 中毒。触发伤害是攻击力的百分比\n    PoisoningPercent = \"PoisoningPercent\" , \n\n    // 冰冻\n    Frozen = \"Frozen\" , \n\n    // 减速 百分比\n    MoveSpeedDecreasePercent = \"MoveSpeedDecreasePercent\" , \n\n    // 眩晕\n    Stun = \"Stun\" , \n\n    // 击退\n    Knockback = \"Knockback\" , \n\n    // 爆炸 \n    Explode = \"Explode\" , \n    \n}","import { Role } from \"../Role/Base/Role\";\nimport { RoleMgr } from \"../Role/Base/RoleMgr\";\nimport { RoleMove } from \"../Role/Misc/RoleMove\";\n\nexport class Ai001 {\n\n    public static update( role : Role ) {\n\n        // 不断攻击主角\n\n        role.ai.target = RoleMgr.ins.local ; \n        this.chase( role ) ; \n\n    }\n\n    public static chase( role : Role ) {\n\n        let tar = role.ai.target ; \n        let v = tar.view.root.position.clone().subtract( role.view.root.position ) ;\n        RoleMove.exe( role , v ) ;\n\n    }\n\n}","import { PlayerRole } from \"../../2.Td/Player/PlayerRole\";\nimport { Role } from \"../Role/Base/Role\";\nimport { RoleAnimSpine } from \"../Role/Misc/RoleAnimSpine\";\nimport { RoleAttack } from \"../Role/Misc/RoleAttack\";\nimport { RoleMove } from \"../Role/Misc/RoleMove\";\n\n\nexport class Ai002 {\n\n    public static update( role : Role ) {\n\n        switch( role.ai.state ) {\n\n            case 0 : {\n                this.state_pathMove( role ) ; \n            }\n            break ; \n\n            case 1 : {\n                this.state_chase( role ) ;\n            }\n            break ; \n\n        }\n\n    }\n\n    private static state_pathMove( role : Role ) {\n\n        let pathMove = role.ai.pathMoved ; \n        let path = pathMove.path ; \n        let idx = pathMove.idx ; \n        let targetPos = path[ idx ] ; \n        let v = targetPos.clone().subtract( role.view.root.position ) ;\n        if( v.lengthSqr() <= 20 * 20 ) {\n\n            // 到达节点\n            pathMove.idx++ ; \n\n            if( pathMove.idx >= path.length ) {\n                // 到达终点\n\n                role.ai.target = PlayerRole.ins.main ; \n                role.ai.state = 1 ; \n\n                return ; \n\n            }\n\n            // 更新目标\n            targetPos = path[ pathMove.idx ] ; \n            v = targetPos.clone().subtract( role.view.root.position ) ;\n\n        }\n        \n        // 不断朝向目标移动\n        let bMove = RoleMove.exe( role , v ) ;\n        if( bMove ) {\n            // 累加移动的路径长度\n            role.ai.pathMoved.lenMoved += role.move.offset.lengthSqr() ;\n        }\n\n    }\n\n    private static state_chase( role : Role ) {\n\n        let target = role.ai.target ; \n\n        if( target.life.isDead == true ) {\n            // 目标死亡 待机\n\n            RoleAnimSpine.playIdle( role.view.skeleton ) ; \n\n            return ; \n        }\n\n        let v = target.view.root.position.clone().subtract( role.view.root.position ) ; \n        if( v.lengthSqr() > 100 * 100 ) {\n            // 追击\n\n            RoleMove.exe( role , v ) ;\n\n            return ; \n        }\n\n        // 攻击\n        RoleAttack.exe( role , v ) ;\n\n    }\n\n}","import { Vec3 } from \"cc\";\nimport { Role } from \"../Role/Base/Role\";\nimport { PathMove } from \"./PathMove\";\n\nexport class AiCom {\n\n    public type = 0;\n\n    public state = 0 ;\n\n    // 攻击目标\n    public target : Role ;\n    // // 攻击间隔\n    // public CurrentMax attackInterval = new CurrentMax();\n\n    // // 攻击范围。平方\n    // public float attackRangeSqr = 0 ;\n    // // 视野范围。平方\n    // public float viewRangeSqr = 0 ; \n\n    // public int moveCount = 0;\n    // public int moveCountMax = 60;\n    // public int moveDir;\n\n    public pathMoved : PathMove = null ; \n\n}\n\n","import { Role } from \"../Role/Base/Role\";\nimport { RoleMgr } from \"../Role/Base/RoleMgr\";\nimport { Ai001 } from \"./Ai001\";\nimport { Ai002 } from \"./Ai002\";\n\n\nexport class AiSys {\n\n    public static update() {\n\n        var all = RoleMgr.ins.allEnemies;\n\n        for ( var i = 0; i < all.length; ++i )\n        {\n            var role = all[i];\n            if ( role.ai == null ) continue;\n            this.updateRole( role );\n\n        } // end for\n\n    }\n\n    public static updateRole( role : Role ) {\n\n        Ai002.update( role ) ;\n\n    }\n\n}","\n\nimport { Lang } from '../Misc/Lang';\n\nexport class ArticleString {\n\n    // 取得名字\n    public static getName( articleId : string ) : string {\n\n        // 都转换成1级的ID\n        let strs = articleId.split( \"_\" ) ;\n        if( strs.length == 2 ){\n            articleId = strs[ 0 ] + \"_1\" ; \n        }\n\n        let key = \"ArticleName_\" + articleId ; \n        let str = Lang.get( key ) ;\n        return str ; \n\n    }\n\n    // 取得描述 \n    public static getDescription( articleId : string ) {\n\n        let strs = articleId.split( \"_\" ) ;\n        if( strs.length == 2 ){\n            articleId = strs[ 0 ] + \"_1\" ; \n        }\n\n        let key = \"ArticleDescr_\" + articleId ; \n        let str = Lang.get( key ) ;\n\n        return str ;\n    }\n\n}","import { Account } from \"../../Common/Account/Account\";\nimport { AccountPersist } from \"../../Common/Account/AccountPersist\";\nimport { CfgArticleUnlock, CfgArticleUnlockItem } from \"../../Common/Cfg/CfgArticleUnlock\";\nimport { UiArticleUnlock } from \"../Ui/Popup/UiArticleUnlock\";\nimport { UiMain } from \"../Ui/Main/UiMain\";\nimport { CfgGeneral } from \"../../Common/Cfg/CfgGeneral\";\n\n// 关卡解锁物件\nexport class ArticleUnlockLevel {\n\n    // 配置关卡满足当前关卡条件，就加入解锁数据中，并返回解锁的物件ID列表\n    public static exe() : Array< string > {\n\n        let ret = new Array< string >() ;\n\n        for( let kv of CfgArticleUnlock.data ) {\n\n            let cfgItem = kv[1] ;\n\n            if( this.canUnlock( cfgItem ) == false ) continue ; \n\n            let id = cfgItem.id ; \n            ret.push( id ) ; \n            Account.ins.bag.unlocked.push( id ) ; \n\n        } // end for\n        \n        if( ret.length > 0 ) {\n            AccountPersist.save() ; \n\n            this.ui( ret ) ;\n\n        }\n\n        this.unlockDeployCell() ; \n\n        return ret ; \n\n    }\n\n    // 解锁上阵位置\n    private static unlockDeployCell() {\n\n        let levelIdx = Account.ins.mainLevel.levelIdx ; \n\n        for( let kv of CfgGeneral.ins.bagDeployCellUnlocked ) {\n            let cellIdx = kv[ 0 ] ; \n            let lvIdx = kv[ 1 ] ; \n\n            if( levelIdx >= lvIdx ) {\n                Account.ins.bag.deployCellUnlocked.add( cellIdx ) ; \n            }\n\n        } // end for\n\n\n    }\n\n    // 配置条目是否可解锁\n    private static canUnlock( cfgItem : CfgArticleUnlockItem ) {\n\n        if( cfgItem.levelIdx <= -1 ) return false ; \n\n        let id = cfgItem.id ; \n\n        let levelIdx = Account.ins.mainLevel.levelIdx ; \n\n        // 判断是否达到解锁条件\n        if( cfgItem.levelIdx > levelIdx ) return false ; \n\n        // 判断之前是否已经解锁过了\n        if( Account.ins.bag.unlocked.findIndex( ( e )=>{ return e == id ; } ) != -1 ) return false ; \n\n        return true ; \n\n    }\n\n    // 弹出UI告知玩家\n    private static ui( ids : Array< string > ) {\n\n        UiArticleUnlock.loadAndCreate( ( ui )=>{\n\n            ui.root.setParent( UiMain.ins.root , false ) ; \n            ui.refresh( ids ) ; \n            ui.show() ; \n\n        } ) ;\n\n    }\n\n}","import { CurrentMax } from \"../../Support/SimpleStruct/CurrentMax\";\n\n\n// 攻击\nexport class AttackCom {\n\n    // 锁定计数器\n    public lockCount = 0 ; \n\n    // 子弹ID\n    public bulletId : string = null;\n\n    // 散射数量\n    public scatterCount = 0 ; \n\n    // CD\n    public cd = new CurrentMax() ;\n\n    // 攻击力\n    public damage = 1 ;\n\n    // 暴击\n    public crit = new AttackCrit() ;\n\n    // 吸血\n    public lifeStealing = new AttackLifeStealing() ; \n\n    // 目标选择类型\n    public targeSelType = AttackTargetSelectionType.First ; \n\n    // 统计攻击次数\n    public count = 0 ; \n\n}\n\n// 吸血\nexport class AttackLifeStealing {\n\n    // 吸血百分比\n    public percent = 0 ; \n\n}\n\n// 暴击\nexport class AttackCrit {\n\n    // 概率。小数\n    public probability = 0 ; \n\n    // 倍数\n    public multiple = 0 ; \n\n}\n\n\n// 目标选择类型\nexport enum AttackTargetSelectionType {\n\n    None = \"None\" , \n\n    // 最前\n    First = \"First\" , \n\n    // 随机\n    Rnd = \"Rnd\" , \n\n}","import { sys } from \"cc\";\nimport { Sound } from \"./Sound\";\nimport { Music } from \"./Music\";\n\n// 音频设置持久化\nexport class AudioSettingsPersist {\n\n    public static load() {\n\n        this.loadMusic() ;\n        this.loadSound() ;\n\n    }\n\n    public static save() {\n        this.saveMusic() ;\n        this.saveSound() ; \n    }\n\n\n    public static loadMusic() {\n        let val = sys.localStorage.getItem( \"AudioMusicEnabled\" ) ;\n        if( val == null || val == \"\" ) return ;\n        Music.ins.enabled = val == \"1\" ? true : false ;\n    }\n\n    public static saveMusic() {\n        sys.localStorage.setItem( \"AudioMusicEnabled\" , Music.ins.enabled == true ? \"1\" : \"0\" ) ;\n    }\n\n    public static loadSound() {\n        let val = sys.localStorage.getItem( \"AudioSoundEnabled\" ) ;\n        if( val == null || val == \"\" ) return ;\n        Sound.ins.enabled = val == \"1\" ? true : false ;\n    }\n\n    public static saveSound() {\n        sys.localStorage.setItem( \"AudioSoundEnabled\" , Sound.ins.enabled == true ? \"1\" : \"0\" ) ;\n    }\n\n}","import { Buff } from \"./Buff\";\n\n// 光环组件\nexport class AuraCom {\n\n    public list = new Array< Buff >() ;\n\n}","import { Label, Node, tween } from \"cc\";\nimport { CfgArticle } from \"../../../Common/Cfg/CfgArticle\";\nimport { CfgArticleGrade } from \"../../../Common/Cfg/CfgArticleGrade\";\nimport { CfgBuff, CfgBuffItem } from \"../../../Common/Cfg/CfgBuff\";\nimport { AffixType } from \"../../World/1.Base/Buff/Affix\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\nimport { TowerAuraScopeExpand } from \"../../World/1.Base/Tower/Misc/TowerAuraScopeExpand\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\nimport { EffectFactory } from \"../Merge/EffectFactory\";\n\n\n// 光环提示\nexport class TowerAuraHint {\n\n    // 移动\n    public exe( article : BagArticle , cells : Array< UiBagCell > ) {\n\n        if( article == null || cells == null ) {\n            this.clear() ; \n            return ; \n        }\n\n        // 重置\n        this.set2.clear() ; \n        this.set.clear() ; \n        for( let kv of this.map ) {\n            let ui = kv[1] ;\n            ui.txt.string = \"\" ;\n            ui.flagAttackDamage = false ; \n            ui.flagAttackSpeed = false ; \n            ui.flagAttackCritProbability = false ; \n\n        } // end for\n\n\n        let auras = this.getBuffs( article.cfg ) ; \n\n        // 扩展形状\n        for( let aura of auras ) {\n\n            switch( aura.affixType ) {\n \n                // 加攻击\n                case AffixType.AuraAttackDamageIncreasePercent : \n                {\n                    let ret = TowerAuraScopeExpand.exe( aura.auraScopeType , cells ) ; \n                    for( let a of ret.article ) {\n\n                        // 排除自己\n                        if( a == article ) continue ; \n                        if( this.canAttack( a ) == false ) continue ; \n\n                        this.set.add( a ) ;\n\n                        let uiItem = this.genOrGetEffect( a ) ;\n                        if( uiItem.flagAttackDamage != true ) {\n                            uiItem.flagAttackDamage = true ;\n\n                            uiItem.txt.string += \"加攻击\\n\" ; \n\n                        }\n\n                    } // end for\n                }\n                break ;\n\n                // 加攻速\n                case AffixType.AuraAttackSpeedIncreasePercent : {\n                    let ret = TowerAuraScopeExpand.exe( aura.auraScopeType , cells ) ; \n                    for( let a of ret.article ) {\n                        \n                        // 排除自己\n                        if( a == article ) continue ; \n                        if( this.canAttack( a ) == false ) continue ; \n\n                        this.set.add( a ) ;\n\n                        let uiItem = this.genOrGetEffect( a ) ;\n                        if( uiItem.flagAttackSpeed != true ) {\n                            uiItem.flagAttackSpeed = true ;\n\n                            uiItem.txt.string += \"加攻速\\n\" ; \n\n                        }\n\n                    } // end for\n                }\n                break ;\n\n                // 加暴击概率\n                case AffixType.AuraAttackCritProbabilityIncrease : {\n                    let ret = TowerAuraScopeExpand.exe( aura.auraScopeType , cells ) ; \n                    for( let a of ret.article ) {\n\n                        // 排除自己\n                        if( a == article ) continue ; \n                        if( this.canAttack( a ) == false ) continue ; \n                        \n                        this.set.add( a ) ;\n\n                        let uiItem = this.genOrGetEffect( a ) ;\n                        if( uiItem.flagAttackCritProbability != true ) {\n                            uiItem.flagAttackCritProbability = true ;\n\n                            uiItem.txt.string += \"加暴击概率\\n\" ; \n\n                        }\n\n                    } // end for\n                }\n                break ;\n\n\n            }\n            \n        } // end for\n\n        // 删除多余的\n        for( let kv of this.map ) {\n            let k = kv[0] ;\n            if( this.set.has( k ) == false ) {\n                this.set2.add( k ) ;\n            }\n        } // end for\n\n        for( let k of this.set2 ) {\n            let ui = this.map.get( k ) ;\n            this.map.delete( k ) ;\n            ui.root.destroy() ; \n        }\n\n\n    }\n\n    // 放置\n    public place() {\n\n        for( let kv of this.map ) {\n            let a = kv[ 0 ] ; \n\n            if( a.cells == null || a.cells.length == 0 ) continue ; \n\n            let effect = EffectFactory.create( \"AuraHint2\" ) ; \n            effect.setParent( WorldNode.ins.layer2 , false );\n            effect.worldPosition = a.view.root.worldPosition ; \n\n        } // end for\n\n        this.clear() ; \n\n    }\n\n    // 清除\n    public clear() {\n\n        for( let kv of this.map ) {\n            kv[1].root.destroy() ; \n        }\n        this.map.clear() ; \n\n        this.set2.clear() ; \n        this.set.clear() ; \n\n    }\n\n    private canAttack( a : BagArticle ) : boolean {\n\n        return a.cfg.tower.atkDamage == 0 ? false : true ;\n\n    }\n\n    // 创建 or 取得 UI\n    private genOrGetEffect( a : BagArticle ) : UiTowerAuraHint {\n\n        let uiItem = this.map.get( a ) ;\n        if( uiItem == null ) {\n\n            uiItem = UiTowerAuraHint.create() ; \n            this.map.set( a , uiItem ) ;\n\n            uiItem.root.setParent( WorldNode.ins.layer1 , false );\n            uiItem.root.worldPosition = a.view.root.worldPosition ; \n\n        }\n\n        return uiItem ;\n\n    }\n\n    private set = new Set< BagArticle >() ; \n    private set2 = new Set< BagArticle >() ; \n\n    private map = new Map< BagArticle , UiTowerAuraHint >() ;\n\n    // 取得所有的 Buff\n    public getBuffs( cfg : CfgArticle ) : Array< CfgBuffItem > {\n\n        let data = this.auraPool.get( cfg.id ) ;\n        if( data != null ) {\n            return data ; \n        }\n\n        let buffs = new Array< CfgBuffItem >() ; \n\n        // 具体实体的 aura\n        for( let id of cfg.tower.buffs ) {\n            let cfgBuffItem = CfgBuff.data.get( id ) ;\n            if( cfgBuffItem.isAura == false ) continue ; \n            buffs.push( cfgBuffItem ) ; \n        }\n\n        // 等级线的 aura\n        let items = CfgArticleGrade.data.get( cfg.gradeLineId ) ;\n        if( items != null ) {\n\n            for( let item of items ) {\n\n                // 等级线天生的\n                for( let id of item.buffIds ) {\n                    let cfgBuffItem = CfgBuff.data.get( id ) ;\n                    if( cfgBuffItem.isAura == false ) continue ; \n                    buffs.push( cfgBuffItem ) ; \n                }\n\n                // 等级线解锁的\n                for( let id of item.unlocked ) {\n                    let cfgBuffItem = CfgBuff.data.get( id ) ;\n                    if( cfgBuffItem.isAura == false ) continue ; \n                    buffs.push( cfgBuffItem ) ; \n                }\n    \n            } // end for            \n\n        }\n\n        this.auraPool.set( cfg.id , buffs ) ;\n\n        return buffs ; \n\n    }\n\n    // 光环数据池\n    public auraPool = new Map< string , Array< CfgBuffItem > >() ;\n\n    public towerDamage = new Array< BagArticle >() ;\n\n}\n\n\nclass UiTowerAuraHint {\n\n    public static create() : UiTowerAuraHint {\n\n        let ui = new UiTowerAuraHint() ; \n        let root = EffectFactory.create( \"AuraHint\" , false ) ; \n        ui.init( root ) ;\n        return ui ; \n\n    }\n\n    public flagAttackDamage = false ; \n    public flagAttackSpeed = false ; \n    public flagAttackCritProbability = false ; \n\n    public root : Node ; \n\n    public txt : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.txt = this.root.getComponentInChildren( Label ) ; \n        this.txt.string = \"\" ;\n\n        // 文字上下浮动\n        let pos1 = this.txt.node.position.clone() ; \n        let pos2 = this.txt.node.position.clone().add3f( 0 , -10 , 0 ) ;\n        tween( this.txt.node ).sequence(\n            tween( this.txt.node ).to( 0.5 , { position : pos2 } ) , \n            tween( this.txt.node ).to( 0.5 , { position : pos1 } )\n\n        ).repeatForever().start() ;\n\n    }\n\n\n}","\n// 光环作用域\nexport enum AuraScopeType {\n\n    // 周围4方向\n    Dir4 = \"Dir4\", \n\n    // 周围8方向\n    Dir8 = \"Dir8\", \n\n    // 同行同列\n    HV = \"HV\", \n\n    // 全屏\n    All = \"All\" , \n\n}","import { instantiate, Node, Size, Tween, Vec2, Vec3 } from \"cc\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { CfgArticle, CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\nimport { CfgShapeItem } from \"../../../Common/Cfg/CfgShape\";\nimport { Tower } from \"../../World/1.Base/Tower/Entity/Tower\";\n\n\n// 背包物品实体\nexport class BagArticle {\n\n    // 配置\n    public cfg : CfgArticle ; \n\n    // 形状配置\n    public cfgShape : CfgShapeItem ; \n\n\n    // 占用的Cell\n    public cells = new Array< UiBagCell >() ; \n\n    // 等级。从1开始。\n    public grade = 1 ; \n\n    // 合成等级。从1开始\n    public gradeMerge = 1 ; \n\n    // 是否是扩展物件\n    public isBagExpand = false ; \n\n    // 关联的塔对象\n    public tower : Tower = null ; \n\n    // 表现\n    public view : BagArticleView = null ; \n\n    \n}\n\n// 表现\nexport class BagArticleView {\n\n    // 表现\n    public root : Node ;\n\n    public main : Node ; \n\n    // 形状原点的位置\n    public posShapeCoordOrig : Vec3 ; \n\n    // 表现的大小\n    public size : Size ; \n\n    // 合并提示形状\n    public effectMergeHintShape : Node ; \n\n    // 缓动动画 合并提示\n    public tweenMergeHint : Tween< Node > = null ; \n\n    // 看广告解锁标签\n    public adTag : Node ; \n\n}\n\n","import { instantiate, Layout, Node, Size, UITransform, Vec2, Vec3 } from \"cc\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { BagArticle, BagArticleView } from \"./BagArticle\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { UiBagCfg } from \"../Main/UiBagCfg\";\nimport { CfgShape } from \"../../../Common/Cfg/CfgShape\";\nimport { TowerFactory } from \"../../World/1.Base/Tower/Entity/TowerFactory\";\n\n\nexport class BagArticleFactory {\n\n    public static create( id : string ) : BagArticle {\n\n        let article = new BagArticle() ; \n\n        BagArticleCfgSet.set( article , id ) ; \n\n        BagArticleViewSet.set( article ) ;\n\n        // 生成 Tower 对象\n        TowerFactory.create( article ) ;\n\n        return article ; \n\n    }\n\n\n}\n\n// 配置设置器\nclass BagArticleCfgSet {\n\n    public static set( article : BagArticle , id : string ) {\n\n        let cfg = CfgArticleMgr.data.get( id ) ; \n        article.cfg = cfg\n        article.gradeMerge = cfg.mergeGrade ; \n\n        article.cfgShape = CfgShape.data.get( cfg.bagShapeId ) ;\n\n        // 扩展格子\n        if( id.startsWith( \"BagExpand\" ) == true ) {\n            article.isBagExpand = true ; \n        }\n\n    }\n\n}\n\n\n// 表现设置器\nclass BagArticleViewSet {\n\n    public static set( article : BagArticle ) {\n\n        let view = article.view = new BagArticleView() ; \n\n        let root = this.createView( article.cfg.id );\n\n        view.root = root ; \n        view.main = root.getChildByPath( \"Main\" );\n\n        // 计算出形状原点的位置\n        view.posShapeCoordOrig = this.calcPos( article.cfgShape.coords ) ; \n\n        // 针对格子扩展物件。如果有布局，去掉。\n        root.getComponent( Layout )?.destroy() ; \n\n\n        this.mergeGrade( article ) ;\n\n        // 内容大小\n        view.size = root.getComponent( UITransform ).getBoundingBoxToWorld().size ; \n\n    }\n\n\n    public static createView( id : string ) : Node {\n\n        // 先去分类中查找\n        let pf = PfMgrBagArticle.getPf( id ) ;\n        let root = instantiate( pf ) ;\n        return root ; \n\n    }\n\n    // 计算瓦片形状中心布局左下角原点的位置\n    private static calcPos( shape : Array< Vec2 > ) : Vec3 {\n\n        let tileSize = UiBagCfg.ins.cellSize ;\n\n        // 取得包围矩形的大小\n        let size = new Vec2( -1 , -1 ) ;\n        for( var coord of shape ) {\n            if( coord.x > size.x ) {\n                size.x = coord.x ; \n            }\n\n            if( coord.y > size.y ) {\n                size.y = coord.y ; \n            }\n\n        }\n        size.x += 1 ; \n        size.y += 1 ; \n\n        // 矩形原点的位置。\n        let pos = new Vec3() ; \n        pos.x = size.x * tileSize.width / -2 + tileSize.width / 2 ;\n        pos.y = size.y * tileSize.height / -2 + tileSize.height / 2\n\n        // // 原点的位置偏移到原点坐标位置\n        // pos.x += coordOrig.x * tileSize.width ; \n        // pos.y += coordOrig.y * tileSize.height ; \n\n        return pos ;\n\n    }\n\n    // 显示合成等级\n    private static mergeGrade( article : BagArticle ) {\n\n        let key = \"MergeGrade/Grade\" + article.gradeMerge ; \n        let pf = PfMgrBagArticle.bagArticle.getChildByPath( key ) ; \n        if( pf == null ) return ; \n\n        let node = instantiate( pf ) ;\n        node.setParent( article.view.root , false ) ;\n        node.position = Vec3.ZERO ; \n\n        switch( article.cfgShape.id ) {\n            case \"Dot\" : {\n                node.position = new Vec3( 25 , -20 ).multiplyScalar( 1.5 ) ; \n            }\n            break ; \n\n            case \"H2\" : {\n                node.position = new Vec3( 60 , -20 ).multiplyScalar( 1.5 ) ; \n                \n            }\n            break ; \n\n            case \"H3\" : {\n                // node.position = new Vec3( 25 , -20 ).add3f( 60 * 2 , 0 , 0 ) ; \n            }\n            break ; \n\n            case \"V2\" : {\n                node.position = new Vec3( 25 , -60 ).multiplyScalar( 1.5 ) ; \n            }\n            break ; \n\n            case \"V3\" : {\n                node.position = new Vec3( 25 , -100 ).multiplyScalar( 1.5 ) ; \n            }\n            break ; \n\n            case \"R2x2_3_2\" : {\n                node.position = new Vec3( -10 , -60 ).multiplyScalar( 1.5 ) ; \n            }\n            break ; \n\n            case \"R2x2_3_1\" : \n            case \"R2x2_3_3\" : \n            case \"R2x2_3_4\" : \n            case \"R2x2\" : \n            {\n                node.position = new Vec3( 60 , -60 ).multiplyScalar( 1.5 ) ; \n            }\n            break ;\n\n            case \"T\" : {\n                node.position = new Vec3( 25 , -60 ).multiplyScalar( 1.5 ) ; \n            }   \n            break ; \n\n\n        }\n\n    }\n\n}","import { Account } from \"../../../Common/Account/Account\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { CfgArticleGrade, CfgArticleGradeItem } from \"../../../Common/Cfg/CfgArticleGrade\";\n\n// 物件等级数据统计\nexport class BagArticleGradeHelper {\n\n    // 取得等级，用成长线ID\n    public static getGradeByLineId( gradeLineId : string ) : number {\n\n        let currentGrade = Account.ins.bag.grade.get( gradeLineId ) ; \n        if( currentGrade == null ) {\n            currentGrade = 1 ; \n        }\n\n        return currentGrade ; \n\n    }\n\n    // 取得物件当前等级的配置\n    public static getCfgCurrent( idArticle : string ) : CfgArticleGradeItem {\n\n        // 查找到升级线\n        let cfgArticle = CfgArticleMgr.data.get( idArticle ) ;\n        if( cfgArticle == null ) {\n            return null ;\n        }\n\n        let grade = CfgArticleGrade.data.get( cfgArticle.gradeLineId ) ; \n        if( grade == null ) {\n            return null ; \n        }\n\n        let currentGrade = Account.ins.bag.grade.get( cfgArticle.gradeLineId ) ; \n        if( currentGrade == null ) {\n            currentGrade = 1 ; \n        }\n        currentGrade-- ; \n\n        return grade[ currentGrade ] ; \n\n    }\n\n    // 取得物件下一个等级的配置\n    public static getCfgNext( idArticle : string ) : CfgArticleGradeItem {\n\n        // 查找到升级线\n        let cfgArticle = CfgArticleMgr.data.get( idArticle ) ;\n        if( cfgArticle == null ) {\n            return null ;\n        }\n\n        let grade = CfgArticleGrade.data.get( cfgArticle.gradeLineId ) ; \n        if( grade == null ) {\n            return null ; \n        }\n\n        let currentGrade = Account.ins.bag.grade.get( cfgArticle.gradeLineId ) ; \n        if( currentGrade == null ) {\n            currentGrade = 1 ; \n        }\n        \n        if( currentGrade >= grade.length ) return null ; \n\n        return grade[ currentGrade ] ; \n\n\n    }\n\n    // 取得物件当前等级，从0到当前等级的条目\n    public static getCfgCurrentItems( idArticle : string ) : Array< CfgArticleGradeItem > {\n\n        // 查找到升级线\n        let cfgArticle = CfgArticleMgr.data.get( idArticle ) ;\n        if( cfgArticle == null ) {\n            return null ;\n        }\n\n        let grade = CfgArticleGrade.data.get( cfgArticle.gradeLineId ) ; \n        if( grade == null ) {\n            return null ; \n        }\n\n        let currentGrade = Account.ins.bag.grade.get( cfgArticle.gradeLineId ) ; \n        if( currentGrade == null ) {\n            currentGrade = 1 ; \n        }\n        currentGrade-- ; \n\n\n        let ret = new Array< CfgArticleGradeItem >() ;\n        for( let i = 0 ; i <= currentGrade ; ++i ) {\n            let item = grade[ i ] ;\n            ret.push( item ) ;\n        }\n\n        return ret ; \n\n    }\n\n}","import { tween, UITransform, Vec2 } from \"cc\";\nimport { UiBagGrid } from \"../Grid/UiBagGrid\";\nimport { BagArticle } from \"./BagArticle\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\n\n// 放置到网格中\nexport class BagArticleGridPlace {\n\n    public static exe( article : BagArticle , cells : Array< UiBagCell > , animatedMovement = true ) {\n\n        this.unbind( article ) ; \n        this.bind( article , cells ) ; \n\n        // 表现\n        let cell = this.getOrigCellInBoundingRect( cells ) ; \n        this.view( article , cell , animatedMovement ) ; \n\n    }\n\n    // 求形状在包围矩形中的原点Cell。原点Cell有可能不在 Cells 中\n    private static getOrigCellInBoundingRect( cells : Array< UiBagCell > ) : UiBagCell {\n\n        let coord = new Vec2( Number.MAX_VALUE , Number.MAX_VALUE ) ; \n        for( let cell of cells ) {\n            if( cell.coord.x < coord.x ) {\n                coord.x = cell.coord.x ; \n            }\n\n            if( cell.coord.y < coord.y ) {\n                coord.y = cell.coord.y ; \n            }\n        }\n\n        let cell = UiBagGrid.ins.getCell( coord ) ; \n        return cell ; \n\n    }\n\n    // 处理表现\n    public static view( article : BagArticle , cellOrig : UiBagCell , animatedMovement = true ) {\n\n        // 保持原始缩放\n        let s = article.view.root.scale.clone() ;\n\n        article.view.root.setParent( UiBagGrid.ins.root , true ) ;\n\n        article.view.root.scale = s ;\n\n        let uitrans = article.view.root.getComponent( UITransform ) ;\n        \n        // 考虑到缩放问题\n        let posShapeCoordOrig = uitrans.convertToWorldSpaceAR( article.view.posShapeCoordOrig ) ;\n        posShapeCoordOrig.subtract( uitrans.node.worldPosition ) ;\n\n        let pos = cellOrig.root.worldPosition.clone().subtract( posShapeCoordOrig ) ;\n\n        // pos = article.root.parent.getComponent( UITransform ).convertToNodeSpaceAR( pos ) ;\n\n        if( animatedMovement ) {\n            // 动画移动\n            tween( article.view.root ).to( 0.2 , { worldPosition : pos } ).start() ; \n        }\n        else {\n            // 直接设置\n            article.view.root.worldPosition = pos ; \n        }\n\n\n\n\n\n    }\n\n    // 绑定引用\n    public static bind( article : BagArticle , cells : Array< UiBagCell > ) {\n\n        for( let cell of cells ) {\n            cell.article = article ; \n        }\n\n        article.cells.splice( 0 , article.cells.length ) ;\n        for( let cell of cells ) {\n            article.cells.push( cell ) ;\n        }\n\n    }\n\n    // 解绑定引用\n    public static unbind( article : BagArticle ) {\n\n        for( let cell of article.cells ) {\n            cell.article = null ; \n        }\n\n        article.cells.splice( 0 , article.cells.length ) ;\n\n    }\n\n}","import { tween, Vec2 } from \"cc\";\nimport { GridTraverse } from \"../Grid/GridTraverse\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\nimport { BagArticle } from \"./BagArticle\";\nimport { UiBagGrid } from \"../Grid/UiBagGrid\";\nimport { MergeGrid } from \"../Merge/MergeGrid\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { GridHint } from \"../Grid/GridHint\";\nimport { BagArticleGridPlace } from \"./BagArticleGridPlace\";\nimport { GridModeTransition } from \"../Grid/GridModeTransition\";\nimport { UiBagTouch } from \"../Touch/UiBagTouch\";\nimport { MergeTray } from \"../Merge/MergeTray\";\nimport { UiBubble } from \"../../../Common/Ui/UiBubble\";\nimport { UiMain } from \"../../Ui/Main/UiMain\";\nimport { BagArticleSpeak } from \"./BagArticleSpeak\";\n\n// 放置实体。根据位置\nexport class BagArticleGridPlaceByPos {\n\n    public static exe( article : BagArticle ) {\n\n        if( article.isBagExpand ) {\n\n            this.placeBagExpand( article ) ;\n\n            // return ;\n        }\n\n        let cells = this.getCellsPlace( article ) ;\n        if( cells == null ) {\n            // 不能放置到网格中\n\n            // 和托盘的合并\n            if( MergeTray.tryMerge( article ) == true ) {\n                return ; \n            }\n\n            UiTray.ins.insertArticle( article ) ; \n\n            // 如果是背包扩展，恢复模式\n            if( article.isBagExpand ) {\n                GridModeTransition.toNormal() ; \n                UiBagTouch.ins.limit.clear() ; \n            }\n\n            return ; \n        }\n\n        // 可放置到网格中\n\n        GridHint.hintPlaceableClear() ; \n\n        // 从托盘删除\n        UiTray.ins.removeAndArrange( article ) ; \n\n        // 和网格的合并\n        if( MergeGrid.tryMerge( article , cells ) == true ) {\n            return ; \n        }\n\n        \n        this.goToTray( cells , article ) ;\n        BagArticleGridPlace.exe( article , cells ) ; \n\n        // 放置时说话\n        BagArticleSpeak.place( article ) ; \n\n       \n\n    }\n\n    // 放下的是背包扩展\n    private static placeBagExpand( article : BagArticle ) {\n\n        // let cells = this.getCellsPlace( article ) ;\n\n        // UiBagGrid.ins.showNormal() ; \n\n        // // 回到托盘\n        // UiTray.ins.insertArticle( article ) ; \n\n    }\n\n    // 指定网格中的物体放到托盘\n    private static goToTray( cells : Array< UiBagCell > , articleIgnore : BagArticle ) {\n\n        let list = new Set< BagArticle >() ; \n        for( let cell of cells ) {\n            if( cell.article == null ) continue ; \n            list.add( cell.article ) ;\n\n        } // end for\n\n        for( let a of list ) {\n            if( a == articleIgnore ) continue ; \n            UiTray.ins.insertArticle( a ) ; \n        }\n\n    }\n\n    // 取得形状可以放置的单元格\n    public static getCellsPlace( article : BagArticle ) : Array< UiBagCell > {\n\n        // 匹配网格单元格\n        let cell = this.matchCell( article ) ;\n        if( cell == null ) return null ; \n        \n        // 取得匹配的形状单元格\n        let cells = this.getShapeCells( cell.coord , article.cfgShape.coords ) ;\n        if( cells == null ) return ; \n            \n        // 检查每个单元格是否都解锁\n        for( let cell of cells ) {\n            if( cell.unlocked == article.isBagExpand ) {\n                return null ; \n            }\n        }\n\n        return cells ; \n\n    }\n\n    // 取得 物件 匹配的网格单元格\n    private static matchCell( article : BagArticle ) : UiBagCell {\n\n        let pos = article.view.root.worldPosition.clone().add( article.view.posShapeCoordOrig ) ; \n\n        let lenMin = Number.MAX_VALUE ; \n        let cellRet : UiBagCell = null ; \n        GridTraverse.exe( ( cell )=>{\n\n            let v = cell.root.worldPosition.clone().subtract( pos ) ;\n            let len = v.lengthSqr() ; \n            if( len < 200 * 200 && len < lenMin ) {\n                lenMin = len ;\n                cellRet = cell ; \n            }\n\n        } ) ;\n\n        return cellRet ; \n\n    }\n\n    // 取得形状单元格\n    private static getShapeCells( coordStart : Vec2 , shape : Array< Vec2 > ) : Array< UiBagCell > {\n\n        let ret = new Array< UiBagCell >() ;\n\n        for( let coord of shape ) {\n\n            let coord2 = coordStart.clone().add( coord ) ; \n            let cell2 = UiBagGrid.ins.getCell( coord2 ) ;\n            if( cell2 == null ) {\n                return null ; \n            }\n\n            ret.push( cell2 ) ; \n\n        }\n\n        return ret ; \n\n    }\n\n}","import { BagArticle } from \"../Article/BagArticle\";\nimport { GridTraverse } from \"./GridTraverse\";\n\nexport class ArticleHelper {\n\n    private static list = new Array< BagArticle >() ; \n\n    public static getAllAriclesInGrid() : Array< BagArticle > {\n\n        this.list.splice( 0 , this.list.length ) ;\n    \n        GridTraverse.exe( ( cell )=>{\n    \n            let a = cell.article ; \n            if( a == null ) return ; \n    \n            if( this.list.indexOf( a ) != -1 ) return ; \n            this.list.push( a ) ;\n            \n        } ) ;\n    \n        return this.list ; \n    \n    }\n\n}\n\n","import { BagArticle } from \"../../../Bag/Article/BagArticle\";\nimport { GridTraverse } from \"../../../Bag/Grid/GridTraverse\";\nimport { UiBagCell } from \"../../../Bag/Grid/UiBagCell\";\nimport { TowerFactory } from \"../../1.Base/Tower/Entity/TowerFactory\";\nimport { TowerMgr } from \"../../1.Base/Tower/Entity/TowerMgr\";\n\n// 背包物品上阵\nexport class BagArticleReloaded {\n\n    public static exe() {\n\n        // 清空塔\n        TowerMgr.ins.clear() ; \n\n        GridTraverse.exe( ( cell : UiBagCell )=>{\n            if( cell.article == null ) return ; \n            TowerMgr.ins.add( cell.article.tower ) ;\n        } ) ;\n               \n    }\n\n\n}","import { tween } from \"cc\";\nimport { UiBubble } from \"../../../Common/Ui/UiBubble\";\nimport { BagArticle } from \"./BagArticle\";\nimport { UiMain } from \"../../Ui/Main/UiMain\";\nimport { Lang } from \"../../../Common/Misc/Lang\";\nimport { World } from \"../../../Home/World/World\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\n\n\n// 物件说话\nexport class BagArticleSpeak {\n\n    public static memory = new Set< string >() ; \n\n    public static clearMemory() {\n        this.memory.clear() ; \n    }\n\n    // 放置时\n    public static place( article : BagArticle ) {\n\n        let id = article.cfg.id ; \n        if( this.memory.has( id ) == true ) return ; \n        this.memory.add( id ) ; \n\n        let str = Lang.get( \"AriclePlaceSpeak#\" + id ) ; \n        if( str == null || str == \"\" ) return ; \n\n        let ui = UiBubble.create() ; \n        ui.root.setParent( WorldNode.ins.layer2 , true ) ; \n        ui.root.active = false ; \n\n        tween( ui.root ).sequence(\n\n            tween( ui.root ).delay( 0.3 ) , \n\n            tween( ui.root ).call( ()=>{\n\n                // 没有放置下去\n                if( article.cells.length == 0 ) {\n                    this.memory.delete( id ) ; \n                    return ; \n                }\n                \n                ui.root.active = true ; \n                ui.setString( str ) ;\n                let pos = article.view.root.worldPosition.clone().add3f( 0 , 0 , 0 ) ; \n\n                let cell = article.cells[ 0 ] ;\n                for( let cell2 of article.cells ) {\n                    if( cell2.coord.y > cell.coord.y ){ cell = cell2 ; }\n                }\n\n                pos.y = cell.root.worldPosition.y + 150 ; \n\n                ui.root.worldPosition = pos ; \n\n            } ) , \n\n            tween( ui.root ).delay( 1 ) , \n\n            tween( ui.root ).call( ()=>{\n                ui.root.destroy() ; \n            } ) ,\n\n        ).start() ;\n\n    }\n\n}","import { instantiate, Vec3 } from \"cc\";\nimport { UiBagCfg } from \"../Main/UiBagCfg\";\nimport { UiBagGrid } from \"./UiBagGrid\";\n\n// 背包网格绘制\nexport class BagGridDraw {\n\n    public static exe( ) {\n\n        this.drawCell() ; \n\n    }\n\n    // 绘制网格 \n    public static drawCell() {\n\n        // 中心对其\n\n        let cellPf = UiBagGrid.ins.cellPf ;\n\n        let size = UiBagGrid.ins.gridSize ; \n        let grid = UiBagGrid.ins.grid ; \n\n        // 单元格的显示大小\n        // let cellSize = new Size( 80 , 80 ) ;\n        let cellSize = UiBagCfg.ins.cellSize ; \n\n        let posStart = new Vec3( ) ;\n        posStart.x = size.width * cellSize.width / -2 + cellSize.width / 2 ;\n        posStart.y = size.height * cellSize.height / -2 + cellSize.height / 2\n\n        for( let yCoord = 0 ; yCoord < size.height ; ++yCoord ) {\n\n            for( let xCoord = 0 ; xCoord < size.width ; ++xCoord ) {\n\n                let root = instantiate( cellPf ) ;\n                root.setParent( UiBagGrid.ins.root ) ;\n\n                let cell = grid[ yCoord ][ xCoord ] ; \n\n                cell.init( root ) ; \n\n                // 设置位置\n                let offset = new Vec3( xCoord * cellSize.width , yCoord * cellSize.height ) ;\n                cell.root.position = posStart.clone().add( offset ) ;\n\n                // 处理没有解锁的\n                if( cell.unlocked == false ) {\n\n                    // cell.root.getComponentInChildren( Sprite ).color = Color.BLACK ; \n                    cell.root.active = false ;\n\n                }\n\n            } // end for\n\n        } // end for\n\n\n    }\n\n\n}","import { instantiate, randomRangeInt, Vec3 } from \"cc\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { UiTray } from \"../../../Bag/Main/UiTray\";\nimport { CfgGameBagTrayAricleGen } from \"../../../../Common/Cfg/CfgGameBagTrayAricleGen\";\nimport { WeightProbability } from \"../../../../SL/Common/Misc/WeightProbability\";\nimport { PfMgrBagArticle } from \"../../../../Common/PfMgr/PfMgr\";\nimport { BagArticle } from \"../../../Bag/Article/BagArticle\";\nimport { CfgArticleMgr } from \"../../../../Common/Cfg/CfgArticle\";\nimport { CfgShape } from \"../../../../Common/Cfg/CfgShape\";\n\n// 背包托盘物品生成\nexport class BagTrayAricleGen {\n\n    public static ins = new BagTrayAricleGen() ; \n\n    /*\n        第一次。\n        抽出至少2个2格的武器\n    */ \n    public genFirst() {\n\n        // 清除托盘 重新生成\n        UiTray.ins.clear() ; \n\n        let bagExpandCount = 0 ; \n        let count = 0 ; \n\n        // 先抽取 2 个 2 格的\n        for( let i = 0 ; i < 2 ; ++i ) {\n\n            let id = this.rndDeployWeapon( 2 ) ;\n            if( id == null ) continue ; \n            UiTray.ins.addArticleById( id ) ;\n            ++count ; \n            \n        } // end for\n\n        // 补充不满足3个的。普通抽取\n        for( let i = count ; i < 3 ; ++i ) {\n\n            let id : string = null ; \n\n            // 只能抽出一个扩展格。\n            if( bagExpandCount < 1 ) {\n                id = this.rnd2() ; \n                if( id.startsWith( \"BagExpand\" ) ) { bagExpandCount++ ; }\n            } \n            else {\n                id = this.rndDeploy() ; \n            }\n\n            UiTray.ins.addArticleById( id ) ;\n\n        } // end for\n\n        this.addAdTag() ;     \n\n\n    }\n\n    public gen() {\n\n        let bagExpandCount = 0 ; \n\n        // 清除托盘 重新生成\n        UiTray.ins.clear() ; \n\n        for( let i = 0 ; i < 3 ; ++i ) {\n\n            let id : string = null ; \n\n            // 只能抽出一个扩展格。\n            if( bagExpandCount < 1 ) {\n                id = this.rnd2() ; \n                if( id.startsWith( \"BagExpand\" ) ) { bagExpandCount++ ; }\n            } \n            else {\n                id = this.rndDeploy() ; \n            }\n\n            UiTray.ins.addArticleById( id ) ;\n\n        } // end for\n\n        this.addAdTag() ; \n\n    }\n\n    // 添加广告锁定标签\n    public addAdTag() {\n\n        // 是否满足广告锁定条件\n        let canAddAdTag = ( a : BagArticle )=>{\n\n            // 条件：3级及其以上 或 3格及其以上\n            if( a.cfg.mergeGrade >= 3 ) return true ; \n\n            if( a.isBagExpand == true && a.cfgShape.coords.length >= 3 ) return true ; \n\n            return false ; \n\n        } ; \n\n        let list = UiTray.ins.articles ;\n        for( let i = 0 ; i < list.length ; ++i ) {\n            let a = list[ i ] ;\n\n            if( canAddAdTag( a ) == false ) continue ;\n\n            let id = \"AdTag/\" + a.cfgShape.id ;\n            let pf = PfMgrBagArticle.bagArticle.getChildByPath( id ) ; \n            if( pf == null ) continue ; \n            let adTag = instantiate( pf ) ;\n            a.view.adTag = adTag ;\n            adTag.setParent( a.view.root , false );\n            adTag.position = Vec3.ZERO ; \n            \n        } // end for\n\n    }\n\n    // 必出一个等级2\n    public genGrade2() {\n\n\n        this.BagExpandCount = 0 ; \n\n        // 清除托盘 重新生成\n        UiTray.ins.clear() ; \n\n        // 抽出一个等级2的\n        let id = this.rndDeployGrade( 2 ) ; \n        UiTray.ins.addArticleById( id ) ;\n\n\n        for( let i = 0 ; i < 2 ; ++i ) {\n\n            let id = this.rnd2() ; \n            if( id.startsWith( \"BagExpand\" ) ) {\n                // 背包扩展的处理\n\n                // 只能抽出一个扩展格。\n                if( this.BagExpandCount >= 1 ) {\n                    i-- ; \n                    continue ; \n                }\n\n                this.BagExpandCount++ ;\n            }\n            else{\n                id = this.rndGrade( id ) ; \n            }\n            \n            UiTray.ins.addArticleById( id ) ;\n\n        }\n\n    }\n\n    // 平均概率抽取上阵物品。返回最低级的物品 ID \n    private rnd1() : string {\n\n        let ready = Account.ins.bag.deploy ;\n        let idx = randomRangeInt( 0 , ready.length ) ; \n        let id = ready[ idx ] ; \n        return id ; \n\n    }\n\n\n    // 抽取 上阵的 公共的\n    private rnd2() : string {\n\n        let w = new WeightProbability() ;\n\n        // 处理上阵的\n        let list = Account.ins.bag.deploy ; \n        for( let id of list ) {\n            let cfgItem = CfgGameBagTrayAricleGen.data.get( id ) ; \n            if( cfgItem == null ) continue ; \n\n            w.add( id ,  cfgItem.pw ) ; \n\n        } // end for\n        \n        // 处理公共的\n        let common = CfgGameBagTrayAricleGen.common ; \n        for( let i = 0 ; i < common.length ; ++i ) {\n            let cfgItem = common[ i ] ;\n            w.add( cfgItem.id ,  cfgItem.pw ) ; \n        } // end for\n\n        let str = w.get() ; \n\n        return str ; \n\n    }\n\n    // 抽取 上阵的 等级2\n    private rndDeployGrade( grade : number ) : string {\n\n        let id = this.rndDeploy() ; \n\n        let idArticle = id.split( \"_\" )[ 0 ] + \"_\" + grade ;\n\n        return idArticle ; \n\n    }\n\n    // 抽取 上阵的\n    private rndDeploy() : string {\n\n        let w = new WeightProbability() ;\n\n        // 处理上阵的\n        let ready = Account.ins.bag.deploy ; \n        for( let id of ready ) {\n            let cfgItem = CfgGameBagTrayAricleGen.data.get( id ) ; \n            if( cfgItem == null ) continue ; \n\n            w.add( id ,  cfgItem.pw ) ; \n\n        } // end for\n\n        let str = w.get() ; \n\n        return str ; \n\n    }\n\n    /*\n        抽取 上阵的 武器 指定大于的格子数\n    */ \n    private rndDeployWeapon( cellLenMin : number = 2 ) : string {\n\n        let w = new WeightProbability() ;\n\n        let ready = Account.ins.bag.deploy ; \n        for( let id of ready ) {\n\n            // 过滤掉非武器，格子2格以下的\n            let cfgArtile = CfgArticleMgr.data.get( id ) ; \n            if( cfgArtile.tower.atkDamage <= 0 ) continue ; \n            if( CfgShape.data.get( cfgArtile.bagShapeId ).coords.length < cellLenMin ) continue ; \n\n            let cfgItem = CfgGameBagTrayAricleGen.data.get( id ) ; \n            if( cfgItem == null ) continue ; \n\n            w.add( id ,  cfgItem.pw ) ; \n\n        } // end for\n\n        let str = w.get() ; \n        return str ; \n\n    }\n\n    // 抽取等级。返回的是物件ID\n    private rndGrade( id : string ) : string {\n\n        let w = new WeightProbability() ;\n\n        let cfgItem = CfgGameBagTrayAricleGen.data.get( id ) ; \n\n        for( let i = 0 ; i < cfgItem.grade.length ; ++i ) {\n\n            let pw = cfgItem.grade[ i ] ; \n            let k = ( i + 1 ).toString() ; \n            w.add( k , pw ) ; \n\n        }\n\n        let strGrade = w.get() ; \n        \n        let idArticle = id.split( \"_\" )[ 0 ] + \"_\" + strGrade ;\n\n        return idArticle ; \n\n    }\n\n    private BagExpandCount = 0 ; \n\n\n}","import { Node, tween, UIOpacity, Vec3 } from \"cc\";\nimport { WorldNode } from \"../../1.Base/Support/Misc/WorldNode\";\nimport { UiBagBottom } from \"../../../Bag/Main/UiBagBottom\";\nimport { UiTray } from \"../../../Bag/Main/UiTray\";\nimport { BagTrayAricleGen } from \"./BagTrayAricleGen\";\nimport { UiBagTouch } from \"../../../Bag/Touch/UiBagTouch\";\nimport { UiFeature } from \"../../../Ui/Main/Feature/UiFeature\";\nimport { PlayerRole } from \"../Player/PlayerRole\";\nimport { UiPlaySpeed } from \"../../../Ui/Main/UiPlaySpeed\";\n\n// 背包视角控制器\nexport class BagView {\n\n    // 直接设置进入\n    public static enterDirect() {\n\n        let val = 1.6 ; \n        WorldNode.ins.root.scale = new Vec3( val , val , val ) ;\n        WorldNode.ins.root.position = new Vec3( val , 100 , val ) ; \n\n        // 显示背包操作按钮\n        UiBagBottom.ins.root.active = true ; \n\n        UiTray.ins.root.active = true ; \n        BagTrayAricleGen.ins.genFirst() ; \n\n        // 可拖动背包的物件\n        UiBagTouch.ins.root.active = true ; \n\n        // 如果托盘是单纯放在UI层的话，也要设置缩放\n        UiTray.ins.root.scale = new Vec3( val , val , val ) ;\n\n        // 特性不显示\n        UiFeature.ins.root.parent.active = false ; \n\n        WorldNode.ins.layer0_Road.active = false ; \n        WorldNode.ins.layer0_Spawn.active = false ; \n        PlayerRole.ins.main.view.root.active = false ; \n        UiPlaySpeed.ins.root.active = false ; \n        \n    }\n\n    // 进入 动画渐变\n    public static enter() {\n\n        let val = 1.6 ; \n        let rootWorld = WorldNode.ins.root ; \n\n        // 移动\n        tween( rootWorld ).to( 0.5 , { position : new Vec3( 0 , 100 , 0 ) } ).start() ;\n\n        tween( rootWorld ).sequence(\n\n            tween( rootWorld ).to( 0.5 , { scale : new Vec3( val , val , val ) } ) , \n            tween( rootWorld ).call( ()=>{\n\n                // 显示背包操作按钮\n                UiBagBottom.ins.root.active = true ; \n\n                UiTray.ins.root.active = true ; \n                BagTrayAricleGen.ins.gen() ; \n\n                // 可拖动背包的物件\n                UiBagTouch.ins.root.active = true ; \n\n            } )\n\n        ).start() ; \n\n        // UI不显示\n        this.fadeOut( UiFeature.ins.root.parent ) ; \n\n        this.fadeOut( PlayerRole.ins.main.view.root ) ;\n        this.fadeOut( WorldNode.ins.layer0_Road ) ;\n        this.fadeOut( WorldNode.ins.layer0_Spawn ) ;\n\n        UiPlaySpeed.ins.root.active = false ; \n\n    }\n\n    // 离开 动画渐变\n    public static leave() {\n\n        // 移动\n        tween( WorldNode.ins.root ).to( 0.5 , { position : new Vec3( 0 , 0 , 0 ) } ).start() ;\n\n        // 恢复大小\n        // tween( WorldNode.ins.root ).to( 0.5 , { scal } )\n        tween( WorldNode.ins.root ).to( 0.5 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } ).start()  ; \n\n        // 不显示背包操作按钮\n        UiBagBottom.ins.root.active = false ; \n\n        UiTray.ins.root.active = false ; \n        UiTray.ins.clear() ; \n\n        // 不可拖动背包的物件\n        UiBagTouch.ins.root.active = false ; \n\n\n        this.fadeIn( UiFeature.ins.root.parent ) ;\n\n        this.fadeIn( PlayerRole.ins.main.view.root ) ;\n        this.fadeIn( WorldNode.ins.layer0_Road ) ;\n        this.fadeIn( WorldNode.ins.layer0_Spawn ) ;\n\n        this.fadeIn( UiPlaySpeed.ins.root ) ; \n\n    }\n\n\n\n    public static fadeOut( node : Node ) {\n\n        let opa = node.getComponent( UIOpacity ) ; \n        if( opa == null ) {\n            opa = node.addComponent( UIOpacity ) ; \n        }\n\n        tween( opa ).to( 0.3 , { opacity : 0 } ).call( ()=>{\n            node.active = false ; \n        } ).start() ; \n\n    }\n\n    public static fadeIn( node : Node ) {\n\n        let opa = node.getComponent( UIOpacity ) ; \n        if( opa == null ) {\n            opa = node.addComponent( UIOpacity ) ; \n        }\n\n        node.active = true ; \n        opa.opacity = 0 ; \n\n        tween( opa ).to( 0.3 , { opacity : 255 } ).call( ()=>{\n\n        } ).start() ; \n\n    }\n\n}","import { Vec3 } from \"cc\";\n\n/*\n    贝塞尔曲线\n\n    参考：\n        https://www.cnblogs.com/dixiaodiaohome/p/14157362.html\n        https://zhuanlan.zhihu.com/p/180264303\n\n*/\nexport class BezierCalc\n{\n    // 2阶贝塞尔曲线路径数组\n    public static bezier2Path( startPos : Vec3 , endPos : Vec3 , controlPos : Vec3 , count : number ) : Array<Vec3>\n    {\n        let path = new Array< Vec3 >();\n        for ( let i = 1 ; i <= count ; i++ )\n        {\n            let t = i / count;\n            let val = this.bezier2( startPos , endPos , controlPos , t );\n            path.push( val ) ; \n        }\n        return path;\n    }\n\n    // 2阶贝塞尔曲线 计算点\n    /// <param name=\"t\">0到1的值，0获取曲线的起点，1获得曲线的终点</param>\n    /// <param name=\"start\">曲线的起始位置</param>\n    /// <param name=\"center\">决定曲线形状的控制点</param>\n    /// <param name=\"end\">曲线的终点</param>\n    private static bezier2( start : Vec3 , end : Vec3 , center : Vec3 , t : number ) : Vec3\n    {\n        let v = start.clone() ;\n        v.multiplyScalar( ( 1 - t ) * ( 1 - t ) ) ; \n\n        let temp = center.clone().multiplyScalar( 2 * t * ( 1 - t ) ) ;\n        v.add( temp ) ; \n\n        temp = end.clone().multiplyScalar( t * t ) ;\n        v.add( temp ) ; \n\n        return v ; \n\n        // return ( 1 - t ) * ( 1 - t ) * start + 2 * t * ( 1 - t ) * center + t * t * end;\n    }\n\n    // 3阶贝塞尔曲线路径数组\n    public static bezier3Path( startPos : Vec3 , endPos : Vec3 , controlPos1 : Vec3 , controlPos2 : Vec3 , count : number ) : Array<Vec3>\n    {\n        let path = new Array<Vec3>() ;\n        for ( let i = 1 ; i <= count ; i++ )\n        {\n            let t = i / count;\n            path[ i - 1 ] = this.bezier3( startPos , endPos , controlPos1 , controlPos2 , t );\n        }\n        return path;\n\n    }\n\n    // 3阶贝塞尔曲线 计算点\n    private static bezier3( startPos : Vec3 , endPos : Vec3 , controlPos1 : Vec3 , controlPos2 : Vec3 , t : number ) : Vec3\n    {\n        let t2 = 1 - t;\n\n        let v = startPos.clone().multiplyScalar( t2 * t2 * t2 ) ; \n\n        let temp = controlPos1.clone().multiplyScalar( 3 * t * t2 * t2 ) ; \n        v.add( temp ) ; \n\n        temp = controlPos2.clone().multiplyScalar( 3 * t * t * t2 ) ; \n        v.add( temp ) ; \n\n        temp = endPos.clone().multiplyScalar( t * t * t ) ; \n        v.add( temp ) ; \n\n        return v ; \n\n        // return t2 * t2 * t2 * startPos\n        //     + 3 * t * t2 * t2 * controlPos1\n        //     + 3 * t * t * t2 * controlPos2\n        //     + t * t * t * endPos;\n    }\n\n}","import { Node, Vec3, tween } from \"cc\";\n\n/*\n\n    参考：\n    https://blog.csdn.net/hangsky1990/article/details/129890209\n*/\nexport class BezierMove {\n\n    /*\n        end 终点\n        ctrl 控制点\n    */ \n    public static exe2Order( node : Node , duration : number , end : Vec3 , ctrl : Vec3 , onComplete : ()=>void = null ) { //node为做抛物线运动的节点\n\n        let startPos = node.position //起点，抛物线开始的坐标\n        //计算贝塞尔曲线坐标函数\n        let twoBezier = (t: number, p1: Vec3, cp: Vec3, p2: Vec3) => {\n          let x = (1 - t) * (1 - t) * p1.x + 2 * t * (1 - t) * cp.x + t * t * p2.x;\n          let y = (1 - t) * (1 - t) * p1.y + 2 * t * (1 - t) * cp.y + t * t * p2.y;\n          return new Vec3(x, y, 0);\n        };\n\n        let t = tween(node.position)\n          .to( duration , end, { \n            onUpdate: (target: Vec3, ratio: number) => {\n              node.position = twoBezier(ratio, startPos, ctrl, end); \n            }\n        }) ;\n\n        if( onComplete != null ) {\n            t.call( ()=>{\n                onComplete() ; \n            } ) ;\n        }\n\n        t.start() ; \n\n      }\n\n\n}\n\n\n","import { Role } from \"../../Role/Base/Role\";\nimport { TowerMgr } from \"../../Tower/Entity/TowerMgr\";\nimport { AffixType } from \"../Affix\";\nimport { Buff } from \"../Buff\";\n\n\n//  每波低于30%血量立刻回复20%血\nexport class Buff_HpRegenIncreasePercentBelowPercentPerWave {\n\n    public static tryExe( role : Role ) {\n\n        // 立刻恢复\n        let f = 0 ;\n        for( let tower of TowerMgr.ins.data ) {\n            for( let buff of tower.buff.list ) {\n                if( buff.affix.type == AffixType.HpRegenIncreasePercentBelowPercentPerWave && \n                    buff.extra != true\n                 ) {\n\n                    let p = role.life.hp.current / role.life.hp.max ;\n                    if( p < buff.affix.argNList[ 1 ] ) {\n                        f += buff.affix.argNList[ 0 ] ;\n\n                        // 标记已经使用\n                        buff.extra = true ; \n\n                    } \n\n                }\n\n            } // end for\n\n        } // end for\n\n        if( f <= 0 ) return ;\n\n        let val = role.life.hp.max * f ;\n        role.life.add( val ) ;\n\n        role.view.hpBar.refresh() ; \n\n    }\n\n    // 重新起效 所有的塔\n    public static resetAllTowers() {\n\n        for( let tower of TowerMgr.ins.data ) {\n            for( let buff of tower.buff.list ) {\n                this.resetBuff( buff ) ;\n            } // end for\n        } // end for\n\n    }\n\n    public static resetBuff( buff : Buff ) {\n\n        if( buff.affix.type != AffixType.HpRegenIncreasePercentBelowPercentPerWave ) return ; \n\n        buff.extra = false ; \n\n    }\n\n}\n","import { randomRangeInt, Vec3 } from \"cc\";\nimport { BagArticle } from \"../../../../Bag/Article/BagArticle\";\nimport { GridTraverse } from \"../../../../Bag/Grid/GridTraverse\";\nimport { BagArticleGridPlace } from \"../../../../Bag/Article/BagArticleGridPlace\";\nimport { EffectFactory } from \"../../../../Bag/Merge/EffectFactory\";\nimport { TowerAllUpdate } from \"../../Tower/Misc/TowerAllUpdate\";\nimport { TowerFactory } from \"../../Tower/Entity/TowerFactory\";\nimport { BagArticleFactory } from \"../../../../Bag/Article/BagArticleFactory\";\nimport { TowerMgr } from \"../../Tower/Entity/TowerMgr\";\n\nexport class Buff_RndArticleMergeGradeUpgrade {\n\n    public static exe() {\n\n        let article = this.getRndAritcle() ;\n        if( article == null ) return ; \n\n        this.replace( article ) ;\n\n        // 更新 Buff 数值\n        TowerAllUpdate.updateAll() ;         \n\n    }\n\n    // 实体替换\n    public static replace( article : BagArticle ) : BagArticle {\n\n        // 删除之前的\n        let cells = article.cells.slice() ;\n        BagArticleGridPlace.unbind( article ) ; \n        article.view.root.destroy() ; \n        if( article.tower != null ) {\n            TowerMgr.ins.remove( article.tower ) ;\n        }\n\n\n        // 创建新的\n        let id = article.cfg.id ; \n        let id2 = id.split( \"_\" )[ 0 ] + \"_\" + ( article.cfg.mergeGrade + 1 ) ; \n        let article2 = BagArticleFactory.create( id2 ) ; \n        article2.view.root.setParent( article.view.root.parent ) ;\n        article2.view.root.position = article.view.root.position ; \n        BagArticleGridPlace.bind( article2 , cells ) ;\n        let tower2 = TowerFactory.create( article2 ) ; \n        TowerMgr.ins.data.push( tower2 ) ;\n\n\n        // 播放特效\n        let effect = EffectFactory.create( \"Merge\" ) ;\n        effect.setParent( article2.view.root , false ) ;\n        effect.position = Vec3.ZERO ; \n\n\n        return article2 ; \n\n    }\n\n    // 随机取得一个物件\n    public static getRndAritcle() : BagArticle {\n\n        let list = new Array< BagArticle >() ;\n        GridTraverse.exe( ( cell )=>{\n            let a = cell.article ; \n            if( a == null || a.cfg.mergeGrade >= 4 ) return ; \n            list.push( a ) ;\n        } ) ;\n\n        if( list.length == 0 ) {\n            // 没有符合条件的\n            return null ;\n        }\n\n        // 随机选择一个小于4级的\n        let idx = randomRangeInt( 0 , list.length ) ; \n        return list[ idx ] ;\n\n    }\n\n}","import { CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { Sender } from \"../Bullet/Bullet\";\nimport { CurrentMax } from \"../Support/SimpleStruct/CurrentMax\";\nimport { Affix } from \"./Affix\";\n\n\n/*\n\n    Buff 的定义：\n        有作用时间、触发间隔 的 词缀。\n        凡是词缀出现的地方，都可以用Buff替代。\n\n    Buff 使用的场合：\n        挂在 Player 上。特性，主要影响Tower。\n        挂在 Role 上。\n        \n        子弹天生附带Buff。在子弹配置表中直接配置。\n        3选动态加上去的Buff。Player Buff。\n\n*/\n\n// Buff 基类\nexport class Buff {\n\n    public cfg : CfgBuffItem = null ; \n\n    // 图标ID\n    public iconId : string ; \n\n    // 词缀\n    public affix : Affix = null ; \n\n    // 持续时间\n    public duration : CurrentMax = null ; \n\n    // 触发间隔\n    public interval : CurrentMax = null ; \n\n    // 影响指定类型的实体\n    // public specified : Set< string > = null ; \n\n    // 是否是天生的\n    public isNative = false ; \n\n    // 超出基本需求的额外数据\n    public extra : any ; \n\n    public sender : Sender ; \n}\n\n// 作用于角色身上的Buff\nexport class BuffRole extends Buff {\n\n    // 作用周期\n    public interval : CurrentMax = null ; \n\n}\n\n","import { Buff } from \"./Buff\";\n\nexport class BuffCom {\n\n    // Buff 列表\n    public list = new Array< Buff >() ;\n\n    // 不添加 同一个对象的Buff。\n    public add( buff : Buff ) {\n\n        let idx = this.list.indexOf( buff ) ; \n        if( idx != -1 ) return ; \n\n        this.list.push( buff ) ; \n\n    }\n\n    public remove( buff : Buff ) {\n\n        let idx = this.list.indexOf( buff ) ; \n        if( idx == -1 ) return ; \n\n        this.list.splice( idx , 1 ) ; \n\n    }\n\n}","import { CfgBuff } from \"../../../../Common/Cfg/CfgBuff\";\nimport { CurrentMax } from \"../Support/SimpleStruct/CurrentMax\";\nimport { Affix } from \"./Affix\";\nimport { Buff } from \"./Buff\";\n\nexport class BuffFactory {\n\n    public static create( id : string ) : Buff {\n\n        let buff = new Buff() ; \n\n        let cfg = CfgBuff.data.get( id ) ;\n        if( cfg == null ) {\n\n            console.error( \"BuffFactory.create 配置为空：\" + \"id:\" + id ) ;\n\n            return ;\n        }\n\n        buff.cfg = cfg ; \n\n        buff.affix = new Affix() ; \n        \n        buff.affix.type = cfg.affixType ; \n        buff.affix.argN = cfg.affixArgN ; \n        if( cfg.affixArgNList != null ) {\n            buff.affix.argNList = new Array< number >() ;\n            buff.affix.argNList.push( ...cfg.affixArgNList ) ;\n        }\n        \n        buff.affix.argStr = cfg.affixArgStr ; \n\n        buff.duration = new CurrentMax() ; \n        buff.duration.setCurrentAndMax( cfg.duration ) ; \n\n        buff.interval = new CurrentMax() ; \n        buff.interval.setCurrentAndMax( cfg.interval ) ;\n\n        return buff ; \n\n    }\n\n}","import { AffixType } from \"./Affix\";\nimport { Buff } from \"./Buff\";\n\n\n// 数据 增长的\nexport class DataIncrease {\n\n    // ——————————————————————————————————————————————————————————————————————\n    // 攻击类的 \n\n    // 攻击 伤害 百分比\n    public attackDamageIncreasePercent = 0 ; \n\n    // 攻击 速度 百分比\n    public attackSpeedIncreasePercent = 0 ;\n\n    // 攻击 暴击 概率 增加 百分比\n    public attackCritProbabilityIncreasePercent = 0 ; \n\n    // 攻击 暴击 倍数 增加 百分比\n    public attackCritMultipleIncreasePercent = 0 ; \n\n    // 攻击 吸血 增加 百分比\n    public attackLifeStealingPercent = 0 ; \n\n\n    public AttackBulletPoisoningDamageIncreasePercent = 0 ; \n    public AttackBulletPoisoningDurationIncreasePercent = 0 ; \n\n    public AttackBulletExplodeRadiusIncreasePercent = 0 ; \n    public AttackBulletExplodeDamageIncreasePercent = 0 ; \n\n    public AttackBulletAddBuffRadiusIncreasePercent = 0 ; \n    public AttackBulletAddBuffRadiusBuffIncreasePercent = 0 ; \n\n    public AttackDamageIncreasePercentFullHp = 0 ; \n\n    public AttackBulletProbabilityAddBuff = new Map< string , number >() ;\n\n    // ——————————————————————————————————————————————————————————————————————\n    // Hp 类\n\n    // 血量 上限 增加 具体值\n    public hpMaxIncrease = 0 ; \n\n    // 增加的血量最大值 增加 百分比\n    public hpMaxIncreaseIncreasePercent = 0 ; \n\n    // 血量 恢复 增加 百分比\n    public hpRegenIncreasePercent = 0 ; \n\n    // 血量 恢复 速度 增加 百分比\n    public hpRegenSpeedIncreasePercent = 0 ; \n\n    // ——————————————————————————————————————————————————————————————————————\n    // 移动\n\n    // 移动 速度 变化量 百分比\n    public moveSpeedIncreasePercent = 0 ; \n\n\n\n\n    // 所有数值型属性重置为0。\n    public reset() {\n\n        for( let v in this ) {\n            \n            if( typeof this[ v ] === 'number' ){\n                this[ v.toString() ] = 0 ;\n            } \n\n        } // end for\n\n        this.AttackBulletProbabilityAddBuff.clear() ; \n\n    }\n\n}\n\n// Buff 增量/变化量 计算\nexport class BuffIncreaseCalc {\n\n    public static exeBuffs( buffs : Array<Buff> , data : DataIncrease ) {\n        for( let i = 0 ; i < buffs.length ; ++i ) {\n            this.exeBuff( buffs[ i ] , data ) ; \n        } // end for\n\n    }\n\n    private static exeBuff( buff : Buff , data : DataIncrease ) {\n\n        let affix = buff.affix ; \n        switch( affix.type ) {\n\n            // 攻击力\n            case AffixType.AttackDamageIncreasePercent :\n            case AffixType.AuraAttackDamageIncreasePercent : \n            case AffixType.AuraAttackDamageIncreaseAllPercent : \n            {\n                data.attackDamageIncreasePercent += affix.argN ; \n            }\n            break ; \n\n            // 攻速\n            case AffixType.AttackSpeedIncreasePercent : \n            case AffixType.AuraAttackSpeedIncreasePercent : \n            {\n                data.attackSpeedIncreasePercent += affix.argN\n            }\n            break ; \n\n            // 暴击概率\n            case AffixType.AttackCritProbabilityIncreasePercent : \n            case AffixType.AuraAttackCritProbabilityIncrease : \n            {\n                data.attackCritProbabilityIncreasePercent += affix.argN\n            }   \n            break ;\n\n            // 暴击倍数\n            case AffixType.AttackCritMultipleIncreasePercent : {\n                data.attackCritMultipleIncreasePercent += affix.argN ; \n            }\n            break ; \n\n            // 吸血 按照百分比\n            case AffixType.AttackLifeStealingPercent : \n            {\n                data.attackLifeStealingPercent += affix.argN ; \n                // tower.attack.lifeStealing.percent = affix.arg1 ; \n            }\n            break ; \n\n            // 最大血量 增加 具体值\n            case AffixType.HpMaxIncrease : {\n                // 受等级影响\n                data.hpMaxIncrease += affix.argN ; \n            }\n            break ;\n\n            // 最大血量 增加 具体值 增加 百分比\n            case AffixType.HpMaxIncreaseIncreasePercent : {\n\n                data.hpMaxIncreaseIncreasePercent += affix.argN ; \n\n            }\n            break ;\n\n            // 回血\n            case AffixType.HpRegenIncreasePercent : {\n\n                if( buff.isNative == false ) {\n                    data.hpRegenIncreasePercent += affix.argN ; \n                }\n\n            }\n            break ; \n\n            case AffixType.HpRegenSpeedIncreasePercent : {\n\n                data.hpRegenSpeedIncreasePercent += affix.argN ; \n\n            }\n            break ; \n\n            // 移速\n            case AffixType.MoveSpeedDecreasePercent : \n            {\n                data.moveSpeedIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n\n            case AffixType.AttackBulletProbabilityAddBuff : {\n                let number = data.AttackBulletProbabilityAddBuff.get( buff.affix.argStr ) ;\n                if( number == null ) {\n                    number = 0 ; \n                }\n                number += buff.affix.argN ;\n                data.AttackBulletProbabilityAddBuff.set( buff.affix.argStr , number ) ; \n            }\n            break ; \n\n            case AffixType.AttackDamageIncreasePercentFullHp : {\n                data.AttackDamageIncreasePercentFullHp += buff.affix.argN ; \n            }\n            break ;\n\n            case AffixType.AttackBulletExplodeRadiusIncreasePercent : {\n                data.AttackBulletExplodeRadiusIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n            case AffixType.AttackBulletExplodeDamageIncreasePercent : {\n                data.AttackBulletExplodeDamageIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n            case AffixType.AttackBulletAddBuffRadiusIncreasePercent : {\n                data.AttackBulletAddBuffRadiusIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n            case AffixType.AttackBulletAddBuffRadiusBuffIncreasePercent : {\n                data.AttackBulletAddBuffRadiusBuffIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n            case AffixType.AttackBulletPoisoningDamageIncreasePercent : {\n                data.AttackBulletPoisoningDamageIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n            case AffixType.AttackBulletPoisoningDurationIncreasePercent : {\n                data.AttackBulletPoisoningDurationIncreasePercent += buff.affix.argN ; \n            }\n            break ;             \n\n        }\n\n    }\n\n\n}","import { instantiate, UITransform, Vec3 } from \"cc\";\nimport { Role } from \"../Role/Base/Role\";\nimport { RoleAttributeUpdate } from \"../Role/Misc/RoleAttributeUpdate\";\nimport { EffectPfMgr } from \"../Support/Misc/EffectPfMgr\";\nimport { Affix, AffixType } from \"./Affix\";\nimport { Buff } from \"./Buff\";\nimport { BuffFactory } from \"./BuffFactory\";\nimport { RoleAnimSpine } from \"../Role/Misc/RoleAnimSpine\";\n\n// Buff 操作\nexport class BuffOp {\n\n    // 角色 附加 Buff\n    public static roleAdd( role : Role , id : string ) : [ boolean , Buff ] {\n\n        let buffNew = BuffFactory.create( id ) ;\n\n        let buff = role.buff.list.find( ( e )=>{ return e.affix.type == buffNew.affix.type ; } ) ;\n        if( buff == null ) {\n            // 新增\n\n            this.roleAddNew( role , buffNew ) ; \n\n            return [ true , buffNew ] ; \n        }\n\n        // 更新\n\n        // 重置持续时间\n        buff.duration.max = buffNew.duration.max ; \n        buff.duration.setCurrentAsMax() ; \n\n        buff.interval.max = buffNew.interval.max ; \n\n        return [ false , buff ] ; \n\n    }\n\n    // 新加 buff\n    private static roleAddNew( role : Role , buff : Buff ) {\n\n        role.buff.list.push( buff ) ;\n\n        switch( buff.affix.type ) {\n\n            // 减速\n            case AffixType.MoveSpeedDecreasePercent : {\n                // 更新属性\n                RoleAttributeUpdate.exe( role ) ;\n\n                let effect = instantiate( EffectPfMgr.ins.root.getChildByPath( \"BuffMoveSpeedDecrease\" ) ) ;\n                effect.setParent( role.view.root , false ) ;\n                effect.position = Vec3.ZERO ; \n                effect.setSiblingIndex( 0 ) ; \n\n            }\n            break ; \n\n            case AffixType.AttackSpeedIncreasePercent : {\n                // 更新属性\n                RoleAttributeUpdate.exe( role ) ;\n            }\n            break ;\n\n\n            // 燃烧\n            case AffixType.Burn : {\n\n                let node = instantiate( EffectPfMgr.ins.root.getChildByPath( \"BuffBurn\" ) ) ;\n                node.setParent( role.view.root , false ) ;\n                node.position = Vec3.ZERO ; \n            }\n            break ; \n\n            // 中毒\n            case AffixType.Poisoning : \n            case AffixType.PoisoningPercent : \n            {\n\n                let node = instantiate( EffectPfMgr.ins.root.getChildByPath( \"BuffPoisoning\" ) ) ;\n                node.setParent( role.view.root , false ) ;\n                node.position = Vec3.ZERO ; \n            }\n            break ; \n\n            // 冰冻\n            case AffixType.Frozen : {\n\n                // 停止移动\n                role.move.lockCount++ ; \n                // 停止移动\n                role.attack.lockCount++ ; \n\n                // 动画\n                role.view.skeleton.paused = true ; \n\n                // 效果\n                let node = instantiate( EffectPfMgr.ins.root.getChildByPath( \"BuffFrozen\" ) ) ;\n                node.setParent( role.view.root , false ) ;\n                node.position = Vec3.ZERO ; \n                let uitransEffect = node.getChildByPath( \"Main\" ).getComponent( UITransform ) ;\n                let rectEffect = uitransEffect.getBoundingBox() ;\n\n                let uiTransRole = role.view.main.getComponent( UITransform ) ; \n                let rectRole = uiTransRole.getBoundingBox() ;\n                rectRole.height += 20 ; \n\n                let f = rectRole.height / rectEffect.height ;\n\n                rectEffect.width *= f ;\n                rectEffect.height *= f ; \n                uitransEffect.contentSize = rectEffect.size ; \n\n\n            }\n            break ; \n\n            // 眩晕\n            case AffixType.Stun : {\n\n                // 停止移动\n                role.move.lockCount++ ; \n                // 停止移动\n                role.attack.lockCount++ ; \n\n                // 动画\n                RoleAnimSpine.playIdle( role.view.skeleton ) ;\n\n                // 效果\n                let h = role.view.main.getComponent( UITransform ).contentSize.height ; \n                let node = instantiate( EffectPfMgr.ins.root.getChildByPath( \"BuffStun\" ) ) ;\n                node.setParent( role.view.root , false ) ;\n                node.position = new Vec3( 0 , h + 30 , 0 ) ; \n\n\n            }\n            break ; \n\n        }\n\n    }\n\n    // 移除BuffId\n    public static roleRemove( role : Role , idx : number ) {\n\n        let buff = role.buff.list[ idx ] ; \n        role.buff.list.splice( idx , 1 ) ; \n\n        switch( buff.affix.type ) {\n\n            case AffixType.MoveSpeedDecreasePercent : {\n\n                // 更新属性\n                RoleAttributeUpdate.exe( role ) ;\n\n                // 移除特效\n                let effect = role.view.root.getChildByPath( \"BuffMoveSpeedDecrease\" );\n                effect?.destroy() ; \n\n            }\n            break ; \n\n            case AffixType.AttackSpeedIncreasePercent : {\n                // 更新属性\n                RoleAttributeUpdate.exe( role ) ;\n            }\n            break ;\n\n\n\n            case AffixType.Burn : {\n                // 移除燃烧效果\n\n                // 移除特效\n                let effect = role.view.root.getChildByPath( \"BuffBurn\" );\n                effect?.destroy() ; \n\n            }\n            break ; \n\n            case AffixType.Poisoning : \n            case AffixType.PoisoningPercent : \n            {\n\n                // 移除特效\n                let effect = role.view.root.getChildByPath( \"BuffPoisoning\" );\n                effect?.destroy() ; \n\n            }\n            break ; \n\n            case AffixType.Frozen : {\n\n                // role.move.enabled = true ; \n                role.move.lockCount-- ; \n                role.attack.lockCount-- ; \n\n                role.view.skeleton.paused = false ; \n\n                // 移除特效\n                let effect = role.view.root.getChildByPath( \"BuffFrozen\" );\n                effect?.destroy() ; \n            }\n            break ; \n\n            case AffixType.Stun : {\n\n                // role.move.enabled = true ; \n                role.move.lockCount-- ; \n                role.attack.lockCount-- ; \n\n                // 移除特效\n                let effect = role.view.root.getChildByPath( \"BuffStun\" );\n                effect?.destroy() ; \n\n            }\n            break ; \n\n        }\n\n    }\n\n}","import { Buff } from \"./Buff\";\n\n\n/*\n    Buff 参数重设。合成等级设置。\n    设置buff的值，根据 合成等级、合成等级因子配置。\n*/ \nexport class BuffResetMergeGrade {\n\n    // 设置\n    public static exe( buff : Buff , mergeGrade : number ) {\n\n        let cfg = buff.cfg ; \n\n        // 处理合成等级系数\n        let f = this.getMergeGradeFactor( cfg.mergeGradeFactor , mergeGrade ) ; \n        buff.affix.argN = cfg.affixArgN * f ; \n\n    }\n\n    // 取得合成等级系数\n    public static getMergeGradeFactor ( mergeGradeFactor : Array< number > , mergeGrade : number ) : number {\n\n        if( mergeGradeFactor == null ) {\n            return 1 ;\n        }\n\n        let f = mergeGradeFactor[ mergeGrade - 1 ] ;\n        return f ;\n\n    } ;\n\n}","import { CfgBuff } from \"../../../../Common/Cfg/CfgBuff\";\nimport { Lang } from \"../../../../Common/Misc/Lang\";\nimport { ArticleString } from \"../../../../Common/String/ArticleString\";\n\n\nexport class BuffString {\n\n    public static getDescription( id : string ) : string {\n\n        console.log( \"BuffString.getDescription \" + id ) ; \n\n        let str = this.get1( id ) ;\n        if( str != null ) return str ; \n\n        str = this.get2( id ) ;\n        if( str != null ) return str ; \n\n        return null ;\n\n    }\n\n    // 规则1取，前缀+ID 尝试获取\n    private static get1( id : string ) {\n\n        let key = \"Buff@\" + id ; \n        let str = Lang.get( key ) ;\n        if( str == null || str == \"\" ) return null ;\n\n        str = this.replace( id , str ) ; \n\n        return str ; \n\n    }\n\n    // 规则2取。\n    private static get2( id : string ) {\n\n        let cfg = CfgBuff.data.get( id ) ;\n\n        let name : string = null ; \n\n        let key = \"Buff@\" ; \n        if( cfg.specified != null ) {\n            key += \"Specified-\" ;\n        }\n        else {\n            key += \"General-\" ;\n        }\n\n        key += cfg.affixType.toString()  ;\n\n        let str = Lang.get( key ) ;\n        if( str == null ) { \n            // console.log( \"找不到Buff描述\" ) ;\n            return str ; \n        }\n\n        str = this.replace( id , str ) ; \n\n        return str ; \n\n    }\n\n    private static replace( buffId : string , str : string ) : string {\n\n        let cfg = CfgBuff.data.get( buffId ) ;\n\n        if( cfg.specified != null ) {\n\n            let id2 : string = null ; \n            for( let v of cfg.specified ) {\n                id2 = v ;\n                break ; \n            }\n\n            // let id2 = [...cfg.specified][0] ;\n            let name = ArticleString.getName( id2 ) ; \n            // 替换名字\n            str = str.replace( \"{name}\" , name ) ;\n\n        }\n\n\n        let val = cfg.affixArgN ;\n        // 去掉符号。符号在字符串那边填写\n        val = Math.abs( val ) ; \n        // 值是否百分比。把百分比转换成整数显示。\n        if( buffId.indexOf( \"Percent\" ) != -1 || \n            buffId.indexOf( \"Probability\" ) != -1 ) {\n            val *= 100 ;\n        }\n        str = str.replace( \"{1}\" , val.toString() ) ;\n\n        return str ; \n\n    }\n\n}","import { Node } from \"cc\";\nimport { Role } from \"../Role/Base/Role\";\nimport { Life } from \"../Role/Base/Life\";\nimport { AttackCrit, AttackLifeStealing } from \"../Tower/Entity/AttackCom\";\nimport { MoveCom } from \"../Role/Move/MoveCom\";\nimport { CfgBulletItem } from \"../../../../Common/Cfg/CfgBullet\";\nimport { Buff } from \"../Buff/Buff\";\nimport { PathMove } from \"../Ai/PathMove\";\n\nexport class Bullet {\n\n    public id : string ; \n\n    public cfg : CfgBulletItem = null ; \n\n    // 表现\n    public view = new BulletView() ; \n\n    // 用于控制子弹实体的死亡\n    public life = new Life() ; \n\n    // 生命周期\n    public Lifecycle = 0 ; \n\n    // 伤害\n    public damge = 0 ; \n\n    // 暴击\n    public crit : AttackCrit = null ;\n\n    // 吸血\n    public lifeStealing : AttackLifeStealing = null ; \n\n    // 移动\n    public move = new MoveCom() ; \n    // 路径移动\n    public pathMove : PathMove = null ; \n\n    // 攻击目标\n    public target = new BulletTarget() ; \n\n    // 穿透 个数\n    public passCount = 0 ; \n\n    // 弹射\n    public bounce : BulletBounce = null ;\n  \n    // 击中后添加的 Buff\n    public buffIds = new Array< string >() ; \n    \n    // 击中后添加的 Buff\n    public buffs = new Array< Buff >() ; \n\n    // 发送者\n    public sender : Sender = null ; \n\n}\n\n// 子弹运动类型\nexport enum BulletMoveType {\n\n    None = \"None\", \n\n    // 直线\n    Linear = \"Linear\" ,\n\n    // 追踪\n    Chase = \"Chase\" , \n\n    // 回旋\n    Boomerang = \"Boomerang\" , \n\n}\n\nexport class BulletTarget {\n\n    // 攻击目标\n    public targetRole : Role = null ;\n\n    // 运动类型\n    public moveType = BulletMoveType.Linear ; \n\n}\n\n// 子弹反弹\nexport class BulletBounce {\n\n    public bounceRectEnemy = 0 ; \n\n    // 边框弹射 次数\n    public bounceRect = 0 ; \n\n    // 敌人反弹 次数\n    public bounceEnemy = 0 ; \n\n    // 敌人间弹射 次数\n    public bounceBetweenEnemies = new BulletBounceBetweenEnemies() ; \n\n\n}\n\n// 敌人间反弹\nexport class BulletBounceBetweenEnemies {\n\n    // 弹射次数\n    public count = 0 ; \n\n    // 弹射过的记录\n    public record = new Set< Role >() ; \n\n}\n\nexport class BulletView {\n\n    public root : Node ;\n\n    public rotationType = BulletRotationType.None ; \n\n}\n\n// 子弹运动旋转类型\nexport enum BulletRotationType {\n\n    None = \"None\" , \n\n    // 根据飞行方向旋转\n    Direction = \"Direction\" , \n\n    // 不断旋转\n    Forever = \"Forever\" , \n\n}\n\n// 发送者\nexport class Sender {\n\n    // 发送者ID\n    public id : string ; \n\n}","import { Rect, UITransform } from \"cc\";\nimport { WorldNode } from \"../Support/Misc/WorldNode\";\n\nexport class BulletBounceRect {\n\n    public static ins = new BulletBounceRect() ; \n\n    public rect : Rect ; \n\n    public init() {\n\n        let node = WorldNode.ins.root.getChildByPath( \"Cfg/BulletBounceRect\" ) ; \n        this.rect = node.getComponent( UITransform ).getBoundingBox() ; \n\n        node.destroy() ; \n\n    }\n\n}","import { Collider2D, Contact2DType, instantiate } from \"cc\";\nimport { Bullet, BulletBounce } from \"./Bullet\";\nimport { BulletPfMgr } from \"./BulletPfMgr\";\nimport { CollisionBullet } from \"../Collision/CollisionBullet\";\nimport { CfgBullet } from \"../../../../Common/Cfg/CfgBullet\";\nimport { FrameSecConvert } from \"../../../../Common/Misc/FrameSecConvert\";\n\nexport class BulletFactory {\n\n    public static create( id : string ) {\n\n        let bullet = new Bullet() ; \n        bullet.id = id ; \n\n        bullet.Lifecycle = FrameSecConvert.toFrame( 60 * 5 ) ; \n\n        BulletCfgSet.exe( bullet ) ;\n\n        BulletViewSet.exe( bullet ) ; \n\n        return bullet ; \n\n    }\n\n}\n\n\n// 配置设置\nexport class BulletCfgSet {\n\n    public static exe( bullet : Bullet ) {\n\n        let cfg = CfgBullet.data.get( bullet.id ) ; \n\n        bullet.cfg = cfg ; \n\n        bullet.view.rotationType = cfg.rotationType ; \n\n        bullet.life.hp.setCurrentAndMax( 1 ) ; \n\n        bullet.move.speed = cfg.moveSpeed ; \n\n        bullet.passCount = cfg.passCount ; \n        \n        bullet.bounce = new BulletBounce() ; \n        bullet.bounce.bounceRect = cfg.bounceRect ; \n        bullet.bounce.bounceEnemy = cfg.bounceEnemy ; \n        bullet.bounce.bounceRectEnemy = cfg.bounceRectEnemy ; \n        bullet.bounce.bounceBetweenEnemies.count = cfg.BounceBetweenEnemies ; \n        \n        bullet.target.moveType = cfg.moveType ; \n\n        if( cfg.buffId != null ) {\n            bullet.buffIds.push( cfg.buffId ) ; \n        }\n        \n\n    }\n\n}\n\n\n// 表现设置\nexport class BulletViewSet {\n\n    public static exe( bullet : Bullet ) {\n\n        let cfg = CfgBullet.data.get( bullet.id ) ; \n\n        let id = cfg.viewId != null ? cfg.viewId : bullet.id ; \n\n        let pf = BulletPfMgr.ins.root.getChildByPath( id ) ;\n        bullet.view.root = instantiate( pf ) ;\n\n        this.collsion( bullet ) ;\n\n    }\n\n    // 处理碰撞器\n    private static collsion( bullet : Bullet ) {\n\n        let root = bullet.view.root ; \n        let collider = root.getComponentInChildren(Collider2D);\n        if( collider == null ) return ;\n\n        // 碰撞器绑定对象\n        collider[ \"Bullet\" ] = bullet ; \n\n        collider.on(Contact2DType.BEGIN_CONTACT, CollisionBullet.onBeginContact , CollisionBullet );\n\n    }\n\n}","import { Bullet } from \"./Bullet\";\n\nexport class BulletMgr {\n\n    public static ins : BulletMgr = null ;\n\n    public data = new Array< Bullet >() ; \n\n    public add( bullet : Bullet ) {\n\n        let idx = this.data.indexOf( bullet ) ;\n        if( idx != -1 ) return ; \n        this.data.push( bullet ) ;\n\n    }\n\n    public remove( bullet : Bullet ) {\n        let idx = this.data.indexOf( bullet ) ;\n        if( idx == -1 ) return ; \n        this.data.splice( idx , 1 ) ;\n    }\n\n}\n\n","import { Vec3 } from \"cc\";\nimport { MoveCom } from \"../Role/Move/MoveCom\";\nimport { Bullet } from \"./Bullet\";\n\n\n// 计算计算\nexport class BulletMoveCalc {\n\n    public static exe( move : MoveCom , dir : Vec3 ) {\n\n        // 方向\n        move.direction.set( dir ) ;\n        move.direction.normalize() ; \n\n        // 位移量\n        let offset = move.offset ; \n        offset.set( move.direction ) ;\n        offset.multiplyScalar( move.speed ) ; \n\n    }\n\n    // 朝向目标\n    public static target( bullet : Bullet ) {\n\n        let targetRole = bullet.target.targetRole ; \n        if( targetRole == null ) return ; \n\n        let target = targetRole.view.collider.node ;\n        let v = target.worldPosition.clone().subtract( bullet.view.root.worldPosition ) ; \n        BulletMoveCalc.exe( bullet.move , v ) ;\n\n    }\n\n}","import { math, Vec3 } from \"cc\";\nimport { Bullet, BulletMoveType, BulletRotationType } from \"./Bullet\";\nimport { MoveCom } from \"../Role/Move/MoveCom\";\nimport { BulletBounceRect } from \"./BulletBounceRect\";\nimport { Role } from \"../Role/Base/Role\";\nimport { BulletMoveCalc } from \"./BulletMoveCalc\";\nimport { BulletViewHelper } from \"./BulletViewHelper\";\nimport { Player } from \"../../2.Td/Player/Player\";\n\n// 移动控制\nexport class BulletMove {\n\n    public static update( bullet : Bullet ) {\n\n        if( bullet.pathMove != null ) {\n            this.pathMove( bullet ) ; \n            return ; \n        }\n\n        this.move( bullet ) ; \n        \n        this.rectBounce( bullet ) ; \n\n        this.view( bullet ) ;\n\n    }\n\n    public static pathMove( bullet : Bullet ) {\n\n        let pathMove = bullet.pathMove ; \n        let path = pathMove.path ; \n        let idx = pathMove.idx ; \n        let targetPos = path[ idx ] ; \n        let v = targetPos.clone().subtract( bullet.view.root.position ) ;\n        if( v.lengthSqr() <= 50 * 50 ) {\n\n            // 到达节点\n            pathMove.idx++ ; \n\n            if( pathMove.idx >= path.length ) {\n                // 到达终点\n\n                bullet.life.hp.current = 0 ; \n\n                return ; \n\n            }\n\n            // 更新目标\n            targetPos = path[ pathMove.idx ] ; \n            v = targetPos.clone().subtract( bullet.view.root.position ) ;\n            v.normalize() ;\n            v.multiplyScalar( bullet.move.speed ) ; \n            bullet.move.offset = v ; \n        }\n        \n        // 不断朝向目标移动\n        let pos = bullet.view.root.position.clone() ;\n        pos.add( bullet.move.offset ) ; \n        bullet.view.root.position = pos ; \n\n        // 累加移动的路径长度\n        // pathMove.lenMoved += role.move.offset.lengthSqr() ;\n\n    }\n\n    // 表现\n    public static view( bullet : Bullet ) {\n\n        switch( bullet.view.rotationType ) {\n            case BulletRotationType.Direction : {\n                BulletViewHelper.rotateDir( bullet ) ; \n            }\n            break ; \n        }\n\n    }\n\n    // 执行移动\n    public static move( bullet : Bullet ) {\n\n        if( bullet.target.targetRole != null && bullet.target.moveType == BulletMoveType.Chase ) {\n            this.chaseTarget( bullet ) ; \n            return ; \n        }\n\n        // 没有目标 或者 不追踪目标\n        let pos = bullet.view.root.position.clone() ;\n        pos.add( bullet.move.offset ) ; \n        bullet.view.root.position = pos ; \n\n    }\n\n    // 追踪目标\n    public static chaseTarget( bullet : Bullet ) {\n\n        BulletMoveCalc.target( bullet ) ;\n\n        let pos = bullet.view.root.position.clone() ;\n        pos.add( bullet.move.offset ) ; \n        bullet.view.root.position = pos ; \n\n    }\n\n    // 边框弹射\n    public static rectBounce( bullet : Bullet ) {\n\n        // if( bullet.bounce.bounceRect <= 0 && bullet.bounce.bounceRectEnemy <= 0 ) return ; \n\n        let rect = BulletBounceRect.ins.rect ; \n\n        let pos = bullet.view.root.position ; \n        if( pos.x < rect.xMin || pos.x > rect.xMax ) {\n            \n            if( bullet.bounce.bounceRect > 0 ) {\n                bullet.bounce.bounceRect-- ; \n            }\n            else if( bullet.bounce.bounceRectEnemy > 0 ) {\n                bullet.bounce.bounceRectEnemy-- ; \n            }\n            else {\n                return ;\n            }\n\n            bullet.move.offset.x *= -1 ; \n            bullet.move.direction.x *= -1 ; \n            \n        }\n        else if( pos.y < rect.yMin || pos.y > rect.yMax ){\n\n            if( bullet.bounce.bounceRect > 0 ) {\n                bullet.bounce.bounceRect-- ; \n            }\n            else if( bullet.bounce.bounceRectEnemy > 0 ) {\n                bullet.bounce.bounceRectEnemy-- ; \n            }\n            else {\n                return ;\n            }\n\n            bullet.move.offset.y *= -1 ; \n            bullet.move.direction.y *= -1 ; \n\n\n        }\n\n\n    }\n\n\n}\n\n","import { Node } from \"cc\";\nimport { Bullet } from \"./Bullet\";\n\nexport class BulletPfMgr {\n\n    public static ins = new BulletPfMgr() ; \n\n    public root : Node ; \n\n}","import { math, Rect, Vec3, view } from \"cc\";\nimport { Bullet, BulletRotationType } from \"./Bullet\";\nimport { BulletMgr } from \"./BulletMgr\";\nimport { MoveCom } from \"../Role/Move/MoveCom\";\nimport { BulletMove } from \"./BulletMoveSys\";\n\nexport class BulletSys {\n\n    public static update() {\n\n        let list = BulletMgr.ins.data ; \n        for( let i = list.length - 1 ; i >= 0 ; --i ) {\n\n            let bullet = list[ i ] ;\n           \n            this.outOfBounds( bullet ) ; \n\n            this.lifecycle( bullet ) ; \n            \n            if( bullet.life.hp.current <= 0 ) {\n                this.die( bullet ) ;\n                continue ; \n            } \n\n            BulletMove.update( bullet ) ; \n\n        } // end fpr\n\n    }\n\n    // 生命周期控制\n    private static lifecycle( bullet : Bullet ) {\n\n        if( bullet.Lifecycle > 0 ) {\n            bullet.Lifecycle-- ; \n            if( bullet.Lifecycle == 0 ) {\n                bullet.life.hp.current = 0 ; \n            }\n        }\n\n    }\n\n    // 超出边界的移除掉\n    public static outOfBounds( bullet : Bullet ) {\n\n        if( this.rectBounds == null ) {\n            let size = view.getVisibleSize() ; \n            this.rectBounds = new Rect() ; \n            this.rectBounds.xMin = ( size.width + 200 ) * -1 ; \n            this.rectBounds.xMax = size.width + 200 ; \n            this.rectBounds.yMin = ( size.height + 200 ) * -1 ; \n            this.rectBounds.yMax = size.height + 200 ; \n        }\n\n\n        let pos = bullet.view.root.worldPosition ; \n        if( pos.x < this.rectBounds.xMin || pos.x > this.rectBounds.xMax || \n            pos.y < this.rectBounds.yMin || pos.y > this.rectBounds.yMax \n            )\n        {\n            // 出界\n            bullet.life.hp.current = 0 ; \n        }\n\n    }\n\n    public static rectBounds : Rect ; \n\n    // 子弹死亡\n    public static die( bullet : Bullet ) {\n\n        BulletMgr.ins.remove( bullet ) ; \n\n        bullet.view.root.destroy() ; \n\n    }\n\n}\n\n","import { math, Vec3 } from \"cc\";\nimport { Bullet } from \"./Bullet\";\n\n\n\nexport class BulletViewHelper {\n\n    // 根据飞行方向旋转\n    public static rotateDir( bullet : Bullet ) {\n\n        // 根据飞行方向旋转\n        let v = bullet.move.offset ; \n        let y = math.toDegree( Math.atan2( v.y , v.x ) ) ;\n        bullet.view.root.eulerAngles = new Vec3( 0 , 0 , y ) ;\n\n        // 表现朝向右边，运动往左边时，反向。\n        let s = bullet.view.root.scale.clone() ; \n        if( v.x < 0 ) {\n            if( s.y > 0 ) {\n                s.y *= -1 ; \n                bullet.view.root.scale = s ;\n            }\n        }\n        else {\n            if( s.y < 0 ) {\n                s.y = Math.abs( s.y ) ; \n                bullet.view.root.scale = s ;\n            }\n        }\n\n       \n\n    }\n\n}","import { Input, Node, game } from \"cc\";\n\n// 点击间隔限制。点击相隔多少时间不处理。\nexport class ButtonInterval {\n\n    // \n    public static set( node : Node , fn : ()=>void , interval = 500 ) {\n\n        let t = game.totalTime ; \n        node.on( Input.EventType.TOUCH_END , ()=>{\n\n            let t2 = game.totalTime ; \n            let diff = t2 - t ; \n            if( diff < interval ) { return ; } \n            t = t2 ; \n\n            fn() ; \n\n        } ) ; \n\n    }\n\n}","import { Vec2 } from \"cc\";\nimport { UiBagGrid } from \"./UiBagGrid\";\nimport { UiBagCell } from \"./UiBagCell\";\n\nexport class CellExpand {\n\n    // 扩展4方向\n    public static exe4( coord : Vec2 ) : Array< UiBagCell > {\n\n        let list = new Array< UiBagCell >() ;\n\n        let coord2 = coord.clone() ;\n        coord2.y += 1 ;\n        let cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        coord2 = coord.clone() ;\n        coord2.x += 1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n        \n        coord2 = coord.clone() ;\n        coord2.y -= 1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        coord2 = coord.clone() ;\n        coord2.x -= 1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        return list ; \n\n    }\n\n    // 扩展8方向\n    public static exe8( coord : Vec2 ) : Array< UiBagCell > {\n\n        // let list = new Array< UiBagCell >() ;\n\n        let list = this.exe4( coord ) ;\n\n        let coord2 = coord.clone() ;\n        coord2.x += 1 ;\n        coord2.y += 1 ;\n        let cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        coord2 = coord.clone() ;\n        coord2.x += 1 ;\n        coord2.y += -1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n        \n        coord2 = coord.clone() ;\n        coord2.x += -1 ;\n        coord2.y += -1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        coord2 = coord.clone() ;\n        coord2.x += -1 ;\n        coord2.y += 1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        return list ; \n\n    }\n\n}","import { Vec2 } from \"cc\";\nimport { TileShapeDataParser } from \"./TileShapeDataParser\";\nimport { MergeDefinition } from \"../../Game/Bag/Merge/MergeDefinition\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\nimport { AttackTargetSelectionType } from \"../../Game/World/1.Base/Tower/Entity/AttackCom\";\nimport { CfgTowerItem, CfgTowerParser } from \"./CfgTower\";\n\n// 物品配置表\nexport class CfgArticleMgr {\n\n    public static data = new Map< string , CfgArticle >() ; \n\n}\n\n// 物品配置\nexport class CfgArticle {\n\n    public id : string ; \n\n    // 原始数据\n    public dataOrig : any ; \n\n    // 在背包中的形状\n    public bagShapeId : string ;\n\n    // 合成等级\n    public mergeGrade = -1 ; \n\n    // 局外等级线ID\n    public gradeLineId : string ; \n\n    // 塔的数据\n    public tower = new CfgTowerItem() ; \n\n    // 品质\n    public quality = 1 ; \n\n}\n\n\n\n// 解析器\nexport class CfgArticleParser {\n\n    public static parseJson( json : any ) {\n\n        MergeDefinition.ins = new MergeDefinition() ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgArticle() ;\n            CfgArticleMgr.data.set( id , cfgItem ) ;\n            cfgItem.id = id ;\n\n            let str : string = null ; \n\n            cfgItem.dataOrig = row ; \n\n            cfgItem.bagShapeId = row[ \"BagShapeId\" ] ; \n            \n            str = row[ \"MergeGrade\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.mergeGrade = Number( str ) ; \n            }\n\n            cfgItem.gradeLineId = row[ \"GradeLineId\" ] ; \n\n            str = row[ \"Quality\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.quality = Number( str ) ;\n            }\n\n            this.handleMergeDefinition( id , row ) ;\n\n            CfgTowerParser.parseTowerItem( cfgItem.tower , row ) ; \n\n        } // endf\n\n    }\n\n\n\n    private static handleMergeDefinition( id : string , row : any ) {\n\n        let str = row[ \"MergeDefinition\" ] as string ; \n        if( str == null || str == \"\" ) return ; \n\n        let str2 = row[ \"MergeHybrid\" ] ; \n        let isHybrid = str2 == \"true\" ? true : false ; \n\n        if( isHybrid ) {\n\n            MergeDefinition.ins.allowData.set( id , false ) ; \n\n        }\n\n        let strs = str.split( \",\" ) ;\n        for( let str2 of strs ) {\n            let kv = str2.split( \"->\" ) ; \n            let id2 = kv[ 0 ].trim() ; \n            let id3 = kv[ 1 ].trim() ; \n\n            MergeDefinition.ins.addDefinition( id , id2 , id3 , isHybrid ) ;\n\n        } // end for\n\n    }\n\n}","\n\n// 物品升级\nexport class CfgArticleGrade {\n\n    public static data = new Map< string , Array<CfgArticleGradeItem> >() ; \n\n}\n\nexport class CfgArticleGradeItem {\n\n    // 等级。从 1 开始。\n    public grade = 0 ; \n\n    // 解锁的 Buff，aura \n    public unlocked = new Array< string >() ;\n\n    // 攻击力 增加的\n    public attackDamage = 0 ; \n\n    // 血量 最大值 增加 具体指\n    public hpMaxIncrease = 0 ; \n\n    // 回血 增加 百分比\n    public hpRegenIncreasePercent = 0 ; \n\n    // 回血 增加 具体值\n    public hpRegenIncrease = 0 ; \n\n    // 每波获得的货币/阳光\n    public getMomeyPerWave = 0 ; \n\n    // 附带的buff\n    public buffIds = new Array< string >() ; \n\n    // 升级所需\n    public upgrade = new CfgArticleGradeItemUpgrade() ; \n\n}\n\n// 升级所需\nexport class CfgArticleGradeItemUpgrade {\n\n    // 所需货币\n    public money1 = 0 ; \n\n    // 所需碎片\n    public itemId : string = null ; \n    public itemCount = 0 ; \n\n}\n\n// 解析器\nexport class CfgArticleGradeParser {\n\n    public static parseJson( json : any ) {\n\n        let str : string ; \n\n        let data = CfgArticleGrade.data ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let levelId = row[ \"Id\" ] ;\n            if( levelId == null || levelId == \"\" ) continue ; \n\n            // let levelIdx = Number( levelId ) ; \n\n            let list = data.get( levelId ) ;\n            if( list == null ) {\n                list = new Array< CfgArticleGradeItem >() ; \n                data.set( levelId , list );\n            }\n\n            let cfgItem = new CfgArticleGradeItem() ; \n            list.push( cfgItem ) ; \n\n            // 等级\n            cfgItem.grade = list.length ;\n\n            // 解锁的 \n            str = row[ \"Unlocked\" ] ; \n            if( str != null && str != \"\" ) {\n                let strs = str.split( /[,\\n]/ ) ; \n                for( let str2 of strs ) {\n                    cfgItem.unlocked.push( str2 ) ; \n                } // end for\n            }\n\n\n            str = row[ \"AttackDamage\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.attackDamage = Number( str );\n            }\n            \n            str = row[ \"HpMaxIncrease\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.hpMaxIncrease = Number( str );\n            }\n\n            str = row[ \"HpRegenIncreasePercent\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.hpRegenIncreasePercent = Number( str );\n            }\n\n            str = row[ \"HpRegenIncrease\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.hpRegenIncrease = Number( str );\n            }\n            \n\n            str = row[ \"GetMomeyPerWave\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.getMomeyPerWave = Number( str );\n            }\n\n            str = row[ \"Buff\" ] as string ; \n            if( str != null && str != \"\" ) {\n                let strs = str.split( /[,\\n]/ ) ;\n                cfgItem.buffIds.push( ...strs );\n            }\n            \n            str = row[ \"UpgradeMoney1\" ] ;\n            if( str != null && str != \"\" ) {\n                cfgItem.upgrade.money1 = Number( str ) ;\n            }\n\n            str = row[ \"UpgradeFragment\" ] ;\n            if( str != null && str != \"\" ) {\n                let strs = str.split( \",\" ) ; \n                cfgItem.upgrade.itemId = strs[ 0 ].trim() ;\n                cfgItem.upgrade.itemCount = Number( strs[ 1 ] ) ;\n            }\n\n        } // end for\n\n    }\n\n}\n","\n\nexport class CfgArticleUnlock {\n\n    public static data = new Map< string , CfgArticleUnlockItem >() ; \n\n}\n\nexport class CfgArticleUnlockItem {\n\n    public id : string ; \n\n    public levelIdx = -1 ; \n\n}\n\n// 解析器\nexport class CfgArticleUnlockParser {\n\n    public static parseJson( json : any ) {\n\n        let data = CfgArticleUnlock.data ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            let cfgItem = new CfgArticleUnlockItem() ; \n            CfgArticleUnlock.data.set( id , cfgItem ) ; \n\n            cfgItem.id = id ; \n\n            let str = row[ \"LevelIdx\" ] as string ;\n            \n            cfgItem.levelIdx = Number( str ) ; \n\n\n\n        } // end for\n\n    }\n\n}","\nimport { Affix, AffixType } from \"../../Game/World/1.Base/Buff/Affix\";\nimport { AuraScopeType } from \"../../Game/World/1.Base/Buff/AuraScopeType\";\nimport { BulletRotationType } from \"../../Game/World/1.Base/Bullet/Bullet\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\n\nexport class CfgBuff {\n\n    public static data = new Map< string , CfgBuffItem >() ;  \n\n}\n\nexport class CfgBuffItem {\n\n    public id : string ; \n\n    // 词缀 类型\n    public affixType = AffixType.None ; \n    // 词缀 参数\n    public affixArgN : number = 0 ;\n    public affixArgNList : Array< number > = null ; \n    // 词缀 参数\n    public affixArgStr : string ; \n\n    // 持续时间。帧数。\n    public duration : number = 0 ;\n\n    // 触发间隔。帧数。-1 没有间隔。0 每帧触发。1 间隔1帧触发。\n    public interval = -2 ; \n\n    // 品质等级\n    public grade = 1 ;\n\n    // 指定附加的实体类型\n    public specified : Set< string > = null ; \n\n    // 是否是光环\n    public isAura = false ; \n\n    // 光环 是否可叠加\n    public auraOverlay = true ; \n\n    // 光环 作用域类型\n    public auraScopeType = AuraScopeType.Dir8 ; \n\n    // 合成等级系数\n    public mergeGradeFactor : Array< number > = null ; \n\n    // 在解锁面板中出现的最大次数\n    public unlockCount = -1 ; \n\n}\n\n// 解析器\nexport class CfgBuffParser {\n\n    public static parseJson( json : any ) {\n\n        let str : string = null ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgBuffItem() ;\n            CfgBuff.data.set( id , cfgItem ) ;\n            cfgItem.id = id ;\n\n            str = row[ \"Type\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.affixType = str as AffixType ; \n            }\n\n            str = row[ \"ArgN\" ] ; \n            if( str != null && str != \"\" ) {\n\n                if( typeof str === \"number\" ) {\n                    cfgItem.affixArgN = str ; \n                }\n                else {\n\n                    let strs = str.split( \",\" ) ;\n                    if( strs.length == 1 ) {\n                        cfgItem.affixArgN = Number( str ) ; \n                    }\n                    else {\n                        cfgItem.affixArgN = Number( strs[ 0 ] ) ; \n                        cfgItem.affixArgNList = new Array< number >() ; \n                        for( let str of strs ) {\n                            cfgItem.affixArgNList.push( Number( str ) ) ;\n                        } // end for\n                    }\n\n                }\n\n            }\n\n            str = row[ \"ArgStr\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.affixArgStr = str ; \n            }\n\n            str = row[ \"Duration\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.duration = FrameSecConvert.toFrame( Number( str ) ) ; \n            }\n\n            str = row[ \"Interval\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.interval = FrameSecConvert.toFrame( Number( str ) ) ; \n            }\n\n            str = row[ \"Grade\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.grade = Number( str ) ; \n            }\n\n            str = row[ \"Specified\" ] ; \n            if( str != null && str != \"\" && str != \"All\" ) {\n                cfgItem.specified = new Set< string >() ; \n                let strs = str.split( /[,\\n]/ ).filter( Boolean ) ;\n                for( let t of strs ) {\n                    t = t.trim() ; \n                    cfgItem.specified.add( t ) ;\n                } // end for\n\n            }\n\n            str = row[ \"IsAura\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.isAura = str == \"true\" ? true : false ; \n            }\n\n            str = row[ \"AuraOverlay\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.auraOverlay = str == \"true\" ; \n            }\n\n            str = row[ \"AuraScope\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.auraScopeType = str as AuraScopeType ; \n            }\n\n\n            str = row[ \"MergeGradeFactor\" ] ; \n            if( str != null && str != \"\" ) {\n                let strs = str.split( \",\" ) ;\n                cfgItem.mergeGradeFactor = new Array< number >() ;\n                for( let str2 of strs ) {\n                    cfgItem.mergeGradeFactor.push( Number( str2 ) ) ; \n                } // end for\n                \n            }\n\n            str = row[ \"UnlockCount\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.unlockCount = Number( str ) ; \n            }\n\n\n\n        } // endf\n\n    }\n\n}\n","import { BulletMoveType, BulletRotationType } from \"../../Game/World/1.Base/Bullet/Bullet\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\n\nexport class CfgBullet {\n\n    public static data = new Map< string , CfgBulletItem >() ;  \n\n}\n\nexport class CfgBulletItem {\n\n    public id : string ; \n\n    public viewId : string ; \n\n    // 移动速度\n    public moveSpeed : number ;\n\n    // 穿透个数\n    public passCount : number = 0 ;\n\n    public rotationType = BulletRotationType.None ; \n\n    public bounceRect = 0 ; \n    public bounceEnemy = 0 ; \n    public bounceRectEnemy = 0 ; \n    public BounceBetweenEnemies = 0 ; \n\n    // 运动类型\n    public moveType = BulletMoveType.Linear ; \n\n    // 击中后附带的buff\n    public buffId : string = null ; \n\n}\n\n// 解析器\nexport class CfgBulletParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgBulletItem() ;\n            CfgBullet.data.set( id , cfgItem ) ;\n            cfgItem.id = id ;\n\n            let speed = Number( row[ \"MoveSpeed\" ] ) ; \n            cfgItem.moveSpeed = FrameSecConvert.toSecond( speed ) ; \n\n            let str : string = null ;\n\n            str = row[ \"RotationType\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.rotationType = str as BulletRotationType ; \n            }\n            \n            str = row[ \"Pass\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.passCount = Number( str ) ; \n            }\n            \n            str = row[ \"BounceRect\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.bounceRect = Number( str ) ; \n            }\n\n            str = row[ \"BounceEnemy\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.bounceEnemy = Number( str ) ; \n            }\n\n            str = row[ \"BounceRectEnemy\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.bounceRectEnemy = Number( str ) ; \n            }\n            \n   \n            str = row[ \"BounceBetweenEnemies\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.BounceBetweenEnemies = Number( str ) ; \n            }\n\n            str = row[ \"ViewId\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.viewId = str ; \n            }\n\n            str = row[ \"MoveType\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.moveType = str.trim() as BulletMoveType ;\n            }\n            \n\n            str = row[ \"BuffId\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.buffId = str ; \n            }\n\n        } // endf\n\n    }\n\n}\n","import { CfgItemRewardItem } from \"../../../../Common/Cfg/CfgItemReward\";\r\nimport { ItemData } from \"../../../../Common/Item/ItemData\";\r\nimport { ItemType } from \"../../../../Common/Item/ItemType\";\r\n\r\n\r\nexport class CfgDailyCheckin {\r\n\r\n    public static data = new Array< Array< ItemData > >() ; \r\n\r\n}\r\n\r\nexport class CfgDailyCheckinParser {\r\n\r\n    public static parseJson( json : any ) {\r\n\r\n        let data = CfgDailyCheckin.data ; \r\n\r\n        for( let i = 0 ; i < json.length ; ++i ) {\r\n\r\n            let row = json[ i ] ;\r\n\r\n            let id = row[ \"Id\" ] ;\r\n            if( id == null || id == \"\" ) continue ; \r\n            \r\n            let cfgItem = new Array< ItemData >() ;\r\n            data.push( cfgItem ) ; \r\n\r\n            let str : string = null ; \r\n\r\n            // 遍历列\r\n            for( let i = 1 ; ; ++i ) {\r\n                \r\n                let key = \"Item\" + i ; \r\n                str = row[ key ] ;\r\n                if( str == \"\" || str == null ) break ;\r\n\r\n                let itemData = new ItemData() ; \r\n                cfgItem.push( itemData ) ; \r\n                itemData.id = str.trim() ; \r\n\r\n                key = \"Item1Count\" ; \r\n                itemData.count = Number( row[ key ] ) ; \r\n\r\n\r\n            } // end for\r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n}","import { _decorator, Component, Node } from 'cc';\n\nconst { ccclass, property } = _decorator;\n\n\nexport class CfgDaySign {\n\n    public id : string ;\n\n    public DayGifts: Array<number> = new Array<number>();\n}\n\nexport class CfgDaySignMgr {\n\n    public static data = new Map<string, CfgDaySign>();\n}\n\nexport class CfgDaySignParser {\n\n    public static parseJson(json: any) {\n        for (let i = 0; i < json.length; ++i) {\n\n            let row = json[i];\n\n            let id = row[\"Id\"];\n            if (id == null || id == \"\") continue;\n\n            let cfgItem = new CfgDaySign();\n\n            CfgDaySignMgr.data.set(id, cfgItem);\n            cfgItem.id = id;\n\n            let str = row[\"DayGifts\"];\n\n            if (str && typeof str === \"string\") {\n                let strs = str.split(/[|\\n]/);\n                for (let s of strs) {\n                    let num = Number(s.trim());\n                    if (!isNaN(num)) {\n                        cfgItem.DayGifts.push(num);\n                    }\n                }\n            }\n        }\n    }\n}\n\n\n","\n\n\nexport class CfgFarm {\n\n    public static data = new Array< CfgFarmItem >() ; \n\n}\n\nexport class CfgFarmItem {\n\n    public id : number ; \n    public unlock_level: number;\n}\n\n\nexport class CfgFarmParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            let unlock_level = row[\"UnlockLevel\"];\n            if (unlock_level == null || unlock_level == \"\") continue;\n            \n            let cfgItem = new CfgFarmItem() ;\n            cfgItem.id = id;\n            cfgItem.unlock_level = unlock_level;\n            CfgFarm.data.push( cfgItem ) ; \n\n            cfgItem.id = id ; \n            \n\n        } // endf\n    }\n\n}","import { AffixType } from \"../../Game/World/1.Base/Buff/Affix\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\n\n\nexport class CfgFeature {\n\n    public static data = new Array< CfgFeatureItem >() ; \n\n}\n\nexport class CfgFeatureItem {\n\n    public id : string ; \n\n}\n\n\nexport class CfgFeatureParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgFeatureItem() ;\n            CfgFeature.data.push( cfgItem ) ; \n\n            cfgItem.id = id ; \n\n\n        } // endf\n\n    }\n\n}","import { AffixType } from \"../../Game/World/1.Base/Buff/Affix\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\n\n\nexport class CfgGameBagTrayAricleGen {\n\n    // 上阵的\n    public static data = new Map< string , CfgGameBagTrayAricleGenItem >() ; \n\n    // 公共的条目\n    public static common = Array< CfgGameBagTrayAricleGenItem >() ;\n\n}\n\nexport class CfgGameBagTrayAricleGenItem {\n\n    public id : string ; \n\n    // public isCommon = false ; \n\n    // 本条目的概率权重\n    public pw : number ; \n\n    public grade : Array< number > ; \n\n}\n\n\nexport class CfgGameBagTrayAricleGenParser {\n\n    public static parseJson( json : any ) {\n\n        let str : string = null ; \n        \n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgGameBagTrayAricleGenItem() ;\n\n            str = row[ \"isCommon\" ] ; \n            if( str != null && str != \"\" ) {\n                CfgGameBagTrayAricleGen.common.push( cfgItem ) ;\n            }\n            else {\n                CfgGameBagTrayAricleGen.data.set( id , cfgItem ) ; \n            }\n\n            cfgItem.id = id ;\n\n            cfgItem.pw = Number( row[ \"Weight\" ] ) ; \n\n            // 等级\n            cfgItem.grade = new Array< number >() ; \n            for( let i = 1 ; i < 10 ; ++i ) {\n                let key = \"MergeGrade\" + i ; \n                let str = row[ key ] ; \n                let p = 0 ; \n                if( str != null && str != \"\" ) {\n                    p = Number( str ) ;\n                }\n                cfgItem.grade.push( p ) ; \n                \n            }\n\n\n        } // endf\n\n    }\n\n}","\nexport class CfgGeneral {\n\n    public static ins = new CfgGeneral() ;\n\n    // 背包 初始上阵物件\n    public BagInitDeployedIds = new Array< string >() ; \n\n    // 背包 初始获得的物件\n    public BagInitUnlockedIds = new Array< string >() ; \n\n    // 背包 所有物件\n    public BagAllArticleIds = new Array< string >() ; \n\n    // 背包 上阵位置解锁。[ 位置索引 , 解锁的关卡号 ]\n    public bagDeployCellUnlocked = new Map< number , number >( [ [ 6 , 2 ] , [ 7 , 4 ] ]) ;\n\n}\n\nexport class CfgGeneralParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] as string ;\n            if( id == null || id == \"\" ) continue ; \n            let val = row[ \"Val\" ] as string ; \n\n            switch( id ) {\n\n                case \"BagInitDeployedIds\" : {\n                    let strs = val.split( \",\" ).filter(Boolean) ; \n                    CfgGeneral.ins.BagInitDeployedIds.push( ... strs ); \n                }\n                break ; \n\n                case \"BagInitUnlockedIds\" : {\n                    let strs = val.split( \",\" ).filter(Boolean) ; \n                    CfgGeneral.ins.BagInitUnlockedIds.push( ... strs ); \n                }\n                break ; \n\n                case \"BagAllArticleIds\" : {\n                    let strs = val.split( \",\" ).filter(Boolean);\n                    CfgGeneral.ins.BagAllArticleIds.push( ... strs ); \n                }\n                break ; \n\n            }\n\n\n\n        } // endf\n\n    }\n\n}","import { _decorator, Component, Node } from 'cc';\n\nconst { ccclass, property } = _decorator;\n\nexport class CfgGiftGroup{\n\n    //ItemNum物品ID Num物品数量\n    public Id:string;\n\n    public ItemsId:Array<number>=new Array<number>();\n\n    public ItemsNum:Array<number>=new Array<number>();\n}\n\nexport class CfgGiftGroupMgr{\n    public static data:Map< string , CfgGiftGroup > = new Map< string , CfgGiftGroup >() ;\n\n}\n\nexport class CfgGiftGroupParser{\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) return ; \n            \n            let cfgItem = new CfgGiftGroup() ;\n\n            CfgGiftGroupMgr.data.set( id , cfgItem ) ;\n\n            cfgItem.Id = id ;\n\n            // let str : string = null ; \n\n            let str= row[\"ItemsId\"];\n            if(str!=null&&typeof str===\"number\"){\n                cfgItem.ItemsId.push(Number(str));\n            }\n            if (str !=\"\"&&typeof str===\"string\") {\n                let strs = str.split( /[|\\n]/ ) ;\n                for(let s in strs){\n                    let num = Number(s);\n                    cfgItem.ItemsId.push(num);\n                }     \n            }\n\n\n            str = row[\"ItemsNum\"];\n            if(str!=null&&typeof str===\"number\"){\n                cfgItem.ItemsNum.push(Number(str));\n            }\n            if (str !=\"\") {\n                let strs = str.split( /[|\\n]/ ) ;\n                cfgItem.ItemsNum.push(...strs.map(str => Number(str)));\n            }\n        } \n\n    }\n}\n\n\n","import { _decorator, Component, Node } from 'cc';\n\nexport class CfgInviteConfig{\n\n    public Id:string;\n    //邀请人数\n    public InviteCount:number;\n    //礼包ID\n    public GiftID:string;\n\n}\n\n\nexport class CfgInviteConfigMgr{\n    public static data:Map<string , CfgInviteConfig> = new Map<string , CfgInviteConfig>() ;\n\n}\n\nexport class CfgInviteConfigParser{\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) return ; \n            \n            let cfgItem = new CfgInviteConfig() ;\n\n            CfgInviteConfigMgr.data.set( id , cfgItem ) ;\n\n            cfgItem.Id = id ;\n\n            let str : string = null ; \n            cfgItem.InviteCount=Number(row[ \"InviteCount\" ]);\n\n            cfgItem.GiftID=row[ \"GiftID\" ];\n   \n        } \n\n    }\n}\n\n","import { _decorator, Component, Node } from 'cc';\nimport { ItemType } from '../Item/ItemType';\n\n\n\nexport class CfgItem{\n\n    // ID \n    public id : string;\n\n    // 品质\n    public quality : number;\n\n}\n\nexport class CfgItemMgr{\n\n    public static data = new Map< string , CfgItem >() ;\n\n}\n\nexport class CfgItemParser{\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgItem() ;\n\n            CfgItemMgr.data.set( id , cfgItem ) ;\n\n            cfgItem.id = id ;\n\n            let str : string = null ; \n\n            str = row[ \"Quality\" ] ; \n            if( str != null && str != \"\" ) {\n\n                cfgItem.quality = Number(str) ; \n\n            }\n\n        } \n\n    }\n}\n\n","\n// 物品抽取配置\nexport class CfgItemDraw {\n\n    public static data = new Map< string , CfgItemDrawItem >() ; \n\n}\n\nexport class CfgItemDrawItem {\n\n    public id : string ; \n\n    public min = 0 ; \n\n    public max = 0 ;\n\n    public items = new Array< CfgItemDrawItemItem >() ;\n\n}\n\n\nexport class CfgItemDrawItemItem {\n\n    // 物件ID\n    public id : string = null ; \n\n    // 抽取权重\n    public w = 0 ; \n\n}\n\nexport class CfgItemDrawParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgItemDrawItem() ;\n\n            CfgItemDraw.data.set( id , cfgItem ) ;\n\n            cfgItem.id = id ;\n            cfgItem.min = Number(row[\"Min\"]) ; \n            cfgItem.max = Number(row[\"Max\"]) ; \n\n            for( let i = 1 ; ; ++i ) {\n\n                let key = \"Item\" + i ;\n                let str = row[ key ] as string ; \n                if( str == null || str == \"\" ) break ; \n\n                let strs = str.split( \",\" ) ; \n                if( strs.length < 2 ) continue ; \n\n                let cfgItemItem = new CfgItemDrawItemItem() ; \n                cfgItem.items.push( cfgItemItem ) ; \n                cfgItemItem.id = strs[ 0 ].trim() ; \n                cfgItemItem.w = Number( strs[ 1 ] ) ; \n\n            } // end for\n\n        } // end for\n\n    }\n\n}","import { _decorator, Component, Node } from 'cc';\r\nimport { ItemData } from '../Item/ItemData';\r\n\r\n\r\nexport class CfgItemRewardMgr{\r\n\r\n    public static data = new Map< string , CfgItemRewardItem >() ;\r\n\r\n}\r\n\r\nexport class CfgItemRewardItem {\r\n\r\n    // ID \r\n    public id : string;\r\n\r\n    // 物品列表\r\n    public list = new Array< ItemData > ;\r\n\r\n}\r\n\r\n\r\nexport class CfgItemRewardParser{\r\n\r\n    public static parseJson( json : any ) {\r\n\r\n        for( let i = 0 ; i < json.length ; ++i ) {\r\n\r\n            let row = json[ i ] ;\r\n\r\n            let id = row[ \"Id\" ] ;\r\n            if( id == null || id == \"\" ) continue ; \r\n            \r\n            let cfgItem = new CfgItemRewardItem() ;\r\n\r\n            CfgItemRewardMgr.data.set( id , cfgItem ) ;\r\n\r\n            cfgItem.id = id ;\r\n\r\n            let str : string = null ; \r\n\r\n            for( let i = 1 ; i < 20 ; ++i ) {\r\n                \r\n                let key = \"Item\" + i ; \r\n                str = row[ key ] ;\r\n                if( str == \"\" || str == null ) break ;\r\n\r\n                let strs = str.split( \",\" ) ; \r\n                let itemData = new ItemData() ; \r\n                cfgItem.list.push( itemData ) ; \r\n                itemData.id = strs[ 0 ].trim() ; \r\n                itemData.count = Number( strs[ 1 ] ) ; \r\n\r\n            } // end for\r\n\r\n        } // end for\r\n\r\n    }\r\n}\r\n\r\n","\r\n\r\nexport class CfgLevelGeneralMgr {\r\n\r\n    public static data = new Map< string , CfgLevelGeneralItem >() ; \r\n\r\n}\r\n\r\n// 一关的数据\r\nexport class CfgLevelGeneralItem {\r\n\r\n    // 关卡ID\r\n    public id : string ; \r\n\r\n    // 地图ID\r\n    public mapId : string ; \r\n\r\n\r\n}\r\n\r\n// 波数据管理器解析器\r\nexport class CfgLevelGeneralParser {\r\n\r\n    public static parseJson( json : any ) {\r\n\r\n        let data = CfgLevelGeneralMgr.data ; \r\n\r\n        for( let i = 0 ; i < json.length ; ++i ) {\r\n            let row = json[ i ] ;\r\n\r\n            let id = row[ \"Id\" ].toString() ;\r\n            if( id == null || id == \"\" ) continue ; \r\n\r\n            // let levelIdx = Number( levelId ) ; \r\n            let cfgItem = new CfgLevelGeneralItem() ; \r\n            data.set( id , cfgItem ) ;\r\n            cfgItem.id = id ; \r\n\r\n            cfgItem.mapId = row[ \"MapId\" ] ; \r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n}","import { StringUtil } from \"../../../../SL/Common/StringUtil\";\nimport { FrameSecConvert } from \"../../../../Common/Misc/FrameSecConvert\";\n\n// 关卡配置 波次 出怪\nexport class CfgLevelWaveMgr {\n\n    // 所有的关卡数据\n    public static data = new Map< string , LevelData >() ; \n\n    // 主线的关卡数据\n    public static main = Array< LevelData >( null ) ;\n\n}\n\n// 一关的数据\nexport class LevelData {\n\n    public id : string ; \n\n    // 所有波次\n    public waves = new Array< WaveData >( null ) ; \n\n}\n\n// 一波的数据\nexport class WaveData {\n\n    // 一波通过之后的奖励\n    public rewards = new Array< string >() ; \n\n    // 一波所有的事件项\n    public items = new Array< WaveItem >() ; \n \n}\n\n// 波的事件项\nexport class WaveItem {\n\n    // 触发的时间\n    public triggerTime : number ; \n\n    // 要生成的角色的ID\n    public genRoleId : string ; \n\n   \n    // 血量系数\n    public hpMaxFactor = 1 ; \n \n    // 攻击力系数\n    public attackFactor = 1 ; \n\n}\n\n\n// 波数据管理器解析器\nexport class CfgLevelWaveParser {\n\n    public static parseJson( json : any ) {\n\n        let data = CfgLevelWaveMgr.data ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let levelId = row[ \"Id\" ].toString() ;\n            if( levelId == null || levelId == \"\" ) continue ; \n\n            // let levelIdx = Number( levelId ) ; \n\n            let levelData = data.get( levelId ) ;\n            if( levelData == null ) {\n                levelData = new LevelData() ; \n                levelData.id = levelId ; \n                data.set( levelId , levelData );\n            }\n\n            let wave = this.parseWave( row ) ; \n            levelData.waves.push( wave ) ; \n\n        } // end for\n\n        // 选出主线任务的条目\n        for( let i = 1 ; ; ++i ) {\n\n            let id = i.toString() ;\n\n            let levelData = data.get( id ) ;\n            if( levelData == null ) break ; \n\n            CfgLevelWaveMgr.main.push( levelData ) ; \n\n        } // end for\n\n    }\n\n    // 解析一波的数据\n    private static parseWave( row : any ) : WaveData {\n\n        let wave = new WaveData() ; \n\n        let hpMaxFactor = 1 ;\n        let str = row[ \"HpMaxFactor\" ] ; \n        if( str != null && str != \"\" ) {\n            hpMaxFactor = Number( str ) ; \n        }\n\n        let attackFactor = 1 ; \n        str = row[ \"AttackFactor\" ] ; \n        if( str != null && str != \"\" ) {\n            attackFactor = Number( str ) ; \n        }\n\n        for( let i = 1 ; ; ++i ) {\n\n            // 角色ID\n            let keyId = \"G\" + i + \"_Id\" ; \n            let id = row[ keyId ] as string ; \n            if( id == null || id == \"\" ) break ;\n            \n            // 延迟时间\n            let keyDelay = \"G\" + i + \"_Delay\" ; \n            str = row[ keyDelay ] ; \n            let delay = FrameSecConvert.toFrame( Number( str ) ) ;\n\n            // 数量\n            let key = \"G\" + i + \"_Count\" ; \n            str = row[ key ] ; \n            let count = Number( str ) ; \n \n            // 间隔\n            key = \"G\" + i + \"_Interval\" ; \n            str = row[ key ] ; \n            let interval = FrameSecConvert.toFrame( Number( str ) ) ;\n\n            for( let i = 0 ; i < count ; ++i ) {\n\n                let item = new WaveItem() ; \n                wave.items.push( item ) ; \n\n                item.genRoleId = id ; \n                item.triggerTime = delay + i * interval ; \n                item.hpMaxFactor = hpMaxFactor ; \n                item.attackFactor = attackFactor ; \n\n            } // end for\n\n\n        } // end for\n\n        // 按照时间进行排序\n        wave.items.sort( ( a , b )=>{\n            if( a < b ) return -1;\n            else if( a > b  ) return 1 ;\n            return 0 ; \n        } )\n\n        return wave ; \n\n    }\n\n    \n\n}","import { JsonAsset, resources } from \"cc\";\nimport { CfgLevelWaveParser } from \"../../Game/World/2.Td/Level/CfgLevelWaveMgr\";\nimport { CfgArticleParser } from \"./CfgArticle\";\nimport { CfgArticleGradeParser } from \"./CfgArticleGrade\";\nimport { CfgArticleUnlockParser } from \"./CfgArticleUnlock\";\nimport { CfgBuffParser } from \"./CfgBuff\";\nimport { CfgBulletParser } from \"./CfgBullet\";\nimport { CfgDaySignParser } from \"./CfgDaySign\";\nimport { CfgFeatureParser } from \"./CfgFeature\";\nimport { CfgGameBagTrayAricleGenParser } from \"./CfgGameBagTrayAricleGen\";\nimport { CfgGeneralParser } from \"./CfgGeneral\";\nimport { CfgGiftGroupParser } from \"./CfgGiftGroup\";\nimport { CfgInviteConfigParser } from \"./CfgInviteConfig\";\nimport { CfgItemParser } from \"./CfgItem\";\nimport { CfgItemDrawParser } from \"./CfgItemDraw\";\nimport { CfgRoleParser } from \"./CfgRole\";\nimport { CfgShapeParser } from \"./CfgShape\";\nimport { CfgUpgradeParser } from \"./CfgUpgrade\";\nimport { CfgFarmParser } from \"./CfgFarm\";\nimport { CfgMushroomParser } from \"./CfgMushrom\"\nimport { CfgLevelGeneralParser } from \"../../Game/World/2.Td/Level/CfgLevelGeneralMgr\";\nimport { Prefab } from \"cc\";\nimport { LoaderResources } from \"../Loader/LoaderResources\";\nimport { CfgItemRewardParser } from \"./CfgItemReward\";\nimport { CfgDailyCheckinParser } from \"../../Home/Ui/Popup/DailyCheckin/CfgDailyCheckin\";\nimport { CfgShopParser } from \"../../Home/Ui/Main/Page/Shop/CfgShop\";\nimport { assetManager } from \"cc\";\nimport { LoaderRemote } from \"../Loader/LoaderRemote\";\nimport { LoaderBase } from \"../Loader/LoaderBase\";\n\n// 配置载入\nexport class CfgLoad {\n\n    public exe( onComplete : ()=>void ) {\n\n        // 只执行一次\n        if( this.flag == true ) {\n            onComplete() ; \n            return ; \n        }\n        this.flag = false ;        \n\n        // 从 resources 载入\n        this.pathMode = 1 ; \n        let loader = new LoaderResources() ; \n        loader.onComplete = onComplete ;\n        \n        // 从 远程 阿里 oss 载入\n        // this.pathMode = 2 ; \n        // let loader = new LoaderRemote() ; \n        // loader.onComplete = onComplete ;\n\n\n        this.common( loader ) ;\n        this.home( loader ) ;\n        this.game( loader ) ; \n\n        loader.exe( ) ;\n\n    }\n\n    /*\n        1 Resources 路径，\n        2 远程 URL\n    */ \n    private pathMode = 1 ;\n\n    // 取得实际的载入ID\n    private getPath( key : string ) {\n\n        let ret = key ; \n        switch( this.pathMode ) {\n            case 1 : {\n                ret = \"Common/Cfg/\" + key ;\n            }\n            break ; \n\n            case 2 : {\n                ret = \"https://bagtd.oss-cn-beijing.aliyuncs.com/test001/\" + key + \".json\" ;\n            }\n            break ; \n        }\n\n        return ret ; \n        \n\n    }\n\n    // 公共\n    private common( loader : LoaderBase ) {\n\n        loader.add( this.getPath( \"General\" ) , ( data : JsonAsset )=>{\n            CfgGeneralParser.parseJson( data.json ) ;\n        } ) ;\n\n        // 物品 定义\n        loader.add( this.getPath( \"Item\" ) , ( data : JsonAsset )=>{\n            CfgItemParser.parseJson( data.json ) ;\n        } ) ;\n\n        // 物品 抽取\n        loader.add( this.getPath( \"ItemDraw\" ) , ( data : JsonAsset )=>{\n            CfgItemDrawParser.parseJson( data.json ) ;\n        } ) ;\n\n\n    }\n\n    // 大厅\n    private home( loader : LoaderBase ) {\n\n        // 装备解锁\n        loader.add( this.getPath( \"ArticleUnlock\" ) , ( data : JsonAsset )=>{\n            CfgArticleUnlockParser.parseJson( data.json ) ;\n        } ) ;\n\n        // 物品奖励表\n        loader.add( this.getPath( \"ItemReward\" ) , ( data : JsonAsset )=>{\n            CfgItemRewardParser.parseJson( data.json ) ;\n        } ) ;\n        \n        // 签到\n        loader.add( this.getPath( \"DailyCheckin\" ) , ( data : JsonAsset )=>{\n            CfgDailyCheckinParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Shop\" ) , ( data : JsonAsset )=>{\n            CfgShopParser.parseJson( data.json ) ;\n        } ) ;\n\n        \n\n    }\n\n    // 核心玩法\n    private game( loader : LoaderBase ) {\n\n        // 关卡\n        loader.add( this.getPath( \"LevelGeneral\" ) , ( data : JsonAsset )=>{\n            CfgLevelGeneralParser.parseJson( data.json ) ;\n        } ) ;\n\n        // 关卡 波次\n        loader.add( this.getPath( \"LevelWave\" ) , ( data : JsonAsset )=>{\n            CfgLevelWaveParser.parseJson( data.json ) ;\n        } ) ;\n\n        // 装备\n        loader.add( this.getPath( \"Article\" ) , ( data : JsonAsset )=>{\n            CfgArticleParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Bullet\" ) , ( data : JsonAsset )=>{\n            CfgBulletParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Role\" ) , ( data : JsonAsset )=>{\n            CfgRoleParser.parseJson( data.json ) ; \n        } ) ;\n\n        loader.add( this.getPath( \"Upgrade\" ) , ( data : JsonAsset )=>{\n            CfgUpgradeParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Feature\" ), ( data : JsonAsset )=>{\n            CfgFeatureParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Buff\" ) , ( data : JsonAsset )=>{\n            CfgBuffParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Shape\" ) , ( data : JsonAsset )=>{\n            CfgShapeParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"ArticleGrade\" ) , ( data : JsonAsset )=>{\n            CfgArticleGradeParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"GameBagTrayAricleGen\" ) , ( data : JsonAsset )=>{\n            CfgGameBagTrayAricleGenParser.parseJson( data.json ) ;\n        } ) ;\n\n\n    }\n\n    // 执行标记\n    public flag = false ; \n\n}\n\n\n\n","\n\n\nexport class CfgMushroom {\n\n    public static data = new Map<number, CfgMushroomItem >() ; \n\n}\n\nexport class CfgMushroomItem {\n\n    public id : Number ; \n    public name: string;\n}\n\n\nexport class CfgMushroomParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            let name = row[\"Name\"];\n            if (name == null || name == \"\") continue;\n            \n            let cfgItem = new CfgMushroomItem() ;\n            cfgItem.id = id;\n            cfgItem.name = name;\n            CfgMushroom.data.set(id, cfgItem ) ; \n\n            cfgItem.id = id ; \n\n\n        } // endf\n\n\n    }\n\n}","import { FrameSecConvert } from \"../Misc/FrameSecConvert\";\n\nexport class CfgRole {\n\n    public static data = new Map< string , CfgRoleItem >() ;  \n\n}\n\nexport class CfgRoleItem {\n\n    public id : string ; \n\n    // 视图ID\n    public viewId : string ; \n\n    // 原始数据\n    public dataOrig : any ; \n\n    // 攻击相关——————————————————\n\n    // 攻击伤害\n    public attackDamage : number ; \n    // 攻击CD\n    public attackCd : number ; \n\n\n    // 移速\n    public moveSpeed : number ; \n\n    // 携带的经验值\n    public exp : number ; \n\n    // 生命最大值\n    public lifeHpMax : number ; \n\n    // 血条 ID\n    public hpBarId : string = null ; \n\n}\n\nexport class CfgRoleParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            let cfg = new CfgRoleItem() ; \n\n            cfg.id = id ; \n\n            CfgRole.data.set( id , cfg ) ; \n\n            let str = row[ \"View\" ] ;\n            if( str != null && str != \"\" ) {\n                cfg.viewId = str ;\n            }\n\n            cfg.dataOrig = row ; \n            \n            cfg.moveSpeed = FrameSecConvert.toSecond( Number( row[ \"MoveSpeed\" ] ) ) ; \n\n            cfg.exp = Number( row[ \"Exp\" ] ) ;\n\n            cfg.lifeHpMax = Number( row[ \"LifeHpMax\" ] ) ; \n\n            str = row[ \"AttackDamage\" ] ; \n            if( str != null && str != \"\" ) {\n                cfg.attackDamage = Number( str ) ;\n            }\n\n            str = row[ \"AttackCd\" ] ; \n            if( str != null && str != \"\" ) {\n                cfg.attackCd = FrameSecConvert.toFrame( Number( str ) ) ;\n            }\n\n            str = row[ \"HpBarId\" ] ; \n            if( str != null && str != \"\" ) {\n                cfg.hpBarId = str ; \n            }\n\n        } // end for\n\n    }\n\n}","import { Vec2 } from \"cc\";\nimport { TileShapeDataParser } from \"./TileShapeDataParser\";\n\nexport class CfgShape {\n\n    public static data = new Map< string , CfgShapeItem >() ; \n\n}\n\nexport class CfgShapeItem {\n\n    public id : string ; \n\n    // 形状的字符串表示\n    public str : string ; \n\n    // 形状的数据表示\n    public coords : Array< Vec2 > ; \n\n}\n\n// 解析器\nexport class CfgShapeParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgShapeItem() ;\n            CfgShape.data.set( id , cfgItem ) ;\n            cfgItem.id = id ;\n\n            cfgItem.str = row[ \"Shape\" ] ; \n\n            cfgItem.coords = TileShapeDataParser.exe( cfgItem.str ) ; \n\n\n        } // endf\n\n    }\n\n}\n","import { ItemData } from \"db://assets/Script/Common/Item/ItemData\";\nimport { ItemType } from \"db://assets/Script/Common/Item/ItemType\";\n\nexport class CfgShop {\n\n    public static data = new Map< string , CfgShopItem > ; \n\n    // 每日 固定的\n    public static daliyFixed = new Array< CfgShopItem >() ; \n    // 每日 随机池\n    public static daliy = new Array< CfgShopItem >() ; \n\n    // 金币\n    public static money001 = new Array< CfgShopItem >() ; \n\n}\n\nexport class CfgShopItem {\n\n    public id : string ; \n\n    // 条目语言表Key\n    public nameLangId : string ; \n\n    // 目标物品\n    public target : ItemData ; \n\n    // 花费\n    public cost : ItemData ; \n\n    // 广告 每日限制的ID\n    public adDaliyLimitId : string = null ; \n    // 每日限制总数\n    public adDaliyLimitTotal = 0 ; \n\n}\n\nexport class CfgShopParser {\n\n    public static parseJson( json : any ) {\n\n        let data = CfgShop.data ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            let item = new CfgShopItem() ; \n            data.set( id , item )  ; \n\n            item.id = id ; \n\n            item.nameLangId = row[ \"NameLangId\" ] ; \n\n            item.target = new ItemData( ) ; \n            item.target.id = row[ \"ItemId\" ] ; \n            item.target.count = Number( row[ \"ItemCount\" ] ) ; \n            \n            item.cost = new ItemData( ) ; \n            item.cost.id = row[ \"CostItemId\" ] ; \n            item.cost.count = Number( row[ \"CostItemCount\" ] ) ; \n\n            let str = row[ \"AdDaliyLimitId\" ] ; \n            if( str != null && str != \"\" ) {\n\n                item.adDaliyLimitId = str ; \n\n                str = row[ \"AdDaliyLimitTotal\" ] ; \n                item.adDaliyLimitTotal = Number( str ) ; \n\n            }\n\n            // 分类\n            if( id.startsWith( \"Money001\" ) ) {\n                CfgShop.money001.push( item ) ;\n            }\n            else if( id.startsWith( \"DaliyFixed\" ) ) {\n                CfgShop.daliyFixed.push( item ) ;\n            }\n            else if( id.startsWith( \"Daliy\" ) ) {\n                CfgShop.daliy.push( item ) ;\n            }\n            \n\n        } // end for\n\n    }\n\n}","\nimport { AttackTargetSelectionType } from \"../../Game/World/1.Base/Tower/Entity/AttackCom\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\nimport { SliderJoint2D } from \"cc\";\n\n// 塔的配置\nexport class CfgTowerItem {\n\n    // 子弹ID\n    public atkBulletId : string ; \n\n    // 攻击力\n    public atkDamage : number = 0 ; \n\n    // 攻击CD\n    public atkCd : number = 0 ; \n\n    // 暴击概率\n    public atkCritProbability : number = 0 ; \n    // 暴击倍数。\n    public atkCritMultiple : number = 2 ; \n\n    // 攻击目标\n    public atkTargeSelType = AttackTargetSelectionType.None ; \n\n    // 子弹散射数量\n    public atkBulletScatterCount = 0 ; \n\n    // 附带的Buff\n    public buffs = new Array< string >() ; \n\n\n}\n\n\nexport class CfgTowerParser {\n\n    public static parseTowerItem( cfgItem : CfgTowerItem , row : any ) {\n\n        let str : string ; \n\n        str = row[ \"AttackBulletId\" ] ; \n        if(str != null && str != \"\" ) {\n            cfgItem.atkBulletId = str ; \n        }\n\n        str = row[ \"AttackValue\" ] ; \n        if(str != null && str != \"\" ) {\n            cfgItem.atkDamage = Number( str ) ; \n        }\n        \n        str = row[ \"AttackCd\" ] ; \n        if(str != null && str != \"\" ) {\n            cfgItem.atkCd = FrameSecConvert.toFrame( Number( str ) ) ; \n        }\n        \n        // 目标选择\n        str = row[ \"AttackTargetSelectionType\" ] ; \n        if( str != null && str != \"\" ) {\n            cfgItem.atkTargeSelType = str as AttackTargetSelectionType ; \n        }\n        else {\n            cfgItem.atkTargeSelType = AttackTargetSelectionType.First ; \n        }\n\n        str = row[ \"AttackCritProb\" ] ; \n        if( str != null && str != \"\" ) {\n            cfgItem.atkCritProbability = Number( str ) * 100 ; \n        }\n        str = row[ \"AttackCritMultiple\" ] ; \n        if( str != null && str != \"\" ) {\n            cfgItem.atkCritMultiple = Number( str ) ; \n        }\n        \n        str = row[ \"AttackBulletScatterCount\" ] ; \n        if( str != null && str != \"\" ) {\n            cfgItem.atkBulletScatterCount = Number( str ) ; \n        }\n\n        str = row[ \"Buffs\" ] ; \n        if( str != null && str != \"\" ) {\n            let strs = str.split( /[,\\n]/ ) ;\n            for( let i = 0 ; i < strs.length ; ++i ) {\n                let str2 = strs[ i ] ;\n                cfgItem.buffs.push( str2.trim() ) ;\n            } // end for\n            \n        }\n\n\n\n    }\n\n}","\n// 升级表\nexport class CfgUpgrade {\n\n    public static data = new Array< number >( ) ;   \n\n}\n\nexport class CfgUpgradeParser {\n\n    public static parseJson( json : any ) {\n        \n        // 从1开始\n        CfgUpgrade.data.push( 0 ) ;\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            CfgUpgrade.data.push( Number( row[ \"Exp\" ] ) ) ;\n\n        } // end for\n\n    }\n\n}","import { sys } from \"cc\";\nimport { ChannelType } from \"./ChannelType\";\nimport { InitWx } from \"../InitWx\";\nimport { InitTt } from \"../InitTt\";\n\n\nexport class Channel {\n\n    public static type : ChannelType ; \n\n}\n\n// 平台渠道初始化\nexport class ChannelInit {\n\n    public static exe() {\n\n        this.setChannelType() ; \n\n        // 测试\n        // Channel.type = ChannelType.Minigame_ByteDance ; \n        \n        switch( Channel.type ) {\n            case ChannelType.Minigame_ByteDance : {\n                \n                // let appCfg = AppConfig.ins ; \n                // appCfg.addToDesktopEnabled = false ; \n\n            }\n            break ;\n        }\n\n    }\n\n    // 设置渠道值\n    public static setChannelType() {\n\n        Channel.type = ChannelType.None ; \n\n        // switch 先判断平台，防止设置出错。\n        switch( sys.platform ) {\n\n            // 安卓\n            case sys.Platform.ANDROID : {\n\n                Channel.type = ChannelType.XiaoMi ; \n                \n            }\n            break ; \n\n            // 微信\n            case sys.Platform.WECHAT_GAME : {\n\n            }\n            break ; \n\n            // 抖音\n            case sys.Platform.BYTEDANCE_MINI_GAME : {\n\n                Channel.type = ChannelType.Minigame_ByteDance ; \n\n            }\n            break ; \n\n        }\n\n\n    }\n\n}\n\n","\n\nexport enum ChannelType {\n\n    None = \"None\" , \n\n    // 出海 Google Play\n    GooglePlay = \"GooglePlay\" , \n\n    // 国内 安卓 小米\n    XiaoMi = \"XiaoMi\" , \n\n    // 小游戏 抖音\n    Minigame_ByteDance = \"Minigame_ByteDance\" , \n\n    // 小游戏 微信 我的\n    Minigame_Wx_Mine = \"Minigame_Wx_Mine\" , \n\n    // 小游戏 微信 刘会涛的\n    Minigame_Wx_LHT = \"Minigame_Wx_LHT\" , \n\n}\n","import { CircleCollider2D, Collider2D, Contact2DType, director, instantiate, IPhysics2DContact, isValid, randomRangeInt, tween, UITransform, Vec3 } from \"cc\";\nimport { Bullet, Sender } from \"../Bullet/Bullet\";\nimport { Role } from \"../Role/Base/Role\";\nimport { BulletMgr } from \"../Bullet/BulletMgr\";\nimport { DamageValueShow, RoleGetDamage } from \"../Role/Misc/RoleGetDamage\";\nimport { RoleMgr } from \"../Role/Base/RoleMgr\";\nimport { BulletMoveCalc } from \"../Bullet/BulletMoveCalc\";\nimport { BuffOp } from \"../Buff/BuffOp\";\nimport { FrameSecConvert } from \"../../../../Common/Misc/FrameSecConvert\";\nimport { RoleMoveSys } from \"../Role/Misc/RoleMoveSys\";\nimport { PlayerRole } from \"../../2.Td/Player/PlayerRole\";\nimport { AffixType } from \"../Buff/Affix\";\nimport { CfgBuff, CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { BulletFactory } from \"../Bullet/BulletFactory\";\nimport { WorldNode } from \"../Support/Misc/WorldNode\";\nimport { EffectFactory } from \"../../../Bag/Merge/EffectFactory\";\nimport { FrameCall, FrameCallDataItem } from \"../Support/Misc/FrameCall\";\nimport { BulletPfMgr } from \"../Bullet/BulletPfMgr\";\nimport { RoleAttributeUpdate } from \"../Role/Misc/RoleAttributeUpdate\";\nimport { BuffIncreaseCalc, DataIncrease } from \"../Buff/BuffIncreaseCalc\";\n\n\n\n\n// 碰撞 角色 子弹\nexport class CollisionBullet {\n\n    public static onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n\n        let bullet = selfCollider[ \"Bullet\" ] ; \n\n        let role = otherCollider[ \"Role\" ] ; \n        if( role != null ) {\n            this.bulletAndRole( bullet , role ) ;\n        }\n\n    }\n\n    public static bulletAndRole( bullet : Bullet , role : Role ) {\n\n        console.log( \"子弹击中角色\" );\n\n        // 击中目标后，丢失目标\n        if( bullet.target.targetRole == role ) {\n            bullet.target.targetRole = null ; \n        }\n\n        // 添加buff\n        this.buff( bullet , role ) ; \n\n        // 计算伤害值\n        this.damage( bullet , role ) ; \n\n        // 敌人弹射\n        this.bounce( bullet , role ) ; \n\n        // 处理穿透\n        this.pass( bullet ) ; \n\n    }\n\n    // 处理穿透\n    public static pass( bullet : Bullet ) {\n\n        bullet.passCount-- ; \n        if( bullet.passCount < 0 ) {\n            bullet.life.hp.current = 0 ; \n        }\n\n    }\n\n\n    // 造成伤害\n    private static damage( bullet : Bullet , role : Role ) {\n\n        // 计算伤害值\n        let d = bullet.damge ; \n\n        // 暴击属性\n        let d2 = this.crit( bullet ) ;\n        let hasCrit = d2 != d ;\n        d = d2 ; \n\n        // 角色受到伤害\n        RoleGetDamage.exe( role , d , !hasCrit , bullet.sender ) ; \n\n        if( hasCrit ) {\n            // 显示暴击的数值\n            DamageValueShow.crit( role.view.root.worldPosition.clone().add3f( 0 , 50 , 0 ) , d ) ;\n        }\n\n        // \n        this.lifeStealing( bullet , d ) ;\n\n    }\n\n    // 处理暴击。返回伤害值\n    private static crit( bullet : Bullet ) : number {\n\n        let d = bullet.damge ; \n\n        let crit = bullet.crit ;\n        if( crit == null ){\n            // 没有暴击\n            return d ; \n        }\n\n        let prob = bullet.crit.probability ; \n        if( prob <= 0 ) {\n            // 没有暴击\n            return d ; \n        }\n            \n        // 转换成整数\n        prob = prob * 100 ;\n        let n = randomRangeInt( 0 , 100 ) ; \n        if( n < prob ) {\n            // 命中概率\n            d = d * bullet.crit.multiple ; \n        }\n\n        return d ;\n\n    }\n\n    // 吸血\n    private static lifeStealing( bullet : Bullet , damage : number ) {\n\n        let ls = bullet.lifeStealing ;\n        if( ls == null || ls.percent == 0 ) return ; \n\n        let n = damage * ls.percent ;\n\n        PlayerRole.ins.main.life.add( n ) ;\n        PlayerRole.ins.main.view.hpBar.refresh() ; \n\n    }\n\n    // 敌人之间弹射\n    private static bounce( bullet : Bullet , role : Role ) {\n\n         // 敌人之间弹射\n        if( bullet.bounce.bounceBetweenEnemies.count > 0 ) {\n\n            bullet.bounce.bounceBetweenEnemies.count-- ; \n\n            bullet.bounce.bounceBetweenEnemies.record.add( role ) ;\n    \n            // 查找一个最近的敌人进行弹射\n            bullet.target.targetRole = this.findNearest( bullet.view.root.position , bullet.bounce.bounceBetweenEnemies.record ) ; \n            BulletMoveCalc.target( bullet ) ;\n\n            // 弹射不扣穿透\n            bullet.passCount++ ; \n\n            return ; \n\n        } \n\n        if( bullet.bounce.bounceEnemy > 0 ) {\n            bullet.bounce.bounceEnemy-- ;\n        }\n        else if( bullet.bounce.bounceRectEnemy > 0 ) {\n            bullet.bounce.bounceRectEnemy-- ;\n        }\n        else {\n            return ; \n        }\n\n        // 敌人弹射\n        let rect = role.view.main.getComponent( UITransform ).getBoundingBox() ; \n\n        let pos = bullet.view.root.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ; \n        role.view.main.parent.getComponent( UITransform ).convertToNodeSpaceAR( pos , pos ) ; \n\n        // 判断距离 Rect 上下左右 哪条边更近\n        let len1 = Math.abs( pos.y - rect.yMax ) ; \n        let len2 = Math.abs( pos.y - rect.yMin ); \n        let len3 = Math.abs( pos.x - rect.xMin ); \n        let len4 = Math.abs( pos.x - rect.xMax ); \n\n        if( ( len3 < len1 && len3 < len2 && len3 < len4 ) || ( len4 < len1 && len4 < len2 && len4 < len3 ) ) {\n            bullet.move.offset.x *= -1 ; \n            bullet.move.direction.x *= -1 ; \n\n            bullet.bounce.bounceRect-- ; \n\n            // 弹射不扣穿透\n            bullet.passCount++ ; \n\n        }\n        if( ( len1 < len2 && len1 < len3 && len1 < len4 ) || ( len2 < len1 && len2 < len3 && len2 < len4 ) ) {\n            bullet.move.offset.y *= -1 ; \n            bullet.move.direction.y *= -1 ; \n\n            bullet.bounce.bounceRect-- ; \n\n            // 弹射不扣穿透\n            bullet.passCount++ ; \n\n        }\n\n    }\n\n    private static dataIncr = new DataIncrease() ; \n\n    // 处理子弹附带的Buff。给Role添加Buff 等。\n    public static buff( bullet : Bullet , role : Role ) {\n\n        this.dataIncr.reset() ; \n\n        BuffIncreaseCalc.exeBuffs( bullet.buffs , this.dataIncr );\n\n        this.AttackBulletProbabilityAddBuff( bullet , role , this.dataIncr ) ; \n        this.AttackDamageIncreasePercentFullHp( bullet , role , this.dataIncr ) ; \n\n\n        for( let i = 0 ; i < bullet.buffIds.length ; ++i ) {\n\n            let buffId = bullet.buffIds[ i ] ;\n            let cfgBuffItem = CfgBuff.data.get( buffId ) ;\n            if( cfgBuffItem == null ) continue ; \n\n            switch( cfgBuffItem.affixType ) {\n\n                case AffixType.Knockback : {\n                    // 击退\n                    let dir = bullet.move.direction.clone() ; \n                    RoleMoveSys.ins.add( role , 0.2 , 80 , dir ) ;\n                }\n                break ;\n\n                case AffixType.PoisoningPercent : {\n                    this.PoisoningPercent( bullet , role , buffId ) ; \n                }\n                break ;\n\n                case AffixType.Explode : {\n                    this.Explode( bullet , role , cfgBuffItem ) ; \n                }\n                break ; \n\n                case AffixType.AttackBulletAddBuffRadius : {\n                    this.AttackBulletAddBuffRadius( bullet , role , cfgBuffItem ) ; \n                }\n                break ; \n\n                default : {\n\n                    let ret = BuffOp.roleAdd( role , buffId ) ;\n                    ret[1].sender = bullet.sender ; \n\n                }\n                break ; \n\n            }\n\n        } // end for\n\n    }\n\n    // 概率添加Buff\n    private static AttackBulletProbabilityAddBuff( bullet : Bullet , role : Role , dataIncr : DataIncrease ) {\n\n        // 概率添加Buff\n        for( let kv of this.dataIncr.AttackBulletProbabilityAddBuff ) {\n            let prob = kv[ 1 ] ; \n            let id = kv[ 0 ] ; \n\n            let n = randomRangeInt( 0 , 100 ) ;\n            if( n < prob * 100 ) {\n                let ret = BuffOp.roleAdd( role , id ) ;\n                ret[1].sender = bullet.sender ; \n            }\n\n        } // end for\n\n    }\n\n    // 满血伤害加成\n    private static AttackDamageIncreasePercentFullHp( bullet : Bullet , role : Role , dataIncr : DataIncrease ) {\n\n        if( this.dataIncr.AttackDamageIncreasePercentFullHp > 0 && role.life.hp.current == role.life.hp.max ) {\n            let d = bullet.damge ; \n            d *= 1 + this.dataIncr.AttackDamageIncreasePercentFullHp ; \n            bullet.damge = d ; \n\n        }\n\n    }\n\n    // 中毒 百分比\n    private static PoisoningPercent( bullet : Bullet , role : Role , buffId : string ) {\n\n        // 中毒\n        let ret = BuffOp.roleAdd( role , buffId ) ;\n        let isNew = ret[ 0 ] ;\n        let buff = ret[ 1 ] ; \n        if( isNew == false ) return ; \n            \n        buff.sender = bullet.sender ; \n\n        let d = bullet.damge * buff.affix.argN ; \n\n        if( this.dataIncr.AttackBulletPoisoningDamageIncreasePercent > 0 ) {\n            // 伤害增加\n            d *= 1 + this.dataIncr.AttackBulletPoisoningDamageIncreasePercent ; \n        }\n\n        if( this.dataIncr.AttackBulletPoisoningDurationIncreasePercent > 0 ) {\n            // 时长增加\n            let max = buff.duration.max ; \n            max *= 1 + this.dataIncr.AttackBulletPoisoningDurationIncreasePercent ; \n            buff.duration.setCurrentAndMax( max ) ; \n        }\n\n        d = Math.round( d ) ; \n        buff.affix.argN = d ; \n\n    }\n\n    // 爆炸、范围伤害\n    public static Explode( bullet : Bullet , role : Role , cfgBuffItem : CfgBuffItem ) {\n\n        let pos = bullet.view.root.worldPosition ;\n\n        let fn = ()=>{\n\n            let explode = BulletFactory.create( \"Explode\" ) ; \n            explode.view.root.setParent( WorldNode.ins.layer2 , false ) ;\n            explode.view.root.worldPosition = pos ; \n            explode.Lifecycle = FrameSecConvert.toFrame( 0.1 ) ; \n            explode.damge = bullet.damge * cfgBuffItem.affixArgN ; \n            explode.sender = bullet.sender ;\n            BulletMgr.ins.add( explode ) ; \n\n            let collider = explode.view.root.getComponentInChildren( CircleCollider2D ) ; \n\n            // 设置半径\n            if( cfgBuffItem.affixArgNList != null ) {\n                let r = cfgBuffItem.affixArgNList[ 1 ] ;\n                collider.radius = r ;\n            }\n\n            // 半径增加\n            if( this.dataIncr.AttackBulletExplodeRadiusIncreasePercent > 0 ) {\n                collider.radius *= 1 + this.dataIncr.AttackBulletExplodeRadiusIncreasePercent ; \n            }\n\n            // 伤害增加\n            if( this.dataIncr.AttackBulletExplodeDamageIncreasePercent > 0 ) {\n                explode.damge *= 1 + this.dataIncr.AttackBulletExplodeDamageIncreasePercent ; \n            }\n\n            // 播放特效\n            let id = cfgBuffItem.affixArgStr ; \n            if( id == null ) {\n                id = \"Explore\" ; \n            }\n            let effect = EffectFactory.create( id ) ; \n            effect.setParent( WorldNode.ins.layer2 , false ) ;\n            effect.worldPosition = pos ; \n            effect.scale = explode.view.root.scale ; \n\n        } ;\n        FrameCall.ins.once( fn ) ;\n\n    }\n\n    // 在范围内添加 Buff。\n    public static AttackBulletAddBuffRadius( bullet : Bullet , role : Role , cfgBuffItem : CfgBuffItem ) {\n\n        let parent = bullet.view.root.parent ;\n        let pos = bullet.view.root.position.clone() ; \n\n        let fn = ()=>{\n\n            let r = cfgBuffItem.affixArgN ; \n            let buffId = cfgBuffItem.affixArgStr ; \n\n            let pf = BulletPfMgr.ins.root.getChildByPath( \"Collider/Circle\" ) ; \n            let node = instantiate( pf ) ; \n            node.name = \"AttackBulletAddBuffRadius\" ; \n            node.setParent( parent , false ) ; \n            node.position = pos ; \n\n            let onbeginContact = ( selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null )=>{\n\n                let role = otherCollider[ \"Role\" ] ; \n                if( role == null ) return ; \n\n                let ret = BuffOp.roleAdd( role , buffId ) ;\n                if( ret[ 0 ] == false ) return ;\n\n                let buff = ret[ 1 ] ;\n                buff.affix.argN += this.dataIncr.AttackBulletAddBuffRadiusBuffIncreasePercent ;\n\n                buff.sender = bullet.sender ; \n\n                switch( buff.affix.type ) {\n                    case AffixType.PoisoningPercent : {\n                        let d = bullet.damge * buff.affix.argN ; \n                        d = Math.round( d ) ; \n                        buff.affix.argN = d ; \n                    }\n                    break ;\n                }\n\n                RoleAttributeUpdate.exe( role ) ;\n\n            } ;\n\n            // 设置半径\n            if( this.dataIncr.AttackBulletAddBuffRadiusIncreasePercent > 0 ) {\n                r *= 1 + this.dataIncr.AttackBulletAddBuffRadiusIncreasePercent ; \n            }\n            let collider = node.getComponent( CircleCollider2D ) ;\n            collider.radius = r ; \n            collider.on(Contact2DType.BEGIN_CONTACT, onbeginContact );\n\n            FrameCall.ins.once( ()=>{\n\n                node.destroy() ; \n\n            } , 5 ) ; \n\n        } ;\n        FrameCall.ins.once( fn ) ; \n\n    }\n\n    // 查找距离点最近的敌人\n    public static findNearest( pos : Vec3 , ignore : Set< Role > = null ) {\n\n        let len = Number.MAX_VALUE ; \n        let role : Role = null ; \n        for( let role2 of RoleMgr.ins.allEnemies ) {\n\n            if( ignore != null ) {\n                if( ignore.has( role2 ) ) {\n                    continue ; \n                }\n            }\n\n            let v = role2.view.root.position.clone().subtract( pos ) ;\n            let len2 = v.lengthSqr() ;\n            if( len > len2 ) {\n                len = len2 ; \n                role = role2 ; \n            }\n\n        } // end for\n\n        return role ; \n\n    }\n    \n\n}\n\n","import { Collider2D, Contact2DType, IPhysics2DContact, PhysicsSystem2D } from \"cc\";\nimport { Role } from \"../Role/Base/Role\";\nimport { SkillCloseDamageOp } from \"../Skill/SkillCloseDamage/SkillCloseDamage\";\nimport { Bullet } from \"../Bullet/Bullet\";\nimport { CollisionBullet } from \"./CollisionBullet\";\n\n\n// 碰撞处理器\n\n/*\n\n    参考：\n    https://docs.cocos.com/creator/3.2/manual/zh/physics/physics/contact-callback.html\n\n*/\n\nexport class CollisionHandler {\n\n    public static init() {\n\n        return ;\n        PhysicsSystem2D.instance.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n        PhysicsSystem2D.instance.on(Contact2DType.END_CONTACT, this.onEndContact, this);\n\n\n    }\n\n    /**\n     * 只在两个碰撞体开始接触时被调用一次\n     * @param selfCollider 指的是回调脚本的节点上的碰撞体\n     * @param otherCollider 指的是发生碰撞的另一个碰撞体\n     * @param contact 碰撞主要的信息, 位置和法向量, 带有刚体的本地坐标来， \n     */\n    public static onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        // console.log('onBeginContact');\n \n        return ;\n\n        let role1 = selfCollider[ \"Role\" ] ;\n        if( role1 != null ) {\n            let bullet2 = otherCollider[ \"Bullet\" ] ;\n            if( bullet2 != null ) {\n                // CollisionBullet.exe( role1 , bullet2 ) ; \n                return ;\n            }\n\n        }\n\n        let bullet1 = selfCollider[ \"Bullet\" ] ;\n        if( bullet1 != null ) {\n            let role2 = otherCollider[ \"Role\" ] ;\n            if( role2 != null ) {\n                // CollisionBullet.exe( role2 , bullet1 ) ; \n                return ;\n            }\n        }\n\n\n        // contact.getWorldManifold在 Builtin 物理模块这个参数为空\n        // const worldManifold = contact.getWorldManifold();\n        // // 碰撞点数组\n        // const points = worldManifold.points;\n        // // 碰撞点上的法向量\n        // const normal = worldManifold.normal;\n\n    }\n\n    // 只在两个碰撞体结束接触时被调用一次\n    public static onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        \n        console.log('onEndContact');\n\n        let role1 = selfCollider[ \"Role\" ] ;\n        if( role1 != null ) {\n            role1.move.enabled = true ; \n            \n            let role2 = otherCollider[ \"Role\" ] ;\n            if( role2 != null ) {\n                role2.move.enabled = true ; \n\n                SkillCloseDamageOp.tryRemove( role1 , role2 ) ;\n                SkillCloseDamageOp.tryRemove( role2 , role1 ) ;\n\n            }\n\n        }\n        \n\n\n        \n    }\n\n    public static onPreSolve(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        // 每次将要处理碰撞体接触逻辑时被调用\n        console.log('onPreSolve');\n    }\n\n    public static onPostSolve(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        // 每次处理完碰撞体接触逻辑时被调用\n        console.log('onPostSolve');\n    }\n\n\n}\n\n// 角色的互相碰撞\nclass CollisionRoleAndRole {\n\n    public static exe( role1 : Role , role2 : Role ) {\n\n        this.aiStopMove( role1 ) ;\n        this.aiStopMove( role2 ) ;\n\n        SkillCloseDamageOp.tryAdd( role1 , role2 ) ; \n        SkillCloseDamageOp.tryAdd( role2 , role1 ) ; \n\n    }\n\n    public static aiStopMove( role : Role ) {\n        \n        // let ai = role.ai ;\n        // if( ai == null ) return ; \n        // role.move.enabled = false ; \n\n    }\n\n}\n\n\n","\nexport class CurrentMax\n{\n    public current = 0;\n\n    public max = 0;\n\n    // 设置当前值为最大值\n    public setCurrentAsMax() : void \n    {\n        this.current = this.max;\n    }\n\n    public setCurrentAndMax(val : number ) : void\n    {\n        this.current = this.max = val;\n    }\n\n}","import { sys } from \"cc\";\r\n\r\nimport { DateTimeUtil } from \"../../../../SL/Common/Misc/DateTimeUtil\";\r\nimport { DateTimeMgr } from \"../../../../SL/Common/Misc/DateTimeMgr\";\r\n\r\n\r\n// 签到数据持久化\r\nexport class DailyCheckinData {\r\n\r\n    public static ins : DailyCheckinData = new DailyCheckinData() ; \r\n\r\n    // 最后签到的日期\r\n    public lastDate = new Date( 0 ) ;\r\n\r\n    // 签到次数\r\n    public count = 0 ;\r\n\r\n    // 签入\r\n    public checkin() {\r\n        this.lastDate = DateTimeMgr.ins.getNowDateTime() ; \r\n        this.count++ ;\r\n    }\r\n\r\n    // 今日是否已签\r\n    public isTodayCheckin() : boolean {\r\n\r\n        let dtNow = DateTimeMgr.ins.getNowDateTime() ;\r\n        let b = DateTimeUtil.dateEquals( this.lastDate , dtNow ) ; \r\n        return b ; \r\n\r\n    } \r\n\r\n}\r\n\r\nexport class DailyCheckinDataPersist {\r\n\r\n    public static load() {\r\n\r\n        let str = sys.localStorage.getItem( \"DailyCheckin\" ) as string ; \r\n        if( str == null || str == \"\" ) return ; \r\n\r\n        let json = null ; \r\n        try {\r\n            json = JSON.parse( str ) ; \r\n        }\r\n        catch {\r\n            return ; \r\n        }\r\n\r\n        if( json[ \"Date\" ] == null ) return ; \r\n\r\n        let dtLast = new Date( Date.parse( json[ \"Date\" ] ) ) ; \r\n        DailyCheckinData.ins.lastDate = dtLast ; \r\n        DailyCheckinData.ins.count = Number( json[ \"Count\" ] ) ; \r\n\r\n    }\r\n\r\n    public static save() {\r\n\r\n        /*\r\n            因为服务器发来的是本地时间格式，所以保存也用本地时间格式\r\n            用户改本机时区没用，因为服务器设置和读入都是相同时区的数。\r\n        */ \r\n\r\n        let obj = {} ;\r\n        obj[ \"Date\" ] = DateTimeUtil.toDateString( DailyCheckinData.ins.lastDate ) ;\r\n        obj[ \"Count\" ] =  DailyCheckinData.ins.count ; \r\n\r\n        let str = JSON.stringify( obj ) ;\r\n        sys.localStorage.setItem( \"DailyCheckin\" , str ) ; \r\n\r\n    }\r\n\r\n}","import { sys } from \"cc\";\r\nimport { DateTimeUtil } from \"../../SL/Common/Misc/DateTimeUtil\";\r\n\r\n// 每日个数限制\r\nexport class DailyLimit {\r\n\r\n    // 标示ID\r\n    public id : string = \"DailyLimit_XXX\" ;\r\n\r\n    // 最大数\r\n    public max = 0 ; \r\n\r\n    // 当前数\r\n    public current = 0 ; \r\n\r\n    public constructor( id : string , max : number = 10 ) {\r\n\r\n        this.id = id ; \r\n        this.max = max ; \r\n\r\n    }\r\n\r\n    // 递减 1 \r\n    public decrement() {\r\n\r\n        if( this.current <= 0 ) return ; \r\n        this.current-- ; \r\n\r\n        this.save() ; \r\n\r\n    }\r\n\r\n    public load() {\r\n\r\n        let str = sys.localStorage.getItem( this.id );\r\n        if( str == null || str == \"\" ) {\r\n\r\n            this.current = this.max ; \r\n\r\n            return ; \r\n        }\r\n\r\n        let data = JSON.parse( str ) ; \r\n        this.current = Number( data[ \"Current\" ] ) ; \r\n        let dt = new Date( data[ \"Date\" ] ) ;\r\n        let dtNow = new Date( Date.now() ) ; \r\n        if( DateTimeUtil.dateEquals( dt , dtNow ) == false ) {\r\n            this.current = this.max ; \r\n        }\r\n\r\n    }\r\n\r\n    public save() {\r\n\r\n        let data = {} ; \r\n        data[ \"Date\" ] = DateTimeUtil.toDateString( new Date( Date.now() ) )  ;\r\n        data[ \"Current\" ] = this.current ;\r\n\r\n        let str = JSON.stringify( data ) ; \r\n        sys.localStorage.setItem( this.id , str ) ; \r\n\r\n    }\r\n\r\n}","import { director, game, sys, tween } from \"cc\";\n\n\n// 时间设置器\nexport class DateTimeSync {\n\n    // 重试次数\n    public static count = 20 ;\n\n    public static exe( cb : ( ok : boolean )=>void ) {\n\n        DateTimeRequest.getFromSuNing( ( ok : boolean , date : Date )=>{\n\n            if( ok == false ) {\n\n                console.log( \"时间同步失败,1秒后重试\" ) ;\n\n                this.count-- ; \n                if( this.count <= 0 ) {\n                    cb( false ) ; \n                    return ; \n                }\n\n                tween( this ).delay( 1 ).call( ()=>{\n                    this.exe( cb ) ; \n                } ).start() ; \n\n                return ; \n            }\n\n            DateTimeMgr.ins = new DateTimeMgr() ; \n            DateTimeMgr.ins.dtStart = date ; \n\n            cb( true ) ; \n\n        } ) ;\n\n    }\n\n}\n\n// 时间请求\nexport class DateTimeRequest {\n\n    // 从苏宁API获取\n    public static getFromSuNing( cb : ( ok : boolean , date : Date )=>void ) {\n\n        if( sys.platform == sys.Platform.WECHAT_GAME ) {\n            // 微信http请求\n            this.wxRequest( cb ) ;\n            return ; \n\n        }\n        else if( sys.platform == sys.Platform.BYTEDANCE_MINI_GAME )\n        {\n            // 抖音http请求\n            this.ttRequest( cb ) ;\n        }\n        else {\n            this.fetch( cb ) ; \n        }\n        \n        \n\n    }\n\n    // fetch 请求\n    public static fetch( cb : ( ok : boolean , date : Date )=>void ) {\n\n        /*\n            http 请求：\n            https://docs.cocos.com/creator/manual/zh/advanced-topics/http.html?h=http\n\n            fetch 用法\n            https://segmentfault.com/a/1190000008484070?utm_source=tag-newest\n            \n        */ \n        let url = \"https://quan.suning.com/getSysTime.do\" ; \n        fetch( url ).then((response: Response) => {\n            // return response.text() ; \n            return response.json()\n        }).then((value) => {\n            // console.log(value);\n\n            let dt = new Date( value[ \"sysTime2\" ] ) ;\n            console.log( \"获取服务器时间完成：\" + dt.toString() ) ; \n            \n            cb( true , dt ) ; \n\n        }).catch( ( e )=>{\n\n            console.log( \"获取服务器时间出错\" ) ; \n\n            cb( false , null ) ; \n\n        } ) ;\n\n    }\n\n    // 微信请求\n    public static wxRequest( cb : ( ok : boolean , date : Date )=>void ) {\n\n        /*\n            参考：https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html\n        \n        */\n\n        let url = \"https://quan.suning.com/getSysTime.do\" ; \n\n        // @ts-ignore\n        wx.request({\n            url: url , \n            success (res) {\n                console.log(res.data)\n\n                let dt = new Date( res.data[ \"sysTime2\" ] ) ;\n                cb( true , dt ) ; \n                \n            } , \n\n            fail() {\n\n                cb( false , null ) ; \n\n            }\n\n        }) ; \n\n    }\n\n    // 抖音请求\n    public static ttRequest( cb : ( ok : boolean , date : Date )=>void ) {\n\n        /*\n            参考：https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html\n        \n        */\n\n        let url = \"https://quan.suning.com/getSysTime.do\" ; \n\n        // @ts-ignore\n        tt.request({\n            url: url , \n            success (res) {\n                console.log(res.data)\n\n                let dt = new Date( res.data[ \"sysTime2\" ] ) ;\n                cb( true , dt ) ; \n                \n            } , \n\n            fail() {\n\n                cb( false , null ) ; \n\n            }\n\n        }) ; \n\n    }\n\n}\n\n/*\n    时间管理\n\n    使用服务器同步时间，可以防止玩家修改本机时间跳过时间间隔。\n    也可换成使用本机时间。\n\n    本类作用：屏蔽时间服务器和本地时间的使用差异。\n\n*/ \nexport class DateTimeMgr {\n\n    public static ins : DateTimeMgr = null ; \n\n    // 游戏开始时的时间点\n    public dtStart : Date = null ; \n\n    // 取得现在的时间\n    public getNowDateTime() : Date {\n\n        let n = Math.floor( game.totalTime / 1000 ) ; \n        let dt = new Date( this.dtStart ) ; \n        dt.setSeconds( this.dtStart.getSeconds() + n ) ; \n        return dt ; \n\n        // // 时间相加\n        // let dt = new Date( this.dtStart ) ;\n        // dt.setSeconds( this.dtStart.getSeconds() + 100 ) ; \n\n        // 总体秒数\n        // let n = ( dt.valueOf() - this.dtStart.valueOf() ) / 1000 ; \n\n    }\n\n\n}","\n\nexport class DateTimeUtil {\n\n    // 日期部分是否相等\n    public static dateEquals( dt1 : Date , dt2 : Date ) : boolean {\n\n        let y1 = dt1.getFullYear() ;\n        let y2 = dt2.getFullYear() ; \n        let m1 = dt1.getMonth()  ;\n        let m2 = dt2.getMonth() ; \n        let d1 = dt1.getDate() ; \n        let d2 = dt2.getDate()\n\n        let b = y1 == y2 &&\n            m1 == m2 && \n            d1 == d2 ; \n\n        return b ; \n\n    }\n\n\n    public static toString( dt : Date ) {\n\n        /*\n            toLocaleString 不能用的原因，在不同平台会生成不同格式的字符串。\n            比如 cocos 编辑器的字符串就有中文，并且不能用 parse 解析回来。\n\n            iOS 规定日期分割要用 / 不能用 - ，否者会返回 Invalid Date \n            参考：https://blog.csdn.net/qq_38974163/article/details/129039155\n        */\n\n        let str = dt.getFullYear() + \"/\" + \n            ( dt.getMonth() + 1 ) + \"/\" + \n            dt.getDate() + \" \" + \n            dt.getHours() + \":\" + \n            dt.getMinutes() + \":\" + \n            dt.getSeconds() ;\n\n        return str ; \n\n    }\n    \n    public static toDateString( dt : Date ) : string {\n\n        // \"2023-12-18 14:51:28\" \n        let str = dt.getFullYear() + \"/\" + \n            ( dt.getMonth() + 1 ) + \"/\" + \n            dt.getDate() ;\n            // dt.getUTCHours() + \":\" + \n            // dt.getUTCMinutes() + \":\" + \n            // dt.getUTCSeconds() ;\n\n        return str ; \n\n    } \n\n}","import { instantiate, Node, sp } from \"cc\";\nimport { EffectPfMgr } from \"../../World/1.Base/Support/Misc/EffectPfMgr\";\n\nexport class EffectFactory {\n\n    public static create( id : string , destroyIfComplete = true ) : Node {        \n\n        let pf = EffectPfMgr.ins.root.getChildByPath( id ) ;\n        if( pf == null ) return null ; \n        \n        let node = instantiate( pf ) ;\n        let sk = node.getComponent( sp.Skeleton ) ;\n        if( sk == null ) {\n            sk = node.getComponentInChildren( sp.Skeleton ) ; \n        }\n\n        if( destroyIfComplete ) {\n\n            sk?.setCompleteListener( ()=>{\n                node.destroy() ; \n            } ) ;\n\n        }\n\n        return node ; \n\n    }\n\n\n}","import { Node } from \"cc\";\n\n// 效果预制管理器\nexport class EffectPfMgr {\n\n    public static ins = new EffectPfMgr() ; \n\n    public root : Node ; \n\n}","import { UITransform, Vec3 } from \"cc\";\nimport { UiHpBar } from \"../../../Ui/Bar/UiHpBar\";\nimport { RoleFactory } from \"../../1.Base/Role/Base/RoleFactory\";\nimport { RoleMgr } from \"../../1.Base/Role/Base/RoleMgr\";\nimport { WorldNode } from \"../../1.Base/Support/Misc/WorldNode\";\nimport { EnemyMovePath } from \"../Flow/EnemyMovePath\";\nimport { AiCom } from \"../../1.Base/Ai/AiCom\";\nimport { PlayerBuffAffect } from \"../Player/PlayerBuffAffect\";\nimport { RoleAttributeUpdate } from \"../../1.Base/Role/Misc/RoleAttributeUpdate\";\nimport { Role } from \"../../1.Base/Role/Base/Role\";\nimport { PathMove } from \"../../1.Base/Ai/PathMove\";\n\nexport class EnemyGen {\n\n    // 生成一个敌人\n    public static genOne( id : string ) : Role {\n\n        let role = RoleFactory.create( id ) ;\n\n        RoleMgr.ins.add( role ) ; \n\n        // 添加血条\n\n        let hpBarId = role.cfg.hpBarId ;\n        let hpBar = UiHpBar.create( hpBarId ) ;\n        role.view.hpBar = hpBar ; \n        hpBar.role = role ;\n        hpBar.root.setParent( role.view.root , true );\n        let rect = role.view.main.getComponent( UITransform ).getBoundingBox() ; \n        hpBar.root.position = new Vec3( 0 , rect.yMax + 10 ) ;\n        hpBar.refresh() ; \n \n        role.view.root.setParent( WorldNode.ins.layer1 , false ) ;\n        role.view.root.position = EnemyMovePath.ins.data[ 0 ] ;\n\n        role.ai = new AiCom() ; \n        role.ai.pathMoved = new PathMove() ; \n        role.ai.pathMoved.idx = 1 ; \n        role.ai.pathMoved.path = EnemyMovePath.ins.data ; \n\n        // PlayerBuffAffect.affectRole( role ) ; \n\n\n\n        RoleAttributeUpdate.exe( role ) ; \n\n        return role ; \n\n    }\n\n}","import { Vec3 } from \"cc\";\nimport { WorldNode } from \"../../1.Base/Support/Misc/WorldNode\";\n\n\n// 塔防敌人移动路径\nexport class EnemyMovePath {\n\n    public static ins = new EnemyMovePath() ; \n\n    public data = new Array< Vec3 >() ;\n\n    public init( ) {\n\n        this.data.splice( 0 , this.data.length ) ; \n\n        let node = WorldNode.ins.root.getChildByPath( \"Cfg/Path\" ) ; \n        for( let i = 0 ; i < node.children.length ; ++i ) {\n\n            let point = node.children[ i ] ; \n\n            this.data.push( point.position ) ; \n\n        } // end for\n\n        node.destroy() ; \n\n    }\n\n}","import { _decorator, Component, Node } from 'cc';\nimport { Init } from './Init';\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('Entry')\nexport class Entry extends Component {\n    start() {\n        Init.exe() ; \n    }\n\n    update(deltaTime: number) {\n\n    }\n    \n}\n\n\n","import { _decorator, Component, Node } from 'cc';\nimport { Init } from './Init';\nimport { ZOrderCtrl } from '../World/1.Base/Support/Misc/ZOrderCtrl';\nimport { RoleSys } from '../World/1.Base/Role/Misc/RoleSys';\nimport { TowerSys } from '../World/1.Base/Tower/Sys/TowerSys';\nimport { BulletSys } from '../World/1.Base/Bullet/BulletSys';\nimport { AiSys } from '../World/1.Base/Ai/AiSys';\nimport { WaveCtrl } from '../World/2.Td/Level/WaveCtrl';\nimport { LevelCtrl } from '../World/2.Td/Level/LevelCtrl';\nimport { RoleMoveSys } from '../World/1.Base/Role/Misc/RoleMoveSys';\nimport { FrameCall } from '../World/1.Base/Support/Misc/FrameCall';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Entry')\nexport class Entry extends Component {\n    start() {\n\n        Init.exe() ; \n\n    }\n\n    update(deltaTime: number) {\n        \n        ZOrderCtrl.ins.update() ; \n\n        TowerSys.update() ; \n\n        BulletSys.update() ; \n\n        RoleSys.update() ; \n\n        AiSys.update() ; \n        \n        LevelCtrl.ins.update() ; \n        // WaveCtrl.ins.update() ; \n        \n        RoleMoveSys.ins.update() ; \n\n        FrameCall.ins.update() ; \n        \n    }\n\n}\n\n\n","import { _decorator, Component, Node } from 'cc';\nimport { Init } from './Init';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Entry')\nexport class Entry extends Component {\n    start() {\n        Init.exe() ; \n    }\n\n    update(deltaTime: number) {\n        \n    }\n    \n}\n\n\n","import { UITransform, Vec3 } from \"cc\";\nimport { CfgBuff, CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { MoneyFly } from \"../../../../Common/Misc/MoneyFly\";\nimport { AffixType } from \"../../../World/1.Base/Buff/Affix\";\nimport { BuffFactory } from \"../../../World/1.Base/Buff/BuffFactory\";\nimport { TowerAllUpdate } from \"../../../World/1.Base/Tower/Misc/TowerAllUpdate\";\nimport { Player } from \"../../../World/2.Td/Player/Player\";\nimport { PlayerBuffAffect } from \"../../../World/2.Td/Player/PlayerBuffAffect\";\nimport { UiMoney001 } from \"../../Main/UiMoney001\";\nimport { UiMain } from \"../../Main/UiMain\";\nimport { UiFeature } from \"../../Main/Feature/UiFeature\";\nimport { FeatureExtract } from \"./FeatureExtract\";\nimport { MergeDefinition } from \"../../../Bag/Merge/MergeDefinition\";\nimport { PlayerGradeOp } from \"../../../World/2.Td/Player/PlayerGradeOp\";\nimport { Buff_RndArticleMergeGradeUpgrade } from \"../../../World/1.Base/Buff/Specific/Buff_RndArticleMergeGradeUpgrade\";\n\n// 特性获得\nexport class FeatureAcquire {\n\n    public static exe( ids : Array< string > ) {\n\n        for( let i = 0 ; i < ids.length ; ++i ) {\n\n            let id = ids[ i ] ;\n\n            let b = this.now( id ) ;\n            if( b == true ) continue ; \n\n            let buff = BuffFactory.create( id ) ;\n            Player.ins.buff.list.push( buff ) ; \n\n            FeatureExtract.countLimit( id ) ; \n\n        }\n\n\n        // 更新塔\n        TowerAllUpdate.updateAll() ; \n\n        // 作用于现在场上的敌人\n        PlayerBuffAffect.affectAllRoles() ; \n\n        UiFeature.ins.refresh() ; \n\n    }\n\n    /*\n        马上生效的 立即一次性消耗的。\n        返回值：是否需要加入Buff列表中并且显示图标\n    */ \n    public static now( id : string ) {\n\n        let cfg = CfgBuff.data.get( id ) ;\n        if( cfg == null ) return ;\n\n        switch( cfg.affixType ) {\n\n            case AffixType.GetMomeyNow : {\n\n                // 立刻得到金币\n\n                // 飞\n                let pos2 = UiMoney001.ins.icon.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n                UiMain.ins.root.getComponent( UITransform ).convertToNodeSpaceAR( pos2 , pos2 ) ;\n                MoneyFly.money001Fly( UiMain.ins.root , Vec3.ZERO , pos2 ) ; \n\n                // 加数值\n                Player.ins.money001 += cfg.affixArgN ; \n                UiMoney001.ins.refresh() ; \n\n                return true ; \n\n            }\n            break ; \n\n            \n            case AffixType.MergeEnable : {\n                // 合并 启动\n\n                let str = cfg.affixArgStr ; \n                let strs = str.split( \",\" ) ; \n                for( let id of strs ) {\n                    MergeDefinition.ins.allowData.set( id , true ) ; \n                }\n              \n                return true ; \n\n            }\n            break ; \n\n            case AffixType.ExpIncreasePercent : {\n\n                // 经验值获取 增加\n                PlayerGradeOp.expFactor += cfg.affixArgN ; \n\n            }\n            break ;\n\n            case AffixType.RndArticleMergeGradeUpgrade : {\n\n                Buff_RndArticleMergeGradeUpgrade.exe( ) ; \n\n                return true ; \n            }\n            break ; \n\n        }\n\n        return false ;\n\n    }\n\n\n\n}","import { Account } from \"../../../../Common/Account/Account\";\nimport { CfgArticleMgr } from \"../../../../Common/Cfg/CfgArticle\";\nimport { CfgBuff, CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { CfgFeature, CfgFeatureItem } from \"../../../../Common/Cfg/CfgFeature\";\nimport { Shuffle } from \"../../../../SL/Common/Misc/Shuffle\";\nimport { BagArticleGradeHelper } from \"../../../Bag/Article/BagArticleGradeHelper\";\nimport { Buff } from \"../../../World/1.Base/Buff/Buff\";\n\n// 特性抽取池\nexport class FeatureExtractPool {\n\n    public static ins : FeatureExtractPool = null ;\n\n    // 个数限制\n    public count = new Map< string , number >() ;\n\n    public data = new Array< CfgBuffItem >() ; \n\n    public init() {\n\n        let ids1 = this.getCommon() ; \n        let ids2 = this.getDeploy() ; \n        ids2.push( ... ids1 ) ;\n\n        // 测试\n        // ids2 = [ \"General-RndArticleMergeGradeUpgrade\" ] ;\n\n        for( let i = 0 ; i < ids2.length ; ++i ) {\n            let cfgItem = CfgBuff.data.get( ids2[ i ] ) ;\n            this.data.push( cfgItem ) ;\n\n            if( cfgItem.unlockCount > 0 ) {\n                this.count.set( cfgItem.id , cfgItem.unlockCount ) ; \n            }\n\n        } // end for\n\n    }\n\n    // 得到上阵解锁的\n    public getDeploy() : Array< string > {\n\n        let ret = new Array< string >() ;\n\n        let deploy = Account.ins.bag.deploy ;\n        for( let i = 0 ; i < deploy.length ; ++i ) {\n            let id = deploy[ i ] ;\n\n            let items = BagArticleGradeHelper.getCfgCurrentItems( id ) ; \n            for( let item of items ) {\n                ret.push( ... item.unlocked ) ; \n            }\n\n        } // end for\n\n        return ret ;\n\n    }\n\n    // 得到公共的\n    public getCommon() : Array< string > {\n\n        let ret = new Array< string >() ;\n\n        for( let cfgItem of CfgFeature.data ) {\n            ret.push( cfgItem.id ) ; \n        }\n\n        return ret ; \n\n    }\n\n}\n\n// 特性抽取\nexport class FeatureExtract {\n\n    public static exe() : Array< CfgBuffItem > {\n\n        let ret = new Array< CfgBuffItem >() ; \n        \n        // 完全随机\n        this.rnd( ret ) ; \n\n        return ret ; \n\n    }\n   \n    // 全列表完全随机\n    public static rnd( ret : Array< CfgBuffItem > ) {\n\n        let poolData = FeatureExtractPool.ins.data ; \n        let list = new Array< CfgBuffItem >() ; \n        list.push( ... poolData ) ;\n        Shuffle.shuffleArray( list ) ;\n\n        let count = FeatureExtractPool.ins.count ; \n        for( let i = 0 ; i < 3 && i < list.length ; ++i ) {\n            let item = list[ i ] ; \n            ret.push( item ) ; \n            \n        } // end for\n\n\n    }\n\n    // 次数限制\n    public static countLimit( id : string ) {\n\n        let poolData = FeatureExtractPool.ins.data ; \n        let count = FeatureExtractPool.ins.count ; \n\n        let n = count.get( id ) ; \n        if( n == null ) {\n            // 没限制\n            return ;\n        }\n        \n        n-- ; \n        if( n > 0 ) {\n            // 还有出现次数\n            count.set( id , n ) ; \n            return ;\n        }   \n\n        let idx = poolData.findIndex( ( e )=>{ return e.id == id ; } ) ;\n        if( idx == -1 ) return ; \n        poolData.splice( idx , 1 ) ; \n\n        count.delete( id ) ; \n\n    }\n\n}","import { CurrentMax } from \"../SimpleStruct/CurrentMax\";\n\nexport class FrameCall {\n\n    public static ins : FrameCall = null ; \n\n    // 执行一次。delay 为 0 下一帧执行。\n    public once( fn : ()=>void , delay : number = 0 ) {\n\n        let item = new FrameCallDataItem() ; \n        item.interval.setCurrentAndMax( delay ) ; \n        item.times = 1 ;\n        item.fn = fn ; \n        this.items.push( item ) ; \n\n    }\n\n\n    public update() {\n\n        for( let i = this.items.length - 1 ; i >= 0 ; --i ) {\n\n            let item = this.items[ i ] ;\n\n            item.interval.current-- ;\n            if( item.interval.current > 0 ) continue ; \n\n            item.fn?.() ; \n\n            item.times-- ; \n            if( item.times <= 0 ) {\n                // 移除\n                this.items.splice( i , 1 ) ;\n            }\n\n            item.interval.setCurrentAsMax() ; \n\n        } // end for\n\n    }\n\n    public items = new Array< FrameCallDataItem >() ; \n}\n\n// 数据项\nexport class FrameCallDataItem {\n\n    // 间隔\n    public interval = new CurrentMax() ;\n\n    // 调用次数\n    public times = 1 ; \n\n    // 调用函数\n    public fn : ()=>void = null ; \n\n}","import { math } from \"cc\";\n\n    \n    // 帧 秒 时间换算\n    export class FrameSecConvert\n    {\n        // FPS\n        public static fps = 60 ;\n\n        // 秒数转换成帧数\n        public static toFrame( second : number ) : number {\n\n            return Math.floor( this.fps * second ) ;\n\n         }\n\n        /*\n            帧数转换成秒数。\n            速度/秒 转换成 速度/帧。         \n        */ \n        public static toSecond( frame : number ) : number {\n\n            return frame / this.fps ;\n\n        }\n\n        //// 速度每秒 转换成 速度每帧\n        //public static speedPerSecondToSpeedPerFrame( speedPerSecond )\n        //{\n\n        //    return speedPerSecond / this.fps;\n\n        //}\n    }","import { Prefab } from \"cc\";\n\nexport class GameArg {\n\n    public static ins = new GameArg() ; \n\n    // 关卡ID\n    public levelId : string ; \n\n    // 主线关卡索引\n    public mainIdx = -1 ;\n\n\n\n}","import { ItemDraw } from \"../../../../Common/Item/ItemDraw\";\nimport { ItemGet } from \"../../../../Common/Item/ItemGet\";\nimport { GameArg } from \"../../../Init/GameArg\";\nimport { UiMain } from \"../../../Ui/Main/UiMain\";\nimport { UiLose } from \"../../../Ui/Popup/Settle/UiLose\";\nimport { GamePause } from \"./GamePause\";\n\nexport class GameLose {\n\n    public static exe() {\n        console.log( \"死亡\" ) ;\n\n        // 暂停游戏逻辑\n        GamePause.pause() ; \n\n        let uiLose = UiLose.create( UiMain.ins.root );\n        uiLose.show() ; \n        let id = \"Level_\" + GameArg.ins.levelId + \"_Lose\" ; \n        let items = ItemDraw.exe( id ) ; \n        uiLose.itemList.refresh( items ) ; \n        uiLose.itemList.showAnim() ; \n        ItemGet.addList( items ) ; \n        \n    }\n\n}","import { find } from \"cc\";\nimport { Bullet } from \"../../1.Base/Bullet/Bullet\";\nimport { BulletMgr } from \"../../1.Base/Bullet/BulletMgr\";\nimport { RoleMgr } from \"../../1.Base/Role/Base/RoleMgr\";\nimport { WaveCtrl } from \"../Level/WaveCtrl\";\nimport { TimeScale } from \"../../../../Common/Misc/TimeScale\";\nimport { Player } from \"../Player/Player\";\nimport { Tween } from \"cc\";\n\n// 暂停 恢复\nexport class GamePause {\n\n    // 暂停\n    public static pause() {\n\n        // 停止逻辑帧\n        find( \"Entry\" ).active = false ; \n\n        // 恢复普通时间速度\n        TimeScale.set( 1 ) ; \n\n    }\n\n    // 恢复\n    public static resume() {\n\n        find( \"Entry\" ).active = true ; \n\n        TimeScale.set( Player.ins.playSpeed ) ; \n\n    }\n\n}","\nimport { BagArticleReloaded } from \"../Bag/BagArticleReloaded\";\nimport { LevelCtrl } from \"../Level/LevelCtrl\";\nimport { TowerAllUpdate } from \"../../1.Base/Tower/Misc/TowerAllUpdate\";\nimport { TowerMgr } from \"../../1.Base/Tower/Entity/TowerMgr\";\nimport { Buff_HpRegenIncreasePercentBelowPercentPerWave } from \"../../1.Base/Buff/Specific/Buff_HpRegenIncreasePercentBelowPercentPerWave\";\nimport { PlayerRole } from \"../Player/PlayerRole\";\nimport { WorldNode } from \"../../1.Base/Support/Misc/WorldNode\";\nimport { Vec3 } from \"cc\";\nimport { EffectFactory } from \"../../../Bag/Merge/EffectFactory\";\nimport { GamePause } from \"./GamePause\";\n\n// 塔防开始\nexport class GameStart {\n\n    // 开始塔防逻辑\n    public static start() {\n\n        GamePause.resume() ; \n\n        // 开战动画\n        let effect = EffectFactory.create( \"Battle\" ) ;\n        effect.setParent( WorldNode.ins.layer2 , true ) ;\n        effect.position = Vec3.ZERO ; \n\n        // 重新生成塔\n        BagArticleReloaded.exe() ; \n\n        // 计算塔的属性\n        TowerAllUpdate.updateAll() ; \n\n        Buff_HpRegenIncreasePercentBelowPercentPerWave.resetAllTowers() ; \n        Buff_HpRegenIncreasePercentBelowPercentPerWave.tryExe( PlayerRole.ins.main ) ;\n\n        LevelCtrl.ins.start() ; \n        // WaveCtrl.ins.start() ; \n\n    }\n\n}\n\n\n","import { Vec2 } from \"cc\";\n\n/*\n    手势 点击。\n    滑动指定距离后，不再认为是点击\n*/ \nexport class GestureClick {\n\n    public rest() {\n        this.val = true ; \n    }\n\n    public start( pos : Vec2 ) {\n\n        this.posOrig = pos ; \n\n    }\n\n    public move( pos : Vec2 ) {\n\n        if( this.val == false ) return ;\n\n        let v = this.posOrig.clone().subtract( pos ) ;\n        if( v.lengthSqr() > 20 * 20 ) {\n            this.val = false ; \n        } ; \n\n    }\n\n    // 是否是单机的含义\n    public getVal() : boolean {\n        return this.val ;\n    }\n\n    // 拾起时 的坐标 世界空间\n    private posOrig : Vec2 = null ; \n\n    private val = true ; \n\n}","import { Rect, Size, Vec2, Vec3 } from \"cc\";\nimport { UiBagGrid } from \"./UiBagGrid\";\nimport { UiBagCfg } from \"../Main/UiBagCfg\";\n\nexport class GridHelper {\n\n    // 取得已解锁的格子的包围矩形 形状\n    public static getBoundingRectShapeUnlocked() : Rect {\n\n        let rect = new Rect() ; \n\n        // 左下角\n        let coord1 = new Vec2( 9999 , 9999 ) ; \n        // 右上角\n        let coord2 = new Vec2( -1 , -1 ) ; \n\n        let grid = UiBagGrid.ins.grid ;\n        let girdSize = UiBagGrid.ins.gridSize ; \n        for( let y = 0 ; y < girdSize.height ; ++y ) {\n            for( let x = 0 ; x < girdSize.width ; ++x ) {\n\n                let cell = grid[ y ][ x ] ; \n                if( cell.unlocked == false ) continue ; \n\n                if( x < coord1.x ) {\n                    coord1.x = x ;\n                }\n\n                if( y < coord1.y ) {\n                    coord1.y = y ; \n                }\n\n                if( x > coord2.x ) {\n                    coord2.x = x ; \n                }\n\n                if( y > coord2.y ) {\n                    coord2.y = y ;\n                }\n\n            } // end for\n        } // end for\n\n        rect.xMin = coord1.x ; \n        rect.yMin = coord1.y ; \n        rect.xMax = coord2.x ; \n        rect.yMax = coord2.y ; \n\n        return rect ; \n\n    }\n\n    // 取得已解锁的格子的包围矩形 像素\n    public static getBoundingRectUnlocked() : Rect {\n\n        let rect = this.getBoundingRectShapeUnlocked() ;\n\n        let grid = UiBagGrid.ins.grid ;\n        // 左下角\n        let coord1 = new Vec2( rect.xMin , rect.yMin ) ; \n        // 右上角\n        let coord2 = new Vec2( rect.xMax , rect.yMax ) ; \n\n        // 格子大小\n        // let cellSize = new Size( 80 , 80 ) ; \n        let cellSize = UiBagCfg.ins.cellSize ; \n\n        // 确定位置\n        let pos = new Vec2() ; \n        let cell1 = grid[ rect.yMin ][ rect.xMin ] ; \n        let cell2 = grid[ rect.yMax ][ rect.xMax ] ; \n        let pos2 = cell1.root.position.clone().add( cell2.root.position ).divide3f( 2 , 2 , 2 ) ;\n        pos.x = pos2.x ; pos.y = pos2.y ; \n\n        // 确定大小\n        let size = new Size() ;\n        size.width = ( coord2.x - coord1.x + 1 ) * cellSize.width ;\n        size.height = ( coord2.y - coord1.y + 1 ) * cellSize.height ; \n        size.width += 40 ; \n        size.height += 40 ; \n\n        let rectRet = new Rect() ; \n        rectRet.size = size ; \n        rectRet.center = pos ; \n        return rectRet ; \n\n    }\n\n    // 取得全部格子的包围矩形\n    public static getBoundingRectEntirety() : Rect {\n\n        // let cellSize = new Size( 80 , 80 ) ; \n        let cellSize = UiBagCfg.ins.cellSize ; \n\n        // 算出网格总体大小\n        let gridSize = UiBagGrid.ins.gridSize ; \n        let size = new Size() ; \n        size.width = gridSize.width * cellSize.width ; \n        size.height = gridSize.height * cellSize.height ;\n\n        // 边距\n        size.width += 40 ; \n        size.height += 40 ; \n\n        let rectRet = new Rect() ; \n        rectRet.size = size ; \n        rectRet.center = Vec2.ZERO ; \n        return rectRet ; \n\n    }\n}","import { GridTraverse } from \"./GridTraverse\";\nimport { UiBagCell } from \"./UiBagCell\";\n\n\nexport class GridHint {\n\n    // 提示可以放置\n    public static hintPlaceableShow( cells : Array< UiBagCell > ) {\n\n        for( let cell of cells ) {\n            cell.hintPlaceable.active = true ; \n            cell.hintExpandable.active = false ; \n        }\n\n    }\n\n    // 清除可放置\n    public static hintPlaceableClear() {\n\n        GridTraverse.exe( ( cell )=>{\n            \n            cell.hintPlaceable.active = false ; \n\n            cell.hintExpandable.active = !cell.unlocked ;\n            \n\n        } ) ;\n\n    }\n\n}","\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { UiBagBottom } from \"../Main/UiBagBottom\";\nimport { UiBagExpandOp } from \"../Main/UiBagExpandOp\";\nimport { UiBagGrid } from \"./UiBagGrid\";\nimport { UiBagGridBg } from \"./UiBagGridBg\";\n\n// 网格模式转变。模式：普通、扩展\nexport class GridModeTransition {\n\n    public static mode = 1 ;\n\n    // 初始模式\n    public static init() {\n\n        UiBagGridBg.ins.unlocked() ;\n        UiBagGrid.ins.alignBgCenter( 0 ) ; \n        UiBagExpandOp.ins.hide() ; \n        UiBagBottom.ins.show() ; \n\n        this.mode = 1 ; \n    }\n\n    // 扩展模式\n    public static toExpandable() {\n\n        if( this.mode == 2 ) return ;\n        this.mode = 2 ; \n\n        UiBagGrid.ins.showExpandable() ; \n        UiBagGrid.ins.alignBgCenter() ; \n        UiBagExpandOp.ins.show() ; \n        UiBagBottom.ins.hide() ; \n        \n\n    }\n\n\n    // 普通模式\n    public static toNormal() {\n\n        if( this.mode == 1 ) return ;\n        this.mode = 1 ; \n\n        UiBagGrid.ins.showNormal() ; \n        UiBagGrid.ins.alignBgCenter() ; \n        UiBagExpandOp.ins.hide() ; \n        UiBagBottom.ins.show() ; \n\n    }\n\n\n\n}","import { UiBagCell } from \"./UiBagCell\";\nimport { UiBagGrid } from \"./UiBagGrid\";\n\n// 网格遍历器\nexport class GridTraverse {\n\n    public static exe( cb : ( cell : UiBagCell )=>void ) {\n\n        let grid = UiBagGrid.ins.grid ; \n        for( let y = 0 ; y < grid.length ; ++y ) {\n            let row = grid[ y ] ;\n            for( let x = 0 ; x < row.length ; ++x ) {\n                let cell = row[ x ] ;\n\n                cb( cell ) ;\n\n            }\n        }\n\n    }\n\n    public static exe2( cb : ( cell : UiBagCell )=>boolean ) {\n\n        let grid = UiBagGrid.ins.grid ; \n        for( let y = 0 ; y < grid.length ; ++y ) {\n            let row = grid[ y ] ;\n            for( let x = 0 ; x < row.length ; ++x ) {\n                let cell = row[ x ] ;\n\n                if( cb( cell ) == false ) return ;\n\n            }\n        }\n\n    }\n\n}","import { resources } from \"cc\";\r\nimport { BagArticle } from \"../../Bag/Article/BagArticle\";\r\nimport { UiBagBottom } from \"../../Bag/Main/UiBagBottom\";\r\nimport { UiTray } from \"../../Bag/Main/UiTray\";\r\nimport { UiBagTouch } from \"../../Bag/Touch/UiBagTouch\";\r\nimport { GameArg } from \"../GameArg\";\r\nimport { Prefab } from \"cc\";\r\nimport { instantiate } from \"cc\";\r\nimport { UiMain } from \"../../Ui/Main/UiMain\";\r\nimport { UiBagGrid } from \"../../Bag/Grid/UiBagGrid\";\r\nimport { Vec2 } from \"cc\";\r\nimport { tween } from \"cc\";\r\nimport { Vec3 } from \"cc\";\r\nimport { Node } from \"cc\";\r\nimport { UITransform } from \"cc\";\r\nimport { BlockInputEvents } from \"cc\";\r\nimport { Tween } from \"cc\";\r\nimport { UiGuideCover } from \"../../../Common/Guide/UiGuideCover\";\r\nimport { Input } from \"cc\";\r\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\r\nimport { BagArticleGridPlaceByPos } from \"../../Bag/Article/BagArticleGridPlaceByPos\";\r\nimport { UiTextBox } from \"./UiTextBox\";\r\nimport { Lang } from \"../../../Common/Misc/Lang\";\r\nimport { languages } from \"../../../../resources/i18n/en\";\r\nimport { GuideData } from \"./GuideData\";\r\n\r\n\r\n// 引导\r\nexport class Guide {\r\n\r\n    // 预制\r\n    public static pf : Node ; \r\n    public static hand : Node ; \r\n\r\n    public static textBox : UiTextBox = null ;  \r\n\r\n    // 引导 遮挡\r\n    public static cover : UiGuideCover ; \r\n\r\n    public static blockInput : Node ; \r\n\r\n\r\n\r\n    // 开局的显示\r\n    public static exe1() {\r\n\r\n        let b = GameArg.ins.mainIdx == 1 ; \r\n        if( b == false ) return ; \r\n\r\n        GuideData.ins = new GuideData() ; \r\n        GuideData.ins.load() ; \r\n        if( GuideData.ins.hasRecord1() == true ) {\r\n            GuideData.ins = null ; \r\n            return ; \r\n        }\r\n\r\n\r\n        // 不显示底部按钮\r\n        UiBagBottom.ins.hide( ) ; \r\n\r\n        // 生成指定的装备\r\n        UiTray.ins.clear() ; \r\n        // 2格 竖着\r\n        UiTray.ins.addArticleById( \"004_1\" ) ;\r\n        UiTray.ins.addArticleById( \"005_1\" ) ;\r\n        UiTray.ins.addArticleById( \"002_1\" ) ;\r\n        \r\n        // 生成一个节点挡住所有的触摸\r\n        let blockInput = new Node( \"BlockInput\" ) ; \r\n        this.blockInput = blockInput ; \r\n        blockInput.addComponent( UITransform ).setContentSize( 99999 , 99999 ) ; \r\n        blockInput.addComponent( BlockInputEvents ) ; \r\n        blockInput.setParent( UiMain.ins.root , false ) ;\r\n        blockInput.position = Vec3.ZERO ; \r\n\r\n        // 加载引导的\r\n        let list = [ \r\n            \"Game/Misc/Guide\" , \r\n            \"Common/Ui/GuideCover\" , \r\n         ] ;\r\n        resources.load( list , Prefab , ( err , data )=>{\r\n\r\n            // blockInput.destroy() ; \r\n\r\n            // 初始化引导资源\r\n            let root = instantiate( data[ 0 ] ) ; \r\n            this.pf = root ; \r\n            let hand = this.hand = root.getChildByPath( \"Hand\" ) ; \r\n            hand.setParent( UiMain.ins.root , false ) ; \r\n\r\n            let rootCover = instantiate( data[ 1 ] ) ; \r\n            this.cover = new UiGuideCover() ; \r\n            this.cover.init( rootCover ) ; \r\n            this.cover.root.setParent( UiMain.ins.root , false ) ; \r\n            this.cover.root.active = false ; \r\n\r\n            // 文本框\r\n            this.textBox = new UiTextBox() ; \r\n            this.textBox.init( root.getChildByPath( \"Text\" ) ) ; \r\n            this.textBox.root.active = false ; \r\n            this.textBox.root.setParent( UiMain.ins.root , false ) ;\r\n\r\n\r\n            this.guideStep0( root.getChildByPath( \"Ui1\" ) ) ; \r\n\r\n            // this.guideRefresh() ; \r\n            \r\n        } ) ; \r\n\r\n    }\r\n\r\n    // 开始出现的文字\r\n    private static guideStep0( root : Node ) {\r\n\r\n        root.setParent( UiMain.ins.root , false ) ; \r\n        root.position = Vec3.ZERO ; \r\n\r\n        let cover = root.getChildByPath( \"Cover\" ) ; \r\n        cover.getComponent( UITransform ).setContentSize( 9999 , 9999 ) ; \r\n        cover.on( Input.EventType.TOUCH_END , ()=>{\r\n            root.destroy() ; \r\n            this.guideStep1() ; \r\n        } ) ; \r\n\r\n        // 提示字体缩放\r\n        let prompt = root.getChildByPath( \"Prompt\" ) ; \r\n        tween( prompt ).sequence(\r\n            tween( prompt ).to( 0.5 , { scale : new Vec3( 1.2 , 1.2 , 1.2 ) } ) , \r\n            tween( prompt ).to( 0.5 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } )\r\n        ).repeatForever().start() ; \r\n\r\n    }\r\n\r\n    // 第一阶段引导\r\n    private static guideStep1() {\r\n\r\n        this.textBox.root.active = true ; \r\n        this.textBox.root.position = new Vec3( 0 , 600 ) ; \r\n        this.textBox.label.string = Lang.get( \"Game_Guide_3\" ) ; \r\n\r\n        let blockInput = this.blockInput ; \r\n        blockInput.active = false ; \r\n\r\n        // 第一个的引导\r\n        this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 1 , 2 ) , ()=>{\r\n\r\n            // 隔一段时间，正确定位到下一个物件位置。\r\n            blockInput.active = true ; \r\n            tween( UiMain.ins.root ).delay( 0.2 ).call( ()=>{\r\n\r\n                blockInput.active = false ; \r\n                this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 2 , 2 ) , ()=>{\r\n\r\n                    // 隔一段时间，正确定位到下一个物件位置。\r\n                    blockInput.active = true ; \r\n                    tween( UiMain.ins.root ).delay( 0.2 ).call( ()=>{\r\n\r\n                        blockInput.active = false ; \r\n                        this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 2 , 3 ) , ()=>{\r\n    \r\n                            blockInput.active = true ; \r\n                            this.hand.active = false ; \r\n\r\n                            // 不允许拖动\r\n                            UiBagTouch.ins.root.active = false ; \r\n\r\n\r\n                            this.guideBtnRefresh() ; \r\n\r\n                        } ) ; \r\n\r\n                    } ).start() ; \r\n\r\n                } ) ; \r\n\r\n            } ).start() ; \r\n\r\n\r\n        } ) ; \r\n\r\n    }\r\n\r\n    // 引导 刷新装备\r\n    private static guideBtnRefresh() {\r\n\r\n        this.textBox.root.active = true ; \r\n        this.textBox.root.position = new Vec3( 0 , -600 ) ; \r\n        this.textBox.label.string = Lang.get( \"Game_Guide_4\" ) ; \r\n\r\n        // 引导遮罩自带防点击。\r\n        this.blockInput.active = false ; \r\n\r\n        let btn = UiBagBottom.ins.btnRefresh ; \r\n        // btn.active = true ; \r\n\r\n        // 复制一个按钮出来\r\n        let btn2 = instantiate( btn ) ; \r\n        btn2.active = true ; \r\n        btn2.setParent( UiMain.ins.root , true ) ;\r\n        btn2.worldPosition = btn.parent.worldPosition ; \r\n        SoundBtnClickSetter.exe( btn2 ) ;\r\n        btn2.on( Input.EventType.TOUCH_END , ()=>{\r\n            btn2.destroy() ; \r\n            this.cover.root.active = false ; \r\n\r\n            this.textBox.root.active = false ; \r\n\r\n            // 生成指定的装备\r\n            UiTray.ins.clear() ; \r\n            // 2格 竖着\r\n            UiTray.ins.addArticleById( \"004_1\" ) ;\r\n            UiTray.ins.addArticleById( \"006_1\" ) ;\r\n            UiTray.ins.addArticleById( \"003_1\" ) ;\r\n\r\n            this.blockInput.active = true ; \r\n            tween( UiMain.ins.root ).delay( 0.5 ).call( ()=>{\r\n                this.blockInput.active = false ; \r\n                this.guideStep2() ; \r\n\r\n            } ).start() ; \r\n            \r\n\r\n        } ) ; \r\n\r\n        this.coverBtn( btn2 ) ; \r\n\r\n    }\r\n\r\n    // 合成引导\r\n    private static guideStep2() {\r\n\r\n        this.textBox.root.active = true ; \r\n        this.textBox.root.position = new Vec3( 0 , 600 ) ; \r\n        this.textBox.label.string = Lang.get( \"Game_Guide_5\" ) ; \r\n\r\n        let blockInput = this.blockInput ; \r\n        blockInput.active = false ; \r\n\r\n        UiBagTouch.ins.root.active = true ; \r\n\r\n        this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 1 , 2 ) , ()=>{\r\n\r\n            // 隔一段时间，正确定位到下一个物件位置。\r\n            blockInput.active = true ; \r\n            tween( UiMain.ins.root ).delay( 0.2 ).call( ()=>{\r\n\r\n                blockInput.active = false ; \r\n                this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 1 , 4 ) , ()=>{\r\n\r\n                    // 隔一段时间，正确定位到下一个物件位置。\r\n                    blockInput.active = true ; \r\n                    tween( UiMain.ins.root ).delay( 0.2 ).call( ()=>{\r\n\r\n                        blockInput.active = false ; \r\n                        this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 3 , 2 ) , ()=>{\r\n    \r\n                            blockInput.active = true ; \r\n                            this.hand.active = false ; \r\n                            this.textBox.root.active = false ; \r\n\r\n                            // 不允许拖动\r\n                            UiBagTouch.ins.root.active = false ; \r\n\r\n\r\n                            this.guideBtnStart() ; \r\n\r\n                        } ) ; \r\n\r\n                    } ).start() ; \r\n\r\n                } ) ; \r\n\r\n            } ).start() ; \r\n\r\n        } ) ;\r\n\r\n    }\r\n\r\n    // 引导点击开始游戏\r\n    private static guideBtnStart() {\r\n\r\n        this.textBox.root.active = true ; \r\n        this.textBox.root.position = new Vec3( 0 , -600 ) ; \r\n        this.textBox.label.string = Lang.get( \"Game_Guide_6\" ) ; \r\n\r\n        // 引导遮罩自带防点击。\r\n        this.blockInput.active = false ; \r\n\r\n        let btn = UiBagBottom.ins.btnStart ; \r\n\r\n        // 复制一个按钮出来\r\n        let btn2 = instantiate( btn ) ; \r\n        btn2.active = true ; \r\n        btn2.setParent( UiMain.ins.root , true ) ;\r\n        btn2.worldPosition = btn.parent.worldPosition ; \r\n        SoundBtnClickSetter.exe( btn2 ) ;\r\n        btn2.on( Input.EventType.TOUCH_END , ()=>{\r\n            btn2.destroy() ; \r\n            this.textBox.root.active = false ; \r\n            this.complete() ;\r\n            btn.emit( Input.EventType.TOUCH_END );\r\n            \r\n        } ) ; \r\n\r\n        this.coverBtn( btn2 ) ; \r\n\r\n    }\r\n\r\n    private static complete() {\r\n\r\n        // 还原触摸\r\n        UiBagTouch.ins.onBeforeArticlePlace = null ; \r\n        UiBagTouch.ins.onBeforeArticleSelect = null ; \r\n        UiBagTouch.ins.onCompleteArticlePlace = null ; \r\n\r\n        // 删除多余的\r\n        this.blockInput.destroy() ; \r\n        this.cover.root.destroy() ; \r\n        this.hand.destroy() ; \r\n\r\n        // 记录标记\r\n        GuideData.ins.record1() ; \r\n        GuideData.ins.save() ; \r\n        GuideData.ins = null ; \r\n\r\n    }\r\n\r\n    // 遮罩按钮\r\n    private static coverBtn( btn : Node ) {\r\n\r\n        btn.active = true ; \r\n\r\n        // 目的大小\r\n        let size = btn.getComponent( UITransform ).contentSize.clone() ; \r\n\r\n        // 初始大小\r\n        let size1 = size.clone() ;\r\n        size1.width *= 15 ; size1.height *= 15 ; \r\n        size1.set( 3000 , 3000 ) ; \r\n\r\n        // 动画显示\r\n        this.cover.root.active = true ; \r\n        this.cover.mask.worldPosition = btn.worldPosition ; \r\n        this.cover.maskUiTrans.setContentSize( size1 ) ; \r\n        this.cover.showAnim( btn.worldPosition , size , 0.5 ) ;\r\n\r\n    }\r\n\r\n    // 引导拖放\r\n    private static guideTrayToGrid( article : BagArticle , coordTarget : Vec2 , onComplete : ()=>void ) {\r\n\r\n        let idx = UiTray.ins.articles.indexOf( article ) ; \r\n\r\n        let articleTarget = UiTray.ins.articles[ idx ] ; \r\n        let pos1 = articleTarget.view.root.worldPosition ; \r\n        let cell = UiBagGrid.ins.getCell( coordTarget ) ; \r\n        let pos2 = cell.root.worldPosition ; \r\n        \r\n        this.hand.active = true ; \r\n        this.handMove( this.hand , pos1 , pos2 ) ; \r\n\r\n        // 设置只允许选中\r\n        UiBagTouch.ins.onBeforeArticleSelect = ( article : BagArticle )=>{\r\n            return articleTarget == article ; \r\n        } ;\r\n\r\n        // 设置固定放置\r\n        UiBagTouch.ins.onBeforeArticlePlace = ( article : BagArticle )=>{\r\n\r\n            let cells = BagArticleGridPlaceByPos.getCellsPlace( article ) ; \r\n\r\n            let b = cells != null && \r\n                cells.find( ( e )=>{ return e.coord.equals( coordTarget ) ; } ) != null ;\r\n            if( b == false ) {\r\n\r\n                // 没有放对位置\r\n\r\n                // 放回到托盘中\r\n                UiTray.ins.insertArticleByIndex( article , idx ) ; \r\n                UiBagTouch.ins.towerAuraHint.clear( ) ; \r\n\r\n                return false ;\r\n            }\r\n\r\n            // 此刻还没真正放置完成，后面的逻辑才会，延迟等放置完成后再通知。\r\n            tween( UiMain.ins.root ).delay( 0.01 ).call( onComplete ).start( ) ;\r\n\r\n            return true ;\r\n\r\n        } ;\r\n\r\n    }\r\n\r\n    // 手指运动\r\n    private static handMove( hand : Node , pos1 : Vec3 , pos2 : Vec3  ) {\r\n\r\n        let duration = pos1.clone().subtract( pos2 ).length() / 400 ;\r\n\r\n        // 不复制出来的话，会跟着位置进行设置。\r\n        let pos12 = pos1.clone() ; \r\n\r\n        hand.worldPosition = pos12 ; \r\n\r\n        Tween.stopAllByTarget( hand ) ; \r\n\r\n        tween( hand ).sequence(\r\n\r\n            tween( hand ).call( ()=>{\r\n                hand.worldPosition = pos12 ; \r\n            } ) , \r\n\r\n            tween( hand ).to( duration , { worldPosition : pos2 } ) , \r\n\r\n            tween( hand ).delay( 0.1 ) , \r\n\r\n        ).repeatForever().start() ; \r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n","import { sys } from \"cc\";\r\n\r\n// 引导记录数据\r\nexport class GuideData {\r\n\r\n    public static ins : GuideData = null ; \r\n\r\n    // 记录1\r\n    public record1() {\r\n\r\n        // 用值的原因是，可以换个值，让下次重新执行引导。\r\n        this.data.set( \"Record1\" , \"2024.11.11\" ) ; \r\n\r\n    }\r\n\r\n    // 是否有记录1\r\n    public hasRecord1() {\r\n\r\n        let str = this.data.get( \"Record1\" ) ;\r\n        if( str == null || str == \"\" ) return false ; \r\n        return str == \"2024.11.11\" ; \r\n\r\n    }\r\n\r\n    public load() {\r\n\r\n        let str = sys.localStorage.getItem( \"GameGuide\" ) ;\r\n        if( str == null || str == \"\" ) return ; \r\n        \r\n        let json = JSON.parse( str ) ;\r\n        for( let k in json ) {\r\n            this.data.set( k , json[ k ] ) ; \r\n        } // end for\r\n\r\n    }\r\n\r\n    public save() {\r\n\r\n        let json = {} ; \r\n        for( let kv of this.data ) {\r\n            json[ kv[0] ] = kv[1] ;\r\n        } ;\r\n        let str = JSON.stringify( json ) ;\r\n\r\n        sys.localStorage.setItem( \"GameGuide\" , str ) ;\r\n\r\n    }\r\n\r\n    private data = new Map< string , string >() ; \r\n\r\n}","import { UITransform, Vec2, Vec3 } from \"cc\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { GridTraverse } from \"../Grid/GridTraverse\";\n\n// 击中测试\nexport class HitTest {\n\n    public static hit( posWorld : Vec2 ) {\n\n        let article = HitTest.hitTray( posWorld ) ;\n        if( article != null ) return article ;\n        \n        article = HitTest.hitGrid( posWorld ) ;\n        return article ;\n        \n    }\n\n    // 击中托盘的物品\n    public static hitTray( posWorld : Vec2 ) : BagArticle {\n\n        let pos = new Vec3( posWorld.x , posWorld.y ) ;\n        let pos2 = UiTray.ins.root.getComponent( UITransform ).convertToNodeSpaceAR( pos ) ;\n\n        let articles = UiTray.ins.articles ;\n        for( let a of articles ) {\n            let v = a.view.root.position.clone().subtract( pos2 ) ;\n            if( v.lengthSqr() < 100 * 100 ) {\n                return a ;\n            }\n        }\n\n        return null ;\n\n    }\n\n    // 击中网格的物品\n    public static hitGrid( posWorld : Vec2 ) : BagArticle {\n\n        let lenMin = Number.MAX_VALUE ; ;\n\n        let article : BagArticle = null ; \n        let pos = new Vec3( posWorld.x , posWorld.y ) ; \n        GridTraverse.exe( ( cell )=>{\n\n            // let v = UiTray.ins.root.getComponent( UITransform ).convertToNodeSpaceAR( pos ) ; \n            let v = cell.root.worldPosition.clone().subtract( pos ) ; \n            let len = v.lengthSqr() ; \n            if( Math.abs( v.x ) < 150 && Math.abs( v.y ) < 150 && len < lenMin ) {\n                lenMin = len ;\n                article = cell.article ; \n            }\n\n        } ) ;\n\n        return article ; \n\n    }\n\n}","import { director, find, input, Input, Node, tween, UITransform, Vec2, Vec3 } from \"cc\";\nimport { UiBag } from \"../Bag/Main/UiBag\";\nimport { Player } from \"../World/2.Td/Player/Player\";\nimport { Test } from \"./Test\";\nimport { WorldNode, WorldNodeInit } from \"../World/1.Base/Support/Misc/WorldNode\";\nimport { UiMain } from \"../Ui/Main/UiMain\";\nimport { RoleMgr } from \"../World/1.Base/Role/Base/RoleMgr\";\nimport { LevelLoad } from \"./LevelLoad/LevelLoad\";\nimport { CollisionHandler } from \"../World/1.Base/Collision/CollisionHandler\";\nimport { BagView } from \"../World/2.Td/Bag/BagView\";\nimport { UiBagBottom } from \"../Bag/Main/UiBagBottom\";\nimport { BagTrayAricleGen } from \"../World/2.Td/Bag/BagTrayAricleGen\";\nimport { GameStart } from \"../World/2.Td/Flow/GameStart\";\nimport { EnemyMovePath } from \"../World/2.Td/Flow/EnemyMovePath\";\nimport { CfgLevelWaveMgr } from \"../World/2.Td/Level/CfgLevelWaveMgr\";\nimport { LevelCtrl } from \"../World/2.Td/Level/LevelCtrl\";\nimport { BulletBounceRect } from \"../World/1.Base/Bullet/BulletBounceRect\";\nimport { PlayerRoleInit } from \"../World/2.Td/Player/PlayerRole\";\nimport { FeatureExtractPool } from \"../Ui/Popup/FeatureSel/FeatureExtract\";\nimport { BulletMgr } from \"../World/1.Base/Bullet/BulletMgr\";\nimport { UiTray } from \"../Bag/Main/UiTray\";\nimport { GridModeTransition } from \"../Bag/Grid/GridModeTransition\";\nimport { GridTraverse } from \"../Bag/Grid/GridTraverse\";\nimport { UiToast } from \"../../Common/Ui/UiToast\";\nimport { Lang } from \"../../Common/Misc/Lang\";\nimport { UiBagExpandOp } from \"../Bag/Main/UiBagExpandOp\";\nimport { PlayerInit } from \"../World/2.Td/Player/PlayerInit\";\nimport { UiDialog } from \"../../Common/Ui/UiDialog\";\nimport { Ad } from \"../../Common/Ad/Ad\";\nimport { UiMoney001 } from \"../Ui/Main/UiMoney001\";\nimport { MoneyFly } from \"../../Common/Misc/MoneyFly\";\nimport { GameArg } from \"./GameArg\";\nimport { FrameCall } from \"../World/1.Base/Support/Misc/FrameCall\";\nimport { MergeDefinition } from \"../Bag/Merge/MergeDefinition\";\nimport { Stats } from \"../World/1.Base/Support/Misc/Stats\";\nimport { Music } from \"../../Common/Audio/Music\";\nimport { Guide } from \"./Guide/Guide\";\nimport { TimeScale } from \"../../Common/Misc/TimeScale\";\n\nexport class Init {\n\n    public static exe() {\n\n        LevelLoad.load( ) ;\n\n        WorldNodeInit.exe() ; \n\n        // 载入关卡波数\n        let id = GameArg.ins.levelId ; \n        LevelCtrl.ins = new LevelCtrl() ; \n        LevelCtrl.ins.levelData = CfgLevelWaveMgr.data.get( id ) ; \n      \n        FrameCall.ins = new FrameCall() ; \n\n        FeatureExtractPool.ins = new FeatureExtractPool() ; \n        FeatureExtractPool.ins.init() ; \n\n        PlayerInit.exe() ; \n\n        UiMain.ins = new UiMain() ; \n        UiMain.ins.init() ; \n        \n        CollisionHandler.init() ; \n\n        EnemyMovePath.ins.init() ; \n\n        RoleMgr.ins = new RoleMgr() ; \n\n        BulletMgr.ins = new BulletMgr() ; \n\n        // 初始化家\n        // DenFactory.create( WorldNode.ins.root.getChildByPath( \"Den\" ) ) ;\n        PlayerRoleInit.init() ; \n\n        BulletBounceRect.ins.init() ; \n\n        this.initBag() ; \n\n        Stats.ins = new Stats() ; \n\n        Test.exe() ; \n        \n        Music.ins.game() ; \n\n        Guide.exe1() ; \n\n        // 离开场景清理\n        director.getScene().on( Node.EventType.NODE_DESTROYED , ()=>{\n            console.log( \"销毁\" ) ;\n            Deinit.exe() ; \n        } ) ;\n\n    }\n\n\n    public static initBag() {\n\n        // 初始化背包部分\n        UiBag.createIns( find( \"Canvas/World/Bag\" ) ) ;\n\n        // 初始化按钮\n        UiBagBottom.ins = new UiBagBottom() ; \n        UiBagBottom.ins.init( UiMain.ins.root.getChildByPath( \"Ui/BagBottom\" ) ) ;     \n\n        // 初始化托盘\n        UiTray.ins = new UiTray() ; \n        UiTray.ins.init( UiMain.ins.root.getChildByPath( \"Ui/BagTray\" ) ) ; \n\n        // 初始化扩展操作\n        UiBagExpandOp.ins = new UiBagExpandOp() ; \n        UiBagExpandOp.ins.init( UiMain.ins.root.getChildByPath( \"Ui/BagExpandOp\" ) ) ; \n   \n        // 记录的 不启用合并的，都不启用。合并恢复。\n        for( let kv of MergeDefinition.ins.allowData ) {\n            MergeDefinition.ins.allowData.set( kv[0] , false ) ; \n        }\n\n        GridModeTransition.init() ; \n        \n\n        // 设置为背包整理的视图\n        BagView.enterDirect() ; \n\n        let uiBottom = UiBagBottom.ins ; \n        uiBottom.btnStart.on( Input.EventType.TOUCH_END , ()=>{\n\n            // 判断是否可以开始游戏\n            let hasArticle = false ; \n            GridTraverse.exe2( ( cell )=>{\n                if( cell.article != null ) {\n                    hasArticle = true ; \n                    return false ; \n                }\n                return true ; \n            } ) ;\n            if( hasArticle == false ) {\n                UiToast.show( UiMain.ins.root , Lang.get( \"Game_Prompt_Deploy\" ) ) ; \n                return ; \n            }\n           \n\n            BagView.leave() ; \n\n            GameStart.start() ; \n\n        } ) ;\n        \n\n        // uiBottom.btnRefresh.off( Input.EventType.TOUCH_END ) ; \n        uiBottom.btnRefresh.on( Input.EventType.TOUCH_END , ()=>{\n\n            let m = Player.ins.money001 - 15 ; \n            if( m < 0 ) {\n                // 货币不足的提示\n\n                let dial = UiDialog.create( UiMain.ins.root ) ; \n                dial.txt.string = \"阳光不足，\\n是否观看广告，获得30阳光\" ; \n                dial.show() ; \n                dial.btnOK.on( Input.EventType.TOUCH_END , ()=>{\n                    // 看广告\n\n                    Ad.ins.rewardShow( ()=>{\n\n                        Player.ins.money001 += 30 ;\n                        UiMoney001.ins.refresh() ; \n\n                        // 货币飞\n                        MoneyFly.money001Fly2( UiMain.ins.root , Vec3.ZERO , UiMoney001.ins.icon ) ; \n\n                    } ) ;\n\n\n                } ) ;\n\n                return ; \n            }\n            Player.ins.money001 = m ;\n            UiMoney001.ins.refresh() ; \n\n            BagTrayAricleGen.ins.gen() ; \n\n        } ) ; \n        \n\n    }\n\n}\n\n\n\nexport class Deinit {\n\n    public static exe() {\n\n        RoleMgr.ins = null ; \n\n        BulletMgr.ins = null ; \n\n        TimeScale.set( 1 ) ; \n\n    }\n\n}","\nimport { AccountPersist } from '../../Common/Account/AccountPersist';\nimport { ResLoad } from './ResLoad';\nimport { director, find, Label } from 'cc';\nimport { Lang } from '../../Common/Misc/Lang';\nimport { UiKeyboard } from './UiKeyboard';\nimport { Account } from '../../Common/Account/Account';\nimport { UiToast } from '../../Common/Ui/UiToast';\nimport { UiWin } from '../../Game/Ui/Popup/Settle/UiWin';\nimport { UiLose } from '../../Game/Ui/Popup/Settle/UiLose';\nimport { AdInit } from '../../Common/Ad/Misc/AdInit';\nimport { WxHelper } from '../../SL/Cocos/Wx/WxHelper';\nimport { UiBar } from '../../Game/Ui/Bar/UiBar';\nimport { PlatformInit } from '../../Common/Platform/PlatformInit';\nimport { StaminaRecoveryPersist } from '../../Common/Misc/StaminaRecovery';\nimport { AudioSettingsPersist } from '../../Common/Audio/AudioSettingsPersist';\nimport { DateTimeMgr } from '../../SL/Common/Misc/DateTimeMgr';\nimport { DailyCheckinDataPersist } from '../../Home/Ui/Popup/DailyCheckin/DailyCheckinData';\nimport { assetManager } from 'cc';\nimport { log } from 'cc';\nimport { TextAsset } from 'cc';\nimport { JsonAsset } from 'cc';\nimport { Test } from './Test';\n\n\nexport class Init {\n\n    public static exe() {\n\n        /*\n            开启动态合图\n            https://docs.cocos.com/creator/3.8/manual/zh/advanced-topics/dynamic-atlas.html\n        */\n        // macro.CLEANUP_IMAGE_CACHE = false;\n        // DynamicAtlasManager.instance.enabled = true;\n        \n        // 时间\n        DateTimeMgr.ins = new  DateTimeMgr() ; \n        DateTimeMgr.ins.dtStart = new Date( Date.now() ) ;\n\n        Lang.init() ;   \n\n        let _wxHelper=new WxHelper();\n        WxHelper.enableShareMenu() ; \n        _wxHelper.initShare();\n        _wxHelper.CheckIsShare();\n\n        UiKeyboard.ins = new UiKeyboard() ; \n        UiKeyboard.ins.init() ; \n\n        // 进度条\n        let ProgressBar = new UiBar() ;\n        ProgressBar.init( find( \"Canvas/Progress\" ) );\n        ProgressBar.bar.fillRange = 0 ;\n        let txt = ProgressBar.root.getComponentInChildren( Label ) ; \n\n        // 载入资源\n        ResLoad.onProgress = ( val : number )=>{\n\n            // 文字更新\n            let val2 = Math.floor( val * 100 ) ;\n            txt.string = val2 + \" %\" ; \n            \n            // 进度条\n            ProgressBar.bar.fillRange = val / 1 ; \n            \n        } ;\n        ResLoad.exe( this.onCompleteResLoad.bind( this ) ) ;\n        \n        /*\n            加载一些核心玩法的内容。\n            不占用第一次启动的时间。\n        */ \n        UiWin.loadPf() ; \n        UiLose.loadPf() ; \n        UiToast.loadPf() ; \n\n        PlatformInit.exe() ; \n\n        Test.exe() ; \n        \n    }\n\n    private static onCompleteResLoad() {\n\n        AdInit.exe() ; \n\n        director.loadScene( \"Home\" );\n\n        Account.ins = new Account() ; \n        Account.ins.init() ;\n        \n        AccountPersist.load() ; \n        StaminaRecoveryPersist.load() ; \n        AudioSettingsPersist.load() ; \n        DailyCheckinDataPersist.load() ; \n\n    }\n\n\n}","import { UiMain } from \"../Ui/Main/UiMain\";\nimport { World } from \"../World/World\";\nimport { ArticleUnlockLevel } from \"../Misc/ArticleUnlockLevel\";\nimport { Music } from \"../../Common/Audio/Music\";\n\nexport class Init {\n\n    public static exe() {\n\n        Music.ins.home() ; \n\n        UiMain.ins.init() ; \n        \n        // World.ins = new World() ; \n        // World.ins.init() ; \n\n        ArticleUnlockLevel.exe() ; \n        \n    }\n\n}\n\n","import { randomRangeInt, sys } from \"cc\";\n// import { UiTtSidebarReward } from \"../../Home/TtSidebarReward/UiTtSidebarReward\";\n// import { TtSidebarRewardInit } from \"../../Home/TtSidebarReward/TtSidebarRewardInit\";\n\n\n\n\n// 分享设置\nexport class InitTt {\n\n    public static exe() {\n\n        // TtSidebarRewardInit.exe() ; \n\n        this.enableShareMenu() ;\n\n        // // @ts-ignore\n        // let info = tt.getSystemInfoSync();\n        // console.log( info ) ;\n        \n    }\n\n    // 开启分享按钮\n    public static enableShareMenu() {\n\n        // @ts-ignore\n        tt.showShareMenu({\n            success(res) {\n              console.log(\"已成功显示转发按钮\");\n            },\n            fail(err) {\n              console.log(\"showShareMenu 调用失败\", err.errMsg);\n            },\n            complete(res) {\n              console.log(\"showShareMenu 调用完成\");\n            },\n          });\n\n          \n    }\n\n\n}","import { randomRangeInt, sys } from \"cc\";\n\n\n\n// 分享设置\nexport class InitWx {\n\n    public static exe() {\n        this.enableShareMenu() ;\n        // this.setShareAppMessage() ;\n\n    }\n\n    // 开启分享按钮\n    public static enableShareMenu() {\n\n        // @ts-ignore\n        wx.showShareMenu({\n            withShareTicket: true,\n            menus: ['shareAppMessage', 'shareTimeline'] \n          }) ;\n\n    }\n\n    // 设置分享的图片\n    public static setShareAppMessage() {\n\n        let id = \"YI8fyUsLSca1KjLA7jWVMw==\" ;\n        let url = \"https://mmocgame.qpic.cn/wechatgame/aEQNKrkEbHicZunEoHAWKw65HtBMlPVXhicgoAQxHrESKeeuOk4naCcB7pMMicYXxia5/0\" ;\n\n        // @ts-ignore\n        wx.onShareAppMessage(function () {\n            return {\n                title: '消除方块，智力大挑战！',\n                imageUrlId: id,\n                imageUrl: url\n            }\n        }) ;        \n\n    }\n\n\n}","import { CfgItem } from \"../Cfg/CfgItem\";\n\n\n// 物品数据\nexport class ItemData {\n\n    // 物品 ID \n    public id : string ; \n\n    // 数量\n    public count = 0 ; \n\n    // 物品配置\n    public cfg : CfgItem ; \n\n    public constructor( id : string = null , count : number = 0 ) {\n        this.id = id ;\n        this.count = count ; \n    }\n\n}","import { randomRangeInt } from \"cc\";\nimport { WeightProbability } from \"../../SL/Common/Misc/WeightProbability\";\nimport { CfgItemDraw } from \"../Cfg/CfgItemDraw\";\nimport { ItemData } from \"./ItemData\";\nimport { CfgItem, CfgItemMgr } from \"../Cfg/CfgItem\";\nimport { ItemType } from \"./ItemType\";\n\n\n\n// 物品抽取\nexport class ItemDraw {\n\n    public static exe( id : string ) : Array< ItemData > {\n\n        let ret = new Array< ItemData >() ; \n\n        let cfgItem = CfgItemDraw.data.get( id ) ;\n        if( cfgItem == null ) {\n            return ret ; \n        }\n\n        let w = new WeightProbability() ; \n\n        for( let i = 0 ; i < cfgItem.items.length ; ++i ) {\n            let cfgItemItem = cfgItem.items[ i ] ; \n            w.add( cfgItemItem.id , cfgItemItem.w ) ;\n        } // end for\n\n        let n = randomRangeInt( cfgItem.min , cfgItem.max + 1 ) ; \n        for( let i = 0 ; i < n ; ++i ) {\n            let id = w.get( ) ; \n\n            let item = ret.find( ( e )=>{ return e.id == id ; } ) ; \n            if( item == null ) {\n                item = new ItemData() ; \n                item.id = id ;\n                item.cfg = CfgItemMgr.data.get( id ) ; \n                ret.push( item ) ; \n            }\n            item.count++ ;\n\n        } // end for\n        \n        this.sort( ret ) ;\n\n        return ret ; \n\n    }\n\n    // 排序 品质\n    public static sort( items : Array< ItemData > ) {\n\n        let mapping = new Map< string , number >() ; \n        mapping.set( ItemType.Money001 , 1 ) ;\n        mapping.set( ItemType.Money002 , 2 ) ;\n        // mapping.set( ItemType.Fragment , 4 ) ;\n\n        items.sort( ( a , b )=>{\n\n            // 按照类型排序\n            let p1 = mapping.has( a.id ) ? mapping.get( a.id ) : 10 ; \n            let p2 = mapping.has( b.id ) ? mapping.get( b.id ) : 10 ; \n            if( p1 < p2 ) {\n                return -1 ;\n            }\n            else if( p1 > p2 ) {\n                return 1 ;\n            }\n\n            // 同类型。按照品质排序\n\n            if( a.cfg.quality < b.cfg.quality ) {\n                return 1 ;\n            }\n            else if( a.cfg.quality > b.cfg.quality ) {\n                return -1 ;\n            }\n\n            return 0 ; \n\n        } ) ;\n\n    }\n\n}\n\n","import { isValid } from \"cc\";\r\nimport { UiStamina } from \"../../Home/Ui/Main/Margin/UiStamina\";\r\nimport { Account } from \"../Account/Account\";\r\nimport { AccountPersist } from \"../Account/AccountPersist\";\r\nimport { ItemData } from \"./ItemData\";\r\nimport { ItemType } from \"./ItemType\";\r\nimport { UiMoney002 } from \"../../Home/Ui/Main/Margin/UiMoney002\";\r\nimport { UiMoney001 } from \"../../Home/Ui/Main/Margin/UiMoney001\";\r\n\r\n// 得到物件\r\nexport class ItemGet {\r\n\r\n    // 加入数据\r\n    public static addList( items : Array< ItemData > ) {\r\n\r\n        for( let item of items ) {\r\n\r\n            let id = item.id ; \r\n            switch( id ) {\r\n\r\n                case ItemType.Money001 : {\r\n\r\n                    Account.ins.money.money001 += item.count ; \r\n\r\n                    if( isValid( UiMoney001.ins.root ) ) {\r\n                        UiMoney001.ins.refresh() ; \r\n                    }\r\n                }\r\n                break ; \r\n\r\n                case ItemType.Money002 : {\r\n\r\n                    Account.ins.money.money002 += item.count ; \r\n\r\n                    if( isValid( UiMoney002.ins.root ) ) {\r\n                        UiMoney002.ins.refresh() ; \r\n                    }\r\n\r\n                }\r\n                break ; \r\n\r\n                case ItemType.Stamina : {\r\n\r\n                    Account.ins.stamina.current += item.count ; \r\n\r\n                    if( isValid( UiStamina.ins.root ) ) {\r\n                        UiStamina.ins.refresh() ; \r\n                    }\r\n\r\n                }\r\n                break ; \r\n\r\n                default : {\r\n\r\n                    let n = Account.ins.items.get( id ) ; \r\n                    if( n == null ) {\r\n                        n = 0 ;\r\n                    }\r\n                    n += item.count ; \r\n                    Account.ins.items.set( id , n ) ;  \r\n\r\n                }\r\n                break ; \r\n\r\n            }\r\n\r\n        } // end for\r\n        AccountPersist.save() ; \r\n\r\n    }\r\n\r\n\r\n    \r\n}","import { Account } from \"db://assets/Script/Common/Account/Account\";\nimport { ItemData } from \"db://assets/Script/Common/Item/ItemData\";\nimport { ItemType } from \"db://assets/Script/Common/Item/ItemType\";\nimport { UiToast } from \"db://assets/Script/Common/Ui/UiToast\";\nimport { UiMain } from \"../../Home/Ui/Main/UiMain\";\nimport { AccountPersist } from \"db://assets/Script/Common/Account/AccountPersist\";\nimport { isValid } from \"cc\";\nimport { UiMoney001 } from \"../../Home/Ui/Main/Margin/UiMoney001\";\nimport { UiMoney002 } from \"../../Home/Ui/Main/Margin/UiMoney002\";\nimport { UiStamina } from \"../../Home/Ui/Main/Margin/UiStamina\";\nimport { Lang } from \"../Misc/Lang\";\n\n// 物品扣减\nexport class ItemSub {\n\n    public static exe( data : Array< ItemData > ) {\n\n        let toastStayDuration = 1.5 ; \n\n        let a = Account.ins ; \n\n        for( let i = 0 ; i < data.length ; ++i ) {\n\n            let item = data[ i ] ;\n\n            switch( item.id ) {\n\n                case ItemType.Money001 : {\n\n                    if( a.money.money001 < item.count ) {\n                        UiToast.show( UiMain.ins.root , Lang.get( \"Home_Money001NotEnough\" ) , toastStayDuration ) ; \n                        return false ; \n                    }\n\n                }\n                break ; \n\n                case ItemType.Money002 : {\n\n                    if( a.money.money002 < item.count ) {\n                        UiToast.show( UiMain.ins.root , Lang.get( \"Home_Money002NotEnough\" ) , toastStayDuration ) ; \n                        return false ; \n                    }\n\n                }\n                break ; \n\n                case ItemType.Stamina : {\n\n                    if( a.stamina.current < item.count ) {\n                        UiToast.show( UiMain.ins.root , Lang.get( \"Home_SiaminaNotEnough\" ) , toastStayDuration ) ; \n                        return false ; \n                    }\n\n                }\n                break ; \n\n                default : {\n\n                    // 碎片\n                    if( item.id.startsWith( \"Fragment\" ) ) {\n\n                        let itemCount = a.items.get( item.id ) ; \n                        if( itemCount == null ) { itemCount = 0 ; } ; \n                        if( itemCount < item.count ) {\n    \n                            // 碎片不足\n                            UiToast.show( UiMain.ins.root , Lang.get( \"Home_FragmentNotEnough\" ) , toastStayDuration ) ; \n    \n                            return false ; \n\n                        }\n\n                    }\n\n\n                }\n                break ; \n\n            }\n\n\n        } // end for\n\n\n        // 实际扣减物品\n\n        for( let i = 0 ; i < data.length ; ++i ) {\n\n            let item = data[ i ] ;\n\n            switch( item.id ) {\n\n                case ItemType.Money001 : {\n                    a.money.money001 -= item.count ; \n\n                    if( isValid( UiMoney001.ins.root ) ) {\n                        UiMoney001.ins.refresh() ; \n                    }\n                }\n                break ; \n\n                case ItemType.Money002 : {\n                    a.money.money002 -= item.count ; \n\n                    if( isValid( UiMoney002.ins.root ) ) {\n                        UiMoney002.ins.refresh() ; \n                    }\n                }\n                break ; \n\n                case ItemType.Stamina : {\n                    a.stamina.current -= item.count ; \n\n                    if( isValid( UiStamina.ins.root ) ) {\n                        UiStamina.ins.refresh() ; \n                    }\n                }\n                break ; \n\n                default : {\n\n                    // 碎片\n                    if( item.id.startsWith( \"Fragment\" ) ) {\n\n                        let itemCount = a.items.get( item.id ) ; \n                        itemCount -= item.count ; \n                        a.items.set( item.id , itemCount ) ; \n\n                    }\n\n\n                }\n                break ; \n\n            }\n\n\n        } // end for\n\n        AccountPersist.save() ;\n\n\n        return true ; \n\n    }\n    \n}","\n// 物品类型\nexport enum ItemType {\n\n    None = \"None\" ,\n\n    // 货币 1。1 级货币。金币\n    Money001 = \"Money001\" , \n\n    // 货币 2。2 级货币。\n    Money002 = \"Money002\" , \n\n    // 体力\n    Stamina = \"Stamina\" , \n\n    // 装备碎片。\n    // Fragment = \"Fragment\" , \n\n}\n\n","\nimport * as i18n from 'db://i18n/LanguageData';\n\n// 语言\nexport class Lang {\n\n    public static init() {\n\n        i18n.init('zh') ; \n\n    }\n\n    public static get( key : string ) : string {\n\n        let str = i18n.t( key ) ;\n        return str ; \n\n    }\n\n}","import { director } from 'cc';\n\nexport let _language = 'zh';\n\nexport let ready: boolean = false;\n\n/**\n * 初始化\n * @param language \n */\nexport function init(language: string) {\n    ready = true;\n    _language = language;\n}\n\n/**\n * 翻译数据\n * @param key \n */\nexport function t(key: string) {\n    const win: any = window;\n    \n    if (!win.languages) {\n        return key;\n    }\n    const searcher = key.split('.');\n    \n    let data = win.languages[_language];\n    for (let i = 0; i < searcher.length; i++) {\n        data = data[searcher[i]];\n        if (!data) {\n            return '';\n        }\n    }\n    return data || '';\n}\n\nexport function updateSceneRenderers() { // very costly iterations\n    const rootNodes = director.getScene()!.children;\n    // walk all nodes with localize label and update\n    const allLocalizedLabels: any[] = [];\n    for (let i = 0; i < rootNodes.length; ++i) {\n        let labels = rootNodes[i].getComponentsInChildren('LocalizedLabel');\n        Array.prototype.push.apply(allLocalizedLabels, labels);\n    }\n    for (let i = 0; i < allLocalizedLabels.length; ++i) {\n        let label = allLocalizedLabels[i];\n        if(!label.node.active)continue;\n        label.updateLabel();\n    }\n    // walk all nodes with localize sprite and update\n    const allLocalizedSprites: any[] = [];\n    for (let i = 0; i < rootNodes.length; ++i) {\n        let sprites = rootNodes[i].getComponentsInChildren('LocalizedSprite');\n        Array.prototype.push.apply(allLocalizedSprites, sprites);\n    }\n    for (let i = 0; i < allLocalizedSprites.length; ++i) {\n        let sprite = allLocalizedSprites[i];\n        if(!sprite.node.active)continue;\n        sprite.updateSprite();\n    }\n}\n\n// 供插件查询当前语言使用\nconst win = window as any;\nwin._languageData = {\n    get language() {\n        return _language;\n    },\n    init(lang: string) {\n        init(lang);\n    },\n    updateSceneRenderers() {\n        updateSceneRenderers();\n    },\n};\n","import { RoleMgr } from \"../../1.Base/Role/Base/RoleMgr\";\nimport { LevelData } from \"./CfgLevelWaveMgr\";\nimport { WaveCtrl } from \"./WaveCtrl\";\nimport { WaveSettle } from \"./WaveSettle\";\n\n\n// 关卡级的波控制器。控制波的集合\nexport class LevelCtrl {\n\n    public static ins : LevelCtrl = null ; \n\n    // 关卡数据\n    public levelData : LevelData = null ; \n\n    // 当前运行到的波索引。从 1 开始\n    public currentWaveIdx = 1 ; \n\n    // 开始\n    public start() {\n\n        this.startWave() ; \n\n    }\n\n    public reset() {\n        this.currentWaveIdx = 1 ; \n    }\n\n    // 启动一波\n    public startWave() {\n\n        let wave = this.levelData.waves[ this.currentWaveIdx ] ; \n\n        WaveCtrl.ins.data = wave ; \n        WaveCtrl.ins.onComplete = this.onCompleted_Wave.bind( this ) ; \n        WaveCtrl.ins.start() ; \n\n        this.state = 1 ; \n\n    }\n\n    // 一波控制出兵完成\n    private onCompleted_Wave() {\n\n        this.currentWaveIdx++ ; \n        \n        this.state = 2 ; \n\n    }\n\n    public update() {\n\n        switch( this.state ) {\n\n            case 1 : {\n                // 执行出兵控制\n                WaveCtrl.ins.update() ; \n            }\n            break ; \n\n            case 2 : {\n                // 检测一波的怪是否打完\n                this.updateWaveEnemy() ; \n            }\n            break ; \n\n        }\n\n    }\n\n    private updateWaveEnemy() {\n\n        if( RoleMgr.ins.allEnemies.length > 0 ) return ; \n\n        this.state = 0 ; \n\n        // 清完了一波的怪\n        this.onClearWaveAllEnemies() ; \n\n    }\n\n    // 清完一波的所有敌人\n    private onClearWaveAllEnemies() {\n\n        WaveSettle.exe() ; \n\n    }\n\n    private state = 0 ; \n\n}\n\n","import { find, instantiate, Prefab, resources, Vec3 } from \"cc\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\nimport { World } from \"../../../Home/World/World\";\n\n// 关卡载入\nexport class LevelLoad {\n\n    // 关卡地图预制\n    public static pfMap : Prefab ;\n\n    public static load( ) {\n\n        this.load2() ; \n\n    }\n\n    // 替换地面图。纯换图做法\n    public static load2() {\n\n        // 删除之前的 替换\n        let layer0 = find( \"Canvas/World/Layer0\" ) ; \n        if( layer0 != null ) {\n            layer0.destroy() ; \n        }\n\n        let node = instantiate( this.pfMap ) ;\n        node.name = \"Layer0\" ; \n        node.setParent( find( \"Canvas/World\" ) , false ) ; \n        node.position = Vec3.ZERO ; \n        node.setSiblingIndex( 0 ) ;\n\n    }\n\n}","import { Lang } from \"../../../../Common/Misc/Lang\";\n\n\nexport class LevelString {\n\n    public static getName( id : string ) : string {\n\n        let key = \"MainLevel_Name_\" + id ; \n        let str = Lang.get( key ) ; \n        return str ; \n\n    }\n\n    public static getMainLevelName( idx : number ) : string {\n\n        let key = \"MainLevel_Name_\" + ( idx + 1 ) ; \n        let str = Lang.get( key ) ; \n        return str ; \n\n    }\n\n}","import { CurrentMax } from \"../../Support/SimpleStruct/CurrentMax\";\n\nexport class Life\n{\n    // 是否是活着的。\n    public get isAlive() : boolean { return this.hp.current > 0 ; }\n\n    // 是否是死亡的。\n    public get isDead() : boolean { return this.hp.current <= 0 ; }\n\n    // 血量\n    public hp = new CurrentMax();\n\n    public add( n : number ) {\n\n        // 只能加入整数\n        n = Math.floor( n ) ;\n\n        this.hp.current += n ; \n\n        // 不能超过最大值\n        if( this.hp.current > this.hp.max ) {\n            this.hp.current = this.hp.max ; \n        }\n\n    }\n\n    //// 恢复\n    //public Recovery recovery = new Recovery();\n\n    // 防御\n    // public Defense defense = new Defense();\n\n\n}","\r\n\r\nexport class ListHelper {\r\n\r\n    // 添加元素。如果列表已经存在，则不重复添加。\r\n    public static addUniquely< T >( list : Array< T > , e : T ) {\r\n\r\n        let idx = list.indexOf( e ) ; \r\n        if( idx != -1 ) return ; \r\n\r\n        list.push( e ) ; \r\n\r\n    }\r\n\r\n    // 删除指定元素\r\n    public static remove< T >( list : Array< T > , e : T ) {\r\n\r\n        let idx = list.indexOf( e ) ; \r\n        if( idx == -1 ) return ; \r\n        list.splice( idx , 1 ) ; \r\n\r\n    }\r\n\r\n    public static clear< T >( list : Array< T > ) {\r\n        list.splice( 0 , list.length ) ; \r\n    }\r\n\r\n}","import { Asset } from \"cc\";\r\n\r\n// 载入器基类\r\nexport class LoaderBase {\r\n\r\n    // 完成\r\n    public onComplete : ()=>void = null ;\r\n\r\n    // 进度\r\n    public onProgress: (val: number) => void = null ;\r\n\r\n    public add( path : string , handler : ( data : Asset )=>void ) {\r\n\r\n    }\r\n\r\n    public exe( ) {\r\n        \r\n    }\r\n\r\n}","import { JsonAsset } from \"cc\";\r\nimport { assetManager } from \"cc\";\r\nimport { Asset } from \"cc\";\r\nimport { LoaderBase } from \"./LoaderBase\";\r\n\r\n// 远程载入\r\nexport class LoaderRemote extends LoaderBase {\r\n\r\n    // 完成\r\n    public onComplete : ()=>void = null ;\r\n\r\n    // 进度\r\n    public onProgress: (val: number) => void = null ;\r\n\r\n    public list = new Array< any >() ;\r\n\r\n    public add( path : string , handler : ( data : Asset )=>void ) {\r\n\r\n        let item = {} ;\r\n        item[ \"path\" ] = path ;\r\n        item[ \"handler\" ] = handler ;\r\n        this.list.push( item ) ;\r\n\r\n    }\r\n\r\n    public exe() {\r\n\r\n        let count = this.list.length ; \r\n        let counter = 0 ; \r\n\r\n        for( let i = 0 ; i < this.list.length ; ++i ) {\r\n\r\n            let item = this.list[ i ] ;\r\n            let path = item[ \"path\" ] ; \r\n            let handler = item[ \"handler\" ] ;\r\n\r\n            let url = path ;\r\n\r\n            // assetManager 要设置跨域。不能访问 hfs 服务器。\r\n            assetManager.loadRemote( url , ( err , data : JsonAsset )=>{\r\n\r\n                if( err != null ) {\r\n                    console.error( \"读取配置出错：\" + url ) ;\r\n                    return ; \r\n                }\r\n\r\n                handler( data ) ;\r\n\r\n                ++counter ;\r\n                if( counter == count ) {\r\n                    // 完成\r\n                    this.onComplete() ; \r\n                    \r\n                }\r\n\r\n            } ) ;\r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n}","import { assetManager } from \"cc\";\r\nimport { Asset } from \"cc\";\r\nimport { resources } from \"cc\";\r\nimport { LoaderBase } from \"./LoaderBase\";\r\n\r\n\r\n// Resources 资源载入器\r\nexport class LoaderResources extends LoaderBase {\r\n\r\n    // 完成\r\n    public onComplete : ()=>void = null ;\r\n\r\n    // 进度\r\n    public onProgress: (val: number) => void = null ;\r\n\r\n    public list = new Array< any >() ;\r\n\r\n    public add( path : string , handler : ( data : Asset )=>void ) {\r\n\r\n        let item = {} ;\r\n        item[ \"path\" ] = path ;\r\n        item[ \"handler\" ] = handler ;\r\n        this.list.push( item ) ;\r\n\r\n    }\r\n\r\n    public exe( ) {\r\n\r\n        // 转换成cocos接口的列表\r\n        let list2 = new Array< string >() ; \r\n        for( let i = 0 ; i < this.list.length ; ++i ) {\r\n            list2.push( this.list[ i ][ \"path\" ] ) ;\r\n        } // end for \r\n\r\n        resources.load( list2 , this._onProgress.bind(this) , ( err , data )=>{\r\n\r\n            if( err != null ) {\r\n                // 出错\r\n            }\r\n\r\n            for( let i = 0 ; i < data.length ; ++i ) {\r\n\r\n                let dataItem = data[ i ] ; \r\n\r\n                let item = this.list[ i ] ;\r\n                let handler = item[ \"handler\" ] ;\r\n                handler( dataItem ) ;\r\n\r\n            } // end for\r\n\r\n            this.onComplete?.() ;\r\n\r\n        } ) ;\r\n\r\n    }\r\n\r\n    private _onProgress(finished: number, total: number, item: RequestInit) {\r\n\r\n        // 进度百分比计算。参考：https://forum.cocos.org/t/topic/147629\r\n\r\n        let val = finished / total;\r\n        if (val < this.val) return;\r\n\r\n        this.val = val;\r\n        this.onProgress?.(this.val);\r\n\r\n    }\r\n\r\n    // 进度值\r\n    private val = 0;\r\n\r\n\r\n\r\n}","\nimport * as i18n from './LanguageData';\n\nimport { _decorator, Component, Label } from 'cc';\nconst { ccclass, property, executeInEditMode } = _decorator;\n\n@ccclass('LocalizedLabel')\n@executeInEditMode\nexport class LocalizedLabel extends Component {\n    label: Label | null = null;\n\n    @property({ visible: false })\n    key: string = '';\n\n    @property({ displayName: 'Key', visible: true })\n    get _key() {\n        return this.key;\n    }\n    set _key(str: string) {\n        this.updateLabel();\n        this.key = str;\n    }\n\n    onLoad() {\n        if (!i18n.ready) {\n            i18n.init('zh');\n        }\n        this.fetchRender();\n    }\n\n    fetchRender () {\n        let label = this.getComponent('cc.Label') as Label;\n        if (label) {\n            this.label = label;\n            this.updateLabel();\n            return;\n        } \n    }\n\n    updateLabel () {\n        this.label && (this.label.string = i18n.t(this.key));\n    }\n}\n","\nimport * as i18n from './LanguageData';\n\nimport { _decorator, Component, SpriteFrame, Sprite } from 'cc';\nconst { ccclass, property, executeInEditMode } = _decorator;\n\n@ccclass('LocalizedSpriteItem')\nclass LocalizedSpriteItem {\n    @property\n    language: string = 'zh';\n    @property({\n        type: SpriteFrame,\n    })\n    spriteFrame: SpriteFrame | null = null;\n}\n\n@ccclass('LocalizedSprite')\n@executeInEditMode\nexport class LocalizedSprite extends Component {\n    sprite: Sprite | null = null;\n\n    @property({\n        type: LocalizedSpriteItem,\n    })\n    spriteList = [];\n\n    onLoad() {\n        if (!i18n.ready) {\n            i18n.init('zh');\n        }\n        this.fetchRender();\n    }\n\n    fetchRender () {\n        let sprite = this.getComponent('cc.Sprite') as Sprite;\n        if (sprite) {\n            this.sprite = sprite;\n            this.updateSprite();\n            return;\n        } \n    }\n\n    updateSprite () {\n        for (let i = 0; i < this.spriteList.length; i++) {\n            const item = this.spriteList[i];\n            // @ts-ignore\n            if (item.language === i18n._language) {\n                // @ts-ignore\n                this.sprite.spriteFrame = item.spriteFrame;\n                break;\n            }\n        }\n    }\n}\n","\n// 合成定义数据\nexport class MergeDefinition {\n\n    public static ins : MergeDefinition = null ; \n\n    // 增加合成定义\n    public addDefinition( id1 : string , id2 : string , id3 : string , isHybrid = false ) {\n\n        let orig = new MergeDataItem( id1 , id2 , id3 , isHybrid ) ; \n        this.orig.push( orig ) ; \n\n        if( id1 == id2 ) {\n            this.addDefinitionSingle( id1 , id2 , id3 , this.data ) ; \n            return ;\n        }\n\n        // 对于不同的合成 增加2条双向\n        let data = isHybrid == false ? this.data : this.hybrid ; \n        this.addDefinitionSingle( id1 , id2 , id3 , data ) ; \n        this.addDefinitionSingle( id2 , id1 , id3 , data ) ; \n\n    }\n\n    // 增加合成定义 单向\n    private addDefinitionSingle( id1 : string , id2 : string , id3 : string , \n        data : Map< string , Map< string , string > > ) {\n\n        let mapping2 = data.get( id1 ) ;\n        if( mapping2 == null ) {\n            mapping2 = new Map< string , string >() ; \n            data.set( id1 , mapping2 ) ;\n        }\n\n        mapping2.set( id2 , id3 ) ; \n\n    }\n\n    // 取得合成的实体ID\n    public getMergedId( id1 : string , id2 : string ) : string {\n\n        let mapping2 = this.data.get( id1 ) ;\n        if( mapping2 == null ) return null ; \n\n        return mapping2.get( id2 ) ;\n\n    }\n\n    // 取得合成的实体ID 杂交的\n    public getMergedIdhybrid( id1 : string , id2 : string ) {\n\n        // 是否允许合成\n        let ret = this.allowData.get( id1 ) ; \n        if( ret == false ) return null ; \n\n        ret = this.allowData.get( id2 ) ; \n        if( ret == false ) return null ; \n\n        let mapping2 = this.hybrid.get( id1 ) ;\n        if( mapping2 == null ) return null ; \n\n        return mapping2.get( id2 ) ;\n\n    }\n\n    // 原始数据\n    public orig = new Array< MergeDataItem >() ; \n\n    // 合成 普通 双向数据\n    public data = new Map< string , Map< string , string > >() ; \n\n    // 合成 杂交 双向数据，包括 id1 -> id2 , id2 -> id1 \n    public hybrid = new Map< string , Map< string , string > >() ; \n\n    // 是否允许合成。没有记录的，默认是允许。\n    public allowData = new Map< string , boolean >() ;  \n\n}\n\n// 合成的原始数据\nexport class MergeDataItem {\n\n    public id1 : string ; \n\n    public id2 : string ; \n\n    public id3 : string ; \n\n    public isHybrid = false ; \n\n    public constructor( id1 : string = null , id2 : string = null , id3 : string = null , isHybrid = false ) {\n        this.id1 = id1 ; \n        this.id2 = id2 ; \n        this.id3 = id3 ; \n        this.isHybrid = isHybrid ; \n    }\n\n}","import { tween, Vec3 } from \"cc\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { EffectFactory } from \"./EffectFactory\";\n\n\nexport class MergeEffect {\n\n    public static merge( article : BagArticle ) {\n\n        // 效果\n        let effect = EffectFactory.create( \"Merge\" ) ;\n        effect.setParent( article.view.root , false ) ;\n        effect.position = Vec3.ZERO ; \n\n        // 缩放\n        let root = article.view.root ; \n        tween( root )\n            .to( 0.2 , { scale : new Vec3( 1.3 , 1.3 , 1.3 ) } )\n            .to( 0.2 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } )\n            .start() ; \n\n    }\n\n}","import { instantiate, Node, SkeletalAnimation, sp, Vec3 } from \"cc\";\nimport { EffectPfMgr } from \"../../World/1.Base/Support/Misc/EffectPfMgr\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { BagArticleFactory } from \"../Article/BagArticleFactory\";\nimport { BagArticleGridPlace } from \"../Article/BagArticleGridPlace\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { MergeDefinition } from \"./MergeDefinition\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\nimport { MergeGridHybrid } from \"./MergeGridHybrid\";\nimport { MergeEffect } from \"./MergeEffect\";\n\n// 在触摸中的合成操作\nexport class MergeGrid {\n\n    // 格子 尝试合并\n    public static tryMerge( article : BagArticle , cells : Array< UiBagCell > ) : boolean {\n\n        if( MergeGridHybrid.tryMerge( article , cells ) == true ) {\n            return true ;\n        }\n\n        if( this.canMerge( article , cells ) == false ) return false ;\n            \n        this.merge( article , cells[ 0 ].article ) ;\n\n        return true ; \n  \n    }\n\n    /*\n        是否可以合成\n\n        article 拖拽的\n    */ \n    public static canMerge( article : BagArticle , cells : Array< UiBagCell > ) {\n\n        let article2 = cells[ 0 ].article ;\n        if( article2 == null ) return false ;\n\n        if( article == article2 ) return false ; \n\n        // 形状匹配\n        if( article2.cells[ 0 ] != cells[ 0 ] ) return false ;\n\n        console.log( \"合成 全重叠\" ) ;\n\n        // \n\n        let id = MergeDefinition.ins.getMergedId( article.cfg.id , article2.cfg.id ) ;\n        return id != null ? true : false ; \n\n\n    }\n    \n\n    /*\n        article 拖曳的，\n        article2 在网格中的。\n    */ \n    public static merge( article : BagArticle , article2 : BagArticle ) {\n\n        // 删除拖曳的\n        BagArticleGridPlace.unbind( article ) ; \n        UiTray.ins.removeAndArrange( article ) ;\n        article.view.root.destroy() ; \n\n        // 删除目标\n        let cells = article2.cells.slice( 0 , article2.cells.length ) ; \n        BagArticleGridPlace.unbind( article2 ) ; \n        article2.view.root.destroy() ; \n\n        // 生成新的实体\n        let id = MergeDefinition.ins.getMergedId( article.cfg.id , article2.cfg.id ) ;\n        let articleNew = BagArticleFactory.create( id ) ;\n        BagArticleGridPlace.exe( articleNew , cells , false ) ; \n        \n        MergeEffect.merge( articleNew );\n\n\n        // let pf = EffectPfMgr.ins.root.getChildByPath( \"Merge\" ) ;\n        // let node = instantiate( pf ) ;\n        // node.setParent( WorldNode.ins.layer2 , false ) ;\n        // node.worldPosition = articleNew.view.root.worldPosition ; \n        // let sk = node.getComponent( sp.Skeleton ) ;\n        // sk.setCompleteListener( ()=>{\n        //     node.destroy() ; \n        // } ) ;\n\n    }\n\n}\n\n\n\n\n","import { Vec3 } from \"cc\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { BagArticleFactory } from \"../Article/BagArticleFactory\";\nimport { BagArticleGridPlace } from \"../Article/BagArticleGridPlace\";\nimport { BagArticleGridPlaceByPos } from \"../Article/BagArticleGridPlaceByPos\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { MergeDefinition } from \"./MergeDefinition\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { MergeEffect } from \"./MergeEffect\";\n\n// 杂交的合并\nexport class MergeGridHybrid {\n\n    public static tryMerge( article : BagArticle , cells : Array< UiBagCell > ) : boolean {\n\n        let ret = this.canMerge( article , cells ) ; \n        if( ret == null ) return false ; \n\n        this.merge( article , ret[ 1 ] , ret[ 0 ] ) ; \n\n        return true ; \n\n    }\n\n    public static canMerge( article : BagArticle , cells : Array< UiBagCell > ) : [ string , BagArticle ] {\n\n        for( let i = 0 ; i < cells.length ; ++i ) {\n\n            let article2 = cells[ i ].article ;\n            if( article2 == null ) continue ; \n            if( article == article2 ) continue ; \n\n            // 判断是否杂交\n            let id = MergeDefinition.ins.getMergedIdhybrid( article.cfg.id , article2.cfg.id ) ; \n            if( id != null ) {\n\n                return [ id , article2 ] ; \n            }\n\n        } // end for\n\n        return null ; \n\n    }\n\n    public static merge( article : BagArticle , article2 : BagArticle , id : string ) {\n\n        let parent = article2.view.root.parent ; \n\n        // 决定新生成的物品在哪里出现\n        let shapeId = CfgArticleMgr.data.get( id ).bagShapeId ;\n        let pos = shapeId == article.cfg.bagShapeId ? article.view.root.worldPosition : article2.view.root.worldPosition ; \n\n        // 删除拖曳的\n        BagArticleGridPlace.unbind( article ) ; \n        UiTray.ins.removeAndArrange( article ) ;\n        article.view.root.destroy() ; \n\n        // 删除目标\n        BagArticleGridPlace.unbind( article2 ) ; \n        article2.view.root.destroy() ; \n\n        // 生成新的实体\n        let articleNew = BagArticleFactory.create( id ) ;\n        articleNew.view.root.setParent( parent , false ) ;\n        articleNew.view.root.worldPosition = pos ; \n        BagArticleGridPlaceByPos.exe( articleNew ) ; \n        \n        // 效果\n        MergeEffect.merge( articleNew ) ; \n\n    }\n    \n}","import { Tween, tween, Vec3 } from \"cc\";\nimport { GridTraverse } from \"../Grid/GridTraverse\";\nimport { MergeDefinition } from \"./MergeDefinition\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { ArticleHelper } from \"../Grid/BagArticleHelper\";\nimport { UiTray } from \"../Main/UiTray\";\n\n// 合并提示\nexport class MergeHint {\n\n    // 可以合并的\n    public static mergeable( a : BagArticle ) {\n\n        let all = ArticleHelper.getAllAriclesInGrid() ;\n\n        // 托盘的也考虑\n        all.push( ... UiTray.ins.articles ) ; \n\n        let id = a.cfg.id ; \n\n        for( let a2 of all ) {\n\n            if( a == a2 ) continue ; \n\n            let id2 = MergeDefinition.ins.getMergedId( id , a2.cfg.id ) ; \n            if( id2 == null ) continue ; \n\n            // 播放动画\n            this.anim( a2 ) ;\n\n        }\n\n    }\n\n    public static anim( a : BagArticle ) {\n\n        let node = a.view.root ;\n        let t = tween( node ).sequence(\n            tween( node ).to( 0.5 , { scale : new Vec3( 0.9 , 0.9 , 0.9 ) } ) , \n            tween( node ).to( 0.5 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } ) , \n\n        ).repeatForever().start() ;\n        a.view.tweenMergeHint = t ; \n\n    }\n\n    // 恢复\n    public static restore() {\n\n        Tween.stopAllByTag( 10001 ) ; \n\n        // 恢复\n        let all = ArticleHelper.getAllAriclesInGrid() ;\n\n        all.push( ... UiTray.ins.articles ) ; \n\n        for( let a of all ) {\n\n            if( a.view.tweenMergeHint == null ) continue ;\n\n            a.view.tweenMergeHint.stop() ; \n            a.view.tweenMergeHint = null ; \n\n            // 恢复\n            // a.view.root.scale = Vec3.ONE ; \n            tween( a.view.root ).to( 0.1 , { scale : Vec3.ONE } ).start() ; \n\n\n\n        } // end for\n\n    }\n\n}","import { math, Node, UITransform, Vec3 } from \"cc\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { GridTraverse } from \"../Grid/GridTraverse\";\nimport { MergeDefinition } from \"./MergeDefinition\";\nimport { EffectFactory } from \"./EffectFactory\";\n\n\n\n// 杂交提示管理\nexport class MergeHybridHintMgr {\n\n    public static ins : MergeHybridHintMgr = null ; \n\n    // 记录显示过的，不再显示\n    public record = new Set< string >() ;\n\n    public effect = new Array< Node >() ; \n\n    public exe() {\n\n        let all = new Array< BagArticle >() ; \n        // 提示\n        GridTraverse.exe( ( cell )=>{\n\n            let a = cell.article ;\n            if( a == null ) return ; \n\n            if( all.indexOf( a ) == -1 ) {\n                all.push( a ) ; \n            }\n\n        } ) ; \n\n        for( let a of all ) {\n            this.hideShape( a ) ; \n        }\n\n        for( let i = 0 ; i < all.length ; ++i ) {\n            let a = all[ i ] ;\n\n            for( let k = i + 1 ; k < all.length ; ++k ) {\n\n                let b = all[ k ] ;\n                let id = MergeDefinition.ins.getMergedIdhybrid( a.cfg.id , b.cfg.id ) ;\n                if( id == null ) continue ;\n\n                this.showShape( a ) ;\n                this.showShape( b ) ;\n\n                if( this.record.has( id ) == true ) continue ; \n\n                this.record.add( id ) ;\n\n                let effect = MergeHybridHint.show( a , b ) ; \n                this.effect.push( effect ) ;\n\n            } // end for\n        } // end for\n\n    }\n\n    public showShape( a : BagArticle ) {\n\n        if( a.view.effectMergeHintShape == null ) {\n            \n            let id = \"MergeHintShape_\" + a.cfg.bagShapeId ; \n            let effect = EffectFactory.create( id , false ) ;\n            if( effect == null ) return ;\n    \n            effect.setParent( a.view.root , false ) ; \n            effect.position = Vec3.ZERO ; \n            effect.setSiblingIndex( 0 ) ;\n            a.view.effectMergeHintShape = effect ; \n\n        }\n\n        a.view.effectMergeHintShape.active = true ; \n\n    }\n\n    public hideShape( a : BagArticle ) {\n\n        let effect = a.view.effectMergeHintShape ; \n        if( effect == null ) return ; \n        \n        effect.active = false ; \n        // a.view.effectMergeHintShape = null ; \n\n\n    }\n\n    // 清除连线\n    public clearAllLines() {\n\n        for( let node of this.effect ) {\n            node.destroy() ; \n        }\n        this.effect.splice( 0 , this.effect.length ) ; \n\n    }\n\n}\n\n// 杂交提示\nexport class MergeHybridHint {\n\n    public static show( article1 : BagArticle , article2 : BagArticle ) : Node {\n\n        // 组合成一个节点\n        let root = new Node( \"MergeHint1\" ) ; \n        root.addComponent( UITransform );\n        root.setParent( WorldNode.ins.layer2 , false ) ;\n\n        let pos = article1.view.root.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ; \n        WorldNode.ins.layer2.getComponent( UITransform ).convertToNodeSpaceAR( pos , pos ) ; \n        root.position = pos ; \n\n        let effect = EffectFactory.create( \"MergeHint1\" , false ) ; \n        effect.setParent( root , false ) ;\n        effect.position = Vec3.ZERO ; \n        // effect.worldPosition = article1.view.root.worldPosition ; \n\n\n        // 缩放\n        // 动画本身的长度\n        let len = 320 ;\n        let v = article2.view.root.position.clone().subtract( article1.view.root.position ) ;\n        let lenTarget = v.length() ; \n        let f = lenTarget / len ; \n        effect.scale = new Vec3( f , 1 , 1 ) ; \n\n        // 旋转\n        let y = math.toDegree( Math.atan2( v.y , v.x ) ) ;\n        effect.eulerAngles = new Vec3( 0 , 0 , y ) ;\n\n        // 合字\n        let v2 = v.multiplyScalar( 0.5 ) ;\n        // let pos2 = pos.clone().add( v2 ) ;\n        let effect2 = EffectFactory.create( \"MergeHint2\" , false ) ; \n        effect2.setParent( root , false ) ;\n        effect2.position = v2 ; \n\n        return root ; \n        \n    }\n\n}\n","import { Vec3 } from \"cc\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { BagArticleGridPlace } from \"../Article/BagArticleGridPlace\";\nimport { MergeDefinition } from \"./MergeDefinition\";\nimport { BagArticleFactory } from \"../Article/BagArticleFactory\";\nimport { MergeEffect } from \"./MergeEffect\";\n\n\nexport class MergeTray {\n\n    // 尝试合并\n    public static tryMerge( article : BagArticle ) : boolean {\n\n        let article2 = this.getTarget( article ) ; \n        if( article2 == null ) return false ; \n\n        let id = MergeDefinition.ins.getMergedId( article.cfg.id , article2.cfg.id ) ;\n        if( id == null ) {\n            id = MergeDefinition.ins.getMergedIdhybrid( article.cfg.id , article2.cfg.id ) ;\n            if( id == null ) {\n                return false ; \n            }\n            \n        }\n        let articleNew = BagArticleFactory.create( id ) ; \n        articleNew.view.root.setParent( article2.view.root , false );\n        articleNew.view.root.worldPosition = article2.view.root.worldPosition ; \n\n        // 删除\n        BagArticleGridPlace.unbind( article2 ) ; \n        UiTray.ins.remove( article2 ) ;\n        article2.view.root.destroy() ; \n\n        // 删除\n        BagArticleGridPlace.unbind( article ) ; \n        UiTray.ins.remove( article ) ;\n        article.view.root.destroy() ; \n\n        UiTray.ins.insertArticle( articleNew ) ; \n\n        MergeEffect.merge( articleNew ) ;\n        \n        // 放大缩小\n\n        return true ; \n\n    }\n\n    // 取得在合并距离范围内的物体\n    public static getTarget( article : BagArticle ) : BagArticle {\n\n        for( let article2 of UiTray.ins.articles ) {\n\n            if( article == article2 ) continue ; \n\n            let v = article2.view.root.worldPosition.clone().subtract( article.view.root.worldPosition ) ;\n            let len = v.lengthSqr() ; \n            if( len <= 150 * 150 ) {\n\n                return article2 ;\n            }\n        }\n\n        return null ; \n\n    }    \n\n\n}","import { instantiate, Node, randomRangeInt, tween, UITransform, Vec3 } from \"cc\";\nimport { PfMgrMoney } from \"../PfMgr/PfMgrMoney\";\n\n\n// 货币飞的控制\nexport class MoneyFly {\n\n    // 局内货币飞\n    public static money001Fly( parent : Node , pos1 : Vec3 , pos2 : Vec3 , count = 10 , onComplete : ()=>void = null ) {\n\n        this.fly( \"Money001\" , parent , pos1 , pos2 , count , onComplete ) ; \n\n    }\n\n    public static money001Fly2( parent : Node , pos1 : Vec3 , nodeTarget : Node , count = 10 , onComplete : ()=>void = null ) {\n\n        let pos2 = nodeTarget.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n        parent.getComponent( UITransform ).convertToNodeSpaceAR( pos2 , pos2 ) ;\n        this.money001Fly( parent , pos1 , pos2 , count , onComplete ) ;\n\n    }\n\n    public static fly( id : string , parent : Node , pos1 : Vec3 , pos2 : Vec3 , count = 10 , onComplete : ()=>void = null ) {\n\n        let pf = PfMgrMoney.ins.root.getChildByPath( id ) ;\n\n        for( let i = 0 ; i < count ; ++i ) {\n\n            let node = instantiate( pf ) ;\n            node.setParent( parent , false ) ;\n\n            // 随机偏移量出现\n            let offset = new Vec3() ; \n            offset.x = randomRangeInt( -150 , 150 ) ; \n            offset.y = randomRangeInt( -150 , 150 ) ; \n\n            offset.add( pos1 ) ;\n\n            node.position = pos1 ; \n\n            // 运动\n            tween( node ).sequence(\n                tween( node ).to( 0.3 , { position : offset } ) , \n                tween( node ).delay( 0.2 ) , \n                tween( node ).to( 0.8 , { position : pos2 } ) , \n                tween( node ).call( ()=>{\n\n                    node.destroy() ; \n\n                    onComplete?.() ; \n\n                } )\n            ).start() ;\n            \n        } // end for\n\n    }\n\n}","import { Vec3 } from \"cc\";\n\n\n// 移动组件\nexport class MoveCom\n{\n    public enabled : boolean  = true;\n\n    // 锁定计数器。\n    public lockCount : number = 0 ; \n\n    // 移动速率。单位：距离/每帧\n    public speed = 1;\n    \n    // 是否能推\n    // public bool shoveEnable = true;\n\n    // 限制计数。为0时可移动，每帧递减。\n    // 用来攻击时阻塞移动\n    // public int limitCount = 0;\n\n    // 以下临时计算变量\n    // ————————————————————————————————————\n\n    // 移动方向。值归一化\n    public direction = new Vec3() ; \n\n    /*\n        移动偏移量。移动量 / 每帧\n\n        移动系统用这个变量实现移动。\n        避免每帧都计算步长（方向 * 速度），简化移动系统，移动系统只需要做一次加法。\n        \n    */\n    public offset = new Vec3() ; \n\n    // 每帧移动后的位置\n    public positionTest = new Vec3() ;\n\n}","import { Vec3 } from \"cc\";\n\nimport { RoleMoveView } from \"./RoleMoveView\";\nimport { Role } from \"../Base/Role\";\nimport { Player } from \"../../../2.Td/Player/Player\";\n\n    // 移动玩家\n    export class MoveRole\n    {\n        /*\n            尝试移动\n\n            是否执行移动，由多个控制变量共同决定：\n            移动命令，硬直，眩晕，生命状态\n\n        */\n        public static exe( role : Role , v : Vec3 ) : void\n        {\n            var move = role.move;\n\n            this.preCalc(role, v);\n\n            // if ( this.MoveShove.exe(role) == false) return;\n\n            this.translate( role , move.offset , move.speed );\n\n\n        }\n\n        // 预计算\n        public static preCalc( role : Role , v : Vec3 ) : void\n        {\n            // 方向\n            var vNormal = v.clone().normalize() ;\n            role.move.direction = vNormal;\n\n            // 移动步长。移动量/帧 = 归一化的方向 * 速度/帧\n            let step = vNormal.multiplyScalar( role.move.speed ) ;\n            role.move.offset = step ;\n            //role.presentation.root.localPosition += v;\n\n            // 移动后的位置\n            role.move.positionTest = role.view.root.position.clone().add( step ) ;\n\n        }\n\n        // 位移角色。只处理位移的逻辑和表现，不是行走。\n        public static translate( role : Role , step : Vec3 , stepLen : number ) : boolean\n        {\n            // var ret = MoveCalc.exe(role, step, stepLen);\n            // if (ret.ok == false) return false;\n\n            //role.presentation.root.GetComponentInChildren<Rigidbody>().AddForce(role.move.step );\n\n            // 移动成功。\n            // role.transform.position = ret.pos;\n            // 更新包围盒\n            // RectSetter.setCenter(ref role.boundingShape.rect, ret.pos);\n\n            // 移动表现\n            //CtrlMovePresentation.moveTo( role.presentation.node.root.transform , ret.pos , role.presentation.moveTweeners );\n            role.view.root.position = role.move.positionTest ;\n\n            return true;\n\n        }\n\n\n\n    }","import { AudioClip, AudioSource, Node, resources } from \"cc\";\n\n\n/*\n    背景音乐播放控制。\n    从 resources 中读取\n*/ \nexport class Music {\n\n    public set enabled(val: boolean) {\n\n        this.m_enabled = val;\n\n        if (val == false) {\n            this.stop();\n        }\n    }\n\n    public get enabled() : boolean {\n        return this.m_enabled;\n    }\n\n    private m_enabled = true;\n\n    public play(key: string, isLoop: boolean = true): void {\n\n        if( this.enabled == false ) return ;\n\n        /*\n            3.8.1 bug 微信小游戏真机出现。如果 AudioSource 生成后没播放音频就stop，会导致第一次play无法播放。\n            所以 stop 放在前面来。\n        */ \n        this.stop() ; \n\n        if( this.audioSrc == null ) {\n\n            var node = new Node() ; \n            this.audioSrc = node.getComponent( AudioSource ) ;\n            if( this.audioSrc == null ){\n                this.audioSrc = node.addComponent( AudioSource ) ;\n            }\n\n        }\n\n        resources.load( key , AudioClip , (err, audio) =>\n        { \n            this.audioSrc.clip = audio ; \n            this.audioSrc.loop = isLoop ; \n            this.audioSrc.play( ) ; \n\n        } );\n\n    }\n\n    public stop(): void {\n\n        if( this.audioSrc == null ) return ;\n        this.audioSrc.stop() ; \n\n    }\n\n    private audioSrc : AudioSource = null ; \n\n\n\n}","import { Music as MusicBase } from \"../../SL/Cocos/Audio/Ver1/Music\";\n\n// 背景音乐\nexport class Music extends MusicBase {\n\n    public static ins = new Music() ;\n\n    public home(): void {\n        this.play( \"Common/Audio/Bgm/Guitalele's Happy Place\" ) ; \n    }\n\n    public game() : void {\n        this.play( \"Common/Audio/Bgm/game\" ) ; \n    }\n\n}","import { Node, Size, Sprite, UITransform } from \"cc\";\n\n\n/*\n    节点大小适配。\n    用于等比例显示图标\n\n*/ \nexport class NodeSizeFit {\n\n    // Node 大小设置为指定大小的比例。不大于 Node 当前的大小。\n    public static set( node : Node , size : Size ) {\n\n        let f = size.width / size.height ; \n\n        let uiTrans = node.getComponent( UITransform ) ; \n        let size2 = uiTrans.contentSize.clone() ; \n        if( f > 1 ) {\n            size2.height = size2.width / f ; \n        }\n        else if( f < 1 ) {\n            size2.width = size2.height * f ;\n        }\n        uiTrans.setContentSize( size2 ) ;        \n\n    }\n\n    /*\n        Node 要设置大小的节点\n        nodeSize 目标节点的大小\n        sizeOrig 原始尺寸。\n    */ \n    public static set2( node : Node , nodeSize : Size , sizeOrig : Size ) {\n\n        nodeSize = nodeSize.clone() ; \n\n        let f = sizeOrig.width / sizeOrig.height ; \n\n        let uiTrans = node.getComponent( UITransform ) ; \n        if( f > 1 ) {\n            nodeSize.height = nodeSize.width / f ; \n        }\n        else if( f < 1 ) {\n            nodeSize.width = nodeSize.height * f ;\n        }\n        uiTrans.setContentSize( nodeSize ) ;        \n\n    }\n\n    /*\n        先设置 Sprite SizeMode 为 Trimmed，获得剔除透明区域的大小比例。用这个比例设置大小\n        使用场景：希望剔除透明区域后的最大化显示\n    */ \n    public static trimmed( spr : Sprite , size : Size ) {\n\n        spr.trim = true ; \n        spr.sizeMode = Sprite.SizeMode.TRIMMED ; \n        let size2 = spr.node.getComponent( UITransform ).contentSize ; \n        NodeSizeFit.set2( spr.node , size , size2 ) ; \n\n    }\n\n}","\n/*\n    SL Library | Author : Siliphen | Creation Date : 2018.09 | Modification Date : | \n*/\n\nimport { Component, Label } from \"cc\";\n\n// 数字滚动\nexport class NumberRolling {\n\n    public static exe(label: Label, duration: number, num1: number, num2: number ) : void \n    {\n\n        let com: NumberRollingCom = null;\n\n        com = label.getComponent(NumberRollingCom);\n        if (com == null) {\n            com = label.addComponent(NumberRollingCom);\n        }\n\n        com.enabled = true;\n        com.label = label;\n        com.num1 = num1;\n        com.num2 = num2;\n        com.setValue = this.setVal;\n        com.duration = duration;\n\n        com.onComplete = () => {\n            com.enabled = false;\n        };\n        com.init();\n\n    }\n\n    private static setVal( n : Number ) : string \n    {\n        return n.toString() ; \n    }\n\n}\n\n\nclass NumberRollingCom extends Component {\n\n\n    // 要控制的文本\n    public label: Label = null;\n\n    public num1: number = 0;\n\n    public num2: number = 0;\n\n    public duration: number = 0;\n\n    public onComplete: () => void = null;\n\n    public setValue: (val: number) => string = null;\n\n    init(): void {\n\n        this.diff = this.num2 - this.num1;\n        this.timeCount = 0;\n\n        this.update(0);\n\n    }\n\n    update(dt: number): void {\n\n        this.timeCount += dt;\n        let f = this.timeCount / this.duration;\n\n        if (f >= 1) {\n            this.showNumber(this.num2);\n            this.enabled = false;\n            if (this.onComplete != null) this.onComplete();\n            return;\n        }\n\n        let n = this.diff * f;\n        n = this.num1 + n;\n        n = Math.floor(n);\n        // this.label.string = n.toString();\n        this.showNumber(n);\n\n    }\n\n    showNumber(n: number) {\n\n        this.label.string = this.setValue(n);\n\n    }\n\n    private diff = 0;\n    private timeCount = 0;\n\n}","\n\n// 运行环境判断\n// 参考：https://www.jianshu.com/p/8e8bccd1123e\nexport class OsJudge {\n\n    public static isWx() {\n        return (/MicroMessenger/i.test(window.navigator.userAgent) ) ;\n    }\n\n}","import { Vec3 } from \"cc\";\n\n// 路径移动\nexport class PathMove {\n\n    // 路径\n    public path = new Array< Vec3 >() ;\n\n    // 当前目标点索引\n    public idx = 0 ;\n\n    // 经过的路径的长度\n    public lenMoved = 0 ; \n\n}","import { Node } from \"cc\";\r\n\r\nexport class PfLevelThumbnail {\r\n\r\n    public static ins = new PfLevelThumbnail() ; \r\n\r\n    public root : Node ; \r\n\r\n    public init( node : Node ) {\r\n        this.root = node ; \r\n    }\r\n    \r\n}","import { instantiate, Prefab, resources } from \"cc\";\nimport { UiBag } from \"../../Game/Bag/Main/UiBag\";\nimport { UiHpBar } from \"../../Game/Ui/Bar/UiHpBar\";\nimport { UiFeatureSel } from \"../../Game/Ui/Popup/FeatureSel/UiFeatureSel\";\nimport { BulletPfMgr } from \"../../Game/World/1.Base/Bullet/BulletPfMgr\";\nimport { PfMgrRole } from \"../../Game/World/1.Base/Role/Misc/PfMgrRole\";\nimport { EffectPfMgr } from \"../../Game/World/1.Base/Support/Misc/EffectPfMgr\";\nimport { UiBagArticleDetail } from \"../../Home/Ui/Bag/ArticleDetail/UiBagArticleDetail\";\nimport { UiBag as HomeUiBag } from \"../../Home/Ui/Bag/UiBag\";\nimport { UiDialog } from \"../Ui/UiDialog\";\nimport { UiLoadingScene } from \"../Ui/UiLoadingScene\";\nimport { PfMgrBagArticle } from \"./PfMgr\";\nimport { PfMgrIcon } from \"./PfMgrIcon\";\nimport { PfMgrIconBuff } from \"./PfMgrIconBuff\";\nimport { PfMgrMoney } from \"./PfMgrMoney\";\nimport { PfMgrNumber } from \"./PfMgrNumber\";\nimport { UiBubble } from \"../Ui/UiBubble\";\nimport { UiSettings } from \"../Ui/UiSettings\";\nimport { PfLevelThumbnail } from \"../../Home/Ui/Main/Page/Battle/PfLevelThumbnail\";\nimport { UiStaminaBuy } from \"../../Home/Ui/Popup/UiStaminaBuy\";\nimport { UiGet } from \"../../Home/Ui/Popup/UiGet\";\nimport { UiDailyCheckin } from \"../../Home/Ui/Popup/DailyCheckin/UiDailyCheckin\";\nimport { UiHybridGuide } from \"../../Home/Ui/Popup/UiHybridGuide\";\n\n\n// 预制载入\nexport class PfLoad {\n\n    public static onProgress: (val: number) => void;\n\n    public static exe(onComplete: () => void) {\n\n        // 只执行一次\n        if (this.flag == true) {\n            onComplete();\n            return;\n        }\n        this.flag = false;\n\n        let list = [ \n\n            // 公共\n            \"Common/Ui/Money\",\n            \"Common/Ui/LoadingScene\",\n            \"Common/Ui/Dialog\",\n            \"Common/Ui/Icon\", \n            \"Common/Ui/Bubble\",\n            \"Common/Ui/Settings\" , \n\n            // 大厅\n            \"Home/Ui/ArticleDetail\",\n            \"Home/Ui/Bag\",\n            \"Home/Ui/LevelThumbnail\",\n            \"Home/Ui/StaminaBuy\" , \n            \"Home/Ui/Get\" , \n            \"Home/Ui/DailyCheckin\" , \n            \"Home/Ui/HybridGuide\" , \n\n            // 背包\n            \"Bag/Bag\",\n            \"Bag/Article\",\n\n            // 核心玩法\n            \"Game/Role/Role\",\n            \"Game/Ui/Number\",\n            \"Game/Ui/Bar\",\n            \"Game/Bullet/Bullet\",\n            \"Game/Ui/FeatureSel\",\n            \"Game/Ui/Icon\",\n            \"Game/Misc/Effect\",\n\n        ];\n        resources.load(list, Prefab, this._onProgress.bind(this) , (err, data) => {\n\n            for( let i = 0 ; i < data.length ; ++i ) {\n\n                let path = list[ i ] ;\n                let pf = data[ i ] ;\n                this.handlePf( path , pf ) ; \n\n            } // end for\n\n            onComplete?.() ;\n\n        } ) ;\n\n    }\n\n    // 处理预制\n    private static handlePf( path : string , pf : Prefab ) {\n\n        switch( path ) {\n\n            // 公共\n\n            case \"Common/Ui/Money\" : {\n                PfMgrMoney.ins.init(instantiate( pf ) ) ;\n            }\n            break ; \n\n            case \"Common/Ui/LoadingScene\" : {\n                UiLoadingScene.ins.init(instantiate( pf ));\n            }\n            break ; \n\n            case \"Common/Ui/Dialog\" : {\n                UiDialog.pf = pf ;\n            }\n            break ; \n\n            case \"Common/Ui/Icon\" : {\n                PfMgrIcon.ins.init(instantiate( pf ));\n            }\n            break ; \n\n            case \"Common/Ui/Bubble\" : {\n                UiBubble.pf = pf ; \n            }\n            break ; \n\n            case \"Common/Ui/Settings\" : {\n                UiSettings.pf = pf ; \n            }\n            break ; \n            \n            // 大厅\n            \n            case \"Home/Ui/ArticleDetail\" : {\n                UiBagArticleDetail.pf = pf ;\n            }\n            break ; \n\n            case \"Home/Ui/Bag\" : {\n                HomeUiBag.pf = pf ;\n            }\n            break ; \n\n            case \"Home/Ui/LevelThumbnail\" : {\n                PfLevelThumbnail.ins.init( instantiate( pf ) ) ;\n            }\n            break ;\n\n            case \"Home/Ui/StaminaBuy\" : {\n                UiStaminaBuy.pf = pf ; \n            }\n            break ; \n\n            case \"Home/Ui/Get\" : {\n                UiGet.pf = pf ; \n            }\n            break ;\n\n            case \"Home/Ui/DailyCheckin\" : {\n                UiDailyCheckin.pf = pf ; \n            }\n            break ; \n\n            case \"Home/Ui/HybridGuide\" : {\n                UiHybridGuide.pf = pf ; \n            }\n            break ; \n\n            // 背包\n\n            case \"Bag/Bag\" : {\n                UiBag.pf = pf ;\n            }\n            break ;\n\n            case \"Bag/Article\" : {\n                PfMgrBagArticle.bagArticle = instantiate( pf ) ;\n            }\n            break ; \n\n            // 核心玩法\n\n            case \"Game/Role/Role\" : {\n                PfMgrRole.pf = instantiate( pf );\n            }\n            break ; \n\n            case \"Game/Ui/Number\" : {\n                PfMgrNumber.ins.init( instantiate( pf ) );\n            }\n            break ; \n\n            case \"Game/Ui/Bar\" : {\n                UiHpBar.pf = instantiate( pf );\n            }\n            break ; \n\n            case \"Game/Bullet/Bullet\" : {\n                BulletPfMgr.ins.root = instantiate( pf );\n            }\n            break ; \n\n            case \"Game/Ui/FeatureSel\" : {\n                UiFeatureSel.pf = pf ;\n            }\n            break ; \n\n            case \"Game/Ui/Icon\" : {\n                PfMgrIconBuff.ins.root = instantiate( pf );\n            }\n            break ; \n\n            case \"Game/Misc/Effect\" : {\n                EffectPfMgr.ins.root = instantiate( pf );\n            }\n            break ; \n\n\n            case \"\" : {\n                \n            }\n            break ; \n\n        }\n\n    }\n\n    private static _onProgress(finished: number, total: number, item: RequestInit) {\n\n        // 进度百分比计算。参考：https://forum.cocos.org/t/topic/147629\n\n        let val = finished / total;\n        if (val < this.val) return;\n\n        this.val = val;\n        this.onProgress?.(this.val);\n\n    }\n\n    // 进度值\n    private static val = 0;\n\n    // 执行标记\n    public static flag = false;\n\n}","import { Asset, instantiate, Node, resources } from \"cc\";\nimport { UiBag } from \"../../Game/Bag/Main/UiBag\";\nimport { Prefab } from \"cc\";\nimport { PfMgrRole } from \"../../Game/World/1.Base/Role/Misc/PfMgrRole\";\n\n// 预制管理器 背包物件\nexport class PfMgrBagArticle {\n\n    public static bagArticle : Node ; \n\n    public static getPf( id : string ) : Node {\n\n        let strs = id.split( '_' ) ;\n        if( strs.length >= 2 ) {\n\n            let id2 = strs[ 0 ] + \"/\" + id ;\n            let pf = PfMgrBagArticle.bagArticle.getChildByPath( id2 ) ;\n            return pf ; \n\n        }\n\n        // 直接查找\n        let pf = PfMgrBagArticle.bagArticle.getChildByPath( id ) ; \n        return pf ; \n\n    }\n\n}\n\n","import { Node, Sprite } from \"cc\";\n\nexport class PfMgrHeroUp {\n\n    public static ins = new PfMgrHeroUp() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n        this.root = node ; \n    }\n\n    public getSprite(number){\n        return this.root.getChildByPath(number.toString()).getComponent( Sprite ) ; \n    }\n\n}","import { Node, Sprite } from \"cc\";\n\nexport class PfMgrIcon {\n\n    public static ins = new PfMgrIcon() ; \n\n    public root : Node ; \n\n    // 货币 001\n    public money001 : Sprite ; \n\n    // 货币 001\n    public money002 : Sprite ; \n\n    // 体力\n    public stamina : Sprite ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.money001 = this.root.getChildByPath( \"Money/Money001\" ).getComponent( Sprite ) ; \n        this.money002 = this.root.getChildByPath( \"Money/Money002\" ).getComponent( Sprite ) ; \n\n        this.stamina = this.root.getChildByPath( \"Stamina\" ).getComponent( Sprite ) ; \n\n    }\n\n}","import { Node, Sprite, SpriteFrame } from \"cc\";\n\n// Buff 图标\nexport class PfMgrIconBuff {\n\n    public static ins = new PfMgrIconBuff() ; \n\n    public root : Node ; \n\n    public getIconById( id : string ) : Sprite {\n\n        let strs = id.split( \"-\" ) ; \n        if( strs.length >= 2 ) {\n\n            let id2 = strs[ 0 ] + \"/\" + id ; \n            let pfIcon = this.root.getChildByPath( id2 ) ; \n            let spr = pfIcon?.getComponent( Sprite ) ;\n            if( spr != null ) { \n                return spr ; \n            }\n\n        }\n\n        \n\n\n        let spr = this.root.getChildByPath( id )?.getComponent( Sprite ) ; \n        if( spr != null ) {\n            return spr ; \n        }\n\n        spr = this.root.getChildByPath( \"Default\" ).getComponent( Sprite ) ;\n        return spr ; \n\n        return spr ; \n\n    }\n\n}","import { Node, Sprite } from \"cc\";\n\n// 和货币相关的UI\nexport class PfMgrMoney {\n\n    public static ins = new PfMgrMoney() ; \n\n    public root : Node ; \n\n    // 货币 1 局内货币\n    public money001 : Node ; \n    public meat : Sprite ; \n    public heroSpiece1: Sprite;\n\n    // 货币 2 \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.money001 = this.root.getChildByPath( \"Money001\" ) ;\n        this.meat = this.root.getChildByPath( \"Meat\" ).getComponent(Sprite) ;\n        this.heroSpiece1 = this.root.getChildByPath(\"HeroPiece1\").getComponent(Sprite);\n\n    }\n\n    public get_sprite_by_id(id:string) {\n        return this.root.getChildByPath( id ).getComponent(Sprite) ;\n    }\n}","import { Node, Sprite } from \"cc\";\n\nexport class PfMgrMushroom {\n\n    public static ins = new PfMgrMushroom() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n        this.root = node ; \n    }\n\n    public getSprite(number){\n        return this.root.getChildByPath(number.toString()).getComponent( Sprite ) ; \n    }\n\n}","import { Node } from \"cc\";\n\n// 数字预制管理器\nexport class PfMgrNumber {\n\n    public static ins = new PfMgrNumber() ; \n\n    public root : Node ; \n    \n    public damage : Node ;  \n\n    public damageCrit : Node ;  \n    \n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.damage = this.root.getChildByPath( \"Damage\" ) ;\n\n        this.damageCrit = this.root.getChildByPath( \"DamageCrit\" ) ;\n\n    }\n    \n}","import { Node } from \"cc\";\n\nexport class PfMgrRole {\n\n    public static pf : Node ; \n\n}\n\n","import { randomRangeInt, sys } from \"cc\";\nimport { InitWx } from \"./InitWx\";\nimport { InitTt } from \"./InitTt\";\n\n\n\n// 平台初始化\nexport class PlatformInit {\n\n    public static exe() {\n\n        switch( sys.platform ) {\n\n            // 微信小游戏\n            case sys.Platform.WECHAT_GAME : {\n\n                InitWx.exe() ; \n\n                // let appCfg = AppConfig.ins ; \n                // appCfg.addToDesktopEnabled = true ; \n                // appCfg.shareEnabled = true ; \n                // appCfg.vibrateEnabled = true ; \n\n\n            }\n            break ; \n\n            // 抖音小游戏\n            case sys.Platform.BYTEDANCE_MINI_GAME : {\n\n                InitTt.exe() ; \n\n            }\n            break ; \n\n            // 安卓\n            case sys.Platform.ANDROID : {\n\n                // let appCfg = AppConfig.ins ; \n                // appCfg.addToDesktopEnabled = false ; \n                // appCfg.shareEnabled = false ; \n                // appCfg.vibrateEnabled = false ; \n\n            }\n            break ; \n\n        }\n\n        // InitTt.exe() ; \n\n\n    }\n\n\n}","import { Vec2 } from \"cc\";\nimport { BuffCom } from \"../../1.Base/Buff/BuffCom\";\n\n\n// 玩家数据\nexport class Player {\n\n    public static ins : Player = null ; \n\n    public bag = new PlayerBag() ; \n\n    public grade = new PlayerGrade() ; \n\n    public buff = new BuffCom() ; \n    \n    // 局内货币\n    public money001 = 0 ; \n    \n    // 获得格子扩展物的个数\n    public getGridExpandCount = 3 ; \n    \n    // 播放速度\n    public playSpeed = 1 ; \n    \n}\n\n// 背包数据\nexport class PlayerBag {\n\n    // 已经获得的格子\n    public cells = new Array< Vec2 >() ; \n\n}\n\n// 等级\nexport class PlayerGrade {\n\n    // 等级\n    public grade = 1 ;\n\n    // 当前经验值\n    public exp = 0 ; \n\n}","import { AffixType } from \"../../1.Base/Buff/Affix\";\nimport { Role } from \"../../1.Base/Role/Base/Role\";\nimport { RoleMgr } from \"../../1.Base/Role/Base/RoleMgr\";\nimport { RoleAttributeUpdate } from \"../../1.Base/Role/Misc/RoleAttributeUpdate\";\nimport { Player } from \"./Player\";\n\n// 角色 Buff 作用\nexport class PlayerBuffAffect {\n\n    // 影响现在场上的所有角色\n    public static affectAllRoles() {\n\n        for( let role of RoleMgr.ins.allEnemies ) {\n            // this.affectRole( role ) ;\n            RoleAttributeUpdate.exe( role ) ; \n        }\n\n    }\n\n    // 影响 角色\n    public static affectRole( role : Role ) {\n\n        let buffList = Player.ins.buff.list ; \n\n        for( let buff of buffList ) {\n\n            switch( buff.affix.type ) {\n                case AffixType.MoveSpeedDecreasePercent : \n                {\n                    role.buff.add( buff ) ;\n                }\n                break ; \n            }\n\n        } // end for\n\n        RoleAttributeUpdate.exe( role ) ;\n\n    }\n\n\n\n}","import { CfgUpgrade } from \"../../../../Common/Cfg/CfgUpgrade\";\nimport { UiMain } from \"../../../Ui/Main/UiMain\";\nimport { UiPlayerGrade } from \"../../../Ui/Main/UiPlayerGrade\";\nimport { UiFeatureSel } from \"../../../Ui/Popup/FeatureSel/UiFeatureSel\";\nimport { GamePause } from \"../Flow/GamePause\";\nimport { Player } from \"./Player\";\n\n// 玩家等级操作\nexport class PlayerGradeOp {\n\n    // 经验值因子\n    public static expFactor = 1.0 ; \n\n    // 增加经验值\n    public static addExp( val : number ) {\n\n        let g = Player.ins.grade ;\n        g.exp += val * this.expFactor ; \n\n        // 判断是否升级\n        this.upgrade() ; \n\n        // 更新UI\n        UiPlayerGrade.ins.refresh() ; \n\n    }\n\n    // 尝试升级\n    public static upgrade() {\n\n        let g = Player.ins.grade ;\n\n        if( g.grade > CfgUpgrade.data.length ) {\n            // 已经到最高级\n            return ;\n        }\n\n        let expNeeded = CfgUpgrade.data[ g.grade ] ; \n        if( g.exp < expNeeded ) {\n            // 没升级\n            return ;\n\n        }\n\n        \n        g.grade++ ; \n        g.exp = g.exp - expNeeded ; \n\n        let uiFeatureSel = UiFeatureSel.ins ;\n        uiFeatureSel.refresh() ; \n        uiFeatureSel.show() ; \n\n\n\n    }\n\n\n}\n\n\n","import { Vec2 } from \"cc\";\nimport { Player } from \"./Player\";\n\nexport class PlayerInit {\n\n    public static exe() {\n\n        let player = Player.ins = new Player() ; \n        \n        // 初始背包解锁格子\n        let pos = new Vec2( 1 , 2 ) ;\n        for( let y = 0 ; y < 3 ; ++y ) {\n            for( let x = 0 ; x < 3 ; ++x ) {\n                player.bag.cells.push( pos.clone().add2f( x , y ) ) ;\n            }\n        } // end for\n\n        // 测试网格全满\n        // let pos = new Vec2( 0 , 0 ) ;\n        // for( let y = 0 ; y < 7 ; ++y ) {\n        //     for( let x = 0 ; x < 5 ; ++x ) {\n        //         player.bag.cells.push( pos.clone().add2f( x , y ) ) ;\n        //     }\n        // }\n\n        // 金币\n        player.money001 = 15 ; \n\n    }\n\n}","import { UITransform, Vec3 } from \"cc\";\nimport { UiHpBar } from \"../../../Ui/Bar/UiHpBar\";\nimport { Life } from \"../../1.Base/Role/Base/Life\";\nimport { Role, RoleView } from \"../../1.Base/Role/Base/Role\";\nimport { RoleCfgSet, RoleFactory } from \"../../1.Base/Role/Base/RoleFactory\";\nimport { WorldNode } from \"../../1.Base/Support/Misc/WorldNode\";\nimport { RoleMgr } from \"../../1.Base/Role/Base/RoleMgr\";\n\n// 玩家角色\nexport class PlayerRole {\n\n    public static ins = new PlayerRole() ; \n\n    public main : Role ; \n\n}\n\n// 玩家角色 初始化\nexport class PlayerRoleInit {\n\n    public static init() {\n\n        // 定位点\n        let node = WorldNode.ins.root.getChildByPath( \"Cfg/PlayerRole\" ) ; \n\n        let role = RoleFactory.create( \"G1#Player001\" ) ; \n        PlayerRole.ins.main = role ; \n        role.view.root.setParent( WorldNode.ins.layer1 , false ) ;\n        role.view.root.worldPosition = node.worldPosition ; \n\n        // 测试 血量回复\n        // role.life.hp.current = 20 ;\n\n        let rect = role.view.main.getComponent( UITransform ).getBoundingBox() ; \n\n        // 添加血条\n        let hpBar = UiHpBar.create( \"HpBarPlayerRole\" ) ;\n        role.view.hpBar = hpBar ; \n        hpBar.role = role ;\n        hpBar.root.setParent( role.view.root , false );\n        hpBar.root.position = new Vec3( 0 , rect.yMax + 20 ) ;\n        hpBar.refresh() ; \n\n    }\n\n}","import { CfgArticleMgr } from \"../../../../../Common/Cfg/CfgArticle\";\r\nimport { CfgBullet } from \"../../../../../Common/Cfg/CfgBullet\";\r\nimport { CfgRole } from \"../../../../../Common/Cfg/CfgRole\";\r\nimport { TimeScale } from \"../../../../../Common/Misc/TimeScale\";\r\nimport { Player } from \"../../../2.Td/Player/Player\";\r\nimport { BulletMgr } from \"../../Bullet/BulletMgr\";\r\nimport { RoleMgr } from \"../../Role/Base/RoleMgr\";\r\nimport { RoleAttributeUpdate } from \"../../Role/Misc/RoleAttributeUpdate\";\r\nimport { TowerAllUpdate } from \"../../Tower/Misc/TowerAllUpdate\";\r\n\r\n\r\n\r\n\r\n// 游戏速度控制器\r\nexport class PlaySpeedCtrl {\r\n\r\n    /*\r\n        修改配置表就不用对其他系统做修改。\r\n    */\r\n    public static exe() {\r\n\r\n        let speed = Player.ins.playSpeed ; \r\n\r\n        SpeedChangeData.make() ; \r\n\r\n        this.role( speed ) ; \r\n        this.bullet( speed ) ; \r\n        this.tower( speed ) ; \r\n\r\n        TimeScale.set( speed ) ; \r\n\r\n    }\r\n\r\n\r\n    // 作用角色\r\n    private static role( speed : number ) {\r\n\r\n        let sc = SpeedChangeData.ins ; \r\n\r\n        for( let kv of CfgRole.data ) {\r\n            let id = kv[ 0 ] ;\r\n            let cfgItem = kv[1] ;\r\n\r\n            let dataItem = sc.role.get( id ) ;\r\n\r\n            cfgItem.moveSpeed = dataItem.moveSpeed[ speed - 1 ] ; \r\n            cfgItem.attackCd = dataItem.attackCd[ speed - 1 ] ; \r\n\r\n        } // end for\r\n\r\n        for( let role of RoleMgr.ins.allEnemies ) {\r\n\r\n            RoleAttributeUpdate.exe( role ) ; \r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n    // 作用子弹\r\n    private static bullet( speed : number ) {\r\n\r\n        let c = SpeedChangeData.ins.bullet ; \r\n\r\n        for( let kv of CfgBullet.data ) {\r\n            let id = kv[0] ; \r\n            let cfgItem = kv[ 1 ] ;\r\n\r\n            let dataItem = c.get( id ) ;\r\n\r\n            cfgItem.moveSpeed = dataItem.moveSpeed[ speed - 1 ] ; \r\n\r\n        } // end for\r\n\r\n        for( let bullet of BulletMgr.ins.data ) {\r\n\r\n            let dataItem = c.get( bullet.id ) ;\r\n\r\n            bullet.move.speed = dataItem.moveSpeed[ speed - 1 ] ; \r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n    private static tower( speed : number ) {\r\n\r\n        let c = SpeedChangeData.ins.tower ; \r\n\r\n        for( let kv of CfgArticleMgr.data ) {\r\n\r\n            let id = kv[0] ; \r\n            let cfgItem = kv[ 1 ] ;\r\n\r\n            let dataItem = c.get( id ) ;\r\n\r\n            cfgItem.tower.atkCd = dataItem.attackCd[ speed - 1 ] ; \r\n\r\n        } // end for\r\n\r\n        TowerAllUpdate.updateAll() ; \r\n\r\n    }\r\n\r\n}\r\n\r\n// 速度拷贝\r\nclass SpeedChangeData {\r\n\r\n    public static ins : SpeedChangeData = null ; \r\n\r\n    public static make() {\r\n\r\n        if( this.ins != null ) return ; \r\n\r\n        this.ins = new SpeedChangeData() ; \r\n\r\n        // 角色\r\n        for( let kv of CfgRole.data ) {\r\n            let id = kv[0] ; \r\n            let cfgItem = kv[1] ;\r\n\r\n            let item = new SpeedData() ; \r\n            this.ins.role.set( id , item ) ; \r\n            for( let i = 1 ; i <= 3 ; ++i ) {\r\n\r\n                // 移速\r\n                item.moveSpeed.push( cfgItem.moveSpeed * i ) ; \r\n\r\n                // 攻速\r\n                let val = Math.round( cfgItem.attackCd / ( 1 + i - 1 ) ) ; \r\n                item.attackCd.push( val ) ; \r\n\r\n            } // end for\r\n            \r\n\r\n        } // end for\r\n\r\n        // 子弹\r\n        for( let kv of CfgBullet.data ) {\r\n            let id = kv[0] ; \r\n            let cfgItem = kv[ 1 ] ;\r\n\r\n            let item = new SpeedData() ; \r\n            this.ins.bullet.set( id , item ) ; \r\n            for( let i = 1 ; i <= 3 ; ++i ) {\r\n\r\n                // 移速\r\n                item.moveSpeed.push( cfgItem.moveSpeed * i ) ; \r\n\r\n            } // end for\r\n\r\n        } // end for\r\n\r\n        // 装备\r\n        for( let kv of CfgArticleMgr.data ) {\r\n\r\n            let id = kv[0] ; \r\n            let cfgItem = kv[ 1 ] ;\r\n\r\n            cfgItem.tower.atkCd ;\r\n\r\n            let item = new SpeedData() ; \r\n            this.ins.tower.set( id , item ) ; \r\n            for( let i = 1 ; i <= 3 ; ++i ) {\r\n\r\n                // 攻速\r\n                let val = Math.round( cfgItem.tower.atkCd / ( 1 + i - 1 ) ) ; \r\n                item.attackCd.push( val ) ; \r\n\r\n            } // end for\r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n    public role = new Map< string , SpeedData >() ; \r\n\r\n    public bullet = new Map< string ,  SpeedData >() ; \r\n\r\n    public tower = new Map< string , SpeedData >() ; \r\n\r\n}\r\n\r\nclass SpeedData {\r\n\r\n    public moveSpeed = new Array< number >() ; \r\n\r\n    public attackCd = new Array< number >() ; \r\n\r\n}","\n/*\n    SL Library | Author : Siliphen | Creation Date : 2018.09 | Modification Date : | \n*/\n\nexport class Random\n{\n    // min inclusive , max inclusive\n    public static rangeInt(min : number , max : number ) : number\n    {\n        return Math.floor(Math.random() * ( max + 1 - min  ) ) + min ;\n\n    }\n\n}","import { Input, instantiate, Node, tween, Vec3 } from \"cc\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { AccountPersist } from \"../../../Common/Account/AccountPersist\";\nimport { UiBag } from \"./UiBag\";\n\n// 上阵替换模式进入\nexport class ReplaceModeEnter {\n\n    // 进入替换模式\n    public static enter( idUnlocked : string ) {\n\n        // 切换模式\n        UiBag.ins.sv.active = false ; \n        UiBag.ins.replace.root.active = true ; \n\n        // 设置替换UI的显示\n        let uiItem = UiBag.ins.unlocked.items.find( ( e )=>{ return e.articleId == idUnlocked ; } ) ; \n        let node = instantiate( uiItem.root ) ; \n        node.setParent( UiBag.ins.replace.root , false ) ;\n        UiBag.ins.replace.item.active = false ; \n        node.position = UiBag.ins.replace.item.position ; \n\n        // 上阵条目处理 \n        let items = UiBag.ins.deploy.items ; \n        for( let i = 0 ; i < items.length ; ++i ) {\n            let uiItem = items[ i ] ;\n            let root = uiItem.root ;\n            this.deployItemAnim( root ) ;\n\n             let idDeploy = uiItem.articleId ; \n\n             uiItem.root.off( Input.EventType.TOUCH_END ) ; \n             uiItem.root.on( Input.EventType.TOUCH_END , ()=>{\n                this.swap( idUnlocked , idDeploy ) ; \n             } ) ;\n\n        } // end for\n\n    }\n\n    private static deployItemAnim( root : Node ) {\n\n        // 缩放动画\n        // z 不能为0，否者 点击事件不响应\n        let val1 = 1.1 ;\n        let val2 = 0.9 ; \n        tween( root ).sequence( \n            tween( root ).to( 0.8 , { scale : new Vec3( val1 , val1 , val1 ) } ) , \n            tween( root ).to( 0.8 , { scale : new Vec3( val2 , val2 , val2 ) } ) , \n         ).repeatForever().start() ;\n\n    }\n\n    // 交换\n    private static swap(  idUnlocked : string , idDeploy : string ) {\n\n        // 上阵的\n        let idx = Account.ins.bag.deploy.indexOf( idDeploy ) ; \n        Account.ins.bag.deploy[ idx ] = idUnlocked ; \n\n        // 解锁的。交换位置。为了在显示上替换原来的未知\n        let unlocked = Account.ins.bag.unlocked ;\n        let idx1 = unlocked.indexOf( idUnlocked ) ;\n        let idx2 = unlocked.indexOf( idDeploy ) ;\n        let t = unlocked[ idx1 ] ;\n        unlocked[ idx1 ] = unlocked[ idx2 ] ; \n        unlocked[ idx2 ] = t ; \n\n        AccountPersist.save() ; \n\n        // 恢复\n        UiBag.ins.sv.active = true ; \n        UiBag.ins.replace.root.active = false ; \n\n        // 刷新\n        UiBag.ins.deploy.refresh() ; \n        UiBag.ins.unlocked.refresh() ; \n\n    }\n\n}","\nimport { CfgLoad } from \"../../Common/Cfg/CfgLoad\";\nimport { PfLoad } from \"../../Common/PfMgr/PfLoad\";\n\n// 资源载入器。预制、配置表 \nexport class ResLoad {\n\n    public static onProgress: (val: number) => void;\n\n    public static exe(onComplete: () => void) {\n\n        let cfgLoader = new CfgLoad() ; \n        cfgLoader.exe(() => {\n            PfLoad.onProgress = this.onProgress;\n            PfLoad.exe(() => {\n                onComplete();\n            }); \n        });\n\n    }\n\n}","import { Collider2D, Node, Skeleton, sp, Vec3 } from \"cc\";\nimport { Life } from \"./Life\";\nimport { SkillCom } from \"../../Skill/SkillCom\";\nimport { UiHpBar } from \"../../../../Ui/Bar/UiHpBar\";\nimport { MoveCom } from \"../Move/MoveCom\";\nimport { AiCom } from \"../../Ai/AiCom\";\nimport { BuffCom } from \"../../Buff/BuffCom\";\nimport { CfgRoleItem } from \"../../../../../Common/Cfg/CfgRole\";\nimport { AttackCom } from \"../../Tower/Entity/AttackCom\";\n\n\nexport class Role {\n\n    public id : string ; \n\n    // 角色配置\n    public cfg : CfgRoleItem ; \n\n    public attack : AttackCom = null ; \n\n    public move : MoveCom = null ; \n\n    public life : Life = null;\n\n    public view : RoleView = null ;\n\n    public skill : SkillCom = null ; \n\n    public exp : Exp = null ; \n\n    public ai : AiCom = null ; \n\n    public buff : BuffCom = null ; \n\n    \n}\n\n\n\n// 角色视图\nexport class RoleView {\n\n    public root : Node ; \n\n    public main : Node ; \n    \n    // 骨骼动画\n    public skeleton : sp.Skeleton = null ; \n\n    // 血条\n    public hpBar : UiHpBar = null ; \n    \n    // 碰撞器\n    public collider : Collider2D = null ; \n\n}\n\n// 击杀获得的经验值\nexport class Exp {\n\n    public val = 0 ; \n\n}","import { sp } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\n\n// spine动画控制\nexport class RoleAnimSpine {\n\n    // 待机\n    public static playIdle( sk : sp.Skeleton ) {\n        this.play( sk , \"idle\" ) ; \n    }\n\n    // 移动\n    public static playMove( sk : sp.Skeleton ) {\n        this.play( sk , \"move\" ) ; \n    }\n\n    public static playAttack( sk : sp.Skeleton ) {\n\n        if( sk == null ) return ; \n\n        let name = \"attack\" ; \n        if( sk.getCurrent( 0 ).animation.name == name ) return ; \n        let te = sk.setAnimation( 0 , name , false ) ;\n        // te.timeScale = 0.5 ;\n        sk.addAnimation( 0 , \"idle\" , true ) ; \n\n        // sk.skeletonData.\n\n    }\n\n    public static play( sk : sp.Skeleton , name : string ) {\n\n        if( sk == null ) return ; \n\n        let te = sk.getCurrent( 0 ) ; \n        if( te == null ) {\n            // 当前没有动画在播放\n            sk.setAnimation( 0 , name , true ) ;    \n            return ; \n        }\n\n        if( te.animation.name == name ) return ; \n        sk.setAnimation( 0 , name , true ) ;\n\n    }\n\n}\n\n// 角色动画 攻击 时间缩放 更新\nexport class RoleAnimSpineAttackTimeScaleUpdate {\n\n    public static update( role : Role ) {\n\n        let duration = FrameSecConvert.toSecond( role.attack.cd.max ) ; \n       \n        let sk = role.view.skeleton ; \n        let anim = sk.getState().data.skeletonData.findAnimation( \"attack\" ) ; \n        let timeScale = anim.duration / duration ;\n\n        // 攻击缩放速度\n\n    }\n\n}","import { Vec3 } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { BulletFactory } from \"../../Bullet/BulletFactory\";\nimport { WorldNode } from \"../../Support/Misc/WorldNode\";\nimport { RoleAnimSpine } from \"./RoleAnimSpine\";\nimport { RoleGetDamage } from \"./RoleGetDamage\";\n\nexport class RoleAttack {\n\n    // \n    public static exe( role : Role , dir : Vec3 ) {\n\n        if( this.canAttack( role ) == false ) return ;\n\n        // dir.normalize() ; \n\n        // let pos = this.getBulletEmitPos( role , dir ) ; \n\n        // let bullet = BulletFactory.create( \"004_1\" ) ;\n        // bullet.view.root.setParent( WorldNode.ins.layer2 , false ) ;\n        // bullet.view.root.position = pos ;\n\n        role.attack.cd.setCurrentAsMax() ; \n\n        RoleAnimSpine.playAttack( role.view.skeleton ) ;\n\n        // 简单处理 直接扣血\n        this.targetGetDamage( role ) ;\n        \n\n    }\n\n    public static canAttack( role : Role ) : boolean {\n\n        let atk = role.attack ; \n\n        if( atk.lockCount > 0 ) return false ; \n\n        // 是否允许攻击\n        if( role.attack.cd.current > 0 ) return false ; \n\n        return true ; \n\n    }\n\n    // 取得子弹发射位置。dir 已经归一化\n    public static getBulletEmitPos( role : Role , dir : Vec3 ) : Vec3 {\n\n        // 方向偏移量\n        let len = 100 ; \n        let offset = dir.clone().multiply3f( len , len , 1 ) ; \n        // 加上角色发射点的高度\n        offset.y += 100 ;\n\n        offset.add( role.view.root.position ) ; \n\n        return offset ;\n\n    }\n\n     // 简单处理 直接扣血\n    public static targetGetDamage( role : Role ) {\n\n        let target = role.ai.target ; \n        if( target == null ) return ; \n\n        RoleGetDamage.exe( target , role.attack.damage );\n\n        // if( target )\n\n    }\n\n\n}","import { CfgRole } from \"../../../../../Common/Cfg/CfgRole\";\nimport { Player } from \"../../../2.Td/Player/Player\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { BuffIncreaseCalc, DataIncrease } from \"../../Buff/BuffIncreaseCalc\";\nimport { Role } from \"../Base/Role\";\n\n// 角色属性计算\nexport class RoleAttributeUpdate {\n\n    public static dataIncr = new DataIncrease() ; \n\n    public static exe( role : Role ) {\n\n        this.buff( role ) ;\n        \n    }\n\n    public static buff( role : Role ) {\n\n        /*\n            Player buff 怎么参与计算？有2种做法：\n                Player Buff 也添加到 Role 中，由 Role 的系统去处理。\n                Player Buff 单独计算。\n\n            如果放到 Role 中，可能容易出Bug。所有 Role 处理都是同一个 Buff 对象。\n            Player Buff 的生命周期应该在 Player 中处理，通常是用久生命周期。\n        \n        */\n\n        this.setRoleAsOrig( role ) ; \n\n        this.dataIncr.reset() ; \n\n        // 处理全局 Buff\n        BuffIncreaseCalc.exeBuffs( Player.ins.buff.list , this.dataIncr ) ;\n\n        // 处理 role 上的Buff\n        BuffIncreaseCalc.exeBuffs( role.buff.list , this.dataIncr ) ;\n\n        this.handleIncr( role , this.dataIncr ) ; \n\n        // // 处理全局 Buff\n        // this.buffList( role , Player.ins.buff.list ) ; \n\n        // // 处理 role 上的Buff\n        // this.buffList( role , role.buff.list ) ; \n\n    }\n\n    // 设置为原始值\n    public static setRoleAsOrig( role : Role ) {\n\n        let cfg = CfgRole.data.get( role.id ) ;\n\n        // 移速\n        role.move.speed = cfg.moveSpeed ; \n\n        // 攻速\n        role.attack.cd.max = cfg.attackCd ; \n\n    }\n\n    // 处理增量\n    public static handleIncr( role : Role , dataIncr : DataIncrease ) {\n\n        if( dataIncr.moveSpeedIncreasePercent != 0 ) {\n            role.move.speed += role.move.speed * dataIncr.moveSpeedIncreasePercent ; \n        }\n\n        let val = dataIncr.attackSpeedIncreasePercent ; \n        if( val != 0 ) {\n            let atk = role.attack ;\n            let max = atk.cd.max ; \n            if( val > 0 ) {\n                // 增加攻速\n                atk.cd.max = Math.round( max / ( 1 + val ) ) ; \n            }\n            else {\n                // 降低攻速\n                atk.cd.max += Math.round( max * Math.abs( val ) ) ; \n            }\n\n        }\n        \n\n    }\n\n    public static buffList( role : Role , list : Array< Buff > ) {\n        \n        let cfg = CfgRole.data.get( role.id ) ;\n\n        let moveSpeedOrig = cfg.moveSpeed ; \n\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let buff = list[ i ] ; \n\n            switch( buff.affix.type ) {\n                case AffixType.MoveSpeedDecreasePercent : \n                {\n                    role.move.speed += moveSpeedOrig * buff.affix.argN ; \n                }\n                break ; \n\n            }\n            \n\n        } // end for\n\n    }\n\n}\n\n","import { EffectFactory } from \"../../../../Bag/Merge/EffectFactory\";\nimport { PlayerGradeOp } from \"../../../2.Td/Player/PlayerGradeOp\";\nimport { BulletMgr } from \"../../Bullet/BulletMgr\";\nimport { WorldNode } from \"../../Support/Misc/WorldNode\";\nimport { Role } from \"../Base/Role\";\nimport { RoleMgr } from \"../Base/RoleMgr\";\n\n\nexport class RoleDie {\n\n    public static exe( role : Role ) {\n\n        // 播放特效\n        let effect = EffectFactory.create( \"RoleDie\" ) ; \n        effect.setParent( WorldNode.ins.layer2 , false ) ; \n        effect.worldPosition = role.view.root.worldPosition ; \n\n        RoleMgr.ins.remove( role ) ; \n\n        role.view.root.destroy() ; \n\n        PlayerGradeOp.addExp( role.exp.val ) ;\n\n        this.bullet( role ) ; \n\n\n    }\n\n    // 销毁锁定这个目标的子弹\n    public static bullet( role : Role ) {\n\n        for( let i = BulletMgr.ins.data.length - 1 ; i >= 0 ; --i ) {\n\n            let bullet = BulletMgr.ins.data[ i ] ;\n            if( bullet.target.targetRole == role ) {\n\n                bullet.target.targetRole = null ; \n                // BulletMgr.ins.remove( bullet ) ;\n                // bullet.view.root.destroy() ; \n\n            }\n\n        } // end for\n\n    }\n\n}","import { BoxCollider2D, Collider2D, Contact2DType, instantiate, Node, Skeleton, sp } from \"cc\";\nimport { PfMgrRole } from \"../Misc/PfMgrRole\";\nimport { Exp, Role, RoleView } from \"./Role\";\nimport { Life } from \"./Life\";\nimport { CfgRole, CfgRoleItem } from \"../../../../../Common/Cfg/CfgRole\";\nimport { SkillCom } from \"../../Skill/SkillCom\";\nimport { MoveCom } from \"../Move/MoveCom\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\nimport { BuffCom } from \"../../Buff/BuffCom\";\nimport { AttackCom } from \"../../Tower/Entity/AttackCom\";\nimport { RoleAnimSpine } from \"../Misc/RoleAnimSpine\";\n\n\nexport class RoleFactory {\n\n    public static create( id : string ) : Role {\n\n        let role = new Role() ;\n\n        role.id = id ;\n\n        RoleCfgSet.exe( role ) ;\n\n        RoleViewSet.exe( role ) ;\n\n        return role ; \n\n    }\n\n\n}\n\n\n// 角色配置设置\nexport class RoleCfgSet {\n\n    public static exe( role : Role ) {\n\n        let cfg = CfgRole.data.get( role.id ) ; \n\n        role.cfg = cfg ; \n\n        this.attack( role , cfg ) ; \n        this.life( role , cfg ) ; \n        this.move( role , cfg ) ;\n        this.skill( role , cfg ) ;\n        this.exp( role , cfg ) ;\n\n        role.buff = new BuffCom() ; \n\n    }\n\n    private static attack( role : Role , cfg : CfgRoleItem ) {\n\n        role.attack = new AttackCom() ;\n\n        role.attack.damage = cfg.attackDamage ; \n\n        role.attack.cd.current = 0 ; \n        role.attack.cd.max = cfg.attackCd ;\n\n    }\n\n    private static exp( role : Role , cfg : CfgRoleItem ) {\n\n        role.exp = new Exp() ; \n        role.exp.val = cfg.exp ;\n\n    }\n\n    private static life( role : Role , cfg : CfgRoleItem ) {\n\n        role.life = new Life() ; \n        role.life.hp.setCurrentAndMax( cfg.lifeHpMax ) ; \n\n    }\n\n    private static move( role : Role , cfg : CfgRoleItem ) {\n\n        role.move = new MoveCom() ; \n        role.move.speed = cfg.moveSpeed ; \n\n    }\n\n    private static skill( role : Role , cfg : CfgRoleItem ) {\n\n        role.skill = new SkillCom() ; \n\n    }\n    \n}\n\n\n// 角色视图设置\nexport class RoleViewSet {\n\n    public static exe( role : Role ) {\n\n\n        let root = this.createView( role.cfg ) ; \n        role.view = new RoleView() ; \n        role.view.root = root ; \n        role.view.main = root.getChildByPath( \"Main\" );\n\n        // 动画\n        role.view.skeleton = role.view.main.getComponent( sp.Skeleton ) ; \n\n        this.collsion( role ) ;  \n       \n    }\n\n    // 创建视图\n    public static createView( cfg : CfgRoleItem ) : Node {\n\n        let path : string = null ;         \n\n        if( cfg.viewId == null ) {\n            \n            let id = cfg.id ;\n            let strs = id.split( \"#\" ) ; \n            path = strs[ 0 ] + \"/\" + strs[ 1 ] ;\n\n        }\n        else {\n            path = cfg.viewId ; \n        }\n\n        let pf = PfMgrRole.pf.getChildByPath( path ) ;\n\n        let root = instantiate( pf ) ;\n        return root ; \n\n\n    }\n\n    // 碰撞器绑定\n    public static collsion( role : Role ) {\n\n        let root = role.view.root ; \n\n        let collider = root.getComponentInChildren(Collider2D);\n        if( collider == null ) return ;\n\n        role.view.collider = collider ; \n        collider[ \"Role\" ] = role ; \n        // collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this)\n        // CollisionHandler\n\n    }\n\n    static onBeginContact(BEGIN_CONTACT: string, onBeginContact: any, arg2: typeof RoleViewSet) {\n        console.log( \"碰撞\" ) ;\n    }\n\n\n\n}","import { color, Color, instantiate, Label, Node, randomRangeInt, Tween, tween, Vec3 } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { PfMgrNumber } from \"../../../../../Common/PfMgr/PfMgrNumber\";\nimport { WorldNode } from \"../../Support/Misc/WorldNode\";\nimport { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { Buff_HpRegenIncreasePercentBelowPercentPerWave } from \"../../Buff/Specific/Buff_HpRegenIncreasePercentBelowPercentPerWave\";\nimport { Sender } from \"../../Bullet/Bullet\";\nimport { Stats } from \"../../Support/Misc/Stats\";\n\n// 角色受到伤害\nexport class RoleGetDamage {\n\n    public static exe( role : Role , damage : number , showDamageValue = true , sender : Sender = null ) {\n\n        // 扣减数值\n        role.life.hp.current -= damage ; \n\n        role.view.hpBar?.refresh() ;\n\n        if( showDamageValue ) {\n            DamageValueShow.normal( role.view.root.worldPosition.clone().add3f( 0 , 50 , 0 ) , damage ) ;\n        }\n\n        this.view( role ) ;\n\n        RoleGetDamageLocal.exe( role ) ; \n\n        // 统计\n        if( sender != null ) {\n            Stats.ins.damage( sender.id , damage ) ; \n        }\n\n    }\n\n    // 受伤的表现\n    public static view( role : Role ) {\n\n        if( role.view.skeleton == null ) return ;\n\n        Tween.stopAllByTarget( role.view.skeleton ) ; \n        role.view.skeleton.color = Color.RED ; \n        tween(role.view.skeleton).delay( 0.1 ).call( ()=>{ \n            role.view.skeleton.color = Color.WHITE ; \n        } ).start() ;\n\n    }\n\n}\n\nexport class RoleGetDamageLocal {\n\n    public static exe( role : Role ) {\n\n        if( role != PlayerRole.ins.main ) return ; \n\n        Buff_HpRegenIncreasePercentBelowPercentPerWave.tryExe( role ) ; \n\n    }\n\n}\n\n\n// 伤害值显示\nexport class DamageValueShow {\n\n    public static crit( pos : Vec3 , n : number ) {\n\n        //\n        this.show( PfMgrNumber.ins.damageCrit , pos , n ) ;\n\n    }\n\n    // 普通\n    public static normal( pos : Vec3 , n : number ) {\n\n        this.show( PfMgrNumber.ins.damage , pos , n ) ;\n\n    }\n\n    // 随机位置\n    private static rndPos( pos : Vec3 ) {\n\n        pos.x += randomRangeInt( -50 , 50 ) ; \n        pos.y += randomRangeInt( -20 , 20 ) ; \n\n    }\n\n    public static show( pf : Node , pos : Vec3 , n : number ) {\n\n        let node = instantiate( pf );\n\n        let txt = node.getComponent( Label );\n        if( txt == null ) {\n            txt = node.getComponentInChildren( Label );\n        }\n        txt.string = \"-\" + n.toString() ;\n\n        var parent = WorldNode.ins.layer2 ; \n        node.setParent(parent , false ) ;\n        node.worldPosition = pos ; \n\n        // 运动到的终点位置\n        let pos2 = new Vec3( 0 , 200 ) ; \n        this.rndPos( pos2 ) ;\n\n        node.scale = new Vec3( 0.5 , 0.5 , 0.5 ) ; \n        // 向上移动\n        tween( node ).sequence(\n\n            tween( node ).parallel(\n                tween( node ).by( 0.3 , { position : pos2 } ) , \n                tween( node ).to( 0.3 , { scale : new Vec3( 1 , 1 , 1 ) } )\n            ) , \n            tween( node ).delay( 0.2 ) , \n            tween( node ).parallel(\n                tween( node ).by( 0.3 , { position : new Vec3( 0 , 50 ) } ) , \n                tween( node ).to( 0.3 , { scale : new Vec3( 0.5 , 0.5 , 0.5 ) } )\n            ) , \n            tween( node ).call( ()=>{\n                node.destroy() ; \n            } )\n\n        ).start() ;         \n\n    }\n\n}","import { Role } from \"./Role\";\n\n// 角色管理器\nexport class RoleMgr\n{\n    public static ins : RoleMgr = null ;\n\n    public local : Role = null;\n\n    // 所有的敌人\n    public allEnemies = new Array<Role>();\n\n    public add( role : Role ) : void \n    {\n        if ( this.allEnemies.indexOf(role) != -1 ) return;\n        this.allEnemies.push(role);\n\n    }\n\n    public remove( role : Role ) {\n\n        let idx = this.allEnemies.indexOf(role) ;\n        if( idx == -1 ) return ; \n\n        this.allEnemies.splice( idx , 1 ) ; \n\n    }\n\n}","import { Vec3 } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { RoleAnimSpine } from \"./RoleAnimSpine\";\nimport { RoleMoveView } from \"../Move/RoleMoveView\";\nimport { MoveRole } from \"../Move/MoveRole\";\n\n\nexport class RoleMove\n{\n    public static exe( role : Role , v : Vec3 ) : boolean \n    {\n        if ( this.canMove(role) == false) return false ;\n\n        // 原地表现：旋转，行走动画\n        RoleMoveView.exe(role , v );\n\n        MoveRole.exe( role , v );\n\n        // 移动轨迹\n        //role.view.effectMoveTrack?.Play();\n        // var moveTack = role.view.effectMoveTrack;\n        // if ( moveTack != null && moveTack.isStopped == true )\n        // {\n        //     moveTack.Play();\n        // }\n\n        return true ; \n\n    }\n\n    public static stop( role : Role ) : void \n    {\n        if ( this.canMove(role) == false) return;\n        RoleAnimSpine.playIdle(role.view.skeleton);\n        // RoleAnimSa.playIdle( role.view.sa );\n\n        // 停止移动轨迹\n        // role.view.effectMoveTrack?.Stop();\n\n    }\n\n    // 更新限制计数器\n    // public static void updateLimit( Role role , int n )\n    // {\n    //     if ( n < role.move.limitCount ) return;\n    //     role.move.limitCount = n;\n    // }\n\n    public static canMove( role : Role ) : boolean\n    {\n        if (role.life.isDead == true) return false;\n\n        let move = role.move ; \n        if ( move == null || move.enabled == false ) return false ;\n\n        if( move.lockCount > 0 ) return false ;\n\n\n        // 是否硬直\n        // if (role.stiffness.current > 0) return false;\n\n        // 移动限制\n        // if (role.move.limitCount > 0) return false;\n\n        // 是否眩晕\n        //if (role.logicData.stun.cd.current >= 0) return false;\n\n        // 是否攻击CD中。提前可以行动，实现 hit & run。\n        //var atk = role.attack;\n        //if (atk != null )\n        //{\n        //    // Hit & Run\n        //    //if (atk.cd.current > atk.act) return false;\n\n        //    if(atk.cd.current > 0)\n        //    {\n        //        return false;\n        //    }\n\n        //}\n\n        // 是否在移动阻塞中\n        //if (role.logicData.move.blockCount > 0) return false;\n\n        // 技能执行中\n        //if ( role.logicData.skillExecute.count.current >= 0 ) return false;\n\n        return true;\n\n    }\n\n}","import { isValid, Vec3 } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\n\n/*\n    用于击退等位移控制\n\n*/ \nexport class RoleMoveSys {\n\n    public static ins = new RoleMoveSys() ; \n\n    public add( role : Role , second : number , len : number , dir : Vec3 , onComplete : ()=>void = null ) {\n\n        let item = new RoleMoveSysItem() ; \n        this.items.push( item ) ; \n\n        item.role = role ; \n        item.frame = FrameSecConvert.toFrame( second ) ; \n        item.offset = dir.clone().multiplyScalar( len / item.frame ) ;  \n        item.onComplete = onComplete ; \n\n    }\n\n    public clear() {\n        this.items.splice( 0 , this.items.length ) ; \n    }\n\n    public update() {\n\n        for( let i = this.items.length - 1 ; i >= 0 ; --i ) {\n\n            let item = this.items[ i ] ; \n\n            item.frame-- ; \n            if( item.frame < 0 || isValid( item.role.view.root ) == false ){\n                item.onComplete?.() ; \n                this.items.splice( i , 1 ) ; \n                continue ; \n            }\n\n            // 移动\n            let pos = item.role.view.root.position.clone() ;\n            pos.add( item.offset ) ;\n            item.role.view.root.position = pos ; \n\n        } // end for\n\n    }\n\n    public items = new Array< RoleMoveSysItem >() ; \n\n}\n\nexport class RoleMoveSysItem {\n\n    public role : Role ; \n\n    // 帧数\n    public frame = 0 ; \n\n    // 每帧的偏移量\n    public offset : Vec3 ; \n\n    public onComplete : ()=>void = null ; \n\n}","import { Vec3 } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { RoleAnimSpine } from \"../Misc/RoleAnimSpine\";\n\n// import { RoleAnimSpine } from \"../Role/Misc/RoleAnimSpine\";\n\n    // 移动表现处理\n    export class RoleMoveView\n    {\n        public static exe( role : Role , v : Vec3 ) : void\n        {\n            this.orien( role , v );\n            RoleAnimSpine.playMove(role.view.skeleton);\n            // RoleAnimSa.playWalk( role.view.sa );\n        }\n\n        // 朝向\n        public static orien( role : Role , v : Vec3 ) : void\n        {\n            if( v.x == 0 )\n            {\n                // 垂直向上，保持原先的朝向。\n                return;\n            }\n\n            var main = role.view.main;\n            var s = main.getScale() ;\n            let sign = v.x < 0 ? -1 : 1;\n            s.x = Math.abs( s.x ) * sign;\n            main.setScale( s ) ;\n\n        }\n\n        // // 角色旋转\n        // public static void rotate(Role role, Vector3 dir)\n        // {\n        //     var degree = Math.Atan2(dir.x, dir.z) * 180 / Math.PI;\n        //     var eulerAngles = new Vector3(0, (float)degree, 0);\n            \n        //     role.view.main.localEulerAngles = eulerAngles;\n\n        // }\n\n\n    }","\nimport { GameLose } from \"../../../2.Td/Flow/GameLose\";\nimport { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { BuffOp } from \"../../Buff/BuffOp\";\nimport { SkillType } from \"../../Skill/SkillBase\";\nimport { SkillCloseDamage, SkillCloseDamageOp } from \"../../Skill/SkillCloseDamage/SkillCloseDamage\";\nimport { Stats } from \"../../Support/Misc/Stats\";\nimport { Role } from \"../Base/Role\";\nimport { RoleMgr } from \"../Base/RoleMgr\";\nimport { RoleDie } from \"./RoleDie\";\nimport { RoleGetDamage } from \"./RoleGetDamage\";\n\nexport class RoleSys {\n\n    public static update() {\n\n        let all = RoleMgr.ins.allEnemies ; \n        for( let i = all.length - 1 ; i >= 0 ; --i ) {\n\n            let role = all[ i ] ;\n\n            if( role.life.hp.current <= 0 ) {\n                RoleDie.exe( role ) ;\n                continue ; \n            }\n\n            let atkCd = role.attack.cd ;\n            if( atkCd.current > 0 ) { atkCd.current-- ; } \n\n            this.skill( role ) ;\n\n            RoleBuffSys.update( role ) ; \n\n        } // end for\n\n\n        // 判断玩家角色是否死亡\n        if( PlayerRole.ins.main.life.hp.current <= 0 ) {\n            GameLose.exe() ; \n        }\n\n    }\n\n    public static skill( role : Role ) {\n\n        let skillCom = role.skill ;\n        if( skillCom == null ) return ; \n\n        for( let skill of skillCom.list ) {\n\n            if( skill.cd.current > 0 ) {\n                skill.cd.current-- ; \n            }\n            if( skill.cd.current != 0 ) continue ;\n\n            switch( skill.type ) {\n                case SkillType.CloseDamage : {\n\n                    let closeDamage = skill as SkillCloseDamage ;\n\n                    // 伤害\n                    SkillCloseDamageOp.exe( closeDamage ) ;\n\n\n                }\n                break ;\n\n            }\n\n        }\n\n    }\n\n}\n\nexport class RoleBuffSys {\n\n    public static update( role : Role ) {\n\n        let list = role.buff.list ; \n        for( let i = list.length - 1 ; i >= 0 ; --i ) {\n\n            let buff = list[ i ] ;\n\n            buff.duration.current-- ; \n            if( buff.duration.current < 0 ) {\n                // 生命周期到，移除\n                BuffOp.roleRemove( role , i ) ; \n                continue ; \n            }\n\n            if( buff.interval.max >= 0 ) {\n                buff.interval.current-- ; \n                if( buff.interval.current == -1 ) {\n\n                    buff.interval.setCurrentAsMax() ; \n\n                    // 触发\n                    this.trigger( role , buff ) ; \n\n                }\n            }\n\n        } // end for\n\n    }\n\n    public static trigger( role : Role , buff : Buff ) {\n\n        switch( buff.affix.type ) {\n\n            case AffixType.Burn : {\n                RoleGetDamage.exe( role , buff.affix.argN ) ;\n                Stats.ins.damage( buff.sender.id , buff.affix.argN ) ; \n            }\n            break ; \n\n            case AffixType.Poisoning :\n            case AffixType.PoisoningPercent :\n            {\n                RoleGetDamage.exe( role , buff.affix.argN ) ;\n                Stats.ins.damage( buff.sender.id , buff.affix.argN ) ; \n            }\n            break ; \n\n        }\n\n    }\n\n\n\n\n\n}","import { ResolutionPolicy, game, screen, view } from \"cc\";\n\n\n// 屏幕适配 分辨率策略\nexport class ScreenAdaptResolutionPolicy {\n\n    /*\n        ratio 宽高比\n\n        当前屏幕是：\n            长屏幕时，固定宽，延伸高。\n            非长屏幕，iPad，固定高，延伸宽。\n\n        适用范围：\n            竖屏游戏，横屏游戏\n\n    */ \n    public static exeRatio( ratio : number = 720 / 1280 ) {\n\n        // view.getVisibleSize\n        \n        let size = screen.resolution ;\n        let ratio2 = size.width / size.height ;\n        if( ratio >= ratio2 ) {\n            // 长屏幕\n            view.setResolutionPolicy( ResolutionPolicy.FIXED_WIDTH ) ;\n            // console.log( \"固定宽\" ) ;\n        }\n        else {\n            view.setResolutionPolicy( ResolutionPolicy.FIXED_HEIGHT ) ;\n            // console.log( \"固定高\" ) ;\n        }\n        \n        // console.log( \"screen.resolution：\" + screen.resolution.width + \",\" + screen.resolution.height ) ;\n        // console.log( \"screen.windowSize：\" + screen.windowSize.width + \",\" + screen.windowSize.height ) ;\n\n    }\n\n    public static exeDesignResolution() {\n\n        let size = view.getDesignResolutionSize() ;\n        this.exeRatio( size.width / size.height ) ;\n    }\n\n}","import { Node, Tween, tween, Vec3 } from \"cc\";\n\n// 顺序缩放显示\nexport class SeqScaleShow {\n\n    public static exe( nodes : Array< Node > , interval : number = 0.1 ) : Tween< Node > {\n\n        this.stop( nodes ) ;\n\n        let t = tween( nodes[ 0 ] ) ;\n        for( let i = 0 ; i < nodes.length ; ++i ) {\n\n            let node = nodes[ i ] ;\n\n            // 全部设置为0缩放\n            node.scale = Vec3.ZERO ; \n\n            t.call( ()=>{\n                this.scale( node ) ;\n            } );\n            t.delay( interval ) ;\n\n        } // end for\n\n        t.start() ;\n\n        return t ; \n\n    }\n\n    public static scale( node : Node ) {\n\n        node.active = true ; \n\n        node.scale = new Vec3( 0.2 , 0.2 , 0.2 ) ;\n        tween( node ).sequence(\n            tween( node ).to( 0.2 , { scale : new Vec3( 1.2 , 1.2 , 1.2 ) } ) , \n            tween( node ).to( 0.1 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } ) , \n        ).start() ;\n\n    }\n\n    private static stop( nodes : Array< Node > ) {\n\n        for( let node of nodes ) {\n            Tween.stopAllByTarget( node ) ; \n        } // end for\n\n    }\n\n}","import { Node, Tween, Vec2, Vec3, tween } from \"cc\";\n\n// 抖动\nexport class Shake\n{\n    public static exePreset( node : Node , id : string , scalePos : number = 1 ){\n\n        let item = this.genData(id) ;\n\n        // 修改坐标\n        for( let t of item ) {\n            let pos = t[ 0 ] ;\n            pos.multiply3f( scalePos , scalePos , scalePos ) ;\n            pos.add( node.position ) ;\n        }\n\n        this.exe( node , item ) ;\n\n    }\n\n    public static exe( node : Node , data : Array< [ Vec3 , number ] > )\n    {\n        let seq = tween( node ) ;\n        for( let i = 0 ; i < data.length ; ++i ){\n            let item = data[ i ]\n            let pos = item[ 0 ] ;\n            let duration = item[ 1 ] ;\n            let t = tween( node ).to( duration , { position : pos} ) ;\n            seq.then( t ) ;\n        }\n        seq.start() ;\n\n    }\n\n    // 生成预设抖动移动数据\n    public static genData( id : string ) : Array< [ Vec3 , number ] > {\n\n        let list : Array< [ Vec3 , number ] > = null ;\n\n        if( id == \"1\" ) {\n            list = new Array< [ Vec3 , number ] >() ;\n            list.push( [ new Vec3( 10,-10 ) , 0.1 ] ) ;\n            list.push( [ new Vec3( 0 , 0  ) , 0.05 ] ) ;\n        }\n        else if( id == \"2\" ) {\n            list = new Array< [ Vec3 , number ] >() ;\n            list.push( [ new Vec3( 6,10 ) , 0.1 ] ) ;\n            list.push( [ new Vec3( 10,-7 ) , 0.1 ] ) ;\n            list.push( [ new Vec3( -5,-4 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( 5,5 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( 0 , 0 ) , 0.05 ] ) ;\n        }\n        else if( id == \"3\" ) {\n            list = new Array< [ Vec3 , number ] >() ;\n            list.push( [ new Vec3( 10,1 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( -9,-7 ) , 0.1 ] ) ;\n            list.push( [ new Vec3( 13,5 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( 2,-7 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( 9,-1 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( 5,1) , 0.05 ] ) ;\n            list.push( [ new Vec3( 0 , 0 ) , 0.05 ] ) ;\n        }\n\n        return list ;\n\n    }\n\n}","\n// 随机打乱\nexport class Shuffle {\n\n    // 随机打乱数组\n    public static shuffleArray<T>( list : Array< T > ) {\n\n        for( let i = 0 ; i < list.length ; ++i ) {\n            let idx = this.rangeInt( 0 , list.length - 1 )  ;\n            let t = list[ i ] ;\n            list[ i ] = list[ idx ] ;\n            list[ idx ] = t ;\n\n        } // end for\n\n    }\n\n    // min inclusive , max inclusive\n    public static rangeInt(min : number , max : number ) : number\n    {\n        return Math.floor(Math.random() * ( max + 1 - min  ) ) + min ;\n\n    }\n\n}","import { CurrentMax } from \"../Support/SimpleStruct/CurrentMax\";\n\n\nexport class SkillBase {\n\n    public type = SkillType.None ; \n\n    // 间隔\n    public cd = new CurrentMax() ; \n    \n}\n\nexport enum SkillType {\n\n    None , \n\n    // 靠近伤害目标\n    CloseDamage, \n    Fist, \n\n}","\nimport { Role } from \"../../Role/Base/Role\";\nimport { RoleGetDamage } from \"../../Role/Misc/RoleGetDamage\";\nimport { SkillBase, SkillType } from \"../SkillBase\";\n\n// 靠近就造成伤害\nexport class SkillCloseDamage extends SkillBase {\n\n    public constructor() {\n        \n        super();\n\n        this.type =  SkillType.CloseDamage;\n        this.cd.setCurrentAndMax( 60 ) ;\n\n    }\n\n    // 伤害值\n    public damageVal = 1 ;\n\n    // 作用的角色\n    public targets = new Array< Role >() ; \n\n}\n\n// \nexport class SkillCloseDamageOp {\n\n    // 加入标记伤害\n    public static tryAdd( role1 : Role , role2 : Role ) {\n\n        let skillbase = role1.skill?.list.find( ( e )=>{ return e.type == SkillType.CloseDamage } ) ;\n        if( skillbase == null ) return ;\n        let skill = skillbase as SkillCloseDamage ; \n\n        if( skill.targets.indexOf( role2 ) != -1 ) return ;\n\n        skill.targets.push( role2 ) ;\n\n    }\n\n    // 移除标记伤害\n    public static tryRemove( role1 : Role , role2 : Role ) {\n\n        let skillbase = role1.skill?.list.find( ( e )=>{ return e.type == SkillType.CloseDamage } ) ;\n        if( skillbase == null ) return ;\n        let skill = skillbase as SkillCloseDamage ; \n\n        let idx = skill.targets.indexOf( role2 ) ;\n        if( idx == -1 ) return ; \n        skill.targets.splice( idx , 1 ) ;\n\n    }\n\n    // 执行伤害\n    public static exe( skill : SkillCloseDamage ) {\n\n        if( skill.targets.length == 0 ) return ; \n\n        for( let roleTarget of skill.targets ) {\n\n            console.log( \"造成伤害\" ) ;\n            RoleGetDamage.exe( roleTarget , skill.damageVal ) ;\n\n        }\n\n        // 造成伤害后才重新开始CD\n        skill.cd.setCurrentAsMax() ; \n\n    }\n\n}","import { SkillBase } from \"./SkillBase\";\n\nexport class SkillCom {\n\n    public list = new Array< SkillBase >() ;\n\n}\n\n","import { AudioClip, AudioSource, Node, Tween, instantiate, resources, sys, tween } from \"cc\";\n\nimport { UiMain } from \"../../Game/Ui/Main/UiMain\";\nimport { Sound as SoundBase  } from \"../../SL/Cocos/Audio/Ver1/Sound\";\n\n\n\n// 音效播放\nexport class Sound extends SoundBase {\n\n    public static ins = new Sound() ;\n\n    // 是否开启\n    public enabled = true ; \n\n    // 按钮点击音效\n    public btnClick() {\n        this.play( \"Common/Audio/Sound/btnClick\" ) ;\n    }\n \n    // 获得物品\n    public getReward() {\n        this.play( \"Common/Audio/Sound/获得奖励\" ) ;\n    }\n\n}\n\n","import { AudioClip, AudioSource, Node, resources, sys, tween } from \"cc\";\n\n/*\n    音效播放控制\n    从 resources 中读取\n\n    如果不用对象池，在微信小游戏 微信开发者工具，会出现 warning：Too many (200) InnerAudioContext\n*/ \nexport class Sound {\n\n    public enabled = true ; \n    \n    public constructor() {\n\n        let node = new Node ;\n        this.audioSrc = node.addComponent( AudioSource ) ;\n\n    }\n\n    public play( key : string , volume : number = 1.0) {\n\n        if( this.enabled == false ) return ;\n\n        resources.load( key , AudioClip , (err, audio) =>\n        { \n            this.audioSrc.playOneShot( audio , volume ) ; \n        } );\n\n    }\n\n    public audioSrc : AudioSource = null ; \n\n}\n\n","import { Input } from \"cc\";\nimport { Button } from \"cc\";\nimport { Node } from \"cc\";\nimport { Sound } from \"./Sound\";\n\n// 音效按钮单击设置器 \nexport class SoundBtnClickSetter {\n\n    public static exe( root : Node ) {\n\n        let btns = root.getComponentsInChildren( Button ) ;\n        // let t = root.getComponent( Button ) ; \n        // if( t != null ) { btns.push( t ) ; }\n        for( let btn of btns ) {\n\n            // 避免重复添加\n            btn.node.off( Input.EventType.TOUCH_END , this.play , this ) ; \n            btn.node.on( Input.EventType.TOUCH_END , this.play , this ) ; \n\n            // btn.node.off( Input.EventType.TOUCH_END , Sound.ins.btnClick , Sound.ins ) ; \n            // btn.node.on( Input.EventType.TOUCH_END , Sound.ins.btnClick , Sound.ins ) ; \n\n        } // end for\n\n        // this.remove( root ) ; \n\n    }\n\n    public static remove( root : Node ) {\n\n        let btns = root.getComponentsInChildren( Button ) ;\n        // let t = root.getComponent( Button ) ; \n        // if( t != null ) { btns.push( t ) ; }\n        for( let btn of btns ) {\n            btn.node.off( Input.EventType.TOUCH_END , this.play , this ) ; \n\n            // btn.node.off( Input.EventType.TOUCH_END , Sound.ins.btnClick , Sound.ins ) ; \n\n        } // end for\n\n    }\n\n    public static play() {\n\n        Sound.ins.btnClick() ; \n        \n    }\n\n}","import { sys } from \"cc\";\r\nimport { Account } from \"../Account/Account\";\r\nimport { AccountPersist } from \"../Account/AccountPersist\";\r\n\r\n// 体力恢复器\r\nexport class StaminaRecovery\r\n{\r\n    public static ins = new StaminaRecovery();\r\n\r\n\r\n    /*\r\n        恢复一个的周期。单位秒\r\n        1800，30分钟。\r\n    */\r\n    public cycle = 20 * 60 ; \r\n\r\n\r\n    // 记录的时间点\r\n    public time = -1 ;\r\n\r\n    // 状态。\r\n    public state = 0;\r\n\r\n    // 倒计时：秒\r\n    public countdown = 0;\r\n\r\n\r\n    public exe() : void\r\n    {\r\n        //Debug.Log( \"状态：\" + state );\r\n\r\n        let stamina = Account.ins.stamina ; \r\n\r\n        switch( this.state )\r\n        {\r\n            case 0:\r\n            {\r\n                // 检查是否要开始恢复\r\n                if ( stamina.current >= stamina.max )\r\n                {\r\n                    // 满\r\n                    return;\r\n                }\r\n\r\n                // 记录当前时间点\r\n                this.time = Math.floor( Date.now() / 1000 ) ;\r\n                this.state = 1;\r\n\r\n                StaminaRecoveryPersist.save();\r\n\r\n            }\r\n            break;\r\n\r\n            case 1:\r\n            {\r\n                // 恢复\r\n\r\n                var now = Math.floor( Date.now() / 1000 ) ;\r\n                var diff = now - this.time;\r\n                var diffSce = diff ;\r\n\r\n                this.countdown = this.cycle - diffSce;\r\n                if ( this.countdown < 0 ) this.countdown = 0; \r\n\r\n                if ( diffSce < this.cycle )\r\n                {\r\n                    //Debug.Log( \"体力恢复倒计时：\" + this.cooldown );\r\n                    return;\r\n                }\r\n\r\n                // 恢复一个\r\n                var n = Math.floor( diffSce / this.cycle ) ;\r\n                stamina.current += n;\r\n                // 限制不超过最大值\r\n                if ( stamina.current > stamina.max ) stamina.current = stamina.max;\r\n                AccountPersist.save();\r\n\r\n                if ( stamina.current >= stamina.max )\r\n                {   // 全部恢复完成\r\n                    this.state = 0 ; \r\n                }\r\n                else\r\n                {   // 未恢复完\r\n                    this.time = now ;\r\n                }\r\n\r\n                StaminaRecoveryPersist.save();\r\n\r\n            }\r\n            break;\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n// 体力恢复器持久化\r\nexport class StaminaRecoveryPersist\r\n{\r\n    public static load() : void \r\n    {\r\n        let recovery = StaminaRecovery.ins ; \r\n\r\n        let str = sys.localStorage.getItem( \"StaminaRecovery\" ) ; \r\n        if( str == null || str == \"\" ) return ;\r\n        let json = JSON.parse( str ) ;\r\n        let str2 = json[ \"State\" ] ;\r\n        recovery.state = Number( str2 ) ; \r\n        str2 = json[ \"Time\" ] ;\r\n        recovery.time = Number( str2 ) ; \r\n\r\n    }\r\n\r\n    public static save() : void\r\n    {\r\n        let recovery = StaminaRecovery.ins;\r\n\r\n        let json = {} ;\r\n        json[ \"State\" ] = recovery.state ; \r\n        json[ \"Time\" ] = recovery.time ; \r\n        let str = JSON.stringify( json ) ;\r\n        sys.localStorage.setItem( \"StaminaRecovery\" , str ) ; \r\n\r\n    }\r\n\r\n}","\n// 统计\nexport class Stats {\n\n    public static ins : Stats = null ; \n\n    // 数据。key 实体ID，造成的伤害总数\n    public data = new Map< string , StatsItem >() ;\n\n    // 统计伤害\n    public damage( id : string , d : number ) {\n\n        // 转换到1级的实体统计\n        let strs = id.split( \"_\" ) ; \n        if( strs.length >= 2 ) {\n            id = strs[ 0 ] + \"_1\" ; \n        }\n\n        let item = this.data.get( id ) ; \n        if( item == null ) {\n            item = new StatsItem() ; \n            item.id = id ; \n            Stats.ins.data.set( id , item ) ; \n        }\n        item.damage += d ; \n\n    }\n\n    // 取得排序后\n    public sort() : Array< StatsItem > {\n\n        this.list.splice( 0 , this.list.length ) ; \n\n        for( let kv of this.data ) {\n            let item = kv[1] ;\n            this.list.push( item ) ; \n        } // end for\n\n        this.list.sort( ( a , b )=>{\n            if( a.damage < b.damage ) return 1 ;\n            else if( a.damage > b.damage ) return -1 ; \n            return 0 ; \n        } ) ;\n\n        return this.list ;\n\n    }\n\n    private list = new Array< StatsItem >() ;\n\n}\n\nexport class StatsItem {\n\n    public id : string ; \n\n    public damage = 0 ; \n\n}","\n\nexport class StringUtil {\n\n    // 数字字符串填充前导0\n    public static fillZero(num : number , length : number ) {\n        return (Array(length).join('0') + num).slice(-length);\n    } \n     \n}","import { Director, director, find, tween, UITransform, Vec3 } from \"cc\";\nimport { UiBag } from \"../Bag/Main/UiBag\";\nimport { UiTray } from \"../Bag/Main/UiTray\";\nimport { MoneyFly } from \"../../Common/Misc/MoneyFly\";\nimport { UiMain } from \"../Ui/Main/UiMain\";\nimport { UiMoney001 } from \"../Ui/Main/UiMoney001\";\nimport { DataIncrease } from \"../World/1.Base/Buff/BuffIncreaseCalc\";\nimport { BuffString } from \"../World/1.Base/Buff/BuffString\";\nimport { ItemDraw } from \"../../Common/Item/ItemDraw\";\nimport { UiBubble } from \"../../Common/Ui/UiBubble\";\n\nexport class Test {\n\n    public static exe() {\n\n        // this.test1() ; \n        // this.testBag() ; \n\n        // this.test2() ; \n        // this.test4() ; \n\n    }\n\n    static test4() {\n\n        let ui = UiBubble.create() ; \n        let parent = UiMain.ins.root ; \n        ui.root.setParent( parent , false ) ; \n        ui.root.position = Vec3.ZERO ; \n        ui.setString( \"test测试测测\\nsfsdf\\n测试\" ) ;\n\n    }\n\n    static test3() {\n\n\n        BuffString.getDescription( \"005-AttackBulletBounceBetweenEnemiesIncrease1\" ) ; \n\n        let di = new DataIncrease() ; \n        di.attackCritMultipleIncreasePercent = 10 ;\n        di.reset() ;\n        di.hpMaxIncrease = 20 ; \n        di.reset() ; \n\n        let ret = ItemDraw.exe( \"MainLevel_001\" ) ; \n\n\n    }\n\n    static test2() {\n\n        // 时间倍数运行\n        let oldTick = director.tick;\n        director.tick = (dt: number) => {\n            oldTick.call(director, dt * 3) ; \n        }\n        \n    }\n\n    public static test1() {\n\n        let pos2 = UiMoney001.ins.root.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n        UiMain.ins.root.getComponent( UITransform ).convertToNodeSpaceAR( pos2 , pos2 ) ;\n        MoneyFly.money001Fly( UiMain.ins.root , Vec3.ZERO , pos2 ) ; \n\n \n    }\n\n    public static testBag() {\n\n        UiBag.create( find( \"Canvas\" ) ) ; \n\n        UiTray.ins.addArticleById( \"001\" ) ;\n        UiTray.ins.addArticleById( \"001\" ) ;\n        // UiTray.ins.addArticleById( \"002\" ) ;\n        // UiTray.ins.addArticleById( \"003\" ) ;\n\n        UiTray.ins.addArticleById( \"001\" ) ;\n        UiTray.ins.addArticleById( \"BagExpand_002\" ) ;\n\n        // tween( this )\n        // .delay( 0.5 )\n        // .call( ()=>{\n        //     UiBagGrid.ins.showExpandable() ; \n        // } )\n        // .delay( 0.8 )\n        // .call( ()=>{\n        //     UiBagGrid.ins.showNormal() ; \n        // } )\n        // .start() ;\n\n    }\n\n}","import { Node } from \"cc\";\n\nexport class Test1 {\n\n    public static ins = new Test1() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n    }\n\n}","import { JsonAsset } from \"cc\";\r\nimport { assetManager } from \"cc\";\r\n\r\nexport class Test {\r\n\r\n    public static exe() {\r\n\r\n        // this.exe1() ; \r\n\r\n    }\r\n\r\n    public static exe1() {\r\n\r\n        let url = \"https://bagtd.oss-cn-beijing.aliyuncs.com/test001/Article.json\" ; \r\n        let url2 = \"http://192.168.22.225/Cfg/Article.json\" ;\r\n\r\n\r\n        // assetManager 要设置跨域。不能访问 hfs 服务器。\r\n        assetManager.loadRemote( url2 , ( err , data : JsonAsset )=>{\r\n\r\n            console.log( data.json ) ; \r\n\r\n        } ) ;\r\n\r\n        // fetch 不能访问 hfs 服务器。\r\n        fetch( url2 ).then((response: Response) => {\r\n            return response.text()\r\n        }).then((value) => {\r\n            console.log(value);\r\n        })\r\n\r\n    }\r\n\r\n}","import { Node } from \"cc\";\n\nexport class Test2 {\n\n    public static ins = new Test2() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n    }\n\n}","import { Size, Sprite, UITransform } from \"cc\";\n\n// 按照纹理原始比例设置 Sprite 大小\nexport class TextureOriginalRatioSprite {\n\n    public static exe( spr : Sprite , sizeSpr : Size = null ) {\n\n        let trans = spr.getComponent( UITransform ) ;\n\n        if( sizeSpr == null ) {\n            sizeSpr = trans.contentSize.clone() ;\n        }\n        else{\n            sizeSpr = sizeSpr.clone() ;\n        }\n\n        let sizeOrig = spr.spriteFrame.originalSize ;\n\n        let f = sizeOrig.width / sizeOrig.height ; \n        if( sizeOrig.width > sizeOrig.height ) {\n            // 改变高度\n            sizeSpr.height = sizeSpr.width / f ;\n        }\n        else if( sizeOrig.height > sizeOrig.width ) {\n            sizeSpr.width = sizeSpr.height * f ;\n        }\n        trans.setContentSize( sizeSpr ) ;\n\n    }\n\n}","import { Vec2 } from \"cc\";\n\n// 瓦片形状数据解析器\nexport class TileShapeDataParser {\n\n    // 从下开始解析。[ 0 ] 元素是原点\n    public static exe( str : string ) : Array< Vec2 > {\n\n        let coords = new Array< Vec2 >() ;\n        let lines = str.split( \"\\n\" ) ;\n        for( let y = lines.length - 1 ; y >= 0 ; --y ) {\n            let line = lines[ y ] ;\n            for( let x = 0 ; x < line.length ; ++x ) {\n                if( line.charAt( x ) == \"0\" ) continue ;\n                let coord = new Vec2( x , lines.length - y - 1 ) ;\n                coords.push( coord ) ;\n            }\n            \n        } // end for\n\n        return coords ;\n\n    }\n\n}","import { director } from \"cc\";\r\n\r\n\r\n// cocos 时间缩放\r\nexport class TimeScale {\r\n\r\n    // 原始的\r\n    private static tickOrig = director.tick ; \r\n\r\n    // cocos \r\n    public static set( speed : number ) {\r\n\r\n        if( this.tickOrig == null ) {\r\n            this.tickOrig = director.tick;\r\n        } \r\n        \r\n        if( speed == 1 ) {\r\n            director.tick = this.tickOrig ; \r\n            return ; \r\n        }\r\n\r\n        // 时间倍数运行\r\n        director.tick = (dt: number) => {\r\n            this.tickOrig.call(director, dt * speed ) ; \r\n        }\r\n\r\n    }\r\n\r\n}","import { Node } from \"cc\";\nimport { CurrentMax } from \"../../Support/SimpleStruct/CurrentMax\";\nimport { AttackCom } from \"./AttackCom\";\nimport { BagArticle } from \"../../../../Bag/Article/BagArticle\";\nimport { BuffCom } from \"../../Buff/BuffCom\";\nimport { AuraCom } from \"../../Buff/AuraCom\";\n\n// 塔\nexport class Tower {\n\n    // 绑定的背包物品\n    public article : BagArticle = null ; \n\n    // 攻击\n    public attack : AttackCom = null ; \n\n    public view = new TowerView() ; \n\n    public buff : BuffCom = null ; \n    \n    public aura : AuraCom = null ; \n    \n    public hpMaxIncrease : HpMaxIncrease = null ; \n\n    public hpRegen : HpRegen = null ; \n\n}\n\nexport class TowerView {\n\n    public root : Node ; \n\n}\n\n// 增加宿主血量\nexport class HpMaxIncrease {\n \n    public val : number = 0 ; \n}\n\n// 血量恢复\nexport class HpRegen {\n\n    public cd = new CurrentMax() ;\n\n    // 恢复百分比\n    public percent : number = 0 ; \n\n}","import { Player } from \"../../../2.Td/Player/Player\";\nimport { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { TowerMgr } from \"../Entity/TowerMgr\";\nimport { TowerAttributeUpdate } from \"./TowerAttributeUpdate\";\nimport { TowerAuraHandler as TowerAuraEmit } from \"./TowerAuraEmit\";\nimport { DataIncrease } from \"../../Buff/BuffIncreaseCalc\";\nimport { TowerCfgSet } from \"../Entity/TowerFactory\";\nimport { BuffFactory } from \"../../Buff/BuffFactory\";\nimport { BuffResetMergeGrade } from \"../../Buff/BuffResetMergeGrade\";\n\n// 塔整体计算\nexport class TowerAllUpdate {\n\n    public static updateAll() {\n\n        // PlayerRoleAttribute.ins.reset() ; \n\n        // buff 还原到初始状态\n        this.resetBuff() ; \n\n        // 等级 Buff 添加\n        // for( let i = 0 ; i < TowerMgr.ins.data.length ; ++i ) {\n        //     let tower = TowerMgr.ins.data[ i ] ;\n        //     this.grade( tower ) ; \n        // }\n\n        // 特性 Buff 添加\n        this.playerBuff() ; \n        \n        // 光环 Buff 添加\n        TowerAuraEmit.aura() ; \n\n        // 计算\n        let dataIncr = new DataIncrease() ; \n        for( let i = 0 ; i < TowerMgr.ins.data.length ; ++i ) {\n            let tower = TowerMgr.ins.data[ i ] ;\n            TowerAttributeUpdate.exe( tower ) ;\n            let dataIncr2 = TowerAttributeUpdate.dataIncrease ; \n\n            // \n            dataIncr.hpMaxIncrease += dataIncr2.hpMaxIncrease + dataIncr2.hpMaxIncrease * dataIncr2.hpMaxIncreaseIncreasePercent ; \n\n        }\n\n        \n\n        this.role( dataIncr ) ;\n\n\n    }\n\n    // 特性 Buff 添加\n    private static playerBuff() {\n\n        for( let i = 0 ; i < TowerMgr.ins.data.length ; ++i ) {\n            let tower = TowerMgr.ins.data[ i ] ;\n            for( let buff of Player.ins.buff.list ) {\n\n                let cfg = buff.cfg ; \n\n                // 判作用域\n                if( this.isSpecified( cfg.specified , tower.article.cfg.id ) == false ) continue ; \n\n                // 生成新的Buff对象\n                let buffNew = BuffFactory.create( cfg.id ) ;\n\n                // 处理 解锁的Buff 合成等级系数\n                BuffResetMergeGrade.exe( buff , tower.article.cfg.mergeGrade ) ;\n\n                if( cfg.isAura == false ) {\n                    tower.buff.list.push( buffNew ) ;\n                }\n                else {\n                    tower.aura.list.push( buffNew ) ;\n                }\n\n            } // end for\n        }\n\n    }\n\n    // buff 删除非天生的Buff。\n    private static resetBuff() {\n\n        // 删除非天生的Buff\n        let remove = ( list : Array< Buff > )=>{\n            for( let i = list.length - 1 ; i >= 0 ; --i ) {\n                if( list[ i ].isNative == true ) continue ;\n                list.splice( i , 1 ) ;\n            } // end for\n        } ;\n\n        for( let i = 0 ; i < TowerMgr.ins.data.length ; ++i ) {\n\n            let tower = TowerMgr.ins.data[ i ] ;\n\n            remove( tower.buff.list ) ;\n            remove( tower.aura.list ) ;\n\n            TowerCfgSet.buff( tower , tower.article.cfg.tower ) ; \n\n            // 重新加入升级线的Buff\n            TowerCfgSet.buffGrade( tower ) ; \n\n        }\n\n    }\n\n    // 作用到角色上\n    private static role( dataIncr : DataIncrease ) {\n\n        let role = PlayerRole.ins.main ; \n        let life = role.life ;\n        let hp = life.hp ; \n        // 当前血量比\n        let f = hp.current / hp.max ; \n\n        if( dataIncr.hpMaxIncrease > 0 ) {\n            hp.max = role.cfg.lifeHpMax + Math.round( dataIncr.hpMaxIncrease ) ; \n            hp.current = Math.round( hp.max * f ) ;\n            role.view.hpBar.refresh() ; \n        }\n        else {\n            // 设置到最初的值\n            hp.max = role.cfg.lifeHpMax ;\n            hp.current = Math.round( hp.max * f ) ;\n            role.view.hpBar.refresh() ; \n        }\n\n    }\n\n    // 是否作用于指定实体\n    private static isSpecified( specified : Set< string > , idEntity : string ) : boolean {\n\n        if( specified == null || specified.size == 0 ) {\n            // 全局\n            return true ; \n        }\n        \n        if( specified.has( idEntity ) == true ){\n            // 指定实体\n            return true ; \n        }\n\n        return false ; \n\n    }\n\n\n\n}\n\n\n","import { randomRangeInt, tween, Vec3 } from \"cc\";\nimport { Tower } from \"../Entity/Tower\";\nimport { BulletFactory } from \"../../Bullet/BulletFactory\";\nimport { WorldNode } from \"../../Support/Misc/WorldNode\";\nimport { BulletMgr } from \"../../Bullet/BulletMgr\";\nimport { RoleMgr } from \"../../Role/Base/RoleMgr\";\nimport { Bullet, BulletRotationType } from \"../../Bullet/Bullet\";\nimport { AttackTargetSelectionType } from \"../Entity/AttackCom\";\nimport { Role } from \"../../Role/Base/Role\";\nimport { BulletMoveCalc } from \"../../Bullet/BulletMoveCalc\";\nimport { TowerBulletEmit as TowerBulletEmit } from \"./TowerBulletEmit\";\nimport { FrameCall, FrameCallDataItem } from \"../../Support/Misc/FrameCall\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\n\n// 发起攻击\nexport class TowerAttack {\n\n    public static exe( tower : Tower ) {\n\n        this.attackAnim( tower ) ;\n\n        tower.attack.count++ ; \n\n        // 发射子弹\n        TowerBulletEmit.exe( tower ) ; \n\n\n    }\n\n    public static canAttack( tower : Tower ) {\n\n        let allEnmeies = RoleMgr.ins.allEnemies ; \n        if( allEnmeies.length == 0 ) {\n            // 没有敌人\n            return false ;\n        }\n\n        let atk = tower.attack ; \n        if( atk == null ) return false ; \n\n        if( atk.bulletId == null ) return false ; \n\n        return true ; \n\n    }\n\n    // 塔的攻击动画\n    public static attackAnim( tower : Tower ) {\n\n        // 攻击表现\n        let root = tower.article.view.root ; \n\n        tween( root ).sequence(\n\n            tween( root ).to( 0.2 , {scale : new Vec3( 1.2 , 1.2 , 1.2 ) } ) , \n            tween( root ).to( 0.2 , {scale : new Vec3( 1.0 , 1.0 , 1.0 ) } ) , \n\n        ).start() ;\n\n    }\n\n\n\n}\n\n\n","import { randomRangeInt } from \"cc\";\nimport { Bullet } from \"../../Bullet/Bullet\";\nimport { BulletMoveCalc } from \"../../Bullet/BulletMoveCalc\";\nimport { Role } from \"../../Role/Base/Role\";\nimport { RoleMgr } from \"../../Role/Base/RoleMgr\";\nimport { AttackTargetSelectionType } from \"../Entity/AttackCom\";\nimport { Tower } from \"../Entity/Tower\";\n\n\n\n// 攻击目标选择\nexport class TowerAttackTargetSelect {\n\n    public static exe( tower : Tower , bullet : Bullet ) {\n\n        let atk = tower.attack ;\n\n        switch( atk.targeSelType ) {\n            case AttackTargetSelectionType.First : {\n                bullet.target.targetRole = this.first() ; \n            }\n            break ; \n\n            case AttackTargetSelectionType.Rnd : {\n                bullet.target.targetRole = this.rnd() ;\n            }\n            break ;\n\n        }\n\n        // 朝向目标\n        BulletMoveCalc.target( bullet ) ;\n\n    }\n\n    public static first() : Role {\n\n        let role : Role = null ; \n        let len = -Number.MIN_VALUE ; \n        for( let role2 of RoleMgr.ins.allEnemies ) {\n            let len2 = role2.ai.pathMoved.lenMoved ; \n            if( len2 > len ) {\n                len = len2 ; \n                role = role2 ; \n            }\n\n        } // end for\n\n        return role ; \n\n    }\n\n    public static rnd() : Role {\n\n        let list = RoleMgr.ins.allEnemies ; \n        let idx = randomRangeInt( 0 , list.length ) ; \n        return list[ idx ] ;\n\n    }\n\n}","import { BagArticleGradeHelper } from \"../../../../Bag/Article/BagArticleGradeHelper\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { Tower } from \"../Entity/Tower\";\nimport { BuffIncreaseCalc, DataIncrease } from \"../../Buff/BuffIncreaseCalc\";\n\n// 属性设置\nexport class TowerAttributeUpdate {\n\n    // 增量数据\n    public static dataIncrease = new DataIncrease() ; \n\n    public static exe( tower : Tower ) {\n\n        this.setAsOrig( tower ) ; \n\n        this.grade( tower ) ;\n\n        this.buff( tower ) ;\n\n        this.buff2( tower ) ; \n\n    }\n\n    // 设置为配置表原始值\n    public static setAsOrig( tower : Tower ) {\n\n        let cfgTower = tower.article.cfg.tower ; \n\n        // 攻击力会被局外升级表的数值覆盖\n        let atk = tower.attack ; \n        atk.damage = cfgTower.atkDamage ; \n        atk.cd.max = cfgTower.atkCd ; \n        atk.crit.probability = cfgTower.atkCritProbability ; \n        atk.crit.multiple = cfgTower.atkCritMultiple ; \n        atk.lifeStealing.percent = 0 ; \n\n    }\n\n    // 设置为等级数值。局外升级 + 局内合成等级。\n    public static grade( tower : Tower ) {\n\n        let cfgAricle = tower.article.cfg ; \n        let cfgGrade = BagArticleGradeHelper.getCfgCurrent( tower.article.cfg.id ) ;\n        if( cfgGrade == null ) return ;\n\n        // 增加 攻击力\n        tower.attack.damage = cfgGrade.attackDamage * cfgAricle.mergeGrade ; \n\n        // 增加 血量\n\n        // 增加 回血\n\n\n    }\n\n    // 处理 Buff 的增量\n    public static buff( tower : Tower ) {\n\n\n        this.dataIncrease.reset() ; \n        BuffIncreaseCalc.exeBuffs( tower.buff.list , this.dataIncrease ) ; \n        let dataIncr = this.dataIncrease ; \n        \n        // 攻击力\n        if( dataIncr.attackDamageIncreasePercent != 0 ) {\n\n            tower.attack.damage += Math.round( tower.attack.damage * dataIncr.attackDamageIncreasePercent ) ;\n        }\n        \n        // 攻速。\n        if( dataIncr.attackSpeedIncreasePercent > 0 ) {\n\n            let max = tower.attack.cd.max ; \n            tower.attack.cd.max = Math.round( max / ( 1 + dataIncr.attackSpeedIncreasePercent ) ) ; \n            \n        }\n\n        // 暴击概率\n        tower.attack.crit.probability += dataIncr.attackCritProbabilityIncreasePercent ; \n\n        // 暴击倍数\n        tower.attack.crit.multiple += dataIncr.attackCritMultipleIncreasePercent ; \n\n        // 吸血 按照百分比\n        tower.attack.lifeStealing.percent += dataIncr.attackLifeStealingPercent ; \n\n        // 回血\n        if( dataIncr.hpRegenIncreasePercent > 0 ) {\n\n            let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.HpRegenIncreasePercent && e.isNative == true ; } ) ;\n            buff.affix.argN += buff.affix.argN * dataIncr.hpRegenIncreasePercent ; \n\n        }\n\n        // 回血速度\n        if( dataIncr.hpRegenSpeedIncreasePercent > 0 ) {\n\n            let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.HpRegenIncreasePercent && e.isNative == true ; } ) ;\n            let max = buff.interval.max ; \n            buff.interval.max = Math.round( max / ( 1 + dataIncr.hpRegenSpeedIncreasePercent ) ) ; \n\n            // 重置当前CD\n            buff.interval.current = buff.interval.max ; \n\n        }\n\n    }\n\n    // 处理 Buff\n    public static buff2( tower : Tower ) {\n\n        let buffs = tower.buff.list ; \n        for( let i = 0 ; i < buffs.length ; ++i ) {\n            \n            let buff = buffs[ i ] ;\n            switch( buff.affix.type ) {\n                case AffixType.AttackCritPerAttackNTimesIncrease : {\n                    let buff2 = buffs.find( ( e )=>{ return e.affix.type == AffixType.AttackCritPerAttackNTimes ; } ) ;\n                    if( buff2 != null ) {\n                        buff2.affix.argN += buff.affix.argN ; \n                        if( buff2.affix.argN < 1 ) {\n                            buff2.affix.argN = 1 ; \n                        }\n                    }\n                }\n                break ; \n            }\n            \n        } // end for\n\n    }\n\n}","\nimport { AffixType } from \"../../Buff/Affix\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { BuffFactory } from \"../../Buff/BuffFactory\";\nimport { Tower } from \"../Entity/Tower\";\nimport { TowerMgr } from \"../Entity/TowerMgr\";\nimport { TowerAuraScopeExpand } from \"./TowerAuraScopeExpand\";\n\n\n// 光环的处理，光环发射Buff。\nexport class TowerAuraHandler {\n\n    // 光环发射 所有的\n    public static aura() {\n\n        for( let i = 0 ; i < TowerMgr.ins.data.length ; ++i ) {\n            let tower = TowerMgr.ins.data[ i ] ;\n            this.auraEmit( tower ) ;\n        } // end for\n\n    }\n\n    // 光环发射\n    private static auraEmit( tower : Tower ) {\n\n        // 是否有重叠解锁\n        let buffOverlapEnable = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.OverlapEnable ; } ) ;\n\n\n        for( let buff of tower.aura.list ) {\n\n            /*\n                复制一个 buff 出来。\n                \n                因为光环是天生的，把光环本身的buff对象加到被影响的实体上，需要修改buff的天生属性，\n                以便于下次清除掉。\n            */ \n\n            let buff2 = BuffFactory.create( buff.cfg.id ) ;\n            buff2.isNative = false ; \n\n            switch( buff.affix.type ) {\n                case AffixType.AuraAttackDamageIncreasePercent : \n                case AffixType.AuraAttackSpeedIncreasePercent : \n                case AffixType.AuraAttackCritProbabilityIncrease : \n                {\n\n                    let ret = TowerAuraScopeExpand.exe( buff.cfg.auraScopeType , tower.article.cells ) ; \n                    this.buffAdd( ret.towers , buff2 , tower , buffOverlapEnable ) ;\n\n                }\n                break ; \n\n                case AffixType.AuraAttackDamageIncreaseAllPercent : \n                {\n\n                    // 全体类型的\n                    let towers = TowerMgr.ins.data ; \n                    this.buffAdd( towers , buff2 , tower ) ;\n\n                }\n                break ;\n\n            }\n\n        } // end for\n\n    }\n\n    private static buffAdd( towers : Array< Tower > , buff : Buff , tower : Tower , buffOverlapEnable : Buff = null ) {\n\n        for( let tower2 of towers ) {\n\n            if( buff.cfg.auraOverlay == false ) {\n                // 不能叠加\n\n                if( buffOverlapEnable != null ) {\n                    // 有重叠启用Buff\n\n\n                }\n                else {\n\n                    let buff2 = tower2.buff.list.find( ( e )=>{ return e.cfg.id == buff.cfg.id ; } ) ; \n                    if( buff2 != null ) {\n                        continue ; \n                    }\n\n                }\n\n            }\n\n            // 加Buff\n            tower2.buff.list.push( buff ) ; \n\n            let str = tower2.article.cfg.id + \" 增加Buff \" + \"来源：\" + tower.article.cfg.id ; \n            console.log( str )  ;\n\n        }\n\n    }\n\n\n}\n\n","import { Vec2 } from \"cc\";\nimport { BagArticle } from \"../../../../Bag/Article/BagArticle\";\nimport { UiBagCell } from \"../../../../Bag/Grid/UiBagCell\";\nimport { UiBagGrid } from \"../../../../Bag/Grid/UiBagGrid\";\nimport { Tower } from \"../Entity/Tower\";\nimport { TowerMgr } from \"../Entity/TowerMgr\";\nimport { CellExpand } from \"../../../../Bag/Grid/CellExpand\";\nimport { AuraScopeType } from \"../../Buff/AuraScopeType\";\nimport { GridTraverse } from \"../../../../Bag/Grid/GridTraverse\";\n\n\nexport class TowerAuraScopeExpandRet {\n\n    // 覆盖的 cell\n    public cells = new Set< UiBagCell >() ;\n\n    // 影响的 物件\n    public article = new Set< BagArticle >() ;\n\n    // 影响的 塔\n    public towers = new Array< Tower >() ;\n\n}\n\n// 光环作用域扩展\nexport class TowerAuraScopeExpand {\n\n    public static exe( type : AuraScopeType ,  cells : Array< UiBagCell > ) : TowerAuraScopeExpandRet {\n\n        switch( type ) {\n            case AuraScopeType.Dir8 : {\n                return this.dir8( cells ) ;\n            }\n            break ; \n\n            case AuraScopeType.HV : {\n                return this.hv( cells ) ; \n            }\n            break ; \n\n            case AuraScopeType.All : {\n                return this.all() ; \n            }\n            break ; \n        }\n\n    }\n\n    public static all() : TowerAuraScopeExpandRet {\n\n        let ret = new TowerAuraScopeExpandRet() ; \n        ret.towers.push( ... TowerMgr.ins.data ) ;\n\n        GridTraverse.exe( ( cell )=>{\n\n            if( cell.unlocked == false ) return ; \n\n            ret.cells.add( cell ) ;\n\n            if( cell.article != null ) {\n                ret.article.add( cell.article ) ;\n            }\n            \n\n        } ) ;\n\n        return ret ; \n\n    }\n\n    // 8 方向扩展\n    public static dir8( cells : Array< UiBagCell > ) : TowerAuraScopeExpandRet {\n\n        let ret = new TowerAuraScopeExpandRet() ; \n\n        for( let i = 0 ; i < cells.length ; ++i ) {\n            let cell = cells[ i ] ; \n            let cells2 = CellExpand.exe8( cell.coord ) ; \n\n            for( let cell2 of cells2 ) {\n\n                ret.cells.add( cell2 ) ;\n\n                let article = cell2.article ; \n                if( article != null && ret.article.has( article ) == false ) {\n                    ret.article.add( article ) ; \n\n                    // 找到对应的 Tower\n                    let tower = TowerMgr.ins.data.find( ( e )=>{ return e.article == article ; } ) ; \n                    if( tower == null ) {\n                        // 不应该出现这种情况\n                        continue ; \n                    }\n\n                    ret.towers.push( tower ) ; \n\n                }\n\n            }\n\n        }\n        \n        \n        return ret ; \n\n    }\n\n    // 同行同列\n    public static hv( cells : Array< UiBagCell > ) : TowerAuraScopeExpandRet {\n\n        let ret = new TowerAuraScopeExpandRet() ; \n\n        let size = UiBagGrid.ins.gridSize ;\n\n        let getTower = ( coord : Vec2 )=>{\n\n            let cell = UiBagGrid.ins.getCell( coord ) ;\n            if( cell == null ) return ; \n\n            ret.cells.add( cell ) ;\n\n            let article = cell.article ; \n            if( article == null || ret.article.has( article ) == true ) return ; \n\n            ret.article.add( article ) ; \n            \n            let tower = TowerMgr.ins.data.find( ( e )=>{ return e.article == article ; } ) ; \n            ret.towers.push( tower ) ;\n\n        } ;\n\n        let coordTemp = new Vec2() ; \n        for( let i = 0 ; i < cells.length ; ++i ) {\n\n            let cell = cells[ i ] ;\n            let coord = cell.coord ; \n\n            // 横\n            coordTemp.x = coord.x ; \n            coordTemp.y = coord.y ; \n            for( coordTemp.x = 0 ; coordTemp.x < size.width ; ++coordTemp.x ) {\n                getTower( coordTemp ) ; \n            } // end for\n            \n            // 竖\n            coordTemp.x = coord.x ; \n            coordTemp.y = coord.y ; \n            for( coordTemp.y = 0 ; coordTemp.y < size.height ; ++coordTemp.y ) {\n                getTower( coordTemp ) ; \n            } // end for\n\n\n        } // end for\n\n        return ret ; \n\n    }\n\n\n\n}","import { bezier, instantiate, math, randomRangeInt, tween, Vec3 } from \"cc\";\nimport { Bullet, BulletMoveType, BulletRotationType, Sender } from \"../../Bullet/Bullet\";\nimport { BulletFactory } from \"../../Bullet/BulletFactory\";\nimport { BulletMgr } from \"../../Bullet/BulletMgr\";\nimport { WorldNode } from \"../../Support/Misc/WorldNode\";\nimport { Tower } from \"../Entity/Tower\";\nimport { RoleMgr } from \"../../Role/Base/RoleMgr\";\nimport { Role } from \"../../Role/Base/Role\";\nimport { BulletMoveCalc } from \"../../Bullet/BulletMoveCalc\";\nimport { AttackCrit, AttackTargetSelectionType } from \"../Entity/AttackCom\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { TowerAttackTargetSelect } from \"./TowerAttackTargetSelect\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { Vec2dHelper } from \"../../Support/Misc/Vec2dHelper\";\nimport { BezierCalc } from \"../../../../../SL/Cocos/Misc/BezierCalc\";\nimport { PathMove } from \"../../Ai/PathMove\";\n\n\n\nexport class TowerBulletEmit {\n\n    public static exe( tower : Tower ) {\n\n        // 保存原始值\n        let scatterCount = tower.attack.scatterCount ; \n\n        // 生成子弹\n        let bullet = this.bulletGen( tower ) ; \n\n        this.buff( tower , bullet ) ; \n\n        TowerAttackTargetSelect.exe( tower , bullet ) ;\n\n        // 子弹表现形式 \n        this.view( bullet ) ; \n        \n        // 散射\n        this.scatter( tower , bullet ) ; \n\n        // 还原原始值\n        tower.attack.scatterCount = scatterCount ; \n        \n        // 曲线运动\n        if( bullet.target.moveType == BulletMoveType.Boomerang ) {\n            this.boomerang( bullet ) ;\n        }\n\n    }\n\n    // 回旋\n    private static boomerang( bullet : Bullet ) {\n\n        let role = bullet.target.targetRole ; \n\n        let pos1 = bullet.view.root.position.clone() ; \n        let pos2 = role.view.root.position.clone() ; \n\n        let v = pos2.clone().subtract( pos1 ) ; \n        // 往前走一段距离，子弹会稍稍运动到后面一点\n        let vn = v.clone().normalize() ;\n        pos2.add( vn.clone().multiplyScalar( 50 ) ) ;\n        \n\n        v = pos2.clone().subtract( pos1 ) ; \n\n        // 计算中点\n        let posM = v.clone().multiplyScalar( 0.5 ).add( pos1 ) ; \n\n        // 计算 bezier 的控制点\n        let t = v.x ; \n        v.x = v.y ; v.y = t ;\n\n        let n = randomRangeInt( 0 , 2 ) ; \n        if( n == 0 )  {\n            // 顺时针\n            v.y *= -1 ;\n        }\n        else {\n            // 逆时针\n            v.x *= -1 \n        }\n\n\n        v.normalize() ;\n        v.multiplyScalar( 500 ) ;\n        let pos11 = posM.clone().add( v ) ;\n        let pos12 = posM.clone().add( v.multiplyScalar( -1) ) ;\n        // let node = instantiate( bullet.view.root ) ; \n        // node.setParent( bullet.view.root.parent ) ; \n        // node.position = pos11 ; \n\n        let path = BezierCalc.bezier2Path( pos1 , pos2 , pos11 , 5 ) ; \n        let path2 = BezierCalc.bezier2Path( pos2 , pos1 , pos12 , 5 ) ; \n        path.push( ... path2 ) ;\n        path.splice(0, 0, pos1) ; \n\n        // for( let pos of path ) {\n\n        //     let node = instantiate( bullet.view.root ) ; \n        //     node.setParent( bullet.view.root.parent ) ; \n        //     node.position = pos ; \n\n        // } // end for\n\n        bullet.pathMove = new PathMove() ; \n        bullet.pathMove.path = path ; \n\n    }\n\n    // 子弹表现形式 \n    private static view( bullet : Bullet ) {\n\n        switch( bullet.view.rotationType ) {\n            case BulletRotationType.Forever : {\n                tween( bullet.view.root ).by( 0.5 , { eulerAngles : new Vec3( 0 , 0 , 360 ) } ).repeatForever().start() ; \n            }\n            break ; \n        }\n\n    }\n\n    // 生成子弹\n    private static bulletGen( tower : Tower ) : Bullet {\n     \n        let pos = tower.article.view.root.worldPosition ; \n        let bullet = BulletFactory.create( tower.attack.bulletId ) ;\n        bullet.view.root.setParent( WorldNode.ins.layer2 , false ) ;\n        bullet.view.root.worldPosition = pos ; \n        BulletMgr.ins.add( bullet ) ;\n\n        // 设置攻击数值\n\n        bullet.damge = tower.attack.damage ; \n\n        // 暴击\n        bullet.crit = new AttackCrit() ; \n        bullet.crit.multiple = tower.attack.crit.multiple ; \n        bullet.crit.probability = tower.attack.crit.probability ; \n\n\n        bullet.lifeStealing = tower.attack.lifeStealing ; \n\n        // 发送者\n        bullet.sender = new Sender() ; \n        bullet.sender.id = tower.article.cfg.id ; \n\n        return bullet ; \n\n    }\n\n    // 散射\n    public static scatter( tower : Tower , bullet : Bullet ) {\n\n        let dir = bullet.move.direction ; \n\n        let atk = tower.attack ; \n        if( atk.scatterCount == 0 ) return ; \n\n        // 间隔角度\n        let interval = 15 ; \n        let degree = interval ; \n\n        for( let i = 0 ; i < atk.scatterCount ; ++i ) {\n\n            // 切换角度\n            degree = Math.floor( ( i + 2 ) / 2 ) * interval ; \n            if( i % 2 == 1 ) degree *= -1 ; \n\n            let bullet2 = this.bulletGen( tower ) ; \n            let dir2 = dir.clone() ; \n            Vec2dHelper.rotate( dir2 , degree ) ; \n    \n            BulletMoveCalc.exe( bullet2.move , dir2 ) ; \n\n        } // end for\n\n\n    }\n\n    // 考虑 Buff \n    public static buff( tower : Tower , bullet : Bullet ) {\n\n        let AttackBulletSizeIncrease = 0 ; \n\n        for( let buff of tower.buff.list ) {\n\n            switch( buff.affix.type ) {\n\n                case AffixType.AttackCritPerAttackNTimes : {\n                    let n = buff.affix.argN ;\n                    if( tower.attack.count % n == 0 ) {\n\n                        bullet.crit.probability = 1 ;\n\n                    }\n                }\n                break ; \n\n                case AffixType.AttackBulletMoveSpeedIncreasePercent : {\n\n                    // 增加子弹飞行速度\n                    let n = bullet.cfg.moveSpeed * buff.affix.argN ; \n                    bullet.move.speed += n ; \n\n                }\n                break ; \n\n                case AffixType.AttackBulletBounceRectEnemyIncrease : {\n\n                    bullet.bounce.bounceRectEnemy += buff.affix.argN ; \n\n                }\n                break ;\n\n                case AffixType.AttackBulletBounceBetweenEnemiesIncrease : \n                {\n                    bullet.bounce.bounceBetweenEnemies.count += buff.affix.argN ; \n                }\n                break ;\n\n                case AffixType.AttackBulletBounceRectIncrease : {\n                    bullet.bounce.bounceRect += buff.affix.argN ; \n                }\n                break;\n\n                case AffixType.AttackBulletPassIncrease : {\n                    bullet.passCount+= buff.affix.argN ; \n                }   \n                break ; \n\n                case AffixType.AttackBulletPassInfiniteAndBounceRectIncrease : {\n                    bullet.passCount+= 9999 ; \n                    bullet.bounce.bounceRect += buff.affix.argN ; \n                } \n                break ;\n\n                case AffixType.AttackBulletScatterIncrease : {\n                    tower.attack.scatterCount += buff.affix.argN ; \n                }\n                break ;\n\n                case AffixType.AttackBulletScatterIncreaseProbability : {\n\n                    let count = buff.affix.argNList[ 0 ] ;\n                    let p = buff.affix.argNList[ 1 ] ;\n                    p = p * 100 ;\n                    if( randomRangeInt( 0, 100 ) < p ) {\n                        tower.attack.scatterCount += count ; \n                    }\n\n                }\n                break ;\n\n                case AffixType.AttackBulletAddBuff : \n                {\n                    bullet.buffIds.push( buff.affix.argStr ) ;\n                }\n                break ; \n\n                case AffixType.AttackBulletAddBuffRadius : \n                {\n                    bullet.buffIds.push( buff.cfg.id ) ;\n                }\n                break ; \n\n                case AffixType.AttackBulletProbabilityAddBuff : \n                case AffixType.AttackDamageIncreasePercentFullHp : \n                case AffixType.AttackBulletExplodeRadiusIncreasePercent : \n                case AffixType.AttackBulletExplodeDamageIncreasePercent : \n                case AffixType.AttackBulletAddBuffRadiusIncreasePercent : \n                case AffixType.AttackBulletAddBuffRadiusBuffIncreasePercent : \n                case AffixType.AttackBulletPoisoningDamageIncreasePercent :\n                case AffixType.AttackBulletPoisoningDurationIncreasePercent :\n                {\n                    bullet.buffs.push( buff ) ;\n                }\n                break ; \n\n                case AffixType.AttackBulletSizeIncreasePercent : {\n                    AttackBulletSizeIncrease += buff.affix.argN ; \n                }\n                break ;\n                \n                \n\n            }\n\n\n        } // end for\n\n        if( AttackBulletSizeIncrease > 0 ) {\n            // 子弹体积重增大\n            let s = bullet.view.root.scale ;\n            s.multiplyScalar( 1 + AttackBulletSizeIncrease ) ; \n            bullet.view.root.scale = s ; \n\n        } \n\n    }\n\n\n}\n\n\n","\nimport { CfgBuff, CfgBuffItem } from \"../../../../../Common/Cfg/CfgBuff\";\nimport { CfgTowerItem } from \"../../../../../Common/Cfg/CfgTower\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\nimport { BagArticle } from \"../../../../Bag/Article/BagArticle\";\nimport { BagArticleGradeHelper } from \"../../../../Bag/Article/BagArticleGradeHelper\";\nimport { Affix, AffixType } from \"../../Buff/Affix\";\nimport { AuraCom } from \"../../Buff/AuraCom\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { BuffCom } from \"../../Buff/BuffCom\";\nimport { BuffFactory } from \"../../Buff/BuffFactory\";\nimport { BuffResetMergeGrade } from \"../../Buff/BuffResetMergeGrade\";\nimport { CurrentMax } from \"../../Support/SimpleStruct/CurrentMax\";\nimport { TowerAttributeUpdate } from \"../Misc/TowerAttributeUpdate\";\nimport { AttackCom, AttackTargetSelectionType } from \"./AttackCom\";\nimport { Tower } from \"./Tower\";\n\n\nexport class TowerFactory {\n\n    public static create( article : BagArticle ) : Tower {\n\n        let tower = new Tower() ; \n        tower.article = article ; \n        article.tower = tower ; \n\n        TowerCfgSet.exe( tower ) ;\n\n        return tower ; \n\n    }\n\n}\n\n\nexport class TowerCfgSet {\n\n    public static exe( tower : Tower ) {\n\n        let cfg = tower.article.cfg.tower ;\n\n        this.attack( tower , cfg ) ;\n\n        this.buff( tower , cfg ) ; \n\n        this.buffGrade( tower ) ; \n\n        TowerAttributeUpdate.grade( tower ) ; \n\n    }\n\n    public static attack( tower : Tower , cfg : CfgTowerItem ) {\n\n        let atk = tower.attack ; \n        if( atk == null ) {\n            atk = tower.attack = new AttackCom() ; \n        }\n\n        atk.bulletId = cfg.atkBulletId ; \n\n        // 攻击CD\n        atk.cd.current = 0 ; \n        atk.cd.max = cfg.atkCd ; \n\n        // 攻击力\n        atk.damage = cfg.atkDamage ; \n\n        // 目标选择\n        atk.targeSelType = cfg.atkTargeSelType ; \n\n        // 暴击\n        atk.crit.probability = cfg.atkCritProbability ; \n        atk.crit.multiple = cfg.atkCritMultiple ; \n\n        // 散射\n        atk.scatterCount = cfg.atkBulletScatterCount ; \n        \n\n    }\n\n    // 处理 Buff\n    public static buff( tower : Tower , cfg : CfgTowerItem ) {\n\n        if( tower.buff == null ) {\n            tower.buff = new BuffCom() ; \n        }\n        \n        if( tower.aura == null ) {\n            tower.aura = new AuraCom() ; \n        }\n        \n        for( let id of cfg.buffs ) {\n            this.handeBuff( tower , id ) ;\n        } // end for\n\n    }\n\n\n    // 处理 Buff 升级线指定的\n    public static buffGrade( tower : Tower ) {\n\n        let cfgItems = BagArticleGradeHelper.getCfgCurrentItems( tower.article.cfg.id ) ; \n        if( cfgItems == null ) return ; \n\n        for( let k = 0 ; k < cfgItems.length ; ++k ) {\n            let cfg = cfgItems[ k ] ;\n            let buffIds = cfg.buffIds ; \n            // 天生的Buff。按照类型来查找，更新。\n            for( let i = 0 ; i < buffIds.length ; ++i ) {\n                let id = buffIds[ i ] ;\n                this.handeBuff( tower , id ) ;\n            } // end for\n\n        } // end for\n\n\n\n    }\n\n    // 处理一个 Buff\n    private static handeBuff( tower : Tower , id : string ) {\n\n        let cfgBuff = CfgBuff.data.get( id ) ;\n\n        if( cfgBuff.isAura == false ) {\n\n            // buff\n            let buff = tower.buff.list.find( ( e )=>{ return e.cfg.id == id ; } ) ;\n            if( buff == null ) {\n                buff = BuffFactory.create( id ) ;\n                tower.buff.list.push( buff ) ; \n                buff.isNative = true ; \n            }\n\n            // 处理合成等级系数\n            BuffResetMergeGrade.exe( buff , tower.article.cfg.mergeGrade ) ;\n\n            return ;\n        }\n        else {\n            // aura\n\n            let buff = tower.aura.list.find( ( e )=>{ return e.cfg.id == id ; } ) ;\n            if( buff == null ) {\n                buff = BuffFactory.create( id ) ;\n                tower.aura.list.push( buff ) ; \n                buff.isNative = true ; \n            }\n\n            // 处理合成等级系数\n            BuffResetMergeGrade.exe( buff , tower.article.cfg.mergeGrade ) ;\n\n        }\n\n    }\n\n    public static grade2( tower : Tower ) {\n\n\n        let cfg = BagArticleGradeHelper.getCfgCurrent( tower.article.cfg.id ) ; \n        if( cfg == null ) return ; \n\n        let multiple = 1 ;\n        switch( tower.article.cfg.mergeGrade ) {\n            case 1 : { multiple = 1 ; } break ; \n            case 2 : { multiple = 2 ; } break ; \n            case 3 : { multiple = 4 ; } break ; \n            case 4 : { multiple = 8 ; } break ; \n        }\n\n        if( cfg.hpMaxIncrease > 0 ) {\n            // 增加血量最大值\n\n            let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.HpMaxIncrease && e.isNative == true ; } ) ;\n            if( buff == null ) {\n                buff = new Buff() ;\n                tower.buff.list.push( buff ) ; \n                buff.isNative = true ; \n                buff.affix = new Affix() ;\n                buff.affix.type = AffixType.HpMaxIncrease ;\n            }\n            \n            buff.affix.argN = cfg.hpMaxIncrease * multiple ; \n\n        }\n\n        // if( cfg.getMomeyPerWave > 0 ) {\n        //     // 每波加钱\n\n        //     let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.GetMomeyPerWave && e.isNative == true ; } ) ;\n        //     if( buff == null ) {\n        //         buff = new Buff() ;\n        //         tower.buff.list.push( buff ) ; \n        //         buff.isNative = true ; \n        //         buff.affix = new Affix() ;\n        //         buff.affix.type = AffixType.GetMomeyPerWave ;\n        //     }\n\n        //     buff.affix.arg1 = cfg.getMomeyPerWave * multiple ; \n\n        // }\n\n        if( cfg.hpRegenIncreasePercent > 0 ) {\n\n            // 回血 百分比\n\n            let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.HpRegenIncreasePercent && e.isNative == true ; } ) ;\n            if( buff == null ) {\n                buff = new Buff() ;\n                tower.buff.list.push( buff ) ; \n                buff.interval = new CurrentMax() ; \n                buff.isNative = true ; \n                buff.affix = new Affix() ;\n                buff.affix.type = AffixType.HpRegenIncreasePercent ;\n            }\n            \n            buff.interval.setCurrentAndMax( FrameSecConvert.toFrame( 3 ) );\n            buff.affix.argN = cfg.hpRegenIncreasePercent * tower.article.cfg.mergeGrade ; \n            \n        }\n\n        if( cfg.hpRegenIncrease > 0 ) {\n            // 回血 具体指\n\n            let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.HpRegenIncrease && e.isNative == true ; } ) ;\n            if( buff == null ) {\n                buff = new Buff() ;\n                tower.buff.list.push( buff ) ; \n                buff.interval = new CurrentMax() ; \n                buff.isNative = true ; \n                buff.affix = new Affix() ;\n                buff.affix.type = AffixType.HpRegenIncrease ;\n            }\n\n            buff.interval.setCurrentAndMax( FrameSecConvert.toFrame( 3 ) );\n            buff.affix.argN = cfg.hpRegenIncrease * multiple ; \n            \n\n        }\n\n    }\n\n\n}\n\n","import { ListHelper } from \"../../../../../SL/Common/Misc/ListHelper\";\nimport { Tower } from \"./Tower\";\n\nexport class TowerMgr {\n\n    public static ins = new TowerMgr() ; \n\n    public data = new Array< Tower >() ;\n\n    public add( tower : Tower ) {\n        ListHelper.addUniquely( this.data , tower ) ; \n    }\n\n    public remove( tower : Tower ) {\n        ListHelper.remove( this.data , tower  ) ; \n    }\n\n    public clear() {\n        ListHelper.clear( this.data ) ; \n    }\n\n}","import { Tower } from \"../Entity/Tower\";\nimport { TowerMgr } from \"../Entity/TowerMgr\";\nimport { TowerAttack } from \"../Attack/TowerAttack\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { TowerSysBuff } from \"./TowerSysBuff\";\nimport { FrameCall, FrameCallDataItem } from \"../../Support/Misc/FrameCall\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\n\n\nexport class TowerSys {\n\n    public static update() {\n\n        for( let t of TowerMgr.ins.data ) {\n            this.updateTower( t ) ;\n        }\n\n    }\n\n    public static updateTower( tower : Tower ) {\n\n        // 攻击\n        this.attack( tower ) ;\n\n        // buff\n        TowerSysBuff.update( tower ) ;\n\n    }\n\n    public static attack( tower : Tower ) {\n\n        // 递减CD\n        let atk = tower.attack ; \n        if( atk.cd.current > 0 ) {\n            atk.cd.current-- ;\n            if( atk.cd.current > 0 ) return ;\n        }\n\n        if( TowerAttack.canAttack( tower ) == false ) return ;\n\n        // 触发攻击\n        TowerAttack.exe( tower ) ; \n\n        // 执行后，开始CD\n        atk.cd.setCurrentAsMax() ;\n\n        let buffAttackContinuous = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.AttackContinuous ; } ) ; \n        if( buffAttackContinuous != null ) {\n\n            let item = new FrameCallDataItem() ; \n            item.interval.setCurrentAndMax( FrameSecConvert.toFrame( 0.3 ) ) ; \n            item.times = buffAttackContinuous.affix.argN ;\n            item.fn = ()=>{\n                if( TowerAttack.canAttack( tower ) == false ) return ;\n                TowerAttack.exe( tower ) ;\n            } ;\n            FrameCall.ins.items.push( item ) ; \n\n        }\n\n\n    }\n\n\n}\n\n\n","import { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { Tower } from \"../Entity/Tower\";\n\nexport class TowerSysBuff {\n\n    public static update( tower : Tower ) {\n\n        let list = tower.buff.list ; \n        for( let i = list.length - 1 ; i >= 0 ; --i ) {\n\n            let buff = list[ i ] ;\n\n            // buff.duration.current-- ; \n            // if( buff.duration.current < 0 ) {\n            //     // 生命周期到，移除\n            //     BuffOp.roleRemove( tower , i ) ; \n            //     continue ; \n            // }\n\n            let interval = buff.interval ;\n            if( interval != null && interval.max >= 0 ) {\n                interval.current-- ; \n                if( interval.current == -1 ) {\n\n                    interval.setCurrentAsMax() ; \n\n                    // 触发\n                    this.trigger( tower , buff ) ; \n\n                }\n            }\n\n        } // end for\n\n    }\n\n    public static trigger( tower : Tower , buff : Buff ) {\n\n        switch( buff.affix.type ) {\n\n            case AffixType.HpRegenIncrease : {\n                // 回血 具体指\n                let role = PlayerRole.ins.main ; \n                role.life.add( buff.affix.argN ) ;\n                role.view.hpBar.refresh() ; \n            }\n            break ; \n\n            case AffixType.HpRegenIncreasePercent : {\n                \n                // 回血。按照百分比\n                let role = PlayerRole.ins.main ; \n                let hp = role.life.hp ; \n                let val = hp.max * buff.affix.argN ; \n                role.life.add( val ) ;\n                role.view.hpBar.refresh() ; \n\n            }\n            break ; \n\n        }\n\n    }\n\n\n}","import { Size, Tween, tween, UITransform } from \"cc\";\n\n\nexport class TweenHelper {\n\n    // 动画重置大小\n    public static contentSize( uitrans : UITransform , size : Size , duration : number ) {\n\n        let sizeOrig = uitrans.contentSize ;\n\n        let t = { } ;\n        t[ \"size\" ] = sizeOrig ;\n        let tw = tween( t ).to( duration , { size : size } , {\n            onUpdate : (target ?: object, ratio ?: number): void => {\n                let size = target[ \"size\" ] ;\n                // console.log( target[ \"size\" ] ) ;\n                uitrans.setContentSize( size ) ;\n            }\n        } ).start() ;\n\n        // tw.call( ()=>{\n        //     console.log( \"测试回调\" ) ; \n        // } ) ;\n\n        // return tw ;\n\n    }\n\n}","import { Size, tween, UITransform } from \"cc\";\n\n\nexport class TweenHelper {\n\n    // 动画重置大小\n    public static contentSize( uitrans : UITransform , size : Size , duration : number ) {\n\n        let sizeOrig = uitrans.contentSize ;\n\n        let t = { } ;\n        t[ \"size\" ] = sizeOrig ;\n        tween( t ).to( duration , { size : size } , {\n            onUpdate : (target ?: object, ratio ?: number): void => {\n                let size = target[ \"size\" ] ;\n                // console.log( target[ \"size\" ] ) ;\n                uitrans.setContentSize( size ) ;\n            }\n        } ).start() ;\n\n    }\n\n\n\n}","import { _decorator, Component, Node, tween, v3, director, Label } from 'cc';\nconst { ccclass, property } = _decorator;\n \n@ccclass('TweenSpeed')\nexport class TweenSpeed extends Component {\n\n    @property(Node) cocos1: Node;\n    @property(Label) label: Label;\n\n    speedFlag = false ;\n    // 缓存 director 的 tick 方法\n    oldTick = director.tick;\n\n    start() {\n        // 重写 tick 方法\n        director.tick = (dt: number) => {\n            this.oldTick.call(director, dt * (this.speedFlag ? 1 : 3));\n        }\n\n        // tween(this.cocos1)\n        //     .to(1.5, { position: v3(250, 100, 0) })\n        //     .to(1.5, { position: v3(-250, 100, 0) })\n        //     .union()\n        //     .repeatForever()\n        //     .start();\n\n        // this.label.string = '当前为正常速度，物体 3 秒往复运动'\n        // // 当用修改 dt 的方式进入慢动作后，实际累计时间也会变慢，慢动作下的 3 秒实际会是 9 秒\n        // // 想计时器不受 dt 控制，可以用 setInterval\n        // this.schedule(() => {\n        //     // 在 1 和 0.33 之间切换\n        //     this.speedFlag = !this.speedFlag;\n        //     if (this.speedFlag) {\n        //         this.label.string = '当前为正常速度，物体 3 秒往复运动'\n        //     } else {\n        //         this.label.string = '当前为正常的 0.33 倍速度，游戏中所有 dt 数值受到影响'\n        //     }\n        // }, 3);\n    }\n\n    onDestroy() {\n        director.tick = this.oldTick;\n    }\n}","import { Input, Label, Node, RichText } from \"cc\";\nimport { ArticleString } from \"../../../Common/String/ArticleString\";\nimport { UiEffectScale } from \"../../../SL/Cocos/Ui/UiEffect\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { UiArticleDetailAttribute } from \"./UiArticleDetailAttribute\";\nimport { UiArticleDetailIcon } from \"./UiArticleDetailIcon\";\n\n// 物品信息\nexport class UiArticleDetail {\n\n    public static ins = new UiArticleDetail() ; \n\n    public root : Node\n\n    public name : Label ; \n\n    public icon : UiArticleDetailIcon ; \n\n\n    public gradeMerge : Label ; \n\n    public intro : RichText ; \n\n    public attribute : UiArticleDetailAttribute ; \n\n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.root.active = false ; \n\n        let btnClose = this.root.getChildByPath( \"btnClose\" ) ;\n        btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.active = false ; \n        } ) ; \n\n        this.name = this.root.getChildByPath( \"Name/val\" ).getComponent( Label ) ;\n\n        this.gradeMerge = this.root.getChildByPath( \"MergeGrade\" ).getComponent( Label ) ;\n\n        this.icon = new UiArticleDetailIcon() ; \n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ;\n\n        this.intro = this.root.getChildByPath( \"Intro\" ).getComponent( RichText ) ;\n\n        this.attribute = new UiArticleDetailAttribute() ; \n        this.attribute.init( this.root.getChildByPath( \"Info/Attribute\" ) ) ;\n        \n    }\n\n    public show() {\n\n        this.root.active = true ; \n\n        UiEffectScale.show( this.root ) ;\n\n    }\n\n    public refresh( article : BagArticle ) {\n\n        let cfg = article.cfg ; \n        let id = cfg.id ; \n\n        // 名字\n        this.name.string = ArticleString.getName( id ) ;  \n\n        // 图标\n        this.icon.refresh( article ) ; \n\n        // 合成等级\n        this.gradeMerge.string = \"合成 lv.\" + cfg.mergeGrade ;\n\n        // 描述\n        this.intro.string = \"<br>\" + ArticleString.getDescription( id ) + \"</br>\" ;  \n\n        // this.attribute.cfgArtile = cfg ; \n        this.attribute.article = article ;\n        this.attribute.refresh() ; \n\n    }\n\n}\n\n\n","import { Label, Node, RichText, Sprite } from \"cc\";\nimport { FrameSecConvert } from \"../../../Common/Misc/FrameSecConvert\";\nimport { Lang } from \"../../../Common/Misc/Lang\";\nimport { CfgArticle } from \"../../../Common/Cfg/CfgArticle\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { Affix, AffixType } from \"../../World/1.Base/Buff/Affix\";\nimport { Buff } from \"../../World/1.Base/Buff/Buff\";\n\n// 属性\nexport class UiArticleDetailAttribute {\n\n    // public cfgArtile : CfgArticle = null ; \n\n    public article : BagArticle = null ; \n\n    public root : Node ; \n\n    public cd = new UiArticleDetailAttributeItem() ; \n    public target = new UiArticleDetailAttributeItem() ; \n    public attackDamage = new UiArticleDetailAttributeItem() ; \n    public hpMaxIncrease =  new UiArticleDetailAttributeItem() ; \n    public HpRegen =  new UiArticleDetailAttributeItem() ; \n    public Money001 =  new UiArticleDetailAttributeItem() ; \n\n    public AuraAttackDamage = new UiArticleDetailAttributeItem() ; \n    public AuraAttackSpeed = new UiArticleDetailAttributeItem() ; \n    public AuraAttackCritProbability = new UiArticleDetailAttributeItem() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.target.init( this.root.getChildByPath( \"Target\" ) ); \n\n        this.cd.init( this.root.getChildByPath( \"Cd\" ) ) ;\n\n        this.attackDamage.init( this.root.getChildByPath( \"Attack\" ) ) ;\n\n        this.hpMaxIncrease.init( this.root.getChildByPath( \"HpMaxIncrease\" ) ) ;\n\n        this.HpRegen.init( this.root.getChildByPath( \"HpRegen\" ) ) ;\n\n        this.Money001.init( this.root.getChildByPath( \"Money001\" ) ) ;\n\n        this.AuraAttackDamage.init( this.root.getChildByPath( \"AuraAttackDamage\" ) ) ;\n\n        this.AuraAttackSpeed.init( this.root.getChildByPath( \"AuraAttackSpeed\" ) ) ;\n\n        this.AuraAttackCritProbability.init( this.root.getChildByPath( \"AuraAttackCritProbability\" ) ) ;\n\n        this.hideAll() ; \n\n    }\n\n    public refresh() {\n\n        this.hideAll() ; \n\n        // 攻击力\n        this.refreshAttack() ; \n\n        this.refreshMisc() ; \n\n    }\n\n    public hideAll() {\n\n        this.target.root.active = false ; \n        this.cd.root.active = false ; \n        this.attackDamage.root.active = false ; \n        this.hpMaxIncrease.root.active = false ; \n        this.HpRegen.root.active = false ; \n        this.Money001.root.active = false ; \n\n        this.AuraAttackDamage.root.active = false ; \n        this.AuraAttackSpeed.root.active = false ; \n        this.AuraAttackCritProbability.root.active = false ; \n\n    }\n    \n    public refreshAttack() {\n\n        if( this.article.tower.attack.damage <= 0 ) return ; \n\n        // 攻击力\n        this.attackDamage.root.active = true ; \n        this.attackDamage.val.string = \"<b>\" + this.article.tower.attack.damage.toString() + \"</b>\" ; \n\n        // 目标\n        this.target.root.active = true ; \n        this.target.val.string = \"<b>\" + Lang.get( \"AttackTargeSelType_\" + this.article.cfg.tower.atkTargeSelType ) + \"</b>\" ; \n\n        // 攻击 CD \n        this.cd.root.active = true ; \n        let val = FrameSecConvert.toSecond( this.article.tower.attack.cd.max ) ; \n        val = Math.round( val * 100 ) / 100 ; // 保留2位小数\n        this.cd.val.string = \"<b>\" + val.toString() + \"</b>\" ; \n\n    }\n\n    public refreshMisc() {\n\n        let str1 = \"<b>{1}</b>\" ; \n        let str2 = \"<b>{1}%</b>\" ; \n\n        // 显示Buff\n        for( let buff of this.article.tower.buff.list ) {\n\n            switch( buff.affix.type ) {\n                \n                case AffixType.HpMaxIncrease : {\n                    this.hpMaxIncrease.root.active = true ; \n                    this.hpMaxIncrease.val.string = str1.replace( \"{1}\" , buff.affix.argN.toString() ) ; \n                }\n                break ;\n\n                case AffixType.HpRegenIncrease : {\n                    this.HpRegen.root.active = true ; \n                    this.HpRegen.val.string = str1.replace( \"{1}\" , buff.affix.argN.toString() ) ; \n                }\n                break ;\n\n                case AffixType.HpRegenIncreasePercent : {\n                    this.HpRegen.root.active = true ; \n                    let n = buff.affix.argN * 100 ;\n                    this.HpRegen.val.string = str2.replace( \"{1}\" , n.toString() ) ; \n                }\n                break ;\n\n                case AffixType.GetMomeyPerWave : {\n                    this.Money001.root.active = true ; \n                    this.Money001.val.string = str1.replace( \"{1}\" , buff.affix.argN.toString() ) ; \n                }\n                break ;\n\n            }\n\n        } // end for\n\n        // 显示光环\n        for( let buff of this.article.tower.aura.list ) {\n\n            switch( buff.affix.type ) {\n                \n                // 攻击力\n                case AffixType.AuraAttackDamageIncreasePercent : {\n                    this.AuraAttackDamage.root.active = true ; \n                    let n = buff.affix.argN * 100 ;\n                    this.AuraAttackDamage.val.string = str2.replace( \"{1}\" , \"+\" + n.toString() ) ; \n                }\n                break ; \n\n                // 攻速\n                case AffixType.AuraAttackSpeedIncreasePercent : {\n                    let item = this.AuraAttackSpeed ; \n                    item.root.active = true ; \n                    let n = buff.affix.argN * 100 ;\n                    item.val.string = str2.replace( \"{1}\" , \"+\" + n.toString() ) ; \n                }\n                break ; \n\n                // 暴击概率\n                case AffixType.AuraAttackCritProbabilityIncrease : {\n                    let item = this.AuraAttackCritProbability ; \n                    item.root.active = true ; \n                    let n = buff.affix.argN * 100 ;\n                    item.val.string = str2.replace( \"{1}\" , \"+\" + n.toString() ) ; \n                }\n                break ; \n\n            }\n\n        }\n\n    }\n\n}\n\n// 条目\nclass UiArticleDetailAttributeItem {\n\n    public root : Node ; \n\n    public name : Label ; \n\n    public icon : Sprite ; \n\n    public val : RichText ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n\n        this.val = this.root.getChildByPath( \"Val\" ).getComponent( RichText ) ;\n\n    }\n\n}","import { Node, Size, sp, Sprite, UITransform, Vec3 } from \"cc\";\nimport { NodeSizeFit } from \"../../../SL/Cocos/Ui/NodeSizeFit\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { BagArticle } from \"../Article/BagArticle\";\n\n// 图标\nexport class UiArticleDetailIcon {\n\n    public root : Node ;\n    public icon : Sprite ; \n    public iconSk : sp.Skeleton ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = this.root.getChildByPath( \"Icon\" ).getComponent( Sprite ) ;\n        this.iconSize = this.icon.getComponent( UITransform ).contentSize.clone() ; \n        this.iconSk = this.root.getChildByPath( \"IconSk\" ).getComponent( sp.Skeleton ) ;\n\n    }\n\n    public refresh( article : BagArticle ) {\n\n        this.icon.node.active = false ; \n        this.iconSk.node.active = false ; \n\n        let id = article.cfg.id ; \n\n        // 静态图片\n        let pf = PfMgrBagArticle.getPf( id ) ;\n        let main = pf.getChildByPath( \"Main\" ) ; \n        let spr = main.getComponent( Sprite ) ; \n        if( spr != null ) {\n            this.icon.node.active = true ; \n            this.icon.spriteFrame = spr.spriteFrame ; \n            NodeSizeFit.set2( this.icon.node , this.iconSize , this.icon.spriteFrame.originalSize ) ;\n            return ; \n        }\n\n        this.refreshSkeleton( main ) ; \n\n    }\n\n    public refreshSkeleton( main : Node ) {\n\n        let sk = main.getComponent( sp.Skeleton ) ; \n        if( sk == null ) return ; \n\n        this.iconSk.node.active = true ; \n\n        // 设置动画\n        this.iconSk.skeletonData = sk.skeletonData ; \n\n        // 播放一个动画\n        let name = this.iconSk.skeletonData.getRuntimeData().animations[ 0 ].name ; \n        this.iconSk.setAnimation( 0 , name , true );\n\n        // 设置大小\n        let node = this.iconSk.node ; \n        // let node = instantiate( main ) ;\n        // node.scale = Vec3.ONE ; \n        let rect = node.getComponent( UITransform ).getBoundingBox() ; \n        node.setParent( this.icon.node.parent ) ; \n        NodeSizeFit.set2( node , this.iconSize , this.icon.spriteFrame.originalSize ) ; \n\n        // 设置位置\n        node.position = new Vec3( 0 , -rect.height / 2 , 0 ) ; \n\n    }\n\n    private iconSize : Size ; \n\n}\n","import { Node, Size, sp, Sprite, UITransform, Vec3 } from \"cc\";\nimport { PfMgrBagArticle } from \"../PfMgr/PfMgr\";\nimport { NodeSizeFit } from \"../../SL/Cocos/Ui/NodeSizeFit\";\nimport { CfgArticleMgr } from \"../Cfg/CfgArticle\";\n\n\n// 物件图标\nexport class UiArticleIcon {\n\n    public root : Node ;\n    public icon : Sprite ; \n    public iconSk : sp.Skeleton ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = this.root.getChildByPath( \"Icon\" ).getComponent( Sprite ) ;\n        this.iconSize = this.icon.getComponent( UITransform ).contentSize.clone() ; \n        this.iconSk = this.root.getChildByPath( \"IconSk\" ).getComponent( sp.Skeleton ) ;\n\n    }\n\n    public refresh( id : string ) {\n\n        this.icon.node.active = false ; \n\n        this.iconSk.node.active = false ; \n\n        // 静态图片\n        let pf = PfMgrBagArticle.getPf( id ) ;\n        let main = pf.getChildByPath( \"Main\" ) ; \n        let spr = main.getComponent( Sprite ) ; \n        if( spr != null ) {\n            this.icon.node.active = true ; \n            this.icon.spriteFrame = spr.spriteFrame ; \n            NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n            return ; \n        }\n\n        this.refreshSkeleton( main ) ; \n\n    }\n\n    // spine 动画\n    public refreshSkeleton( main : Node ) {\n\n        let sk = main.getComponent( sp.Skeleton ) ; \n        if( sk == null ) return ; \n\n        this.iconSk.node.active = true ; \n\n        // 设置动画\n        if( this.iconSk.skeletonData == sk.skeletonData ) return ; \n        this.iconSk.skeletonData = sk.skeletonData ; \n\n        // 播放一个动画\n        let name = this.iconSk.skeletonData.getRuntimeData().animations[ 0 ].name ; \n        this.iconSk.setAnimation( 0 , name , true );\n\n        // 设置大小\n        let node = this.iconSk.node ; \n        // let node = instantiate( main ) ;\n        // node.scale = Vec3.ONE ; \n        let rect = node.getComponent( UITransform ).contentSize ; \n        node.setParent( this.icon.node.parent ) ; \n        // NodeSizeFit.set2( node , this.iconSize , new Size( 1 , 1 ) ) ; \n\n        // 用设置缩放的方式做适配\n        let f2 = rect.width / rect.height ; \n        if( f2 > 1 ) {\n            let f = this.iconSize.width / rect.width ;\n            node.setScale( new Vec3( f , f , f ) ) ;\n\n        }\n        else if( f2 < 1 || f2 == 1 ) {\n            let f = this.iconSize.height / rect.height ;\n            node.setScale( new Vec3( f , f , f ) ) ;\n        }\n        \n        // let f = this.iconSize.width / rect.width ;\n        // node.setScale( new Vec3( f , f , f ) ) ;\n\n\n        rect = node.getComponent( UITransform ).getBoundingBox() ; \n        // 设置位置\n        node.position = new Vec3( 0 , -rect.height / 2 , 0 ) ; \n\n    }\n\n    private iconSize : Size ; \n\n}\n\n// 图标背景\nexport class UiArticleIconBg {\n\n    public root : Node ; \n\n    public init( node : Node ) {\n        this.root = node ;\n    }\n\n    public refresh( id : string ) {\n\n        for( let i = 0 ; i < this.root.children.length ; ++i ) {\n            this.root.children[ i ].active = false ; \n        }\n\n        let q = CfgArticleMgr.data.get( id ).quality ; \n        let idx = q - 1 ;\n\n        if( idx >= this.root.children.length ) {\n            idx = this.root.children.length ; \n        }\n\n        this.root.children[ idx ].active = true ; \n\n    }\n\n}","import { Input, instantiate, Node, Prefab, resources, RichText, Sprite } from \"cc\";\nimport { UiArticleIcon } from \"../../../Common/Ui/UiArticleIcon\";\nimport { ArticleString } from \"../../../Common/String/ArticleString\";\nimport { Lang } from \"../../../Common/Misc/Lang\";\nimport { UiEffectPopup } from \"../../../SL/Cocos/Ui/UiEffect\";\n\n// UI 物件解锁 告知\nexport class UiArticleUnlock {\n\n    public static loadAndCreate( cb : ( ui : UiArticleUnlock )=>void ) {\n\n        resources.load( \"Home/Ui/ArticleUnlock\" , Prefab , ( err , data )=>{\n\n            let root = instantiate( data ) ;\n            let ui = new UiArticleUnlock() ;\n            ui.init( root ) ; \n            cb( ui ) ;\n\n        } ) ; \n\n    }\n\n    public root : Node ; \n\n    public mask : Node ; \n\n    public icon = new UiArticleIcon() ; \n\n    public description : RichText ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.mask = this.root.getChildByPath( \"mask\" ) ; \n        this.mask.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n        } ) ;\n\n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ;\n\n        this.description = this.root.getChildByPath( \"Description\" ).getComponent( RichText ) ;\n\n    }\n\n    public refresh( ids : Array< string > ) {\n\n        // 图标\n        this.icon.refresh( ids[ 0 ] ) ;\n\n        // 描述\n        let id = ids[ 0 ] ;\n        let name = ArticleString.getName( id ) ;\n        let str = Lang.get( \"Home_AricleUnlock_Description\" ) ;\n        str = str.replace( \"{name}\" , name ) ;\n        this.description.string = str ; \n\n    }\n\n    public show() {\n\n        UiEffectPopup.show( this.root ) ;\n\n    }\n\n}","import { find, Input, instantiate, Node, Prefab } from \"cc\";\nimport { UiBagGrid } from \"../Grid/UiBagGrid\";\nimport { UiBagTouch } from \"../Touch/UiBagTouch\";\nimport { UiArticleDetail } from \"../ArticleDetail/UiArticleDetail\";\n\n\n\n// 背包 UI\nexport class UiBag {\n\n    public static ins : UiBag ; \n\n    public static createIns( node : Node ) {\n\n        let ui = new UiBag() ; \n        this.ins = ui ; \n        ui.init( node ) ;\n\n    }\n\n\n    public static pf : Prefab ;\n\n    public static create( parent : Node = null ) : UiBag {\n\n        let root = instantiate( this.pf ) ;\n\n        let ui = new UiBag() ; \n        ui.init( root ) ;\n        ui.root.setParent( parent , false ) ; \n\n        return ui ; \n\n    }\n\n \n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        UiBagGrid.ins = new UiBagGrid() ; \n        UiBagGrid.ins.init( this.root.getChildByPath( \"Grid\" ) ) ;\n\n        UiBagTouch.ins = new UiBagTouch() ; \n        UiBagTouch.ins.init( this.root.getChildByPath( \"Touch\" ) ) ; \n\n        // UiTray.ins = new UiTray() ; \n        // UiTray.ins.init( this.root.getChildByPath( \"Tray\" ) ) ; \n\n        // UiBagBottom.ins = new UiBagBottom() ; \n        // UiBagBottom.ins.init( this.root.getChildByPath( \"Bottom\" ) ) ;\n\n        UiArticleDetail.ins = new UiArticleDetail() ; \n        UiArticleDetail.ins.init( this.root.getChildByPath( \"ArticleInfo\" ) ) ; \n        \n        // UiBagExpandOp.ins = new UiBagExpandOp() ; \n        // UiBagExpandOp.ins.init( this.root.getChildByPath( \"BagExpandOp\" ) ) ; \n\n        // GridModeTransition.init() ; \n        \n    }\n\n}\n\n","import { Input, instantiate, Node, Prefab } from \"cc\";\nimport { UiBagDeploy } from \"./UiBagDeploy\";\nimport { UiBagUnlocked } from \"./UiBagUnlocked\";\nimport { UiBagLocked } from \"./UiBagLocked\";\nimport { UiBagPrefab } from \"./UiBagPrefab\";\nimport { UiBagReplace } from \"./UiBagReplace\";\n\nexport class UiBag {\n\n    public static ins = new UiBag() ; \n\n    public static pf : Prefab ; \n\n    public static create() {\n\n        let root = instantiate( this.pf ) ; \n        this.ins.init( root ) ;\n\n    }\n\n\n    public root : Node ; \n\n    public deploy : UiBagDeploy ; \n    public unlocked : UiBagUnlocked ; \n    public locked : UiBagLocked ; \n    public replace : UiBagReplace ; \n\n    public sv : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnBack = this.root.getChildByPath( \"btnBack\" ) ;\n        btnBack.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.active = false ; \n        } ) ;\n\n        UiBagPrefab.ins = new UiBagPrefab() ; \n        UiBagPrefab.ins.init( this.root.getChildByPath( \"Prefab\" ) ) ;\n\n        // 上阵的\n        this.deploy = new UiBagDeploy() ; \n        this.deploy.init( this.root.getChildByPath( \"Deploy\" ) ) ;\n        \n        this.sv = this.root.getChildByPath( \"sv\" ) ; \n        this.sv.active = true ; \n\n        // 解锁的/获得的\n        this.unlocked = new UiBagUnlocked() ; \n        this.unlocked.init( this.root.getChildByPath( \"sv/view/content/Unlocked\" ) ) ;\n     \n        // 未解锁的/未获得的\n        this.locked = new UiBagLocked() ; \n        this.locked.init( this.root.getChildByPath( \"sv/view/content/Locked\" ) ) ;\n\n        this.replace = new UiBagReplace() ; \n        this.replace.init( this.root.getChildByPath( \"Replace\" ) ) ;\n        this.replace.root.active = false ; \n\n    }\n\n    public show() {\n\n        this.root.active = true ; \n\n        this.refresh() ; \n\n    }\n\n    public refresh() {\n\n        this.deploy.refresh() ; \n        this.unlocked.refresh() ; \n        this.locked.refresh() ; \n\n    }\n\n}\n\n","import { Input, instantiate, Label, Node, Prefab, resources, RichText, tween, Vec3 } from \"cc\";\nimport { CfgArticle, CfgArticleMgr } from \"../../../../Common/Cfg/CfgArticle\";\nimport { CfgArticleGrade } from \"../../../../Common/Cfg/CfgArticleGrade\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { ArticleString } from \"../../../../Common/String/ArticleString\";\nimport { UiBagArticleDetailBaseAttribute } from \"./UiBagArticleDetailBaseAttribute\";\nimport { UiBagArticleDetailUnlocked } from \"./UiBagArticleDetailUnlocked\";\nimport { UiBagArticleDetailBtnList } from \"./UiBagArticleDetailBtnList\";\nimport { UiBagItem } from \"../UiBagItem\";\nimport { UiEffectPopup } from \"../../../../SL/Cocos/Ui/UiEffect\";\nimport { SoundBtnClickSetter } from \"../../../../Common/Audio/SoundBtnClickSetter\";\n\nexport class UiBagArticleDetail {\n\n    public static pf : Prefab ; \n\n    public static create( parent : Node ) : UiBagArticleDetail {\n\n        let root = instantiate( this.pf ) ; \n        let ui = new UiBagArticleDetail() ; \n        ui.init( root ) ;\n        ui.root.setParent( parent , false ) ;\n\n        return ui ; \n\n    }\n\n    public articleId : string = null ; \n\n    public root : Node ; \n\n    public name : Label ; \n\n    public intro : Label ; \n\n    public btnList = new UiBagArticleDetailBtnList() ; \n\n    public attribute = new UiBagArticleDetailBaseAttribute() ; \n\n    public unlocked = new UiBagArticleDetailUnlocked() ; \n\n    public item : UiBagItem ; \n\n    public unlockedInfo : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        SoundBtnClickSetter.exe( this.root ) ;\n\n        let btnClose = this.root.getChildByPath( \"btnClose\" ) ;\n        btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n        } ) ;\n\n        this.btnList.detail = this ; \n        this.btnList.init( this.root.getChildByPath( \"btnList\" ) ) ;\n        this.btnList.setShowModeAsDeploy() ;\n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n        \n        this.intro = this.root.getChildByPath( \"Intro/val\" ).getComponent( Label ) ;\n\n        this.attribute.init( this.root.getChildByPath( \"Attribute\" ) ) ;\n\n        this.unlocked.detail = this ; \n        this.unlocked.init( this.root.getChildByPath( \"Unlocked\" ) ) ; \n\n        this.unlockedInfo = this.root.getChildByPath( \"UnlockedInfo\" ).getComponent( Label ) ; \n        this.unlockedInfo.node.active = false ; \n        \n    }\n\n    public show() {\n        this.root.active = true ; \n        UiEffectPopup.show( this.root ) ; \n        \n    }\n\n    public refresh() {\n        \n        let cfgArctileItem = CfgArticleMgr.data.get( this.articleId ) ; \n        let glId = cfgArctileItem.gradeLineId ; \n        let cfgGrade = CfgArticleGrade.data.get( glId ) ; \n        // 取得当前物品的等级\n        let grade = Account.ins.bag.grade.get( glId ) ; \n        if( grade == null ) {\n            grade = 1 ; \n        }\n        \n        if( grade > cfgGrade.length ) {\n            // 达到最高级\n            this.btnList.btnUpgrade.root.active = false ; \n        }\n        else {\n            this.btnList.btnUpgrade.refresh() ; \n        }\n\n        this.attribute.cfgArctile = cfgArctileItem ; \n        this.attribute.refresh() ; \n        \n        // 描述\n        this.intro.string = ArticleString.getDescription( this.articleId ) ;  \n\n        this.unlocked.cfgArctile = cfgArctileItem ; \n        this.unlocked.refresh() ; \n\n    }\n\n}\n\n\n\n\n\n\n\n","import { Label, Node, RichText, Sprite } from \"cc\";\nimport { FrameSecConvert } from \"../../../../Common/Misc/FrameSecConvert\";\nimport { BagArticleGradeHelper } from \"../../../../Game/Bag/Article/BagArticleGradeHelper\";\nimport { CfgArticle } from \"../../../../Common/Cfg/CfgArticle\";\nimport { Lang } from \"../../../../Common/Misc/Lang\";\nimport { CfgArticleGradeItem } from \"../../../../Common/Cfg/CfgArticleGrade\";\nimport { CfgBuff } from \"../../../../Common/Cfg/CfgBuff\";\nimport { AffixType } from \"../../../../Game/World/1.Base/Buff/Affix\";\n\n// 基础属性\nexport class UiBagArticleDetailBaseAttribute {\n\n    public cfgArctile : CfgArticle = null ; \n\n    public root : Node ; \n\n    public cd = new UiBagArticleDetailBaseAttributeItem() ; \n    public target = new UiBagArticleDetailBaseAttributeItem() ; \n    public attackDamage = new UiBagArticleDetailBaseAttributeItem() ; \n    public hpMaxIncrease =  new UiBagArticleDetailBaseAttributeItem() ; \n    public HpRegen =  new UiBagArticleDetailBaseAttributeItem() ; \n    public AttackDamageAura =  new UiBagArticleDetailBaseAttributeItem() ; \n    public Money001 =  new UiBagArticleDetailBaseAttributeItem() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.target.init( this.root.getChildByPath( \"Target\" ) ); \n        this.target.root.active = false ; \n\n        this.cd.init( this.root.getChildByPath( \"Cd\" ) ) ;\n        this.cd.root.active = false ; \n\n        this.attackDamage.init( this.root.getChildByPath( \"Attack\" ) ) ;\n        this.attackDamage.root.active = false ; \n\n        this.hpMaxIncrease.init( this.root.getChildByPath( \"HpMaxIncrease\" ) ) ;\n        this.hpMaxIncrease.root.active = false ; \n\n        this.HpRegen.init( this.root.getChildByPath( \"HpRegen\" ) ) ;\n        this.HpRegen.root.active = false ; \n\n        this.AttackDamageAura.init( this.root.getChildByPath( \"AttackAura\" ) ) ;\n        this.AttackDamageAura.root.active = false ; \n\n        this.Money001.init( this.root.getChildByPath( \"Money001\" ) ) ;\n        this.Money001.root.active = false ; \n\n    }\n\n    private cfgCurrent : CfgArticleGradeItem = null ; \n    private cfgNext : CfgArticleGradeItem = null ; \n\n    public refresh() {\n\n        this.cfgCurrent = BagArticleGradeHelper.getCfgCurrent( this.cfgArctile.id ) ;\n        this.cfgNext = BagArticleGradeHelper.getCfgNext( this.cfgArctile.id ) ; \n\n        this.refreshAttack() ; \n        this.refreshMisc() ; \n\n    }\n\n    public refreshAttack() {\n\n        let val = this.cfgCurrent.attackDamage ; \n        if( val == 0 ) return ; \n\n        this.attackDamage.root.active = true ; \n\n        // 攻击力\n        this.attackDamage.val.string = \"<b>\" + val.toString() + \"</b>\" ; \n\n        // 攻击力 下一级增加的\n        if( this.cfgNext != null ) {\n            let diff = this.cfgNext.attackDamage - this.cfgCurrent.attackDamage ; \n            if( diff > 0 ) {\n                this.attackDamage.val.string += \"<b><color=Green>+\" + diff + \"</color></b>\" ; \n            }\n        }\n\n        // 目标\n        this.target.root.active = true ; \n        this.target.val.string = \"<b>\" + Lang.get( \"AttackTargeSelType_\" + this.cfgArctile.tower.atkTargeSelType ) + \"</b>\" ; \n\n        // 攻击 CD \n        this.cd.root.active = true ; \n        this.cd.val.string = \"<b>\" + FrameSecConvert.toSecond( this.cfgArctile.tower.atkCd ).toString() + \"</b>\" ; \n\n    }\n\n    // 刷新其他的杂项\n    public refreshMisc() {\n     \n        let str1 = \"<b>{1}</b>\" ; \n        let str2 = \"<b>{1}%</b>\" ; \n\n        let cfgItems = BagArticleGradeHelper.getCfgCurrentItems( this.cfgArctile.id ) ;\n\n        for( let cfg of cfgItems ) {\n\n            let ids = cfg.buffIds ; \n            for( let id of ids ) {\n                let cfgBuffItem = CfgBuff.data.get( id ) ;\n                \n                switch( cfgBuffItem.affixType ) {\n                    \n                    case AffixType.HpMaxIncrease : {\n                        this.hpMaxIncrease.root.active = true ; \n                        this.hpMaxIncrease.val.string = str1.replace( \"{1}\" , cfgBuffItem.affixArgN.toString() ) ; \n                    }\n                    break ;\n\n                    case AffixType.HpRegenIncrease : {\n                        this.HpRegen.root.active = true ; \n                        this.HpRegen.val.string = str1.replace( \"{1}\" , cfgBuffItem.affixArgN.toString() ) ; \n                    }\n                    break ;\n\n                    case AffixType.HpRegenIncreasePercent : {\n                        this.HpRegen.root.active = true ; \n                        let n = cfgBuffItem.affixArgN * 100 ;\n                        this.HpRegen.val.string = str2.replace( \"{1}\" , n.toString() ) ; \n                    }\n                    break ;\n\n                    case AffixType.GetMomeyPerWave : {\n                        this.Money001.root.active = true ; \n                        this.Money001.val.string = str1.replace( \"{1}\" , cfgBuffItem.affixArgN.toString() ) ; \n                    }\n                    break ;\n\n                    case AffixType.AuraAttackDamageIncreasePercent : {\n                        this.AttackDamageAura.root.active = true ; \n                        let n = cfgBuffItem.affixArgN * 100 ;\n                        this.AttackDamageAura.val.string = str2.replace( \"{1}\" , n.toString() ) ; \n                    }\n                    break ; \n\n                }\n\n            } // end for\n\n        } // end for\n\n    }\n\n}\n\n// 条目\nclass UiBagArticleDetailBaseAttributeItem {\n\n    public root : Node ; \n\n    public name : Label ; \n\n    public icon : Sprite ; \n\n    public val : RichText ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n\n        this.val = this.root.getChildByPath( \"Val\" ).getComponent( RichText ) ;\n\n    }\n\n}","import { Input, Label, Node } from \"cc\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { AccountPersist } from \"../../../../Common/Account/AccountPersist\";\nimport { CfgArticleMgr } from \"../../../../Common/Cfg/CfgArticle\";\nimport { CfgArticleGrade, CfgArticleGradeItem } from \"../../../../Common/Cfg/CfgArticleGrade\";\nimport { ReplaceModeEnter } from \"../ReplaceModeEnter\";\nimport { UiBag } from \"../UiBag\";\nimport { UiBagArticleDetail } from \"./UiBagArticleDetail\";\nimport { BagArticleGradeHelper } from \"../../../../Game/Bag/Article/BagArticleGradeHelper\";\nimport { UiToast } from \"../../../../Common/Ui/UiToast\";\nimport { UiMain } from \"../../Main/UiMain\";\nimport { UiMoney001 } from \"../../Main/Margin/UiMoney001\";\n\n\n// 底部的按钮列表\nexport class UiBagArticleDetailBtnList {\n\n    public detail : UiBagArticleDetail = null ; \n\n\n    public root : Node ; \n\n    public btnUpgrade : UiBagArticleDetailUpgrade ; \n\n    public btnRemove : Node ; \n\n    public btnDeploy : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.btnUpgrade = new UiBagArticleDetailUpgrade() ; \n        this.btnUpgrade.detail = this.detail ; \n        this.btnUpgrade.init( this.root.getChildByPath( \"btnUpgrade\" ) ) ;\n\n        this.btnRemove = this.root.getChildByPath( \"btnRemove\" ) ;\n        this.btnRemove.on( Input.EventType.TOUCH_END , this.onClick_btnRemove , this ) ; \n\n        this.btnDeploy = this.root.getChildByPath( \"btnDeploy\" ) ;\n        this.btnDeploy.on( Input.EventType.TOUCH_END , this.onClick_btnDeploy , this ) ; \n\n    }\n\n    public setShowModeAsDeploy( ) {\n\n        this.btnRemove.active = true ;\n        this.btnDeploy.active = false ; \n    }\n\n    public setShowModeAsUnlocked( ) {\n        this.btnRemove.active = false ;\n        this.btnDeploy.active = true ; \n    }\n\n    private onClick_btnRemove() {\n\n        // this.root.destroy() ; \n\n        let id = this.detail.articleId ;\n\n        // 操作数据。从 上阵表 中删除\n        let idx = Account.ins.bag.deploy.indexOf( id ) ; \n        Account.ins.bag.deploy.splice( idx , 1 ) ; \n        AccountPersist.save() ; \n\n        // 刷新\n        UiBag.ins.deploy.refresh() ; \n        UiBag.ins.unlocked.refresh() ; \n\n        // 关闭页面\n        this.detail.root.destroy() ; \n\n    }\n\n    private onClick_btnDeploy() {\n\n        // this.root.destroy() ; \n\n        let hasEmpty = Account.ins.bag.deploy.length < Account.ins.bag.deployCellUnlocked.size ; \n\n        if( hasEmpty == true ) {\n            // 有空位\n\n            let id = this.detail.articleId ;\n\n            Account.ins.bag.deploy.push( id ) ;\n            AccountPersist.save() ; \n    \n            // 刷新\n            UiBag.ins.deploy.refresh() ; \n            UiBag.ins.unlocked.refresh() ; \n\n            // 关闭页面\n            this.detail.root.destroy() ; \n\n            return ; \n\n        }\n\n        // 替换模式\n\n        // 关闭页面\n        this.detail.root.destroy() ; \n\n        ReplaceModeEnter.enter( this.detail.articleId ) ;\n\n    }\n\n\n}\n\n\nexport class UiBagArticleDetailUpgrade {\n\n    public detail : UiBagArticleDetail = null ; \n\n    public root : Node ; \n\n    public upgradeCost : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \n\n        this.upgradeCost = this.root.getChildByPath( \"Cost/val\" ).getComponent( Label ) ; \n\n    }\n\n    public refresh() {\n \n        let cfg = BagArticleGradeHelper.getCfgCurrent( this.detail.articleId ) ;\n        this.upgradeCost.string = cfg.upgrade.money1.toString() ; \n\n    }\n\n    private onClick() {\n\n        let id = this.detail.articleId ;\n\n        if( this.check( ) == false ) return ;  \n\n        // 取得升级线ID\n        let cfgArctileItem = CfgArticleMgr.data.get( id ) ; \n        let glId = cfgArctileItem.gradeLineId ; \n\n        let grade = Account.ins.bag.grade.get( glId ) ; \n        if( grade == null ) {\n            grade = 1 ; \n        }\n\n        grade++ ;\n\n        Account.ins.bag.grade.set( glId , grade ) ; \n\n        AccountPersist.save() ; \n\n\n        // 刷新页面\n\n        UiBag.ins.deploy.refresh() ; \n        UiBag.ins.unlocked.refresh() ; \n        this.detail.unlocked.refresh() ; \n        this.detail.refresh() ; \n        this.detail.item.refresh() ; \n        UiMoney001.ins.refresh() ; \n\n    }\n\n    // 检查是否能升级\n    private check( ) : boolean {\n\n        let a = Account.ins ; \n\n        let cfgGrade = BagArticleGradeHelper.getCfgCurrent( this.detail.articleId ) ;\n        if( a.money.money001 < cfgGrade.upgrade.money1 ) \n        {\n            // 钱不够\n            UiToast.show( UiMain.ins.root , \"金币不足\" ) ; \n\n            return false ;\n        }\n\n        // 物品不够\n        let itemCount = a.items.get( cfgGrade.upgrade.itemId ) ; \n        if( itemCount == null ) { itemCount = 0 ; } ; \n        if( itemCount < cfgGrade.upgrade.itemCount ) {\n\n            // 碎片不足\n            UiToast.show( UiMain.ins.root , \"碎片不足\" , 1.5 ) ; \n\n            return false ; \n        }\n\n        // 扣减数值\n        a.money.money001 -= cfgGrade.upgrade.money1 ; \n        itemCount -= cfgGrade.upgrade.itemCount ; \n        a.items.set( cfgGrade.upgrade.itemId , itemCount ) ; \n        AccountPersist.save() ;\n\n\n        return true ; \n\n    }\n\n}","import { instantiate, Node, RichText, Size, Sprite, UITransform } from \"cc\";\nimport { CfgArticleGrade, CfgArticleGradeItem } from \"../../../../Common/Cfg/CfgArticleGrade\";\nimport { BuffString } from \"../../../../Game/World/1.Base/Buff/BuffString\";\nimport { CfgArticle } from \"../../../../Common/Cfg/CfgArticle\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { BagArticleGradeHelper } from \"../../../../Game/Bag/Article/BagArticleGradeHelper\";\nimport { CfgBuff } from \"../../../../Common/Cfg/CfgBuff\";\nimport { UiBagArticleDetail } from \"./UiBagArticleDetail\";\nimport { PfMgrIconBuff } from \"../../../../Common/PfMgr/PfMgrIconBuff\";\nimport { NodeSizeFit } from \"../../../../SL/Cocos/Ui/NodeSizeFit\";\n\n// 解锁的\nexport class UiBagArticleDetailUnlocked {\n\n    public detail : UiBagArticleDetail = null ; \n    public cfgArctile : CfgArticle = null ; \n\n    public root : Node ; \n\n    public content : Node ; \n\n    public items = new Array< UiBagArticleDetailUnlockedItem >() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.content = this.root.getChildByPath( \"sv/view/content\" ) ;\n\n        this.pfItem = this.content.children[ 0 ] ;\n        this.pfItem.active = false ; \n\n        this.pfItem2 = this.content.children[ 1 ] ;\n        this.pfItem2.active = false ; \n\n        // 删除多余的\n        for( let i = this.content.children.length ; i > 2 ; --i ) {\n            this.content.children[ i ].destroy() ; \n        } // end for\n\n    }\n\n    public refresh() {\n\n        for( let uiItem of this.items ) {\n            uiItem.root.destroy() ; \n        }\n        this.items.splice( 0 , this.items.length ) ; \n\n        let grade = BagArticleGradeHelper.getGradeByLineId( this.cfgArctile.gradeLineId ) ;\n\n        let line = CfgArticleGrade.data.get( this.cfgArctile.gradeLineId ) ;\n        for( let i = 0 ; i < line.length ; ++i ) {\n            let cfgGradeItem = line[ i ] ;\n            if( cfgGradeItem.unlocked.length == 0 && cfgGradeItem.buffIds.length == 0 ) continue ; \n\n            let isUnlocked = cfgGradeItem.grade <= grade ; \n            \n            if( isUnlocked == true ) {\n                // 判断是否解锁。因为未解锁的等级返回都是1级，需要再判断一次\n                isUnlocked = Account.ins.bag.unlocked.findIndex( ( e )=>{ return e == this.cfgArctile.id ; } ) != -1 ; \n            }\n\n            let pfItem = isUnlocked ? this.pfItem : this.pfItem2 ; \n\n            let root = instantiate( pfItem ) ;\n            root.active = true ; \n            root.setParent( this.content , false );\n\n            let item = new UiBagArticleDetailUnlockedItem() ; \n            this.items.push( item ) ; \n            item.init( root ) ;\n            item.cfgGradeItem = cfgGradeItem ; \n            item.isUnlocked = isUnlocked ; \n            item.refresh() ; \n\n        } // end for\n\n        if( grade == line.length ) {\n            // 到达了最高级\n            this.detail.btnList.btnUpgrade.root.active = false ; \n        }\n\n    }\n\n    public pfItem : Node ; \n    public pfItem2 : Node ; \n\n}\n\nexport class UiBagArticleDetailUnlockedItem {\n\n    public isUnlocked = true ; \n    public cfgGradeItem : CfgArticleGradeItem = null ;\n\n    public root : Node ; \n\n    public txt : RichText ; \n\n    public icon = new UiBagArticleDetailUnlockedItemIcon() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.txt = this.root.getComponentInChildren( RichText ) ; \n\n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ; \n\n\n    }\n\n    public refresh() {\n\n        let buffId : string = null ; \n        if( this.cfgGradeItem.unlocked.length > 0 ) {\n            buffId = this.cfgGradeItem.unlocked[ 0 ] ; \n        }\n        else {\n            // 显示天生能力，杂交\n            buffId = this.cfgGradeItem.buffIds.find( ( e )=>{ return e.indexOf( \"MergeEnable\" ) != -1 ; } ) ; \n        }\n        if( buffId == null ) return ; \n\n        let str = BuffString.getDescription( buffId ) ;\n\n        if( this.isUnlocked ) {\n            // 加粗体\n            str = \"<outline color=black width=4><b>\" + str + \"</b></outline>\" ;\n        }\n        else {\n            let str2 = \"<color=#AFFBFA>Lv.{1}解锁：</color>\".replace( \"{1}\" , this.cfgGradeItem.grade.toString() ) ;\n            str = \"<outline color=black width=4><b>\" + str2 + str + \"</b></outline>\" ;\n        }\n\n        this.txt.string = str ; \n\n        this.icon.refresh( buffId ) ; \n\n\n    }\n\n}\n\n// 图标\nclass UiBagArticleDetailUnlockedItemIcon {\n\n    public root : Node ; \n\n    public iconBgList = Array< Node >() ;\n    public icon : Sprite ; \n    private iconSize : Size ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = node.getChildByPath( \"val\" ).getComponent( Sprite ) ;\n        this.iconSize = this.icon.getComponent( UITransform ).contentSize.clone() ;\n\n        for( let i = 1 ; ; i++ ) {\n\n            let key = \"bg\" + i ;\n            let t = this.root.getChildByPath( key ) ; \n            if( t == null ) break ;\n            this.iconBgList.push( t ) ; \n\n        } // end for\n\n    }\n\n    public refresh( buffId : string ) {\n\n        // 图标\n        let spr = PfMgrIconBuff.ins.getIconById( buffId ) ;\n        this.icon.spriteFrame = spr.spriteFrame ; \n\n        // 设置图标Size。去掉透明区域的大小比例，会最大化显示\n        NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n\n        // 技能品质。底板显示\n        let cfgBuffItem = CfgBuff.data.get( buffId ) ;\n        for( let t of this.iconBgList ){ t.active = false } ;\n        let idx = cfgBuffItem.grade - 1 ; \n        if( this.iconBgList.length <= idx ) return ; \n        this.iconBgList[ idx ].active = true ; \n\n\n\n    }\n\n    \n\n}","import { Input, Label, Node, randomRangeInt } from \"cc\";\nimport { UiTray } from \"./UiTray\";\nimport { BagTrayAricleGen } from \"../../World/2.Td/Bag/BagTrayAricleGen\";\nimport { Ad } from \"../../../Common/Ad/Ad\";\nimport { Player } from \"../../World/2.Td/Player/Player\";\n\n// 底部按钮\nexport class UiBagBottom {\n\n    public static ins : UiBagBottom = null ;\n\n    public root : Node ; \n\n    // 开战\n    public btnStart : Node ; \n\n    // 刷新\n    public btnRefresh : Node ; \n\n    // 必出2级\n    public btnRefreshGrade2 : Node ; \n\n    // 获取格子扩展\n    public btnGetGridExpand : UiBtnGetGridExpand ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.btnStart = this.root.getChildByPath( \"BtnList/btnStart\" ) ;\n        this.btnStart.on( Input.EventType.TOUCH_END , this.onClick_Start , this ) ; \n\n        this.btnRefresh = this.root.getChildByPath( \"BtnList/btnRefresh\" ) ;\n        // this.btnRefresh.on( Input.EventType.TOUCH_END , this.onClick_Refresh , this ) ; \n\n        this.btnRefreshGrade2 = this.root.getChildByPath( \"BtnList/btnRefreshGrade2\" ) ;\n        this.btnRefreshGrade2.on( Input.EventType.TOUCH_END , this.onClick_btnRefreshGrade2 , this ) ; \n\n        this.btnGetGridExpand = new UiBtnGetGridExpand() ; \n        this.btnGetGridExpand.init( this.root.getChildByPath( \"btnGetGridExpand\" ) ) ;\n\n    }\n\n\n\n    public show() {\n        this.root.active = true ; \n        this.showAllBtns( true ) ; \n    }\n\n    public hide() {\n        this.root.active = false ; \n    }\n\n\n    // 隐藏所有的按钮\n    public showAllBtns( val : boolean = true ) {\n\n        this.btnStart.active = val ; \n        this.btnRefresh.active = val ; \n        this.btnRefreshGrade2.active = val ; \n        this.btnGetGridExpand.root.active = val ; \n\n    }\n\n    private onClick_Start() {\n\n    }\n\n    private onClick_Refresh() {\n\n\n    }\n\n\n    private onClick_btnRefreshGrade2() {\n\n        Ad.ins.rewardShow( ()=>{\n\n            BagTrayAricleGen.ins.genGrade2() ; \n            this.refreshGrade2Count++ ;\n            if( this.refreshGrade2Count >= 2 ) {\n                this.btnRefreshGrade2.active = false ; \n            }\n\n        } ) ;\n\n    }\n\n    private refreshGrade2Count = 0 ; \n\n}\n\n// 获取格子扩展物 \nexport class UiBtnGetGridExpand {\n\n    public root : Node ; \n\n    public count : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick_btnGetGridExpand , this ) ; \n\n        this.count = this.root.getChildByPath( \"Count\" ).getComponent( Label ) ;\n        this.count.string = \"x3\" ;\n\n        this.refresh() ; \n\n    }\n\n    private refresh() {\n\n        let count = Player.ins.getGridExpandCount ; \n        if( count <= 0 ) {\n            this.root.destroy() ; \n            return ; \n        }\n        this.count.string = \"x\" + count ;\n\n    }\n\n    private onClick_btnGetGridExpand() {\n\n        Ad.ins.rewardShow( ()=> {\n\n            // 随机格子\n            let list = [ \"BagExpand_H2\" , \"BagExpand_V2\" ] ; \n            let id = list[ randomRangeInt( 0 , list.length ) ] ;\n\n            UiTray.ins.addArticleById( id , 2 ) ;\n\n            Player.ins.getGridExpandCount-- ; \n            this.refresh() ; \n\n        } ) ; \n\n    }\n\n}","import { Node, Vec2 } from \"cc\";\nimport { BagArticle } from \"../Article/BagArticle\";\n\n// 背包单元格\nexport class UiBagCell {\n\n    // 是否是可用的，解锁的\n    public unlocked = false ; \n\n    // 坐标\n    public coord : Vec2 ; \n\n    // 占用的物品\n    public article: BagArticle = null ; \n\n\n    public root : Node ; \n\n    public bg : Node ; \n\n    // 可放置提示\n    public hintPlaceable : Node ; \n\n    // 可被扩展的\n    public hintExpandable : Node ; \n\n    public init( root : Node ) {\n\n        this.root = root ; \n\n        this.bg = root.getChildByPath( \"bg\" ) ;\n\n        this.hintPlaceable = root.getChildByPath( \"HintPlaceable\" ) ;\n        this.hintPlaceable.active = false ; \n\n        this.hintExpandable = root.getChildByPath( \"HintExpandable\" ) ;\n        this.hintExpandable.active = false ; \n\n    }\n\n}","import { Size } from \"cc\";\n\n// 背包UI配置\nexport class UiBagCfg {\n\n    public static ins : UiBagCfg = null ; \n\n    // 单元格大小。用于 绘制、计算放置位置 等、\n    public cellSize : Size = null ; \n\n}","import { Input, instantiate, Label, Node, Vec3 } from \"cc\";\nimport { UiBagItem } from \"./UiBagItem\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { UiBagArticleDetail } from \"./ArticleDetail/UiBagArticleDetail\";\nimport { UiMain } from \"../Main/UiMain\";\nimport { UiBagPrefab } from \"./UiBagPrefab\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\nimport { UiHybridGuide } from \"../Popup/UiHybridGuide\";\nimport { CfgGeneral } from \"../../../Common/Cfg/CfgGeneral\";\nimport { Lang } from \"../../../Common/Misc/Lang\";\n\n// 上阵的\nexport class UiBagDeploy {\n\n    public root : Node ; \n\n    public items = new Array< UiBagItem >() ;\n\n    public count : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.count = this.root.getChildByPath( \"Title/Count\" ).getComponent( Label ) ; \n\n        this.list = this.root.getChildByPath( \"List\" ) ; \n\n        let btnHybridGuide = this.root.getChildByPath( \"btnHybridGuide\" ) ;\n        btnHybridGuide.on( Input.EventType.TOUCH_END , ()=>{\n            UiHybridGuide.create( UiMain.ins.root ).show() ;\n        } ) ;\n\n        this.refresh() ; \n\n    }\n\n    public refresh() {\n\n        this.items.splice( 0 , this.items.length ) ; \n        this.list.removeAllChildren() ; \n\n        // let list = [ \"001_1\" , \"010_1\" , \"013_1\" ] ;\n        let list = Account.ins.bag.deploy ; \n\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let id = list[ i ] ; \n\n            // 品质对应的预制条目\n            let q = CfgArticleMgr.data.get( id ).quality ; \n            let pf = UiBagPrefab.ins.items[ q - 1 ] ; \n            let uiItem = new UiBagItem() ; \n            this.items.push( uiItem ) ;\n            uiItem.init( instantiate( pf ) ) ;\n            uiItem.root.active = true ; \n            uiItem.root.setParent( this.list , false ) ;\n            uiItem.articleId = id ;\n            uiItem.refresh() ; \n\n            uiItem.root.on( Input.EventType.TOUCH_END , ()=>{\n                this.onClick_Item( uiItem ) ;\n            } ) ;\n\n        } // end for\n        \n        // 显示空位\n        for( let i = list.length ; i < 8 ; ++i ) {\n\n            let empty = instantiate( UiBagPrefab.ins.itemEmpty ) ; \n            empty.setParent( this.list , false ) ;\n\n            let isUnlocked = Account.ins.bag.deployCellUnlocked.has( i ) ; \n\n            let locked = empty.getChildByPath( \"Locked\" ) ; \n\n            if( isUnlocked == true ) {\n                locked.active = false ; \n            }\n            else {\n                locked.active = true ; \n\n                let txt = locked.getComponentInChildren( Label ) ; \n                let levelIdx = CfgGeneral.ins.bagDeployCellUnlocked.get( i ) ; \n                txt.string = Lang.get( \"Home_Bag_UnlockByMainLevel\" ).replace( \"{1}\" , levelIdx.toString() ) ;\n\n            }\n\n            \n\n        }\n\n        this.count.string = list.length + \"/8\" ;\n\n        SoundBtnClickSetter.exe( this.root ) ;\n\n    }\n\n    private onClick_Item( uiItem : UiBagItem ) {\n\n        let uiDetail = UiBagArticleDetail.create( UiMain.ins.root ) ;\n        uiDetail.articleId = uiItem.articleId ; \n        uiDetail.name.string = uiItem.name.string ; \n        uiDetail.refresh() ; \n        uiDetail.show() ; \n        uiDetail.btnList.setShowModeAsDeploy() ; \n\n        let item = uiDetail.root.getChildByPath( \"Item\" ) ; \n        let itemRoot = instantiate( uiItem.root ) ;\n        itemRoot.scale = new Vec3( 1.2 , 1.2 , 1.2 ) ; \n        itemRoot.setParent( item.parent , false ) ;\n        itemRoot.position = item.position ; \n        item.destroy() ; \n        let uiItem2 = new UiBagItem() ; \n        uiDetail.item = uiItem2 ; \n        uiItem2.init( itemRoot ) ; \n        uiItem2.name.node.active = false ; \n        uiItem2.articleId = uiItem.articleId ; \n        uiItem2.refresh() ; \n        \n\n    }\n\n    private list : Node ; \n\n}\n\n","import { Input, Node, tween, Vec3 } from \"cc\";\nimport { BagArticleGridPlace } from \"../Article/BagArticleGridPlace\";\nimport { GridModeTransition } from \"../Grid/GridModeTransition\";\nimport { GridTraverse } from \"../Grid/GridTraverse\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { CellExpand } from \"../Grid/CellExpand\";\nimport { UiTray } from \"./UiTray\";\nimport { UiToast } from \"../../../Common/Ui/UiToast\";\nimport { UiMain } from \"../../Ui/Main/UiMain\";\nimport { Lang } from \"../../../Common/Misc/Lang\";\nimport { UiBagTouch } from \"../Touch/UiBagTouch\";\n\n// 背包扩展操作\nexport class UiBagExpandOp {\n\n    public static ins = new UiBagExpandOp() ;\n\n    public root : Node ; \n\n    public btnOK : Node ; \n\n    public prompt : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.root.active = true ; \n\n        this.btnOK = this.root.getChildByPath( \"btnOK\" ) ;\n        // this.btnOK.active = false ; \n        this.btnOK.on( Input.EventType.TOUCH_END , this.onClick_OK , this ) ; \n\n        this.prompt = this.root.getChildByPath( \"Prompt\" ) ;\n        tween( this.prompt ).sequence(\n            tween( this.prompt ).to( 0.9 , { scale : new Vec3( 1.2 , 1.2 , 1.2 ) } ) , \n            tween( this.prompt ).to( 0.9 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } ) , \n        ).repeatForever().start() ;\n\n\n    }\n\n    public show() {\n        this.root.active = true ; \n    }\n\n    public hide() {\n        this.root.active = false ; \n    }\n\n    private onClick_OK() {\n\n        GirdExpandCtrl.exe() ; \n\n        UiBagTouch.ins.limit.clear() ; \n\n    }\n\n\n}\n\n// 网格扩展控制\nexport class GirdExpandCtrl {\n\n    // 执行扩展\n    public static exe() {\n\n        this.exe2() ; \n\n    }\n\n    private static exe1() {\n\n        GridTraverse.exe( ( cell )=>{\n\n            let a = cell.article ;\n            if( a == null ) return ; \n\n            if( a.isBagExpand == false ) return ;\n\n            for( let cell of a.cells ) {\n                cell.unlocked = true ; \n\n                cell.bg.active = true ; \n                cell.hintPlaceable.active = false ; \n                cell.hintExpandable.active = false ; \n\n            }\n\n            a.view.root.destroy() ; \n            BagArticleGridPlace.unbind( a ) ;\n\n        } ) ;\n\n        // 退出扩展模式\n        GridModeTransition.toNormal() ; \n\n    }\n\n    private static exe2() {\n\n        GridTraverse.exe( ( cell )=>{\n\n            let a = cell.article ;\n            if( a == null ) return ; \n\n            if( a.isBagExpand == false ) return ;\n\n            if( this.isNextToUnlocked( a ) == true ) {\n                this.articleToUnlocked( a ) ;\n            }\n            else {\n                // 退回到托盘\n                BagArticleGridPlace.unbind( a ) ;\n                UiTray.ins.insertArticle( a ) ; \n\n                UiToast.show( UiMain.ins.root , Lang.get( \"Game_Prompt_CannotPlaceBagExpand\" ) ) ; \n            }\n\n        } ) ;\n\n        // 退出扩展模式\n        GridModeTransition.toNormal() ; \n\n    }\n\n    // 物件转换成解锁单元格\n    private static articleToUnlocked( a : BagArticle ) {\n\n        for( let cell of a.cells ) {\n            cell.unlocked = true ; \n\n            cell.bg.active = true ; \n            cell.hintPlaceable.active = false ; \n            cell.hintExpandable.active = false ; \n\n        }\n\n        a.view.root.destroy() ; \n        BagArticleGridPlace.unbind( a ) ;\n\n    }\n\n    // 物件是否紧靠着解锁单元格\n    private static isNextToUnlocked( a : BagArticle ) : boolean {\n\n        for( let cell of a.cells ) {\n            let list = CellExpand.exe4( cell.coord ) ; \n            let idx = list.findIndex( ( e )=>{ return e.unlocked == true } ) ;\n            if( idx != -1 ) {\n                return true ; \n            }\n\n        } // end for\n\n        return false ; \n\n    }\n\n\n}","import { find, Node, Size, size, Tween, tween, UITransform, Vec2, Vec3 } from \"cc\";\nimport { BagGridDraw as BagGridDraw } from \"./BagGridDraw\";\nimport { UiBagGridBg } from \"./UiBagGridBg\";\nimport { Player } from \"../../World/2.Td/Player/Player\";\nimport { GridTraverse } from \"./GridTraverse\";\nimport { UiBagCell } from \"./UiBagCell\";\nimport { UiEffectFade } from \"../../../SL/Cocos/Ui/UiEffect\";\nimport { UiBagCfg } from \"../Main/UiBagCfg\";\nimport { BagArticle } from \"../Article/BagArticle\";\n\n\n// 背包网格\nexport class UiBagGrid {\n\n    public static ins = new UiBagGrid() ; \n\n    public root : Node ; \n\n    // 网格大小\n    public gridSize = new Size( 5 , 7 ) ;\n\n    // 网格\n    public grid = new Array< Array< UiBagCell > >() ;\n\n    // 单元格预制\n    public cellPf : Node ; \n\n    // 原先的位置\n    public posOrig : Vec3 ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.posOrig = this.root.position.clone() ; \n\n        this.cellPf = find( \"Cell\" , node ) ; \n\n        UiBagCfg.ins = new UiBagCfg() ; \n        UiBagCfg.ins.cellSize = this.cellPf.getComponent( UITransform ).contentSize ; \n\n        this.initGrid() ; \n\n        BagGridDraw.exe() ; \n\n        UiBagGridBg.ins.init( this.root.getChildByPath( \"bg\" ) ) ; \n\n    }\n\n    // 初始化网格\n    public initGrid() {\n\n        // 初始化数据结构\n        let size = this.gridSize ; \n        let grid = this.grid ;\n        for( let yCoord = 0 ; yCoord < size.height ; ++yCoord ) {\n\n            let row = new Array< UiBagCell >() ;\n            grid.push( row ) ;\n\n            for( let xCoord = 0 ; xCoord < size.width ; ++xCoord ) {\n\n                let cell = new UiBagCell() ; \n                row.push( cell ) ;\n                cell.unlocked = false ; \n                cell.coord = new Vec2( xCoord , yCoord ) ; \n\n            } // end for\n\n        } // end for\n\n\n        // 设置已经解锁的\n        for( let coord of Player.ins.bag.cells ) {\n            let cell = grid[ coord.y ][ coord.x ] ;\n            cell.unlocked = true ; \n        }\n\n\n    }\n\n    public getCell( coord : Vec2 ) : UiBagCell {\n\n        // 验证坐标是否合法\n        if( coord.x < 0 || coord.y < 0 || \n            coord.x >= this.gridSize.width || coord.y >= this.gridSize.height ) { \n            return null ; \n        }\n\n        return this.grid[ coord.y ][ coord.x ] ; \n\n    }\n\n    // 显示可扩展的\n    public showExpandable() {\n\n        // if( this.showMode == 2 ) return ; \n        // this.showMode = 2 ;\n\n        // 背景扩展\n        UiBagGridBg.ins.entiretyAnim( 0.2 ) ; \n\n        tween( this.root ).delay( 0.2 ).call( ()=>{\n\n            GridTraverse.exe( ( cell : UiBagCell )=>{ \n\n                if( cell.unlocked == false ) {\n                    cell.root.active = true ; \n                    cell.bg.active = false ; \n                    cell.hintExpandable.active = true ; \n                    UiEffectFade.fade( cell.hintExpandable , 0.2 , 0 , 255 ) ;\n                }\n                // cell.hintPlaceable.active = true ; \n\n            } ) ; \n\n        } ).start() ;\n\n        // 物件透明\n        GridTraverse.exe( ( cell : UiBagCell )=>{\n            let a = cell.article ; \n            if( a == null ) return ; \n            UiEffectFade.fade( a.view.root , 0.4 , 255 , 255 * 0.5 ) ; \n\n        } ) ;\n\n    }\n\n    // 显示普通形态\n    public showNormal() {\n\n        // if( this.showMode == 1 ) return ; \n        // this.showMode = 1 ;\n\n        // 停止之前的显示\n        Tween.stopAllByTarget( this.root ) ;\n\n        GridTraverse.exe( ( cell : UiBagCell )=>{ \n\n            if( cell.unlocked == false ) {\n                // 未解锁的\n                cell.root.active = false ; \n            }\n            else {\n                // 解锁的\n                cell.root.active = true ; \n                cell.bg.active = true ; \n                cell.hintExpandable.active = false ; \n                cell.hintPlaceable.active = false ; \n            }\n            // cell.hintPlaceable.active = true ; \n\n            // 物件恢复正常显示\n            let a = cell.article ;\n            if( a != null ) {\n                UiEffectFade.fade( a.view.root , 0.4 , 255 * 0.5 , 255 ) ;\n            }\n\n        } ) ; \n\n        UiBagGridBg.ins.unlockedAnim( 0.2 ) ; \n\n    }\n\n    // 位置对其到背景中心\n    public alignBgCenter( duration = 0.2 ) {\n\n        let pos1 = UiBagGridBg.ins.rect.center ; \n        let offset = new Vec3( pos1.x , pos1.y ) ; \n        let pos = this.posOrig.clone().subtract( offset ) ;\n\n        if( duration == 0 ) {\n            this.root.position = pos ; \n        }\n        else {\n            tween( this.root ).to( duration , { position : pos } ).start() ;\n        }\n        \n\n    }\n\n    // 显示模式\n    private showMode = 1 ; \n}\n\n\n\n\n\n\n\n\n\n","import { math, Node, Rect, size, Size, Tween, tween, UITransform, Vec2, Vec3, Widget } from \"cc\";\nimport { UiBagGrid } from \"./UiBagGrid\";\nimport { GridHelper } from \"./GridHelper\";\nimport { TweenHelper } from \"../../../Common/Misc/TweenHelper\";\n\n// 网格背景\nexport class UiBagGridBg {\n\n    public static ins = new UiBagGridBg() ;\n\n    public rect : Rect ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n    }\n\n    // 包围整体\n    public entirety( duration = 0 ) {\n\n        let rect = GridHelper.getBoundingRectEntirety() ; \n        this.setBg( rect , duration ) ; \n\n    }\n\n    public entiretyAnim( duration = 0.5 ) {\n        this.entirety( duration ) ;\n    }\n\n    // 包围解锁的\n    public unlocked( duration = 0 ) {\n\n        let rect = GridHelper.getBoundingRectUnlocked() ; \n        this.setBg( rect , duration ) ; \n\n    }\n\n    public unlockedAnim( duration = 0.5 ) {\n        this.unlocked( duration ) ;\n    }\n\n    // 设置背景 用包围矩形\n    private setBg( rect : Rect , duration = 0 ) {\n\n        this.rect = rect ; \n\n        let pos = new Vec3( rect.center.x , rect.center.y ) ; \n        let uitrans = this.root.getComponent( UITransform ) ;\n        if( duration == 0 ) {\n            // 直接设置\n            this.root.position = pos ; \n            this.setBgChildrenAlignMode( Widget.AlignMode.ALWAYS ) ;\n            uitrans.setContentSize( rect.size ) ;\n            this.setBgChildrenAlignMode( Widget.AlignMode.ON_WINDOW_RESIZE ) ;\n            \n        }\n        else {\n            // 动画渐变\n\n            this.setBgChildrenAlignMode( Widget.AlignMode.ALWAYS ) ;\n            TweenHelper.contentSize( uitrans , rect.size , duration ) ; \n\n            Tween.stopAllByTarget( this.root ) ;\n            tween( this.root ).to( duration , { position : pos } ).call( ()=>{\n                // console.log( \"测试回调\" ) ; \n                this.setBgChildrenAlignMode( Widget.AlignMode.ON_WINDOW_RESIZE ) ;\n            } ).start() ;\n            \n            \n        }\n\n    }\n\n    private setBgChildrenAlignMode( mode = Widget.AlignMode.ON_WINDOW_RESIZE ) {\n        let list = this.root.getComponentsInChildren( Widget ) ;\n        for( let w of list ) {\n            w.alignMode = mode ; \n        }\n    }\n\n}\n\n","import { instantiate, Label, Node, Size, Sprite, Tween, tween, UITransform, Vec3 } from \"cc\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { NodeSizeFit } from \"../../../SL/Cocos/Ui/NodeSizeFit\";\nimport { ArticleString } from \"../../../Common/String/ArticleString\";\nimport { CfgArticle, CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { UiBagPrefab } from \"./UiBagPrefab\";\nimport { BagArticleGradeHelper } from \"../../../Game/Bag/Article/BagArticleGradeHelper\";\n\nexport class UiBagItem {\n\n    public articleId : string ; \n\n    public root : Node ; \n\n    // 名字\n    public name : Label ; \n\n    // 图标\n    public icon : Sprite ; \n\n    // 等级\n    public grade : Label ; \n\n    // 背包形状\n    public shape : Node ; \n\n    public updateFragment : UiBagItemUpgradeFragment ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n\n        this.icon = this.root.getChildByPath( \"Icon\" ).getComponent( Sprite ) ; \n\n        this.grade = this.root.getChildByPath( \"Grade/val\" ).getComponent( Label ) ; \n\n        this.shape = this.root.getChildByPath( \"Shape\" ) ; \n\n        let node2 = this.root.getChildByPath( \"Fragment\" ) ; \n        if( node2 != null ) {\n            this.updateFragment = new UiBagItemUpgradeFragment() ; \n            this.updateFragment.init( node2 );\n        }\n\n\n    }\n\n    public refresh() {\n\n        // 名字\n        this.name.string = ArticleString.getName( this.articleId ) ;  \n\n        // 图标\n        let pf = PfMgrBagArticle.getPf( this.articleId ) ;\n        this.icon.spriteFrame = pf.getChildByPath( \"Main\" ).getComponent( Sprite ).spriteFrame ; \n        NodeSizeFit.set( this.icon.node , this.icon.spriteFrame.originalSize ) ;\n        \n        // 等级\n        let cfg = CfgArticleMgr.data.get( this.articleId ) ; \n        let n = 1 ;\n        if( Account.ins.bag.grade.has( cfg.gradeLineId ) == true ) {\n            n = Account.ins.bag.grade.get( cfg.gradeLineId ) ; \n        }\n        this.grade.string = \"等级\" + n.toString() ; \n\n        // 形状\n        let pfShape = UiBagPrefab.ins.root.getChildByPath( \"Shape/\" + cfg.bagShapeId ) ; \n        if( pfShape != null )  {\n\n            let node = instantiate( pfShape ) ; \n            node.name = \"Shape\" ; \n            node.setParent( this.shape , false ) ;\n            node.position = Vec3.ZERO ; \n\n        }\n\n        if( this.updateFragment != null ) {\n            this.updateFragment.articleId = this.articleId ; \n            this.updateFragment.refresh() ; \n        }\n\n    }\n\n}\n\n// 升级所需碎片\nexport class UiBagItemUpgradeFragment {\n\n    public articleId : string ; \n\n    public root : Node ; \n\n    // 进度条\n    public bar : Sprite ; \n\n    // 拥有个数\n    public count : Label ; \n\n    public icon : Node ; \n\n    // 可升级标志\n    public upgradeable : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.bar = this.root.getChildByPath( \"bar\" ).getComponent( Sprite ) ; \n        this.bar.fillRange = 0 ;\n\n        this.count = this.root.getChildByPath( \"val\" ).getComponent( Label ) ;\n        this.count.string = \"0/0\" ; \n\n        this.upgradeable = this.root.getChildByPath( \"Upgradeable\" ) ; \n        this.upgradeable.active = false ; \n\n        this.icon = this.root.getChildByPath( \"Icon\" ) ; \n        \n\n    }\n\n    public refresh() {\n \n        let cfgGradeItem = BagArticleGradeHelper.getCfgCurrent( this.articleId ) ;\n\n        // 个数数字\n        let n = Account.ins.items.get( cfgGradeItem.upgrade.itemId ) ; \n        if( n == null ) { n = 0 ; }\n        this.count.string = n + \"/\" + cfgGradeItem.upgrade.itemCount ; \n        \n        // 进度条\n        this.bar.fillRange = n / cfgGradeItem.upgrade.itemCount ; \n\n        if( n >= cfgGradeItem.upgrade.itemCount ) {\n            // 可升级\n            this.upgradeable.active = true ; \n            this.playAnimUpgradeable() ; \n        }\n        else {\n            this.upgradeable.active = false ; \n            // this.icon.active = true ; \n        }\n\n    }\n\n    // 播放动画\n    public playAnimUpgradeable() {\n\n        let node = this.upgradeable ; \n\n        if( node[ \"tween\" ] == true ) { return ; }\n        node[ \"tween\" ] = true ; \n\n        Tween.stopAllByTarget( node ) ; \n\n        let pos1 = node.position.clone().add3f( 0 , 10 , 0 ) ; \n        let pos2 = node.position.clone().add3f( 0 , -10 , 0 ) ; \n        tween( node ).sequence(\n            tween( node ).to( 0.5 , { position : pos1 } ) , \n            tween( node ).to( 0.5 , { position : pos2 } ) , \n        ).repeatForever().start() ;         \n\n    }\n\n}","import { Label, Node, Sprite } from \"cc\";\nimport { UiBagItem } from \"./UiBagItem\";\nimport { CfgArticleUnlock } from \"../../../Common/Cfg/CfgArticleUnlock\";\n\n// 锁定的背包项\nexport class UiBagItemLocked extends UiBagItem {\n\n    // 解锁信息\n    public unlockInfo : Label ; \n\n    public override init( node : Node ) : void {\n\n        super.init( node ) ; \n\n        this.unlockInfo = this.root.getChildByPath( \"UnlockInfo\" ).getComponent( Label ) ;\n\n    }\n\n    public override refresh() : void {\n        super.refresh() ;\n\n        // 形状设置灰色\n        let shape = this.shape.getChildByPath( \"Shape\" ) ; \n        for( let node of shape.children ) {\n            node.getComponent( Sprite ).grayscale = true ; \n            \n        }\n\n        this.refreshUnlockInfo() ; \n\n    }\n\n    public refreshUnlockInfo() {\n\n        // 通过关卡解锁\n        let cfgArticleUnlockItem = CfgArticleUnlock.data.get( this.articleId ) ; \n        if( cfgArticleUnlockItem != null ) {\n\n            let str = \"通过章节{1}解锁\" ; \n            str = str.replace( \"{1}\" , cfgArticleUnlockItem.levelIdx.toString() ) ; \n            this.unlockInfo.string = str ; \n\n            return ;\n\n\n        }\n\n    }\n\n    \n}","import { Input, instantiate, Node, Sprite, Vec3 } from \"cc\";\nimport { UiBagItem } from \"./UiBagItem\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { UiBagPrefab } from \"./UiBagPrefab\";\nimport { UiBagArticleDetail } from \"./ArticleDetail/UiBagArticleDetail\";\nimport { UiMain } from \"../Main/UiMain\";\nimport { CfgGeneral } from \"../../../Common/Cfg/CfgGeneral\";\nimport { UiBagItemLocked } from \"./UiBagItemLocked\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\n\n// 已获得的。显示的是 已经获得的，并且未上阵的。\nexport class UiBagLocked {\n\n    public root : Node ; \n\n    public items = new Array< UiBagItem >() ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        // this.list = this.root.getChildByPath( \"List\" ) ; \n        \n\n        this.refresh() ; \n\n    }\n\n    public refresh() {\n\n        this.items.splice( 0 , this.items.length ) ; \n        this.root.removeAllChildren() ; \n        \n        let all = CfgGeneral.ins.BagAllArticleIds.slice() ; \n\n        // 剔除 获得的\n        let unlocked = Account.ins.bag.unlocked ; \n        let list = all.filter( item => !unlocked.includes(item) ) ;\n        // 剔除 上阵的\n        let deploy = Account.ins.bag.deploy ; \n        list = list.filter( item => !deploy.includes(item) )\n\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let uiItem = new UiBagItemLocked() ; \n            this.items.push( uiItem ) ;\n            uiItem.init( instantiate( UiBagPrefab.ins.itemLocked ) ) ;\n            uiItem.root.active = true ; \n            uiItem.root.setParent( this.root , false ) ;\n            uiItem.articleId = list[ i ] ;\n            uiItem.refresh() ; \n\n            uiItem.root.on( Input.EventType.TOUCH_END , ()=>{\n                this.onClick_Item( uiItem ) ;\n            } ) ;\n\n        } // end for\n\n        SoundBtnClickSetter.exe( this.root ) ;\n        \n    }\n\n    private onClick_Item( uiItem : UiBagItemLocked ) {\n\n        let uiDetail = UiBagArticleDetail.create( UiMain.ins.root ) ;\n        uiDetail.articleId = uiItem.articleId ; \n        uiDetail.name.string = uiItem.name.string ; \n        uiDetail.refresh() ; \n        uiDetail.show() ; \n        uiDetail.btnList.setShowModeAsUnlocked() ; \n\n        let item = uiDetail.root.getChildByPath( \"Item\" ) ; \n        let itemRoot = instantiate( uiItem.root ) ;\n        itemRoot.scale = new Vec3( 1.2 , 1.2 , 1.2 ) ; \n        itemRoot.setParent( item.parent , false ) ;\n        itemRoot.position = item.position ; \n        item.destroy() ; \n        let uiItem2 = new UiBagItem() ; \n        uiDetail.item = uiItem2 ; \n        uiItem2.init( itemRoot ) ; \n        uiItem2.name.node.active = false ; \n        uiItem2.articleId = uiItem.articleId ; \n        uiItem2.refresh() ; \n\n        // 不显示按钮，显示解锁条件\n        uiDetail.btnList.root.active = false ; \n        uiDetail.unlockedInfo.node.active = true ; \n        uiDetail.unlockedInfo.string = uiItem.unlockInfo.string ;\n\n    }\n\n}","import { Node } from \"cc\";\n\nexport class UiBagPrefab {\n\n    public static ins : UiBagPrefab = null ; \n\n    public root : Node ; \n\n    // 品质1-4\n    // public item1 : Node ; \n    // public item2 : Node ; \n    // public item3 : Node ; \n    // public item4 : Node ; \n    public items = new Array< Node >() ;\n\n    public itemLocked : Node ; \n\n    public itemEmpty : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        for( let i = 1 ; i <=4 ; ++i ) {\n            let node = this.root.getChildByPath( \"Item\" + i ) ;\n            this.items.push( node ) ;\n        }\n\n        // this.item1 = this.root.getChildByPath( \"Item1\" ) ;\n        // this.item2 = this.root.getChildByPath( \"Item2\" ) ;\n        // this.item3 = this.root.getChildByPath( \"Item3\" ) ;\n        // this.item4 = this.root.getChildByPath( \"Item4\" ) ;\n        this.itemLocked = this.root.getChildByPath( \"ItemLocked\" ) ;\n\n        this.itemEmpty = this.root.getChildByPath( \"ItemEmpty\" ) ;\n\n    }\n\n\n\n}","import { Node } from \"cc\";\n\nexport class UiBagReplace {\n\n    public root : Node ; \n\n    public item : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.item = this.root.getChildByPath( \"Item\" ) ;\n\n    }\n\n}","import { EventTouch, Input, instantiate, Node, UIOpacity, UITransform, Vec2, Vec3 } from \"cc\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { HitTest } from \"./HitTest\";\nimport { GridHint } from \"../Grid/GridHint\";\nimport { GestureClick } from \"./GestureArticleInfo\";\nimport { GridModeTransition } from \"../Grid/GridModeTransition\";\nimport { UiMain } from \"../../Ui/Main/UiMain\";\nimport { BagArticleGridPlaceByPos } from \"../Article/BagArticleGridPlaceByPos\";\nimport { MergeHybridHint, MergeHybridHintMgr } from \"../Merge/MergeHybridHint\";\nimport { MergeHint } from \"../Merge/MergeHint\";\nimport { TowerAuraHint } from \"./AuraHint\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\nimport { UiDialog } from \"../../../Common/Ui/UiDialog\";\nimport { Ad } from \"../../../Common/Ad/Ad\";\nimport { UiArticleDetail } from \"../ArticleDetail/UiArticleDetail\";\n\n// 触摸\nexport class UiBagTouch {\n\n    public static ins : UiBagTouch = null ; \n\n    // 在即将选中物品，返回值 false 取消选择。\n    public onBeforeArticleSelect : ( article : BagArticle )=>boolean = null ; \n\n    // 放置之前。返回值 false 终止操作\n    public onBeforeArticlePlace : ( article : BagArticle )=>boolean = null ; \n\n    // 放置完成\n    public onCompleteArticlePlace : ( article : BagArticle )=>void = null ; \n\n\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.root.on( Input.EventType.TOUCH_START , this.onTouchStart , this ) ;\n        this.root.on( Input.EventType.TOUCH_MOVE , this.onTouchMove , this ) ;\n        this.root.on( Input.EventType.TOUCH_END , this.onTouchEnd , this ) ;\n        this.root.on( Input.EventType.TOUCH_CANCEL , this.onTouchEnd , this ) ;\n\n        MergeHybridHintMgr.ins = new MergeHybridHintMgr() ; \n\n    }\n\n    private onTouchStart( event : EventTouch ) {\n\n        let pos = event.getUILocation() ;\n\n        let article = HitTest.hit( pos ) ;\n        if( article == null ) {\n            return ;\n        }\n\n        if( this.onBeforeArticleSelect != null ) {\n            if( this.onBeforeArticleSelect( article ) == false ) return ; \n        }\n\n        // 操作限制\n        if( this.limit.article != null ) {\n            if( this.limit.article != article ) return ; \n        }\n\n        if( article.isBagExpand == true ) {\n            GridModeTransition.toExpandable() ; \n            this.limit.limit( article ) ;\n        }\n\n        this.gestureClick.rest() ;\n        this.gestureClick.start( pos ) ; \n\n        this.articleSel = article ; \n\n        // 在最上层显示\n        if( article.view.root.parent == UiTray.ins.root ) {\n            // 在托盘上的\n            article.view.root.setSiblingIndex( 999 ) ;\n        }\n        else {\n            // 在网格中的\n            article.view.root.setParent( WorldNode.ins.layer2 , true ) ; \n        }\n\n        MergeHybridHintMgr.ins.clearAllLines() ; \n\n        MergeHybridHintMgr.ins.hideShape( article ) ; \n\n        MergeHint.mergeable( article ) ;\n\n    }\n\n    private onTouchMove( event : EventTouch ) {\n\n        if( this.articleSel == null ) return ; \n\n        // 移动\n        let pos = event.getUILocation() ; \n        let pos2 = new Vec3( pos.x , pos.y ) ;\n        this.articleSel.view.root.worldPosition = pos2 ; \n\n        // 清除提示\n        GridHint.hintPlaceableClear() ; \n        // 匹配网格单元格\n        let cells = BagArticleGridPlaceByPos.getCellsPlace( this.articleSel ) ;\n        if( cells != null ) {\n            // 可放置\n            GridHint.hintPlaceableShow( cells ) ;\n\n        }\n\n        // 光环影响提示\n        this.towerAuraHint.exe( this.articleSel , cells ) ; \n\n        this.gestureClick.move( pos ) ;\n\n    }\n\n    private onTouchEnd( event : EventTouch ) {\n\n        if( this.articleSel == null ) return ; \n\n        // 如论什么情况，选中的最终都要释放\n        let articleSel = this.articleSel ; \n        this.articleSel = null ;\n\n        if( articleSel.view.adTag != null ) {\n            // 广告解锁\n            this.adGet( articleSel ) ;\n            return ; \n        }\n\n        if( this.onBeforeArticlePlace?.( articleSel ) == false ) {\n            return ; \n        } \n\n        this.articlePlace( articleSel ) ; \n\n        this.onCompleteArticlePlace?.( articleSel ) ; \n\n    }\n\n    // 放置物件\n    private articlePlace( articleSel : BagArticle ) {\n\n        if( this.gestureClick.getVal() ) {\n            this.showArticleInfo( articleSel ) ; \n        }\n\n        BagArticleGridPlaceByPos.exe( articleSel ) ; \n\n        MergeHybridHintMgr.ins.exe() ; \n\n        this.towerAuraHint.place( ) ; \n\n        MergeHint.restore( ) ;\n\n    }\n\n    // 物件返回托盘\n    private articleGotoTray( articleSel : BagArticle ) {\n\n        UiTray.ins.insertArticle( articleSel ) ; \n        \n        // 清除可放置提示\n        GridHint.hintPlaceableClear() ; \n\n        MergeHybridHintMgr.ins.exe() ; \n\n        // 清除光环提示\n        this.towerAuraHint.clear( ) ; \n\n        MergeHint.restore( ) ;\n\n    }\n\n    // 看广告获得物件\n    private adGet( articleSel : BagArticle ) {\n\n        let uiDialog = UiDialog.create( UiMain.ins.root , \"是否观看视频获得该物品\" ) ; \n        uiDialog.btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.articleGotoTray( articleSel ) ; \n        } ) ; \n        uiDialog.btnOK.on( Input.EventType.TOUCH_END , ()=>{\n\n            let cancel = ()=>{\n                this.articleGotoTray( articleSel ) ; \n            } ;\n\n            let complete = ()=>{\n                articleSel.view.adTag.destroy() ; \n                articleSel.view.adTag = null ; \n\n                this.articlePlace( articleSel ) ; \n\n            } ;\n\n            Ad.ins.rewardShow( complete , cancel , cancel ) ;\n\n        } ) ;\n\n    }\n\n    private showArticleInfo( article : BagArticle ) {\n\n        // 扩展格子 不显示详情\n        if( article.isBagExpand ) return ; \n\n        let uiAricleDetail = UiArticleDetail.ins ;\n        uiAricleDetail.root.setParent( UiMain.ins.root );\n        uiAricleDetail.show() ; \n        uiAricleDetail.refresh( article ) ;\n\n    }\n\n    public limit = new TouchLimit() ; \n\n    // 当前操作的物品\n    private articleSel : BagArticle = null ; \n\n    private gestureClick = new GestureClick() ; \n    \n    public towerAuraHint = new TowerAuraHint() ;\n\n}\n\n\nexport class TouchLimit {\n\n    public limit( a : BagArticle ) {\n        this.article = a ;\n\n        // 托盘物品设置透明度\n        let list = UiTray.ins.articles ; \n        for( let a2 of list ) {\n            if( a2 == a ) continue ; \n            let opa = a2.view.root.getComponent( UIOpacity ) ;\n            if( opa == null ) {\n                opa = a2.view.root.addComponent( UIOpacity ) ;\n            }\n            opa.opacity = 150 ; \n        }\n\n    }\n\n    // 解除限制\n    public clear() {\n\n        this.article = null ; \n\n        let list = UiTray.ins.articles ; \n        for( let a2 of list ) {\n            let opa = a2.view.root.getComponent( UIOpacity ) ;\n            if( opa == null ) continue ; \n            opa.destroy() ; \n        }\n\n    }\n\n    public article : BagArticle = null ; \n\n}","import { Input, instantiate, Node, Vec3 } from \"cc\";\nimport { UiBagItem } from \"./UiBagItem\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { UiBagPrefab } from \"./UiBagPrefab\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { UiBagArticleDetail } from \"./ArticleDetail/UiBagArticleDetail\";\nimport { UiMain } from \"../Main/UiMain\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\n\n// 已获得的。显示的是 已经获得的，并且未上阵的。\nexport class UiBagUnlocked {\n\n    public root : Node ; \n\n    public items = new Array< UiBagItem >() ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        // this.list = this.root.getChildByPath( \"List\" ) ; \n        \n\n        this.refresh() ; \n\n    }\n\n    public refresh() {\n\n        this.items.splice( 0 , this.items.length ) ; \n\n        this.root.removeAllChildren() ; \n        \n        let ready = Account.ins.bag.deploy ; \n        let unlocked = Account.ins.bag.unlocked ; \n        let list = unlocked.filter( item => !ready.includes(item) ) ;\n\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let id = list[ i ] ; \n\n            let q = CfgArticleMgr.data.get( id ).quality ; \n            let pf = UiBagPrefab.ins.items[ q - 1 ] ; \n            \n            let uiItem = new UiBagItem() ; \n            this.items.push( uiItem ) ; \n            uiItem.init( instantiate( pf ) ) ;\n            uiItem.root.active = true ; \n            uiItem.root.setParent( this.root , false ) ;\n            uiItem.articleId = list[ i ] ;\n            uiItem.refresh() ; \n            \n            uiItem.root.on( Input.EventType.TOUCH_END , ()=>{\n                this.onClick_Item( uiItem ) ;\n            } ) ;\n\n        } // end for\n\n        SoundBtnClickSetter.exe( this.root ) ;\n        \n    }\n\n    private onClick_Item( uiItem : UiBagItem ) {\n\n        let uiDetail = UiBagArticleDetail.create( UiMain.ins.root ) ;\n        uiDetail.articleId = uiItem.articleId ; \n        uiDetail.name.string = uiItem.name.string ; \n        uiDetail.refresh() ; \n        uiDetail.show() ; \n        uiDetail.btnList.setShowModeAsUnlocked() ; \n\n        let item = uiDetail.root.getChildByPath( \"Item\" ) ; \n        let itemRoot = instantiate( uiItem.root ) ;\n        itemRoot.scale = new Vec3( 1.2 , 1.2 , 1.2 ) ; \n        itemRoot.setParent( item.parent , false ) ;\n        itemRoot.position = item.position ; \n        item.destroy() ; \n        let uiItem2 = new UiBagItem() ; \n        uiDetail.item = uiItem2 ; \n        uiItem2.init( itemRoot ) ; \n        uiItem2.name.node.active = false ; \n        uiItem2.articleId = uiItem.articleId ; \n        uiItem2.refresh() ; \n\n    }\n\n}","import { Node, Sprite } from \"cc\";\n\nexport class UiBar {\n\n    public root : Node ; \n\n    public bar : Sprite ; \n\n    public init( root : Node ) {\n        \n        this.root = root ;\n        this.bar = this.root.getChildByPath( \"bar\" ).getComponent( Sprite ) ;\n\n    }\n\n    // 设置进度\n    public setProgress( current : number , max : number ) {\n        this.bar.fillRange = current / max ;\n    }\n\n}","import { Node, Sprite, Tween, tween } from \"cc\";\n\n\n\n// 条。根节点本身就是 bar。\nexport class UiBar2 {\n\n    public root : Node ; \n\n    public bar : Sprite ; \n\n    public init( root : Node ) {\n        \n        this.root = root ;\n        this.bar = this.root.getComponent( Sprite ) ;\n\n    }\n\n    // 设置进度 0-1的值\n    public setProgress( val : number ) {\n        this.bar.fillRange = val ;\n    }\n\n    // 动画显示\n    public anim( val : number , duration : number ) {\n\n        Tween.stopAllByTarget( this.bar ) ; \n        tween( this.bar ).to( duration , { fillRange : val } ).start() ;\n\n    }\n\n}","import { director, Input, Node } from \"cc\";\nimport { UiLevel } from \"./UiLevel\";\nimport { UiLeft } from \"./UiLeft\";\nimport { UiRight } from \"./UiRight\";\n\n// 战斗页面\nexport class UiBattle {\n\n    public static ins = new UiBattle() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        UiLevel.ins = new UiLevel() ; \n        UiLevel.ins.init( this.root.getChildByPath( \"Level\" ) ) ;\n\n        UiLeft.ins.init(this.root.getChildByPath( \"Left\" ));\n\n        UiRight.ins.init(this.root.getChildByPath(\"Right\"));\n\n    }\n\n}","import { Node } from \"cc\";\r\n\r\n// 背景 用于表达品质\r\nexport class UiBgQuality {\r\n\r\n    public root : Node ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n    }\r\n\r\n    // 品质 从1开始。1最低级\r\n    public show( val : number ) {\r\n\r\n        let children = this.root.children ; \r\n        for( let child of children ) {\r\n            child.active = false ; \r\n        } // end for\r\n\r\n        let idx = val - 1 ; \r\n        if( children.length <= idx ) {\r\n            // 超出下标\r\n            console.log( \"UiBgQuality.show 超出下标\" ) ;\r\n            return ; \r\n        }\r\n        children[ idx ].active = true ; \r\n\r\n    }\r\n\r\n}","import { Node } from \"cc\";\nimport { UiTabHeaderBottom } from \"../../../SL/Cocos/Ui/UiTabHeader\";\nimport { UiBag } from \"../Bag/UiBag\";\nimport { UiBattle } from \"./Page/Battle/UiBattle\";\nimport { UiShop } from \"./Page/Shop/UiShop\";\nimport { Test1 } from \"./Page/Test1/Test1\";\nimport { Test2 } from \"./Page/Test2/Test2\";\n\n// Tab页 \nexport class UiBottomTabPage {\n\n    public static ins : UiBottomTabPage = null ; \n\n    public root : Node ; \n\n    public thb = new UiTabHeaderBottom() ; \n\n    // 各个页面的根节点\n    public page : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.initPage() ; \n\n        this.initTabHeader() ; \n\n        // 初始显示的页面\n        this.thb.show( \"Battle\" ) ; \n        UiBattle.ins.root.active = true ; \n\n    }\n\n    private initPage() {\n\n        this.page = this.root.getChildByPath( \"Page\" ) ;\n\n        UiBag.create() ;\n        UiBag.ins.root.setParent( this.page , false ) ; \n        UiBag.ins.root.active = false ; \n\n        UiBattle.ins.init( this.root.getChildByPath( \"Page/Battle\" ) ) ;\n        UiBattle.ins.root.active = false ; \n        // console.log( \"UiBattle\" ) ;\n\n        UiShop.ins.init( this.root.getChildByPath( \"Page/Shop\" ) ) ; \n        UiShop.ins.root.active = false ; \n        // console.log( \"UiShop\" ) ;\n\n        Test1.ins.init( this.root.getChildByPath( \"Page/Test001\" ) ) ; \n        Test1.ins.root.active = false ; \n        // console.log( \"Test1\" ) ;\n\n        Test2.ins.init( this.root.getChildByPath( \"Page/Test002\" ) ) ; \n        Test2.ins.root.active = false ; \n        // console.log( \"Test2\" ) ;\n\n    }\n\n    private initTabHeader() {\n\n        let thb = this.thb = new UiTabHeaderBottom() ; \n        thb.init( this.root.getChildByPath( \"BottomTabHeader\" ) ) ; \n        thb.onSelectChange = ( item )=>{\n\n            let name = item.root.name ;\n            switch( name ) {\n\n                case \"Battle\" : {\n                    // hideAll() ; \n                    UiBattle.ins.root.active = true ; \n                    UiBattle.ins.root.setSiblingIndex( 10 ) ; \n                }\n                break ; \n\n                case \"Bag\" : {\n                    // hideAll() ; \n                    UiBag.ins.root.active = true ; \n                    UiBag.ins.root.setSiblingIndex( 10 ) ; \n                    // UiBag.ins.show();\n                }   \n                break ;\n\n                case \"Shop\" : {\n                    // hideAll() ; \n                    UiShop.ins.root.active = true ; \n                    UiShop.ins.root.setSiblingIndex( 10 ) ; \n                }\n                break ; \n\n                case \"Test001\" : {\n                    this.hideAllPages() ; \n                    Test1.ins.root.active = true ; \n                }\n                break ; \n\n                case \"Test002\" : {\n                    this.hideAllPages() ; \n                    Test2.ins.root.active = true ; \n                }\n                break ; \n            }\n\n        } ;\n\n    }\n\n    private hideAllPages() {\n\n        UiBattle.ins.root.active = false ; \n        UiBag.ins.root.active = false ; \n        UiShop.ins.root.active = false ; \n        Test1.ins.root.active = false ; \n        Test2.ins.root.active = false ; \n\n    }\n\n}","import { Input, input, instantiate, Node, Prefab, Rect, resources, RichText, Size, UITransform } from \"cc\";\n\n\nexport class UiBubble {\n\n    public static pf : Prefab ; \n\n    public static loadAndCreate( cb : ( ui : UiBubble )=>void ) {\n\n        resources.load( \"Common/Ui/Bubble\" , Prefab , ( err , data )=>{\n\n            let ui = new UiBubble() ; \n            ui.init( instantiate( data ) ) ;\n            // ui.root.setParent( parent ) ;\n            // ui.txt.string = str ; \n            cb?.( ui ) ;\n\n        } ) ;\n\n    }\n\n    public static create() : UiBubble {\n\n        let ui = new UiBubble() ; \n        ui.init( instantiate( this.pf ) ) ;\n        return ui ; \n\n    }\n\n    public root : Node ;\n\n    public bg : Node ; \n\n    public txt : RichText ; \n\n    public init( node : Node )  {\n\n        this.root = node ; \n\n        this.bg = this.root.getChildByPath( \"bg\" ) ;\n        this.bgTrans = this.bg.getComponent( UITransform ) ; \n\n        this.txt = this.root.getComponentInChildren( RichText ) ; \n        this.txtTrans = this.txt.getComponent( UITransform ) ; \n\n        this.hDiff = this.bgTrans.contentSize.height - this.txtTrans.contentSize.height ; \n\n    }\n\n    // 点击就销毁\n    public clickToDestroy() {\n\n        this.root.getComponent( UITransform ).setContentSize( new Size( 5000 , 5000 ) ) ;\n        this.root.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n        } ) ;\n\n    }\n\n    public setString( str : string ) {\n\n        this.txt.string = str ; \n        this.refreshSize() ; \n\n    }\n\n    // 刷新高度\n    public refreshSize() {\n\n        let h = this.txtTrans.contentSize.height + this.hDiff ;\n        let size = this.bgTrans.contentSize.clone() ;\n        size.height = h ; \n        this.bgTrans.contentSize = size ; \n\n    }\n\n    private bgTrans : UITransform ; \n    private txtTrans : UITransform ; \n\n    private hDiff : number ; \n\n}","import { Input, input, instantiate, Node, Prefab, Sprite, resources, RichText, Size, UITransform, _decorator,Component } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('UiBubbleWithIcon')\nexport class UiBubbleWithIcon  extends Component {\n\n    public static pf : Prefab ; \n\n    public static loadAndCreate( cb : ( ui : UiBubbleWithIcon )=>void ) {\n\n        resources.load( \"Common/Ui/BubbleWithIcon\" , Prefab , ( err , data )=>{\n\n            let ui = new UiBubbleWithIcon() ; \n            ui.init( instantiate( data ) ) ;\n           \n            // ui.root.setParent( parent ) ;\n            // ui.txt.string = str ; \n            cb?.( ui ) ;\n\n        } ) ;\n\n    }\n\n\n    public root : Node ;\n\n    public bg : Node ; \n\n    @property(Sprite)\n    public sp: Sprite\n\n    @property(RichText)\n    public txt : RichText ; \n\n    public init( node : Node )  {\n        this.root = node ; \n\n    }\n\n    public set_text(template: string, values: any[]|undefined = undefined) {\n        let tp = '<outline color=#000000 width=5><color=#00ff00>{}</color></outline>'\n        \n        let outer = '<b><outline color=#000000 width=5><color=#ffffff>{}</color></outline></b>'\n\n        let result = template\n        if (values) {\n            result = values.reduce((acc, value) => {\n                let p = tp.replace('{}', value)\n                return acc.replace('{}', p)\n                \n            }, template);\n        }\n        \n        result = outer.replace('{}', result)\n        this.txt.string = result;\n    }\n\n\n\n}","import { instantiate } from \"cc\";\r\nimport { UiPopupBase } from \"../../../../Common/Ui/UiPopupBase\";\r\nimport { Node } from \"cc\";\r\nimport { Label } from \"cc\";\r\nimport { Lang } from \"../../../../Common/Misc/Lang\";\r\nimport { UiItemList } from \"../../../../Common/Item/UiItemList\";\r\nimport { ItemData } from \"../../../../Common/Item/ItemData\";\r\nimport { Sprite } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { DailyCheckinData, DailyCheckinDataPersist } from \"./DailyCheckinData\";\r\nimport { UiGet } from \"../UiGet\";\r\nimport { CfgDailyCheckin } from \"./CfgDailyCheckin\";\r\nimport { UiMain } from \"../../Main/UiMain\";\r\nimport { ItemGet } from \"../../../../Common/Item/ItemGet\";\r\nimport { UiStamina } from \"../../Main/Margin/UiStamina\";\r\nimport { UiMoney001 } from \"../../Main/Margin/UiMoney001\";\r\nimport { UiMoney002 } from \"../../Main/Margin/UiMoney002\";\r\nimport { Ad } from \"db://assets/Script/Common/Ad/Ad\";\r\n\r\nexport class UiDailyCheckin extends UiPopupBase {\r\n\r\n    public static create( parent : Node ) : UiDailyCheckin {\r\n\r\n        let root = instantiate( this.pf ) ;\r\n        let ui = new UiDailyCheckin() ;\r\n        ui.init( root ) ; \r\n        ui.root.setParent( parent , false ) ; \r\n        return ui ; \r\n\r\n    }\r\n\r\n    public items = new Array< UiDailyCheckinItem >() ; \r\n\r\n    public btnGet : Node ; \r\n    public btnGetAd : Node ;\r\n    public claimedToday : Node ; \r\n\r\n    public override init( node : Node ) {\r\n\r\n        super.init( node ) ;\r\n\r\n        // 领取按钮 \r\n\r\n        this.btnGet = this.root.getChildByPath( \"BtnList/btnGet\" ) ;\r\n        this.btnGet.on( Input.EventType.TOUCH_END , this.onClick_Get , this ) ;\r\n\r\n        this.btnGetAd = this.root.getChildByPath( \"BtnList/btnGetAd\" ) ;\r\n        this.btnGetAd.active = false ; \r\n        this.btnGetAd.on( Input.EventType.TOUCH_END , this.onClick_GetAd , this ) ;\r\n\r\n        this.claimedToday = this.root.getChildByPath( \"BtnList/ClaimedToday\" ) ;\r\n        this.claimedToday.active = false ; \r\n\r\n\r\n        let list = this.root.getChildByPath( \"List\" ) ;\r\n        for( let i = 0 ; i < list.children.length ; ++i ) {\r\n\r\n            let uiItem = new UiDailyCheckinItem() ; \r\n            uiItem.init( list.children[ i ] ) ;\r\n            this.items.push( uiItem ) ; \r\n\r\n            // 显示天数\r\n            uiItem.title.string = Lang.get( \"DailyCheckin_DayX\" ).replace( \"{1}\" , ( i + 1 ).toString() ) ;\r\n\r\n            // 显示奖励图标\r\n            let rewardData = CfgDailyCheckin.data[ i ] ; \r\n            uiItem.refreshReward( rewardData ) ; \r\n\r\n        } // end for\r\n\r\n        this.refresh() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        this.refreshBtn() ; \r\n\r\n        this.refreshListClaimState() ; \r\n\r\n    }\r\n\r\n    // 刷新按钮状态\r\n    public refreshBtn() {\r\n\r\n        this.btnGet.active = false ; \r\n        this.btnGetAd.active = false ; \r\n        this.claimedToday.active = false ; \r\n\r\n        let isTodayCheckin = DailyCheckinData.ins.isTodayCheckin() ; \r\n        if( isTodayCheckin ) {\r\n            this.claimedToday.active = true ; \r\n            return ; \r\n        }\r\n\r\n        this.btnGet.active = true ; \r\n        this.btnGetAd.active = true ; \r\n\r\n    }\r\n\r\n    // 刷新列表领取状态\r\n    public refreshListClaimState() {\r\n\r\n        let isTodayCheckin = DailyCheckinData.ins.isTodayCheckin() ; \r\n        let n1 = 0 , n2 = 0 ; \r\n        if( isTodayCheckin ) {\r\n            // 今日已签\r\n            n1 = DailyCheckinData.ins.count % 7 ;\r\n            if( n1 == 0 ) {\r\n                n1 = 7 ;\r\n            }\r\n            n2 = n1 ; \r\n\r\n        }\r\n        else {\r\n            // 今日未签\r\n            n1 = DailyCheckinData.ins.count % 7 ; \r\n            n2 = n1 + 1 ; \r\n\r\n            // 可签部分\r\n            this.items[ n1 ].setClaimable() ; \r\n\r\n        }\r\n\r\n        // 已签的部分\r\n        for( let i = 0 ; i < n1 ; ++i ) {\r\n            this.items[ i ].setClaimed() ; \r\n        } // end for\r\n\r\n        // 不能签的部分\r\n        for( let i = n2 ; i < this.items.length ; ++i ) {\r\n            this.items[ i ].setNotClaimable() ; \r\n        }\r\n\r\n    }\r\n\r\n    // 领取\r\n    private onClick_Get() {\r\n        this.get( 1 ) ; \r\n    }\r\n\r\n    private onClick_GetAd() {\r\n\r\n        let onSuccess = ()=>{\r\n            this.get( 2 ) ; \r\n        } ;\r\n        Ad.ins.rewardShow( onSuccess ) ;\r\n\r\n    }\r\n\r\n    // 得到物品\r\n    private get( multiple : number = 1 ) {\r\n\r\n        let item = this.items.find( ( e )=>{ return e.claimType == ClaimType.Claimable ; } ) ; \r\n        if( item == null ) return ; \r\n        let rewardData = item.rewardData ; \r\n        if( multiple > 1 ) {\r\n            // 2倍以上。复制一个列表处理，不影响之前的数据。\r\n            rewardData = rewardData.slice() ;\r\n            for( let i = 0 ; i < rewardData.length ; ++i ) {\r\n                rewardData[ i ].count *= 2 ; \r\n            } // end for\r\n\r\n        }\r\n\r\n        // 显示领取\r\n        let uiGet = UiGet.create( UiMain.ins.root ) ; \r\n        uiGet.show() ; \r\n        uiGet.itemList.refresh( rewardData ) ; \r\n        // 实际到账\r\n        ItemGet.addList( rewardData ) ; \r\n        \r\n        DailyCheckinData.ins.checkin() ; \r\n        DailyCheckinDataPersist.save() ; \r\n\r\n        // 刷新列表领取状态\r\n        this.refresh() ; \r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport class UiDailyCheckinItem {\r\n\r\n    // 奖励数据\r\n    public rewardData : Array< ItemData > = null ; \r\n\r\n    public claimType = ClaimType.None ; \r\n\r\n    public root : Node ; \r\n\r\n    public title : Label ; \r\n\r\n    public claimableFlag : Node ; \r\n\r\n    public claimedFlag : Node ; \r\n\r\n    public tick : Node ; \r\n\r\n    public list = new UiItemList() ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.title = this.root.getChildByPath( \"Title\" ).getComponent( Label ) ; \r\n\r\n        this.claimableFlag = this.root.getChildByPath( \"ClaimableFlag\" ) ; \r\n\r\n        this.claimedFlag = this.root.getChildByPath( \"ClaimedFlag\" ) ; \r\n\r\n        this.tick = this.root.getChildByPath( \"Tick\" ) ; \r\n        this.tick.active = false ; \r\n\r\n        this.list.init( this.root.getChildByPath( \"Reward\" ) ) ;\r\n\r\n\r\n    }\r\n\r\n    // 显示奖励数据\r\n    public refreshReward( data : Array< ItemData > ) {\r\n\r\n        this.rewardData = data ; \r\n        this.list.refresh( data ) ;\r\n\r\n    }\r\n\r\n    // 已领取\r\n    public setClaimed() {\r\n\r\n        this.claimType = ClaimType.Claimed ; \r\n\r\n        this.tick.active = true ; \r\n        this.claimedFlag.active = true ; \r\n        this.claimableFlag.active = false ; \r\n\r\n\r\n    }\r\n\r\n    // 可领取\r\n    public setClaimable() {\r\n\r\n        this.claimType = ClaimType.Claimable ; \r\n\r\n        this.tick.active = false ; \r\n        this.claimedFlag.active = false ; \r\n        this.claimableFlag.active = true ; \r\n\r\n\r\n    }\r\n\r\n    // 不可领取的\r\n    public setNotClaimable() {\r\n\r\n        this.claimType = ClaimType.NotClaimable ; \r\n\r\n        this.tick.active = false ; \r\n        this.claimedFlag.active = false ; \r\n        this.claimableFlag.active = false ; \r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nenum ClaimType {\r\n\r\n    None , \r\n\r\n    // 已领取\r\n    Claimed , \r\n\r\n    // 可领取\r\n    Claimable , \r\n\r\n    // 不可领取的\r\n    NotClaimable\r\n\r\n}","import { EditBox, find, Input, instantiate, Node, Prefab, resources, sys, Vec3 } from \"cc\";\nimport { UiTray } from \"../../Game/Bag/Main/UiTray\";\nimport { UiFeatureSel } from \"../../Game/Ui/Popup/FeatureSel/UiFeatureSel\";\nimport { UiMain } from \"../../Game/Ui/Main/UiMain\";\nimport { TowerMgr } from \"../../Game/World/1.Base/Tower/Entity/TowerMgr\";\nimport { WaveSettle } from \"../../Game/World/2.Td/Level/WaveSettle\";\nimport { LevelCtrl } from \"../../Game/World/2.Td/Level/LevelCtrl\";\nimport { WaveCtrl } from \"../../Game/World/2.Td/Level/WaveCtrl\";\nimport { RoleMgr } from \"../../Game/World/1.Base/Role/Base/RoleMgr\";\nimport { RoleGetDamage } from \"../../Game/World/1.Base/Role/Misc/RoleGetDamage\";\nimport { PlayerRole } from \"../../Game/World/2.Td/Player/PlayerRole\";\nimport { Account } from \"../Account/Account\";\nimport { CfgGeneral } from \"../Cfg/CfgGeneral\";\nimport { AccountPersist } from \"../Account/AccountPersist\";\nimport { CfgArticle, CfgArticleMgr } from \"../Cfg/CfgArticle\";\nimport { UiLevel } from \"../../Home/Ui/Main/Page/Battle/UiLevel\";\nimport { GameArg } from \"../../Game/Init/GameArg\";\nimport { SceneTransition } from \"./UiLoadingScene\";\nimport { GridTraverse } from \"../../Game/Bag/Grid/GridTraverse\";\nimport { GridModeTransition } from \"../../Game/Bag/Grid/GridModeTransition\";\nimport { EnemyGen } from \"../../Game/World/2.Td/Level/EnemyGen\";\nimport { BagTrayAricleGen } from \"../../Game/World/2.Td/Bag/BagTrayAricleGen\";\nimport { GameLose } from \"../../Game/World/2.Td/Flow/GameLose\";\nimport { EffectFactory } from \"../../Game/Bag/Merge/EffectFactory\";\nimport { UiStamina } from \"../../Home/Ui/Main/Margin/UiStamina\";\nimport { UiMoney001 } from \"../../Home/Ui/Main/Margin/UiMoney001\";\nimport { UiMoney002 } from \"../../Home/Ui/Main/Margin/UiMoney002\";\nimport { UiBag } from \"../../Home/Ui/Bag/UiBag\";\nimport { isValid } from \"cc\";\nimport { ArticleUnlockLevel } from \"../../Home/Misc/ArticleUnlockLevel\";\n\n\n\nexport class UiDebug {\n\n    public static loadAndCreateIns( ) {\n\n        if( UiDebug.ins != null ){\n\n            UiDebug.ins.root.active = true ; \n            return ;\n        } \n\n        resources.load( \"Common/Ui/Debug\" , Prefab , ( err , data )=>{\n\n            let root  = instantiate( data ) ; \n\n            let ui = new UiDebug() ; \n            ui.init( root ) ; \n            ui.root.setParent( find( \"Canvas\" ) ) ;\n\n            UiDebug.ins = ui ; \n\n            UiDebugPersist.load() ; \n\n        } ) ;\n\n\n    }\n\n    public static destroyIns() {\n        this.ins.root.destroy() ;\n        this.ins = null ; \n    }\n\n    public static ins : UiDebug = null ; \n\n    public root : Node ; \n\n    public content : Node ; \n\n    public GameTrayArticleGen : UiDebug_GameTrayArticleGen ; \n\n    public GameFeatureSel : UiDebug_GameFeatureSel ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnClose = this.root.getChildByPath( \"btnClose\" ) ;\n        btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n            UiDebug.ins = null ; \n\n        } ) ;\n\n        this.content = this.root.getChildByPath( \"sv/view/content\" ) ;\n\n        this.GameTrayArticleGen = new UiDebug_GameTrayArticleGen() ; \n        this.GameTrayArticleGen.init( this.content.getChildByPath( \"GameTrayArticleGen\" ) ) ; \n        \n        this.GameFeatureSel = new UiDebug_GameFeatureSel() ; \n        this.GameFeatureSel.init( this.content.getChildByPath( \"GameFeatureSel\" ) ) ;\n\n\n        let GameArticleInfo = new UiDebug_GameArticleInfo() ; \n        GameArticleInfo.init( this.content.getChildByPath( \"GameArticleInfo\" ) ) ; \n\n        new UiDebug_GameFlow().init( this.content.getChildByPath( \"GameFlow\" ) ) ;\n\n        new UiDebug_BagArticle().init( this.content.getChildByPath( \"BagArticle\" ) ) ;\n\n        new UiDebug_Level().init( this.content.getChildByPath( \"Level\" ) ) ; \n\n        new UiDebug_EnemyGen().init( this.content.getChildByPath( \"EnemyGen\" ) ) ; \n\n        new UiDebug_Economic().init( this.content.getChildByPath( \"Economic\" ) ) ; \n\n    }\n\n\n}\n\nclass UiDebugPersist {\n\n    public static save() {\n\n        let json = {} ; \n\n        let ui = UiDebug.ins ; \n\n        {\n\n            let jGameTrayArticleGen = {} ;\n            json[ \"GameTrayArticleGen\" ] = jGameTrayArticleGen ; \n    \n            let edList = Array< string >() ;\n            jGameTrayArticleGen[ \"edList\" ] = edList ; \n\n            for( let i = 0 ; i < ui.GameTrayArticleGen.edList.length ; ++i ) {\n                let ed = ui.GameTrayArticleGen.edList[ i ] ;\n                edList.push( ed.string ) ; \n            } // end for\n\n        }\n\n        let str = JSON.stringify( json );\n\n        sys.localStorage.setItem( \"UiDebug\" , str ) ;\n\n    }\n\n    public static load() {\n\n        let str = sys.localStorage.getItem( \"UiDebug\" ) ;\n        if( str == null || str == \"\" ) return ;\n\n        let json = JSON.parse( str ) ;\n\n        let ui = UiDebug.ins ; \n\n        let jGameTrayArticleGen = json[ \"GameTrayArticleGen\" ] ; \n        if( jGameTrayArticleGen )  {\n\n            let edList = jGameTrayArticleGen[ \"edList\" ] ; \n            for( let i = 0 ; i < edList.length && i < ui.GameTrayArticleGen.edList.length ; ++i ) {\n\n                ui.GameTrayArticleGen.edList[ i ].string = edList[ i ] ;\n\n            }\n\n        }\n\n    }\n\n}\n\nclass UiDebug_GameTrayArticleGen {\n\n    public root : Node ; \n\n    public edList = new Array<EditBox>() ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        for( let i = 1 ; i <= 5 ; ++i ) {\n\n            let eb = this.root.getChildByPath( \"EditBox-00\" + i )?.getComponent( EditBox ) ;\n            if( eb == null ) break ; \n\n            this.edList.push( eb ) ;\n\n        } // end for\n\n        let btnGen = this.root.getChildByPath( \"btnGen\" );\n        btnGen.on( Input.EventType.TOUCH_END , ()=>{\n\n            UiDebugPersist.save() ; \n\n            let strs = this.edList[ 0 ].string.split( /[, ]/ );\n\n            UiTray.ins.clear() ; \n\n            for( let i = 0 ; i < strs.length ; ++i ) {\n\n                let str = strs[ i ] ;\n\n                UiTray.ins.addArticleById( str ) ;\n\n            } // end for\n\n            \n        } ) ;\n\n        let btn = this.root.getChildByPath( \"btnAdTag\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            BagTrayAricleGen.ins.addAdTag() ; \n\n            \n        } ) ;\n\n        // 所有4级可以杂交的\n        // 003_4 009_4 004_4 018_4 012_4 013_4 014_4 016_4 017_4 019_4\n\n\n    }\n\n\n}\n\nclass UiDebug_GameFeatureSel {\n\n    public root : Node ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnShow = this.root.getChildByPath( \"btnShow\" );\n        btnShow.on( Input.EventType.TOUCH_END , ()=>{\n\n            let ui = UiFeatureSel.ins ; \n            ui.refresh() ; \n            ui.show() ; \n\n            UiDebug.ins.root.destroy() ;\n            UiDebug.ins = null ; \n\n        } );\n\n    }\n\n\n}\n\n\nclass UiDebug_GameArticleInfo {\n\n    public root : Node ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnShow = this.root.getChildByPath( \"btnShow\" );\n        btnShow.on( Input.EventType.TOUCH_END , ()=>{\n\n            let str = \"物件信息：\\n\" ;\n            for( let tower of TowerMgr.ins.data ) {\n\n                str += tower.article.cfg.id + \" Buff: \" ; \n\n                for( let buff of tower.buff.list ) {\n                    if( buff.cfg == null ) continue ; \n                    str += buff.cfg.id + \" \" ;\n                }\n\n                str += \"\\n\" ;\n            }\n\n            console.log( str ) ;\n\n        } );\n\n    }\n\n\n}\n\n\nclass UiDebug_GameFlow {\n\n    public root : Node ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btn = this.root.getChildByPath( \"btnWin\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            UiDebug.destroyIns() ; \n            \n            LevelCtrl.ins.currentWaveIdx = LevelCtrl.ins.levelData.waves.length ; \n            WaveSettle.exe() ; \n\n        } );\n\n        btn = this.root.getChildByPath( \"btnLose\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            UiDebug.destroyIns() ; \n            \n            GameLose.exe() ; \n\n        } );\n\n\n        btn = this.root.getChildByPath( \"btnWinWave\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            // 终止波控制器，死亡所有敌人\n\n            WaveCtrl.ins.idx = WaveCtrl.ins.data.items.length + 1 ; \n            WaveCtrl.ins.onComplete?.() ; \n           \n            for( let role of RoleMgr.ins.allEnemies ) {\n                role.life.hp.current = 0 ; \n            }\n\n            UiDebug.destroyIns() ; \n\n        } );\n\n\n        btn = this.root.getChildByPath( \"btnPlayerRoleGetDamage\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            // 终止波控制器，死亡所有敌人\n            RoleGetDamage.exe( PlayerRole.ins.main , 50 );\n\n        } );\n\n        btn = this.root.getChildByPath( \"btnGridMax\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            // 终止波控制器，死亡所有敌人\n            GridTraverse.exe( ( cell )=>{\n                cell.unlocked = true ; \n            } ) ;\n\n            \n            GridModeTransition.mode = 2 ; \n            GridModeTransition.toNormal() ; \n            \n\n        } );\n\n\n        \n\n    }\n\n\n}\n\nclass UiDebug_BagArticle {\n\n    public root : Node ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let edit = this.root.getChildByPath( \"EditBox\" ).getComponent( EditBox ) ;\n \n        let btn = this.root.getChildByPath( \"btnArticleGet\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let str = edit.string ;\n            let strs = str.split( /[, ]/ );\n\n            for( let str of strs ) {\n                if( Account.ins.bag.unlocked.indexOf( str ) != -1 ) continue ; \n                Account.ins.bag.unlocked.push( str ) ; \n            } // end for\n            AccountPersist.save() ; \n\n        } );\n\n        btn = this.root.getChildByPath( \"btnArticleGetAll\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let all = CfgGeneral.ins.BagAllArticleIds ;\n\n            Account.ins.bag.unlocked.splice( 0 , Account.ins.bag.unlocked.length ) ;\n            Account.ins.bag.unlocked.push( ... all ) ;\n            AccountPersist.save() ; \n\n        } );\n\n        btn = this.root.getChildByPath( \"btnArticleDefault\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            Account.ins.bag.unlocked.splice( 0 , Account.ins.bag.unlocked.length ) ;\n            Account.ins.bag.unlocked.push( ... CfgGeneral.ins.BagInitUnlockedIds ) ;\n\n            Account.ins.bag.deploy.splice( 0 , Account.ins.bag.deploy.length ) ;\n            Account.ins.bag.deploy.push( ... CfgGeneral.ins.BagInitDeployedIds ) ;\n            AccountPersist.save() ; \n\n        } );\n\n\n        btn = this.root.getChildByPath( \"btnSetGrade1\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            Account.ins.bag.unlocked.splice( 0 , Account.ins.bag.unlocked.length ) ;\n            Account.ins.bag.unlocked.push( ... CfgGeneral.ins.BagInitUnlockedIds ) ;\n\n            for( let id of Account.ins.bag.deploy ) {\n                let gId = CfgArticleMgr.data.get( id ).gradeLineId ;\n                Account.ins.bag.grade.set( gId , 1 ) ;\n            } \n\n        } );\n\n    }\n\n}\n\n\n\nclass UiDebug_Level {\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let edit = this.root.getChildByPath( \"EditBox\" ).getComponent( EditBox ) ;\n        edit.string = Account.ins.mainLevel.levelIdx.toString() ;\n\n        let btn = this.root.getChildByPath( \"btnSetCurrentLevelIdx\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let str = edit.string ;\n            let idx = Number( str )\n            Account.ins.mainLevel.levelIdx = idx ;\n            AccountPersist.save() ; \n\n            // 刷新界面\n            UiLevel.ins.setSelLevelIdx( idx ) ; \n            UiLevel.ins.refresh() ; \n\n            // 刷新背包页\n            if( isValid( UiBag.ins.root ) ) {\n\n                // 恢复未解锁的数据\n                Account.ins.bag.deployCellUnlocked.clear() ; \n                for( let i = 0 ; i < 8 ; ++i ) {\n                    let b = CfgGeneral.ins.bagDeployCellUnlocked.has( i ) ; \n                    if( b == false ) {\n                        Account.ins.bag.deployCellUnlocked.add( i ) ;\n                    }\n                } // end for\n\n                // 关卡解锁\n                ArticleUnlockLevel.exe() ; \n\n                UiBag.ins.refresh() ; \n\n            }\n\n        } );\n\n\n        let EditBoxLevelId = this.root.getChildByPath( \"EditBoxLevelId\" ).getComponent( EditBox ) ;\n\n        btn = this.root.getChildByPath( \"btnEnter\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let id = EditBoxLevelId.string ; \n            GameArg.ins.levelId = id ; \n            GameArg.ins.mainIdx = -1 ; \n    \n            SceneTransition.exe( \"Game\" ) ;\n\n        } );\n\n        // 波索引\n        let EditBoxWaveIdx = this.root.getChildByPath( \"EditBoxWaveIdx\" ).getComponent( EditBox ) ;\n        btn = this.root.getChildByPath( \"btnSetCurrentWaveIdx\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let idx = Number( EditBoxWaveIdx.string ) ; \n            Account.ins.mainLevel.waveIdx = idx ;\n            AccountPersist.save() ; \n    \n            // 刷新界面\n            UiLevel.ins.refresh() ; \n\n        } );\n\n        // 清除波奖励领取记录\n        btn = this.root.getChildByPath( \"btnClearWaveRewardRecord\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let idx = Number( EditBoxWaveIdx.string ) ; \n            Account.ins.waveReward.clear() ; \n            AccountPersist.save() ; \n    \n            // 刷新界面\n            UiLevel.ins.refresh() ; \n\n        } );\n\n    }\n\n}\n\nclass UiDebug_EnemyGen {\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let edit = this.root.getChildByPath( \"EditBox\" ).getComponent( EditBox ) ;\n\n        let btn = this.root.getChildByPath( \"btnGen\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let role = EnemyGen.genOne( edit.string ) ; \n\n            if( role.cfg.hpBarId == \"HpBarBoss\" ) {\n                let effect = EffectFactory.create( \"BossIncoming\" ) ; \n                effect.setParent( UiMain.ins.root , false ) ; \n                effect.position = Vec3.ZERO ; \n                \n            }\n\n        } );\n\n    }\n\n}\n\nclass UiDebug_Economic {\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.initStamina() ; \n\n        this.initMoney001() ; \n        this.initMoney002() ; \n\n    }\n\n    private initStamina() {\n\n        let ed = this.root.getChildByPath( \"Stamina/EditBox\" ).getComponent( EditBox ) ;\n        let btn = this.root.getChildByPath( \"Stamina/btnSet\" )\n\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n            let n = Number( ed.string ) ; \n            Account.ins.stamina.current = n ; \n            UiStamina.ins.refresh() ; \n\n        } ) ;\n\n    }\n\n    private initMoney001() {\n\n        let ed = this.root.getChildByPath( \"Money001/EditBox\" ).getComponent( EditBox ) ;\n        let btn = this.root.getChildByPath( \"Money001/btnSet\" )\n\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n            let n = Number( ed.string ) ; \n            Account.ins.money.money001 = n ; \n            UiMoney001.ins.refresh() ; \n            AccountPersist.save() ; \n        } ) ;\n\n    }\n\n\n    private initMoney002() {\n\n        let ed = this.root.getChildByPath( \"Money002/EditBox\" ).getComponent( EditBox ) ;\n        let btn = this.root.getChildByPath( \"Money002/btnSet\" )\n\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n            let n = Number( ed.string ) ; \n            Account.ins.money.money002 = n ; \n            UiMoney002.ins.refresh() ; \n            AccountPersist.save() ; \n        } ) ;\n\n    }\n\n\n}","import { Input, instantiate, Label, Node, Prefab } from \"cc\";\nimport { UiEffectScale } from \"../../SL/Cocos/Ui/UiEffect\";\nimport { SoundBtnClickSetter } from \"../Audio/SoundBtnClickSetter\";\n\nexport class UiDialog {\n\n    public static pf : Prefab ; \n\n    public static create( parent : Node , str : string = null ) : UiDialog {\n\n        let root = instantiate( this.pf ) ; \n        let ui = new UiDialog() ; \n        ui.init( root ) ;\n        ui.root.setParent( parent , false ) ; \n        ui.txt.string = str ; \n        return ui ; \n\n\n    }\n\n    public root : Node ;\n\n    public title : Label ; \n    public txt : Label ; \n    public btnOK : Node ; \n    public btnClose : Node ; \n\n    public init( node : Node )  {\n\n        this.root = node ; \n\n        this.btnClose = this.root.getChildByPath( \"btnClose\" ) ; \n        this.btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n        } ) ;\n\n        this.title = this.root.getChildByPath( \"Title\" ).getComponent( Label ) ; \n        this.title.string = \"\" ; \n\n        this.txt = this.root.getChildByPath( \"Text\" ).getComponent( Label ) ; \n        this.txt.string = \"\" ; \n\n        this.btnOK = this.root.getChildByPath( \"btnOK\" ) ; \n        this.btnOK.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n        } ) ;\n\n        SoundBtnClickSetter.exe( this.root ) ; \n\n    }\n\n    public show() {\n\n        UiEffectScale.show( this.root ) ; \n\n    }\n\n}","\nimport { find , Node, Tween, tween, UIOpacity, Vec3 } from \"cc\";\n\nexport class UiEffectFade {\n\n    // 开始显示。valStart 初始值 -1 不设置初始值\n    public static fade( node : Node , duration : number , valStart : number , valEnd : number , cb : ()=>void = null ) : void {\n\n        let opacity = node.getComponent( UIOpacity ) ;\n        if( opacity == null ) {\n            opacity = node.addComponent( UIOpacity ) ;\n        }\n\n        if( valStart >= 0 ) {\n            opacity.opacity = valStart ;\n        }\n        \n\n        let t = tween( opacity ).to( duration , { opacity : valEnd } ) ;\n        if( cb != null ) {\n            t.call( ()=>{ cb() ; } ) ; \n        }\n        t.start() ; \n\n    }\n\n    // public static fadeIn( node : Node , duration : number , val : number ): void {\n\n    //     let opacity = node.getComponent( UIOpacity ) ;\n    //     if( opacity == null ) {\n    //         opacity = node.addComponent( UIOpacity ) ;\n    //     }\n    //     opacity.opacity = 0 ;\n    //     tween( opacity ).to( duration , { opacity : val } ).start() ;\n\n    // }\n\n    // 开始消失\n    public static fadeOut(): void {\n\n        // let seq = cc.sequence(\n        //     cc.fadeTo(0.5, 0),\n        //     cc.callFunc(() => { this.node.active = false; }) ,\n        // );\n        // this.node.runAction(seq);\n    }\n\n}\n\nexport class UiEffectScale {\n\n    public static show( node : Node ) : void {\n\n        node.active = true ; \n        node.scale = new Vec3( 0.6 , 0.6 ) ; \n        tween( node )\n        .to( 0.2 , { scale : new Vec3( 1.1 , 1.1 , 1.1 ) } )\n        .to( 0.1 , { scale : new Vec3( 1 , 1 , 1 ) } )\n        .start()  ; \n\n    }\n\n}\n\n// 弹出\nexport class UiEffectPopup\n{\n    // 显示\n    public static show( node : Node ) : void \n    {\n        node.active = true ; \n        node.scale = new Vec3( 0.6 , 0.6 ) ; \n        tween( node )\n        .to( 0.2 , { scale : new Vec3( 1.1 , 1.1 , 1.1 ) } )\n        .to( 0.1 , { scale : new Vec3( 1 , 1 , 1 ) } )\n        .start()  ; \n\n        var opa = node.getComponent( UIOpacity ) ;\n        if( opa == null )\n        {\n            opa = node.addComponent( UIOpacity ) ;\n        }\n        opa.opacity = 0 ; \n        tween( opa ).to( 0.3 , { opacity : 255 } ).start() ; \n\n    }\n\n    // 隐藏\n    public static hide( node : Node ) : void \n    {\n        tween( node )\n        .to( 0.2 , { scale : new Vec3( 1.1 , 1.1 , 1.1 ) } )\n        .to( 0.1 , { scale : new Vec3( 0.6 , 0.6 , 0.6 ) } )\n        .start()  ; \n\n        var opa = node.getComponent( UIOpacity ) ;\n        if( opa == null )\n        {\n            opa = node.addComponent( UIOpacity ) ;\n        }\n        tween( opa ).to( 0.3 , { opacity : 0 } ).call( ()=>{ opa.opacity = 255 ; node.active = false ; } ).start() ; \n\n    }\n\n}","import { Input, instantiate, Label, Node, Size, Sprite, UITransform, Vec3 } from \"cc\";\nimport { Player } from \"../../../World/2.Td/Player/Player\";\nimport { CfgBuff, CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { UiBubble } from \"../../../../Common/Ui/UiBubble\";\nimport { UiMain } from \"../UiMain\";\nimport { BuffString } from \"../../../World/1.Base/Buff/BuffString\";\nimport { PfMgrIconBuff } from \"../../../../Common/PfMgr/PfMgrIconBuff\";\nimport { NodeSizeFit } from \"../../../../SL/Cocos/Ui/NodeSizeFit\";\n\n// 获得的特性\nexport class UiFeature {\n\n    public static ins : UiFeature ; \n\n    public root : Node ; \n\n    public content : Node ; \n\n    public items = new Array< UiFeatureItem >() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.root.active = true ; \n\n        this.content = this.root.getChildByPath( \"sv/view/content\" ) ;\n\n        // 预制\n        for( let i = 0 ; i < this.content.children.length ; ++i ) {\n            let pfItem = this.content.children[ i ] ;\n            this.pfItems.push( pfItem ) ;\n            pfItem.active = false ;\n        } // end for\n\n    }\n\n    public refresh() {\n\n        this.refresh2() ; \n\n    }\n\n    // 合并显示\n    public refresh2() {\n\n        this.clear() ; \n\n        let list = new Array< [ CfgBuffItem , number ] >() ;\n\n        // 统计同类个数 按照列表顺序\n        let buffList = Player.ins.buff.list ; \n        for( let i = 0 ; i < buffList.length ; ++i ) {\n\n            let buff = buffList[ i ] ;\n            let cfgBuffItem = buff.cfg ;\n\n            let item = list.find( ( e )=>{ return e[ 0 ].id == cfgBuffItem.id ; } ) ; \n            if( item == null ) {\n                item = [ cfgBuffItem , 1 ] ;\n                list.push( item ) ;\n            }\n            else {\n                item[ 1 ]++ ; \n            }\n\n        } // end for\n\n        // 显示\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let item = list[ i ] ;\n\n            let cfg = item[ 0 ] ; \n            let count = item[ 1 ] ;\n\n            let root = instantiate( this.pfItems[ cfg.grade - 1 ] ) ;\n            root.setParent( this.content , false ) ;\n            root.active = true ; \n\n            let uiItem = new UiFeatureItem() ; \n            uiItem.cfg = cfg ; \n            uiItem.init( root ) ; \n            this.items.push( uiItem ) ;\n            uiItem.refresh() ; \n            uiItem.refreshCount( count ) ; \n\n        } // end for\n\n\n    }\n\n    // 显示每一个Buff图标\n    public refresh1() {\n\n        this.clear() ; \n\n        let buffList = Player.ins.buff.list ; \n        for( let i = 0 ; i < buffList.length ; ++i ) {\n\n            let buff = buffList[ i ] ;\n\n            let grade = buff.cfg.grade ; \n\n            let root = instantiate( this.pfItems[ grade - 1 ] ) ;\n            root.setParent( this.content , false ) ;\n            root.active = true ; \n\n            let uiItem = new UiFeatureItem() ; \n            uiItem.cfg = buff.cfg ; \n            uiItem.init( root ) ; \n            this.items.push( uiItem ) ;\n            uiItem.refresh() ; \n\n        } // end for\n\n    }\n\n    public clear() {\n\n        for( let ui of this.items ) {\n            ui.root.destroy() ; \n        }\n        this.items.splice( 0 , this.items.length ) ; \n\n    }\n\n    private pfItems = Array< Node >() ;\n\n}\n\nexport class UiFeatureItem {\n\n    public cfg : CfgBuffItem ; \n\n    public root : Node ; \n\n    public icon : Sprite ; \n\n    public count : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = node.getChildByPath( \"Icon\" ).getComponent( Sprite ) ;\n        this.iconSize = this.icon.getComponent( UITransform ).contentSize.clone() ;\n\n        this.count = this.root.getChildByPath( \"Count\" ).getComponentInChildren( Label ) ;\n        this.count.node.parent.active = false ; \n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\n\n    }\n\n    private onClick() {\n\n        UiBubble.loadAndCreate( ( ui )=>{\n\n            ui.clickToDestroy() ; \n\n            let parent = UiMain.ins.root ; \n            let pos = this.root.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n            parent.getComponent( UITransform ).convertToNodeSpaceAR( pos , pos ) ;\n            pos.y += 80 ;\n\n            ui.root.setParent( parent , false ) ; \n\n            ui.root.position = pos ; \n            ui.setString( BuffString.getDescription( this.cfg.id ) ) ;\n            \n        } ) ;\n\n    }\n\n    public refresh() {\n\n        let buffId = this.cfg.id ; \n\n        // 图标\n        let spr = PfMgrIconBuff.ins.getIconById( buffId ) ;\n        this.icon.spriteFrame = spr.spriteFrame ; \n\n        // 去掉透明区域的大小比例，会最大化显示\n        NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n\n    }\n\n    public refreshCount( n : number ) {\n\n        this.count.node.parent.active = n > 1 ; \n\n        this.count.string = \"x \" + n ; \n\n    }\n\n    private iconSize : Size ; \n\n}","import { Input, instantiate, Label, Node, Prefab, RichText, Sprite, tween, Vec3 } from \"cc\";\nimport { GamePause } from \"../../../World/2.Td/Flow/GamePause\";\nimport { UiFeatureSelItemList } from \"./UiFeatureSelItemList\";\nimport { UiFeatureSelBtnList } from \"./UiFeatureSelBtnList\";\nimport { FrameCall } from \"../../../World/1.Base/Support/Misc/FrameCall\";\nimport { SoundBtnClickSetter } from \"../../../../Common/Audio/SoundBtnClickSetter\";\nimport { SeqScaleShow } from \"../../../../Common/Misc/SeqScaleShow\";\n\n// 特性选择\nexport class UiFeatureSel {\n\n    public static pf : Prefab ; \n\n    public static ins : UiFeatureSel = null ; \n\n    public static create( parent : Node ) : UiFeatureSel {\n\n        let ui = new UiFeatureSel() ; \n        ui.init( instantiate( this.pf ) ) ;\n\n        ui.root.setParent( parent , false ) ;\n\n        return ui ; \n\n    }\n\n    public root : Node ; \n\n    public title : Node ; \n\n    // 列表节点\n    public list : Node ; \n\n    // 条目列表\n    public itemList = new UiFeatureSelItemList() ; \n\n    // 按钮列表\n    public btnList = new UiFeatureSelBtnList() ; \n    \n    public prompt : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.title = this.root.getChildByPath( \"Title\" ) ;\n\n        this.prompt = this.root.getChildByPath( \"Prompt\" ) ;\n\n        this.btnList.featureSel = this ;\n        this.btnList.init( this.root.getChildByPath( \"BtnList\" ) ) ;\n\n        this.itemList.featureSel = this ; \n        this.itemList.init( this.root.getChildByPath( \"List\" ) ) ;\n\n        \n\n    }\n\n    public show() {\n\n        this.root.active = true ;\n\n        // 暂停游戏逻辑\n        GamePause.pause() ; \n\n        FrameCall.ins.once( ()=>{\n            this.showAnim() ; \n        } , 2 ) ;\n        \n\n    }\n\n    // 显示动画\n    public showAnim() {\n\n        let nodes = new Array< Node >() ; \n        for( let item of this.itemList.items ) {\n            nodes.push( item.root ) ; \n        }\n        nodes.push( this.btnList.root ) ; \n        nodes.push( this.prompt ) ; \n        SeqScaleShow.exe( nodes ) ; \n        \n    }\n\n    public refresh() {\n        \n        this.itemList.refresh() ; \n\n        this.showAnim() ; \n\n    }\n    \n\n}\n\n\n\n\n\n","import { Input, Node } from \"cc\";\nimport { UiFeatureSel } from \"./UiFeatureSel\";\nimport { GamePause } from \"../../../World/2.Td/Flow/GamePause\";\nimport { FeatureAcquire } from \"./FeatureAcquire\";\nimport { FeatureExtract } from \"./FeatureExtract\";\nimport { Ad } from \"../../../../Common/Ad/Ad\";\nimport { Vec3 } from \"cc\";\n\n// 按钮列表\nexport class UiFeatureSelBtnList {\n\n    public featureSel : UiFeatureSel = null ;\n\n\n    // 按钮\n    public root : Node ; \n\n    public btnRefresh : Node ; \n\n    public btnGetAll : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ;\n\n        this.btnRefresh = this.root.getChildByPath( \"btnRefresh\" ) ;\n        this.btnRefresh.on( Input.EventType.TOUCH_END , this.onClick_Refresh , this ) ; \n\n        this.btnGetAll = this.root.getChildByPath( \"btnGetAll\" ) ;\n        this.btnGetAll.on( Input.EventType.TOUCH_END , this.onClick_GetAll , this ) ; \n\n    }\n\n    // 换一批\n    private onClick_Refresh() {\n\n        let onSuccess = ()=>{\n            this.featureSel.refresh() ; \n        };\n\n        Ad.ins.rewardShow( onSuccess ) ; \n\n    }\n\n    private onClick_GetAll() {\n\n        let onSuccess = ()=>{\n\n            // this.FeatureSel.root.destroy() ; \n            this.featureSel.root.active = false ; \n\n            let ids = new Array< string >() ;\n            for( let uiItem of this.featureSel.itemList.items ) {\n                let id = uiItem.cfgItem.id ; \n                ids.push( id ) ; \n                FeatureExtract.countLimit( id ) ; \n            } // end for\n    \n            FeatureAcquire.exe( ids ) ; \n    \n            // 恢复游戏逻辑\n            GamePause.resume() ; \n        };\n\n        Ad.ins.rewardShow( onSuccess ) ; \n\n    }\n\n}\n","import { Input, Layout, Node, RichText, Size, Sprite, tween, UITransform, Vec3 } from \"cc\";\nimport { Lang } from \"../../../../Common/Misc/Lang\";\nimport { PfMgrIconBuff } from \"../../../../Common/PfMgr/PfMgrIconBuff\";\nimport { CfgFeatureItem } from \"../../../../Common/Cfg/CfgFeature\";\nimport { GamePause } from \"../../../World/2.Td/Flow/GamePause\";\nimport { UiFeatureSel } from \"./UiFeatureSel\";\nimport { FeatureAcquire } from \"./FeatureAcquire\";\nimport { BuffString } from \"../../../World/1.Base/Buff/BuffString\";\nimport { CfgBuff, CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { NodeSizeFit } from \"../../../../SL/Cocos/Ui/NodeSizeFit\";\nimport { UiBgQuality } from \"../../../../Common/Ui/UiBgQuality\";\nimport { Button } from \"cc\";\n\n// 条目\nexport class UiFeatureSelItem {\n\n    public grade = 1 ; \n\n    public featureSel : UiFeatureSel = null ; \n\n    public cfgItem : CfgFeatureItem ; \n\n    public root : Node ; \n\n    public icon : Sprite ; \n    private iconSize : Size ; \n    \n    public descr : RichText ; \n    \n    public bg = new UiBgQuality() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = this.root.getChildByPath( \"Icon/val\" ).getComponent( Sprite ) ; \n        this.iconSize = this.icon.getComponent( UITransform ).contentSize.clone() ;\n        \n\n        this.descr = this.root.getChildByPath( \"Descr\" ).getComponent( RichText ) ;\n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \n        \n        this.bg.init( this.root.getChildByPath( \"bg\" ) ) ;\n\n    }\n\n    public refresh( item : CfgBuffItem ) {\n\n        this.cfgItem = item ; \n\n        // 刷新图标\n        this.refreshIcon( item ) ; \n\n        // 刷新描述\n        this.refreshDescr( item ) ; \n\n        // 背景\n        this.bg.show( item.grade ) ;\n\n    }\n\n    private refreshIcon( item : CfgBuffItem ) {\n\n        // this.icon.node.active = false ; return ;\n\n        this.icon.node.active = true ; \n\n        // 刷新图标\n        let spr = PfMgrIconBuff.ins.getIconById( item.id ) ;\n        this.icon.spriteFrame = spr.spriteFrame ; \n        \n        // 设置图标Size。去掉透明区域的大小比例，会最大化显示\n        NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n        \n    }\n\n    private refreshDescr( item : CfgBuffItem ) {\n\n        let str = BuffString.getDescription( item.id ) ;\n        // 加粗体\n        str = \"<outline color=black width=4> <b>\" + str + \"</b> </outline>\" ;\n        this.descr.string = str ; \n\n    }\n\n\n    private onClick( ) {\n\n        // 防止按钮重复点击\n        let btn = this.root.getComponent( Button ) ; \n        if( btn.enabled == false ) return ; \n        btn.enabled = false ; \n\n        this.playAnimSel( ()=>{\n\n            // 关闭UI\n            // this.featureSel.root.destroy() ; \n            this.featureSel.root.active = false ; \n\n            // 恢复游戏逻辑\n            GamePause.resume() ; \n\n            FeatureAcquire.exe( [ this.cfgItem.id ] ) ;\n\n        } ) ;\n\n        \n    }\n\n    // 播放选择条目动画\n    private playAnimSel( onComplete : ()=>void ) {\n\n        this.featureSel.title.active = false ; \n        this.featureSel.btnList.root.active = false ; \n\n        // 关闭布局。为了保持条目的位置\n        this.featureSel.itemList.root.getComponent( Layout ).enabled = false ; \n\n        // 不显示其他的条目\n        for( let item of this.featureSel.itemList.items ) {\n            if( item == this ) { \n                continue ; \n            }\n            item.root.active = false ; \n        }\n\n        // 本身缩放\n        tween( this.root ).sequence(\n            tween( this.root ).to( 0.2 , { scale : new Vec3( 1.2 , 1.2 , 1.2 ) } ) , \n            tween( this.root ).to( 0.1 , { scale : new Vec3( 0 , 0 , 0 ) } ) , \n            tween( this.root ).call( ()=>{\n\n                onComplete?.() ;\n\n                // 关闭UI\n                // this.featureSel.root.destroy() ; \n                this.featureSel.root.active = false ; \n\n                // 暂停游戏逻辑\n                GamePause.resume() ; \n\n            } ) ,\n        ).start() ;\n\n    }\n    \n}","import { instantiate, Layout, Node } from \"cc\";\nimport { UiFeatureSelItem } from \"./UiFeatureSelItem\";\nimport { FeatureExtract } from \"./FeatureExtract\";\nimport { UiFeatureSel } from \"./UiFeatureSel\";\nimport { SoundBtnClickSetter } from \"../../../../Common/Audio/SoundBtnClickSetter\";\nimport { Button } from \"cc\";\n\n// 选择条目列表\nexport class UiFeatureSelItemList {\n\n    public featureSel : UiFeatureSel = null ; \n\n    public root : Node ; \n\n    public items = new Array< UiFeatureSelItem >() ;\n\n    private layout : Layout ; \n\n    private pfItem : Node = null ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.layout = this.root.getComponent( Layout ) ; \n\n        this.pfItem = this.root.getChildByName( \"Item\" ) ; \n\n        // 预先加入一个。利用好预制的条目\n        let uiItem = new UiFeatureSelItem() ; \n        uiItem.init( this.pfItem ) ;\n        this.items.push( uiItem ) ; \n\n    }\n\n    public refresh() {\n\n        let list = FeatureExtract.exe() ; \n\n        this.setItemCount( list.length ) ; \n        \n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let cfgItem = list[ i ] ;\n\n            let uiItem = this.items[ i ] ; \n            uiItem.featureSel = this.featureSel ; \n            uiItem.refresh( cfgItem ) ;\n            uiItem.root.setSiblingIndex( i ) ;\n\n            // 设置可以点击\n            uiItem.root.getComponent( Button ).enabled = true ; \n\n        } // end for\n\n        this.layout.enabled = true ; \n        this.layout.updateLayout( true ) ; \n\n        SoundBtnClickSetter.exe( this.root ) ;\n\n\n    }\n\n    public setItemCount( n : number ) {\n\n        let diff = n - this.items.length ; \n\n        // 创建不够的\n        for( let i = 0 ; i < diff ; ++i ) {\n\n            let node = instantiate( this.pfItem ) ; \n            node.active = true ; \n            node.setParent( this.root ) ;\n            let uiItem = new UiFeatureSelItem() ; \n            uiItem.init( node ) ;\n            this.items.push( uiItem ) ; \n\n        } // end for\n\n        // 多余的隐藏\n        for( let i = this.items.length + diff ; i < this.items.length ; ++i ) {\n            this.items[ i ].root.active = false ; \n        } // end for\n\n    }\n\n\n\n}\n","import { Node } from \"cc\";\r\nimport { UiPopupBase } from \"../../../Common/Ui/UiPopupBase\";\r\nimport { UiItemList } from \"../../../Common/Item/UiItemList\";\r\nimport { instantiate } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { Sound } from \"../../../Common/Audio/Sound\";\r\n\r\n// 获得物品\r\nexport class UiGet extends UiPopupBase {\r\n\r\n    public static create( parent : Node ) : UiGet {\r\n\r\n        let root = instantiate( this.pf ) ;\r\n        let ui = new UiGet() ;\r\n        ui.init( root ) ; \r\n        ui.root.setParent( parent , false ) ; \r\n        return ui ; \r\n\r\n    }\r\n\r\n    public itemList = new UiItemList() ; \r\n\r\n    public override init( node : Node ) {\r\n\r\n        super.init( node ) ;\r\n\r\n        this.itemList.init( this.root.getChildByPath( \"List\" ) ) ; \r\n\r\n        this.root.on( Input.EventType.TOUCH_END , ()=>{\r\n            this.root.destroy() ; \r\n        } ) ;\r\n\r\n        // 音效\r\n        Sound.ins.getReward() ; \r\n\r\n    }\r\n\r\n}","import { UITransform } from \"cc\";\r\nimport { Size } from \"cc\";\r\nimport { BlockInputEvents } from \"cc\";\r\nimport { tween } from \"cc\";\r\nimport { Vec3 } from \"cc\";\r\nimport { Rect } from \"cc\";\r\nimport { Node } from \"cc\";\r\n\r\nexport class UiGuideCover {\r\n\r\n    public root : Node ; \r\n\r\n    public rootBlockInput : BlockInputEvents ; \r\n\r\n    public mask : Node ; \r\n    public maskUiTrans : UITransform ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        // 根结点占据整个屏幕\r\n        this.root.getComponent( UITransform ).setContentSize( 9999 , 9999 ) ;\r\n        this.root.position = Vec3.ZERO ; \r\n\r\n        // 根结点阻碍点击\r\n        this.rootBlockInput = this.root.getComponent( BlockInputEvents ) ; \r\n        if( this.rootBlockInput == null ) {\r\n            this.rootBlockInput = this.root.addComponent( BlockInputEvents ) ; \r\n        }\r\n\r\n        this.mask = this.root.getChildByPath( \"Mask\" ) ; \r\n        this.maskUiTrans = this.mask.getComponent( UITransform ) ;\r\n\r\n    }\r\n\r\n    // 动画显示\r\n    public showAnim( posWorld : Vec3 , size : Size , duration = 0.5 ) {\r\n\r\n        this.rootBlockInput.enabled = true ; \r\n\r\n        tween( this.mask ).parallel( \r\n\r\n            tween( this.mask ).to( duration , { worldPosition : posWorld } ) , \r\n            tween( this.maskUiTrans ).to( duration , { contentSize : size } ) , \r\n\r\n         )\r\n         .call( ()=>{\r\n            this.rootBlockInput.enabled = false ; \r\n         } )\r\n         .start() ;\r\n\r\n    }\r\n\r\n}","import { instantiate, Label, Node, Prefab, Sprite } from \"cc\";\nimport { UiBar } from \"./UiBar\";\nimport { Role } from \"../../World/1.Base/Role/Base/Role\";\nimport { UiBar2 } from \"./UiBar2\";\n\n// 血条\nexport class UiHpBar {\n\n    public static pf : Node ; \n\n    public static create( id : string = null ) : UiHpBar {\n\n        if( id == null ) id = \"HpBar\" ;\n\n        let ui = new UiHpBar() ; \n\n        let root = instantiate( this.pf.getChildByPath( id ) );\n        ui.init( root ) ;\n\n        return ui ; \n\n    }\n\n    // 绑定的角色\n    public role : Role ; \n\n    public root : Node ; \n\n    // 血条上的文本\n    public label : Label ; \n\n    // 血条 第 1 层\n    public bar = new UiBar2() ; \n\n    // 血条 第 2 层\n    public bar2 : UiBar2 = null ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.bar.init( this.root.getChildByPath( \"bar\" ) );\n\n        let rootBar2 = this.root.getChildByPath( \"bar2\" ) ;\n        if( rootBar2 ) {\n\n            this.bar2 = new UiBar2() ; \n            this.bar2.init( rootBar2 ) ;\n        }\n        \n        this.label = this.root.getComponentInChildren( Label ) ; \n\n    }\n\n    // 更新\n    public refresh() {\n        \n        let hp = this.role.life.hp ; \n        let val = hp.current / hp.max ; \n\n        let diff = this.bar.bar.fillRange - val ;\n        this.bar.bar.fillRange = val ; \n\n        // 第二层血条动画显示\n        if( this.bar2 != null ) {\n\n            if( diff > 0.02 ) {\n                this.bar2.anim( val , 0.8 ) ; \n            }\n            else {\n                // 波动太小没必要动画显示\n                this.bar2.bar.fillRange = val ; \n            }\n\n        }\n        \n        // 血量数字显示\n        if( this.label != null ) {\n            this.label.string = hp.current + \" / \" + hp.max ; \n        }\n\n    }\n\n}\n\n","import { instantiate } from \"cc\";\nimport { UiPopupBase } from \"../../../Common/Ui/UiPopupBase\";\nimport { Node } from \"cc\";\nimport { UiArticleIcon, UiArticleIconBg } from \"../../../Common/Ui/UiArticleIcon\";\nimport { CfgArticle, CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { MergeDefinition } from \"../../../Game/Bag/Merge/MergeDefinition\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\nimport { sp } from \"cc\";\nimport { tween } from \"cc\";\nimport { Label } from \"cc\";\nimport { ArticleString } from \"../../../Common/String/ArticleString\";\n\nexport class UiHybridGuide extends UiPopupBase {\n\n    // 这个方法不能继承，子类要重写。原因是不能用泛型类new\n    public static create( parent : Node ) : UiHybridGuide {\n\n        let root = instantiate( this.pf ) ;\n        let ui = new UiHybridGuide() ; \n        ui.init( root ) ;\n        ui.root.setParent( parent , false ) ; \n        return ui ; \n\n    }\n\n    public override init( node : Node ) {\n        \n        super.init( node ) ;\n\n        this.pfItem = this.root.getChildByPath( \"sv/view/content/Item\" ) ; \n        this.pfItem.active = false ; \n        \n        for( let i = 0 ; i < MergeDefinition.ins.orig.length ; ++i ) {\n            let cfgItem = MergeDefinition.ins.orig[ i ] ;\n            if( cfgItem.isHybrid == false ) continue ; \n\n            let uiItem = new UiHybridGuideItem() ; \n            let node = instantiate( this.pfItem ) ; \n            node.active = true ; \n            node.setParent( this.pfItem.parent , false ) ; \n            uiItem.init( node ) ; \n            uiItem.item1.refresh( cfgItem.id1 ) ; \n            uiItem.item2.refresh( cfgItem.id2 ) ; \n            uiItem.item3.refresh( cfgItem.id3 ) ; \n            let sks = uiItem.root.getComponentsInChildren( sp.Skeleton ) ;\n            // 要下一帧Spine才能播放。\n            tween( uiItem.root ).delay( 0.01 ).call( ()=>{\n                for( let sk of sks ) {\n                    // let animations = sk.skeletonData.getRuntimeData().animations;\n                    sk.addAnimation( 0 , \"donghua\" , true ) ; \n                }\n            } ).start() ; \n\n\n        } // end for\n\n\n    }\n\n    private pfItem : Node ; \n\n}\n\n// \nexport class UiHybridGuideItem {\n\n    public root : Node = null ; \n\n    public item1 = new UiItem() ; \n    public item2 = new UiItem() ; \n    public item3 = new UiItem() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.item1.init( this.root.getChildByPath( \"Item1\" ) ) ;\n        this.item2.init( this.root.getChildByPath( \"Item2\" ) ) ;\n        this.item3.init( this.root.getChildByPath( \"Item3\" ) ) ;\n\n    } \n\n\n}\n\n// 装备条目\nexport class UiItem {\n\n    public root : Node ; \n\n    public icon = new UiArticleIcon() ; \n\n    public bg = new UiArticleIconBg()  ;\n\n    public name : Label = null ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ; \n\n        this.bg.init( this.root.getChildByPath( \"bg\" ) ) ;\n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n        this.name.string = \"\" ; \n\n    }\n\n    public refresh( id : string ) {\n\n        this.icon.refresh( id ) ;\n        this.bg.refresh( id ) ;\n\n        this.name.string = ArticleString.getName( id ) ; \n\n    }\n\n}","import { Label, Node, Size, Sprite, UITransform } from \"cc\";\nimport { ItemData } from \"./ItemData\";\nimport { CfgItem, CfgItemMgr } from \"../Cfg/CfgItem\";\nimport { UiItemIcon } from \"./UiItemIcon\";\n\n// UI 物品条目。矩形\n\n/*\n    结构\n\n    root \n    |- bg\n    |- Count\n    |- Icon\n    |- FragmentFlag\n    \n*/\nexport class UiItem {\n\n    public root : Node ; \n\n    public bg : Node ; \n\n    // 物品图标\n    public icon : UiItemIcon ;\n\n    // 物品数量\n    public count : Label ; \n\n\n    public init( node : Node ) {\n\n        this.root = node ; \n        \n        this.count = this.root.getChildByPath( \"Count\" ).getComponent( Label ) ;\n\n        this.icon = new UiItemIcon() ; \n        this.icon.init( this.root ) ;\n\n        // // 停止停靠。\n        // let w = this.icon.node.getComponent( Widget ) ; \n        // w.enabled = false ; w.destroy() ; \n\n        this.bg = this.root.getChildByPath( \"bg\" ) ; \n        this.refreshBg( 1 ) ; \n\n    }\n\n    // 用物品数据刷新 UI \n    public refreshByItemData( item : ItemData ) {\n\n        this.count.string = \"x\" + item.count ; \n\n        let cfg = item.cfg ; \n        if( cfg == null ) {\n            cfg = CfgItemMgr.data.get( item.id ) ; \n        }\n\n        this.icon.refresh( item.id ) ; \n\n        this.refreshBg( cfg.quality ) ;\n\n    }\n\n    public refreshBg( n : number ) {\n\n        if( this.bg == null ) return ; \n\n        for( let node of this.bg.children ) {\n            node.active = false ; \n        } // end for\n\n        let idx = n - 1 ; \n        if( idx < 0 || idx >= this.bg.children.length ) return ; \n\n        this.bg.children[ idx ].active = true ; \n\n    }\n\n}","import { UITransform } from \"cc\";\nimport { Size } from \"cc\";\nimport { Sprite } from \"cc\";\nimport { Node } from \"cc\";\nimport { PfMgrBagArticle } from \"../PfMgr/PfMgr\";\nimport { NodeSizeFit } from \"../../SL/Cocos/Ui/NodeSizeFit\";\nimport { PfMgrIcon } from \"../PfMgr/PfMgrIcon\";\nimport { ItemType } from \"./ItemType\";\n\n// 物品图标\n/*\n    结构\n\n    root \n    |- Icon\n    |- FragmentFlag\n    \n*/\nexport class UiItemIcon {\n\n    public root : Node ; \n\n    // 物品图标\n    public icon : Sprite ;\n\n    // 碎片标志\n    public flagmentFlag : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = this.root.getChildByPath( \"Icon\" )?.getComponent( Sprite ) ; \n        if( this.icon != null ) {\n            this.iconSize = this.icon.node.getComponent( UITransform ).contentSize.clone() ;\n        }\n\n        this.flagmentFlag = this.root.getChildByPath( \"FragmentFlag\" ) ;\n        if( this.flagmentFlag != null ) {\n            this.flagmentFlag.active = false ; \n        }\n\n    }\n\n    public refresh( id : string ) {\n\n        if( this.icon == null ) return ; \n\n        // 普通图标\n        switch( id ) {\n\n            case ItemType.Money001 : {\n\n                this.icon.spriteFrame = PfMgrIcon.ins.money001.spriteFrame ;\n                NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n\n            }\n            break ; \n\n            case ItemType.Money002 : {\n\n                this.icon.spriteFrame = PfMgrIcon.ins.money002.spriteFrame ;\n                NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n\n            }\n            break ; \n\n            case ItemType.Stamina : {\n\n                this.icon.spriteFrame = PfMgrIcon.ins.stamina.spriteFrame ;\n                NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n\n            }\n            break ; \n\n            default : {\n\n                if( id.startsWith( \"Fragment\" ) ) {\n                    // 碎片\n\n                    this.flagmentFlag.active = true ; \n\n                    // 显示物件图标\n\n                    // 转换成1级的物件\n                    let id2 = id.replace( \"Fragment\" , \"\" ) + \"_1\" ; \n        \n                    let pf = PfMgrBagArticle.getPf( id2 ) ; \n        \n                    let main = pf.getChildByPath( \"Main\" ) ; \n                    let spr = main.getComponent( Sprite ) ; \n                    if( spr != null ) {\n                        this.icon.node.active = true ; \n                        this.icon.spriteFrame = spr.spriteFrame ; \n                        NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n                    }\n\n                }\n\n            }\n            break ;\n\n            // case ItemType.Fragment : \n            // {\n            //     this.flagmentFlag.active = true ; \n\n            //     // 转换成1级的物件\n            //     let id2 = cfg.type2 + \"_1\" ; \n    \n            //     let pf = PfMgrBagArticle.getPf( id2 ) ; \n    \n            //     let main = pf.getChildByPath( \"Main\" ) ; \n            //     let spr = main.getComponent( Sprite ) ; \n            //     if( spr != null ) {\n            //         this.icon.node.active = true ; \n            //         this.icon.spriteFrame = spr.spriteFrame ; \n            //         NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n            //     }\n\n            // }\n            // break ; \n\n        }\n\n        \n\n    }\n\n   \n    private iconSize : Size ; \n    \n}","import { instantiate, Label, Node, Size, Sprite, UITransform, Widget } from \"cc\";\r\nimport { ItemData } from \"./ItemData\";\r\nimport { SeqScaleShow } from \"../Misc/SeqScaleShow\";\r\nimport { UiItem } from \"./UiItem\";\r\n\r\n// 结算奖励\r\nexport class UiItemList {\r\n\r\n    public root : Node ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.pfItem = this.root.getChildByPath( \"Item\" ) ; \r\n        this.pfItem.active = false ; \r\n        // 停止拉伸，因为图标尺寸都不一样。\r\n        /*\r\n            3.8.3 设置 widget.enabled = false , destroy 都无效。还是会拉伸。\r\n            这样设置只是让复制的节点 enabled = false 不起效，复制的节点，还是有 Widget 组件。\r\n        */ \r\n        let ws = this.pfItem.getComponentsInChildren( Widget ) ; \r\n        for( let w of ws ) {\r\n            w.enabled = false ; \r\n            w.destroy() ; \r\n        }\r\n\r\n        // 删除界面多余的\r\n        for( let i = this.root.children.length - 1 ; i > 0 ; --i ) {\r\n            this.root.children[ i ].destroy()  ; \r\n        } // end for\r\n\r\n    }\r\n\r\n\r\n    public refresh( items : Array< ItemData > ) {\r\n\r\n        for( let i = 0 ; i < items.length ; ++i ) {\r\n\r\n            let root = instantiate( this.pfItem ) ;\r\n            root.setParent( this.pfItem.parent , false ) ; \r\n            root.active = true ; \r\n\r\n            let uiItem = new UiItem() ; \r\n            uiItem.init( root ) ;\r\n            uiItem.refreshByItemData( items[ i ] ) ; \r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n    // 显示\r\n    public showAnim( Interval = 0.2 ) {\r\n\r\n        let list = this.root.children.slice( 1 ) ;\r\n        if( list.length == 0 ) return ; \r\n        SeqScaleShow.exe( list , Interval ) ;\r\n\r\n    }\r\n\r\n    private pfItem : Node ; \r\n\r\n}\r\n\r\n","import { EventKeyboard, input, Input, KeyCode, Node, tween, Vec2, Vec3 } from \"cc\";\nimport { UiMain } from \"../UiMain\";\nimport { RoleMove } from \"../../../World/1.Base/Role/Misc/RoleMove\";\nimport { RoleMgr } from \"../../../World/1.Base/Role/Base/RoleMgr\";\nimport { BagView } from \"../../../World/2.Td/Bag/BagView\";\nimport { UiFeatureSel } from \"../../Popup/FeatureSel/UiFeatureSel\";\nimport { PlayerGradeOp } from \"../../../World/2.Td/Player/PlayerGradeOp\";\nimport { UiDebug } from \"../../../../Common/Ui/UiDebug\";\n\n// 键盘输入\nexport class UiKeyboard {\n\n    public static ins : UiKeyboard = null ; \n\n    public init() {\n\n        // let root = new Node( \"Keyboard\" ) ; \n        // root.setParent( UiMain.ins.root ) ;\n\n        // 只能用这种全局的方式\n        input.on( Input.EventType.KEY_DOWN, this.onKeyDown, this ) ; \n        input.on( Input.EventType.KEY_UP, this.onKeyUp, this ) ; \n\n    }\n    \n    private onKeyDown (event: EventKeyboard) {\n\n        switch(event.keyCode) {\n\n            case KeyCode.KEY_A: {\n\n            }\n            break;\n\n            case KeyCode.KEY_D : {\n\n                if( UiDebug.ins == null ) {\n                    UiDebug.loadAndCreateIns() ; \n                }\n                else {\n                    UiDebug.ins.root.destroy() ;\n                    UiDebug.ins = null ; \n\n                }\n                \n            }\n            break ;\n\n            case KeyCode.KEY_W : {\n\n            }\n            break ; \n\n            case KeyCode.KEY_S : {\n\n            }\n            break ; \n            \n        }\n\n\n\n    }\n\n    private onKeyUp (event: EventKeyboard) {\n\n        switch(event.keyCode) {\n\n            case KeyCode.KEY_Q : {\n                this.onClick_Q() ; \n            }\n            break ;\n\n            case KeyCode.KEY_A: {\n                this.onClick_A() ; \n            }\n            break;\n            \n        }\n\n    }\n\n    private onClick_Q() {\n\n        PlayerGradeOp.addExp( 150 ) ;\n\n    }\n\n    private onClick_A() {\n\n        BagView.enter() ; \n\n    }\n\n\n}","import { EventKeyboard, Input, input, KeyCode } from \"cc\";\nimport { UiDebug } from \"../../Common/Ui/UiDebug\";\n\n// 键盘输入\nexport class UiKeyboard {\n\n    public static ins : UiKeyboard = null ; \n\n    public init() {\n\n        // 只能用这种全局的方式\n        input.on( Input.EventType.KEY_DOWN, this.onKeyDown, this ) ; \n        input.on( Input.EventType.KEY_UP, this.onKeyUp, this ) ; \n\n    }\n    \n    private onKeyDown (event: EventKeyboard) {\n\n        switch(event.keyCode) {\n\n            case KeyCode.KEY_D : {\n\n                if( UiDebug.ins == null ) {\n                    UiDebug.loadAndCreateIns() ; \n                }\n                else {\n                    UiDebug.ins.root.destroy() ;\n                    UiDebug.ins = null ; \n                }\n                \n            }\n            break ;\n            \n        }\n\n    }\n\n    private onKeyUp (event: EventKeyboard) {\n\n        switch(event.keyCode) {\n\n            case KeyCode.KEY_Q : {\n\n            }\n            break ;\n\n            case KeyCode.KEY_A: {\n\n            }\n            break;\n            \n        }\n\n    }\n\n}","import { _decorator, Component, Node, Input } from 'cc';\n\n\nexport class UiLeft {\n\n    public static ins = new UiLeft() ; \n\n    public root : Node ; \n\n    //排行榜按钮\n    public btnRanking:Node;\n    //邀请有礼按钮\n    public btnInvite:Node;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.btnInvite=this.root.getChildByPath(\"btnInvite\");\n\n        this.btnRanking=this.root.getChildByPath(\"btnRanking\");\n\n        this.btnInvite.on(Input.EventType.TOUCH_END,()=>{\n\n        });\n\n    }\n}\n\n\n","import { Input, Label, Node } from \"cc\";\nimport { Account } from \"../../../../../Common/Account/Account\";\nimport { CfgLevelWaveMgr } from \"../../../../../Game/World/2.Td/Level/CfgLevelWaveMgr\";\nimport { UiLevelThumbnail } from \"./UiLevelThumbnail\";\nimport { UiLevelBtnList } from \"./UiLevelBtnList\";\nimport { UiLevelArrow } from \"./UiLevelArrow\";\nimport { UiWaveReward } from \"./UiWaveReward\";\nimport { UiLevelInfo } from \"./UiLevelInfo\";\n\n\nexport class UiLevel {\n\n    public static ins : UiLevel = null ; \n\n    // 当前选择的关卡索引\n    public selLevelIdx = 0 ; \n\n    public root : Node ; \n\n    public info = new UiLevelInfo() ; \n\n    // 箭头\n    public arrow = new UiLevelArrow() ; \n\n    // 按钮列表\n    public btnList = new UiLevelBtnList() ; \n\n    // 关卡缩略图\n    public thumbnail = new UiLevelThumbnail() ; \n\n    public waveReward = new UiWaveReward() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.btnList.uiLevel = this ; \n        this.btnList.init( this.root.getChildByPath( \"BtnList\" ) ) ;\n\n        this.info.uiLevel = this ; \n        this.info.init( this.root.getChildByPath( \"Info\" ) ) ; \n\n        this.arrow.uiLevel = this ; \n        this.arrow.init( this.root.getChildByPath( \"Arrow\" ) ) ;\n        \n        this.thumbnail.init( this.root.getChildByPath( \"Thumbnail\" ) ) ; \n\n        this.waveReward.init( this.root.getChildByPath( \"WaveReward\" ) ) ; \n\n        this.setSelLevelIdx( Account.ins.mainLevel.levelIdx ) ;\n        this.refresh() ; \n\n    }\n\n    public setSelLevelIdx( idx : number ) {\n\n        if( idx >= CfgLevelWaveMgr.main.length ) {\n            // 打完了最后一关。选择停留在最后一关\n            idx = CfgLevelWaveMgr.main.length - 1 ; \n        }\n\n        this.selLevelIdx = idx ; \n\n    }\n\n    public refresh() {\n\n        this.arrow.refresh() ; \n\n        this.info.refresh() ; \n\n        // 按钮显示\n        this.btnList.refresh( this.selLevelIdx ) ;\n\n        // 缩略图显示\n        this.thumbnail.refresh( this.selLevelIdx ) ; \n\n        // 波次奖励\n        this.waveReward.refresh( this.selLevelIdx ) ; \n        \n    }\n\n\n}\n\n\n\n","import { Input } from \"cc\";\r\nimport { CfgLevelWaveMgr } from \"../../../../../Game/World/2.Td/Level/CfgLevelWaveMgr\";\r\nimport { UiLevel } from \"./UiLevel\";\r\nimport { Node } from \"cc\";\r\n\r\n// 箭头的控制\r\nexport class UiLevelArrow {\r\n\r\n    public uiLevel : UiLevel = null ; \r\n\r\n    public root : Node ; \r\n\r\n    // 左箭头、右箭头\r\n    public btnArrowLeft : Node ; \r\n    public btnArrowRight : Node ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.btnArrowLeft = this.root.getChildByPath( \"btnArrowLeft\" ) ; \r\n        this.btnArrowLeft.on( Input.EventType.TOUCH_END , this.onClick_btnArrowLeft , this ) ;\r\n\r\n        this.btnArrowRight = this.root.getChildByPath( \"btnArrowRight\" ) ; \r\n        this.btnArrowRight.on( Input.EventType.TOUCH_END , this.onClick_btnArrowRight , this ) ;\r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        let main = CfgLevelWaveMgr.main ; \r\n        this.btnArrowLeft.active = this.uiLevel.selLevelIdx > 1 ; \r\n        this.btnArrowRight.active = this.uiLevel.selLevelIdx < main.length - 1 ; \r\n\r\n    }\r\n\r\n    private onClick_btnArrowLeft() {\r\n        if( this.uiLevel.thumbnail.isMoveCompleted == false ) return ; \r\n        this.uiLevel.selLevelIdx-- ; \r\n        this.uiLevel.refresh() ; \r\n    }\r\n\r\n    private onClick_btnArrowRight() {\r\n        if( this.uiLevel.thumbnail.isMoveCompleted == false ) return ; \r\n        this.uiLevel.selLevelIdx++ ; \r\n        this.uiLevel.refresh() ; \r\n        \r\n    }\r\n\r\n}","import { Input } from \"cc\";\r\nimport { SceneTransition } from \"../../../../../Common/Ui/UiLoadingScene\";\r\nimport { GameArg } from \"../../../../../Game/Init/GameArg\";\r\nimport { CfgLevelWaveMgr } from \"../../../../../Game/World/2.Td/Level/CfgLevelWaveMgr\";\r\nimport { Label } from \"cc\";\r\nimport { UiLevel } from \"./UiLevel\";\r\nimport { Node } from \"cc\";\r\nimport { Account } from \"../../../../../Common/Account/Account\";\r\nimport { UiStamina } from \"../../Margin/UiStamina\";\r\nimport { UiStaminaBuy } from \"../../../Popup/UiStaminaBuy\";\r\nimport { UiMain } from \"../../UiMain\";\r\nimport { UiToast } from \"../../../../../Common/Ui/UiToast\";\r\nimport { Lang } from \"../../../../../Common/Misc/Lang\";\r\nimport { DailyLimit } from \"../../../../../Common/Misc/DailyLimit\";\r\nimport { Ad } from \"../../../../../Common/Ad/Ad\";\r\nimport { UiWin } from \"../../../../../Game/Ui/Popup/Settle/UiWin\";\r\nimport { ItemDraw } from \"../../../../../Common/Item/ItemDraw\";\r\nimport { ItemGet } from \"../../../../../Common/Item/ItemGet\";\r\nimport { SoundBtnClickSetter } from \"../../../../../Common/Audio/SoundBtnClickSetter\";\r\nimport { Sound } from \"../../../../../Common/Audio/Sound\";\r\nimport { UiMoney001 } from \"../../Margin/UiMoney001\";\r\nimport { UiMoney002 } from \"../../Margin/UiMoney002\";\r\nimport { tween } from \"cc\";\r\nimport { Tween } from \"cc\";\r\nimport { Vec2 } from \"cc\";\r\nimport { Vec3 } from \"cc\";\r\n\r\n\r\n// 按钮列表部分\r\nexport class UiLevelBtnList {\r\n\r\n    public uiLevel : UiLevel ; \r\n\r\n    public root : Node ; \r\n\r\n    public btnStart = new UiBtnStart() ; \r\n\r\n    public lock : Node ; \r\n    public lockTxt : Label ; \r\n\r\n    public btnGrinding = new UiBtnGrinding() ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ;\r\n\r\n        this.btnStart.init( this.root.getChildByPath( \"btnStart\" ) ) ;\r\n        this.btnStart.refresh() ; \r\n\r\n        this.lock = this.root.getChildByPath( \"Lock\" ) ; \r\n        this.lockTxt = this.lock.getComponentInChildren( Label ) ;\r\n\r\n        this.btnGrinding.init( this.root.getChildByPath( \"btnGrinding\" ) ) ; \r\n\r\n    }\r\n\r\n    public refresh( currentLevelIdx : number ) {\r\n\r\n        if( currentLevelIdx < Account.ins.mainLevel.levelIdx ) {\r\n            // 打过的关\r\n            this.btnStart.root.active = true ; \r\n\r\n            this.lock.active = false ; \r\n\r\n            this.btnGrinding.root.active = true ; \r\n            this.btnGrinding.refresh() ; \r\n\r\n        }\r\n        else if( currentLevelIdx == Account.ins.mainLevel.levelIdx ) {\r\n            // 当前关\r\n            this.btnStart.root.active = true ; \r\n\r\n            this.lock.active = false ; \r\n\r\n            this.btnGrinding.root.active = false ; \r\n        }\r\n        else {\r\n            // 未打过的关\r\n            this.btnStart.root.active = false ; \r\n\r\n            this.lock.active = true ; \r\n            let str = \"通过章节{1}后解锁\" ;\r\n            str = str.replace( \"{1}\" , currentLevelIdx.toString() ) ;\r\n            this.lockTxt.string = str  ;\r\n\r\n            this.btnGrinding.root.active = false ; \r\n\r\n        }\r\n        \r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n// 按钮 开始游戏\r\nexport class UiBtnStart {\r\n\r\n    public root : Node ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\r\n\r\n        this.refresh() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        this.animScale() ; \r\n\r\n    }\r\n\r\n    // 播放缩放动画\r\n    private animScale() {\r\n\r\n        Tween.stopAllByTarget( this.root ) ; \r\n        \r\n        let d = 0.5 ; \r\n\r\n        tween( this.root ).sequence(\r\n            tween( this.root ).to( d , { scale : new Vec3( 1.1 , 1.1 , 1.1 ) } ) , \r\n            tween( this.root ).to( d , { scale : Vec3.ONE } ) ,\r\n            tween( this.root ).delay( 0.5 ) , \r\n        ).repeatForever().start() ;  \r\n\r\n    }\r\n\r\n    public onClick() {\r\n\r\n        // 上阵条件\r\n        let hasEmpty = Account.ins.bag.deploy.length < Account.ins.bag.deployCellUnlocked.size ; \r\n        if( hasEmpty ) {\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_Bag_Deploy_empty\" ) ) ;\r\n            return ;\r\n        }\r\n\r\n\r\n        // 扣体力\r\n        let s = Account.ins.stamina ;\r\n        let t = s.current - 5 ;\r\n        if( t < 0 ) {\r\n            // 体力不足\r\n\r\n            UiStaminaBuy.create( UiMain.ins.root ).show() ; \r\n\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_SiaminaNotEnough\" ) ) ;\r\n\r\n            return ;\r\n        }\r\n        s.current = t ;\r\n        // 刷新显示\r\n        UiStamina.ins.refresh() ; \r\n\r\n        let uiLevel = UiLevel.ins ; \r\n\r\n        let cfgLevel = CfgLevelWaveMgr.main[ uiLevel.selLevelIdx ] ; \r\n\r\n        GameArg.ins.levelId = cfgLevel.id ; \r\n        GameArg.ins.mainIdx = uiLevel.selLevelIdx ; \r\n\r\n        SceneTransition.exe( \"Game\" ) ;\r\n\r\n    }\r\n\r\n}\r\n\r\n// 扫荡按钮\r\nexport class UiBtnGrinding {\r\n\r\n    public root : Node ; \r\n\r\n    // 今日剩余次数\r\n    public leftToday : Label ;\r\n\r\n    // 广告标志\r\n    public adFlag : Node ; \r\n\r\n    public dailyLimit = new DailyLimit( \"DailyLimit_Grinding\" , 5 ) ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.dailyLimit.load() ; \r\n\r\n        this.root = node ; \r\n\r\n        this.leftToday = this.root.getChildByPath( \"LeftToday\" ).getComponent( Label ) ;\r\n\r\n        this.adFlag = this.root.getChildByPath( \"AdFlag\" ) ; \r\n\r\n        this.refresh() ; \r\n        \r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \r\n\r\n    }\r\n\r\n\r\n    public refresh() {\r\n\r\n        this.leftToday.node.active = false ; \r\n        this.adFlag.active = false ; \r\n\r\n        if( this.dailyLimit.current <= 0 ) {\r\n\r\n            this.adFlag.active = true ; \r\n\r\n            return ; \r\n        }\r\n\r\n        this.leftToday.node.active = true ; \r\n        let str = Lang.get( \"Home_LeftToday\" ).replace( \"{1}\" , this.dailyLimit.current.toString() ) ;\r\n        this.leftToday.string = str ; \r\n\r\n    }\r\n\r\n    private onClick() {\r\n\r\n        if( this.dailyLimit.current > 0 ) {\r\n            this.dailyLimit.decrement() ; \r\n            this.dailyLimit.save() ; \r\n\r\n            this.refresh() ; \r\n\r\n            // 获得奖励\r\n            this.rewardGet() ; \r\n\r\n            return ; \r\n\r\n        }\r\n\r\n        // 看广告\r\n\r\n        let onSuccess = ()=>{\r\n            this.rewardGet() ; \r\n        } ;\r\n        let onCancel = ()=>{\r\n\r\n        } ;\r\n        let onError = ()=>{\r\n\r\n        } ; \r\n        Ad.ins.rewardShow( onSuccess , onCancel , onError ) ;\r\n\r\n    }\r\n\r\n    // 得到奖励\r\n    private rewardGet() {\r\n\r\n        let levelId = UiLevel.ins.selLevelIdx.toString() ;\r\n\r\n        let uiWin = UiWin.create( UiMain.ins.root ) ; \r\n        uiWin.show() ; \r\n        let id = \"Level_\" + levelId + \"_Win\" ; \r\n        let items = ItemDraw.exe( id ) ; \r\n        uiWin.itemList.refresh( items ) ; \r\n        uiWin.itemList.showAnim( 0.1 ) ; \r\n        // uiWin.itemList.showAnim() ; \r\n        ItemGet.addList( items ) ; \r\n\r\n        // 重写按钮 确定\r\n        uiWin.btnOK.off( Input.EventType.TOUCH_END ) ; \r\n        uiWin.btnOK.on( Input.EventType.TOUCH_END , ()=>{\r\n            Sound.ins.btnClick() ; \r\n            uiWin.root.destroy() ; \r\n        } ) ; \r\n\r\n        // 重写按钮 分享双倍\r\n        uiWin.btnShare.off( Input.EventType.TOUCH_END ) ; \r\n\r\n        // 刷新界面数值\r\n        UiMoney001.ins.refresh() ; \r\n        UiMoney002.ins.refresh() ; \r\n\r\n    }\r\n\r\n}","import { Label } from \"cc\";\r\nimport { Account } from \"../../../../../Common/Account/Account\";\r\nimport { CfgLevelWaveMgr } from \"../../../../../Game/World/2.Td/Level/CfgLevelWaveMgr\";\r\nimport { LevelString } from \"../../../../../Game/World/2.Td/Level/LevelString\";\r\nimport { UiLevel } from \"./UiLevel\";\r\nimport { Node } from \"cc\";\r\n\r\n// 关卡信息\r\nexport class UiLevelInfo {\r\n\r\n    public uiLevel : UiLevel = null ; \r\n\r\n    public root : Node ; \r\n\r\n    // 关卡名\r\n    public levelName : Label ; \r\n\r\n    // 最高记录\r\n    public best : Label ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.levelName = this.root.getChildByPath( \"LevelName\" ).getComponent( Label ) ; \r\n\r\n        this.best = this.root.getChildByPath( \"Best\" ).getComponent( Label ) ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        this.refreshLevelName() ; \r\n\r\n        this.refreshBest() ; \r\n\r\n    }\r\n\r\n    public refreshLevelName() {\r\n\r\n        let main = CfgLevelWaveMgr.main ; \r\n\r\n        let selLevelIdx = this.uiLevel.selLevelIdx ;\r\n\r\n        // 关卡名字\r\n        let levelData = main[ selLevelIdx ] ; \r\n        let str = LevelString.getName( levelData.id ) ;\r\n        // 加上序号前缀\r\n        str = selLevelIdx.toString() + \".\" + str ; \r\n        this.levelName.string = str ; \r\n\r\n    }\r\n\r\n\r\n    public refreshBest() {\r\n\r\n        let selLevelIdx = this.uiLevel.selLevelIdx ;\r\n\r\n        // 最高记录\r\n        this.best.node.active = true ; \r\n        if( selLevelIdx < Account.ins.mainLevel.levelIdx ) {\r\n            // 打过的关\r\n            this.best.string = \"已通关\" ; \r\n        }\r\n        else if( selLevelIdx == Account.ins.mainLevel.levelIdx ) {\r\n            // 当前关\r\n            let main = CfgLevelWaveMgr.main ; \r\n            let levelData = main[ selLevelIdx ] ; \r\n            let str = \"最高记录：{1}/{2}\" ; \r\n            str = str.replace( \"{1}\" , Account.ins.mainLevel.waveIdx.toString() ) ; \r\n            str = str.replace( \"{2}\" , ( levelData.waves.length - 1 ).toString() ) ; \r\n            this.best.string = str ; \r\n        }\r\n        else {\r\n            // 未打过的关\r\n            this.best.node.active = false ; \r\n        }\r\n\r\n    }\r\n\r\n}","import { Vec3 } from \"cc\";\r\nimport { PfLevelThumbnail } from \"./PfLevelThumbnail\";\r\nimport { Sprite } from \"cc\";\r\nimport { Account } from \"../../../../../Common/Account/Account\";\r\nimport { Color } from \"cc\";\r\nimport { Node } from \"cc\";\r\nimport { instantiate } from \"cc\";\r\nimport { CfgLevelGeneralMgr } from \"db://assets/Script/Game/World/2.Td/Level/CfgLevelGeneralMgr\";\r\nimport { tween } from \"cc\";\r\n\r\n// 关卡缩略图\r\nexport class UiLevelThumbnail {\r\n\r\n    // 是否移动完成\r\n    public isMoveCompleted = false ; \r\n\r\n    // 关卡索引\r\n    public idx = -1 ; \r\n\r\n    public root : Node ;\r\n\r\n    // 当前的\r\n    public current : Node = null ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n    }\r\n\r\n    public refresh( idx : number ) {\r\n\r\n        if( this.idx == idx ) return ; \r\n\r\n        if( this.idx == -1 ) {\r\n            // 第一次 直接显示\r\n\r\n            // 清除掉之前的\r\n            this.root.removeAllChildren() ; \r\n            this.current = this.create( idx ) ; \r\n            this.isMoveCompleted = true ; \r\n        }\r\n        else if( this.idx < idx  ) {\r\n            this.isMoveCompleted = false ; \r\n            let node2 = this.create( idx ) ; \r\n            this.move( node2 , true ) ;\r\n        }\r\n        else {\r\n            this.isMoveCompleted = false ; \r\n            let node2 = this.create( idx ) ; \r\n            this.move( node2 , false ) ; \r\n\r\n        }\r\n\r\n        this.idx = idx ; \r\n\r\n    }\r\n\r\n    // 创建缩略图节点\r\n    private create( idx : number ) : Node {\r\n\r\n        // 缩略图ID和地图ID配对。\r\n        let cfg = CfgLevelGeneralMgr.data.get( idx.toString() ) ;\r\n        if( cfg == null ) return ; \r\n        let id = cfg.mapId ; \r\n\r\n        // 显示图标\r\n        let pf = PfLevelThumbnail.ins.root.getChildByPath( id ) ;\r\n        if( pf == null ) return ; \r\n        let node = instantiate( pf ) ;\r\n        node.setParent( this.root , false ) ; \r\n        node.position = Vec3.ZERO ; \r\n\r\n\r\n        let sprites = node.getComponentsInChildren( Sprite ) ; \r\n        // 图标\r\n        if( idx < Account.ins.mainLevel.levelIdx ) {\r\n            // 打过的关\r\n            for( let spr of sprites ) {\r\n                spr.color = Color.WHITE ; \r\n            } // end for\r\n        }\r\n        else if( idx == Account.ins.mainLevel.levelIdx ) {\r\n            // 当前关\r\n            for( let spr of sprites ) {\r\n                spr.color = Color.WHITE ; \r\n            } // end for\r\n        }\r\n        else {\r\n            // 未打过的关\r\n            for( let spr of sprites ) {\r\n                spr.color = Color.GRAY ; \r\n            } // end for\r\n\r\n        }\r\n\r\n        return node ; \r\n\r\n    }\r\n\r\n    public move( target : Node , isLeft : boolean ) {\r\n\r\n        if( this.current == null && target == null ) {\r\n            // 这种情况是 移走和移入都没节点，在正式版一般不会出现。\r\n            this.isMoveCompleted = true ; \r\n            return ; \r\n        }\r\n\r\n        // 决定运动的方向\r\n        let len = 1200 ; \r\n        let pos1 = new Vec3() ; \r\n        let pos2 = new Vec3() ; \r\n        if( isLeft ) {\r\n            pos1.x = -len ; \r\n            \r\n            pos2.x = len ;\r\n        }\r\n        else {\r\n            pos1.x = len ; \r\n            pos2.x = -len ;\r\n        }\r\n\r\n        let d = 0.3 ; \r\n\r\n        // 移走\r\n        let current = this.current ;\r\n        if( current != null ) {\r\n            tween( current ).to( d , { position : pos1 } ).call( ()=>{\r\n                this.isMoveCompleted = true ; \r\n                current.destroy() ; \r\n                current = null ; \r\n            } ).start() ;\r\n        }\r\n\r\n        // 移入\r\n        this.current = target ; \r\n        if( target != null ) {\r\n            target.position = pos2 ; \r\n            // 移入\r\n            tween( target ).to( d , { position : Vec3.ZERO } ).call( ()=>{\r\n                this.current = target ; \r\n                this.isMoveCompleted = true ; \r\n            } ).start() ; \r\n    \r\n        }\r\n\r\n    }\r\n\r\n}","import { instantiate } from \"cc\";\nimport { Node } from \"cc\";\n\n\n/*\n    Ui 列表节点条目生成管理\n\n    复用条目节点，不足的生成。多余的隐藏。\n\n*/ \nexport class UiListItemGenMgr {\n\n    // 生成父节点\n    public root : Node ; \n\n    // 预制\n    public pf : Node ; \n\n    // 列表\n    public list = new Array< Node >() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.pf = this.root.children[ 0 ] ; \n\n        // 预先加入一个。利用好预制的条目\n        this.list.push( this.pf ) ; \n\n    }\n\n    // 设置条目总数\n    public setItemCount( n : number ) {\n\n        let diff = n - this.list.length ; \n        for( let i = 0 ; i < diff ; ++i ){\n\n            let node = instantiate( this.pf ) ;\n            node.setParent( this.pf.parent ) ;\n            node.active = true ; \n            this.list.push( node ) ;\n\n        } // end for\n\n        // 不显示多余的\n        for( let i = this.list.length + diff ; i < this.list.length ; ++i ) {\n            this.list[ i ].active = false ; \n        }\n\n    }\n\n}","import { director, Game, game, Node, Prefab, resources, Tween, tween, UIOpacity } from \"cc\";\nimport { GameArg } from \"../../Game/Init/GameArg\";\nimport { StringUtil } from \"../../SL/Common/StringUtil\";\nimport { LevelLoad } from \"../../Game/Init/LevelLoad/LevelLoad\";\nimport { CfgLevelGeneralMgr } from \"../../Game/World/2.Td/Level/CfgLevelGeneralMgr\";\n\nexport class UiLoadingScene {\n\n    public static ins = new UiLoadingScene() ; \n\n    public root : Node ; \n\n    public opa : UIOpacity ; \n\n    // 显示载入的节点\n    public loading : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.root.active = false ; \n\n        this.loading = this.root.getChildByPath( \"Loading\" ) ; \n\n        this.opa = this.root.getComponent( UIOpacity ) ; \n        this.opa.opacity = 0 ; \n\n        director.addPersistRootNode( this.root ) ; \n\n    }\n\n    public fadeIn( onComplete : ()=>void = null ) {\n\n        this.loading.active = false ; \n\n        this.root.active = true ; \n        this.opa.opacity = 0 ; \n        tween( this.opa ).to( 0.2 , { opacity : 255 } ).call( ()=>{\n            onComplete?.() ; \n\n            // 延迟一段时间后显示。如果载入很快，渐变完就载入，就不用显示这个\n            tween( this.loading ).delay( 0.3 ).call( ()=>{\n                this.loading.active = true ; \n            } ).start() ;\n\n        } ).start() ; \n\n    }\n\n    public fadeOut() {\n\n        tween( this.opa ).to( 0.2 , { opacity : 0 } ).call( ()=>{\n            this.root.active = false ; \n\n            Tween.stopAllByTarget( this.loading ) ; \n            this.loading.active = false ; \n\n        } ).start() ; \n\n    }\n\n}\n\n// 场景切换控制\nexport class SceneTransition {\n\n    public static sceneName : string = null ; \n\n    public static exe( name : string ) {\n\n        this.sceneName = name ; \n\n        this.preloadComplete = false ; \n\n        UiLoadingScene.ins.fadeIn( ()=>{\n            this.startCheck() ; \n        } ) ; \n        \n        // 预先载入场景\n        director.preloadScene( name , ( err )=>{\n\n            if( name == \"Game\" ) {\n                this.loadGameLevel() ;\n                return ; \n            }\n\n            this.preloadComplete = true ; \n\n        } ) ;\n\n    }\n\n    // 开始检查场景载入完成\n    private static startCheck() {\n\n        // 检测场景载入完成\n        let t = tween( UiLoadingScene.ins.root ).sequence(\n\n            tween( UiLoadingScene.ins.root ).delay( 0.01 ) , \n            tween( UiLoadingScene.ins.root ).call( ()=>{\n\n                if( this.preloadComplete == true ) {\n                    t.stop() ; \n                    director.loadScene( this.sceneName , ()=>{\n                        UiLoadingScene.ins.fadeOut() ; \n                    } );\n                    \n                }\n\n            } )\n\n        ).repeatForever().start() ; \n\n    }\n\n    // 载入关卡地图\n    private static loadGameLevel() {\n\n        let id = GameArg.ins.mainIdx.toString() ;\n        let cfg = CfgLevelGeneralMgr.data.get( id ) ;\n        let path = \"Game/Level/\" + cfg.mapId ;\n        resources.load( path , Prefab , ( err , data )=>{\n\n            if( err != null ) {\n\n                console.error( \"没有配置关卡地图\" ) ;\n\n                // path = \"Game/Level/0001_Layer0\" ;\n                // resources.load( path , Prefab , ( err , data )=>{\n                //     LevelLoad.pfLayer0 = data ; \n                //     this.preloadComplete = true ; \n                // } ) ;\n\n                return ;\n            }\n\n            LevelLoad.pfMap = data ; \n            this.preloadComplete = true ; \n\n        } ) ; \n\n    }\n\n    public static preloadComplete = false ; \n\n}","import { director, Input, instantiate, Node, Prefab, resources } from \"cc\";\nimport { SceneTransition } from \"../../../../Common/Ui/UiLoadingScene\";\nimport { UiItemList } from \"../../../../Common/Item/UiItemList\";\n\n// 失败UI\nexport class UiLose {\n\n    public static pf : Prefab ; \n\n    public static loadPf() {\n\n        if( this.pf != null ) return ; \n\n        resources.load( \"Game/Ui/Settle/Lose\" , Prefab , ( err , data )=>{\n            this.pf = data ;\n        } ) ;\n\n    }\n\n    public static create( parent : Node ) : UiLose {\n\n        let root = instantiate( this.pf ) ;\n        let ui = new UiLose() ;\n        ui.init( root ) ; \n        ui.root.setParent( parent , false ) ; \n        return ui ; \n\n    }\n\n\n    public root : Node ;\n\n    // 物品列表\n    public itemList = new UiItemList() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnOK = this.root.getChildByPath( \"BtnList/btnOK\" ) ;\n        btnOK.on( Input.EventType.TOUCH_END , this.onClick_btnOK , this ) ;\n\n        let btnShare = this.root.getChildByPath( \"BtnList/btnShare\" ) ;\n        btnShare.on( Input.EventType.TOUCH_END , this.onClick_btnShare , this ) ;\n\n        this.itemList.init( this.root.getChildByPath( \"Reward\" ) ) ; \n        \n    }\n\n    public show() {\n        this.root.active = true ; \n    }\n\n    private onClick_btnOK() {\n\n        // director.loadScene( \"Home\" ) ; \n        SceneTransition.exe( \"Home\" ) ; \n    }\n\n    private onClick_btnShare() {\n\n    }\n\n}","import { find, Node } from \"cc\";\nimport { UiBag } from \"../Bag/UiBag\";\nimport { UiBattle } from \"./Page/Battle/UiBattle\";\nimport { UiTop } from \"./Margin/UiTop\";\nimport { UiTabHeaderBottom } from \"../../../SL/Cocos/Ui/UiTabHeader\";\nimport { UiShop } from \"./Page/Shop/UiShop\";\nimport { Test1 } from \"./Page/Test1/Test1\";\nimport { Test2 } from \"./Page/Test2/Test2\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\nimport { UiBottomTabPage } from \"./UiBottomTab\";\n\n\nexport class UiMain {\n\n    public static ins = new UiMain() ; \n\n    public root : Node ; \n\n    public init() {\n\n        this.root = find( \"Canvas\" ) ;\n\n        UiBottomTabPage.ins = new UiBottomTabPage() ; \n        UiBottomTabPage.ins.init( this.root ) ;\n\n        UiTop.ins = new UiTop() ; \n        UiTop.ins.init( this.root.getChildByPath( \"Top\" ) ) ;\n\n        // 添加按钮音效\n        SoundBtnClickSetter.exe( this.root ) ; \n        \n    }\n\n\n\n}","import { find, Node } from \"cc\";\nimport { UiTop } from \"./UiTop\";\nimport { UiPlayerGrade } from \"./UiPlayerGrade\";\nimport { UiFeature } from \"./Feature/UiFeature\";\nimport { UiFeatureSel } from \"../Popup/FeatureSel/UiFeatureSel\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\n\nexport class UiMain {\n\n    public static ins : UiMain = null ; \n\n    public root : Node ; \n\n    public init() {\n\n        this.root = find( \"Canvas\" ) ; \n\n        // UiKeyboard.ins = new UiKeyboard() ; \n        // UiKeyboard.ins.init() ; \n\n        UiFeatureSel.ins = UiFeatureSel.create( UiMain.ins.root ) ; \n        UiFeatureSel.ins.root.active = false ; \n\n        new UiTop().init( this.root.getChildByPath( \"Ui/Top\" ) );\n        \n        UiPlayerGrade.ins = new UiPlayerGrade() ; \n        UiPlayerGrade.ins.init( find( \"Canvas/Ui/Bottom/Grade\" ) ) ; \n        UiPlayerGrade.ins.refresh() ; \n        \n        UiFeature.ins = new UiFeature() ; \n        UiFeature.ins.init( find( \"Canvas/Ui/Bottom/Feature\" ) ) ; \n        UiFeature.ins.refresh() ; \n\n        // 添加按钮音效\n        SoundBtnClickSetter.exe( this.root ) ; \n\n    }\n\n}","import { Label, Node } from \"cc\";\nimport { Player } from \"../../World/2.Td/Player/Player\";\n\n// 局内货币UI\nexport class UiMoney001 {\n\n    public static ins : UiMoney001 = null ; \n\n    public root : Node ; \n\n    public icon : Node ;\n\n    public val : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ; \n        this.val.string = \"\" ; \n\n        this.icon = this.root.getChildByPath( \"Icon\" ) ; \n\n        this.refresh() ; \n\n    }\n\n    public refresh() {\n\n        this.val.string = Player.ins.money001.toString() ; \n\n    }\n\n}","import { Label, Node } from \"cc\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { Input } from \"cc\";\nimport { UiBottomTabPage } from \"../UiBottomTab\";\nimport { UiShop } from \"../Page/Shop/UiShop\";\nimport { ScrollView } from \"cc\";\n\n// 货币1级\nexport class UiMoney001 {\n\n    public static ins : UiMoney001 = null ; \n\n    public root : Node ; \n\n    public val : Label ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ;\n        this.val.string = \"0\" ; \n\n        this.refresh() ; \n        \n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \n    }\n\n    public refresh() {\n\n        let a = Account.ins ; \n        this.val.string = a.money.money001.toString() ; \n\n    }\n\n    private onClick() {\n\n        let headerItem = UiBottomTabPage.ins.thb.items.find( ( e )=>{ return e.root.name == \"Shop\" ; } ) ;\n        headerItem.root.emit( Input.EventType.TOUCH_END ) ; \n\n        let sv = UiShop.ins.root.getComponentInChildren( ScrollView ) ;\n        sv.scrollToBottom() ; \n\n    }\n\n}","\r\nimport { Label, Node } from \"cc\";\r\nimport { Account } from \"../../../../Common/Account/Account\";\r\nimport { UiBottomTabPage } from \"../UiBottomTab\";\r\nimport { Input } from \"cc\";\r\nimport { ScrollView } from \"cc\";\r\nimport { UiShop } from \"../Page/Shop/UiShop\";\r\n\r\n// 局内货币UI\r\nexport class UiMoney002 {\r\n\r\n    public static ins : UiMoney002 = null ; \r\n\r\n    public root : Node ; \r\n\r\n    public icon : Node ;\r\n\r\n    public val : Label ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ; \r\n        this.val.string = \"\" ; \r\n\r\n        this.icon = this.root.getChildByPath( \"Icon\" ) ; \r\n\r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \r\n\r\n        this.refresh() ; \r\n\r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        this.val.string = Account.ins.money.money002.toString() ; \r\n\r\n    }\r\n\r\n    private onClick() {\r\n\r\n        let headerItem = UiBottomTabPage.ins.thb.items.find( ( e )=>{ return e.root.name == \"Shop\" ; } ) ;\r\n        headerItem.root.emit( Input.EventType.TOUCH_END ) ; \r\n\r\n        let sv = UiShop.ins.root.getComponentInChildren( ScrollView ) ;\r\n        sv.scrollToTop() ; \r\n\r\n    }\r\n\r\n}","import { Input, Label, Node, Prefab, Sprite, UITransform, Vec3, instantiate, resources } from \"cc\";\nimport { OsJudge } from \"../../../../SL/Cocos/Misc/OsJudge\";\n\n\n// 更多游戏\nexport class UiMoreGames {\n\n    // 创建 resources 载入机制\n    public static createRes( path : string , cb : ( ui : UiMoreGames )=>void ) {\n\n        resources.load( path , Prefab , ( err , data )=>{\n\n            let root = instantiate( data ) ; \n\n            let ui = new UiMoreGames() ;\n            ui.init( root ) ;\n\n            cb( ui ) ;\n\n        } ) ;\n\n    }\n\n    public root : Node ;\n\n    // 关闭按钮\n    public btnClose : Node ; \n\n    // 条目项\n    public items = new Array< UiMoreGamesItem >() ; \n\n    // 预设的图标\n    private icons : Node ; \n\n    // 条目预制\n    private pfItem : Node ; \n\n    // 关闭处理器。决定如何关闭UI\n    public closeHandler : ()=>void = null ; \n\n    // 点击条目\n    public onClickItem : ()=>void = null ;\n\n    public init( node : Node ) {\n\n        this.root = node ;\n\n        this.root.position = Vec3.ZERO ; \n\n        // 点击后销毁\n        this.closeHandler = ()=>{ this.root.destroy() ; } ;\n\n        // 关闭按钮\n        this.btnClose = this.root.getChildByPath(\"btnClose\") ; \n        this.btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.closeHandler() ;\n        } , this ) ;\n\n        // 遮罩\n        let mask = this.root.getChildByPath(\"mask\") ; \n        mask.getComponent( UITransform ).setContentSize( 2000 , 2000 ) ;\n        mask.on( Input.EventType.TOUCH_END , ()=>{\n            this.closeHandler() ;\n        } , this ) ;\n        \n        this.icons = this.root.getChildByPath( \"Icons\" ) ;\n        this.icons.active = false ; \n\n        this.initItems() ; \n\n    }\n\n    private initItems() {\n\n        let itemsNode = this.root.getChildByPath( \"Items\" ) ; \n        let c = itemsNode.children ;\n\n        // 删除多余的\n        for( let i = c.length - 1 ; i > 0 ; --i ) {\n            c[ i ].destroy() ;\n        }\n\n        this.pfItem = c[ 0 ] ;\n        this.pfItem.active = false ;\n        \n    }\n\n    public refresh( cfg : UiMoreGamesCfg ) {\n\n        this.clear() ; \n\n        for( let i = 0 ;i < cfg.items.length ; ++i ) {\n            let cfgItem = cfg.items[ i ] ;\n\n            // 本机APP跳过\n            if( cfg.thisAppId == cfgItem.appId ) continue ;\n\n            this.addItem( cfgItem ) ;\n\n        } // end for\n\n    }\n\n    // 清除\n    public clear() {\n\n        for( let i = 0 ; i < this.items.length ; ++i ) {\n            this.items[ i ].root.destroy() ;\n        }\n\n        this.items.splice( 0 , this.items.length ) ;\n\n    }\n\n    public addItem( cfgItem : UiMoreGamesCfgItem ) {\n\n        let parent = this.pfItem.parent ; \n\n        let node = instantiate( this.pfItem ) ;\n        node.active = true ; \n        node.setParent( parent ) ;\n        let uiItem = new UiMoreGamesItem() ; \n        this.items.push( uiItem ) ;\n        uiItem.init( node ) ;\n\n        // 名字\n        uiItem.name.string = cfgItem.name ;\n\n        // 图标\n        let spr = this.icons.children.find( ( e )=>{ return e.name == cfgItem.iconId ; } ).getComponent( Sprite ) ;\n        uiItem.icon.spriteFrame = spr.spriteFrame ;\n\n        // 点击\n        node.on( Input.EventType.TOUCH_END , ()=>{\n\n            this.navigateToMiniProgram( cfgItem.appId ) ;\n\n            if( this.onClickItem != null ){ this.onClickItem() ; }\n            \n        } ) ;\n\n    }\n\n    private navigateToMiniProgram( appId ) {\n\n        // // @ts-ignore\n        if( OsJudge.isWx() == false ) return ;\n\n        // @ts-ignore\n        wx.navigateToMiniProgram({\n            appId: appId ,\n            path: '',\n            extraData: null ,\n            envVersion: '',\n            success(res) {\n                // 打开成功\n                console.log( \"跳转成功\" ) ;\n            }\n        })\n\n    }\n\n}\n\nexport class UiMoreGamesItem {\n\n    public root : Node ;\n\n    // 图标\n    public icon : Sprite ; \n\n    // 名称\n    public name : Label ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = this.root.getChildByPath( \"Icon/val\" ).getComponent( Sprite ) ;\n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n\n    }\n\n    \n\n}\n\n// 配置\nexport class UiMoreGamesCfg {\n    \n    public static create( thisAppId : string ) : UiMoreGamesCfg {\n\n        let ins = new UiMoreGamesCfg() ;\n\n        let item = new UiMoreGamesCfgItem() ;\n        ins.items.push( item ) ;\n        item.appId = \"wx1eead536288187e6\" ;\n        item.iconId = \"BlockBlast\" ;\n        item.name = \"方块爆破\" ; \n\n        // item = new UiMoreGamesCfgItem() ;\n        // ins.items.push( item ) ;\n        // item.appId = \"wxe5ceb461d21a27dc\" ;\n        // item.iconId = \"PopStar\" ;\n        // item.name = \"消灭星星\" ; \n\n        item = new UiMoreGamesCfgItem() ;\n        ins.items.push( item ) ;\n        item.appId = \"wxdaca7b7b61c07cd6\" ;\n        item.iconId = \"Snake\" ;\n        item.name = \"拖尾乱斗\" ; \n\n        ins.thisAppId = \"wx1eead536288187e6\" ;\n        ins.thisAppId = thisAppId ;\n\n        return ins ; \n\n    }\n\n    // 本APP ID\n    public thisAppId : string ;\n\n    // 所有 APP\n    public items = new Array<UiMoreGamesCfgItem>() ;\n\n}\n\nexport class UiMoreGamesCfgItem {\n\n    // 应用ID\n    public appId : string ; \n\n    // 图标ID\n    public iconId : string ;\n\n    // 名称\n    public name : string ;\n\n}","import { director, Input, instantiate, Node, Prefab, resources } from \"cc\";\nimport { GamePause } from \"../../World/2.Td/Flow/GamePause\";\nimport { SceneTransition } from \"../../../Common/Ui/UiLoadingScene\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\nimport { UiSettings } from \"../../../Common/Ui/UiSettings\";\nimport { UiMain } from \"../Main/UiMain\";\nimport { UiFeature } from \"../Main/Feature/UiFeature\";\n\n\nexport class UiPause {\n\n    public static pf : Prefab ;\n\n    public static loadAndCreate( parent : Node , cb : ( ui : UiPause )=>void ) {\n\n        resources.load( \"Game/Ui/Pause\" , Prefab , ( err , data )=>{\n\n            this.pf = data ;\n\n            let root = instantiate( this.pf ) ;\n            let ui = new UiPause() ; \n            ui.init( root ) ;\n            ui.root.setParent( parent , false ) ;\n            cb( ui ) ;\n\n        } ) ;\n\n    }\n\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnHome = this.root.getChildByPath( \"BtnList/btnHome\" ) ;\n        btnHome.on( Input.EventType.TOUCH_END , ()=>{\n            // director.loadScene( \"Home\" ) ; \n            SceneTransition.exe( \"Home\" ) ; \n        } ) ; \n\n        let btnContinue = this.root.getChildByPath( \"BtnList/btnContinue\" ) ;\n        btnContinue.on( Input.EventType.TOUCH_END , ()=>{\n            GamePause.resume() ; \n            this.root.destroy() ; \n        } ) ; \n\n        let btnSettings = this.root.getChildByPath( \"BtnList/btnSettings\" ) ;\n        btnSettings.on( Input.EventType.TOUCH_END , ()=>{\n            UiSettings.create( UiMain.ins.root ).show() ; \n        } ) ; \n\n\n        SoundBtnClickSetter.exe( this.root ) ; \n\n    }\n\n    public refresh() {\n\n        let content = this.root.getChildByPath( \"Feature/sv/view/content\" ) ;\n\n        // 从特性面板中复制显示\n        for( let item of UiFeature.ins.items ) {\n            let node = instantiate( item.root ) ; \n            node.setParent( content ) ; \n        }\n\n    }\n\n}","import { Label, Node } from \"cc\";\nimport { Player } from \"../../World/2.Td/Player/Player\";\nimport { CfgUpgrade } from \"../../../Common/Cfg/CfgUpgrade\";\nimport { UiBar } from \"../Bar/UiBar\";\n\n// 玩家等级\nexport class UiPlayerGrade {\n\n    public static ins : UiPlayerGrade ; \n\n    public root : Node ; \n\n    public val : Label ; \n\n    public bar = new UiBar() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ; \n\n        this.bar.init( this.root.getChildByPath( \"Bar\" ) ) ; \n\n    }\n\n    public refresh() {\n\n        let g = Player.ins.grade ; \n\n        this.val.string = \"Lv.\" + g.grade ; \n\n        let expNeeded = CfgUpgrade.data[ g.grade ] ; \n        this.bar.setProgress( g.exp , expNeeded ) ; \n\n\n    }\n\n}","import { Label } from \"cc\";\r\nimport { Node } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { Lang } from \"../../../Common/Misc/Lang\";\r\nimport { Player } from \"../../World/2.Td/Player/Player\";\r\nimport { PlaySpeedCtrl } from \"../../World/1.Base/Support/Misc/PlaySpeedCtrl\";\r\n\r\n\r\n// 按钮 播放速度 \r\nexport class UiPlaySpeed {\r\n\r\n    public static ins : UiPlaySpeed = null ; \r\n\r\n    public root : Node ; \r\n\r\n    // 文本\r\n    public multiple : Label = null ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\r\n\r\n        this.multiple = this.root.getChildByPath( \"Label\" ).getComponent( Label ) ;\r\n        \r\n        this.refresh() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        let speed = Player.ins.playSpeed ; \r\n\r\n        this.multiple.string = Lang.get( \"Game_PlaySpeed_Text\" ).replace( \"{1}\" , speed.toString() ) ; \r\n\r\n\r\n\r\n    }\r\n\r\n    public onClick() {\r\n\r\n        Player.ins.playSpeed++ ; \r\n        if( Player.ins.playSpeed > 3 ) {\r\n            Player.ins.playSpeed = 1 ; \r\n        }\r\n\r\n        this.refresh() ; \r\n\r\n        PlaySpeedCtrl.exe() ; \r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n","import { instantiate } from \"cc\";\r\nimport { Prefab } from \"cc\";\r\nimport { UiEffectPopup } from \"../../SL/Cocos/Ui/UiEffect\";\r\nimport { Node } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { Sprite } from \"cc\";\r\nimport { SpriteFrame } from \"cc\";\r\nimport { UITransform } from \"cc\";\r\nimport { SoundBtnClickSetter } from \"../Audio/SoundBtnClickSetter\";\r\nimport { BlockInputEvents } from \"cc\";\r\n\r\n// 弹出式UI基类\r\nexport class UiPopupBase {\r\n\r\n    public static pf : Prefab ; \r\n\r\n    // 这个方法不能继承，子类要重写。原因是不能用泛型类new\r\n    public static create( parent : Node ) : UiPopupBase {\r\n\r\n        let root = instantiate( this.pf ) ;\r\n        let ui = new UiPopupBase() ; \r\n        ui.init( root ) ;\r\n        ui.root.setParent( parent , false ) ; \r\n        return ui ; \r\n\r\n    }\r\n\r\n    public root : Node ; \r\n\r\n    public btnClose : Node ; \r\n\r\n    public cover : Sprite ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        SoundBtnClickSetter.exe( this.root ) ; \r\n        \r\n        // 关闭按钮\r\n        this.initBtnClose() ; \r\n\r\n        // 遮挡\r\n        this.initCover() ; \r\n\r\n    }\r\n\r\n    private initBtnClose() {\r\n        this.btnClose = this.root.getChildByPath( \"btnClose\" ) ;\r\n        this.btnClose?.on( Input.EventType.TOUCH_END , ()=>{\r\n            this.root.destroy() ; \r\n        } ) ;\r\n    }\r\n\r\n    // 初始化遮挡\r\n    private initCover() {\r\n\r\n        let coverNode = this.root.getChildByPath( \"Cover\" ) ;\r\n        if( coverNode == null ) {\r\n            // this.cover = new Node() ; \r\n            // let spr = this.cover.addComponent( Sprite ) ; \r\n            // spr.spriteFrame = SpriteFrame.createWithImage()\r\n            return ; \r\n        }\r\n\r\n        // 阻止点击穿透\r\n        if( coverNode.getComponent( BlockInputEvents ) == null ) {\r\n            coverNode.addComponent( BlockInputEvents ) ; \r\n        }\r\n\r\n        // 大小。考虑弹出显示缩放，足够覆盖其他\r\n        coverNode.getComponent( UITransform ).setContentSize( 9999 , 9999 ) ; \r\n\r\n        // 透明度\r\n        let spr = coverNode.getComponent( Sprite ) ; \r\n        let cr = spr.color.clone() ;\r\n        cr.a = 150 ; \r\n        spr.color = cr ; \r\n\r\n        this.cover = spr ; \r\n\r\n    }\r\n\r\n    public show() {\r\n\r\n        UiEffectPopup.show( this.root ) ; \r\n\r\n    }\r\n\r\n}","import { Input, Node } from 'cc';\nimport { UiSettings } from '../../../../../Common/Ui/UiSettings';\nimport { UiMain } from '../../UiMain';\nimport { UiDialog } from '../../../../../Common/Ui/UiDialog';\nimport { UiDailyCheckin } from '../../../Popup/DailyCheckin/UiDailyCheckin';\n\nexport class UiRight {\n\n    public static ins=new UiRight();\n\n    public root:Node;\n\n    //签到奖励按钮\n    public btnDailyCheckin:Node;\n\n    //设置按钮\n    public btnSettings:Node;\n\n    public init(node:Node){\n\n        this.root = node;\n\n        this.btnDailyCheckin = this.root.getChildByPath(\"btnDailyCheckin\");\n\n        this.btnSettings = this.root.getChildByPath(\"btnSettings\");\n        this.btnSettings.on( Input.EventType.TOUCH_END , ()=>{\n            UiSettings.create( UiMain.ins.root ).show() ;\n        } );\n\n        this.btnDailyCheckin.on(Input.EventType.TOUCH_END,()=>{\n            // UiDialog.create( UiMain.ins.root , \"正在开发...\" ).show() ;\n            UiDailyCheckin.create( UiMain.ins.root ).show() ;\n        });\n    }\n\n}\n\n\n\n","import { Input, Node, director } from \"cc\";\nimport { UiSwitch } from \"../../SL/Cocos/Ui/UiSwitch\";\nimport { AudioSettingsPersist } from \"../Audio/AudioSettingsPersist\";\nimport { Music } from \"../Audio/Music\";\nimport { Sound } from \"../Audio/Sound\";\nimport { Prefab } from \"cc\";\nimport { instantiate } from \"cc\";\nimport { SoundBtnClickSetter } from \"../Audio/SoundBtnClickSetter\";\nimport { UiEffectPopup } from \"../../SL/Cocos/Ui/UiEffect\";\n// import { Vibrate, VibratePersist } from \"../Misc/Vibrate\";\n// import { AppConfig } from \"../Misc/AppConfig\";\n\n// 设置的公共部分\nexport class UiSettings {\n\n    public static pf : Prefab ; \n\n    // 载入创建\n    public static create( parent : Node ) : UiSettings {\n\n        let root = instantiate( this.pf ) ; \n        let ui = new UiSettings() ; \n        ui.init( root ) ;\n        ui.root.setParent( parent , false ) ;\n        return ui ; \n\n    }\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        SoundBtnClickSetter.exe( this.root ) ;\n\n        let btnClose = this.root.getChildByPath(\"btnClose\") ; \n        btnClose?.on( Input.EventType.TOUCH_END , ()=>{ \n            this.root.destroy() ; \n        } ) ;\n\n        this.initVibrate() ; \n        this.initAudio() ; \n\n    }\n\n    public show() {\n        UiEffectPopup.show( this.root ) ;\n    }\n\n    public initVibrate() {\n\n        // // 音效\n        // let sound = new UiSwitch() ;\n        // sound.init( this.root.getChildByPath( \"Vibrate/Switch\" ) ) ;\n        // sound.isOn = Vibrate.ins.enabled ; \n        // sound.root.on( Input.EventType.TOUCH_END , ()=>{\n\n        //     Sound.ins.btnClick() ;\n\n        //     Vibrate.ins.enabled = sound.isOn;\n        //     VibratePersist.save() ; \n\n        //     if( Vibrate.ins.enabled == true ) {\n        //         Vibrate.ins.exe( 1 ) ;\n        //     }\n\n        // } ) ;\n\n        // let root = this.root.getChildByPath( \"Vibrate\" ) ;\n        // root.active = AppConfig.ins.vibrateEnabled ;\n\n    }\n\n    public initAudio() {\n\n        // 音效\n        let sound = new UiSwitch() ;\n        sound.init( this.root.getChildByPath( \"Sound/Switch\" ) ) ;\n        sound.isOn = Sound.ins.enabled ; \n        sound.root.on( Input.EventType.TOUCH_END , ()=>{\n            Sound.ins.enabled = sound.isOn ;\n            AudioSettingsPersist.save() ;\n            Sound.ins.btnClick() ;\n\n        } ) ;\n\n        // 音乐\n        let music = new UiSwitch() ;\n        music.init( this.root.getChildByPath( \"Music/Switch\" ) ) ;\n        music.isOn = Music.ins.enabled ; \n        music.root.on( Input.EventType.TOUCH_END , ()=>{\n\n            Music.ins.enabled = music.isOn ;\n            AudioSettingsPersist.save() ;\n            Sound.ins.btnClick() ;\n\n            if( music.isOn == false ) return ; \n\n            if( director.getScene().name == \"Home\" ) {\n\n            }\n            else {\n                Music.ins.home() ; \n            }\n\n        } ) ;\n\n    }\n\n}\n\n","import { Mask } from \"cc\";\nimport { Node } from \"cc\";\nimport { UiShopDaily } from \"./UiShopDaily\";\nimport { instantiate } from \"cc\";\nimport { UiShopMoney001 } from \"./UiShopMoney001\";\n\nexport class UiShop {\n\n    public static ins : UiShop = new UiShop() ; \n\n    public root : Node ; \n\n    public sv \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let sv = this.root.getChildByPath( \"sv\" ) ;\n        let svView = sv.getChildByPath( \"view\" );\n        svView.getComponent( Mask ).enabled = true ; \n        let content = svView.getChildByPath( \"content\" ) ;\n\n        let shopDaily = new UiShopDaily() ; \n        shopDaily.init( content.getChildByPath( \"Daily\" ) ) ; \n\n        let shopMoney001 = new UiShopMoney001() ; \n        shopMoney001.init( content.getChildByPath( \"Money001\" ) ) ; \n\n    }\n\n}\n\n","import { Input } from \"cc\";\nimport { Label } from \"cc\";\nimport { Node } from \"cc\";\nimport { UiListItemGenMgr } from \"./UiListItemGenMgr\";\nimport { Sprite } from \"cc\";\nimport { DateTimeMgr } from \"db://assets/Script/SL/Common/Misc/DateTimeMgr\";\nimport { StringUtil } from \"db://assets/Script/SL/Common/StringUtil\";\nimport { tween } from \"cc\";\nimport { UiItem } from \"db://assets/Script/Common/Item/UiItem\";\nimport { CfgShop, CfgShopItem } from \"./CfgShop\";\nimport { Lang } from \"db://assets/Script/Common/Misc/Lang\";\nimport { Shuffle } from \"db://assets/Script/SL/Common/Misc/Shuffle\";\nimport { UiShopItem } from \"./UiShopItem\";\nimport { UiToast } from \"db://assets/Script/Common/Ui/UiToast\";\nimport { UiMain } from \"../../UiMain\";\nimport { DateTimeUtil } from \"db://assets/Script/SL/Common/Misc/DateTimeUtil\";\nimport { sys } from \"cc\";\nimport { SoundBtnClickSetter } from \"db://assets/Script/Common/Audio/SoundBtnClickSetter\";\nimport { DailyLimit } from \"db://assets/Script/Common/Misc/DailyLimit\";\nimport { Ad } from \"db://assets/Script/Common/Ad/Ad\";\n\n\n\n// 每日商店\nexport class UiShopDaily {\n\n    public data = new ShopDailyData() ; \n\n    public root : Node ; \n\n    // 倒计时\n    public countdown : Label ; \n\n    public items = new Array< UiShopItem >() ; \n\n    public btnRefresh : UiShopDailyBtnRefresh = null ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let countdown = new UiShopDailyCountdown() ; \n        countdown.init( this.root.getChildByPath( \"Refresh/Countdown\" ) ) ; \n\n        this.btnRefresh = new UiShopDailyBtnRefresh() ; \n        this.btnRefresh.init( this.root.getChildByPath( \"Refresh/btnRefresh\" ) ) ; \n        this.btnRefresh.shopDaily = this ; \n\n        // 测试\n        // SoundBtnClickSetter.remove( this.root ) ; \n        // this.root.getChildByPath( \"List/Item\" ).off( Input.EventType.TOUCH_END ) ; \n\n        // 生成 8 个条目\n        let list = this.root.getChildByPath( \"List\" ) ; \n        let gen = new UiListItemGenMgr() ; \n        gen.init( list ) ; \n        gen.setItemCount( 8 ) ;\n        for( let i = 0 ; i < CfgShop.daliyFixed.length ; ++i ) {\n\n            let uiItem = new UiShopItem() ; \n            this.items.push( uiItem ) ; \n            uiItem.init( gen.list[ i ] ) ; \n\n        } // end for\n\n        for( let i = CfgShop.daliyFixed.length ; i < 8 ; ++i ) {\n\n            let uiItem = new UiShopDailyItem() ; \n            this.items.push( uiItem ) ; \n            uiItem.init( gen.list[ i ] ) ; \n            uiItem.shopDaily = this ; \n\n        } // end for\n\n        this.data.load() ; \n\n        this.refreshFixed() ; \n        this.refreshRnd() ; \n\n        this.startCheckReset() ; \n\n    }\n\n    // 检查重置\n    private startCheckReset() {\n\n        tween( this.root ).sequence(\n            tween( this.root ).delay( 2 ) , \n            tween( this.root ).call( ()=>{\n                if( this.data.checkGen() == true ) {\n\n                    for( let uiItem of this.items ) {\n                        uiItem.adDl?.load() ;\n                    }\n                    this.refreshFixed() ; \n                    this.refreshRnd() ; \n                    \n                    this.btnRefresh.dl.load() ; \n                    this.btnRefresh.refreshLeft() ; \n\n                }\n            } ) , \n        ).repeatForever().start() ;\n\n    }\n\n    // 刷新固定的\n    public refreshFixed() {\n\n        let list = CfgShop.daliyFixed ; \n        for( let i = 0 ; i < list.length ; ++i ) {\n            let uiItem = this.items[ i ] ;\n            uiItem.cfg = list[ i ] ; \n            uiItem.refresh() ; \n        } // end for\n\n    }\n\n    // 刷新随机的\n    public refreshRnd() {\n\n        let list = this.data.data ;\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let dataItem = list[ i ] ; \n            let id = dataItem.id ; \n            let cfg = CfgShop.data.get( id ) ; \n\n            let idx = CfgShop.daliyFixed.length + i ; \n            if( idx >= this.items.length ) break ; \n\n            let uiItem = this.items[ idx ] ;\n            uiItem.cfg = cfg ; \n            uiItem.refresh() ; \n\n        } // end for\n\n    }\n\n}\n\n\nclass UiShopDailyItem extends UiShopItem {\n\n    public shopDaily : UiShopDaily = null ; \n\n    public override init( node : Node ) {\n\n        super.init( node ) ; \n\n        // 还原回默认的按钮点击事件\n        /*\n            为什么 off 后还有音效，因为 UiMain 会在之后添加音效。\n        */\n        this.root.off( Input.EventType.TOUCH_END ) ; \n        this.root.on( Input.EventType.TOUCH_END , ()=>{ this.onClick( ) ; } ) ; \n\n        this.onGetItems = ()=>{ this.onGetItems_( ) ; } ;\n\n    }\n\n    public override refresh() {\n\n        super.refresh() ; \n\n        this.soldOut.active = false ; \n\n        let dataItem = this.shopDaily.data.data.find( ( e )=>{ return e.id == this.cfg.id ; } ) ;\n        if( dataItem.left <= 0 ) {\n            // 售空\n            this.setSoldOut( ) ;\n        }\n        else {\n            \n\n        }\n\n    }\n\n    public override onClick( ) {\n\n        let dataItem = this.shopDaily.data.data.find( ( e )=>{ return e.id == this.cfg.id ; } ) ;\n        if( dataItem.left <= 0 ) {\n            UiToast.show( UiMain.ins.root , Lang.get( \"Shop_SoldOut\" ) , 1 ) ; \n            return ; \n        }\n\n        super.onClick() ; \n\n    }\n\n    // 设置售空\n    public setSoldOut( ) {\n\n        this.cost.root.active = false ; \n        this.costAd.active = false ; \n        this.soldOut.active = true ; \n\n    }\n\n    // 获得物品\n    public onGetItems_( ) {\n\n        let dataItem = this.shopDaily.data.data.find( ( e )=>{ return e.id == this.cfg.id ; } ) ;\n        dataItem.left-- ;\n        if( dataItem.left <= 0 ) {\n            this.setSoldOut( ) ; \n        }\n        this.shopDaily.data.save() ; \n\n    }\n\n}\n\n\n// 每日商店数据\nclass ShopDailyData {\n\n    // 配置项ID，是否领过\n    public data = new Array< ShopDailyDataItem >() ; \n\n    // 生成时候的日期\n    public dt : Date = null ; \n\n    // 检查是否要重新生成\n    public checkGen() : boolean {\n\n        let dtNow = DateTimeMgr.ins.getNowDateTime() ; \n        if( DateTimeUtil.dateEquals( this.dt , dtNow ) == false ) {\n            // 日期不等\n            // 重新刷新\n            this.gen() ; \n            return true ; \n        }\n\n        return false ; \n\n    }\n\n    public load() {\n\n        let str = sys.localStorage.getItem( \"ShopDaliy\" ) ;\n        if( str == null || str == \"\" ) {\n            this.gen() ; \n            return ; \n        }\n\n        let j = JSON.parse( str ) ; \n        this.dt = new Date( j[ \"Date\" ] ) ; \n        let dtNow = DateTimeMgr.ins.getNowDateTime() ; \n\n        if( DateTimeUtil.dateEquals( this.dt , dtNow ) == false ) {\n            // 日期不等\n            // 重新刷新\n            this.gen() ; \n            return ; \n        }\n\n        // 解析数据\n        let rnd = j[ \"Rnd\" ] ; \n        for( let i = 0 ; i < rnd.length ; ++i ) {\n            let j3 = rnd[ i ] ;\n\n            let item = new ShopDailyDataItem() ; \n            let id = j3[ \"Id\" ] ;\n            // 如果有找不到的配置项\n            if( CfgShop.data.get( id ) == null ) {\n                // 重新生成\n                this.gen() ; \n                return ; \n            }\n\n            this.data.push( item ) ;\n            item.id = id ;\n            item.left = Number( j3[ \"Left\" ] ) ; \n        }\n\n\n    }\n\n    // 生成数据\n    public gen() {\n\n        this.data.splice( 0 , this.data.length ) ; \n\n        let list = ShopDailyExtract.exe( 8 - CfgShop.daliyFixed.length ) ; \n        for( let i = 0 ; i < list.length ; ++i ) {\n            let cfg = list[ i ] ;\n            let dataItem = new ShopDailyDataItem() ;\n            dataItem.id = cfg.id ; \n            dataItem.left = 1 ; \n            this.data.push( dataItem ) ; \n        }\n\n        this.save() ; \n\n    }\n\n    public save() {\n\n        let j = {} ; \n\n        this.dt = DateTimeMgr.ins.getNowDateTime() ; \n        j[ \"Date\" ] = DateTimeUtil.toDateString( this.dt ) ; \n        let rnd = [] ;\n        j[ \"Rnd\" ] = rnd ; \n        \n        for( let i = 0 ; i < this.data.length ; ++i ) {\n            let dataItem = this.data[ i ] ;\n\n            let j3 = {} ;\n            rnd.push( j3 ) ;\n            j3[ \"Id\" ] = dataItem.id ; \n            j3[ \"Left\" ] = dataItem.left ; \n\n        } // end for\n\n        let str = JSON.stringify( j ) ; \n        sys.localStorage.setItem( \"ShopDaliy\" , str ) ;\n\n    }\n   \n\n}\n\nclass ShopDailyDataItem {\n\n    // 配置项的ID\n    public id : string ; \n\n    // 剩余购买次数\n    public left : number ; \n\n}\n\n\n// 每日商店抽取\nclass ShopDailyExtract {\n\n    public static exe( n : number ) : Array< CfgShopItem > {\n\n        let data = CfgShop.daliy.slice( ) ; \n        Shuffle.shuffleArray( data ) ; \n\n        return data.slice( 0 , n ) ; \n\n    }\n\n\n\n}\n\n\n\n// 倒计时\nexport class UiShopDailyCountdown {\n\n    public root : Node ; \n\n    public val : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ; \n        this.refresh() ; \n        this.startAutoRefresh() ; \n\n    }\n\n    public refresh() {\n\n        let dt = DateTimeMgr.ins.getNowDateTime() ;\n        // 今天流逝的秒数\n        let s = dt.getMinutes() * 60 + dt.getHours() * 60 * 60 + dt.getSeconds() ; \n\n        // 倒计时秒数\n        let s2 = 24 * 60 * 60 - s ;\n        this.val.string = this.secondToString( s2 ) ; \n\n    }\n\n    // 秒数转成 hh:mm:ss 字符串\n    public secondToString( s : number ) : string {\n\n        let h = Math.floor( s / ( 60 * 60 ) ) ; \n        let left = s % ( 60 * 60 ) ;\n        let m = Math.floor( left / 60 ) ;\n        left = left % 60 ;\n\n        let str = StringUtil.fillZero( h , 2 ) + \":\" + \n            StringUtil.fillZero( m , 2 ) + \":\" + \n            StringUtil.fillZero( left , 2 ) ; \n        return str ; \n\n    }\n\n    public startAutoRefresh() {\n\n        tween( this.root ).sequence(\n\n            tween( this.root ).delay( 1 ) , \n            tween( this.root ).call( ()=>{\n                this.refresh() ; \n            } )\n\n        ).repeatForever().start() ;\n\n    }\n\n}\n\n// 刷新按钮\nexport class UiShopDailyBtnRefresh {\n\n    public shopDaily : UiShopDaily ; \n\n    public root : Node ; \n\n    // 剩余次数\n    public left : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\n\n        this.left = this.root.getChildByPath( \"Left\" ).getComponent( Label ) ; \n\n        this.dl.load() ; \n\n        this.refreshLeft() ; \n\n\n    }\n\n    // 刷新剩余次数\n    public refreshLeft() {\n\n        let str = Lang.get( \"Home_LeftToday\" ).replace( \"{1}\" , this.dl.current.toString() ) ;\n        this.left.string = str ; \n\n    }\n\n    private onClick() {\n\n        if( this.dl.current <= 0 ) {\n            // 次数用完\n            let str = Lang.get( \"Home_NotEnoughForToday\" ) ; \n            UiToast.show( UiMain.ins.root , str ) ; \n            return ;\n        }\n\n        let onSuccess = ()=>{\n\n            this.dl.decrement() ; \n            this.dl.save() ; \n    \n            this.refreshLeft() ; \n    \n            this.shopDaily.data.gen() ; \n            this.shopDaily.refreshRnd() ; \n\n        } ;\n        let onCancel = ()=>{\n\n        } ;\n        let onError = ()=>{\n\n        } ; \n        Ad.ins.rewardShow( onSuccess , onCancel , onError ) ;\n\n    }\n\n    public dl = new DailyLimit( \"DailyLimit_ShopDailyBtnRefresh\" , 20 ) ;\n\n}","import { Node } from \"cc\";\nimport { Label } from \"cc\";\nimport { UiItemIcon } from \"db://assets/Script/Common/Item/UiItemIcon\";\nimport { Lang } from \"db://assets/Script/Common/Misc/Lang\";\nimport { CfgShopItem } from \"./CfgShop\";\nimport { ItemData } from \"db://assets/Script/Common/Item/ItemData\";\nimport { Input } from \"cc\";\nimport { UiGet } from \"../../../Popup/UiGet\";\nimport { UiMain } from \"../../UiMain\";\nimport { ItemSub } from \"db://assets/Script/Common/Item/ItemSub\";\nimport { ItemGet } from \"db://assets/Script/Common/Item/ItemGet\";\nimport { Ad } from \"db://assets/Script/Common/Ad/Ad\";\nimport { UiBgQuality } from \"db://assets/Script/Common/Ui/UiBgQuality\";\nimport { CfgItem, CfgItemMgr } from \"db://assets/Script/Common/Cfg/CfgItem\";\nimport { DailyLimit } from \"db://assets/Script/Common/Misc/DailyLimit\";\nimport { UiToast } from \"db://assets/Script/Common/Ui/UiToast\";\nimport { SoundBtnClickSetter } from \"db://assets/Script/Common/Audio/SoundBtnClickSetter\";\nimport { UiDialog } from \"../../../../../Common/Ui/UiDialog\";\n\nexport class UiShopItem {\n\n    public cfg : CfgShopItem = null ; \n\n    public onGetItems : ()=>void = null ; \n\n    public root : Node ; \n\n    // 图标\n    public icon : UiItemIcon ; \n\n    // 数量\n    public count : Label ; \n\n    // 品质背景\n    public bg : UiBgQuality ; \n\n    // 名字\n    public name : Label ; \n    \n    // 花费\n    public cost : UiCost ; \n\n    // 广告\n    public costAd : Node ; \n    public costAdLabel : Label ; \n\n    // 售空标志\n    public soldOut : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        // SoundBtnClickSetter.exe( this.root ) ; \n        \n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ; \n\n        this.icon = new UiItemIcon() ; \n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ; \n\n        this.count = this.root.getChildByPath( \"Count\" ).getComponent( Label ) ; \n\n        let t = this.root.getChildByPath( \"Icon/bg\" ) ; \n        if( t != null ) {\n            this.bg = new UiBgQuality() ; \n            this.bg.init( t ) ;\n        }\n\n        this.cost = new UiCost() ; \n        this.cost.init( this.root.getChildByPath( \"Cost\" ) ) ; \n\n        this.costAd = this.root.getChildByPath( \"CostAd\" ) ; \n        this.costAd.active = false ; \n\n        this.costAdLabel = this.costAd.getChildByPath( \"val\" ).getComponent( Label ) ; \n\n        this.soldOut = this.root.getChildByPath( \"SoldOut\" ) ;\n        if( this.soldOut ) {\n            this.soldOut.active = false ; \n        }\n        \n\n    }\n\n    public refresh() {\n\n        this.refreshGeneral() ; \n\n        this.refreshCost() ; \n\n    }\n\n    // 刷新一般性信息\n    private refreshGeneral() {\n\n        // 条目名字\n        this.name.string = Lang.get( this.cfg.nameLangId ) ; \n\n        // 物品图标\n        this.icon.refresh( this.cfg.target.id ) ; \n\n        // 物品数量\n        this.count.string = \"x\" + this.cfg.target.count ; \n\n        // 物品背景 品质\n        if( this.bg != null ) {\n            let cfg2 = CfgItemMgr.data.get( this.cfg.target.id ) ;\n            if( cfg2 != null ) {\n                this.bg.show( cfg2.quality ) ;\n            }\n        }\n\n    }\n\n    // 刷新获取代价信息\n    private refreshCost() {\n\n        let isAd = this.cfg.adDaliyLimitId != null ; \n\n        this.cost.root.active = !isAd ; \n        this.costAd.active = isAd ; \n\n        if( isAd ) {\n            // 广告获取\n\n            if( this.adDl == null ) {\n                let id = \"DailyLimit_\" + this.cfg.adDaliyLimitId ; \n                this.adDl = new DailyLimit( id , this.cfg.adDaliyLimitTotal ) ; \n                this.adDl.load() ; \n            }\n\n            // 刷新次数\n            this.refreshAdLeft() ; \n\n        }\n        else {\n            // 消耗物品\n            this.cost.refresh( this.cfg.cost ) ;\n\n        }\n\n    }\n\n    // 刷新广告剩余次数\n    public refreshAdLeft() {\n\n        // 刷新次数\n        let str = Lang.get( \"Shop_Free\" ) + \"(\" + this.adDl.current + \")\" ; \n        this.costAdLabel.string = str ; \n\n    }\n\n    public onClick() {\n\n        if( this.cfg.adDaliyLimitId ) {\n\n            // 广告获取\n            this.ad( ) ; \n            return ; \n\n        }\n\n        // 确认对话框\n        let ui = UiDialog.create( UiMain.ins.root , \"确认购买吗？\" ) ;\n        ui.show() ; \n        ui.btnOK.on( Input.EventType.TOUCH_END , ()=>{\n\n            if( ItemSub.exe( [ this.cfg.cost ] ) == false ) return ; \n            this.getItems() ; \n\n        } ) ; \n\n\n    }\n\n    // 广告获取\n    private ad() {\n\n        // 判断次数\n        if( this.adDl.current <= 0 ) {\n\n            UiToast.show( UiMain.ins.root , Lang.get( \"AdLeftNotEnough\" ) ) ; \n            return ; \n        }\n\n\n        let onSuccess = ()=>{\n\n            this.getItems() ; \n\n            this.adDl.decrement() ; \n            this.adDl.save() ; \n            this.refreshAdLeft() ; \n\n        } ;\n        let onCancel = ()=>{\n\n        } ;\n        let onError = ()=>{\n\n        } ; \n        Ad.ins.rewardShow( onSuccess , onCancel , onError ) ;\n\n    }\n\n    private getItems() {\n\n        // 提示\n        let uiGet = UiGet.create( UiMain.ins.root ) ; \n        uiGet.itemList.refresh( [ this.cfg.target ] ) ;\n        uiGet.itemList.showAnim() ; \n\n        // 到账\n        ItemGet.addList( [ this.cfg.target ] ) ; \n\n        this.onGetItems?.() ;\n\n    }\n\n    // 广告每日次数限制\n    public adDl : DailyLimit = null ;\n\n}\n\n\n\n// 花费\nexport class UiCost {\n\n    public root : Node ; \n\n    public icon : UiItemIcon ; \n\n    public count : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = new UiItemIcon() ; \n        this.icon.init( this.root ) ; \n\n        this.count = this.root.getChildByPath( \"Count\" ).getComponent( Label ) ;\n\n    }\n\n    public refresh( itemData : ItemData ) {\n\n        this.icon.refresh( itemData.id ) ;\n        this.count.string = itemData.count.toString() ; \n\n    }\n\n\n\n}\n\n\n","import { Node } from \"cc\";\nimport { UiListItemGenMgr } from \"./UiListItemGenMgr\";\nimport { CfgShop } from \"./CfgShop\";\nimport { UiShopItem } from \"./UiShopItem\";\nimport { instantiate } from \"cc\";\nimport { random } from \"cc\";\nimport { Vec3 } from \"cc\";\nimport { randomRangeInt } from \"cc\";\n\nexport class UiShopMoney001 {\n\n    public root : Node ; \n\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let cfg = CfgShop.money001 ; \n\n        let list = new UiListItemGenMgr() ; \n        list.init( this.root.getChildByPath( \"List\" ) ) ; \n        list.setItemCount( cfg.length ) ;\n\n        // 金币图标数量\n        let t = [ 3 , 10 , 45 ] ; \n        for( let i = 0 ; i < cfg.length ; ++i ) {\n\n            let uiItem = new UiShopItem() ; \n            uiItem.init( list.list[ i ] ) ; \n            \n            let cfgItem = cfg[ i ] ; \n            uiItem.cfg = cfgItem ; \n            uiItem.refresh() ; \n\n            // 随机生成图标\n            this.rndIcon( uiItem.icon.root.children[ 0 ] , t[ i ] ) ; \n\n        } // end for\n\n\n\n    }\n\n    private rndIcon( node : Node , n : number ) {\n\n        for( let i = 0 ; i < n ; ++i ) {\n\n            let node2 = instantiate( node ) ;\n            node2.setParent( node.parent , false ) ;\n            node2.position = new Vec3( randomRangeInt( -80 , 80 ) , randomRangeInt( -80 , 80 ) ) ;\n\n        }\n\n    }\n\n}","import { Node } from \"cc\";\r\nimport { Label } from \"cc\";\r\nimport { Account } from \"../../../../Common/Account/Account\";\r\nimport { StaminaRecovery } from \"../../../../Common/Misc/StaminaRecovery\";\r\nimport { StringUtil } from \"../../../../SL/Common/StringUtil\";\r\nimport { tween } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { UiStaminaBuy } from \"../../Popup/UiStaminaBuy\";\r\nimport { UiMain } from \"../UiMain\";\r\n\r\n// 体力\r\nexport class UiStamina {\r\n\r\n    public static ins : UiStamina = null ; \r\n\r\n    public root : Node ; \r\n\r\n    public val : Label ;\r\n\r\n    public countdown : Label ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ;\r\n        this.val.string = \"0\" ; \r\n\r\n        this.countdown = this.root.getChildByPath( \"Countdown\" ).getComponent( Label ) ;\r\n        this.countdown.string = \"0\" ; \r\n\r\n        this.refresh() ; \r\n        \r\n        this.autoRefreshStart() ; \r\n\r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\r\n\r\n    }\r\n\r\n    private onClick() {\r\n        \r\n        UiStaminaBuy.create( UiMain.ins.root ).show() ; \r\n\r\n    }\r\n\r\n    public autoRefreshStart() {\r\n\r\n        tween( this.root ).sequence(\r\n\r\n            tween( this.root ).call( ()=>{\r\n                this.refresh() ; \r\n            } ) , \r\n\r\n            tween( this.root ).delay( 1 ) , \r\n\r\n        ).repeatForever().start() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        let a = Account.ins ; \r\n        let str = a.stamina.current + \"/\" + a.stamina.max ; \r\n        this.val.string = str ; \r\n\r\n        // 倒计时\r\n        this.refreshCountdown() ; \r\n\r\n    }\r\n\r\n    // 倒计时\r\n    public refreshCountdown() {\r\n\r\n        // 判断是否已满\r\n        let stamina = Account.ins.stamina ; \r\n        if( stamina.current >= stamina.max ) {\r\n            this.countdown.node.active = false ; \r\n            return ;\r\n        }\r\n\r\n        StaminaRecovery.ins.exe() ; \r\n        this.countdown.node.active = true ; \r\n\r\n        let countdown = StaminaRecovery.ins.countdown ; \r\n        let m = Math.floor( countdown / 60 ) ;\r\n        let s = countdown % 60 ;\r\n        let str = StringUtil.fillZero( m , 2 ) + \":\" + StringUtil.fillZero( s , 2 ) ; \r\n        this.countdown.string = str ; \r\n\r\n    }\r\n\r\n\r\n    \r\n}","\r\nimport { Node } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { Label } from \"cc\";\r\nimport { Ad } from \"../../../Common/Ad/Ad\";\r\nimport { UiDialog } from \"../../../Common/Ui/UiDialog\";\r\nimport { UiMain } from \"../Main/UiMain\";\r\nimport { UiStamina } from \"../Main/Margin/UiStamina\";\r\nimport { Account } from \"../../../Common/Account/Account\";\r\nimport { UiToast } from \"../../../Common/Ui/UiToast\";\r\nimport { UiMoney002 } from \"../Main/Margin/UiMoney002\";\r\nimport { Lang } from \"../../../Common/Misc/Lang\";\r\nimport { UiPopupBase } from \"../../../Common/Ui/UiPopupBase\";\r\nimport { DailyLimit } from \"../../../Common/Misc/DailyLimit\";\r\nimport { instantiate } from \"cc\";\r\nimport { UiGet } from \"./UiGet\";\r\nimport { ItemData } from \"../../../Common/Item/ItemData\";\r\nimport { input } from \"cc\";\r\nimport { ItemType } from \"../../../Common/Item/ItemType\";\r\n\r\n// 体力兑换\r\nexport class UiStaminaBuy extends UiPopupBase {\r\n\r\n    public static override create( parent : Node ) : UiPopupBase {\r\n\r\n        let root = instantiate( this.pf ) ;\r\n        let ui = new UiStaminaBuy() ; \r\n        ui.init( root ) ;\r\n        ui.root.setParent( parent , false ) ; \r\n        return ui ; \r\n\r\n    }\r\n\r\n    public itemAd = new UiStaminaBuyItem() ; \r\n    public itemMoney002 = new UiStaminaBuyItem() ; \r\n\r\n    public override init( node : Node ) {\r\n\r\n        super.init( node ) ; \r\n\r\n        this.itemAd.dailyLimit = new DailyLimit( \"DailyLimit_StaminaBuy_Ad\" , 5 ) ; \r\n        this.itemAd.init( this.root.getChildByPath( \"List/Ad\" ) ) ; \r\n        this.itemAd.root.on( Input.EventType.TOUCH_END , this.onClick_Ad , this ) ;\r\n\r\n        this.itemMoney002.dailyLimit = new DailyLimit( \"DailyLimit_Money002_Ad\" , 5 ) ;  \r\n        this.itemMoney002.init( this.root.getChildByPath( \"List/Money002\" ) ) ;\r\n        this.itemMoney002.root.on( Input.EventType.TOUCH_END , this.onClick_Money002 , this ) ;\r\n\r\n\r\n    }\r\n\r\n    private onClick_Ad() {\r\n        \r\n        // 次数判断\r\n        if( this.itemAd.dailyLimit.current <= 0 ) {\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_NotEnoughForToday\" ) , 1.5 ) ;\r\n            return ; \r\n        }\r\n\r\n        // 广告播放完成\r\n        let onSuccess = ()=>{\r\n\r\n            // 获得体力\r\n            Account.ins.stamina.current += 10 ; \r\n            UiStamina.ins.refresh() ; \r\n\r\n            // 获得物件 UI\r\n            let uiGet = UiGet.create( UiMain.ins.root ) ;\r\n            uiGet.show() ; \r\n            uiGet.itemList.refresh( [ new ItemData( ItemType.Stamina , 10 ) ] ) ;\r\n            uiGet.root.on( Input.EventType.TOUCH_END , ()=>{\r\n                // 提示获得\r\n                let str = Lang.get( \"Home_SiaminaAdd\" ).replace( \"{1}\" , \"10\" ) ; \r\n                UiToast.show( UiMain.ins.root , str , 1.5 ) ;\r\n            } ) ;\r\n\r\n            // 限制次数递减\r\n            this.itemAd.dailyLimit.decrement() ; \r\n            this.itemAd.dailyLimit.save() ; \r\n            this.itemAd.refresh( ) ;\r\n\r\n        } ;\r\n        let onCancel = ()=>{\r\n            UiDialog.create( UiMain.ins.root , \"要看完广告才能领取奖励呢~\" ).show() ;\r\n        } ; \r\n        let onError = ( err )=>{\r\n            UiDialog.create( UiMain.ins.root , \"广告播放错误：\" + err ).show() ;\r\n        } ; \r\n        Ad.ins.rewardShow( onSuccess , onCancel , onError ) ; \r\n\r\n    }\r\n\r\n    private onClick_Money002() {\r\n\r\n        if( this.itemMoney002.dailyLimit.current <= 0 ) {\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_NotEnoughForToday\" ) , 1.5 ) ;\r\n            return ; \r\n        }\r\n\r\n        let m002 = Account.ins.money.money002 ;\r\n        m002 -= 100 ;\r\n        if( m002 < 0 ) {\r\n            // 不足\r\n\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_Money002NotEnough\" ) , 1.5 ) ;\r\n\r\n            return ;\r\n        }\r\n        Account.ins.money.money002 = m002 ; \r\n        UiMoney002.ins.refresh() ; \r\n\r\n        // 获得物件 UI\r\n        let uiGet = UiGet.create( UiMain.ins.root ) ;\r\n        uiGet.show() ; \r\n        uiGet.itemList.refresh( [ new ItemData( ItemType.Stamina , 10 ) ] ) ;\r\n        uiGet.root.on( Input.EventType.TOUCH_END , ()=>{\r\n            // 提示获得\r\n            let str = Lang.get( \"Home_SiaminaAdd\" ).replace( \"{1}\" , \"10\" ) ; \r\n            UiToast.show( UiMain.ins.root , str , 1.5 ) ;\r\n        } ) ;\r\n\r\n        // 获得体力\r\n        Account.ins.stamina.current += 10 ; \r\n        UiStamina.ins.refresh() ; \r\n\r\n        // 限制次数递减\r\n        this.itemMoney002.dailyLimit.decrement() ; \r\n        this.itemMoney002.dailyLimit.save() ; \r\n        this.itemMoney002.refresh( ) ;\r\n\r\n    }\r\n    \r\n    \r\n}\r\n\r\n\r\nexport class UiStaminaBuyItem {\r\n\r\n    public root : Node ; \r\n\r\n    public left : Label ; \r\n\r\n    // 每日限制\r\n    public dailyLimit : DailyLimit = null ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.left = this.root.getChildByPath( \"Left\" ).getComponent( Label ) ; \r\n\r\n        this.dailyLimit.load() ; \r\n        this.refresh() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        this.refreshLeft( this.dailyLimit.current ) ;\r\n\r\n    }\r\n\r\n    public refreshLeft( n : number ) {\r\n\r\n        let str = Lang.get( \"Home_LeftToday\" ).replace( \"{1}\" , n.toString() ) ; \r\n        // let str = \"今日剩余{1}次\".replace( \"{1}\" , n.toString() ) ; \r\n        this.left.string = str ; \r\n\r\n    }\r\n\r\n}","import { Input, instantiate, Label, Node, Prefab, resources, Sprite, Tween, tween, Vec3 } from \"cc\";\nimport { UiBar } from \"../Bar/UiBar\";\nimport { Stats, StatsItem } from \"../../World/1.Base/Support/Misc/Stats\";\nimport { ArticleString } from \"../../../Common/String/ArticleString\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { UiArticleIcon, UiArticleIconBg } from \"../../../Common/Ui/UiArticleIcon\";\n\n// 统计 按钮\nexport class UiStateBtn {\n\n    public root : Node ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \n\n    }\n\n    public onClick( ) {\n\n        if( this.stats == null ) {\n         \n            UiStats.loadAndCreate( ( ui )=>{\n                this.stats = ui ; \n                this.stats.root.setParent( this.root , false ) ;\n                this.stats.root.position = new Vec3( 20 , -370 ) ;\n    \n                this.stats.autoRefreshStart() ;\n                \n            } ) ;\n\n            return ;\n\n        }\n\n        let b = !this.stats.root.active ; \n        this.stats.root.active = b ; \n        if( b == true ) {\n            this.stats.autoRefreshStart() ;\n        }\n        else {\n            this.stats.autoRefreshStop() ;\n        }\n\n    }\n\n    public stats : UiStats = null ; \n\n}\n\n\n// 统计\nexport class UiStats {\n\n    public static loadAndCreate( cb : ( ui : UiStats )=>void ) {\n\n        resources.load( \"Game/Ui/Stats\" , Prefab , ( err , data )=>{\n\n            let root = instantiate( data ) ; \n            \n            let ui = new UiStats() ; \n            ui.init( root ) ;\n\n            cb( ui ) ;\n\n        } ) ; \n\n    }\n\n    public root : Node ; \n\n    public pfItem : Node ; \n\n    public items = new Array< UiStatsItem >() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.pfItem = this.root.getChildByPath( \"List/Item\" ) ;\n        this.pfItem.active = false ; \n\n    }\n\n    public autoRefreshStart() {\n\n        tween( this.root ).sequence(\n            tween( this.root ).call( ()=>{\n                this.refresh() ; \n            } ) , \n            tween( this.root ).delay( 0.5 ) , \n        ).repeatForever().start() ;\n\n    }\n\n    public autoRefreshStop() {\n        Tween.stopAllByTarget( this.root ) ;\n    }\n\n    public refresh() {\n\n        let list = Stats.ins.sort() ; \n\n        this.setItemCount( list.length ) ; \n\n        // 取得总体伤害\n        let total = 0 ;\n        for( let item of list ) {\n            total += item.damage ; \n        }\n\n        for( let i = 0 ; i < list.length && i < 5 ; ++i ) {\n\n            let item = list[ i ] ;\n            let uiItem = this.items[ i ] ;\n            uiItem.refresh( item ) ; \n\n            // 伤害百分比\n            let val = item.damage / total ;\n\n            // 条\n            uiItem.bar.fillRange = val ; \n\n            // 数值。保留1位小数\n            let val2 = Math.floor( val * 1000 ) / 10 ;\n            uiItem.info.string = val2 + \" %\" ;\n\n        } // end for\n\n    }\n\n    private setItemCount( n : number ) {\n\n        let diff = n - this.items.length ; \n        for( let i = 0 ; i < diff ; ++i ){\n\n            let node = instantiate( this.pfItem ) ;\n            node.setParent( this.pfItem.parent ) ;\n            node.active = true ; \n\n            let uiItem = new UiStatsItem() ; \n            uiItem.init( node ) ; \n            this.items.push( uiItem ) ;\n\n        } // end for\n\n        // 不显示多余的\n        for( let i = this.items.length + diff ; i < this.items.length ; ++i ) {\n            this.items[ i ].root.active = false ; \n        }\n\n    }\n    \n}\n\n// 统计条目\nexport class UiStatsItem {\n\n    public item : StatsItem = null ; \n\n    public root : Node ;\n\n    public icon = new UiArticleIcon() ; \n    public iconBg = new UiArticleIconBg() ; \n\n    public name : Label ; \n\n    public info : Label ; \n\n    public bar : Sprite ; \n\n    public init( node : Node ) {\n\n        this.root = node ;  \n\n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ;\n        this.iconBg.init( this.root.getChildByPath( \"Icon/bg\" ) ) ;\n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n\n        this.info = this.root.getChildByPath( \"Info\" ).getComponent( Label ) ;\n\n        this.bar = this.root.getChildByPath( \"Bar/bar\" ).getComponent( Sprite ) ;\n        this.bar.fillRange = 0 ; \n\n\n    }\n\n    public refresh( item : StatsItem ) {\n\n        if( this.item == item ) return ; \n        this.item = item ; \n\n        this.name.string = ArticleString.getName( item.id ) ;\n\n        this.icon.refresh( item.id ) ;\n        this.iconBg.refresh( item.id ) ;\n\n    }\n\n}\n\n\n\n\n","import { Input, Node } from \"cc\";\n\n/*\n    开关。实现节点显示切换。\n    在 root 上注册点击事件，然后获取 isOn 的值\n*/ \nexport class UiSwitch {\n\n    public root : Node ; \n\n    public on : Node ;\n    public off : Node ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.on = this.root.getChildByPath( \"On\" ) ;\n        this.off = this.root.getChildByPath( \"Off\" ) ;\n\n        this.isOn = true ; \n\n        this.root.on( Input.EventType.TOUCH_END , ()=>{\n            this.isOn = !this.isOn ; \n        } , this ) ;\n\n    }\n\n    public set isOn( val : boolean ) {\n        this.on.active = val ;\n        this.off.active = !val ;\n    }\n\n    public get isOn(){\n        return this.on.active ;\n    }\n\n}","import { Label } from \"cc\";\nimport { Input } from \"cc\";\nimport { Node } from \"cc\";\n\n\n/*\n    底部Tab页\n    选中的条目向上移动\n*/ \nexport class UiTabHeaderBottom\n{\n\n    // 选择改变\n    public onSelectChange : ( item : UiTabHeaderItem )=>void = null ; \n\n    public root : Node ;\n\n    // 当前标志\n    public currentFlag : Node = null ; \n\n    // 所有的条目\n    public get items() : Array< UiTabHeaderItem > {\n        return this.header.items ; \n    }\n\n    public init(node : Node ) : void \n    {\n        this.root = node;\n\n        this.currentFlag = this.root.getChildByPath( \"CurrentFlag\" ) ;\n\n        this.header.init( this.root.getChildByPath( \"TabHeader\" ) ) ;\n        for( let i = 0 ; i < this.header.items.length ; ++i ) {\n            let item = this.header.items[ i ] ; \n            // let idx = i ; \n            let name = item.root.name ; \n            item.root.off( Input.EventType.TOUCH_END ) ;\n            item.root.on( Input.EventType.TOUCH_END , ()=>{ this.show( name ); } ) ; \n        } // end for\n\n    }\n\n    public show( name : string ) {\n\n        if( this.header.currentItem?.root.name == name ) return ;\n\n        this.header.showByName( name ) ;\n\n        // 设置选中标志\n        let currentItem = this.header.currentItem ;\n        let pos = this.currentFlag.worldPosition.clone() ; \n        pos.x = currentItem.root.worldPosition.x ; \n        this.currentFlag.worldPosition = pos ; \n\n        this?.onSelectChange( currentItem ) ;\n\n    }\n\n    private header = new UiTabHeader() ; \n\n}\n\n\nexport class UiTabHeader\n{\n    // 当前选中的\n    public currentItem : UiTabHeaderItem = null ; \n\n    public root : Node ;\n\n    public items = new Array< UiTabHeaderItem >();\n\n    public init(node : Node ) : void \n    {\n        this.root = node;\n        let children = this.root.children;\n        for ( let i = 0; i < children.length ; ++i)\n        {\n            let uiItem = new UiTabHeaderItem();\n            let trans = children[ i ];\n            uiItem.init( trans );\n            this.items.push( uiItem ) ; \n\n            let idx = i;\n            uiItem.root.on( Input.EventType.TOUCH_END , ()=>{ this.showByIndex(idx); } ) ; \n\n        } // end for\n\n    }\n\n    public showByName( name : string ) {\n\n        let item = this.items.find( ( e )=>{ return e.root.name == name ; } ) ;\n        if( item == null ) return ; \n\n        if( item == this.currentItem ) return ; \n\n        for ( let i = 0; i < this.items.length; ++i)\n        {\n            let itemTemp = this.items[i] ;\n            if( itemTemp == item ) continue ; \n            itemTemp.show(false);\n\n        } // end for\n    \n        this.currentItem = item ;\n        this.currentItem.show(true);\n\n    }\n\n    // 显示指定的 Tab 按钮\n    public showByIndex( idx : number ) : void\n    {\n        for ( let i = 0; i < this.items.length; ++i)\n        {\n            let item = this.items[i] ;\n            item.show(false);\n\n        } // end for\n\n        this.currentItem = this.items[idx] ;\n        this.currentItem.show(true);\n\n    }\n\n}\n\nexport class UiTabHeaderItem\n{\n\n    public root : Node ; \n\n    // 按钮图标\n    public icon : Node ; \n\n    // 文字\n    public txt : Label ; \n\n    public init( node : Node ) : void\n    {\n        this.root = node;\n        this.icon = this.root.getChildByPath( \"Icon\" ) ;\n        this.txt = this.root.getChildByPath( \"Label\" ).getComponent( Label ) ;\n\n        this.show(false);\n\n    }\n\n    // 显示\n    public show( val : boolean ) : void\n    {\n        // 选中的 图标向上移动\n        let pos = this.icon.position.clone() ;\n        pos.y = val == true ? 30 : 0 ;\n        this.icon.position = pos ; \n\n    }\n\n}","import { Node } from \"cc\";\r\nimport { Label } from \"cc\";\r\n\r\nexport class UiTextBox {\r\n\r\n    public root : Node ; \r\n\r\n    public label : Label ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.label = this.root.getComponentInChildren( Label ) ; \r\n        this.label.string = \"\" ; \r\n\r\n    }\r\n\r\n    \r\n\r\n}","import { instantiate, Label, Node, Prefab, resources, tween, UITransform, Vec3 } from \"cc\";\n\nexport class UiToast {\n\n    public static pf : Prefab ; \n\n    public static loadPf() {\n\n        if( this.pf != null ) return ; \n\n        resources.load( \"Common/Ui/Toast\" , Prefab , ( err , data )=>{\n            this.pf = data ;\n        } ) ;\n\n    }\n\n    public static create( parent : Node ) : UiToast {\n\n        let root = instantiate( this.pf ) ;\n        let ui = new UiToast() ;\n        ui.init( root ) ; \n        ui.root.setParent( parent , false ) ; \n        return ui ; \n\n    }\n\n    public static show( parent : Node , str : string , stayDuration = 2 ) : UiToast {\n\n        let ui = this.create( parent ) ;\n        ui.txt.string = str ;\n        ui.show( stayDuration ) ; \n        return ui ; \n\n    }\n\n\n    public root : Node ;\n\n    public txt : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.txt = this.root.getComponentInChildren( Label ) ; \n    }\n\n    public show( stayDuration = 2 ) {\n\n        // 根据文字宽度设置节点宽度\n\n        this.txt.updateRenderData(true);\n        let w = this.txt.getComponent( UITransform ).contentSize.width ; \n        let uitrans = this.root.getComponent( UITransform ) ; \n        let size = uitrans.contentSize.clone() ;\n        if( size.width < w ) {\n            size.width = w + 60 ; \n            uitrans.setContentSize( size ) ;\n        }\n\n\n        tween( this.root ).by( 0.5 , { position : new Vec3( 0 , 100 , 0 ) } ).delay( stayDuration ).call( ()=>{\n            this.root.destroy() ; \n        } ).start();\n\n    }\n\n}","import { Node } from \"cc\";\nimport { UiMoney001 } from \"./UiMoney001\";\nimport { UiStamina } from \"./UiStamina\";\nimport { UiMoney002 } from \"./UiMoney002\";\n\nexport class UiTop {\n\n    public static ins : UiTop = null ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        // 顶部\n        UiMoney001.ins = new UiMoney001() ; \n        UiMoney001.ins.init( this.root.getChildByPath( \"Money001\" ) ) ;\n\n        UiMoney002.ins = new UiMoney002() ; \n        UiMoney002.ins.init( this.root.getChildByPath( \"Money002\" ) ) ;\n\n        UiStamina.ins = new UiStamina() ; \n        UiStamina.ins.init( this.root.getChildByPath( \"Stamina\" ) ) ; \n\n    }\n\n}","import { Input, Node } from \"cc\";\nimport { UiMoney001 as UiMoney001 } from \"./UiMoney001\";\nimport { UiPause } from \"../Popup/UiPause\";\nimport { UiMain } from \"./UiMain\";\nimport { GamePause } from \"../../World/2.Td/Flow/GamePause\";\nimport { UiWaveInfo } from \"./UiWaveInfo\";\nimport { UiStateBtn } from \"../Popup/UiStats\";\nimport { UiHybridGuide } from \"../../../Home/Ui/Popup/UiHybridGuide\";\nimport { UiPlaySpeed } from \"./UiPlaySpeed\";\n\nexport class UiTop {\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        UiMoney001.ins = new UiMoney001() ; \n        UiMoney001.ins.init( this.root.getChildByPath( \"Money001\" ) );\n\n        UiWaveInfo.ins = new UiWaveInfo() ; \n        UiWaveInfo.ins.init( this.root.getChildByPath( \"WaveInfo\" ) ) ; \n        UiWaveInfo.ins.refresh() ; \n\n        let btnPause = this.root.getChildByPath( \"btnPause\" ) ;\n        btnPause.on( Input.EventType.TOUCH_END , ()=>{\n\n            GamePause.pause() ; \n            UiPause.loadAndCreate( UiMain.ins.root , ( uiPause : UiPause )=>{\n                uiPause.refresh() ; \n            } ) ;\n            \n\n        } ) ;\n\n        new UiStateBtn().init( this.root.getChildByPath( \"btnStats\" ) ) ;\n\n        let btn = this.root.getChildByPath( \"btnHybridGuide\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n            UiHybridGuide.create( UiMain.ins.root ).show() ;\n        } ) ; \n\n        UiPlaySpeed.ins = new UiPlaySpeed() ; \n        UiPlaySpeed.ins.init( this.root.getChildByPath( \"PlaySpeed\" ) ) ; \n        \n    }\n\n}\n\n","import { instantiate, Node, Size, Tween, tween, UITransform, Vec2, Vec3 } from \"cc\";\nimport { CfgArticle, CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { BagArticleGridPlace } from \"../Article/BagArticleGridPlace\";\nimport { BagArticleFactory } from \"../Article/BagArticleFactory\";\n\n// 托盘，物品栏，物品出现的地方\nexport class UiTray {\n\n    public static ins : UiTray = null ; \n\n    public articles = new Array< BagArticle >() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n    }\n\n    public addArticleById( id : string , idx = -1 ) {\n\n        let article = BagArticleFactory.create( id );\n\n        article.view.root.setParent( this.root , false ) ;\n        article.view.root.position = Vec3.ZERO ; \n\n        if( idx == -1 ) {\n            this.articles.push( article ) ;\n        }\n        else {\n            this.articles.splice( idx , 0 , article ) ;\n        }\n        \n        \n        this.arrange() ; \n\n    }\n\n    // 插入物品，位置 pos 决定。\n    public insertArticle( article : BagArticle ) {\n\n        // 解绑和棋盘的关系\n        BagArticleGridPlace.unbind( article ) ;\n\n        article.view.root.setParent( this.root , true ) ;\n\n        let idx = this.articles.indexOf( article ) ; \n        if( idx == -1 ) {\n            this.articles.push( article ) ;\n        }\n\n        // 按照 X 位置排序\n        this.articles.sort( ( a , b )=>{\n            let x1 = a.view.root.worldPosition.x ;\n            let x2 = b.view.root.worldPosition.x ;\n            // if( x1 < x2 ) return -1 ;\n            // else if( x1 > x2 ) return 1 ;\n            // else return 0 ;\n            return x1 - x2 ;\n        } ) ;\n\n\n        this.arrange() ; \n\n    }\n\n    // 插入物品，在指定的位置\n    public insertArticleByIndex( article : BagArticle , idx : number ) {\n\n        // 解绑和棋盘的关系\n        BagArticleGridPlace.unbind( article ) ;\n\n        article.view.root.setParent( this.root , true ) ;\n\n        let idx2 = this.articles.indexOf( article ) ; \n        if( idx2 != -1 ) {\n            this.articles.splice( idx2 , 1 ) ; \n        }\n\n        // 插入指定位置\n        this.articles.splice( idx , 0 , article ) ; \n\n\n        this.arrange() ; \n\n    }\n\n    public removeAndArrange( article ) {\n\n        this.remove( article ) ; \n\n        this.arrange() ;\n\n    }\n\n    public remove( article ) {\n\n        let idx = this.articles.indexOf( article );\n        if( idx == -1 ) return ; \n        this.articles.splice( idx , 1 ) ; \n\n    }\n\n\n    // 排列显示\n    public arrange() {\n\n        let interval = 20 ; \n        // 取得整体排列的宽度\n        let w = 0 ; \n        for( let article of this.articles ) {\n\n            // let size = article.view.root.getComponent( UITransform ).contentSize ; \n            // let w2 = article.view.main.getComponent( UITransform ).getBoundingBox().width ; \n            // let w2 = article.view.root.getComponent( UITransform ).getBoundingBoxToWorld().width ; \n            let w2 = article.view.size.width ; \n            w += w2 ; \n        }\n        // 加上间隔\n        w += ( this.articles.length - 1 ) * interval ; \n\n\n        // 排列显示\n        let xStart = w / 2 * -1 ; \n        for( let article of this.articles ) {\n\n            // let w2 = article.view.root.getComponent( UITransform ).contentSize.width ; \n            // let w2 = article.view.main.getComponent( UITransform ).getBoundingBox().width ; \n            // let w2 = article.view.root.getComponent( UITransform ).getBoundingBoxToWorld().width ; \n            let w2 = article.view.size.width ; \n            let pos = article.view.root.position.clone() ;\n            pos.x = xStart + w2 / 2 ;\n            pos.y = 0 ; \n\n            xStart += w2 + interval ; \n\n            // 直接设置\n            // article.root.position = pos ; \n            // 缓动移动\n            Tween.stopAllByTarget( article.view.root ) ;\n            tween( article.view.root ).to( 0.2 , { position : pos } ).start() ; \n\n        } // end for\n\n    }\n\n    public clear() {\n\n        for( let article of this.articles ) {\n            article.view.root.destroy() ; \n        }\n        this.articles.splice( 0 , this.articles.length ) ;\n\n    }\n\n    \n}\n\n\n\n\n","import { Label, Node } from \"cc\";\nimport { LevelCtrl } from \"../../World/2.Td/Level/LevelCtrl\";\n\n\nexport class UiWaveInfo {\n\n    public static ins : UiWaveInfo = null ; \n\n    public root : Node ; \n\n    public txt : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.txt = this.root.getComponent( Label ) ; \n\n    }\n\n    public refresh() {\n\n        let max = LevelCtrl.ins.levelData.waves.length - 1 ; \n\n        let current = LevelCtrl.ins.currentWaveIdx ; \n\n        let str = \"第 {current}/{max} 波\" ; \n        str = str.replace( \"{current}\" , current.toString() ) ;\n        str = str.replace( \"{max}\" , max.toString() ) ;\n        this.txt.string = str ;\n\n    }\n\n}","import { Node } from \"cc\";\r\nimport { CfgItemRewardItem, CfgItemRewardMgr } from \"../../../../../Common/Cfg/CfgItemReward\";\r\nimport { Account } from \"../../../../../Common/Account/Account\";\r\nimport { Label } from \"cc\";\r\nimport { Lang } from \"../../../../../Common/Misc/Lang\";\r\nimport { AccountPersist } from \"../../../../../Common/Account/AccountPersist\";\r\nimport { Input } from \"cc\";\r\nimport { UiGet } from \"../../../Popup/UiGet\";\r\nimport { UiMain } from \"../../UiMain\";\r\nimport { ItemGet } from \"../../../../../Common/Item/ItemGet\";\r\nimport { UiStamina } from \"../../Margin/UiStamina\";\r\nimport { UiMoney001 } from \"../../Margin/UiMoney001\";\r\nimport { UiMoney002 } from \"../../Margin/UiMoney002\";\r\nimport { UiToast } from \"../../../../../Common/Ui/UiToast\";\r\nimport { instantiate } from \"cc\";\r\nimport { tween } from \"cc\";\r\nimport { Vec3 } from \"cc\";\r\n\r\n// 波奖励\r\nexport class UiWaveReward {\r\n\r\n    public root : Node ; \r\n\r\n    public items = new Array< UiWaveRewardItem >() ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        let list = this.root.getChildByPath( \"List\" ) ; \r\n\r\n        let pfItem = list.children[ 0 ] ; \r\n\r\n        // 删除多余的\r\n        for( let i = list.children.length - 1 ; i > 0 ; --i ) { list.children[ i ].destroy() ; }\r\n\r\n        let uiItem = new UiWaveRewardItem() ; \r\n        this.items.push( uiItem ) ; \r\n        uiItem.init( pfItem ) ;\r\n\r\n        for( let i = 0 ; i < 3 ; ++i ) {\r\n\r\n            let root = instantiate( pfItem ) ;\r\n            root.setParent( pfItem.parent , false ) ; \r\n\r\n            let uiItem = new UiWaveRewardItem() ; \r\n            this.items.push( uiItem ) ; \r\n            uiItem.init( root ) ;\r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n    public refresh( levelIdx : number ) {\r\n\r\n        let cfgList = new Array< CfgItemRewardItem >() ; \r\n        let mapping = new Map< CfgItemRewardItem , number >() ; \r\n\r\n        // 取得 20波内的3个配置。\r\n        for( let i = 0 ; i < 20 ; ++i ) {\r\n\r\n            let id = \"LevelWave_\" + levelIdx + \"_\" + i ; \r\n            let cfg = CfgItemRewardMgr.data.get( id ) ;\r\n            if( cfg == null ) continue ; \r\n            cfgList.push( cfg ) ; \r\n\r\n            mapping.set( cfg , i ) ;\r\n\r\n        } // end for\r\n\r\n        // 不显示多余的\r\n        for( let i = cfgList.length ; i < this.items.length ; ++i ){\r\n            this.items[ i ].root.active = false ; \r\n        }\r\n\r\n        for( let i = 0 ; i < cfgList.length && i < this.items.length ; ++i ) {\r\n\r\n            let cfg = cfgList[ i ] ; \r\n            let waveIdx = mapping.get( cfg ) ; \r\n\r\n            let uiItem = this.items[ i ] ;\r\n            uiItem.cfg = cfg ; \r\n            uiItem.root.active = true ; \r\n\r\n            // 关卡 波次 信息\r\n            uiItem.levelIdx = levelIdx ; \r\n            uiItem.waveIdx = waveIdx ; \r\n            uiItem.refresh() ; \r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n}\r\n\r\n// 奖励条目\r\nexport class UiWaveRewardItem {\r\n\r\n    // 当前对象表示的关卡索引、波数。\r\n    public levelIdx = 0 ;\r\n    public waveIdx = 0 ;  \r\n    public cfg : CfgItemRewardItem = null ; \r\n\r\n    // 状态：1 已经领取，2 可领取，3 未解锁、不能领取\r\n    public state = 0 ;\r\n\r\n    public root : Node ; \r\n\r\n    // 波次信息\r\n    public waveInfo : Label ; \r\n\r\n    // 已领取的\r\n    public claimed : Node ; \r\n    // 可领取的\r\n    public claimable : Node ; \r\n    // 不可领取的\r\n    public unclaimable : Node ; \r\n\r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.claimed = this.root.getChildByPath( \"Claimed\" ) ; \r\n        this.unclaimable = this.root.getChildByPath( \"Unclaimable\" ) ; \r\n        this.claimable = this.root.getChildByPath( \"Claimable\" ) ; \r\n        this.initClaimable() ; \r\n\r\n        this.waveInfo = this.root.getChildByPath( \"Wave\" ).getComponent( Label ) ; \r\n        this.waveInfo.string = \"\" ; \r\n\r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\r\n\r\n\r\n    }\r\n\r\n    public initClaimable() {\r\n\r\n        // 背景光旋转\r\n        let light = this.claimable.getChildByPath( \"bg_light\" ) ; \r\n        tween( light ).by( 5 , { eulerAngles : new Vec3( 0 , 0 , -360 ) } ).repeatForever().start() ; \r\n\r\n        // 图标摆动\r\n        let icon = this.claimable.getChildByPath( \"Icon\" ) ; \r\n        tween( icon ).sequence(\r\n            tween( icon ).to( 0.3 , { eulerAngles : new Vec3( 0 , 0 , 10 ) } ) , \r\n            tween( icon ).to( 0.3 , { eulerAngles : new Vec3( 0 , 0 , -10 ) } ) , \r\n            tween( icon ).to( 0.3 , { eulerAngles : new Vec3( 0 , 0 , 10 ) } ) , \r\n            tween( icon ).to( 0.3 , { eulerAngles : new Vec3( 0 , 0 , -10 ) } ) , \r\n            tween( icon ).to( 0.3 , { eulerAngles : new Vec3( 0 , 0 , 0 ) } ) , \r\n            tween( icon ).delay( 1 ) , \r\n        ).repeatForever().start() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        // 波次信息信息\r\n        let str = Lang.get( \"Home_Battle_WaveReward_WaveInfo\" ).replace( \"{1}\" , this.waveIdx.toString() ) ;\r\n        this.waveInfo.string = str ; \r\n\r\n        \r\n        this.state = this.getState() ; \r\n        this.unclaimable.active = this.claimable.active = this.claimed.active = false ; \r\n        if( this.state == 1 ) {\r\n            this.claimed.active = true ; \r\n        }\r\n        else if( this.state == 2 ) {\r\n            this.claimable.active = true ; \r\n        }\r\n        else if( this.state == 3 ) {\r\n            this.unclaimable.active = true ; \r\n        }\r\n\r\n\r\n    }\r\n\r\n    // 确定状态\r\n    private getState() : number {\r\n\r\n        // 对比进度。玩家的进度 是否 超越本条目进度。\r\n        let isOver = false ; \r\n        let levelIdx = Account.ins.mainLevel.levelIdx ; \r\n        let waveIdx = Account.ins.mainLevel.waveIdx ; \r\n        if( this.levelIdx < levelIdx ) { isOver = true ; }\r\n        else if( this.levelIdx > levelIdx ){ isOver = false ; }\r\n        else { isOver = this.waveIdx <= waveIdx ; }\r\n\r\n        if( isOver ) {\r\n\r\n            // 领过，没领过\r\n            let wave = Account.ins.waveReward.get( this.levelIdx ) ; \r\n            if( wave == null ) return 2 ;   // 没有记录数据，没有领过\r\n            return wave.has( this.waveIdx ) == true ? 1 : 2 ;\r\n\r\n        }\r\n\r\n        return 3 ; \r\n\r\n    }\r\n\r\n    public onClick() {\r\n\r\n        if( this.state == 1 ){\r\n            // 领过\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_Battle_WaveReward_Claimed\" ) ) ; \r\n\r\n            return ; \r\n        } \r\n\r\n        if( this.state == 3 ) {\r\n            UiToast.show( UiMain.ins.root , \"尚未能领取哦\" ) ; \r\n            //  本条目绑定的波次 大于 当前关卡的波次\r\n            return ;\r\n        }\r\n\r\n        this.get() ; \r\n\r\n\r\n    }\r\n\r\n    // 领取\r\n    private get() {\r\n\r\n        // 显示获得的物品\r\n        let uiGet = UiGet.create( UiMain.ins.root ) ;\r\n        // uiGet.show() ; \r\n        uiGet.itemList.refresh( this.cfg.list ) ; \r\n        uiGet.itemList.showAnim( 0.1 ) ; \r\n        ItemGet.addList( this.cfg.list ) ;\r\n\r\n        // 刷新界面\r\n        UiStamina.ins.refresh() ; \r\n        UiMoney001.ins.refresh() ; \r\n        UiMoney002.ins.refresh() ; \r\n\r\n\r\n        // 记录\r\n        let item = Account.ins.waveReward.get( this.levelIdx ) ;\r\n        if( item == null ) {\r\n            item = new Set< number >() ;\r\n            Account.ins.waveReward.set( this.levelIdx , item ) ; \r\n        }\r\n        item.add( this.waveIdx ) ;\r\n        AccountPersist.save() ; \r\n\r\n        // 刷新本条目\r\n        this.refresh( ) ; \r\n\r\n    }\r\n\r\n}","import { director, Input, instantiate, Node, Prefab, resources } from \"cc\";\nimport { SceneTransition } from \"../../../../Common/Ui/UiLoadingScene\";\nimport { UiEffectPopup } from \"../../../../SL/Cocos/Ui/UiEffect\";\nimport { UiItemList } from \"../../../../Common/Item/UiItemList\";\nimport { SoundBtnClickSetter } from \"../../../../Common/Audio/SoundBtnClickSetter\";\n\n// 胜利UI\nexport class UiWin {\n\n    public static pf : Prefab ; \n\n    public static loadPf() {\n\n        if( this.pf != null ) return ; \n\n        resources.load( \"Game/Ui/Settle/Win\" , Prefab , ( err , data )=>{\n            this.pf = data ;\n        } ) ;\n\n    }\n\n    public static create( parent : Node ) : UiWin {\n\n        let root = instantiate( this.pf ) ;\n        let ui = new UiWin() ;\n        ui.init( root ) ; \n        ui.root.setParent( parent , false ) ; \n        return ui ; \n\n    }\n\n\n    public root : Node ;\n\n    public btnOK : Node ; \n\n    public btnShare : Node ; \n\n    // 物品列表\n    public itemList = new UiItemList() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        SoundBtnClickSetter.exe( this.root ) ;\n\n        this.btnOK = this.root.getChildByPath( \"BtnList/btnOK\" ) ;\n        this.btnOK.on( Input.EventType.TOUCH_END , this.onClick_btnOK , this ) ;\n\n        this.btnShare = this.root.getChildByPath( \"BtnList/btnShare\" ) ;\n        this.btnShare.on( Input.EventType.TOUCH_END , this.onClick_btnShare , this ) ;\n\n        this.itemList.init( this.root.getChildByPath( \"Reward\" ) ) ; \n        \n\n    }\n\n    public show() {\n        this.root.active = true ; \n        UiEffectPopup.show( this.root ) ;\n        \n    }\n\n    private onClick_btnOK() {\n\n        SceneTransition.exe( \"Home\" ) ; \n\n    }\n\n    private onClick_btnShare() {\n\n    }\n\n}","import { math, Vec3 } from \"cc\";\n\n\n// 2D 向量 旋转\nexport class Vec2dHelper {\n\n    // 旋转一个向量\n    public static rotate( v : Vec3 , degree : number ) {\n\n        let rad = math.toRadian( degree ) ; \n\n        let cosVal = Math.cos( rad ) ; \n        let sinVal = Math.sin( rad ) ; \n\n        // [x*cosA-y*sinA  x*sinA+y*cosA]\n        v.x = v.x * cosVal - v.y * sinVal ; \n        v.y = v.x * sinVal + v.y * cosVal ; \n\n    }\n\n}\n","\nimport { EnemyGen } from \"./EnemyGen\";\nimport { LevelData, WaveData } from \"./CfgLevelWaveMgr\";\nimport { EffectFactory } from \"../../../Bag/Merge/EffectFactory\";\nimport { UiMain } from \"../../../Ui/Main/UiMain\";\nimport { Vec3 } from \"cc\";\n\n\n// 波控制器，控制一波内的事件\nexport class WaveCtrl {\n\n    public static ins = new WaveCtrl() ; \n\n    public onComplete : ()=>void = null ; \n\n    // 波数据\n    public data : WaveData = null ; \n\n    // 执行到的条目索引\n    public idx : number = null ; \n\n    // 已经流逝的帧数\n    private frames : number = 0 ; \n\n    // 是否启用\n    private enable = false ; \n\n    public reset() {\n        this.idx = 0 ; \n        this.frames = 0 ; \n        this.enable = false ; \n    }\n\n    public start() {\n        this.reset() ;\n\n        this.enable = true ; \n\n    }\n\n    public update() {\n\n        if( this.enable == false ) { return ; }\n\n        let items = this.data.items ;\n        if( this.idx >= items.length ) {\n            return ; \n        }\n\n        let item = items[ this.idx ] ; \n        if( this.frames >= item.triggerTime ) {\n            this.idx++ ;\n\n            let role = EnemyGen.genOne( item.genRoleId ) ;\n            role.life.hp.setCurrentAndMax( role.life.hp.max * item.hpMaxFactor ) ; \n            role.attack.damage = role.attack.damage * item.attackFactor ; \n\n            if( this.idx >= items.length ) {\n                // 完成\n                this.onComplete?.() ; \n            }\n\n            if( role.cfg.hpBarId == \"HpBarBoss\" ) {\n                let effect = EffectFactory.create( \"BossIncoming\" ) ; \n                effect.setParent( UiMain.ins.root , false ) ; \n                effect.position = Vec3.ZERO ; \n            }\n\n        }\n\n        this.frames++ ;\n\n    }\n\n\n\n}\n\n","import { Game, UITransform, Vec3 } from \"cc\";\nimport { UiMoney001 } from \"../../../Ui/Main/UiMoney001\";\nimport { AffixType } from \"../../1.Base/Buff/Affix\";\nimport { TowerMgr } from \"../../1.Base/Tower/Entity/TowerMgr\";\nimport { BagView } from \"../Bag/BagView\";\nimport { Player } from \"../Player/Player\";\nimport { LevelCtrl } from \"./LevelCtrl\";\nimport { UiMain } from \"../../../Ui/Main/UiMain\";\nimport { MoneyFly } from \"../../../../Common/Misc/MoneyFly\";\nimport { UiWin } from \"../../../Ui/Popup/Settle/UiWin\";\nimport { UiWaveInfo } from \"../../../Ui/Main/UiWaveInfo\";\nimport { GameArg } from \"../../../Init/GameArg\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { AccountPersist } from \"../../../../Common/Account/AccountPersist\";\nimport { GamePause } from \"../Flow/GamePause\";\nimport { BulletMgr } from \"../../1.Base/Bullet/BulletMgr\";\nimport { MergeHybridHintMgr } from \"../../../Bag/Merge/MergeHybridHint\";\nimport { BagArticleSpeak } from \"../../../Bag/Article/BagArticleSpeak\";\nimport { ItemDraw } from \"../../../../Common/Item/ItemDraw\";\nimport { ItemGet } from \"../../../../Common/Item/ItemGet\";\n\n// 每波完成后的结算\nexport class WaveSettle {\n\n    public static exe() {\n\n        GamePause.pause() ; \n\n        this.bulletClear() ; \n\n        UiWaveInfo.ins.refresh() ; \n\n        this.towerBuff() ; \n\n        if( LevelCtrl.ins.currentWaveIdx >= LevelCtrl.ins.levelData.waves.length ) {\n            // 过关\n            this.levelSettle() ; \n            return ; \n        }\n\n        // 进入到背包视图\n        BagView.enter() ; \n\n        // 如果之前出现了可以杂交的，但是没有解锁，一局后显示提示。\n        MergeHybridHintMgr.ins.exe() ; \n        \n        // 装备再次可以气泡说话\n        BagArticleSpeak.clearMemory() ; \n\n    }\n\n    // 清空子弹\n    private static bulletClear() {\n\n        let data = BulletMgr.ins.data ; \n        for( let i = 0 ; i < data.length ; ++i ) {\n            let bullet = data[ i ] ;\n            bullet.view.root.destroy() ; \n        }\n        data.splice( 0 , data.length ) ; \n\n    }\n\n    // 过关\n    public static levelSettle() {\n\n        let uiWin = UiWin.create( UiMain.ins.root ) ; \n        uiWin.show() ; \n        let id = \"Level_\" + GameArg.ins.levelId + \"_Win\" ; \n        let items = ItemDraw.exe( id ) ; \n        uiWin.itemList.refresh( items ) ; \n        uiWin.itemList.showAnim() ; \n        ItemGet.addList( items ) ; \n\n        if( GameArg.ins.mainIdx >= 0 ) {\n            // 主线关卡。不判断是否超出边界。超出边界在外部有处理\n            let idxNext = GameArg.ins.mainIdx + 1 ;\n            Account.ins.mainLevel.levelIdx = idxNext ; \n            Account.ins.mainLevel.waveIdx = 0 ; \n\n            AccountPersist.save() ; \n\n        }\n\n    }\n\n    // 处理 Tower 结算时触发的Buff\n    public static towerBuff() {\n\n        for( let tower of TowerMgr.ins.data ) {\n\n            // 加钱\n            let moneyAdded = 0 ; \n\n            for( let buff of tower.buff.list ) {\n                switch( buff.affix.type ) {\n                    case AffixType.GetMomeyPerWave : {\n                        moneyAdded += buff.affix.argN ; \n                    }\n                }\n\n            } // end for\n\n            if( moneyAdded > 0 ) {\n\n                Player.ins.money001 += moneyAdded ; \n                UiMoney001.ins.refresh() ; \n\n                let parent = UiMain.ins.root ; \n\n                let pos1 = tower.article.view.root.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n                parent.getComponent( UITransform ).convertToNodeSpaceAR( pos1 , pos1 ) ;\n\n                // 钱飞\n                let pos2 = UiMoney001.ins.icon.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n                parent.getComponent( UITransform ).convertToNodeSpaceAR( pos2 , pos2 ) ;\n\n                MoneyFly.money001Fly( parent , pos1 , pos2 ) ; \n\n            }\n\n        } // end for\n\n    }\n\n}","\n/*\n    SL Library | Author : Siliphen | Creation Date : 2018.09 | Modification Date : | \n*/\n\nimport { Random } from \"./Random\";\n\n\nexport class WeightProbabilityItem {\n\n    // 名字\n    public name: string;\n\n    // 概率权重\n    public probability: number;\n\n}\n\n// 权重概率抽取器\nexport class WeightProbability {\n\n    // 初始化。\n    public init(probabilities: Array<WeightProbabilityItem>): void {\n        \n        // 把概率权重配置转换为区间数据。\n        this.weightCount = 0;\n        this.data.splice(0, this.data.length);\n\n        for (let i = 0; i < probabilities.length; ++i) {\n            let item = probabilities[i];\n\n            let item2 = {};\n            item2[\"min\"] = this.weightCount;\n            item2[\"max\"] = this.weightCount + item.probability;\n            item2[\"id\"] = item.name ;\n            this.data.push(item2);\n\n            this.weightCount += item.probability;\n\n        } // end for\n\n    }\n\n    public add( id : string , w : number ) {\n\n        let item = {};\n        item[\"min\"] = this.weightCount;\n        item[\"max\"] = this.weightCount + w ;\n        item[\"id\"] = id ;\n        this.data.push(item);\n\n        this.weightCount += w ;\n\n    }\n\n    // 抽取\n    public get(): string {\n\n        let ret: string = null;\n\n        let n = WeightProbability.rangeInt(0, this.weightCount - 1);\n        // 查找命中区间\n        for (let i = 0; i < this.data.length; ++i) {\n\n            let item = this.data[i];\n            if (item[\"min\"] <= n && n < item[\"max\"]) {\n                ret = item[\"id\"] ;\n            }\n\n        } // end for\n\n        return ret;\n\n    }\n\n    // 清空数据\n    public clear() {\n        this.data.splice( 0 , this.data.length ) ;\n        this.weightCount = 0;\n    }\n\n    public static rangeInt(min : number , max : number ) : number\n    {\n        return Math.floor(Math.random() * ( max + 1 - min  ) ) + min ;\n\n    }\n\n    private weightCount = 0;\n\n    private data = new Array();\n\n}","import { find, Input, Node } from \"cc\";\nimport { UiBag } from \"../Ui/Bag/UiBag\";\n\n\nexport class World {\n\n    public static ins: World;\n\n    public root: Node;\n\n    public init() {\n\n        this.root = find(\"Canvas/World\");\n\n        let bag = this.root.getChildByPath(\"Bag\");\n        bag.on(Input.EventType.TOUCH_END, () => {\n\n            UiBag.ins.show();\n\n        });\n\n        let shop = this.root.getChildByPath(\"Shop\");\n        shop.on(Input.EventType.TOUCH_END, () => {\n            //    UiDialog.create( UiMain.ins.root , \"正在开发中...\" ).show() ; \n\n        });\n\n        let Jewel = this.root.getChildByPath(\"Jewel\");\n        Jewel.on(Input.EventType.TOUCH_END, () => {\n\n            //UiDialog.create(UiMain.ins.root, \"正在开发中...\").show();\n\n        });\n\n\n        let Farmland = this.root.getChildByPath( \"Farmland\" ) ;\n        Farmland.on( Input.EventType.TOUCH_END , ()=>{\n            //UiDialog.create( UiMain.ins.root , \"正在开发中...\" ).show() ; \n        } ) ;\n    }\n}","import { find, Node } from \"cc\";\n\n// 游戏世界节点引用\nexport class WorldNode {\n\n    public static ins = new WorldNode() ; \n\n    public root : Node ; \n\n    // 地表层\n    public layer0 : Node ; \n    // 地上层\n    public layer1 : Node ; \n    // 天空层\n    public layer2 : Node ; \n\n    // 道路\n    public layer0_Road : Node ; \n\n    // 出怪口\n    public layer0_Spawn : Node ; \n\n}\n\nexport class WorldNodeInit {\n\n    public static exe() {\n\n        let root = WorldNode.ins.root = find( \"Canvas/World\" ) ;\n\n        let ins = WorldNode.ins ;\n        ins.layer0 = find( \"Layer0\" , root ) ;\n        ins.layer1 = find( \"Layer1\" , root ) ;\n        ins.layer2 = find( \"Layer2\" , root ) ;\n\n        ins.layer0_Road = ins.layer0.getChildByPath( \"Road\" ) ;\n        ins.layer0_Spawn = ins.layer0.getChildByPath( \"Spawn\" ) ;\n\n    }\n\n}","import { sys } from \"cc\";\nimport { OsJudge } from \"../Misc/OsJudge\";\nimport { math } from \"cc\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { director } from \"cc\";\nimport { game } from \"cc\";\nimport { Game } from \"cc\";\n\n// 微信环境初始化\nexport class WxHelper {\n\n    // public static _instance=new WxHelper() ; \n    // 开启分享菜单\n    public static enableShareMenu() {\n\n        \n        if( OsJudge.isWx() == false ) return ;\n\n        // @ts-ignore\n        wx.showShareMenu({\n            withShareTicket: true,\n            menus: ['shareAppMessage', 'shareTimeline']\n          }) ;\n\n    }\n\n    // 震动  15 ms n 强度：1-3\n    public static vibrateShort( n : number ) {\n\n        if( OsJudge.isWx() == false ) return ;\n\n        let str = \"light\" ;\n        if( n == 1 ) str = \"light\" ;\n        else if( n == 2 ) str = \"medium\" ;\n        else if( n >= 3 ) str = \"heavy\" ;\n\n        // @ts-ignore\n        wx.vibrateShort({\n            type : str ,\n          }) ;\n\n    }\n    \n    // 震动 400 ms\n    public static vibrateLong( ) {\n\n        if( OsJudge.isWx() == false ) return ;\n\n        // @ts-ignore\n        wx.vibrateLong() ;\n\n    }\n\n    readonly s_ShareImage1:ShareImage = new ShareImage(\"UdUAXFVBS3yw7fbDuAvMcQ==\", \"https://mmocgame.qpic.cn/wechatgame/hed25SrAztwkv2L6PYGhFKrRZ2BRk71PhaKB2iaINew54fKlbGqd0746DFlnXCbXR/0\");\n    readonly s_ShareImage2:ShareImage = new ShareImage(\"QEB8rJY7TBaS5/cWh0YMcQ==\", \"https://mmocgame.qpic.cn/wechatgame/IUv9yibo7sgJJVbT1asGE5QJiabkkM57opkqRmYjmFynJAWK0AYRgbqcItGT7OE3iam/0\");\n    readonly s_ShareImage3:ShareImage = new ShareImage(\"rPaH9z2LRDeDbAXo7Dml0A==\", \"https://mmocgame.qpic.cn/wechatgame/cNhQ7XC07LgmmlVw89ibl5mpEaibuAOIudF2k0mFQZPX9rLKnjH9Ml8hzA880wuV30/0\");\n    \n    private ShareImages:Array<ShareImage>;\n\n    \n    //右上角分享信息初始化\n    public initShare():void{\n        if( OsJudge.isWx() == false ) return ;\n        this.ShareImages = [this.s_ShareImage1, this.s_ShareImage2, this.s_ShareImage3];\n        console.log(\"WxShare 初始化\");\n        let image_s  =this.GetRandomParamShare();\n         // @ts-ignore\n         wx.onShareAppMessage(function(){            \n            return{                \n                // imageUrlId: image_s.ShareImageId,\n                // imageUrl:image_s.ShareImageUrl,\n            }\n         } )       \n    }\n\n    //通过游戏中的功能进行分享\n    public OpenShare():void{\n        \n        if( OsJudge.isWx() == false ) return ;\n\n        this.ShareImages = [this.s_ShareImage1, this.s_ShareImage2, this.s_ShareImage3];\n        console.log(\"WxShare 初始化\");\n        let image_s  =this.GetRandomParamShare();\n        //@ts-ignore\n        wx.ShareAppMessage(function(){\n            return{\n                // imageUrlId: image_s.ShareImageId,\n                // imageUrl:image_s.ShareImageUrl,\n                query:Account.ins.accuntInfo.Uid,\n            }\n        })\n    }\n\n    //是不是通过分享页面进入的\n    public CheckIsShare():void{\n \n        if( OsJudge.isWx() == false ) return ;\n        //@ts-ignore\n        let Lanuchinfo=wx.getLaunchOptionsSync();\n        if(typeof(Lanuchinfo)!==\"undefined\"&&Object.keys(Lanuchinfo).length>0){\n\n            //如果是新用户\n            console.log(\"邀请用户的ID:\"+Lanuchinfo.query);\n\n        }\n\n    }\n\n    public GetRandomParamShare():ShareImage\n    {\n        let s_Share = this.ShareImages[math.randomRangeInt(0, this.ShareImages.length)];\n\n        return s_Share;\n    }\n\n}\n\nexport class ShareImage\n{\n    public ShareImageId:string\n    public ShareImageUrl:string\n\n    constructor( shareImageId:string,shareImageUrl:string)\n    {\n        this.ShareImageId = shareImageId;\n        this.ShareImageUrl = shareImageUrl;\n    }\n}","import { Node } from \"cc\";\nimport { RoleMgr } from \"../../Role/Base/RoleMgr\";\nimport { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { CurrentMax } from \"../SimpleStruct/CurrentMax\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\n\n// 遮挡控制器\nexport class ZOrderCtrl {\n\n    public static ins = new ZOrderCtrl() ; \n\n    public interval = new CurrentMax() ;\n\n    public constructor() {\n        // this.interval.max = FrameSecConvert.toFrame( 0.5 ) ;\n        this.interval.max = 2 ;\n    }\n\n    public update() {\n\n        // 降低频率\n        this.interval.current-- ;\n        if( this.interval.current > 0 ) return ; \n        this.interval.setCurrentAsMax() ; \n\n        // 清空\n        this.list.splice( 0 , this.list.length ) ; \n        \n        // 加入要排序的节点\n        let allenemies = RoleMgr.ins.allEnemies ;\n        for( let i = 0 ; i < allenemies.length ; ++i ) {\n            let role = allenemies[ i ] ;\n            this.list.push( role.view.root ) ;\n        }\n        this.list.push( PlayerRole.ins.main.view.root ) ;\n\n        // 按照 Y 排序\n        this.list.sort( ( a , b )=>{\n            let y1 = a.position.y ; \n            let y2 = b.position.y ;\n            if( y1 < y2 ) return 1 ;\n            else if ( y1 > y2 ) return -1 ;\n            return 0 ;\n        } ) ;\n\n        // 设置遮挡\n        for( let i = 0 ; i < this.list.length ; ++i ) {\n            let node = this.list[ i ] ;\n            node.setSiblingIndex( i ) ;\n\n        }\n\n    }\n\n    private list = new Array< Node >() ;\n\n}"]}