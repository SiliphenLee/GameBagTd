{"version":3,"sources":["../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Account/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Account/Account.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Account/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Account/AccountPersist.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Ad.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/AdBase.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/AdForegroundSwitch.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/AdGp.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/AdInit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/AdRewardVideoFailHandler.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/Misc/AdStartup.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/AdTt.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ad/AdWx.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Affix.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/Ai001.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/Ai002.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/AiCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/AiSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/String/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/String/ArticleString.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Misc/ArticleUnlockLevel.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/AttackCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/AudioSettingsPersist.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/AuraCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/AuraHint.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/AuraScopeType.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticle.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticleFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticleGradeHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticleGridPlace.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticleGridPlaceByPos.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/BagArticleHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/BagArticleReloaded.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Article/BagArticleSpeak.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/BagGridDraw.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/BagTrayAricleGen.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Bag/BagView.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/BezierCalc.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/BezierMove.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Specific/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Specific/Buff_HpRegenIncreasePercentBelowPercentPerWave.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Specific/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Specific/Buff_RndArticleMergeGradeUpgrade.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/Buff.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffIncreaseCalc.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffOp.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffResetMergeGrade.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Buff/BuffString.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/Bullet.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletBounceRect.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletMoveCalc.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletMoveSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletPfMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Bullet/BulletViewHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/ButtonInterval.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/CellExpand.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgArticle.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgArticleGrade.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgArticleUnlock.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgBuff.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgBullet.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/CfgDailyCheckin.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgDaySign.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgFarm.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgFeature.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgGameBagTrayAricleGen.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgGeneral.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgGiftGroup.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgInviteConfig.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgItem.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgItemDraw.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgItemReward.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/CfgLevelGeneralMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/CfgLevelWaveMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgLoad.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgMushrom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgRole.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgShape.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/CfgShop.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgTower.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/CfgUpgrade.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/Channel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/Channel/Channel.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/Channel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/Channel/ChannelType.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Collision/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Collision/CollisionBullet.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Collision/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Collision/CollisionHandler.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/SimpleStruct/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/SimpleStruct/CurrentMax.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/DailyCheckinData.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/DailyLimit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/DateTimeMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/DateTimeUtil.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/EffectFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/EffectPfMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/EnemyGen.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/EnemyMovePath.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Entry.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/Entry.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Init/Entry.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/FeatureAcquire.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/FeatureExtract.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/FrameCall.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/FrameSecConvert.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/GameArg.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/GameLose.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/GamePause.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Flow/GameStart.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/GestureArticleInfo.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/GridHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/GridHint.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/GridModeTransition.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/GridTraverse.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/Guide.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/GuideData.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/HitTest.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Init.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/Init.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Init/Init.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/InitTt.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/InitWx.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/ItemData.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/ItemDraw.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/ItemGet.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/ItemSub.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/ItemType.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/Lang.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/LanguageData.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/LevelCtrl.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/LevelLoad/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/LevelLoad/LevelLoad.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/LevelString.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/Life.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/ListHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/LoaderBase.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/LoaderRemote.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Loader/LoaderResources.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/LocalizedLabel.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/extensions/i18n/assets/LocalizedSprite.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeDefinition.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeEffect.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeGrid.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeGridHybrid.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeHint.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeHybridHint.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Merge/MergeTray.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/MoneyFly.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/MoveCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/MoveRole.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Audio/Ver1/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Audio/Ver1/Music.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/Music.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/NodeSizeFit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/NumberRolling.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/OsJudge.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Ai/PathMove.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/PfLevelThumbnail.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfLoad.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrHeroUp.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrIcon.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrIconBuff.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrMoney.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrMushroom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/PfMgr/PfMgrNumber.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/PfMgrRole.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Platform/PlatformInit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/Player.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/PlayerBuffAffect.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/PlayerGradeOp.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/PlayerInit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Player/PlayerRole.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/Random.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ReplaceModeEnter.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/ResLoad.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/Role.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleAnimSpine.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleAttack.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleAttributeUpdate.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleDie.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/RoleFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleGetDamage.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Base/RoleMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleMove.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleMoveSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Move/RoleMoveView.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Role/Misc/RoleSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/ScreenAdaptResolutionPolicy.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/SeqScaleShow.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/Shake.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/Shuffle.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/SkillBase.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/SkillCloseDamage/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/SkillCloseDamage/SkillCloseDamage.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Skill/SkillCom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/Sound.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Audio/Ver1/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Audio/Ver1/Sound.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Audio/SoundBtnClickSetter.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/StaminaRecovery.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/Stats.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/StringUtil.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Test.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Test1/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Test1/Test1.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/Test.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Test2/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Test2/Test2.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/TextureOriginalRatioSprite.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Cfg/TileShapeDataParser.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/Tower.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/TowerAllUpdate.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/TowerAttack.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/TowerAttackTargetSelect.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/TowerAttributeUpdate.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/TowerAuraEmit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Misc/TowerAuraScopeExpand.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Attack/TowerBulletEmit.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/TowerFactory.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Entity/TowerMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Sys/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Sys/TowerSys.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Sys/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Tower/Sys/TowerSysBuff.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Misc/TweenHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Misc/TweenHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/TweenSpeed.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/UiArticleDetail.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/UiArticleDetailAttribute.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/ArticleDetail/UiArticleDetailIcon.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiArticleIcon.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/UiArticleUnlock.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/UiBag.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBag.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/UiBagArticleDetail.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/UiBagArticleDetailBaseAttribute.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/UiBagArticleDetailBtnList.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/ArticleDetail/UiBagArticleDetailUnlocked.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/UiBagBottom.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/UiBagCell.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/UiBagCfg.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagDeploy.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/UiBagExpandOp.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/UiBagGrid.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Grid/UiBagGridBg.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagItem.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagItemLocked.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagLocked.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagPrefab.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagReplace.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Touch/UiBagTouch.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Bag/UiBagUnlocked.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/UiBar.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/UiBar2.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiBattle.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiBgQuality.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/UiBottomTab.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiBubble.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiBubbleWithIcon.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/DailyCheckin/UiDailyCheckin.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiDebug.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiDialog.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/UiEffect.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/Feature/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/Feature/UiFeature.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/UiFeatureSel.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/UiFeatureSelBtnList.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/UiFeatureSelItem.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/FeatureSel/UiFeatureSelItemList.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/UiGet.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Guide/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Guide/UiGuideCover.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Bar/UiHpBar.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/UiHybridGuide.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/UiItem.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/UiItemIcon.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Item/UiItemList.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/Input/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/Input/UiKeyboard.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Loading/Init/UiKeyboard.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLeft.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLevel.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLevelArrow.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLevelBtnList.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLevelInfo.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiLevelThumbnail.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/UiListItemGenMgr.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiLoadingScene.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/Settle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/Settle/UiLose.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/UiMain.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiMain.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiMoney001.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/UiMoney001.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/UiMoney002.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/MoreGames/Script/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/MoreGames/Script/UiMoreGames.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/UiPause.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiPlayerGrade.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiPopupBase.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiRight.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiSettings.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/UiShop.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/UiShopDaily.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/UiShopItem.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Shop/UiShopMoney001.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/UiStamina.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Popup/UiStaminaBuy.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/UiStats.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/UiSwitch.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Ui/UiTabHeader.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Init/Guide/UiTextBox.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Common/Ui/UiToast.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Margin/UiTop.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiTop.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Bag/Main/UiTray.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Main/UiWaveInfo.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/Ui/Main/Page/Battle/UiWaveReward.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/Settle/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/Ui/Popup/Settle/UiWin.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/Vec2dHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/WaveCtrl.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/2.Td/Level/WaveSettle.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Common/Misc/WeightProbability.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/World/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Home/World/World.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/WorldNode.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Wx/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/SL/Cocos/Wx/WxHelper.ts","../file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/file:/D:/Project/2024/BagTd/Base/proj.BagTd.Base/assets/Script/Game/World/1.Base/Support/Misc/ZOrderCtrl.ts"],"names":["AccountBag","this","grade","Map","deploy","Array","unlocked","stamina","CurrentMax","AccuntLevel","levelIdx","waveIdx","AccountDaySign","DaySign","Received","AccuntInvite","IsInviter","InviterId","InviteCount","Invite_check","Aready_InviteCount","AccuntInfo","Uid","Last_login_time","AccountMoney","money001","money002","Account","money","bag","mainLevel","accuntInfo","accuntInvite","items","waveReward","accountdaysign","prototype","init","_this$bag$deploy","_this$bag$unlocked","splice","length","push","apply","CfgGeneral","ins","BagInitDeployedIds","BagInitUnlockedIds","current","max","_class7","_RF","pop","AccountPersist","load","str","sys","localStorage","getItem","json","JSON","parse","loadBag","loadMainLevel","loadMoney","loadItem","loadMainLevelWaveReward","j","a","i","t","id","ItemData","count","Number","set","jBag","jGrade","k","reward","_step","jItem","waves","Set","_iterator","_createForOfIteratorHelperLoose","done","n","value","add","save","makeBag","makeMainLevel","makeMoney","makeItem","makeWaveReward","stringify","setItem","_step2","_iterator2","_step3","kv","wavesList","_iterator3","e","item","_step4","_iterator4","_step5","_iterator5","_AdBase","Ad","arguments","_inheritsLoose","createIns","platform","Platform","WECHAT_GAME","AdBase","BYTEDANCE_MINI_GAME","AdTt","ANDROID","AdGp","_proto","console","log","bannerShow","bannerHide","interstitialShow","customShow","rewardShow","onSuccess","onCancel","onError","UiAdSimReward","create","ui","parent","find","root","setParent","btnError","on","Input","EventType","TOUCH_END","destroy","btnComplete","btnCancel","cb","resources","Prefab","err","data","instantiate","node","getChildByPath","countdown","getComponent","Label","tween","sequence","call","string","toString","delay","repeatForever","start","AdForegroundSwitch","game","Game","EVENT_SHOW","AdInit","exe","AdRewardVideoFailHandler","i18n","UiDialog","title","txt","AdStartup","AdStartupData","times","_class2","_this","_len","args","_key","concat","banner","interstitial","rewardedVideo","tt","getSystemInfoSync","AdBanner","AdInterstitial","AdRewardedVideo","_this$interstitial","show","_this2","resumeBgm","onFailed","director","getScene","name","Music","bg1","bannerAd","isLoaded","_proto2","_this3","_tt$getSystemInfoSync","windowWidth","windowHeight","createBannerAd","adUnitId","adIntervals","style","width","top","targetBannerAdWidth","left","onResize","size","height","onLoad","_this$bannerAd","hide","_this$bannerAd2","interstitialAd","_proto3","createInterstitialAd","error","videoAd","_proto4","_this4","createRewardedVideoAd","onClose","res","isEnded","undefined","then","AdWx","custom","adIdBundle","AdIdBundleMgr","myself","UITransform","contentSize","bannerId","interstitialId","rewardedVideoId","AdCustom","customId","_this$banner","_this$banner2","_this$custom","AdIdBundle","bundle","lht","CustomAd","phone","wx","w","screenWidth","screenHeight","createCustomAd","errMsg","h","realWidth","realHeight","_proto5","type","AffixType","None","argN","argNList","argStr","argStrList","Ai001","update","role","ai","target","RoleMgr","local","chase","v","view","position","clone","subtract","RoleMove","Ai002","state","state_pathMove","state_chase","pathMove","pathMoved","path","targetPos","idx","lengthSqr","PlayerRole","main","lenMoved","move","offset","life","isDead","RoleAttack","RoleAnimSpine","playIdle","skeleton","AiSys","all","allEnemies","updateRole","ArticleString","getName","articleId","strs","split","key","Lang","get","getDescription","ArticleUnlockLevel","ret","CfgArticleUnlock","cfgItem","canUnlock","findIndex","ids","UiArticleUnlock","loadAndCreate","UiMain","refresh","lockCount","bulletId","scatterCount","cd","damage","crit","AttackCrit","lifeStealing","AttackLifeStealing","targeSelType","AttackTargetSelectionType","First","percent","probability","multiple","AudioSettingsPersist","loadMusic","loadSound","saveMusic","saveSound","val","enabled","Sound","list","TowerAuraHint","set2","map","auraPool","towerDamage","article","cells","clear","flagAttackDamage","flagAttackSpeed","flagAttackCritProbability","auras","getBuffs","cfg","aura","affixType","AuraAttackDamageIncreasePercent","TowerAuraScopeExpand","auraScopeType","canAttack","uiItem","genOrGetEffect","AuraAttackSpeedIncreasePercent","_step6","_iterator6","AuraAttackCritProbabilityIncrease","_step7","_iterator7","has","place","_step8","_iterator8","effect","EffectFactory","WorldNode","layer2","worldPosition","_step9","_iterator9","tower","atkDamage","UiTowerAuraHint","layer1","_step10","buffs","_iterator10","cfgBuffItem","CfgBuff","isAura","CfgArticleGrade","gradeLineId","_step11","_iterator11","_step12","_iterator12","buffIds","_step13","_iterator13","getComponentInChildren","pos1","pos2","add3f","to","AuraScopeType","cfgShape","gradeMerge","isBagExpand","posShapeCoordOrig","effectMergeHintShape","tweenMergeHint","adTag","BagArticleFactory","BagArticle","BagArticleCfgSet","BagArticleViewSet","TowerFactory","CfgArticleMgr","mergeGrade","CfgShape","bagShapeId","startsWith","_root$getComponent","BagArticleView","createView","calcPos","coords","Layout","getBoundingBoxToWorld","pf","PfMgrBagArticle","getPf","shape","tileSize","UiBagCfg","cellSize","Vec2","coord","x","y","pos","Vec3","bagArticle","ZERO","multiplyScalar","BagArticleGradeHelper","getGradeByLineId","currentGrade","getCfgCurrent","idArticle","cfgArticle","getCfgNext","getCfgCurrentItems","BagArticleGridPlace","animatedMovement","unbind","bind","cell","getOrigCellInBoundingRect","MAX_VALUE","UiBagGrid","getCell","cellOrig","s","scale","uitrans","convertToWorldSpaceAR","BagArticleGridPlaceByPos","placeBagExpand","getCellsPlace","MergeTray","tryMerge","UiTray","insertArticle","GridModeTransition","toNormal","UiBagTouch","limit","GridHint","hintPlaceableClear","removeAndArrange","MergeGrid","goToTray","BagArticleSpeak","articleIgnore","matchCell","getShapeCells","lenMin","cellRet","GridTraverse","len","coordStart","coord2","cell2","ArticleHelper","getAllAriclesInGrid","indexOf","BagArticleReloaded","TowerMgr","clearMemory","memory","UiBubble","active","setString","BagGridDraw","drawCell","cellPf","gridSize","grid","posStart","yCoord","xCoord","BagTrayAricleGen","BagExpandCount","genFirst","bagExpandCount","rndDeployWeapon","addArticleById","rnd2","rndDeploy","addAdTag","gen","canAddAdTag","articles","genGrade2","rndDeployGrade","rndGrade","rnd1","ready","randomRangeInt","WeightProbability","CfgGameBagTrayAricleGen","pw","common","cellLenMin","cfgArtile","strGrade","_class","BagView","enterDirect","UiBagBottom","UiFeature","layer0_Road","layer0_Spawn","enter","rootWorld","fadeOut","leave","fadeIn","opa","UIOpacity","addComponent","opacity","BezierCalc","bezier2Path","startPos","endPos","controlPos","bezier2","end","center","temp","bezier3Path","controlPos1","controlPos2","bezier3","t2","BezierMove","exe2Order","duration","ctrl","onComplete","onUpdate","ratio","p1","cp","p2","twoBezier","Buff_HpRegenIncreasePercentBelowPercentPerWave","tryExe","f","buff","affix","HpRegenIncreasePercentBelowPercentPerWave","extra","hp","hpBar","resetAllTowers","resetBuff","Buff_RndArticleMergeGradeUpgrade","getRndAritcle","replace","TowerAllUpdate","updateAll","slice","remove","id2","article2","tower2","Buff","iconId","interval","isNative","sender","_Buff","BuffRole","BuffCom","BuffFactory","_buff$affix$argNList","Affix","affixArgN","affixArgNList","affixArgStr","setCurrentAndMax","DataIncrease","attackDamageIncreasePercent","attackSpeedIncreasePercent","attackCritProbabilityIncreasePercent","attackCritMultipleIncreasePercent","attackLifeStealingPercent","AttackBulletPoisoningDamageIncreasePercent","AttackBulletPoisoningDurationIncreasePercent","AttackBulletExplodeRadiusIncreasePercent","AttackBulletExplodeDamageIncreasePercent","AttackBulletAddBuffRadiusIncreasePercent","AttackBulletAddBuffRadiusBuffIncreasePercent","AttackDamageIncreasePercentFullHp","AttackBulletProbabilityAddBuff","hpMaxIncrease","hpMaxIncreaseIncreasePercent","hpRegenIncreasePercent","hpRegenSpeedIncreasePercent","moveSpeedIncreasePercent","reset","BuffIncreaseCalc","exeBuffs","exeBuff","AttackDamageIncreasePercent","AuraAttackDamageIncreaseAllPercent","AttackSpeedIncreasePercent","AttackCritProbabilityIncreasePercent","AttackCritMultipleIncreasePercent","AttackLifeStealingPercent","HpMaxIncrease","HpMaxIncreaseIncreasePercent","HpRegenIncreasePercent","HpRegenSpeedIncreasePercent","MoveSpeedDecreasePercent","number","BuffOp","roleAdd","buffNew","roleAddNew","setCurrentAsMax","RoleAttributeUpdate","EffectPfMgr","setSiblingIndex","Burn","Poisoning","PoisoningPercent","Frozen","attack","paused","uitransEffect","rectEffect","getBoundingBox","rectRole","Stun","roleRemove","BuffResetMergeGrade","getMergeGradeFactor","mergeGradeFactor","BuffString","get1","get2","specified","buffId","Math","abs","BulletView","Life","Lifecycle","damge","MoveCom","BulletTarget","passCount","bounce","BulletMoveType","targetRole","moveType","Linear","BulletBounceBetweenEnemies","bounceRectEnemy","bounceRect","bounceEnemy","bounceBetweenEnemies","record","rotationType","BulletRotationType","BulletBounceRect","rect","BulletFactory","bullet","Bullet","FrameSecConvert","toFrame","BulletCfgSet","BulletViewSet","CfgBullet","speed","moveSpeed","BulletBounce","BounceBetweenEnemies","viewId","BulletPfMgr","collsion","collider","Collider2D","Contact2DType","BEGIN_CONTACT","CollisionBullet","onBeginContact","BulletMgr","BulletMoveCalc","dir","direction","normalize","BulletMove","rectBounce","Direction","BulletViewHelper","rotateDir","Chase","chaseTarget","xMin","xMax","yMin","yMax","BulletSys","outOfBounds","lifecycle","die","rectBounds","getVisibleSize","Rect","math","toDegree","atan2","eulerAngles","ButtonInterval","fn","totalTime","CellExpand","exe4","exe8","CfgArticle","dataOrig","CfgTowerItem","quality","CfgArticleParser","parseJson","MergeDefinition","row","handleMergeDefinition","CfgTowerParser","parseTowerItem","isHybrid","allowData","trim","id3","addDefinition","CfgArticleGradeItem","attackDamage","hpRegenIncrease","getMomeyPerWave","upgrade","CfgArticleGradeItemUpgrade","money1","itemId","itemCount","CfgArticleGradeParser","levelId","str2","_cfgItem$buffIds","CfgArticleUnlockItem","CfgArticleUnlockParser","CfgBuffItem","auraOverlay","Dir8","unlockCount","CfgBuffParser","filter","Boolean","CfgBulletItem","CfgBulletParser","toSecond","CfgDailyCheckin","CfgDailyCheckinParser","itemData","_decorator","ccclass","property","CfgDaySign","DayGifts","CfgDaySignMgr","CfgDaySignParser","num","isNaN","CfgFarm","CfgFarmItem","unlock_level","CfgFarmParser","CfgFeature","CfgFeatureItem","CfgFeatureParser","CfgGameBagTrayAricleGenItem","CfgGameBagTrayAricleGenParser","p","BagAllArticleIds","CfgGeneralParser","_CfgGeneral$ins$BagIn","_CfgGeneral$ins$BagIn2","_CfgGeneral$ins$BagAl","CfgGiftGroup","Id","ItemsId","ItemsNum","CfgGiftGroupMgr","CfgGiftGroupParser","_cfgItem$ItemsNum","CfgInviteConfig","GiftID","CfgInviteConfigMgr","CfgInviteConfigParser","CfgItem","CfgItemMgr","CfgItemParser","CfgItemDraw","CfgItemDrawItem","min","CfgItemDrawItemItem","CfgItemDrawParser","cfgItemItem","CfgItemRewardMgr","CfgItemRewardItem","CfgItemRewardParser","CfgLevelGeneralMgr","CfgLevelGeneralItem","mapId","CfgLevelGeneralParser","CfgLevelWaveMgr","LevelData","WaveData","rewards","WaveItem","triggerTime","genRoleId","hpMaxFactor","attackFactor","CfgLevelWaveParser","levelData","wave","parseWave","sort","b","CfgLoad","pathMode","flag","loader","LoaderRemote","home","getPath","CfgShopParser","CfgRoleParser","CfgUpgradeParser","CfgShapeParser","CfgMushroom","CfgMushroomItem","CfgMushroomParser","CfgRole","CfgRoleItem","attackCd","exp","lifeHpMax","hpBarId","CfgShapeItem","TileShapeDataParser","CfgShop","daliyFixed","daliy","CfgShopItem","nameLangId","cost","adDaliyLimitId","adDaliyLimitTotal","atkBulletId","atkCd","atkCritProbability","atkCritMultiple","atkTargeSelType","atkBulletScatterCount","CfgUpgrade","Channel","ChannelInit","setChannelType","ChannelType","Minigame_ByteDance","XiaoMi","selfCollider","otherCollider","contact","bulletAndRole","pass","d","d2","hasCrit","RoleGetDamage","DamageValueShow","prob","ls","findNearest","convertToNodeSpaceAR","len1","len2","len3","len4","dataIncr","Knockback","RoleMoveSys","Explode","AttackBulletAddBuffRadius","isNew","round","FrameCall","once","explode","CircleCollider2D","r","radius","ignore","role2","CollisionHandler","onEndContact","role1","SkillCloseDamageOp","tryRemove","onPreSolve","onPostSolve","DailyCheckinData","lastDate","Date","checkin","DateTimeMgr","getNowDateTime","isTodayCheckin","dtNow","DateTimeUtil","dateEquals","DailyCheckinDataPersist","_unused","dtLast","obj","toDateString","DailyLimit","decrement","dt","now","DateTimeSync","DateTimeRequest","getFromSuNing","ok","date","dtStart","ttRequest","fetch","wxRequest","_fetch","_x","response","request","url","success","fail","floor","setSeconds","getSeconds","dt1","dt2","y1","getFullYear","y2","m1","getMonth","m2","d1","getDate","getHours","getMinutes","destroyIfComplete","_sk","sk","sp","Skeleton","setCompleteListener","EnemyGen","genOne","RoleFactory","UiHpBar","EnemyMovePath","AiCom","PathMove","children","point","_dec","_Component","Entry","Init","deltaTime","ZOrderCtrl","TowerSys","RoleSys","LevelCtrl","Component","FeatureAcquire","Player","FeatureExtract","countLimit","PlayerBuffAffect","affectAllRoles","GetMomeyNow","UiMoney001","icon","MoneyFly","money001Fly","MergeEnable","ExpIncreasePercent","PlayerGradeOp","expFactor","RndArticleMergeGradeUpgrade","FeatureExtractPool","ids1","getCommon","ids2","getDeploy","rnd","poolData","Shuffle","shuffleArray","FrameCallDataItem","second","fps","frame","GameArg","mainIdx","GameLose","GamePause","pause","uiLose","UiLose","ItemDraw","itemList","showAnim","ItemGet","addList","resume","GameStart","GestureClick","posOrig","rest","getVal","GridHelper","getBoundingRectShapeUnlocked","coord1","girdSize","getBoundingRectUnlocked","cell1","divide3f","Size","rectRet","getBoundingRectEntirety","hintPlaceableShow","hintPlaceable","hintExpandable","UiBagGridBg","alignBgCenter","UiBagExpandOp","mode","toExpandable","showExpandable","showNormal","exe2","Guide","exe1","GuideData","hasRecord1","blockInput","Node","setContentSize","BlockInputEvents","hand","rootCover","cover","UiGuideCover","textBox","UiTextBox","guideStep0","guideStep1","prompt","label","guideTrayToGrid","guideBtnRefresh","btn","btnRefresh","btn2","SoundBtnClickSetter","guideStep2","coverBtn","_this5","guideBtnStart","_this6","btnStart","complete","emit","onBeforeArticlePlace","onBeforeArticleSelect","onCompleteArticlePlace","record1","size1","mask","maskUiTrans","coordTarget","articleTarget","handMove","equals","insertArticleByIndex","towerAuraHint","pos12","Tween","stopAllByTarget","HitTest","hit","posWorld","hitTray","hitGrid","LevelLoad","WorldNodeInit","PlayerInit","PlayerRoleInit","initBag","Stats","Test","NODE_DESTROYED","Deinit","UiBag","uiBottom","hasArticle","UiToast","m","dial","btnOK","money001Fly2","_wxHelper","WxHelper","enableShareMenu","initShare","CheckIsShare","UiKeyboard","ProgressBar","UiBar","bar","fillRange","ResLoad","onProgress","val2","onCompleteResLoad","UiWin","loadPf","PlatformInit","loadScene","StaminaRecoveryPersist","InitTt","showShareMenu","InitWx","withShareTicket","menus","setShareAppMessage","onShareAppMessage","imageUrlId","imageUrl","_loop","mapping","ItemType","Money001","Money002","isValid","UiMoney002","Stamina","UiStamina","ItemSub","toastStayDuration","win","window","languages","searcher","_language","language","updateSceneRenderers","rootNodes","allLocalizedLabels","labels","getComponentsInChildren","updateLabel","allLocalizedSprites","sprites","sprite","updateSprite","_languageData","lang","currentWaveIdx","startWave","WaveCtrl","onCompleted_Wave","updateWaveEnemy","onClearWaveAllEnemies","WaveSettle","load2","layer0","pfMap","LevelString","getMainLevelName","_createClass","ListHelper","addUniquely","LoaderBase","handler","_LoaderBase","counter","assetManager","loadRemote","LoaderResources","list2","_onProgress","dataItem","finished","total","_this$onProgress","executeInEditMode","_dec2","visible","_dec3","displayName","_descriptor","_applyDecoratedDescriptor","LocalizedLabel","_initializerDefineProperty","_assertThisInitialized","fetchRender","configurable","enumerable","writable","initializer","Object","getOwnPropertyDescriptor","LocalizedSpriteItem","SpriteFrame","_descriptor2","_dec4","_class4","_descriptor3","_class5","LocalizedSprite","spriteList","spriteFrame","orig","hybrid","id1","MergeDataItem","addDefinitionSingle","mapping2","getMergedId","getMergedIdhybrid","MergeEffect","merge","MergeGridHybrid","canMerge","articleNew","MergeHint","mergeable","a2","anim","restore","stopAllByTag","stop","ONE","MergeHybridHintMgr","_i","_all","hideShape","showShape","MergeHybridHint","clearAllLines","article1","v2","effect2","getTarget","fly","nodeTarget","PfMgrMoney","positionTest","MoveRole","preCalc","translate","vNormal","step","stepLen","m_enabled","audioSrc","play","isLoop","AudioSource","AudioClip","audio","clip","loop","_MusicBase","MusicBase","NodeSizeFit","uiTrans","size2","nodeSize","sizeOrig","trimmed","spr","sizeMode","Sprite","SizeMode","TRIMMED","NumberRolling","num1","num2","com","NumberRollingCom","setValue","setVal","diff","timeCount","showNumber","OsJudge","isWx","test","navigator","userAgent","PfLevelThumbnail","PfLoad","handlePf","UiLoadingScene","PfMgrIcon","UiSettings","UiBagArticleDetail","HomeUiBag","UiStaminaBuy","UiGet","UiDailyCheckin","UiHybridGuide","PfMgrRole","PfMgrNumber","UiFeatureSel","PfMgrIconBuff","PfMgrHeroUp","getSprite","getIconById","_this$root$getChildBy","pfIcon","meat","heroSpiece1","get_sprite_by_id","PfMgrMushroom","damageCrit","PlayerBag","PlayerGrade","getGridExpandCount","affectRole","buffList","addExp","UiPlayerGrade","g","expNeeded","uiFeatureSel","player","add2f","Random","rangeInt","random","ReplaceModeEnter","idUnlocked","sv","deployItemAnim","idDeploy","off","swap","idx1","idx2","skill","playMove","playAttack","getCurrent","animation","setAnimation","addAnimation","te","RoleAnimSpineAttackTimeScaleUpdate","getState","skeletonData","findAnimation","targetGetDamage","getBulletEmitPos","multiply3f","setRoleAsOrig","handleIncr","atk","moveSpeedOrig","RoleDie","Role","RoleCfgSet","RoleViewSet","AttackCom","Exp","SkillCom","RoleView","arg2","showDamageValue","_role$view$hpBar","normal","RoleGetDamageLocal","color","Color","RED","WHITE","rndPos","parallel","by","canMove","RoleMoveView","RoleMoveSysItem","orien","getScale","sign","setScale","RoleBuffSys","skillCom","SkillType","CloseDamage","closeDamage","trigger","ScreenAdaptResolutionPolicy","exeRatio","screen","resolution","setResolutionPolicy","ResolutionPolicy","FIXED_WIDTH","FIXED_HEIGHT","exeDesignResolution","getDesignResolutionSize","SeqScaleShow","nodes","Shake","exePreset","scalePos","genData","seq","_SkillBase","SkillCloseDamage","damageVal","targets","SkillBase","tryAdd","_role1$skill","skillbase","_role1$skill2","roleTarget","_SoundBase","btnClick","getReward","SoundBase","volume","playOneShot","btns","Button","StaminaRecovery","cycle","time","diffSce","recovery","StatsItem","StringUtil","fillZero","join","test4","test3","di","test2","oldTick","tick","test1","testBag","Test1","url2","text","Test2","TextureOriginalRatioSprite","sizeSpr","trans","originalSize","lines","line","charAt","TowerView","hpRegen","playerBuff","TowerAuraEmit","TowerAttributeUpdate","dataIncr2","dataIncrease","isSpecified","TowerCfgSet","buffGrade","idEntity","TowerAttack","attackAnim","TowerBulletEmit","TowerAttackTargetSelect","first","Rnd","MIN_VALUE","setAsOrig","buff2","cfgTower","cfgAricle","cfgGrade","AttackCritPerAttackNTimesIncrease","AttackCritPerAttackNTimes","TowerAuraHandler","auraEmit","buffOverlapEnable","OverlapEnable","buffAdd","towers","TowerAuraScopeExpandRet","dir8","HV","hv","All","_ret$towers","cells2","getTower","coordTemp","bulletGen","scatter","Boomerang","boomerang","vn","posM","pos11","path2","Forever","Sender","degree","bullet2","dir2","Vec2dHelper","rotate","AttackBulletSizeIncrease","AttackBulletMoveSpeedIncreasePercent","AttackBulletBounceRectEnemyIncrease","AttackBulletBounceBetweenEnemiesIncrease","AttackBulletBounceRectIncrease","AttackBulletPassIncrease","AttackBulletPassInfiniteAndBounceRectIncrease","AttackBulletScatterIncrease","AttackBulletScatterIncreaseProbability","AttackBulletAddBuff","AttackBulletSizeIncreasePercent","Tower","AuraCom","handeBuff","cfgItems","grade2","HpRegenIncrease","updateTower","TowerSysBuff","buffAttackContinuous","AttackContinuous","TweenHelper","TweenSpeed","speedFlag","onDestroy","UiArticleDetail","intro","attribute","UiArticleDetailIcon","RichText","UiArticleDetailAttribute","UiEffectScale","UiArticleDetailAttributeItem","HpRegen","AuraAttackDamage","AuraAttackSpeed","AuraAttackCritProbability","hideAll","refreshAttack","refreshMisc","str1","GetMomeyPerWave","iconSk","iconSize","refreshSkeleton","getRuntimeData","animations","UiArticleIcon","f2","UiArticleIconBg","description","UiEffectPopup","locked","UiBagPrefab","UiBagDeploy","UiBagUnlocked","UiBagLocked","UiBagReplace","btnList","UiBagArticleDetailBtnList","UiBagArticleDetailBaseAttribute","UiBagArticleDetailUnlocked","unlockedInfo","detail","setShowModeAsDeploy","cfgArctileItem","glId","btnUpgrade","cfgArctile","UiBagArticleDetailBaseAttributeItem","AttackDamageAura","cfgCurrent","cfgNext","btnRemove","btnDeploy","UiBagArticleDetailUpgrade","onClick_btnRemove","onClick_btnDeploy","setShowModeAsUnlocked","upgradeCost","onClick","check","content","pfItem","pfItem2","cfgGradeItem","isUnlocked","UiBagArticleDetailUnlockedItem","UiBagArticleDetailUnlockedItemIcon","iconBgList","btnRefreshGrade2","btnGetGridExpand","refreshGrade2Count","onClick_Start","onClick_btnRefreshGrade2","UiBtnGetGridExpand","showAllBtns","onClick_Refresh","onClick_btnGetGridExpand","UiBagCell","bg","removeAllChildren","q","UiBagItem","onClick_Item","itemEmpty","uiDetail","itemRoot","uiItem2","onClick_OK","GirdExpandCtrl","isNextToUnlocked","articleToUnlocked","showMode","initGrid","entiretyAnim","UiEffectFade","fade","unlockedAnim","entirety","setBg","setBgChildrenAlignMode","Widget","AlignMode","ALWAYS","ON_WINDOW_RESIZE","alignMode","updateFragment","node2","UiBagItemUpgradeFragment","pfShape","upgradeable","playAnimUpgradeable","_UiBagItem","UiBagItemLocked","unlockInfo","grayscale","refreshUnlockInfo","cfgArticleUnlockItem","includes","itemLocked","TouchLimit","articleSel","gestureClick","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","onTouchEnd","TOUCH_CANCEL","event","getUILocation","_this$onBeforeArticle","_this$onCompleteArtic","articlePlace","adGet","showArticleInfo","articleGotoTray","uiDialog","btnClose","cancel","uiAricleDetail","setProgress","UiBar2","UiBattle","UiLevel","UiLeft","UiRight","UiBgQuality","UiBottomTabPage","thb","UiTabHeaderBottom","page","initPage","initTabHeader","UiShop","onSelectChange","hideAllPages","bgTrans","txtTrans","hDiff","clickToDestroy","refreshSize","_class3","UiBubbleWithIcon","set_text","template","values","result","reduce","acc","_UiPopupBase","btnGet","btnGetAd","claimedToday","onClick_Get","onClick_GetAd","UiDailyCheckinItem","rewardData","refreshReward","refreshBtn","refreshListClaimState","n1","n2","setClaimable","setClaimed","setNotClaimable","claimType","ClaimType","Claimable","uiGet","UiPopupBase","claimableFlag","claimedFlag","UiItemList","Claimed","NotClaimable","UiDebug","GameTrayArticleGen","GameFeatureSel","loadAndCreateIns","UiDebugPersist","destroyIns","UiDebug_GameTrayArticleGen","UiDebug_GameFeatureSel","UiDebug_GameArticleInfo","UiDebug_GameFlow","UiDebug_BagArticle","UiDebug_Level","UiDebug_EnemyGen","UiDebug_Economic","jGameTrayArticleGen","edList","ed","eb","EditBox","edit","_Account$ins$bag$unlo","_Account$ins$bag$unlo2","_Account$ins$bag$depl","_Account$ins$bag$unlo3","gId","setSelLevelIdx","EditBoxLevelId","SceneTransition","EditBoxWaveIdx","_proto9","initStamina","initMoney001","initMoney002","valStart","valEnd","pfItems","refresh2","UiFeatureItem","refreshCount","refresh1","UiFeatureSelItemList","UiFeatureSelBtnList","featureSel","btnGetAll","onClick_GetAll","UiFeatureSelItem","descr","refreshIcon","refreshDescr","playAnimSel","layout","getChildByName","setItemCount","updateLayout","rootBlockInput","bar2","rootBar2","UiHybridGuideItem","item1","item2","item3","sks","UiItem","UiItemIcon","refreshBg","refreshByItemData","flagmentFlag","ws","Interval","input","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","keyCode","KeyCode","KEY_A","KEY_D","KEY_W","KEY_S","KEY_Q","onClick_Q","onClick_A","btnRanking","btnInvite","selLevelIdx","info","UiLevelInfo","arrow","UiLevelArrow","UiLevelBtnList","thumbnail","UiLevelThumbnail","UiWaveReward","uiLevel","btnArrowLeft","btnArrowRight","onClick_btnArrowLeft","onClick_btnArrowRight","isMoveCompleted","UiBtnStart","lock","lockTxt","btnGrinding","UiBtnGrinding","currentLevelIdx","animScale","cfgLevel","leftToday","adFlag","dailyLimit","rewardGet","uiWin","btnShare","levelName","best","refreshLevelName","refreshBest","GRAY","isLeft","UiListItemGenMgr","loading","addPersistRootNode","sceneName","preloadComplete","startCheck","preloadScene","loadGameLevel","onClick_btnOK","onClick_btnShare","UiTop","ScrollView","scrollToBottom","scrollToTop","UiMoreGames","icons","closeHandler","onClickItem","createRes","initItems","c","thisAppId","appId","addItem","UiMoreGamesItem","navigateToMiniProgram","extraData","envVersion","UiMoreGamesCfgItem","UiMoreGamesCfg","UiPause","initBtnClose","initCover","_this$btnClose","coverNode","cr","btnDailyCheckin","btnSettings","initVibrate","initAudio","sound","UiSwitch","isOn","music","svView","Mask","UiShopDaily","UiShopMoney001","ShopDailyData","UiShopDailyCountdown","UiShopDailyBtnRefresh","shopDaily","UiShopItem","UiShopDailyItem","refreshFixed","refreshRnd","startCheckReset","checkGen","_uiItem$adDl","adDl","dl","refreshLeft","_UiShopItem","onGetItems","onGetItems_","soldOut","setSoldOut","costAd","j3","ShopDailyDataItem","ShopDailyExtract","startAutoRefresh","s2","secondToString","_this7","_this8","costAdLabel","UiCost","refreshGeneral","refreshCost","cfg2","isAd","refreshAdLeft","ad","getItems","_this$onGetItems","rndIcon","autoRefreshStart","refreshCountdown","itemAd","UiStaminaBuyItem","itemMoney002","onClick_Ad","onClick_Money002","m002","UiStateBtn","stats","autoRefreshStop","UiStats","UiStatsItem","iconBg","currentFlag","header","UiTabHeader","_this$header$currentI","currentItem","showByName","_loop2","UiTabHeaderItem","showByIndex","itemTemp","stayDuration","updateRenderData","UiWaveInfo","uiPause","arrange","xStart","w2","UiWaveRewardItem","cfgList","waveInfo","claimed","claimable","unclaimable","initClaimable","light","rad","toRadian","cosVal","cos","sinVal","sin","frames","enable","_this$onComplete","bulletClear","towerBuff","levelSettle","idxNext","moneyAdded","weightCount","probabilities","World","s_ShareImage1","ShareImage","s_ShareImage2","s_ShareImage3","ShareImages","vibrateShort","vibrateLong","GetRandomParamShare","OpenShare","ShareAppMessage","query","Lanuchinfo","getLaunchOptionsSync","keys","shareImageId","shareImageUrl","ShareImageId","ShareImageUrl","allenemies"],"mappings":"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","file":"all.js","sourcesContent":["import { CurrentMax } from \"../../Game/World/1.Base/Support/SimpleStruct/CurrentMax\";\nimport { CfgGeneral } from \"../Cfg/CfgGeneral\";\n\n\n// 背包\nexport class AccountBag {\n\n    // 物件等级\n    public grade = new Map< string , number >() ; \n\n    // 上阵的\n    public deploy = Array< string >() ; \n\n    // 获得的 已解锁的\n    public unlocked = Array< string >() ; \n \n    // 体力值\n    public stamina = new CurrentMax() ; \n\n}\n\n\n// 主线关卡\nexport class AccuntLevel {\n\n    // 打到的关卡索引。从 1 开始，显示和逻辑一致，降低认知负担。\n    public levelIdx : number = 1 ; \n\n    // 打到的波数\n    public waveIdx = 0 ; \n\n}\n\nexport class AccountDaySign{\n\n    //可签到的天数\n    public DaySign:number=1;\n    //是否已领取\n    public Received:boolean=false;\n}\n\n/**\n * 邀请好友\n * */\nexport class AccuntInvite{\n\n    //是否通过邀请链接进入 0为否 1为是\n    public IsInviter:number;\n    //邀请玩家的id\n    public InviterId:string;\n    //当前邀请的次数\n    public InviteCount:number=1;\n    //邀请的校验码-用来判断是那一波的邀请\n    public Invite_check:string;\n    //已成功邀请的人数\n    public Aready_InviteCount:number=0;\n}\n\n//用户数据\nexport class AccuntInfo{\n\n    public Uid:number;\n\n    public Last_login_time:string;\n   \n}\n\nexport class AccountMoney {\n\n    // 货币 1级\n    public money001 = 0 ; \n\n    // 货币 2级\n    public money002 = 0 ; \n\n}\n\nexport class Account {\n\n    public static ins = new Account() ; \n\n    public money = new AccountMoney() ; \n\n    public bag = new AccountBag() ; \n\n    public mainLevel = new AccuntLevel() ;\n\n    public accuntInfo = new AccuntInfo();\n\n    public accuntInvite = new AccuntInvite();\n\n    // 拥有的物品\n    public items = new Map< string , number >() ;\n\n    // 体力\n    public stamina = new CurrentMax() ; \n    \n    // 波次奖励 领取记录\n    public waveReward = new Map< number , Set< number > >() ; \n\n    public accountdaysign=new AccountDaySign();\n\n    public constructor() {\n\n    }\n\n    public init() {\n\n        this.money.money001 = 500 ; \n        this.money.money002 = 500 ; \n\n        // 读取配置的\n        this.bag.deploy.splice( 0 , this.bag.deploy.length ) ; \n        this.bag.deploy.push( ... CfgGeneral.ins.BagInitDeployedIds ) ; \n\n        this.bag.unlocked.splice( 0 , this.bag.unlocked.length ) ; \n        this.bag.unlocked.push( ... CfgGeneral.ins.BagInitUnlockedIds ) ; \n\n        this.stamina.current = 30 ; \n        this.stamina.max = 30 ; \n        \n    }\n\n\n\n}\n","import { sys } from \"cc\";\nimport { Account } from \"./Account\";\nimport { ItemData } from \"../Item/ItemData\";\n\n\nexport class AccountPersist {\n\n    public static load() {\n\n        let a = Account.ins ; \n\n        let str = sys.localStorage.getItem( \"Account\" ) ; \n        if( str == null || str == \"\" ) return ; \n\n        let json = JSON.parse( str ) ; \n\n        this.loadBag( json[ \"Bag\" ] ) ; \n        this.loadMainLevel( json[ \"MainLevel\" ] ) ;\n        this.loadMoney( json[ \"Money\" ] ) ;\n        this.loadItem( json[ \"Item\" ] ) ; \n        this.loadMainLevelWaveReward( json[ \"MainLevelWaveReward\" ] ) ;\n        \n    }\n\n    public static loadItem( j : any ) {\n\n        if( j == null ) return ; \n\n        let a = Account.ins ; \n\n        for( let i = 0 ; i < j.length ; ++i ) {\n            let t = j[ i ] ; \n            let item = new ItemData() ; \n            let id = t[ \"ItemId\" ] ; \n            let count = Number( t[ \"ItemCount\" ] ) ; \n            a.items.set( id , count ) ; \n\n        } // end for\n\n    }\n\n    public static loadMoney( j : any ) {\n\n        if( j == null ) return ; \n\n        let a = Account.ins ; \n\n        a.money.money001 = Number( j[ \"Money1\" ] ) ; \n        a.money.money002 = Number( j[ \"Money2\" ] ) ; \n\n    }\n\n    public static loadBag( jBag : any ) {\n\n        if( jBag == null ) return ; \n\n        let a = Account.ins ; \n\n        // 等级\n        let jGrade = jBag[ \"Grade\" ] ;\n        // 遍历对象属性\n        for( let k in jGrade ) {\n            a.bag.grade.set( k , jGrade[ k ] ) ; \n        }\n\n        // 上阵的\n        a.bag.deploy = jBag[ \"Ready\" ] ;\n\n        // 解锁的\n        a.bag.unlocked = jBag[ \"Unlocked\" ] ;\n\n    }\n\n    public static loadMainLevel( j : any ) {\n\n        if( j == null ) return ; \n\n        let a = Account.ins ; \n\n        a.mainLevel.levelIdx = j[ \"LevelIdx\" ] ;\n        a.mainLevel.waveIdx = j[ \"WaveIdx\" ] ;\n\n\n    }\n\n    public static loadMainLevelWaveReward( j : any ) {\n\n        if( j == null ) return ;\n\n        let reward = Account.ins.waveReward ; \n\n        for( let i = 0 ; i < j.length ; ++i ) {\n            let jItem = j[ i ] ;\n\n            let levelIdx = Number( jItem[ \"LevelIdx\" ] ) ; \n            let waves = jItem[ \"Waves\" ] ; \n\n            let set = new Set< number >() ; \n            for( let n of waves ){ set.add( n ) ; } \n\n            reward.set( levelIdx , set ) ; \n\n        }\n\n    }\n\n\n    public static save() {\n\n        let json = {} ; \n\n        // 背包部分\n        let jBag = this.makeBag() ; \n        json[ \"Bag\" ] = jBag ; \n        json[ \"MainLevel\" ] = this.makeMainLevel() ; \n        json[ \"Money\" ] = this.makeMoney() ; \n        json[ \"Item\" ] = this.makeItem() ; \n        json[ \"MainLevelWaveReward\" ] = this.makeWaveReward() ; \n\n        let str = JSON.stringify( json ) ;\n\n        sys.localStorage.setItem( \"Account\" , str ) ; \n\n\n    }\n\n    public static makeWaveReward() : any {\n\n        let a = Account.ins ; \n        let reward = a.waveReward ; \n\n        let j = [] ; \n        for( let kv of reward ) {\n            let levelIdx = kv[ 0 ] ;\n            let waves = kv[ 1 ] ; \n\n            let wavesList = [] ;\n            for( let e of waves ){ wavesList.push( e ) ; }\n\n            let item = {} ;\n            item[ \"LevelIdx\" ] = levelIdx ; \n            item[ \"Waves\" ] = wavesList ; \n            j.push( item ) ;\n        }\n        \n        return j ; \n\n    }\n\n    public static makeItem() : any {\n\n        let a = Account.ins ; \n\n        let j = [] ; \n\n        for( let kv of a.items ) {\n            let item = {} ; \n            item[ \"ItemId\" ] = kv[ 0 ] ; \n            item[ \"ItemCount\" ] = kv[ 1 ] ; \n            j.push( item ) ;\n        }\n\n        return j ; \n\n    }\n\n    public static makeMoney() : any {\n\n        let a = Account.ins ; \n\n        let j = {} ;\n        j[ \"Money1\" ] = a.money.money001 ; \n        j[ \"Money2\" ] = a.money.money002 ; \n\n        return j ; \n\n    }\n\n    // 取得 Bag 表示的 表格对象\n    public static makeBag( ) : {} {\n\n        let a = Account.ins ; \n\n        let jBag = {} ;\n\n        // 等级\n        let jGrade = {} ;\n        jBag[ \"Grade\" ] = jGrade ; \n        for( let kv of a.bag.grade ) {\n            jGrade[ kv[0] ] = kv[1] ;\n        }\n\n        // 上阵的\n        jBag[ \"Ready\" ] = a.bag.deploy ; \n\n        // 解锁的\n        jBag[ \"Unlocked\" ] = a.bag.unlocked ; \n\n        return jBag ; \n\n    }\n\n    public static makeMainLevel( ) : {} {\n\n        let a = Account.ins ; \n\n        let j = {} ;\n\n        // 上阵的\n        j[ \"LevelIdx\" ] = a.mainLevel.levelIdx ; \n\n        // 解锁的\n        j[ \"WaveIdx\" ] = a.mainLevel.waveIdx ; \n\n        return j ; \n\n    }\n\n}","import { sys } from \"cc\";\nimport { AdBase } from \"./AdBase\";\nimport { AdWx } from \"./AdWx\";\nimport { AdTt } from \"./AdTt\";\nimport { AdGp } from \"./AdGp\";\n\n// 广告\nexport class Ad extends AdBase  {\n\n    public static ins : Ad = null ;\n\n    public static createIns() {\n\n        switch( sys.platform ) {\n\n            case sys.Platform.WECHAT_GAME : { \n\n                // this.ins = new AdWx() ; \n                this.ins = new AdBase() ; \n                this.ins.init() ; \n\n            }\n            break ; \n\n            case sys.Platform.BYTEDANCE_MINI_GAME : {\n\n                this.ins = new AdTt() ; \n                this.ins.init() ; \n\n            }\n            break ; \n\n            case sys.Platform.ANDROID : {\n\n                this.ins = new AdGp() ; \n                this.ins.init() ; \n                \n            }\n            break ; \n\n            default : {\n\n                this.ins = new AdBase() ; \n                this.ins.init() ; \n                \n            }\n            break ;\n\n\n\n        }\n\n    }\n\n\n}\n\n","import { find, Input, instantiate, Label, Node, Prefab, resources, tween } from \"cc\";\n\nexport class AdBase {\n\n    public init() {\n        console.log( \"AdBase.init\" ) ;\n    }\n\n    public bannerShow() {\n        console.log( \"AdBase.showBanner\" ) ;\n    }\n\n    public bannerHide() {\n        console.log( \"AdBase.hideBanner\" ) ;\n    }\n\n    public interstitialShow() {\n        console.log( \"AdBase.showInterstitial\" ) ;\n    }\n\n    public customShow() {\n        console.log( \"AdBase.showCustom\" ) ;\n    }\n\n    public rewardShow( \n        onSuccess : ()=>void = null , \n        onCancel : ()=>void = null ,\n        onError : ( err : string )=>void = null\n         ) {\n\n        console.log( \"AdBase.showRewardedVideo\" ) ;\n\n        UiAdSimReward.create( ( ui )=>{\n\n            let parent = find( \"Canvas\" ) ; \n            ui.root.setParent( parent , false ) ; \n\n            ui.btnError.on( Input.EventType.TOUCH_END , ()=>{\n                ui.root.destroy() ; \n                onError?.( \"出现错误\" ) ;\n            } );\n\n            ui.btnComplete.on( Input.EventType.TOUCH_END , ()=>{\n                ui.root.destroy() ; \n                onSuccess?.( ) ;\n            } );\n\n            ui.btnCancel.on( Input.EventType.TOUCH_END , ()=>{\n                ui.root.destroy() ; \n                onCancel?.( ) ;\n            } );\n\n        } ) ; \n        \n    }\n\n}\n\n\nexport class UiAdSimReward {\n\n    public static create( cb : ( ui : UiAdSimReward )=>void ) {\n\n        resources.load( \"Common/Ui/AdSimReward\" , Prefab , ( err , data )=>{\n\n            let root = instantiate( data ) ;\n\n            let ui = new UiAdSimReward() ; \n            ui.init( root ) ; \n            cb( ui ) ;\n\n        } ) ;\n\n    }\n\n    public root : Node ; \n\n    public btnError : Node ; \n    public btnCancel : Node ; \n    public btnComplete : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.btnError = this.root.getChildByPath( \"BtnList/btnError\" ) ;\n        this.btnCancel = this.root.getChildByPath( \"BtnList/btnCancel\" ) ;\n        this.btnComplete = this.root.getChildByPath( \"BtnList/btnComplete\" ) ;\n\n        // 倒计时\n        let countdown = this.root.getChildByPath( \"Countdown\" ).getComponent( Label ) ; \n        let count = 60 * 3 ;\n        tween( countdown ).sequence(\n            tween( countdown ).call( ()=>{\n                countdown.string = count.toString() ;\n                count-- ; \n            } ) , \n            tween( countdown ).delay( 1 ) , \n\n        ).repeatForever().start() ;\n\n\n    }\n\n}","import { Game, game } from \"cc\";\nimport { Ad } from \"../Ad\";\n\n\n// 前后台切换\nexport class AdForegroundSwitch {\n\n    public static init() {\n\n        game.on( Game.EVENT_SHOW , ()=>{\n\n            console.log( \"切换到前台\" ) ;\n\n            Ad.ins.interstitialShow() ; \n\n        } ) ;\n\n        // game.on( Game.EVENT_HIDE , ()=>{\n\n        //     console.log( \"切换到后台\" ) ;\n\n        // } ) ;\n\n    }\n\n}","\nimport { AdBase } from \"./AdBase\";\n\nexport class AdGp extends AdBase\n{\n\n}\n\n","import { UITransform, find } from \"cc\";\nimport { Music } from \"../../Audio/Music\";\nimport { Ad } from \"../Ad\";\n\n// 广告初始化\nexport class AdInit {\n\n    public static exe() {\n\n        if( Ad.ins != null ) return ; \n\n        Ad.createIns() ; \n\n        // Ad.ins.bannerShow() ;         \n        // Ad.ins.customShow() ; \n\n    }\n\n}\n","import { Node, find } from \"cc\";\nimport { UiDialog } from \"../../Ui/UiDialog\";\nimport * as i18n from 'db://i18n/LanguageData';\n\n// 激励视频失败处理器\nexport class AdRewardVideoFailHandler {\n\n    public static exe( err : string ) : boolean {\n\n        let parent = find( \"Canvas\" ) ; \n\n        if( err != null ) {\n\n            // let str = \"广告播放错误：\" + err ; \n            let str = i18n.t( \"Ad_Error\" ) + err ; \n            let ui = UiDialog.create( find( \"Canvas\" ) ) ;\n            ui.title.string = \"广告播放失败\" ; \n            ui.txt.string = str ;\n\n            return true ;\n        }\n\n        // if( err == null ) {\n\n        //     let str = \"要播完广告才行哦\" ; \n        //     let ui = UiDialog.show( str ) ;\n\n        //     return true ; \n        // }\n\n        return false ; \n\n    }\n\n}","import { sys } from \"cc\";\nimport { Ad } from \"../Ad\";\n\n// 启动时\nexport class AdStartup {\n\n    // 第 X 次进入时播放广告\n    public static times = 2 ; \n\n    public static exe() {\n\n        AdStartupData.ins.load() ; \n        let count = AdStartupData.ins.count ; \n        AdStartupData.ins.count++ ; \n        AdStartupData.ins.save() ; \n\n        if( count >= this.times ) {\n            // Ad.ins.showInterstitial() ; \n        }\n\n    }\n\n}\n\nclass AdStartupData {\n\n    public static ins = new AdStartupData() ;\n\n    // 计数器\n    public count = 0 ; \n\n    public load() {\n\n        let str = sys.localStorage.getItem( \"AdStartupCount\" ) as string ; \n        if( str == null || str == \"\" ) return ; \n\n        this.count = Number( str ) ; \n\n    }\n\n    public save() {\n        sys.localStorage.setItem( \"AdStartupCount\" , this.count ) ; \n    }\n\n}\n","\n\nimport { Music } from \"../Audio/Music\";\nimport { AdBase } from \"./AdBase\";\nimport { AdRewardVideoFailHandler } from \"./Misc/AdRewardVideoFailHandler\";\nimport { director, tween } from \"cc\";\n\n// 广告 抖音\nexport class AdTt extends AdBase {\n\n    public override init() {\n\n        /*\n            抖音的开发者工具 不支持广告播放，会报错，终止游戏运行。\n\n            兼容开发者工具运行。\n        */\n\n        // @ts-ignore\n        let info = tt.getSystemInfoSync();\n        if( info[ \"platform\" ] == \"devtools\" ) {\n            return ; \n        }\n\n        this.banner = new AdBanner() ;\n        this.banner.init() ;\n\n        this.interstitial = new AdInterstitial() ;\n        this.interstitial.init() ;\n\n        this.rewardedVideo = new AdRewardedVideo() ;\n        this.rewardedVideo.init() ; \n\n    }\n\n    public override bannerShow() {\n        \n        // this.banner?.show() ; \n\n    }\n\n    public override bannerHide() {\n        \n        // this.banner?.hide() ; \n\n    }\n\n    public override interstitialShow() {\n\n        this.interstitial?.show() ;\n    }\n\n    // onComplete 变量名不能为 ok 否者编译出错\n    public override rewardShow( \n        onSuccess : ()=>void , \n        onCancel : ()=>void = null , \n        onError : ( err : string )=>void = null , \n         ) {\n\n        if( this.rewardedVideo == null ) {\n\n            onSuccess?.() ; \n            return ; \n        }\n\n        let duration = 0.5 ; \n\n        this.rewardedVideo.onSuccess = ()=>{\n\n            this.resumeBgm() ; \n\n            tween( this ).delay( duration ).call( ()=>{ \n\n                onSuccess() ; \n\n            } ).start() ;\n\n        } ;\n        \n        this.rewardedVideo.onFailed = ( err : string )=>{ \n\n            this.resumeBgm() ; \n            \n            AdRewardVideoFailHandler.exe( err ) ; \n\n            onError?.( err ) ;\n\n        } ;\n\n        this.rewardedVideo.onCancel = ()=>{\n            onCancel?.() ; \n        } ;\n\n        this.rewardedVideo.show() ; \n\n    }\n\n    // 恢复音乐\n    private resumeBgm() {\n\n        let name = director.getScene().name ; \n        // if( name == \"Game\" ) {\n        //     Music.ins.bg1() ; \n        // }\n        // else if( name == \"Home\" ) {\n        //     Bgm.ins.home() ; \n        // }\n        Music.ins.bg1() ; \n    }\n\n    public banner : AdBanner ; \n    public interstitial : AdInterstitial ;\n    public rewardedVideo : AdRewardedVideo ; \n\n}\n\n\n// Banner 广告\nclass AdBanner {\n\n    public init() {\n        \n        /*\n            参考：\n            https://developer.open-douyin.com/docs/resource/zh-CN/mini-game/develop/api/ads/tt-create-banner-ad\n            https://developer.open-douyin.com/docs/resource/zh-CN/mini-game/develop/api/ads/banner-ad/banner-ad-on-resize\n\n\n            当广告没有填充时，会显示了一个无法改变位置的在底部的广告。\n            参考：\n            https://developer.open-douyin.com/docs/resource/zh-CN/mini-game/develop/api/ads/banner-ad/banner-ad\n\n        */ \n\n        // @ts-ignore\n        const { windowWidth, windowHeight } = tt.getSystemInfoSync();\n        const targetBannerAdWidth = 50 ;\n\n        // @ts-ignore\n        let bannerAd = tt.createBannerAd({\n            adUnitId: '1fl16h0lomd647n0o0',\n            adIntervals: 60 , \n            style: {\n                width: targetBannerAdWidth,\n                top: windowHeight - (targetBannerAdWidth / 16) * 9 , // 根据系统约定尺寸计算出广告高度\n                // top: windowHeight - (targetBannerAdWidth / windowHeight ) * windowWidth , // 根据系统约定尺寸计算出广告高度\n            },\n\n        })\n        this.bannerAd = bannerAd ;\n\n        // 也可以手动修改属性以调整广告尺寸\n        bannerAd.style.left = (windowWidth - targetBannerAdWidth) / 2;\n\n        // 尺寸调整时会触发回调，通过回调拿到的广告真实宽高再进行定位适配处理\n        // 注意：如果在回调里再次调整尺寸，要确保不要触发死循环！！！\n        bannerAd.onResize((size) => {\n\n            console.log(size.width, size.height);\n            // bannerAd.style.top = windowHeight - size.height;\n            // bannerAd.style.left = (windowWidth - size.width) / 2;\n\n        });\n\n\n\n        bannerAd.onError(err => {\n            console.log( \"banner 广告错误:\" + err)\n        })\n        \n        bannerAd.onLoad(() => {\n            console.log('banner 广告加载成功') ; \n\n            this.isLoaded = true ; \n\n            // 直接显示\n            this.show() ; \n\n        })\n\n\n\n    }\n\n    public show() {\n        \n        if( this.isLoaded ) {\n            this.bannerAd?.show() ; \n        }\n\n    }\n\n    public hide() {\n\n        this.bannerAd?.hide() ; \n\n    }\n\n    public bannerAd : any = null ; \n\n    public isLoaded = false ; \n\n}\n\n// 插屏广告\nclass AdInterstitial {\n\n    public init() {\n\n        // @ts-ignore\n        if (!tt.createInterstitialAd){\n            return ;\n        }\n\n        // 创建插屏广告实例，提前初始化\n        // @ts-ignore\n        let interstitialAd = tt.createInterstitialAd({\n            adUnitId: '80uwb2shjw11mh3efq'\n        })\n        this.interstitialAd = interstitialAd ; \n\n        interstitialAd.onLoad(() => {\n            console.log('插屏 广告加载成功')\n        })\n\n        interstitialAd.onError(err => {\n            console.log( \"插屏 加载错误：\" + err)\n        })\n\n\n    }\n\n    public show() {\n\n        let interstitialAd = this.interstitialAd ;\n        if (interstitialAd) {\n            interstitialAd.show().catch((err) => {\n                console.error(err)\n            })\n        }\n\n    }\n\n    public interstitialAd : any ;\n    \n}\n\n\n// 激励视频\nclass AdRewardedVideo {\n\n    // 成功\n    public onSuccess : ()=>void = null ; \n\n    // err == null 播放中途退出，不下发游戏奖励\n    public onFailed : ( err : string )=>void = null ; \n\n    public onCancel : ()=>void ; \n\n    public init() {\n\n        // 创建激励视频广告实例，提前初始化\n        // @ts-ignore\n        let videoAd = tt.createRewardedVideoAd({\n            adUnitId: '2b831d1g4ak2dmf3j2'\n        }) ;\n        this.videoAd = videoAd ; \n\n        videoAd.onLoad(() => {\n            console.log('激励视频 广告加载成功')\n        })\n        \n\n        videoAd.onError(err => {\n            console.log(err) ;\n            this.onFailed?.( err.toString() ) ;\n        })\n\n        videoAd.onClose(res => {\n            // 用户点击了【关闭广告】按钮\n            // 小于 2.1.0 的基础库版本，res 是一个 undefined\n            if (res && res.isEnded || res === undefined) {\n                // 正常播放结束，可以下发游戏奖励\n                this.onSuccess?.( ) ; \n            }\n            else {\n                // 播放中途退出，不下发游戏奖励\n                this.onCancel?.( )\n            }\n        })\n\n    }\n\n    public show() {\n\n        let videoAd = this.videoAd  ; \n        \n        if( !videoAd ) return ; \n\n        // 用户触发广告后，显示激励视频广告\n        videoAd.show().catch(() => {\n            // 失败重试\n            videoAd.load()\n            .then(() => videoAd.show())\n            .catch(err => {\n\n                console.log('激励视频 广告显示失败')\n\n                videoAd.load()\n                .then(() => videoAd.show())\n\n            })\n        })\n\n    }\n\n    public videoAd : any ; \n\n}","\n\n\nimport { Music } from \"../Audio/Music\";\nimport { AdBase } from \"./AdBase\";\nimport { AdRewardVideoFailHandler } from \"./Misc/AdRewardVideoFailHandler\";\nimport { UITransform, director, find, tween } from \"cc\";\n\n\n// 广告 微信\nexport class AdWx extends AdBase {\n\n    public override init() {\n\n        // 我的ID\n        let adIdBundle = AdIdBundleMgr.myself() ; \n\n        // 刘会涛的ID\n        // let adIdBundle = AdIdBundleMgr.lht() ;  \n\n        // 决定是否显示 Banner。某些分辨率显示 banner 会遮挡UI，体验很差，不显示。\n        let size = find( \"Canvas\" ).getComponent( UITransform ).contentSize ;\n        let f = size.width / size.height ;\n        let b = f >= 720 / ( 1280 + 100 ) ;\n        if( !b ){\n\n            this.banner = new AdBanner() ;\n            this.banner.init( adIdBundle.bannerId ) ;\n\n        }\n\n        this.interstitial = new AdInterstitial() ;\n        this.interstitial.init( adIdBundle.interstitialId ) ;\n\n        this.rewardedVideo = new AdRewardedVideo() ;\n        this.rewardedVideo.init( adIdBundle.rewardedVideoId ) ; \n\n        this.custom = new AdCustom() ;\n        this.custom.init( adIdBundle.customId ) ; \n\n    }\n\n    public override bannerShow() {\n        \n        this.banner?.show() ; \n\n    }\n\n    public override bannerHide() {\n        \n        this.banner?.hide() ; \n\n    }\n\n    public override interstitialShow() {\n\n        this.interstitial?.show() ;\n    }\n\n    // onComplete 变量名不能为 ok 否者编译出错\n    public override rewardShow( onSuccess : ()=>void , \n        onCancel : ()=>void = null ,\n        onError : ( err : string )=>void = null\n         ) {\n\n        let duration = 0.5 ; \n\n        // 成功\n        this.rewardedVideo.onSuccess = ()=>{\n\n            this.resumeBgm() ; \n\n            tween( this ).delay( duration ).call( ()=>{ \n\n                onSuccess() ; \n\n            } ).start() ;\n\n        } ;\n        \n        // 失败\n        this.rewardedVideo.onError = ( err : string )=>{ \n\n            this.resumeBgm() ; \n            \n            if( onError != null ) {\n                onError( err ) ;\n            }\n            else {\n                AdRewardVideoFailHandler.exe( err ) ; \n            }\n\n        } ;\n\n        // 取消\n        this.rewardedVideo.onCancel = ()=>{\n\n            this.resumeBgm() ; \n\n            onCancel?.() ; \n        }\n\n        this.rewardedVideo.show() ; \n\n    }\n\n    // 恢复音乐\n    private resumeBgm() {\n\n        let name = director.getScene().name ; \n        // if( name == \"Game\" ) {\n        //     Music.ins.bg1() ; \n        // }\n        // else if( name == \"Home\" ) {\n        //     Music.ins.bg1() ; \n        // }\n        Music.ins.bg1() ; \n\n    }\n\n    public override customShow() {\n\n        this.custom?.show() ; \n\n    }\n\n    public custom : AdCustom ;\n    public banner : AdBanner ; \n    public interstitial : AdInterstitial ;\n    public rewardedVideo : AdRewardedVideo ; \n\n}\n\n// 广告ID组\nclass AdIdBundle {\n\n    public bannerId : string = null ;\n    public customId : string = null ; \n    public interstitialId : string = null ; \n    public rewardedVideoId : string = null ; \n\n}\n\n// 广告ID组管理器\nclass AdIdBundleMgr {\n\n    // 我自己的\n    public static myself() : AdIdBundle {\n\n        let bundle = new AdIdBundle() ; \n        bundle.customId = 'adunit-2a7ec63d7c13a4ad' ; \n        bundle.bannerId = 'adunit-2fb5df994068613a' ; \n        bundle.interstitialId = 'adunit-510d8aa624507588' ;\n        bundle.rewardedVideoId = 'adunit-595220d2516c0e66' ; \n        return bundle ; \n\n    }\n\n    // 刘会涛的\n    public static lht() : AdIdBundle {\n\n        let bundle = new AdIdBundle() ; \n        bundle.customId = 'adunit-82c13098f30b3ec9' ; \n        bundle.bannerId = 'adunit-f47a79562dbbe928' ; \n        bundle.interstitialId = 'adunit-a18e521886049e81' ;\n        bundle.rewardedVideoId = 'adunit-6e069bac4cb1000f' ; \n        return bundle ; \n\n    }\n\n}\n\n// 原生模版\nclass AdCustom {\n\n    public init( id : string ) {\n\n        // @ts-ignore\n        var phone = wx.getSystemInfoSync();\n        console.log(phone);\n        var w = phone.screenWidth / 2;\n        var h = phone.screenHeight;\n\n        // 创建 原生模板 广告实例，提前初始化\n        // @ts-ignore\n        let CustomAd = wx.createCustomAd({\n            adUnitId: id ,\n            style: {\n                left: w - 290 / 2 , // 测试出来的经验值\n                // left: ( w - 350 ) / 2 , // 无效\n                top: 0,\n                width: 350 ,\n            }\n        })\n\n        this.CustomAd = CustomAd ; \n        \n        // 监听 原生模板 广告错误事件\n        CustomAd.onError(err => {\n            console.error(err.errMsg)\n        });\n\n        CustomAd.onLoad(() => {\n            console.log('原生模板广告加载成功')\n        })\n\n\n    }\n\n    public show() {\n\n        this.CustomAd.show()\n\n    }\n\n    private CustomAd : any = null ;\n\n}\n\n// Banner 广告\nclass AdBanner {\n\n    public init( id : string ) {\n        \n        // @ts-ignore\n        var phone = wx.getSystemInfoSync();\n        console.log(phone);\n        var w = phone.screenWidth / 2;\n        var h = phone.screenHeight;\n\n        // @ts-ignore\n        let bannerAd = wx.createBannerAd({\n            adUnitId: id ,\n            adIntervals: 60 , \n            style: {\n                left: 0,\n                top: 0,\n                width: 400 , \n                height : 100 , \n            }\n\n        })\n        this.bannerAd = bannerAd ;\n\n        bannerAd.onError(err => {\n            console.log( \"广告错误:\" + err)\n        })\n        \n        bannerAd.onLoad(() => {\n            console.log('banner 广告加载成功')\n        })\n\n        bannerAd.onResize( ()=> {\n            bannerAd.style.left = w - bannerAd.style.realWidth/2+0.1;\n            bannerAd.style.top = h - bannerAd.style.realHeight+0.1 ;\n            console.log( bannerAd.style.top );\n        })\n\n    }\n\n    public show() {\n        \n        this.bannerAd?.show() ; \n\n    }\n\n    public hide() {\n\n        this.bannerAd?.hide() ; \n\n    }\n\n    public bannerAd : any = null ; \n\n}\n\n// 插屏广告\nclass AdInterstitial {\n\n    public init( id : string ) {\n\n        // @ts-ignore\n        if (!wx.createInterstitialAd){\n            return ;\n        }\n\n        // 创建插屏广告实例，提前初始化\n        // @ts-ignore\n        let interstitialAd = wx.createInterstitialAd({\n            adUnitId: id \n        })\n        this.interstitialAd = interstitialAd ; \n\n        interstitialAd.onLoad(() => {\n            console.log('插屏 广告加载成功')\n        })\n\n        interstitialAd.onError(err => {\n            console.log(err)\n        })\n\n\n    }\n\n    public show() {\n\n        let interstitialAd = this.interstitialAd ;\n        if (interstitialAd) {\n            interstitialAd.show().catch((err) => {\n                console.error(err)\n            })\n        }\n\n    }\n\n    public interstitialAd : any ;\n    \n}\n\n\n// 激励视频\nclass AdRewardedVideo {\n\n    // 成功\n    public onSuccess : ()=>void = null ; \n\n    // err == null 播放中途退出，不下发游戏奖励\n    public onError : ( err : string )=>void = null ; \n\n    // 取消\n    public onCancel : ()=>void = null ; \n\n    public init( id : string ) {\n\n        // 创建激励视频广告实例，提前初始化\n        // @ts-ignore\n        let videoAd = wx.createRewardedVideoAd({\n            adUnitId: id\n        }) ;\n        this.videoAd = videoAd ; \n\n        videoAd.onLoad(() => {\n            console.log('激励视频 广告加载成功')\n        })\n\n        videoAd.onError(err => {\n            console.log(err) ;\n            this.onError?.( err.toString() ) ;\n        })\n\n        videoAd.onClose(res => {\n            // 用户点击了【关闭广告】按钮\n            // 小于 2.1.0 的基础库版本，res 是一个 undefined\n            if (res && res.isEnded || res === undefined) {\n                // 正常播放结束，可以下发游戏奖励\n                this.onSuccess?.( ) ; \n            }\n            else {\n                // 播放中途退出，不下发游戏奖励\n                this.onCancel?.( )\n            }\n        })\n\n    }\n\n    public show() {\n\n        let videoAd = this.videoAd  ; \n        \n        if( !videoAd ) return ; \n\n        // 用户触发广告后，显示激励视频广告\n        videoAd.show().catch(() => {\n            // 失败重试\n            videoAd.load()\n            .then(() => videoAd.show())\n            .catch(err => {\n\n                console.log('激励视频 广告显示失败')\n\n                videoAd.load()\n                .then(() => videoAd.show())\n\n            })\n        })\n\n    }\n\n    public videoAd : any ; \n\n}","\n// 词缀、能力。表示最小的能力条目\nexport class Affix {\n\n    public type = AffixType.None ; \n\n    // 参数 数字\n    public argN : number = 0 ; \n    // 参数 数字 列表\n    public argNList : Array< number > = null ;\n\n    // 参数 字符串\n    public argStr : string = null ; \n    // 参数 字符串 列表\n    public argStrList : Array< number > = null ;\n\n}\n\n/*\n    词缀类型\n\n    属性修改方式：\n        设置为指定值。\n        增加指定值。Increase 表示是增加\n\n    值的类型：\n        具体值。\n        百分比。Percent 表示百分比\n\n*/\nexport enum AffixType {\n\n    None = \"None\" , \n\n    // ——————————————————————————————————————————————————————————\n    // 综合性 的\n\n\n    // 立刻获得货币。\n    GetMomeyNow = \"GetMomeyNow\" , \n\n    // 每波后，额外获得货币。\n    // 具体值受合成等级影响 val *= 合成等级\n    GetMomeyPerWave = \"GetMomeyPerWave\" , \n\n    // 角色 血量 增加 具体值。\n    // 具体值受合成等级影响 val *= 合成等级\n    HpMaxIncrease = \"HpMaxIncrease\" , \n\n    // 角色 血量 增加 百分比\n    HpMaxIncreasePercent = \"HpMaxIncreasePercent\" , \n\n    // 角色 最大血量 增加 具体值 增加 百分比\n    HpMaxIncreaseIncreasePercent = \"HpMaxIncreaseIncreasePercent\" , \n\n    // 角色 血量 恢复 百分比。\n    // 具体值受合成等级影响 val *= 合成等级\n    HpRegenIncreasePercent = \"HpRegenIncreasePercent\" , \n\n    // 角色 血量 恢复 具体值\n    HpRegenIncrease = \"HpRegenIncrease\" , \n\n    // 角色 血量 回复 速度 增加 百分比\n    HpRegenSpeedIncreasePercent = \"HpRegenSpeedIncreasePercent\" , \n\n    // 经验获取 增加 百分比\n    ExpIncreasePercent = \"ExpIncreasePercent\" , \n    \n    // 随机一个物件合成等级提升一级\n    RndArticleMergeGradeUpgrade = \"RndArticleMergeGradeUpgrade\" , \n\n    // ——————————————————————————————————————————————————————————\n    // 作用在 Tower 上的 光环\n\n    // 光环 攻速 增加\n    AuraAttackSpeedIncreasePercent = \"AuraAttackSpeedIncreasePercent\" , \n\n    // 光环 伤害 增加\n    AuraAttackDamageIncreasePercent = \"AuraAttackDamageIncreasePercent\" , \n\n    // 光环 伤害 增加 全体\n    AuraAttackDamageIncreaseAllPercent = \"AuraAttackDamageIncreaseAllPercent\" , \n\n    // 光环 给周围武器加暴击概率。\n    AuraAttackCritProbabilityIncrease = \"AuraAttackCritProbabilityIncrease\" , \n\n\n    // ——————————————————————————————————————————————————————————\n    // 作用在 Tower 上的\n\n    // 攻击 伤害 增加 百分比\n    AttackDamageIncreasePercent = \"AttackDamageIncreasePercent\" , \n\n    // 攻击 伤害 增加 百分比 如果击中的是满血的\n    AttackDamageIncreasePercentFullHp = \"AttackDamageIncreasePercentFullHp\" , \n\n    // 攻击 速度 增加 百分比\n    AttackSpeedIncreasePercent = \"AttackSpeedIncreasePercent\" , \n\n    // 攻击子弹存活时间增加百分比\n    // AttackBulletLifeIncreasePercent = \"AttackBulletLifeIncreasePercent\" , \n\n    // 攻击 自身吸血 设置为 百分比\n    AttackLifeStealingPercent = \"AttackLifeStealingPercent\" , \n\n    // 攻击 N 次攻击之后暴击\n    AttackCritPerAttackNTimes = \"AttackCritPerAttackNTimes\" , \n    \n    // 攻击 N 次攻击之后暴击 次数 增加\n    AttackCritPerAttackNTimesIncrease = \"AttackCritPerAttackNTimesIncrease\" , \n\n    // 攻击 暴击概率 增加 百分比\n    AttackCritProbabilityIncreasePercent = \"AttackCritProbabilityIncreasePercent\" ,  \n\n    // 攻击 暴击 倍数 增加 百分比\n    AttackCritMultipleIncreasePercent = \"AttackCritMultipleIncreasePercent\" ,  \n\n\n\n    // 攻击 子弹 飞行速度 增加 百分比\n    AttackBulletMoveSpeedIncreasePercent = \"AttackBulletMoveSpeedIncreasePercent\" , \n\n    // 攻击 子弹 穿透 增加\n    AttackBulletPassIncrease = \"AttackBulletPassIncrease\" , \n\n    // 攻击 子弹 弹射边框次数 增加\n    AttackBulletBounceRectIncrease = \"AttackBulletBounceRectIncrease\" , \n\n    // 攻击 子弹 弹射边框和敌人次数 增加\n    AttackBulletBounceRectEnemyIncrease = \"AttackBulletBounceRectEnemyIncrease\" , \n\n    // 攻击 子弹 在敌人间弹射次数 增加\n    AttackBulletBounceBetweenEnemiesIncrease = \"AttackBulletBounceBetweenEnemiesIncrease\" , \n\n    // 攻击 子弹 穿透增加9999,边框反弹。\n    AttackBulletPassInfiniteAndBounceRectIncrease = \"AttackBulletPassInfiniteAndBounceRectIncrease\" , \n\n    // 攻击 子弹 散射 数量 增加\n    AttackBulletScatterIncrease = \"AttackBulletScatterIncrease\" , \n\n    // 攻击 子弹 散射 数量 增加 概率\n    AttackBulletScatterIncreaseProbability = \"AttackBulletScatterIncreaseProbability\" , \n\n    // 攻击 子弹 大小 增加 百分比\n    AttackBulletSizeIncreasePercent = \"AttackBulletSizeIncreasePercent\" , \n\n\n    // 攻击 子弹 连发\n    AttackContinuous = \"AttackContinuous\" , \n\n\n    // 攻击 子弹 给击中的Role添加指定Buff。\n    AttackBulletAddBuff = \"AttackBulletAddBuff\" , \n\n    // 攻击 子弹 击中目标后，范围内给Role添加Buff\n    AttackBulletAddBuffRadius = \"AttackBulletAddBuffRadius\" , \n\n    // 攻击 子弹 击中目标后，范围内给 Role 添加 Buff。范围 增加 百分比\n    AttackBulletAddBuffRadiusIncreasePercent = \"AttackBulletAddBuffRadiusIncreasePercent\" , \n\n    // 攻击 子弹 击中目标后，范围内给 Role 添加 Buff。Buff 数值 增加 百分比\n    AttackBulletAddBuffRadiusBuffIncreasePercent = \"AttackBulletAddBuffRadiusBuffIncreasePercent\" , \n\n    // 攻击 子弹 概率 给击中的Role添加指定Buff。每次击中都是一次独立的概率事件，击中后计算概率。\n    AttackBulletProbabilityAddBuff = \"AttackBulletProbabilityAddBuff\" , \n\n    // 攻击 子弹 附加的中毒Buff 伤害 增加 百分比\n    AttackBulletPoisoningDamageIncreasePercent = \"AttackBulletPoisoningDamageIncreasePercent\" , \n\n    // 攻击 子弹 附加的中毒Buff 持续时间 增加 百分比\n    AttackBulletPoisoningDurationIncreasePercent = \"AttackBulletPoisoningDurationIncreasePercent\" , \n\n    // 攻击 子弹 爆炸 半径 增加 百分比\n    AttackBulletExplodeRadiusIncreasePercent = \"AttackBulletExplodeRadiusIncreasePercent\" , \n\n    // 攻击 子弹 爆炸 伤害 增加 百分比\n    AttackBulletExplodeDamageIncreasePercent = \"AttackBulletExplodeDamageIncreasePercent\" , \n\n\n    // 每波低于30%血量立刻回复20%血\n    HpRegenIncreasePercentBelowPercentPerWave = \"HpRegenIncreasePercentBelowPercentPerWave\" , \n\n\n    // 合并 启用\n    MergeEnable = \"MergeEnable\" , \n\n    // 重叠开启。无参数表示开启实体所有Buff的重叠。\n    OverlapEnable = \"OverlapEnable\" , \n\n    // AttackBulletProbabilityAddBuff =\n\n    // ——————————————————————————————————————————————————————————\n    // 作用在 Player 上的 Buff 词缀\n\n\n\n    // ——————————————————————————————————————————————————————————\n    // 作用在 Role 身上的 Buff 词缀。\n\n    \n\n    // 燃烧\n    Burn = \"Burn\" , \n\n    // 中毒\n    Poisoning = \"Poisoning\" , \n\n    // 中毒。触发伤害是攻击力的百分比\n    PoisoningPercent = \"PoisoningPercent\" , \n\n    // 冰冻\n    Frozen = \"Frozen\" , \n\n    // 减速 百分比\n    MoveSpeedDecreasePercent = \"MoveSpeedDecreasePercent\" , \n\n    // 眩晕\n    Stun = \"Stun\" , \n\n    // 击退\n    Knockback = \"Knockback\" , \n\n    // 爆炸 \n    Explode = \"Explode\" , \n    \n}","import { Role } from \"../Role/Base/Role\";\nimport { RoleMgr } from \"../Role/Base/RoleMgr\";\nimport { RoleMove } from \"../Role/Misc/RoleMove\";\n\nexport class Ai001 {\n\n    public static update( role : Role ) {\n\n        // 不断攻击主角\n\n        role.ai.target = RoleMgr.ins.local ; \n        this.chase( role ) ; \n\n    }\n\n    public static chase( role : Role ) {\n\n        let tar = role.ai.target ; \n        let v = tar.view.root.position.clone().subtract( role.view.root.position ) ;\n        RoleMove.exe( role , v ) ;\n\n    }\n\n}","import { PlayerRole } from \"../../2.Td/Player/PlayerRole\";\nimport { Role } from \"../Role/Base/Role\";\nimport { RoleAnimSpine } from \"../Role/Misc/RoleAnimSpine\";\nimport { RoleAttack } from \"../Role/Misc/RoleAttack\";\nimport { RoleMove } from \"../Role/Misc/RoleMove\";\n\n\nexport class Ai002 {\n\n    public static update( role : Role ) {\n\n        switch( role.ai.state ) {\n\n            case 0 : {\n                this.state_pathMove( role ) ; \n            }\n            break ; \n\n            case 1 : {\n                this.state_chase( role ) ;\n            }\n            break ; \n\n        }\n\n    }\n\n    private static state_pathMove( role : Role ) {\n\n        let pathMove = role.ai.pathMoved ; \n        let path = pathMove.path ; \n        let idx = pathMove.idx ; \n        let targetPos = path[ idx ] ; \n        let v = targetPos.clone().subtract( role.view.root.position ) ;\n        if( v.lengthSqr() <= 20 * 20 ) {\n\n            // 到达节点\n            pathMove.idx++ ; \n\n            if( pathMove.idx >= path.length ) {\n                // 到达终点\n\n                role.ai.target = PlayerRole.ins.main ; \n                role.ai.state = 1 ; \n\n                return ; \n\n            }\n\n            // 更新目标\n            targetPos = path[ pathMove.idx ] ; \n            v = targetPos.clone().subtract( role.view.root.position ) ;\n\n        }\n        \n        // 不断朝向目标移动\n        let bMove = RoleMove.exe( role , v ) ;\n        if( bMove ) {\n            // 累加移动的路径长度\n            role.ai.pathMoved.lenMoved += role.move.offset.lengthSqr() ;\n        }\n\n    }\n\n    private static state_chase( role : Role ) {\n\n        let target = role.ai.target ; \n\n        if( target.life.isDead == true ) {\n            // 目标死亡 待机\n\n            RoleAnimSpine.playIdle( role.view.skeleton ) ; \n\n            return ; \n        }\n\n        let v = target.view.root.position.clone().subtract( role.view.root.position ) ; \n        if( v.lengthSqr() > 100 * 100 ) {\n            // 追击\n\n            RoleMove.exe( role , v ) ;\n\n            return ; \n        }\n\n        // 攻击\n        RoleAttack.exe( role , v ) ;\n\n    }\n\n}","import { Vec3 } from \"cc\";\nimport { Role } from \"../Role/Base/Role\";\nimport { PathMove } from \"./PathMove\";\n\nexport class AiCom {\n\n    public type = 0;\n\n    public state = 0 ;\n\n    // 攻击目标\n    public target : Role ;\n    // // 攻击间隔\n    // public CurrentMax attackInterval = new CurrentMax();\n\n    // // 攻击范围。平方\n    // public float attackRangeSqr = 0 ;\n    // // 视野范围。平方\n    // public float viewRangeSqr = 0 ; \n\n    // public int moveCount = 0;\n    // public int moveCountMax = 60;\n    // public int moveDir;\n\n    public pathMoved : PathMove = null ; \n\n}\n\n","import { Role } from \"../Role/Base/Role\";\nimport { RoleMgr } from \"../Role/Base/RoleMgr\";\nimport { Ai001 } from \"./Ai001\";\nimport { Ai002 } from \"./Ai002\";\n\n\nexport class AiSys {\n\n    public static update() {\n\n        var all = RoleMgr.ins.allEnemies;\n\n        for ( var i = 0; i < all.length; ++i )\n        {\n            var role = all[i];\n            if ( role.ai == null ) continue;\n            this.updateRole( role );\n\n        } // end for\n\n    }\n\n    public static updateRole( role : Role ) {\n\n        Ai002.update( role ) ;\n\n    }\n\n}","\n\nimport { Lang } from '../Misc/Lang';\n\nexport class ArticleString {\n\n    // 取得名字\n    public static getName( articleId : string ) : string {\n\n        // 都转换成1级的ID\n        let strs = articleId.split( \"_\" ) ;\n        if( strs.length == 2 ){\n            articleId = strs[ 0 ] + \"_1\" ; \n        }\n\n        let key = \"ArticleName_\" + articleId ; \n        let str = Lang.get( key ) ;\n        return str ; \n\n    }\n\n    // 取得描述 \n    public static getDescription( articleId : string ) {\n\n        let strs = articleId.split( \"_\" ) ;\n        if( strs.length == 2 ){\n            articleId = strs[ 0 ] + \"_1\" ; \n        }\n\n        let key = \"ArticleDescr_\" + articleId ; \n        let str = Lang.get( key ) ;\n\n        return str ;\n    }\n\n}","import { Account } from \"../../Common/Account/Account\";\nimport { AccountPersist } from \"../../Common/Account/AccountPersist\";\nimport { CfgArticleUnlock, CfgArticleUnlockItem } from \"../../Common/Cfg/CfgArticleUnlock\";\nimport { UiArticleUnlock } from \"../Ui/Popup/UiArticleUnlock\";\nimport { UiMain } from \"../Ui/Main/UiMain\";\n\n// 关卡解锁物件\nexport class ArticleUnlockLevel {\n\n    // 配置关卡满足当前关卡条件，就加入解锁数据中，并返回解锁的物件ID列表\n    public static exe() : Array< string > {\n\n        let ret = new Array< string >() ;\n\n          for( let kv of CfgArticleUnlock.data ) {\n\n            let cfgItem = kv[1] ;\n\n            if( this.canUnlock( cfgItem ) == false ) continue ; \n\n            let id = cfgItem.id ; \n            ret.push( id ) ; \n            Account.ins.bag.unlocked.push( id ) ; \n\n        } // end for\n        \n        if( ret.length > 0 ) {\n            AccountPersist.save() ; \n\n            this.ui( ret ) ;\n\n        }\n\n        \n\n        return ret ; \n\n    }\n\n    // 配置条目是否可解锁\n    private static canUnlock( cfgItem : CfgArticleUnlockItem ) {\n\n        if( cfgItem.levelIdx <= -1 ) return false ; \n\n        let id = cfgItem.id ; \n\n        let levelIdx = Account.ins.mainLevel.levelIdx ; \n\n        // 判断是否达到解锁条件\n        if( cfgItem.levelIdx > levelIdx ) return false ; \n\n        // 判断之前是否已经解锁过了\n        if( Account.ins.bag.unlocked.findIndex( ( e )=>{ return e == id ; } ) != -1 ) return false ; \n\n        return true ; \n\n    }\n\n    // 弹出UI告知玩家\n    private static ui( ids : Array< string > ) {\n\n        UiArticleUnlock.loadAndCreate( ( ui )=>{\n\n            ui.root.setParent( UiMain.ins.root , false ) ; \n            ui.refresh( ids ) ; \n            ui.show() ; \n\n        } ) ;\n\n    }\n\n}","import { CurrentMax } from \"../../Support/SimpleStruct/CurrentMax\";\n\n\n// 攻击\nexport class AttackCom {\n\n    // 锁定计数器\n    public lockCount = 0 ; \n\n    // 子弹ID\n    public bulletId : string = null;\n\n    // 散射数量\n    public scatterCount = 0 ; \n\n    // CD\n    public cd = new CurrentMax() ;\n\n    // 攻击力\n    public damage = 1 ;\n\n    // 暴击\n    public crit = new AttackCrit() ;\n\n    // 吸血\n    public lifeStealing = new AttackLifeStealing() ; \n\n    // 目标选择类型\n    public targeSelType = AttackTargetSelectionType.First ; \n\n    // 统计攻击次数\n    public count = 0 ; \n\n}\n\n// 吸血\nexport class AttackLifeStealing {\n\n    // 吸血百分比\n    public percent = 0 ; \n\n}\n\n// 暴击\nexport class AttackCrit {\n\n    // 概率。小数\n    public probability = 0 ; \n\n    // 倍数\n    public multiple = 0 ; \n\n}\n\n\n// 目标选择类型\nexport enum AttackTargetSelectionType {\n\n    None = \"None\" , \n\n    // 最前\n    First = \"First\" , \n\n    // 随机\n    Rnd = \"Rnd\" , \n\n}","import { sys } from \"cc\";\nimport { Sound } from \"./Sound\";\nimport { Music } from \"./Music\";\n\n// 音频设置持久化\nexport class AudioSettingsPersist {\n\n    public static load() {\n\n        this.loadMusic() ;\n        this.loadSound() ;\n\n    }\n\n    public static save() {\n        this.saveMusic() ;\n        this.saveSound() ; \n    }\n\n\n    public static loadMusic() {\n        let val = sys.localStorage.getItem( \"AudioMusicEnabled\" ) ;\n        if( val == null || val == \"\" ) return ;\n        Music.ins.enabled = val == \"1\" ? true : false ;\n    }\n\n    public static saveMusic() {\n        sys.localStorage.setItem( \"AudioMusicEnabled\" , Music.ins.enabled == true ? \"1\" : \"0\" ) ;\n    }\n\n    public static loadSound() {\n        let val = sys.localStorage.getItem( \"AudioSoundEnabled\" ) ;\n        if( val == null || val == \"\" ) return ;\n        Sound.ins.enabled = val == \"1\" ? true : false ;\n    }\n\n    public static saveSound() {\n        sys.localStorage.setItem( \"AudioSoundEnabled\" , Sound.ins.enabled == true ? \"1\" : \"0\" ) ;\n    }\n\n}","import { Buff } from \"./Buff\";\n\n// 光环组件\nexport class AuraCom {\n\n    public list = new Array< Buff >() ;\n\n}","import { Label, Node, tween } from \"cc\";\nimport { CfgArticle } from \"../../../Common/Cfg/CfgArticle\";\nimport { CfgArticleGrade } from \"../../../Common/Cfg/CfgArticleGrade\";\nimport { CfgBuff, CfgBuffItem } from \"../../../Common/Cfg/CfgBuff\";\nimport { AffixType } from \"../../World/1.Base/Buff/Affix\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\nimport { TowerAuraScopeExpand } from \"../../World/1.Base/Tower/Misc/TowerAuraScopeExpand\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\nimport { EffectFactory } from \"../Merge/EffectFactory\";\n\n\n// 光环提示\nexport class TowerAuraHint {\n\n    // 移动\n    public exe( article : BagArticle , cells : Array< UiBagCell > ) {\n\n        if( article == null || cells == null ) {\n            this.clear() ; \n            return ; \n        }\n\n        // 重置\n        this.set2.clear() ; \n        this.set.clear() ; \n        for( let kv of this.map ) {\n            let ui = kv[1] ;\n            ui.txt.string = \"\" ;\n            ui.flagAttackDamage = false ; \n            ui.flagAttackSpeed = false ; \n            ui.flagAttackCritProbability = false ; \n\n        } // end for\n\n\n        let auras = this.getBuffs( article.cfg ) ; \n\n        // 扩展形状\n        for( let aura of auras ) {\n\n            switch( aura.affixType ) {\n \n                // 加攻击\n                case AffixType.AuraAttackDamageIncreasePercent : \n                {\n                    let ret = TowerAuraScopeExpand.exe( aura.auraScopeType , cells ) ; \n                    for( let a of ret.article ) {\n\n                        // 排除自己\n                        if( a == article ) continue ; \n                        if( this.canAttack( a ) == false ) continue ; \n\n                        this.set.add( a ) ;\n\n                        let uiItem = this.genOrGetEffect( a ) ;\n                        if( uiItem.flagAttackDamage != true ) {\n                            uiItem.flagAttackDamage = true ;\n\n                            uiItem.txt.string += \"加攻击\\n\" ; \n\n                        }\n\n                    } // end for\n                }\n                break ;\n\n                // 加攻速\n                case AffixType.AuraAttackSpeedIncreasePercent : {\n                    let ret = TowerAuraScopeExpand.exe( aura.auraScopeType , cells ) ; \n                    for( let a of ret.article ) {\n                        \n                        // 排除自己\n                        if( a == article ) continue ; \n                        if( this.canAttack( a ) == false ) continue ; \n\n                        this.set.add( a ) ;\n\n                        let uiItem = this.genOrGetEffect( a ) ;\n                        if( uiItem.flagAttackSpeed != true ) {\n                            uiItem.flagAttackSpeed = true ;\n\n                            uiItem.txt.string += \"加攻速\\n\" ; \n\n                        }\n\n                    } // end for\n                }\n                break ;\n\n                // 加暴击概率\n                case AffixType.AuraAttackCritProbabilityIncrease : {\n                    let ret = TowerAuraScopeExpand.exe( aura.auraScopeType , cells ) ; \n                    for( let a of ret.article ) {\n\n                        // 排除自己\n                        if( a == article ) continue ; \n                        if( this.canAttack( a ) == false ) continue ; \n                        \n                        this.set.add( a ) ;\n\n                        let uiItem = this.genOrGetEffect( a ) ;\n                        if( uiItem.flagAttackCritProbability != true ) {\n                            uiItem.flagAttackCritProbability = true ;\n\n                            uiItem.txt.string += \"加暴击概率\\n\" ; \n\n                        }\n\n                    } // end for\n                }\n                break ;\n\n\n            }\n            \n        } // end for\n\n        // 删除多余的\n        for( let kv of this.map ) {\n            let k = kv[0] ;\n            if( this.set.has( k ) == false ) {\n                this.set2.add( k ) ;\n            }\n        } // end for\n\n        for( let k of this.set2 ) {\n            let ui = this.map.get( k ) ;\n            this.map.delete( k ) ;\n            ui.root.destroy() ; \n        }\n\n\n    }\n\n    // 放置\n    public place() {\n\n        for( let kv of this.map ) {\n            let a = kv[ 0 ] ; \n\n            if( a.cells == null || a.cells.length == 0 ) continue ; \n\n            let effect = EffectFactory.create( \"AuraHint2\" ) ; \n            effect.setParent( WorldNode.ins.layer2 , false );\n            effect.worldPosition = a.view.root.worldPosition ; \n\n        } // end for\n\n        this.clear() ; \n\n    }\n\n    // 清除\n    public clear() {\n\n        for( let kv of this.map ) {\n            kv[1].root.destroy() ; \n        }\n        this.map.clear() ; \n\n        this.set2.clear() ; \n        this.set.clear() ; \n\n    }\n\n    private canAttack( a : BagArticle ) : boolean {\n\n        return a.cfg.tower.atkDamage == 0 ? false : true ;\n\n    }\n\n    // 创建 or 取得 UI\n    private genOrGetEffect( a : BagArticle ) : UiTowerAuraHint {\n\n        let uiItem = this.map.get( a ) ;\n        if( uiItem == null ) {\n\n            uiItem = UiTowerAuraHint.create() ; \n            this.map.set( a , uiItem ) ;\n\n            uiItem.root.setParent( WorldNode.ins.layer1 , false );\n            uiItem.root.worldPosition = a.view.root.worldPosition ; \n\n        }\n\n        return uiItem ;\n\n    }\n\n    private set = new Set< BagArticle >() ; \n    private set2 = new Set< BagArticle >() ; \n\n    private map = new Map< BagArticle , UiTowerAuraHint >() ;\n\n    // 取得所有的 Buff\n    public getBuffs( cfg : CfgArticle ) : Array< CfgBuffItem > {\n\n        let data = this.auraPool.get( cfg.id ) ;\n        if( data != null ) {\n            return data ; \n        }\n\n        let buffs = new Array< CfgBuffItem >() ; \n\n        // 具体实体的 aura\n        for( let id of cfg.tower.buffs ) {\n            let cfgBuffItem = CfgBuff.data.get( id ) ;\n            if( cfgBuffItem.isAura == false ) continue ; \n            buffs.push( cfgBuffItem ) ; \n        }\n\n        // 等级线的 aura\n        let items = CfgArticleGrade.data.get( cfg.gradeLineId ) ;\n        if( items != null ) {\n\n            for( let item of items ) {\n\n                // 等级线天生的\n                for( let id of item.buffIds ) {\n                    let cfgBuffItem = CfgBuff.data.get( id ) ;\n                    if( cfgBuffItem.isAura == false ) continue ; \n                    buffs.push( cfgBuffItem ) ; \n                }\n\n                // 等级线解锁的\n                for( let id of item.unlocked ) {\n                    let cfgBuffItem = CfgBuff.data.get( id ) ;\n                    if( cfgBuffItem.isAura == false ) continue ; \n                    buffs.push( cfgBuffItem ) ; \n                }\n    \n            } // end for            \n\n        }\n\n        this.auraPool.set( cfg.id , buffs ) ;\n\n        return buffs ; \n\n    }\n\n    // 光环数据池\n    public auraPool = new Map< string , Array< CfgBuffItem > >() ;\n\n    public towerDamage = new Array< BagArticle >() ;\n\n}\n\n\nclass UiTowerAuraHint {\n\n    public static create() : UiTowerAuraHint {\n\n        let ui = new UiTowerAuraHint() ; \n        let root = EffectFactory.create( \"AuraHint\" , false ) ; \n        ui.init( root ) ;\n        return ui ; \n\n    }\n\n    public flagAttackDamage = false ; \n    public flagAttackSpeed = false ; \n    public flagAttackCritProbability = false ; \n\n    public root : Node ; \n\n    public txt : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.txt = this.root.getComponentInChildren( Label ) ; \n        this.txt.string = \"\" ;\n\n        // 文字上下浮动\n        let pos1 = this.txt.node.position.clone() ; \n        let pos2 = this.txt.node.position.clone().add3f( 0 , -10 , 0 ) ;\n        tween( this.txt.node ).sequence(\n            tween( this.txt.node ).to( 0.5 , { position : pos2 } ) , \n            tween( this.txt.node ).to( 0.5 , { position : pos1 } )\n\n        ).repeatForever().start() ;\n\n    }\n\n\n}","\n// 光环作用域\nexport enum AuraScopeType {\n\n    // 周围4方向\n    Dir4 = \"Dir4\", \n\n    // 周围8方向\n    Dir8 = \"Dir8\", \n\n    // 同行同列\n    HV = \"HV\", \n\n    // 全屏\n    All = \"All\" , \n\n}","import { instantiate, Node, Size, Tween, Vec2, Vec3 } from \"cc\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { CfgArticle, CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\nimport { CfgShapeItem } from \"../../../Common/Cfg/CfgShape\";\nimport { Tower } from \"../../World/1.Base/Tower/Entity/Tower\";\n\n\n// 背包物品实体\nexport class BagArticle {\n\n    // 配置\n    public cfg : CfgArticle ; \n\n    // 形状配置\n    public cfgShape : CfgShapeItem ; \n\n\n    // 占用的Cell\n    public cells = new Array< UiBagCell >() ; \n\n    // 等级。从1开始。\n    public grade = 1 ; \n\n    // 合成等级。从1开始\n    public gradeMerge = 1 ; \n\n    // 是否是扩展物件\n    public isBagExpand = false ; \n\n    // 关联的塔对象\n    public tower : Tower = null ; \n\n    // 表现\n    public view : BagArticleView = null ; \n\n    \n}\n\n// 表现\nexport class BagArticleView {\n\n    // 表现\n    public root : Node ;\n\n    public main : Node ; \n\n    // 形状原点的位置\n    public posShapeCoordOrig : Vec3 ; \n\n    // 表现的大小\n    public size : Size ; \n\n    // 合并提示形状\n    public effectMergeHintShape : Node ; \n\n    // 缓动动画 合并提示\n    public tweenMergeHint : Tween< Node > = null ; \n\n    // 看广告解锁标签\n    public adTag : Node ; \n\n}\n\n","import { instantiate, Layout, Node, Size, UITransform, Vec2, Vec3 } from \"cc\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { BagArticle, BagArticleView } from \"./BagArticle\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { UiBagCfg } from \"../Main/UiBagCfg\";\nimport { CfgShape } from \"../../../Common/Cfg/CfgShape\";\nimport { TowerFactory } from \"../../World/1.Base/Tower/Entity/TowerFactory\";\n\n\nexport class BagArticleFactory {\n\n    public static create( id : string ) : BagArticle {\n\n        let article = new BagArticle() ; \n\n        BagArticleCfgSet.set( article , id ) ; \n\n        BagArticleViewSet.set( article ) ;\n\n        // 生成 Tower 对象\n        TowerFactory.create( article ) ;\n\n        return article ; \n\n    }\n\n\n}\n\n// 配置设置器\nclass BagArticleCfgSet {\n\n    public static set( article : BagArticle , id : string ) {\n\n        let cfg = CfgArticleMgr.data.get( id ) ; \n        article.cfg = cfg\n        article.gradeMerge = cfg.mergeGrade ; \n\n        article.cfgShape = CfgShape.data.get( cfg.bagShapeId ) ;\n\n        // 扩展格子\n        if( id.startsWith( \"BagExpand\" ) == true ) {\n            article.isBagExpand = true ; \n        }\n\n    }\n\n}\n\n\n// 表现设置器\nclass BagArticleViewSet {\n\n    public static set( article : BagArticle ) {\n\n        let view = article.view = new BagArticleView() ; \n\n        let root = this.createView( article.cfg.id );\n\n        view.root = root ; \n        view.main = root.getChildByPath( \"Main\" );\n\n        // 计算出形状原点的位置\n        view.posShapeCoordOrig = this.calcPos( article.cfgShape.coords ) ; \n\n        // 针对格子扩展物件。如果有布局，去掉。\n        root.getComponent( Layout )?.destroy() ; \n\n\n        this.mergeGrade( article ) ;\n\n        // 内容大小\n        view.size = root.getComponent( UITransform ).getBoundingBoxToWorld().size ; \n\n    }\n\n\n    public static createView( id : string ) : Node {\n\n        // 先去分类中查找\n        let pf = PfMgrBagArticle.getPf( id ) ;\n        let root = instantiate( pf ) ;\n        return root ; \n\n    }\n\n    // 计算瓦片形状中心布局左下角原点的位置\n    private static calcPos( shape : Array< Vec2 > ) : Vec3 {\n\n        let tileSize = UiBagCfg.ins.cellSize ;\n\n        // 取得包围矩形的大小\n        let size = new Vec2( -1 , -1 ) ;\n        for( var coord of shape ) {\n            if( coord.x > size.x ) {\n                size.x = coord.x ; \n            }\n\n            if( coord.y > size.y ) {\n                size.y = coord.y ; \n            }\n\n        }\n        size.x += 1 ; \n        size.y += 1 ; \n\n        // 矩形原点的位置。\n        let pos = new Vec3() ; \n        pos.x = size.x * tileSize.width / -2 + tileSize.width / 2 ;\n        pos.y = size.y * tileSize.height / -2 + tileSize.height / 2\n\n        // // 原点的位置偏移到原点坐标位置\n        // pos.x += coordOrig.x * tileSize.width ; \n        // pos.y += coordOrig.y * tileSize.height ; \n\n        return pos ;\n\n    }\n\n    // 显示合成等级\n    private static mergeGrade( article : BagArticle ) {\n\n        let key = \"MergeGrade/Grade\" + article.gradeMerge ; \n        let pf = PfMgrBagArticle.bagArticle.getChildByPath( key ) ; \n        if( pf == null ) return ; \n\n        let node = instantiate( pf ) ;\n        node.setParent( article.view.root , false ) ;\n        node.position = Vec3.ZERO ; \n\n        switch( article.cfgShape.id ) {\n            case \"Dot\" : {\n                node.position = new Vec3( 25 , -20 ).multiplyScalar( 1.5 ) ; \n            }\n            break ; \n\n            case \"H2\" : {\n                node.position = new Vec3( 60 , -20 ).multiplyScalar( 1.5 ) ; \n                \n            }\n            break ; \n\n            case \"H3\" : {\n                // node.position = new Vec3( 25 , -20 ).add3f( 60 * 2 , 0 , 0 ) ; \n            }\n            break ; \n\n            case \"V2\" : {\n                node.position = new Vec3( 25 , -60 ).multiplyScalar( 1.5 ) ; \n            }\n            break ; \n\n            case \"V3\" : {\n                node.position = new Vec3( 25 , -100 ).multiplyScalar( 1.5 ) ; \n            }\n            break ; \n\n            case \"R2x2_3_2\" : {\n                node.position = new Vec3( -10 , -60 ).multiplyScalar( 1.5 ) ; \n            }\n            break ; \n\n            case \"R2x2_3_1\" : \n            case \"R2x2_3_3\" : \n            case \"R2x2_3_4\" : \n            case \"R2x2\" : \n            {\n                node.position = new Vec3( 60 , -60 ).multiplyScalar( 1.5 ) ; \n            }\n            break ;\n\n            case \"T\" : {\n                node.position = new Vec3( 25 , -60 ).multiplyScalar( 1.5 ) ; \n            }   \n            break ; \n\n\n        }\n\n    }\n\n}","import { Account } from \"../../../Common/Account/Account\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { CfgArticleGrade, CfgArticleGradeItem } from \"../../../Common/Cfg/CfgArticleGrade\";\n\n// 物件等级数据统计\nexport class BagArticleGradeHelper {\n\n    // 取得等级，用成长线ID\n    public static getGradeByLineId( gradeLineId : string ) : number {\n\n        let currentGrade = Account.ins.bag.grade.get( gradeLineId ) ; \n        if( currentGrade == null ) {\n            currentGrade = 1 ; \n        }\n\n        return currentGrade ; \n\n    }\n\n    // 取得物件当前等级的配置\n    public static getCfgCurrent( idArticle : string ) : CfgArticleGradeItem {\n\n        // 查找到升级线\n        let cfgArticle = CfgArticleMgr.data.get( idArticle ) ;\n        if( cfgArticle == null ) {\n            return null ;\n        }\n\n        let grade = CfgArticleGrade.data.get( cfgArticle.gradeLineId ) ; \n        if( grade == null ) {\n            return null ; \n        }\n\n        let currentGrade = Account.ins.bag.grade.get( cfgArticle.gradeLineId ) ; \n        if( currentGrade == null ) {\n            currentGrade = 1 ; \n        }\n        currentGrade-- ; \n\n        return grade[ currentGrade ] ; \n\n    }\n\n    // 取得物件下一个等级的配置\n    public static getCfgNext( idArticle : string ) : CfgArticleGradeItem {\n\n        // 查找到升级线\n        let cfgArticle = CfgArticleMgr.data.get( idArticle ) ;\n        if( cfgArticle == null ) {\n            return null ;\n        }\n\n        let grade = CfgArticleGrade.data.get( cfgArticle.gradeLineId ) ; \n        if( grade == null ) {\n            return null ; \n        }\n\n        let currentGrade = Account.ins.bag.grade.get( cfgArticle.gradeLineId ) ; \n        if( currentGrade == null ) {\n            currentGrade = 1 ; \n        }\n        \n        if( currentGrade >= grade.length ) return null ; \n\n        return grade[ currentGrade ] ; \n\n\n    }\n\n    // 取得物件当前等级，从0到当前等级的条目\n    public static getCfgCurrentItems( idArticle : string ) : Array< CfgArticleGradeItem > {\n\n        // 查找到升级线\n        let cfgArticle = CfgArticleMgr.data.get( idArticle ) ;\n        if( cfgArticle == null ) {\n            return null ;\n        }\n\n        let grade = CfgArticleGrade.data.get( cfgArticle.gradeLineId ) ; \n        if( grade == null ) {\n            return null ; \n        }\n\n        let currentGrade = Account.ins.bag.grade.get( cfgArticle.gradeLineId ) ; \n        if( currentGrade == null ) {\n            currentGrade = 1 ; \n        }\n        currentGrade-- ; \n\n\n        let ret = new Array< CfgArticleGradeItem >() ;\n        for( let i = 0 ; i <= currentGrade ; ++i ) {\n            let item = grade[ i ] ;\n            ret.push( item ) ;\n        }\n\n        return ret ; \n\n    }\n\n}","import { tween, UITransform, Vec2 } from \"cc\";\nimport { UiBagGrid } from \"../Grid/UiBagGrid\";\nimport { BagArticle } from \"./BagArticle\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\n\n// 放置到网格中\nexport class BagArticleGridPlace {\n\n    public static exe( article : BagArticle , cells : Array< UiBagCell > , animatedMovement = true ) {\n\n        this.unbind( article ) ; \n        this.bind( article , cells ) ; \n\n        // 表现\n        let cell = this.getOrigCellInBoundingRect( cells ) ; \n        this.view( article , cell , animatedMovement ) ; \n\n    }\n\n    // 求形状在包围矩形中的原点Cell。原点Cell有可能不在 Cells 中\n    private static getOrigCellInBoundingRect( cells : Array< UiBagCell > ) : UiBagCell {\n\n        let coord = new Vec2( Number.MAX_VALUE , Number.MAX_VALUE ) ; \n        for( let cell of cells ) {\n            if( cell.coord.x < coord.x ) {\n                coord.x = cell.coord.x ; \n            }\n\n            if( cell.coord.y < coord.y ) {\n                coord.y = cell.coord.y ; \n            }\n        }\n\n        let cell = UiBagGrid.ins.getCell( coord ) ; \n        return cell ; \n\n    }\n\n    // 处理表现\n    public static view( article : BagArticle , cellOrig : UiBagCell , animatedMovement = true ) {\n\n        // 保持原始缩放\n        let s = article.view.root.scale.clone() ;\n\n        article.view.root.setParent( UiBagGrid.ins.root , true ) ;\n\n        article.view.root.scale = s ;\n\n        let uitrans = article.view.root.getComponent( UITransform ) ;\n        \n        // 考虑到缩放问题\n        let posShapeCoordOrig = uitrans.convertToWorldSpaceAR( article.view.posShapeCoordOrig ) ;\n        posShapeCoordOrig.subtract( uitrans.node.worldPosition ) ;\n\n        let pos = cellOrig.root.worldPosition.clone().subtract( posShapeCoordOrig ) ;\n\n        // pos = article.root.parent.getComponent( UITransform ).convertToNodeSpaceAR( pos ) ;\n\n        if( animatedMovement ) {\n            // 动画移动\n            tween( article.view.root ).to( 0.2 , { worldPosition : pos } ).start() ; \n        }\n        else {\n            // 直接设置\n            article.view.root.worldPosition = pos ; \n        }\n\n\n\n\n\n    }\n\n    // 绑定引用\n    public static bind( article : BagArticle , cells : Array< UiBagCell > ) {\n\n        for( let cell of cells ) {\n            cell.article = article ; \n        }\n\n        article.cells.splice( 0 , article.cells.length ) ;\n        for( let cell of cells ) {\n            article.cells.push( cell ) ;\n        }\n\n    }\n\n    // 解绑定引用\n    public static unbind( article : BagArticle ) {\n\n        for( let cell of article.cells ) {\n            cell.article = null ; \n        }\n\n        article.cells.splice( 0 , article.cells.length ) ;\n\n    }\n\n}","import { tween, Vec2 } from \"cc\";\nimport { GridTraverse } from \"../Grid/GridTraverse\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\nimport { BagArticle } from \"./BagArticle\";\nimport { UiBagGrid } from \"../Grid/UiBagGrid\";\nimport { MergeGrid } from \"../Merge/MergeGrid\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { GridHint } from \"../Grid/GridHint\";\nimport { BagArticleGridPlace } from \"./BagArticleGridPlace\";\nimport { GridModeTransition } from \"../Grid/GridModeTransition\";\nimport { UiBagTouch } from \"../Touch/UiBagTouch\";\nimport { MergeTray } from \"../Merge/MergeTray\";\nimport { UiBubble } from \"../../../Common/Ui/UiBubble\";\nimport { UiMain } from \"../../Ui/Main/UiMain\";\nimport { BagArticleSpeak } from \"./BagArticleSpeak\";\n\n// 放置实体。根据位置\nexport class BagArticleGridPlaceByPos {\n\n    public static exe( article : BagArticle ) {\n\n        if( article.isBagExpand ) {\n\n            this.placeBagExpand( article ) ;\n\n            // return ;\n        }\n\n        let cells = this.getCellsPlace( article ) ;\n        if( cells == null ) {\n            // 不能放置到网格中\n\n            // 和托盘的合并\n            if( MergeTray.tryMerge( article ) == true ) {\n                return ; \n            }\n\n            UiTray.ins.insertArticle( article ) ; \n\n            // 如果是背包扩展，恢复模式\n            if( article.isBagExpand ) {\n                GridModeTransition.toNormal() ; \n                UiBagTouch.ins.limit.clear() ; \n            }\n\n            return ; \n        }\n\n        // 可放置到网格中\n\n        GridHint.hintPlaceableClear() ; \n\n        // 从托盘删除\n        UiTray.ins.removeAndArrange( article ) ; \n\n        // 和网格的合并\n        if( MergeGrid.tryMerge( article , cells ) == true ) {\n            return ; \n        }\n\n        \n        this.goToTray( cells , article ) ;\n        BagArticleGridPlace.exe( article , cells ) ; \n\n        // 放置时说话\n        BagArticleSpeak.place( article ) ; \n\n       \n\n    }\n\n    // 放下的是背包扩展\n    private static placeBagExpand( article : BagArticle ) {\n\n        // let cells = this.getCellsPlace( article ) ;\n\n        // UiBagGrid.ins.showNormal() ; \n\n        // // 回到托盘\n        // UiTray.ins.insertArticle( article ) ; \n\n    }\n\n    // 指定网格中的物体放到托盘\n    private static goToTray( cells : Array< UiBagCell > , articleIgnore : BagArticle ) {\n\n        let list = new Set< BagArticle >() ; \n        for( let cell of cells ) {\n            if( cell.article == null ) continue ; \n            list.add( cell.article ) ;\n\n        } // end for\n\n        for( let a of list ) {\n            if( a == articleIgnore ) continue ; \n            UiTray.ins.insertArticle( a ) ; \n        }\n\n    }\n\n    // 取得形状可以放置的单元格\n    public static getCellsPlace( article : BagArticle ) : Array< UiBagCell > {\n\n        // 匹配网格单元格\n        let cell = this.matchCell( article ) ;\n        if( cell == null ) return null ; \n        \n        // 取得匹配的形状单元格\n        let cells = this.getShapeCells( cell.coord , article.cfgShape.coords ) ;\n        if( cells == null ) return ; \n            \n        // 检查每个单元格是否都解锁\n        for( let cell of cells ) {\n            if( cell.unlocked == article.isBagExpand ) {\n                return null ; \n            }\n        }\n\n        return cells ; \n\n    }\n\n    // 取得 物件 匹配的网格单元格\n    private static matchCell( article : BagArticle ) : UiBagCell {\n\n        let pos = article.view.root.worldPosition.clone().add( article.view.posShapeCoordOrig ) ; \n\n        let lenMin = Number.MAX_VALUE ; \n        let cellRet : UiBagCell = null ; \n        GridTraverse.exe( ( cell )=>{\n\n            let v = cell.root.worldPosition.clone().subtract( pos ) ;\n            let len = v.lengthSqr() ; \n            if( len < 200 * 200 && len < lenMin ) {\n                lenMin = len ;\n                cellRet = cell ; \n            }\n\n        } ) ;\n\n        return cellRet ; \n\n    }\n\n    // 取得形状单元格\n    private static getShapeCells( coordStart : Vec2 , shape : Array< Vec2 > ) : Array< UiBagCell > {\n\n        let ret = new Array< UiBagCell >() ;\n\n        for( let coord of shape ) {\n\n            let coord2 = coordStart.clone().add( coord ) ; \n            let cell2 = UiBagGrid.ins.getCell( coord2 ) ;\n            if( cell2 == null ) {\n                return null ; \n            }\n\n            ret.push( cell2 ) ; \n\n        }\n\n        return ret ; \n\n    }\n\n}","import { BagArticle } from \"../Article/BagArticle\";\nimport { GridTraverse } from \"./GridTraverse\";\n\nexport class ArticleHelper {\n\n    private static list = new Array< BagArticle >() ; \n\n    public static getAllAriclesInGrid() : Array< BagArticle > {\n\n        this.list.splice( 0 , this.list.length ) ;\n    \n        GridTraverse.exe( ( cell )=>{\n    \n            let a = cell.article ; \n            if( a == null ) return ; \n    \n            if( this.list.indexOf( a ) != -1 ) return ; \n            this.list.push( a ) ;\n            \n        } ) ;\n    \n        return this.list ; \n    \n    }\n\n}\n\n","import { BagArticle } from \"../../../Bag/Article/BagArticle\";\nimport { GridTraverse } from \"../../../Bag/Grid/GridTraverse\";\nimport { UiBagCell } from \"../../../Bag/Grid/UiBagCell\";\nimport { TowerFactory } from \"../../1.Base/Tower/Entity/TowerFactory\";\nimport { TowerMgr } from \"../../1.Base/Tower/Entity/TowerMgr\";\n\n// 背包物品上阵\nexport class BagArticleReloaded {\n\n    public static exe() {\n\n        // 清空塔\n        TowerMgr.ins.clear() ; \n\n        GridTraverse.exe( ( cell : UiBagCell )=>{\n            if( cell.article == null ) return ; \n            TowerMgr.ins.add( cell.article.tower ) ;\n        } ) ;\n               \n    }\n\n\n}","import { tween } from \"cc\";\nimport { UiBubble } from \"../../../Common/Ui/UiBubble\";\nimport { BagArticle } from \"./BagArticle\";\nimport { UiMain } from \"../../Ui/Main/UiMain\";\nimport { Lang } from \"../../../Common/Misc/Lang\";\nimport { World } from \"../../../Home/World/World\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\n\n\n// 物件说话\nexport class BagArticleSpeak {\n\n    public static memory = new Set< string >() ; \n\n    public static clearMemory() {\n        this.memory.clear() ; \n    }\n\n    // 放置时\n    public static place( article : BagArticle ) {\n\n        let id = article.cfg.id ; \n        if( this.memory.has( id ) == true ) return ; \n        this.memory.add( id ) ; \n\n        let str = Lang.get( \"AriclePlaceSpeak#\" + id ) ; \n        if( str == null || str == \"\" ) return ; \n\n        let ui = UiBubble.create() ; \n        ui.root.setParent( WorldNode.ins.layer2 , true ) ; \n        ui.root.active = false ; \n\n        tween( ui.root ).sequence(\n\n            tween( ui.root ).delay( 0.3 ) , \n\n            tween( ui.root ).call( ()=>{\n\n                // 没有放置下去\n                if( article.cells.length == 0 ) {\n                    this.memory.delete( id ) ; \n                    return ; \n                }\n                \n                ui.root.active = true ; \n                ui.setString( str ) ;\n                let pos = article.view.root.worldPosition.clone().add3f( 0 , 0 , 0 ) ; \n\n                let cell = article.cells[ 0 ] ;\n                for( let cell2 of article.cells ) {\n                    if( cell2.coord.y > cell.coord.y ){ cell = cell2 ; }\n                }\n\n                pos.y = cell.root.worldPosition.y + 150 ; \n\n                ui.root.worldPosition = pos ; \n\n            } ) , \n\n            tween( ui.root ).delay( 1 ) , \n\n            tween( ui.root ).call( ()=>{\n                ui.root.destroy() ; \n            } ) ,\n\n        ).start() ;\n\n    }\n\n}","import { instantiate, Vec3 } from \"cc\";\nimport { UiBagCfg } from \"../Main/UiBagCfg\";\nimport { UiBagGrid } from \"./UiBagGrid\";\n\n// 背包网格绘制\nexport class BagGridDraw {\n\n    public static exe( ) {\n\n        this.drawCell() ; \n\n    }\n\n    // 绘制网格 \n    public static drawCell() {\n\n        // 中心对其\n\n        let cellPf = UiBagGrid.ins.cellPf ;\n\n        let size = UiBagGrid.ins.gridSize ; \n        let grid = UiBagGrid.ins.grid ; \n\n        // 单元格的显示大小\n        // let cellSize = new Size( 80 , 80 ) ;\n        let cellSize = UiBagCfg.ins.cellSize ; \n\n        let posStart = new Vec3( ) ;\n        posStart.x = size.width * cellSize.width / -2 + cellSize.width / 2 ;\n        posStart.y = size.height * cellSize.height / -2 + cellSize.height / 2\n\n        for( let yCoord = 0 ; yCoord < size.height ; ++yCoord ) {\n\n            for( let xCoord = 0 ; xCoord < size.width ; ++xCoord ) {\n\n                let root = instantiate( cellPf ) ;\n                root.setParent( UiBagGrid.ins.root ) ;\n\n                let cell = grid[ yCoord ][ xCoord ] ; \n\n                cell.init( root ) ; \n\n                // 设置位置\n                let offset = new Vec3( xCoord * cellSize.width , yCoord * cellSize.height ) ;\n                cell.root.position = posStart.clone().add( offset ) ;\n\n                // 处理没有解锁的\n                if( cell.unlocked == false ) {\n\n                    // cell.root.getComponentInChildren( Sprite ).color = Color.BLACK ; \n                    cell.root.active = false ;\n\n                }\n\n            } // end for\n\n        } // end for\n\n\n    }\n\n\n}","import { instantiate, randomRangeInt, Vec3 } from \"cc\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { UiTray } from \"../../../Bag/Main/UiTray\";\nimport { CfgGameBagTrayAricleGen } from \"../../../../Common/Cfg/CfgGameBagTrayAricleGen\";\nimport { WeightProbability } from \"../../../../SL/Common/Misc/WeightProbability\";\nimport { PfMgrBagArticle } from \"../../../../Common/PfMgr/PfMgr\";\nimport { BagArticle } from \"../../../Bag/Article/BagArticle\";\nimport { CfgArticleMgr } from \"../../../../Common/Cfg/CfgArticle\";\nimport { CfgShape } from \"../../../../Common/Cfg/CfgShape\";\n\n// 背包托盘物品生成\nexport class BagTrayAricleGen {\n\n    public static ins = new BagTrayAricleGen() ; \n\n    /*\n        第一次。\n        抽出至少2个2格的武器\n    */ \n    public genFirst() {\n\n        // 清除托盘 重新生成\n        UiTray.ins.clear() ; \n\n        let bagExpandCount = 0 ; \n        let count = 0 ; \n\n        // 先抽取 2 个 2 格的\n        for( let i = 0 ; i < 2 ; ++i ) {\n\n            let id = this.rndDeployWeapon( 2 ) ;\n            if( id == null ) continue ; \n            UiTray.ins.addArticleById( id ) ;\n            ++count ; \n            \n        } // end for\n\n        // 补充不满足3个的。普通抽取\n        for( let i = count ; i < 3 ; ++i ) {\n\n            let id : string = null ; \n\n            // 只能抽出一个扩展格。\n            if( bagExpandCount < 1 ) {\n                id = this.rnd2() ; \n                if( id.startsWith( \"BagExpand\" ) ) { bagExpandCount++ ; }\n            } \n            else {\n                id = this.rndDeploy() ; \n            }\n\n            UiTray.ins.addArticleById( id ) ;\n\n        } // end for\n\n        this.addAdTag() ;     \n\n\n    }\n\n    public gen() {\n\n        let bagExpandCount = 0 ; \n\n        // 清除托盘 重新生成\n        UiTray.ins.clear() ; \n\n        for( let i = 0 ; i < 3 ; ++i ) {\n\n            let id : string = null ; \n\n            // 只能抽出一个扩展格。\n            if( bagExpandCount < 1 ) {\n                id = this.rnd2() ; \n                if( id.startsWith( \"BagExpand\" ) ) { bagExpandCount++ ; }\n            } \n            else {\n                id = this.rndDeploy() ; \n            }\n\n            UiTray.ins.addArticleById( id ) ;\n\n        } // end for\n\n        this.addAdTag() ; \n\n    }\n\n    // 添加广告锁定标签\n    public addAdTag() {\n\n        // 是否满足广告锁定条件\n        let canAddAdTag = ( a : BagArticle )=>{\n\n            // 条件：3级及其以上 或 3格及其以上\n            if( a.cfg.mergeGrade >= 3 ) return true ; \n\n            if( a.isBagExpand == true && a.cfgShape.coords.length >= 3 ) return true ; \n\n            return false ; \n\n        } ; \n\n        let list = UiTray.ins.articles ;\n        for( let i = 0 ; i < list.length ; ++i ) {\n            let a = list[ i ] ;\n\n            if( canAddAdTag( a ) == false ) continue ;\n\n            let id = \"AdTag/\" + a.cfgShape.id ;\n            let pf = PfMgrBagArticle.bagArticle.getChildByPath( id ) ; \n            if( pf == null ) continue ; \n            let adTag = instantiate( pf ) ;\n            a.view.adTag = adTag ;\n            adTag.setParent( a.view.root , false );\n            adTag.position = Vec3.ZERO ; \n            \n        } // end for\n\n    }\n\n    // 必出一个等级2\n    public genGrade2() {\n\n\n        this.BagExpandCount = 0 ; \n\n        // 清除托盘 重新生成\n        UiTray.ins.clear() ; \n\n        // 抽出一个等级2的\n        let id = this.rndDeployGrade( 2 ) ; \n        UiTray.ins.addArticleById( id ) ;\n\n\n        for( let i = 0 ; i < 2 ; ++i ) {\n\n            let id = this.rnd2() ; \n            if( id.startsWith( \"BagExpand\" ) ) {\n                // 背包扩展的处理\n\n                // 只能抽出一个扩展格。\n                if( this.BagExpandCount >= 1 ) {\n                    i-- ; \n                    continue ; \n                }\n\n                this.BagExpandCount++ ;\n            }\n            else{\n                id = this.rndGrade( id ) ; \n            }\n            \n            UiTray.ins.addArticleById( id ) ;\n\n        }\n\n    }\n\n    // 平均概率抽取上阵物品。返回最低级的物品 ID \n    private rnd1() : string {\n\n        let ready = Account.ins.bag.deploy ;\n        let idx = randomRangeInt( 0 , ready.length ) ; \n        let id = ready[ idx ] ; \n        return id ; \n\n    }\n\n\n    // 抽取 上阵的 公共的\n    private rnd2() : string {\n\n        let w = new WeightProbability() ;\n\n        // 处理上阵的\n        let list = Account.ins.bag.deploy ; \n        for( let id of list ) {\n            let cfgItem = CfgGameBagTrayAricleGen.data.get( id ) ; \n            if( cfgItem == null ) continue ; \n\n            w.add( id ,  cfgItem.pw ) ; \n\n        } // end for\n        \n        // 处理公共的\n        let common = CfgGameBagTrayAricleGen.common ; \n        for( let i = 0 ; i < common.length ; ++i ) {\n            let cfgItem = common[ i ] ;\n            w.add( cfgItem.id ,  cfgItem.pw ) ; \n        } // end for\n\n        let str = w.get() ; \n\n        return str ; \n\n    }\n\n    // 抽取 上阵的 等级2\n    private rndDeployGrade( grade : number ) : string {\n\n        let id = this.rndDeploy() ; \n\n        let idArticle = id.split( \"_\" )[ 0 ] + \"_\" + grade ;\n\n        return idArticle ; \n\n    }\n\n    // 抽取 上阵的\n    private rndDeploy() : string {\n\n        let w = new WeightProbability() ;\n\n        // 处理上阵的\n        let ready = Account.ins.bag.deploy ; \n        for( let id of ready ) {\n            let cfgItem = CfgGameBagTrayAricleGen.data.get( id ) ; \n            if( cfgItem == null ) continue ; \n\n            w.add( id ,  cfgItem.pw ) ; \n\n        } // end for\n\n        let str = w.get() ; \n\n        return str ; \n\n    }\n\n    /*\n        抽取 上阵的 武器 指定大于的格子数\n    */ \n    private rndDeployWeapon( cellLenMin : number = 2 ) : string {\n\n        let w = new WeightProbability() ;\n\n        let ready = Account.ins.bag.deploy ; \n        for( let id of ready ) {\n\n            // 过滤掉非武器，格子2格以下的\n            let cfgArtile = CfgArticleMgr.data.get( id ) ; \n            if( cfgArtile.tower.atkDamage <= 0 ) continue ; \n            if( CfgShape.data.get( cfgArtile.bagShapeId ).coords.length < cellLenMin ) continue ; \n\n            let cfgItem = CfgGameBagTrayAricleGen.data.get( id ) ; \n            if( cfgItem == null ) continue ; \n\n            w.add( id ,  cfgItem.pw ) ; \n\n        } // end for\n\n        let str = w.get() ; \n        return str ; \n\n    }\n\n    // 抽取等级。返回的是物件ID\n    private rndGrade( id : string ) : string {\n\n        let w = new WeightProbability() ;\n\n        let cfgItem = CfgGameBagTrayAricleGen.data.get( id ) ; \n\n        for( let i = 0 ; i < cfgItem.grade.length ; ++i ) {\n\n            let pw = cfgItem.grade[ i ] ; \n            let k = ( i + 1 ).toString() ; \n            w.add( k , pw ) ; \n\n        }\n\n        let strGrade = w.get() ; \n        \n        let idArticle = id.split( \"_\" )[ 0 ] + \"_\" + strGrade ;\n\n        return idArticle ; \n\n    }\n\n    private BagExpandCount = 0 ; \n\n\n}","import { Node, tween, UIOpacity, Vec3 } from \"cc\";\nimport { WorldNode } from \"../../1.Base/Support/Misc/WorldNode\";\nimport { UiBagBottom } from \"../../../Bag/Main/UiBagBottom\";\nimport { UiTray } from \"../../../Bag/Main/UiTray\";\nimport { BagTrayAricleGen } from \"./BagTrayAricleGen\";\nimport { UiBagTouch } from \"../../../Bag/Touch/UiBagTouch\";\nimport { UiFeature } from \"../../../Ui/Main/Feature/UiFeature\";\nimport { PlayerRole } from \"../Player/PlayerRole\";\n\n// 背包视角控制器\nexport class BagView {\n\n    // 直接设置进入\n    public static enterDirect() {\n\n        let val = 1.6 ; \n        WorldNode.ins.root.scale = new Vec3( val , val , val ) ;\n        WorldNode.ins.root.position = new Vec3( val , 100 , val ) ; \n\n        // 显示背包操作按钮\n        UiBagBottom.ins.root.active = true ; \n\n        UiTray.ins.root.active = true ; \n        BagTrayAricleGen.ins.genFirst() ; \n\n        // 可拖动背包的物件\n        UiBagTouch.ins.root.active = true ; \n\n        // 如果托盘是单纯放在UI层的话，也要设置缩放\n        UiTray.ins.root.scale = new Vec3( val , val , val ) ;\n\n        // 特性不显示\n        UiFeature.ins.root.parent.active = false ; \n\n        WorldNode.ins.layer0_Road.active = false ; \n        WorldNode.ins.layer0_Spawn.active = false ; \n        PlayerRole.ins.main.view.root.active = false ; \n\n    }\n\n    // 进入 动画渐变\n    public static enter() {\n\n        let val = 1.6 ; \n        let rootWorld = WorldNode.ins.root ; \n\n        // 移动\n        tween( rootWorld ).to( 0.5 , { position : new Vec3( 0 , 100 , 0 ) } ).start() ;\n\n        tween( rootWorld ).sequence(\n\n            tween( rootWorld ).to( 0.5 , { scale : new Vec3( val , val , val ) } ) , \n            tween( rootWorld ).call( ()=>{\n\n                // 显示背包操作按钮\n                UiBagBottom.ins.root.active = true ; \n\n                UiTray.ins.root.active = true ; \n                BagTrayAricleGen.ins.gen() ; \n\n                // 可拖动背包的物件\n                UiBagTouch.ins.root.active = true ; \n\n            } )\n\n        ).start() ; \n\n        // UI不显示\n        this.fadeOut( UiFeature.ins.root.parent ) ; \n\n        this.fadeOut( PlayerRole.ins.main.view.root ) ;\n        this.fadeOut( WorldNode.ins.layer0_Road ) ;\n        this.fadeOut( WorldNode.ins.layer0_Spawn ) ;\n\n    }\n\n    // 离开 动画渐变\n    public static leave() {\n\n        // 移动\n        tween( WorldNode.ins.root ).to( 0.5 , { position : new Vec3( 0 , 0 , 0 ) } ).start() ;\n\n        // 恢复大小\n        // tween( WorldNode.ins.root ).to( 0.5 , { scal } )\n        tween( WorldNode.ins.root ).to( 0.5 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } ).start()  ; \n\n        // 不显示背包操作按钮\n        UiBagBottom.ins.root.active = false ; \n\n        UiTray.ins.root.active = false ; \n        UiTray.ins.clear() ; \n\n        // 不可拖动背包的物件\n        UiBagTouch.ins.root.active = false ; \n\n\n        this.fadeIn( UiFeature.ins.root.parent ) ;\n\n        this.fadeIn( PlayerRole.ins.main.view.root ) ;\n        this.fadeIn( WorldNode.ins.layer0_Road ) ;\n        this.fadeIn( WorldNode.ins.layer0_Spawn ) ;\n\n\n    }\n\n\n\n    public static fadeOut( node : Node ) {\n\n        let opa = node.getComponent( UIOpacity ) ; \n        if( opa == null ) {\n            opa = node.addComponent( UIOpacity ) ; \n        }\n\n        tween( opa ).to( 0.3 , { opacity : 0 } ).call( ()=>{\n            node.active = false ; \n        } ).start() ; \n\n    }\n\n    public static fadeIn( node : Node ) {\n\n        let opa = node.getComponent( UIOpacity ) ; \n        if( opa == null ) {\n            opa = node.addComponent( UIOpacity ) ; \n        }\n\n        node.active = true ; \n        opa.opacity = 0 ; \n\n        tween( opa ).to( 0.3 , { opacity : 255 } ).call( ()=>{\n\n        } ).start() ; \n\n    }\n\n}","import { Vec3 } from \"cc\";\n\n/*\n    贝塞尔曲线\n\n    参考：\n        https://www.cnblogs.com/dixiaodiaohome/p/14157362.html\n        https://zhuanlan.zhihu.com/p/180264303\n\n*/\nexport class BezierCalc\n{\n    // 2阶贝塞尔曲线路径数组\n    public static bezier2Path( startPos : Vec3 , endPos : Vec3 , controlPos : Vec3 , count : number ) : Array<Vec3>\n    {\n        let path = new Array< Vec3 >();\n        for ( let i = 1 ; i <= count ; i++ )\n        {\n            let t = i / count;\n            let val = this.bezier2( startPos , endPos , controlPos , t );\n            path.push( val ) ; \n        }\n        return path;\n    }\n\n    // 2阶贝塞尔曲线 计算点\n    /// <param name=\"t\">0到1的值，0获取曲线的起点，1获得曲线的终点</param>\n    /// <param name=\"start\">曲线的起始位置</param>\n    /// <param name=\"center\">决定曲线形状的控制点</param>\n    /// <param name=\"end\">曲线的终点</param>\n    private static bezier2( start : Vec3 , end : Vec3 , center : Vec3 , t : number ) : Vec3\n    {\n        let v = start.clone() ;\n        v.multiplyScalar( ( 1 - t ) * ( 1 - t ) ) ; \n\n        let temp = center.clone().multiplyScalar( 2 * t * ( 1 - t ) ) ;\n        v.add( temp ) ; \n\n        temp = end.clone().multiplyScalar( t * t ) ;\n        v.add( temp ) ; \n\n        return v ; \n\n        // return ( 1 - t ) * ( 1 - t ) * start + 2 * t * ( 1 - t ) * center + t * t * end;\n    }\n\n    // 3阶贝塞尔曲线路径数组\n    public static bezier3Path( startPos : Vec3 , endPos : Vec3 , controlPos1 : Vec3 , controlPos2 : Vec3 , count : number ) : Array<Vec3>\n    {\n        let path = new Array<Vec3>() ;\n        for ( let i = 1 ; i <= count ; i++ )\n        {\n            let t = i / count;\n            path[ i - 1 ] = this.bezier3( startPos , endPos , controlPos1 , controlPos2 , t );\n        }\n        return path;\n\n    }\n\n    // 3阶贝塞尔曲线 计算点\n    private static bezier3( startPos : Vec3 , endPos : Vec3 , controlPos1 : Vec3 , controlPos2 : Vec3 , t : number ) : Vec3\n    {\n        let t2 = 1 - t;\n\n        let v = startPos.clone().multiplyScalar( t2 * t2 * t2 ) ; \n\n        let temp = controlPos1.clone().multiplyScalar( 3 * t * t2 * t2 ) ; \n        v.add( temp ) ; \n\n        temp = controlPos2.clone().multiplyScalar( 3 * t * t * t2 ) ; \n        v.add( temp ) ; \n\n        temp = endPos.clone().multiplyScalar( t * t * t ) ; \n        v.add( temp ) ; \n\n        return v ; \n\n        // return t2 * t2 * t2 * startPos\n        //     + 3 * t * t2 * t2 * controlPos1\n        //     + 3 * t * t * t2 * controlPos2\n        //     + t * t * t * endPos;\n    }\n\n}","import { Node, Vec3, tween } from \"cc\";\n\n/*\n\n    参考：\n    https://blog.csdn.net/hangsky1990/article/details/129890209\n*/\nexport class BezierMove {\n\n    /*\n        end 终点\n        ctrl 控制点\n    */ \n    public static exe2Order( node : Node , duration : number , end : Vec3 , ctrl : Vec3 , onComplete : ()=>void = null ) { //node为做抛物线运动的节点\n\n        let startPos = node.position //起点，抛物线开始的坐标\n        //计算贝塞尔曲线坐标函数\n        let twoBezier = (t: number, p1: Vec3, cp: Vec3, p2: Vec3) => {\n          let x = (1 - t) * (1 - t) * p1.x + 2 * t * (1 - t) * cp.x + t * t * p2.x;\n          let y = (1 - t) * (1 - t) * p1.y + 2 * t * (1 - t) * cp.y + t * t * p2.y;\n          return new Vec3(x, y, 0);\n        };\n\n        let t = tween(node.position)\n          .to( duration , end, { \n            onUpdate: (target: Vec3, ratio: number) => {\n              node.position = twoBezier(ratio, startPos, ctrl, end); \n            }\n        }) ;\n\n        if( onComplete != null ) {\n            t.call( ()=>{\n                onComplete() ; \n            } ) ;\n        }\n\n        t.start() ; \n\n      }\n\n\n}\n\n\n","import { Role } from \"../../Role/Base/Role\";\nimport { TowerMgr } from \"../../Tower/Entity/TowerMgr\";\nimport { AffixType } from \"../Affix\";\nimport { Buff } from \"../Buff\";\n\n\n//  每波低于30%血量立刻回复20%血\nexport class Buff_HpRegenIncreasePercentBelowPercentPerWave {\n\n    public static tryExe( role : Role ) {\n\n        // 立刻恢复\n        let f = 0 ;\n        for( let tower of TowerMgr.ins.data ) {\n            for( let buff of tower.buff.list ) {\n                if( buff.affix.type == AffixType.HpRegenIncreasePercentBelowPercentPerWave && \n                    buff.extra != true\n                 ) {\n\n                    let p = role.life.hp.current / role.life.hp.max ;\n                    if( p < buff.affix.argNList[ 1 ] ) {\n                        f += buff.affix.argNList[ 0 ] ;\n\n                        // 标记已经使用\n                        buff.extra = true ; \n\n                    } \n\n                }\n\n            } // end for\n\n        } // end for\n\n        if( f <= 0 ) return ;\n\n        let val = role.life.hp.max * f ;\n        role.life.add( val ) ;\n\n        role.view.hpBar.refresh() ; \n\n    }\n\n    // 重新起效 所有的塔\n    public static resetAllTowers() {\n\n        for( let tower of TowerMgr.ins.data ) {\n            for( let buff of tower.buff.list ) {\n                this.resetBuff( buff ) ;\n            } // end for\n        } // end for\n\n    }\n\n    public static resetBuff( buff : Buff ) {\n\n        if( buff.affix.type != AffixType.HpRegenIncreasePercentBelowPercentPerWave ) return ; \n\n        buff.extra = false ; \n\n    }\n\n}\n","import { randomRangeInt, Vec3 } from \"cc\";\nimport { BagArticle } from \"../../../../Bag/Article/BagArticle\";\nimport { GridTraverse } from \"../../../../Bag/Grid/GridTraverse\";\nimport { BagArticleGridPlace } from \"../../../../Bag/Article/BagArticleGridPlace\";\nimport { EffectFactory } from \"../../../../Bag/Merge/EffectFactory\";\nimport { TowerAllUpdate } from \"../../Tower/Misc/TowerAllUpdate\";\nimport { TowerFactory } from \"../../Tower/Entity/TowerFactory\";\nimport { BagArticleFactory } from \"../../../../Bag/Article/BagArticleFactory\";\nimport { TowerMgr } from \"../../Tower/Entity/TowerMgr\";\n\nexport class Buff_RndArticleMergeGradeUpgrade {\n\n    public static exe() {\n\n        let article = this.getRndAritcle() ;\n        if( article == null ) return ; \n\n        this.replace( article ) ;\n\n        // 更新 Buff 数值\n        TowerAllUpdate.updateAll() ;         \n\n    }\n\n    // 实体替换\n    public static replace( article : BagArticle ) : BagArticle {\n\n        // 删除之前的\n        let cells = article.cells.slice() ;\n        BagArticleGridPlace.unbind( article ) ; \n        article.view.root.destroy() ; \n        if( article.tower != null ) {\n            TowerMgr.ins.remove( article.tower ) ;\n        }\n\n\n        // 创建新的\n        let id = article.cfg.id ; \n        let id2 = id.split( \"_\" )[ 0 ] + \"_\" + ( article.cfg.mergeGrade + 1 ) ; \n        let article2 = BagArticleFactory.create( id2 ) ; \n        article2.view.root.setParent( article.view.root.parent ) ;\n        article2.view.root.position = article.view.root.position ; \n        BagArticleGridPlace.bind( article2 , cells ) ;\n        let tower2 = TowerFactory.create( article2 ) ; \n        TowerMgr.ins.data.push( tower2 ) ;\n\n\n        // 播放特效\n        let effect = EffectFactory.create( \"Merge\" ) ;\n        effect.setParent( article2.view.root , false ) ;\n        effect.position = Vec3.ZERO ; \n\n\n        return article2 ; \n\n    }\n\n    // 随机取得一个物件\n    public static getRndAritcle() : BagArticle {\n\n        let list = new Array< BagArticle >() ;\n        GridTraverse.exe( ( cell )=>{\n            let a = cell.article ; \n            if( a == null || a.cfg.mergeGrade >= 4 ) return ; \n            list.push( a ) ;\n        } ) ;\n\n        if( list.length == 0 ) {\n            // 没有符合条件的\n            return null ;\n        }\n\n        // 随机选择一个小于4级的\n        let idx = randomRangeInt( 0 , list.length ) ; \n        return list[ idx ] ;\n\n    }\n\n}","import { CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { Sender } from \"../Bullet/Bullet\";\nimport { CurrentMax } from \"../Support/SimpleStruct/CurrentMax\";\nimport { Affix } from \"./Affix\";\n\n\n/*\n\n    Buff 的定义：\n        有作用时间、触发间隔 的 词缀。\n        凡是词缀出现的地方，都可以用Buff替代。\n\n    Buff 使用的场合：\n        挂在 Player 上。特性，主要影响Tower。\n        挂在 Role 上。\n        \n        子弹天生附带Buff。在子弹配置表中直接配置。\n        3选动态加上去的Buff。Player Buff。\n\n*/\n\n// Buff 基类\nexport class Buff {\n\n    public cfg : CfgBuffItem = null ; \n\n    // 图标ID\n    public iconId : string ; \n\n    // 词缀\n    public affix : Affix = null ; \n\n    // 持续时间\n    public duration : CurrentMax = null ; \n\n    // 触发间隔\n    public interval : CurrentMax = null ; \n\n    // 影响指定类型的实体\n    // public specified : Set< string > = null ; \n\n    // 是否是天生的\n    public isNative = false ; \n\n    // 超出基本需求的额外数据\n    public extra : any ; \n\n    public sender : Sender ; \n}\n\n// 作用于角色身上的Buff\nexport class BuffRole extends Buff {\n\n    // 作用周期\n    public interval : CurrentMax = null ; \n\n}\n\n","import { Buff } from \"./Buff\";\n\nexport class BuffCom {\n\n    // Buff 列表\n    public list = new Array< Buff >() ;\n\n    // 不添加 同一个对象的Buff。\n    public add( buff : Buff ) {\n\n        let idx = this.list.indexOf( buff ) ; \n        if( idx != -1 ) return ; \n\n        this.list.push( buff ) ; \n\n    }\n\n    public remove( buff : Buff ) {\n\n        let idx = this.list.indexOf( buff ) ; \n        if( idx == -1 ) return ; \n\n        this.list.splice( idx , 1 ) ; \n\n    }\n\n}","import { CfgBuff } from \"../../../../Common/Cfg/CfgBuff\";\nimport { CurrentMax } from \"../Support/SimpleStruct/CurrentMax\";\nimport { Affix } from \"./Affix\";\nimport { Buff } from \"./Buff\";\n\nexport class BuffFactory {\n\n    public static create( id : string ) : Buff {\n\n        let buff = new Buff() ; \n\n        let cfg = CfgBuff.data.get( id ) ;\n        if( cfg == null ) {\n\n            console.error( \"BuffFactory.create 配置为空：\" + \"id:\" + id ) ;\n\n            return ;\n        }\n\n        buff.cfg = cfg ; \n\n        buff.affix = new Affix() ; \n        \n        buff.affix.type = cfg.affixType ; \n        buff.affix.argN = cfg.affixArgN ; \n        if( cfg.affixArgNList != null ) {\n            buff.affix.argNList = new Array< number >() ;\n            buff.affix.argNList.push( ...cfg.affixArgNList ) ;\n        }\n        \n        buff.affix.argStr = cfg.affixArgStr ; \n\n        buff.duration = new CurrentMax() ; \n        buff.duration.setCurrentAndMax( cfg.duration ) ; \n\n        buff.interval = new CurrentMax() ; \n        buff.interval.setCurrentAndMax( cfg.interval ) ;\n\n        return buff ; \n\n    }\n\n}","import { AffixType } from \"./Affix\";\nimport { Buff } from \"./Buff\";\n\n\n// 数据 增长的\nexport class DataIncrease {\n\n    // ——————————————————————————————————————————————————————————————————————\n    // 攻击类的 \n\n    // 攻击 伤害 百分比\n    public attackDamageIncreasePercent = 0 ; \n\n    // 攻击 速度 百分比\n    public attackSpeedIncreasePercent = 0 ;\n\n    // 攻击 暴击 概率 增加 百分比\n    public attackCritProbabilityIncreasePercent = 0 ; \n\n    // 攻击 暴击 倍数 增加 百分比\n    public attackCritMultipleIncreasePercent = 0 ; \n\n    // 攻击 吸血 增加 百分比\n    public attackLifeStealingPercent = 0 ; \n\n\n    public AttackBulletPoisoningDamageIncreasePercent = 0 ; \n    public AttackBulletPoisoningDurationIncreasePercent = 0 ; \n\n    public AttackBulletExplodeRadiusIncreasePercent = 0 ; \n    public AttackBulletExplodeDamageIncreasePercent = 0 ; \n\n    public AttackBulletAddBuffRadiusIncreasePercent = 0 ; \n    public AttackBulletAddBuffRadiusBuffIncreasePercent = 0 ; \n\n    public AttackDamageIncreasePercentFullHp = 0 ; \n\n    public AttackBulletProbabilityAddBuff = new Map< string , number >() ;\n\n    // ——————————————————————————————————————————————————————————————————————\n    // Hp 类\n\n    // 血量 上限 增加 具体值\n    public hpMaxIncrease = 0 ; \n\n    // 增加的血量最大值 增加 百分比\n    public hpMaxIncreaseIncreasePercent = 0 ; \n\n    // 血量 恢复 增加 百分比\n    public hpRegenIncreasePercent = 0 ; \n\n    // 血量 恢复 速度 增加 百分比\n    public hpRegenSpeedIncreasePercent = 0 ; \n\n    // ——————————————————————————————————————————————————————————————————————\n    // 移动\n\n    // 移动 速度 变化量 百分比\n    public moveSpeedIncreasePercent = 0 ; \n\n\n\n\n    // 所有数值型属性重置为0。\n    public reset() {\n\n        for( let v in this ) {\n            \n            if( typeof this[ v ] === 'number' ){\n                this[ v.toString() ] = 0 ;\n            } \n\n        } // end for\n\n        this.AttackBulletProbabilityAddBuff.clear() ; \n\n    }\n\n}\n\n// Buff 增量/变化量 计算\nexport class BuffIncreaseCalc {\n\n    public static exeBuffs( buffs : Array<Buff> , data : DataIncrease ) {\n        for( let i = 0 ; i < buffs.length ; ++i ) {\n            this.exeBuff( buffs[ i ] , data ) ; \n        } // end for\n\n    }\n\n    private static exeBuff( buff : Buff , data : DataIncrease ) {\n\n        let affix = buff.affix ; \n        switch( affix.type ) {\n\n            // 攻击力\n            case AffixType.AttackDamageIncreasePercent :\n            case AffixType.AuraAttackDamageIncreasePercent : \n            case AffixType.AuraAttackDamageIncreaseAllPercent : \n            {\n                data.attackDamageIncreasePercent += affix.argN ; \n            }\n            break ; \n\n            // 攻速\n            case AffixType.AttackSpeedIncreasePercent : \n            case AffixType.AuraAttackSpeedIncreasePercent : \n            {\n                data.attackSpeedIncreasePercent += affix.argN\n            }\n            break ; \n\n            // 暴击概率\n            case AffixType.AttackCritProbabilityIncreasePercent : \n            case AffixType.AuraAttackCritProbabilityIncrease : \n            {\n                data.attackCritProbabilityIncreasePercent += affix.argN\n            }   \n            break ;\n\n            // 暴击倍数\n            case AffixType.AttackCritMultipleIncreasePercent : {\n                data.attackCritMultipleIncreasePercent += affix.argN ; \n            }\n            break ; \n\n            // 吸血 按照百分比\n            case AffixType.AttackLifeStealingPercent : \n            {\n                data.attackLifeStealingPercent += affix.argN ; \n                // tower.attack.lifeStealing.percent = affix.arg1 ; \n            }\n            break ; \n\n            // 最大血量 增加 具体值\n            case AffixType.HpMaxIncrease : {\n                // 受等级影响\n                data.hpMaxIncrease += affix.argN ; \n            }\n            break ;\n\n            // 最大血量 增加 具体值 增加 百分比\n            case AffixType.HpMaxIncreaseIncreasePercent : {\n\n                data.hpMaxIncreaseIncreasePercent += affix.argN ; \n\n            }\n            break ;\n\n            // 回血\n            case AffixType.HpRegenIncreasePercent : {\n\n                if( buff.isNative == false ) {\n                    data.hpRegenIncreasePercent += affix.argN ; \n                }\n\n            }\n            break ; \n\n            case AffixType.HpRegenSpeedIncreasePercent : {\n\n                data.hpRegenSpeedIncreasePercent += affix.argN ; \n\n            }\n            break ; \n\n            // 移速\n            case AffixType.MoveSpeedDecreasePercent : \n            {\n                data.moveSpeedIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n\n            case AffixType.AttackBulletProbabilityAddBuff : {\n                let number = data.AttackBulletProbabilityAddBuff.get( buff.affix.argStr ) ;\n                if( number == null ) {\n                    number = 0 ; \n                }\n                number += buff.affix.argN ;\n                data.AttackBulletProbabilityAddBuff.set( buff.affix.argStr , number ) ; \n            }\n            break ; \n\n            case AffixType.AttackDamageIncreasePercentFullHp : {\n                data.AttackDamageIncreasePercentFullHp += buff.affix.argN ; \n            }\n            break ;\n\n            case AffixType.AttackBulletExplodeRadiusIncreasePercent : {\n                data.AttackBulletExplodeRadiusIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n            case AffixType.AttackBulletExplodeDamageIncreasePercent : {\n                data.AttackBulletExplodeDamageIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n            case AffixType.AttackBulletAddBuffRadiusIncreasePercent : {\n                data.AttackBulletAddBuffRadiusIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n            case AffixType.AttackBulletAddBuffRadiusBuffIncreasePercent : {\n                data.AttackBulletAddBuffRadiusBuffIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n            case AffixType.AttackBulletPoisoningDamageIncreasePercent : {\n                data.AttackBulletPoisoningDamageIncreasePercent += buff.affix.argN ; \n            }\n            break ; \n\n            case AffixType.AttackBulletPoisoningDurationIncreasePercent : {\n                data.AttackBulletPoisoningDurationIncreasePercent += buff.affix.argN ; \n            }\n            break ;             \n\n        }\n\n    }\n\n\n}","import { instantiate, UITransform, Vec3 } from \"cc\";\nimport { Role } from \"../Role/Base/Role\";\nimport { RoleAttributeUpdate } from \"../Role/Misc/RoleAttributeUpdate\";\nimport { EffectPfMgr } from \"../Support/Misc/EffectPfMgr\";\nimport { Affix, AffixType } from \"./Affix\";\nimport { Buff } from \"./Buff\";\nimport { BuffFactory } from \"./BuffFactory\";\nimport { RoleAnimSpine } from \"../Role/Misc/RoleAnimSpine\";\n\n// Buff 操作\nexport class BuffOp {\n\n    // 角色 附加 Buff\n    public static roleAdd( role : Role , id : string ) : [ boolean , Buff ] {\n\n        let buffNew = BuffFactory.create( id ) ;\n\n        let buff = role.buff.list.find( ( e )=>{ return e.affix.type == buffNew.affix.type ; } ) ;\n        if( buff == null ) {\n            // 新增\n\n            this.roleAddNew( role , buffNew ) ; \n\n            return [ true , buffNew ] ; \n        }\n\n        // 更新\n\n        // 重置持续时间\n        buff.duration.max = buffNew.duration.max ; \n        buff.duration.setCurrentAsMax() ; \n\n        buff.interval.max = buffNew.interval.max ; \n\n        return [ false , buff ] ; \n\n    }\n\n    // 新加 buff\n    private static roleAddNew( role : Role , buff : Buff ) {\n\n        role.buff.list.push( buff ) ;\n\n        switch( buff.affix.type ) {\n\n            // 减速\n            case AffixType.MoveSpeedDecreasePercent : {\n                // 更新属性\n                RoleAttributeUpdate.exe( role ) ;\n\n                let effect = instantiate( EffectPfMgr.ins.root.getChildByPath( \"BuffMoveSpeedDecrease\" ) ) ;\n                effect.setParent( role.view.root , false ) ;\n                effect.position = Vec3.ZERO ; \n                effect.setSiblingIndex( 0 ) ; \n\n            }\n            break ; \n\n            case AffixType.AttackSpeedIncreasePercent : {\n                // 更新属性\n                RoleAttributeUpdate.exe( role ) ;\n            }\n            break ;\n\n\n            // 燃烧\n            case AffixType.Burn : {\n\n                let node = instantiate( EffectPfMgr.ins.root.getChildByPath( \"BuffBurn\" ) ) ;\n                node.setParent( role.view.root , false ) ;\n                node.position = Vec3.ZERO ; \n            }\n            break ; \n\n            // 中毒\n            case AffixType.Poisoning : \n            case AffixType.PoisoningPercent : \n            {\n\n                let node = instantiate( EffectPfMgr.ins.root.getChildByPath( \"BuffPoisoning\" ) ) ;\n                node.setParent( role.view.root , false ) ;\n                node.position = Vec3.ZERO ; \n            }\n            break ; \n\n            // 冰冻\n            case AffixType.Frozen : {\n\n                // 停止移动\n                role.move.lockCount++ ; \n                // 停止移动\n                role.attack.lockCount++ ; \n\n                // 动画\n                role.view.skeleton.paused = true ; \n\n                // 效果\n                let node = instantiate( EffectPfMgr.ins.root.getChildByPath( \"BuffFrozen\" ) ) ;\n                node.setParent( role.view.root , false ) ;\n                node.position = Vec3.ZERO ; \n                let uitransEffect = node.getChildByPath( \"Main\" ).getComponent( UITransform ) ;\n                let rectEffect = uitransEffect.getBoundingBox() ;\n\n                let uiTransRole = role.view.main.getComponent( UITransform ) ; \n                let rectRole = uiTransRole.getBoundingBox() ;\n                rectRole.height += 20 ; \n\n                let f = rectRole.height / rectEffect.height ;\n\n                rectEffect.width *= f ;\n                rectEffect.height *= f ; \n                uitransEffect.contentSize = rectEffect.size ; \n\n\n            }\n            break ; \n\n            // 眩晕\n            case AffixType.Stun : {\n\n                // 停止移动\n                role.move.lockCount++ ; \n                // 停止移动\n                role.attack.lockCount++ ; \n\n                // 动画\n                RoleAnimSpine.playIdle( role.view.skeleton ) ;\n\n                // 效果\n                let h = role.view.main.getComponent( UITransform ).contentSize.height ; \n                let node = instantiate( EffectPfMgr.ins.root.getChildByPath( \"BuffStun\" ) ) ;\n                node.setParent( role.view.root , false ) ;\n                node.position = new Vec3( 0 , h + 30 , 0 ) ; \n\n\n            }\n            break ; \n\n        }\n\n    }\n\n    // 移除BuffId\n    public static roleRemove( role : Role , idx : number ) {\n\n        let buff = role.buff.list[ idx ] ; \n        role.buff.list.splice( idx , 1 ) ; \n\n        switch( buff.affix.type ) {\n\n            case AffixType.MoveSpeedDecreasePercent : {\n\n                // 更新属性\n                RoleAttributeUpdate.exe( role ) ;\n\n                // 移除特效\n                let effect = role.view.root.getChildByPath( \"BuffMoveSpeedDecrease\" );\n                effect?.destroy() ; \n\n            }\n            break ; \n\n            case AffixType.AttackSpeedIncreasePercent : {\n                // 更新属性\n                RoleAttributeUpdate.exe( role ) ;\n            }\n            break ;\n\n\n\n            case AffixType.Burn : {\n                // 移除燃烧效果\n\n                // 移除特效\n                let effect = role.view.root.getChildByPath( \"BuffBurn\" );\n                effect?.destroy() ; \n\n            }\n            break ; \n\n            case AffixType.Poisoning : \n            case AffixType.PoisoningPercent : \n            {\n\n                // 移除特效\n                let effect = role.view.root.getChildByPath( \"BuffPoisoning\" );\n                effect?.destroy() ; \n\n            }\n            break ; \n\n            case AffixType.Frozen : {\n\n                // role.move.enabled = true ; \n                role.move.lockCount-- ; \n                role.attack.lockCount-- ; \n\n                role.view.skeleton.paused = false ; \n\n                // 移除特效\n                let effect = role.view.root.getChildByPath( \"BuffFrozen\" );\n                effect?.destroy() ; \n            }\n            break ; \n\n            case AffixType.Stun : {\n\n                // role.move.enabled = true ; \n                role.move.lockCount-- ; \n                role.attack.lockCount-- ; \n\n                // 移除特效\n                let effect = role.view.root.getChildByPath( \"BuffStun\" );\n                effect?.destroy() ; \n\n            }\n            break ; \n\n        }\n\n    }\n\n}","import { Buff } from \"./Buff\";\n\n\n/*\n    Buff 参数重设。合成等级设置。\n    设置buff的值，根据 合成等级、合成等级因子配置。\n*/ \nexport class BuffResetMergeGrade {\n\n    // 设置\n    public static exe( buff : Buff , mergeGrade : number ) {\n\n        let cfg = buff.cfg ; \n\n        // 处理合成等级系数\n        let f = this.getMergeGradeFactor( cfg.mergeGradeFactor , mergeGrade ) ; \n        buff.affix.argN = cfg.affixArgN * f ; \n\n    }\n\n    // 取得合成等级系数\n    public static getMergeGradeFactor ( mergeGradeFactor : Array< number > , mergeGrade : number ) : number {\n\n        if( mergeGradeFactor == null ) {\n            return 1 ;\n        }\n\n        let f = mergeGradeFactor[ mergeGrade - 1 ] ;\n        return f ;\n\n    } ;\n\n}","import { CfgBuff } from \"../../../../Common/Cfg/CfgBuff\";\nimport { Lang } from \"../../../../Common/Misc/Lang\";\nimport { ArticleString } from \"../../../../Common/String/ArticleString\";\n\n\nexport class BuffString {\n\n    public static getDescription( id : string ) : string {\n\n        console.log( \"BuffString.getDescription \" + id ) ; \n\n        let str = this.get1( id ) ;\n        if( str != null ) return str ; \n\n        str = this.get2( id ) ;\n        if( str != null ) return str ; \n\n        return null ;\n\n    }\n\n    // 规则1取，前缀+ID 尝试获取\n    private static get1( id : string ) {\n\n        let key = \"Buff@\" + id ; \n        let str = Lang.get( key ) ;\n        if( str == null || str == \"\" ) return null ;\n\n        str = this.replace( id , str ) ; \n\n        return str ; \n\n    }\n\n    // 规则2取。\n    private static get2( id : string ) {\n\n        let cfg = CfgBuff.data.get( id ) ;\n\n        let name : string = null ; \n\n        let key = \"Buff@\" ; \n        if( cfg.specified != null ) {\n            key += \"Specified-\" ;\n        }\n        else {\n            key += \"General-\" ;\n        }\n\n        key += cfg.affixType.toString()  ;\n\n        let str = Lang.get( key ) ;\n        if( str == null ) { \n            // console.log( \"找不到Buff描述\" ) ;\n            return str ; \n        }\n\n        str = this.replace( id , str ) ; \n\n        return str ; \n\n    }\n\n    private static replace( buffId : string , str : string ) : string {\n\n        let cfg = CfgBuff.data.get( buffId ) ;\n\n        if( cfg.specified != null ) {\n\n            let id2 : string = null ; \n            for( let v of cfg.specified ) {\n                id2 = v ;\n                break ; \n            }\n\n            // let id2 = [...cfg.specified][0] ;\n            let name = ArticleString.getName( id2 ) ; \n            // 替换名字\n            str = str.replace( \"{name}\" , name ) ;\n\n        }\n\n\n        let val = cfg.affixArgN ;\n        // 去掉符号。符号在字符串那边填写\n        val = Math.abs( val ) ; \n        // 值是否百分比。把百分比转换成整数显示。\n        if( buffId.indexOf( \"Percent\" ) != -1 || \n            buffId.indexOf( \"Probability\" ) != -1 ) {\n            val *= 100 ;\n        }\n        str = str.replace( \"{1}\" , val.toString() ) ;\n\n        return str ; \n\n    }\n\n}","import { Node } from \"cc\";\nimport { Role } from \"../Role/Base/Role\";\nimport { Life } from \"../Role/Base/Life\";\nimport { AttackCrit, AttackLifeStealing } from \"../Tower/Entity/AttackCom\";\nimport { MoveCom } from \"../Role/Move/MoveCom\";\nimport { CfgBulletItem } from \"../../../../Common/Cfg/CfgBullet\";\nimport { Buff } from \"../Buff/Buff\";\nimport { PathMove } from \"../Ai/PathMove\";\n\nexport class Bullet {\n\n    public id : string ; \n\n    public cfg : CfgBulletItem = null ; \n\n    // 表现\n    public view = new BulletView() ; \n\n    // 用于控制子弹实体的死亡\n    public life = new Life() ; \n\n    // 生命周期\n    public Lifecycle = 0 ; \n\n    // 伤害\n    public damge = 0 ; \n\n    // 暴击\n    public crit : AttackCrit = null ;\n\n    // 吸血\n    public lifeStealing : AttackLifeStealing = null ; \n\n    // 移动\n    public move = new MoveCom() ; \n    // 路径移动\n    public pathMove : PathMove = null ; \n\n    // 攻击目标\n    public target = new BulletTarget() ; \n\n    // 穿透 个数\n    public passCount = 0 ; \n\n    // 弹射\n    public bounce : BulletBounce = null ;\n  \n    // 击中后添加的 Buff\n    public buffIds = new Array< string >() ; \n    \n    // 击中后添加的 Buff\n    public buffs = new Array< Buff >() ; \n\n    // 发送者\n    public sender : Sender = null ; \n\n}\n\n// 子弹运动类型\nexport enum BulletMoveType {\n\n    None = \"None\", \n\n    // 直线\n    Linear = \"Linear\" ,\n\n    // 追踪\n    Chase = \"Chase\" , \n\n    // 回旋\n    Boomerang = \"Boomerang\" , \n\n}\n\nexport class BulletTarget {\n\n    // 攻击目标\n    public targetRole : Role = null ;\n\n    // 运动类型\n    public moveType = BulletMoveType.Linear ; \n\n}\n\n// 子弹反弹\nexport class BulletBounce {\n\n    public bounceRectEnemy = 0 ; \n\n    // 边框弹射 次数\n    public bounceRect = 0 ; \n\n    // 敌人反弹 次数\n    public bounceEnemy = 0 ; \n\n    // 敌人间弹射 次数\n    public bounceBetweenEnemies = new BulletBounceBetweenEnemies() ; \n\n\n}\n\n// 敌人间反弹\nexport class BulletBounceBetweenEnemies {\n\n    // 弹射次数\n    public count = 0 ; \n\n    // 弹射过的记录\n    public record = new Set< Role >() ; \n\n}\n\nexport class BulletView {\n\n    public root : Node ;\n\n    public rotationType = BulletRotationType.None ; \n\n}\n\n// 子弹运动旋转类型\nexport enum BulletRotationType {\n\n    None = \"None\" , \n\n    // 根据飞行方向旋转\n    Direction = \"Direction\" , \n\n    // 不断旋转\n    Forever = \"Forever\" , \n\n}\n\n// 发送者\nexport class Sender {\n\n    // 发送者ID\n    public id : string ; \n\n}","import { Rect, UITransform } from \"cc\";\nimport { WorldNode } from \"../Support/Misc/WorldNode\";\n\nexport class BulletBounceRect {\n\n    public static ins = new BulletBounceRect() ; \n\n    public rect : Rect ; \n\n    public init() {\n\n        let node = WorldNode.ins.root.getChildByPath( \"Cfg/BulletBounceRect\" ) ; \n        this.rect = node.getComponent( UITransform ).getBoundingBox() ; \n\n        node.destroy() ; \n\n    }\n\n}","import { Collider2D, Contact2DType, instantiate } from \"cc\";\nimport { Bullet, BulletBounce } from \"./Bullet\";\nimport { BulletPfMgr } from \"./BulletPfMgr\";\nimport { CollisionBullet } from \"../Collision/CollisionBullet\";\nimport { CfgBullet } from \"../../../../Common/Cfg/CfgBullet\";\nimport { FrameSecConvert } from \"../../../../Common/Misc/FrameSecConvert\";\n\nexport class BulletFactory {\n\n    public static create( id : string ) {\n\n        let bullet = new Bullet() ; \n        bullet.id = id ; \n\n        bullet.Lifecycle = FrameSecConvert.toFrame( 60 * 5 ) ; \n\n        BulletCfgSet.exe( bullet ) ;\n\n        BulletViewSet.exe( bullet ) ; \n\n        return bullet ; \n\n    }\n\n}\n\n\n// 配置设置\nexport class BulletCfgSet {\n\n    public static exe( bullet : Bullet ) {\n\n        let cfg = CfgBullet.data.get( bullet.id ) ; \n\n        bullet.cfg = cfg ; \n\n        bullet.view.rotationType = cfg.rotationType ; \n\n        bullet.life.hp.setCurrentAndMax( 1 ) ; \n\n        bullet.move.speed = cfg.moveSpeed ; \n\n        bullet.passCount = cfg.passCount ; \n        \n        bullet.bounce = new BulletBounce() ; \n        bullet.bounce.bounceRect = cfg.bounceRect ; \n        bullet.bounce.bounceEnemy = cfg.bounceEnemy ; \n        bullet.bounce.bounceRectEnemy = cfg.bounceRectEnemy ; \n        bullet.bounce.bounceBetweenEnemies.count = cfg.BounceBetweenEnemies ; \n        \n        bullet.target.moveType = cfg.moveType ; \n\n        if( cfg.buffId != null ) {\n            bullet.buffIds.push( cfg.buffId ) ; \n        }\n        \n\n    }\n\n}\n\n\n// 表现设置\nexport class BulletViewSet {\n\n    public static exe( bullet : Bullet ) {\n\n        let cfg = CfgBullet.data.get( bullet.id ) ; \n\n        let id = cfg.viewId != null ? cfg.viewId : bullet.id ; \n\n        let pf = BulletPfMgr.ins.root.getChildByPath( id ) ;\n        bullet.view.root = instantiate( pf ) ;\n\n        this.collsion( bullet ) ;\n\n    }\n\n    // 处理碰撞器\n    private static collsion( bullet : Bullet ) {\n\n        let root = bullet.view.root ; \n        let collider = root.getComponentInChildren(Collider2D);\n        if( collider == null ) return ;\n\n        // 碰撞器绑定对象\n        collider[ \"Bullet\" ] = bullet ; \n\n        collider.on(Contact2DType.BEGIN_CONTACT, CollisionBullet.onBeginContact , CollisionBullet );\n\n    }\n\n}","import { Bullet } from \"./Bullet\";\n\nexport class BulletMgr {\n\n    public static ins : BulletMgr = null ;\n\n    public data = new Array< Bullet >() ; \n\n    public add( bullet : Bullet ) {\n\n        let idx = this.data.indexOf( bullet ) ;\n        if( idx != -1 ) return ; \n        this.data.push( bullet ) ;\n\n    }\n\n    public remove( bullet : Bullet ) {\n        let idx = this.data.indexOf( bullet ) ;\n        if( idx == -1 ) return ; \n        this.data.splice( idx , 1 ) ;\n    }\n\n}\n\n","import { Vec3 } from \"cc\";\nimport { MoveCom } from \"../Role/Move/MoveCom\";\nimport { Bullet } from \"./Bullet\";\n\n\n// 计算计算\nexport class BulletMoveCalc {\n\n    public static exe( move : MoveCom , dir : Vec3 ) {\n\n        // 方向\n        move.direction.set( dir ) ;\n        move.direction.normalize() ; \n\n        // 位移量\n        let offset = move.offset ; \n        offset.set( move.direction ) ;\n        offset.multiplyScalar( move.speed ) ; \n\n    }\n\n    // 朝向目标\n    public static target( bullet : Bullet ) {\n\n        let targetRole = bullet.target.targetRole ; \n        if( targetRole == null ) return ; \n\n        let target = targetRole.view.collider.node ;\n        let v = target.worldPosition.clone().subtract( bullet.view.root.worldPosition ) ; \n        BulletMoveCalc.exe( bullet.move , v ) ;\n\n    }\n\n}","import { math, Vec3 } from \"cc\";\nimport { Bullet, BulletMoveType, BulletRotationType } from \"./Bullet\";\nimport { MoveCom } from \"../Role/Move/MoveCom\";\nimport { BulletBounceRect } from \"./BulletBounceRect\";\nimport { Role } from \"../Role/Base/Role\";\nimport { BulletMoveCalc } from \"./BulletMoveCalc\";\nimport { BulletViewHelper } from \"./BulletViewHelper\";\n\n// 移动控制\nexport class BulletMove {\n\n    public static update( bullet : Bullet ) {\n\n        if( bullet.pathMove != null ) {\n            this.pathMove( bullet ) ; \n            return ; \n        }\n\n        this.move( bullet ) ; \n        \n        this.rectBounce( bullet ) ; \n\n        this.view( bullet ) ;\n\n    }\n\n    public static pathMove( bullet : Bullet ) {\n\n        let pathMove = bullet.pathMove ; \n        let path = pathMove.path ; \n        let idx = pathMove.idx ; \n        let targetPos = path[ idx ] ; \n        let v = targetPos.clone().subtract( bullet.view.root.position ) ;\n        if( v.lengthSqr() <= 50 * 50 ) {\n\n            // 到达节点\n            pathMove.idx++ ; \n\n            if( pathMove.idx >= path.length ) {\n                // 到达终点\n\n                bullet.life.hp.current = 0 ; \n\n                return ; \n\n            }\n\n            // 更新目标\n            targetPos = path[ pathMove.idx ] ; \n            v = targetPos.clone().subtract( bullet.view.root.position ) ;\n            v.normalize() ;\n            v.multiplyScalar( bullet.move.speed ) ; \n            bullet.move.offset = v ; \n        }\n        \n        // 不断朝向目标移动\n        let pos = bullet.view.root.position.clone() ;\n        pos.add( bullet.move.offset ) ; \n        bullet.view.root.position = pos ; \n\n        // 累加移动的路径长度\n        // pathMove.lenMoved += role.move.offset.lengthSqr() ;\n\n    }\n\n    // 表现\n    public static view( bullet : Bullet ) {\n\n        switch( bullet.view.rotationType ) {\n            case BulletRotationType.Direction : {\n                BulletViewHelper.rotateDir( bullet ) ; \n            }\n            break ; \n        }\n\n    }\n\n    // 执行移动\n    public static move( bullet : Bullet ) {\n\n        if( bullet.target.targetRole != null && bullet.target.moveType == BulletMoveType.Chase ) {\n            this.chaseTarget( bullet ) ; \n            return ; \n        }\n\n        // 没有目标 或者 不追踪目标\n        let pos = bullet.view.root.position.clone() ;\n        pos.add( bullet.move.offset ) ; \n        bullet.view.root.position = pos ; \n\n    }\n\n    // 追踪目标\n    public static chaseTarget( bullet : Bullet ) {\n\n        BulletMoveCalc.target( bullet ) ;\n\n        let pos = bullet.view.root.position.clone() ;\n        pos.add( bullet.move.offset ) ; \n        bullet.view.root.position = pos ; \n\n    }\n\n    // 边框弹射\n    public static rectBounce( bullet : Bullet ) {\n\n        // if( bullet.bounce.bounceRect <= 0 && bullet.bounce.bounceRectEnemy <= 0 ) return ; \n\n        let rect = BulletBounceRect.ins.rect ; \n\n        let pos = bullet.view.root.position ; \n        if( pos.x < rect.xMin || pos.x > rect.xMax ) {\n            \n            if( bullet.bounce.bounceRect > 0 ) {\n                bullet.bounce.bounceRect-- ; \n            }\n            else if( bullet.bounce.bounceRectEnemy > 0 ) {\n                bullet.bounce.bounceRectEnemy-- ; \n            }\n            else {\n                return ;\n            }\n\n            bullet.move.offset.x *= -1 ; \n            bullet.move.direction.x *= -1 ; \n            \n        }\n        else if( pos.y < rect.yMin || pos.y > rect.yMax ){\n\n            if( bullet.bounce.bounceRect > 0 ) {\n                bullet.bounce.bounceRect-- ; \n            }\n            else if( bullet.bounce.bounceRectEnemy > 0 ) {\n                bullet.bounce.bounceRectEnemy-- ; \n            }\n            else {\n                return ;\n            }\n\n            bullet.move.offset.y *= -1 ; \n            bullet.move.direction.y *= -1 ; \n\n\n        }\n\n\n    }\n\n\n}\n\n","import { Node } from \"cc\";\nimport { Bullet } from \"./Bullet\";\n\nexport class BulletPfMgr {\n\n    public static ins = new BulletPfMgr() ; \n\n    public root : Node ; \n\n}","import { math, Rect, Vec3, view } from \"cc\";\nimport { Bullet, BulletRotationType } from \"./Bullet\";\nimport { BulletMgr } from \"./BulletMgr\";\nimport { MoveCom } from \"../Role/Move/MoveCom\";\nimport { BulletMove } from \"./BulletMoveSys\";\n\nexport class BulletSys {\n\n    public static update() {\n\n        let list = BulletMgr.ins.data ; \n        for( let i = list.length - 1 ; i >= 0 ; --i ) {\n\n            let bullet = list[ i ] ;\n           \n            this.outOfBounds( bullet ) ; \n\n            this.lifecycle( bullet ) ; \n            \n            if( bullet.life.hp.current <= 0 ) {\n                this.die( bullet ) ;\n                continue ; \n            } \n\n            BulletMove.update( bullet ) ; \n\n        } // end fpr\n\n    }\n\n    // 生命周期控制\n    private static lifecycle( bullet : Bullet ) {\n\n        if( bullet.Lifecycle > 0 ) {\n            bullet.Lifecycle-- ; \n            if( bullet.Lifecycle == 0 ) {\n                bullet.life.hp.current = 0 ; \n            }\n        }\n\n    }\n\n    // 超出边界的移除掉\n    public static outOfBounds( bullet : Bullet ) {\n\n        if( this.rectBounds == null ) {\n            let size = view.getVisibleSize() ; \n            this.rectBounds = new Rect() ; \n            this.rectBounds.xMin = ( size.width + 200 ) * -1 ; \n            this.rectBounds.xMax = size.width + 200 ; \n            this.rectBounds.yMin = ( size.height + 200 ) * -1 ; \n            this.rectBounds.yMax = size.height + 200 ; \n        }\n\n\n        let pos = bullet.view.root.worldPosition ; \n        if( pos.x < this.rectBounds.xMin || pos.x > this.rectBounds.xMax || \n            pos.y < this.rectBounds.yMin || pos.y > this.rectBounds.yMax \n            )\n        {\n            // 出界\n            bullet.life.hp.current = 0 ; \n        }\n\n    }\n\n    public static rectBounds : Rect ; \n\n    // 子弹死亡\n    public static die( bullet : Bullet ) {\n\n        BulletMgr.ins.remove( bullet ) ; \n\n        bullet.view.root.destroy() ; \n\n    }\n\n}\n\n","import { math, Vec3 } from \"cc\";\nimport { Bullet } from \"./Bullet\";\n\n\n\nexport class BulletViewHelper {\n\n    // 根据飞行方向旋转\n    public static rotateDir( bullet : Bullet ) {\n\n        // 根据飞行方向旋转\n        let v = bullet.move.offset ; \n        let y = math.toDegree( Math.atan2( v.y , v.x ) ) ;\n        bullet.view.root.eulerAngles = new Vec3( 0 , 0 , y ) ;\n\n        // 表现朝向右边，运动往左边时，反向。\n        let s = bullet.view.root.scale.clone() ; \n        if( v.x < 0 ) {\n            if( s.y > 0 ) {\n                s.y *= -1 ; \n                bullet.view.root.scale = s ;\n            }\n        }\n        else {\n            if( s.y < 0 ) {\n                s.y = Math.abs( s.y ) ; \n                bullet.view.root.scale = s ;\n            }\n        }\n\n       \n\n    }\n\n}","import { Input, Node, game } from \"cc\";\n\n// 点击间隔限制。点击相隔多少时间不处理。\nexport class ButtonInterval {\n\n    // \n    public static set( node : Node , fn : ()=>void , interval = 500 ) {\n\n        let t = game.totalTime ; \n        node.on( Input.EventType.TOUCH_END , ()=>{\n\n            let t2 = game.totalTime ; \n            let diff = t2 - t ; \n            if( diff < interval ) { return ; } \n            t = t2 ; \n\n            fn() ; \n\n        } ) ; \n\n    }\n\n}","import { Vec2 } from \"cc\";\nimport { UiBagGrid } from \"./UiBagGrid\";\nimport { UiBagCell } from \"./UiBagCell\";\n\nexport class CellExpand {\n\n    // 扩展4方向\n    public static exe4( coord : Vec2 ) : Array< UiBagCell > {\n\n        let list = new Array< UiBagCell >() ;\n\n        let coord2 = coord.clone() ;\n        coord2.y += 1 ;\n        let cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        coord2 = coord.clone() ;\n        coord2.x += 1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n        \n        coord2 = coord.clone() ;\n        coord2.y -= 1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        coord2 = coord.clone() ;\n        coord2.x -= 1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        return list ; \n\n    }\n\n    // 扩展8方向\n    public static exe8( coord : Vec2 ) : Array< UiBagCell > {\n\n        // let list = new Array< UiBagCell >() ;\n\n        let list = this.exe4( coord ) ;\n\n        let coord2 = coord.clone() ;\n        coord2.x += 1 ;\n        coord2.y += 1 ;\n        let cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        coord2 = coord.clone() ;\n        coord2.x += 1 ;\n        coord2.y += -1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n        \n        coord2 = coord.clone() ;\n        coord2.x += -1 ;\n        coord2.y += -1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        coord2 = coord.clone() ;\n        coord2.x += -1 ;\n        coord2.y += 1 ;\n        cell = UiBagGrid.ins.getCell( coord2) ; \n        if( cell != null ) {\n            list.push( cell ) ;\n        }\n\n        return list ; \n\n    }\n\n}","import { Vec2 } from \"cc\";\nimport { TileShapeDataParser } from \"./TileShapeDataParser\";\nimport { MergeDefinition } from \"../../Game/Bag/Merge/MergeDefinition\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\nimport { AttackTargetSelectionType } from \"../../Game/World/1.Base/Tower/Entity/AttackCom\";\nimport { CfgTowerItem, CfgTowerParser } from \"./CfgTower\";\n\n// 物品配置表\nexport class CfgArticleMgr {\n\n    public static data = new Map< string , CfgArticle >() ; \n\n}\n\n// 物品配置\nexport class CfgArticle {\n\n    public id : string ; \n\n    // 原始数据\n    public dataOrig : any ; \n\n    // 在背包中的形状\n    public bagShapeId : string ;\n\n    // 合成等级\n    public mergeGrade = -1 ; \n\n    // 局外等级线ID\n    public gradeLineId : string ; \n\n    // 塔的数据\n    public tower = new CfgTowerItem() ; \n\n    // 品质\n    public quality = 1 ; \n\n}\n\n\n\n// 解析器\nexport class CfgArticleParser {\n\n    public static parseJson( json : any ) {\n\n        MergeDefinition.ins = new MergeDefinition() ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgArticle() ;\n            CfgArticleMgr.data.set( id , cfgItem ) ;\n            cfgItem.id = id ;\n\n            let str : string = null ; \n\n            cfgItem.dataOrig = row ; \n\n            cfgItem.bagShapeId = row[ \"BagShapeId\" ] ; \n            \n            str = row[ \"MergeGrade\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.mergeGrade = Number( str ) ; \n            }\n\n            cfgItem.gradeLineId = row[ \"GradeLineId\" ] ; \n\n            str = row[ \"Quality\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.quality = Number( str ) ;\n            }\n\n            this.handleMergeDefinition( id , row ) ;\n\n            CfgTowerParser.parseTowerItem( cfgItem.tower , row ) ; \n\n        } // endf\n\n    }\n\n\n\n    private static handleMergeDefinition( id : string , row : any ) {\n\n        let str = row[ \"MergeDefinition\" ] as string ; \n        if( str == null || str == \"\" ) return ; \n\n        let str2 = row[ \"MergeHybrid\" ] ; \n        let isHybrid = str2 == \"true\" ? true : false ; \n\n        if( isHybrid ) {\n\n            MergeDefinition.ins.allowData.set( id , false ) ; \n\n        }\n\n        let strs = str.split( \",\" ) ;\n        for( let str2 of strs ) {\n            let kv = str2.split( \"->\" ) ; \n            let id2 = kv[ 0 ].trim() ; \n            let id3 = kv[ 1 ].trim() ; \n\n            MergeDefinition.ins.addDefinition( id , id2 , id3 , isHybrid ) ;\n\n        } // end for\n\n    }\n\n}","\n\n// 物品升级\nexport class CfgArticleGrade {\n\n    public static data = new Map< string , Array<CfgArticleGradeItem> >() ; \n\n}\n\nexport class CfgArticleGradeItem {\n\n    // 等级。从 1 开始。\n    public grade = 0 ; \n\n    // 解锁的 Buff，aura \n    public unlocked = new Array< string >() ;\n\n    // 攻击力 增加的\n    public attackDamage = 0 ; \n\n    // 血量 最大值 增加 具体指\n    public hpMaxIncrease = 0 ; \n\n    // 回血 增加 百分比\n    public hpRegenIncreasePercent = 0 ; \n\n    // 回血 增加 具体值\n    public hpRegenIncrease = 0 ; \n\n    // 每波获得的货币/阳光\n    public getMomeyPerWave = 0 ; \n\n    // 附带的buff\n    public buffIds = new Array< string >() ; \n\n    // 升级所需\n    public upgrade = new CfgArticleGradeItemUpgrade() ; \n\n}\n\n// 升级所需\nexport class CfgArticleGradeItemUpgrade {\n\n    // 所需货币\n    public money1 = 0 ; \n\n    // 所需碎片\n    public itemId : string = null ; \n    public itemCount = 0 ; \n\n}\n\n// 解析器\nexport class CfgArticleGradeParser {\n\n    public static parseJson( json : any ) {\n\n        let str : string ; \n\n        let data = CfgArticleGrade.data ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let levelId = row[ \"Id\" ] ;\n            if( levelId == null || levelId == \"\" ) continue ; \n\n            // let levelIdx = Number( levelId ) ; \n\n            let list = data.get( levelId ) ;\n            if( list == null ) {\n                list = new Array< CfgArticleGradeItem >() ; \n                data.set( levelId , list );\n            }\n\n            let cfgItem = new CfgArticleGradeItem() ; \n            list.push( cfgItem ) ; \n\n            // 等级\n            cfgItem.grade = list.length ;\n\n            // 解锁的 \n            str = row[ \"Unlocked\" ] ; \n            if( str != null && str != \"\" ) {\n                let strs = str.split( /[,\\n]/ ) ; \n                for( let str2 of strs ) {\n                    cfgItem.unlocked.push( str2 ) ; \n                } // end for\n            }\n\n\n            str = row[ \"AttackDamage\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.attackDamage = Number( str );\n            }\n            \n            str = row[ \"HpMaxIncrease\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.hpMaxIncrease = Number( str );\n            }\n\n            str = row[ \"HpRegenIncreasePercent\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.hpRegenIncreasePercent = Number( str );\n            }\n\n            str = row[ \"HpRegenIncrease\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.hpRegenIncrease = Number( str );\n            }\n            \n\n            str = row[ \"GetMomeyPerWave\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.getMomeyPerWave = Number( str );\n            }\n\n            str = row[ \"Buff\" ] as string ; \n            if( str != null && str != \"\" ) {\n                let strs = str.split( /[,\\n]/ ) ;\n                cfgItem.buffIds.push( ...strs );\n            }\n            \n            str = row[ \"UpgradeMoney1\" ] ;\n            if( str != null && str != \"\" ) {\n                cfgItem.upgrade.money1 = Number( str ) ;\n            }\n\n            str = row[ \"UpgradeFragment\" ] ;\n            if( str != null && str != \"\" ) {\n                let strs = str.split( \",\" ) ; \n                cfgItem.upgrade.itemId = strs[ 0 ].trim() ;\n                cfgItem.upgrade.itemCount = Number( strs[ 1 ] ) ;\n            }\n\n        } // end for\n\n    }\n\n}\n","\n\nexport class CfgArticleUnlock {\n\n    public static data = new Map< string , CfgArticleUnlockItem >() ; \n\n}\n\nexport class CfgArticleUnlockItem {\n\n    public id : string ; \n\n    public levelIdx = -1 ; \n\n}\n\n// 解析器\nexport class CfgArticleUnlockParser {\n\n    public static parseJson( json : any ) {\n\n        let data = CfgArticleUnlock.data ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            let cfgItem = new CfgArticleUnlockItem() ; \n            CfgArticleUnlock.data.set( id , cfgItem ) ; \n\n            cfgItem.id = id ; \n\n            let str = row[ \"LevelIdx\" ] as string ;\n            \n            cfgItem.levelIdx = Number( str ) ; \n\n\n\n        } // end for\n\n    }\n\n}","\nimport { Affix, AffixType } from \"../../Game/World/1.Base/Buff/Affix\";\nimport { AuraScopeType } from \"../../Game/World/1.Base/Buff/AuraScopeType\";\nimport { BulletRotationType } from \"../../Game/World/1.Base/Bullet/Bullet\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\n\nexport class CfgBuff {\n\n    public static data = new Map< string , CfgBuffItem >() ;  \n\n}\n\nexport class CfgBuffItem {\n\n    public id : string ; \n\n    // 词缀 类型\n    public affixType = AffixType.None ; \n    // 词缀 参数\n    public affixArgN : number = 0 ;\n    public affixArgNList : Array< number > = null ; \n    // 词缀 参数\n    public affixArgStr : string ; \n\n    // 持续时间。帧数。\n    public duration : number = 0 ;\n\n    // 触发间隔。帧数。-1 没有间隔。0 每帧触发。1 间隔1帧触发。\n    public interval = -2 ; \n\n    // 品质等级\n    public grade = 1 ;\n\n    // 指定附加的实体类型\n    public specified : Set< string > = null ; \n\n    // 是否是光环\n    public isAura = false ; \n\n    // 光环 是否可叠加\n    public auraOverlay = true ; \n\n    // 光环 作用域类型\n    public auraScopeType = AuraScopeType.Dir8 ; \n\n    // 合成等级系数\n    public mergeGradeFactor : Array< number > = null ; \n\n    // 在解锁面板中出现的最大次数\n    public unlockCount = -1 ; \n\n}\n\n// 解析器\nexport class CfgBuffParser {\n\n    public static parseJson( json : any ) {\n\n        let str : string = null ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgBuffItem() ;\n            CfgBuff.data.set( id , cfgItem ) ;\n            cfgItem.id = id ;\n\n            str = row[ \"Type\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.affixType = str as AffixType ; \n            }\n\n            str = row[ \"ArgN\" ] ; \n            if( str != null && str != \"\" ) {\n\n                if( typeof str === \"number\" ) {\n                    cfgItem.affixArgN = str ; \n                }\n                else {\n\n                    let strs = str.split( \",\" ) ;\n                    if( strs.length == 1 ) {\n                        cfgItem.affixArgN = Number( str ) ; \n                    }\n                    else {\n                        cfgItem.affixArgN = Number( strs[ 0 ] ) ; \n                        cfgItem.affixArgNList = new Array< number >() ; \n                        for( let str of strs ) {\n                            cfgItem.affixArgNList.push( Number( str ) ) ;\n                        } // end for\n                    }\n\n                }\n\n            }\n\n            str = row[ \"ArgStr\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.affixArgStr = str ; \n            }\n\n            str = row[ \"Duration\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.duration = FrameSecConvert.toFrame( Number( str ) ) ; \n            }\n\n            str = row[ \"Interval\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.interval = FrameSecConvert.toFrame( Number( str ) ) ; \n            }\n\n            str = row[ \"Grade\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.grade = Number( str ) ; \n            }\n\n            str = row[ \"Specified\" ] ; \n            if( str != null && str != \"\" && str != \"All\" ) {\n                cfgItem.specified = new Set< string >() ; \n                let strs = str.split( /[,\\n]/ ).filter( Boolean ) ;\n                for( let t of strs ) {\n                    t = t.trim() ; \n                    cfgItem.specified.add( t ) ;\n                } // end for\n\n            }\n\n            str = row[ \"IsAura\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.isAura = str == \"true\" ? true : false ; \n            }\n\n            str = row[ \"AuraOverlay\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.auraOverlay = str == \"true\" ; \n            }\n\n            str = row[ \"AuraScope\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.auraScopeType = str as AuraScopeType ; \n            }\n\n\n            str = row[ \"MergeGradeFactor\" ] ; \n            if( str != null && str != \"\" ) {\n                let strs = str.split( \",\" ) ;\n                cfgItem.mergeGradeFactor = new Array< number >() ;\n                for( let str2 of strs ) {\n                    cfgItem.mergeGradeFactor.push( Number( str2 ) ) ; \n                } // end for\n                \n            }\n\n            str = row[ \"UnlockCount\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.unlockCount = Number( str ) ; \n            }\n\n\n\n        } // endf\n\n    }\n\n}\n","import { BulletMoveType, BulletRotationType } from \"../../Game/World/1.Base/Bullet/Bullet\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\n\nexport class CfgBullet {\n\n    public static data = new Map< string , CfgBulletItem >() ;  \n\n}\n\nexport class CfgBulletItem {\n\n    public id : string ; \n\n    public viewId : string ; \n\n    // 移动速度\n    public moveSpeed : number ;\n\n    // 穿透个数\n    public passCount : number = 0 ;\n\n    public rotationType = BulletRotationType.None ; \n\n    public bounceRect = 0 ; \n    public bounceEnemy = 0 ; \n    public bounceRectEnemy = 0 ; \n    public BounceBetweenEnemies = 0 ; \n\n    // 运动类型\n    public moveType = BulletMoveType.Linear ; \n\n    // 击中后附带的buff\n    public buffId : string = null ; \n\n}\n\n// 解析器\nexport class CfgBulletParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgBulletItem() ;\n            CfgBullet.data.set( id , cfgItem ) ;\n            cfgItem.id = id ;\n\n            let speed = Number( row[ \"MoveSpeed\" ] ) ; \n            cfgItem.moveSpeed = FrameSecConvert.toSecond( speed ) ; \n\n            let str : string = null ;\n\n            str = row[ \"RotationType\" ] ; \n            if( str != null && str != \"\" ) {\n                cfgItem.rotationType = str as BulletRotationType ; \n            }\n            \n            str = row[ \"Pass\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.passCount = Number( str ) ; \n            }\n            \n            str = row[ \"BounceRect\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.bounceRect = Number( str ) ; \n            }\n\n            str = row[ \"BounceEnemy\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.bounceEnemy = Number( str ) ; \n            }\n\n            str = row[ \"BounceRectEnemy\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.bounceRectEnemy = Number( str ) ; \n            }\n            \n   \n            str = row[ \"BounceBetweenEnemies\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.BounceBetweenEnemies = Number( str ) ; \n            }\n\n            str = row[ \"ViewId\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.viewId = str ; \n            }\n\n            str = row[ \"MoveType\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.moveType = str.trim() as BulletMoveType ;\n            }\n            \n\n            str = row[ \"BuffId\" ] ; \n            if( str != null && str != \"\"  ) {\n                cfgItem.buffId = str ; \n            }\n\n        } // endf\n\n    }\n\n}\n","import { CfgItemRewardItem } from \"../../../../Common/Cfg/CfgItemReward\";\r\nimport { ItemData } from \"../../../../Common/Item/ItemData\";\r\nimport { ItemType } from \"../../../../Common/Item/ItemType\";\r\n\r\n\r\nexport class CfgDailyCheckin {\r\n\r\n    public static data = new Array< Array< ItemData > >() ; \r\n\r\n}\r\n\r\nexport class CfgDailyCheckinParser {\r\n\r\n    public static parseJson( json : any ) {\r\n\r\n        let data = CfgDailyCheckin.data ; \r\n\r\n        for( let i = 0 ; i < json.length ; ++i ) {\r\n\r\n            let row = json[ i ] ;\r\n\r\n            let id = row[ \"Id\" ] ;\r\n            if( id == null || id == \"\" ) continue ; \r\n            \r\n            let cfgItem = new Array< ItemData >() ;\r\n            data.push( cfgItem ) ; \r\n\r\n            let str : string = null ; \r\n\r\n            // 遍历列\r\n            for( let i = 1 ; ; ++i ) {\r\n                \r\n                let key = \"Item\" + i ; \r\n                str = row[ key ] ;\r\n                if( str == \"\" || str == null ) break ;\r\n\r\n                let itemData = new ItemData() ; \r\n                cfgItem.push( itemData ) ; \r\n                itemData.id = str.trim() ; \r\n\r\n                key = \"Item1Count\" ; \r\n                itemData.count = Number( row[ key ] ) ; \r\n\r\n\r\n            } // end for\r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n}","import { _decorator, Component, Node } from 'cc';\n\nconst { ccclass, property } = _decorator;\n\n\nexport class CfgDaySign {\n\n    public id : string ;\n\n    public DayGifts: Array<number> = new Array<number>();\n}\n\nexport class CfgDaySignMgr {\n\n    public static data = new Map<string, CfgDaySign>();\n}\n\nexport class CfgDaySignParser {\n\n    public static parseJson(json: any) {\n        for (let i = 0; i < json.length; ++i) {\n\n            let row = json[i];\n\n            let id = row[\"Id\"];\n            if (id == null || id == \"\") continue;\n\n            let cfgItem = new CfgDaySign();\n\n            CfgDaySignMgr.data.set(id, cfgItem);\n            cfgItem.id = id;\n\n            let str = row[\"DayGifts\"];\n\n            if (str && typeof str === \"string\") {\n                let strs = str.split(/[|\\n]/);\n                for (let s of strs) {\n                    let num = Number(s.trim());\n                    if (!isNaN(num)) {\n                        cfgItem.DayGifts.push(num);\n                    }\n                }\n            }\n        }\n    }\n}\n\n\n","\n\n\nexport class CfgFarm {\n\n    public static data = new Array< CfgFarmItem >() ; \n\n}\n\nexport class CfgFarmItem {\n\n    public id : number ; \n    public unlock_level: number;\n}\n\n\nexport class CfgFarmParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            let unlock_level = row[\"UnlockLevel\"];\n            if (unlock_level == null || unlock_level == \"\") continue;\n            \n            let cfgItem = new CfgFarmItem() ;\n            cfgItem.id = id;\n            cfgItem.unlock_level = unlock_level;\n            CfgFarm.data.push( cfgItem ) ; \n\n            cfgItem.id = id ; \n            \n\n        } // endf\n    }\n\n}","import { AffixType } from \"../../Game/World/1.Base/Buff/Affix\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\n\n\nexport class CfgFeature {\n\n    public static data = new Array< CfgFeatureItem >() ; \n\n}\n\nexport class CfgFeatureItem {\n\n    public id : string ; \n\n}\n\n\nexport class CfgFeatureParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgFeatureItem() ;\n            CfgFeature.data.push( cfgItem ) ; \n\n            cfgItem.id = id ; \n\n\n        } // endf\n\n    }\n\n}","import { AffixType } from \"../../Game/World/1.Base/Buff/Affix\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\n\n\nexport class CfgGameBagTrayAricleGen {\n\n    // 上阵的\n    public static data = new Map< string , CfgGameBagTrayAricleGenItem >() ; \n\n    // 公共的条目\n    public static common = Array< CfgGameBagTrayAricleGenItem >() ;\n\n}\n\nexport class CfgGameBagTrayAricleGenItem {\n\n    public id : string ; \n\n    // public isCommon = false ; \n\n    // 本条目的概率权重\n    public pw : number ; \n\n    public grade : Array< number > ; \n\n}\n\n\nexport class CfgGameBagTrayAricleGenParser {\n\n    public static parseJson( json : any ) {\n\n        let str : string = null ; \n        \n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgGameBagTrayAricleGenItem() ;\n\n            str = row[ \"isCommon\" ] ; \n            if( str != null && str != \"\" ) {\n                CfgGameBagTrayAricleGen.common.push( cfgItem ) ;\n            }\n            else {\n                CfgGameBagTrayAricleGen.data.set( id , cfgItem ) ; \n            }\n\n            cfgItem.id = id ;\n\n            cfgItem.pw = Number( row[ \"Weight\" ] ) ; \n\n            // 等级\n            cfgItem.grade = new Array< number >() ; \n            for( let i = 1 ; i < 10 ; ++i ) {\n                let key = \"MergeGrade\" + i ; \n                let str = row[ key ] ; \n                let p = 0 ; \n                if( str != null && str != \"\" ) {\n                    p = Number( str ) ;\n                }\n                cfgItem.grade.push( p ) ; \n                \n            }\n\n\n        } // endf\n\n    }\n\n}","\nexport class CfgGeneral {\n\n    public static ins = new CfgGeneral() ;\n\n    // 背包 初始上阵物件\n    public BagInitDeployedIds = new Array< string >() ; \n\n    // 背包 初始获得的物件\n    public BagInitUnlockedIds = new Array< string >() ; \n\n    // 背包 所有物件\n    public BagAllArticleIds = new Array< string >() ; \n\n}\n\nexport class CfgGeneralParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] as string ;\n            if( id == null || id == \"\" ) continue ; \n            let val = row[ \"Val\" ] as string ; \n\n            switch( id ) {\n\n                case \"BagInitDeployedIds\" : {\n                    let strs = val.split( \",\" ).filter(Boolean) ; \n                    CfgGeneral.ins.BagInitDeployedIds.push( ... strs ); \n                }\n                break ; \n\n                case \"BagInitUnlockedIds\" : {\n                    let strs = val.split( \",\" ).filter(Boolean) ; \n                    CfgGeneral.ins.BagInitUnlockedIds.push( ... strs ); \n                }\n                break ; \n\n                case \"BagAllArticleIds\" : {\n                    let strs = val.split( \",\" ).filter(Boolean);\n                    CfgGeneral.ins.BagAllArticleIds.push( ... strs ); \n                }\n                break ; \n\n            }\n\n\n\n        } // endf\n\n    }\n\n}","import { _decorator, Component, Node } from 'cc';\n\nconst { ccclass, property } = _decorator;\n\nexport class CfgGiftGroup{\n\n    //ItemNum物品ID Num物品数量\n    public Id:string;\n\n    public ItemsId:Array<number>=new Array<number>();\n\n    public ItemsNum:Array<number>=new Array<number>();\n}\n\nexport class CfgGiftGroupMgr{\n    public static data:Map< string , CfgGiftGroup > = new Map< string , CfgGiftGroup >() ;\n\n}\n\nexport class CfgGiftGroupParser{\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) return ; \n            \n            let cfgItem = new CfgGiftGroup() ;\n\n            CfgGiftGroupMgr.data.set( id , cfgItem ) ;\n\n            cfgItem.Id = id ;\n\n            // let str : string = null ; \n\n            let str= row[\"ItemsId\"];\n            if(str!=null&&typeof str===\"number\"){\n                cfgItem.ItemsId.push(Number(str));\n            }\n            if (str !=\"\"&&typeof str===\"string\") {\n                let strs = str.split( /[|\\n]/ ) ;\n                for(let s in strs){\n                    let num = Number(s);\n                    cfgItem.ItemsId.push(num);\n                }     \n            }\n\n\n            str = row[\"ItemsNum\"];\n            if(str!=null&&typeof str===\"number\"){\n                cfgItem.ItemsNum.push(Number(str));\n            }\n            if (str !=\"\") {\n                let strs = str.split( /[|\\n]/ ) ;\n                cfgItem.ItemsNum.push(...strs.map(str => Number(str)));\n            }\n        } \n\n    }\n}\n\n\n","import { _decorator, Component, Node } from 'cc';\n\nexport class CfgInviteConfig{\n\n    public Id:string;\n    //邀请人数\n    public InviteCount:number;\n    //礼包ID\n    public GiftID:string;\n\n}\n\n\nexport class CfgInviteConfigMgr{\n    public static data:Map<string , CfgInviteConfig> = new Map<string , CfgInviteConfig>() ;\n\n}\n\nexport class CfgInviteConfigParser{\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) return ; \n            \n            let cfgItem = new CfgInviteConfig() ;\n\n            CfgInviteConfigMgr.data.set( id , cfgItem ) ;\n\n            cfgItem.Id = id ;\n\n            let str : string = null ; \n            cfgItem.InviteCount=Number(row[ \"InviteCount\" ]);\n\n            cfgItem.GiftID=row[ \"GiftID\" ];\n   \n        } \n\n    }\n}\n\n","import { _decorator, Component, Node } from 'cc';\nimport { ItemType } from '../Item/ItemType';\n\n\n\nexport class CfgItem{\n\n    // ID \n    public id : string;\n\n    // 品质\n    public quality : number;\n\n}\n\nexport class CfgItemMgr{\n\n    public static data = new Map< string , CfgItem >() ;\n\n}\n\nexport class CfgItemParser{\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgItem() ;\n\n            CfgItemMgr.data.set( id , cfgItem ) ;\n\n            cfgItem.id = id ;\n\n            let str : string = null ; \n\n            str = row[ \"Quality\" ] ; \n            if( str != null && str != \"\" ) {\n\n                cfgItem.quality = Number(str) ; \n\n            }\n\n        } \n\n    }\n}\n\n","\n// 物品抽取配置\nexport class CfgItemDraw {\n\n    public static data = new Map< string , CfgItemDrawItem >() ; \n\n}\n\nexport class CfgItemDrawItem {\n\n    public id : string ; \n\n    public min = 0 ; \n\n    public max = 0 ;\n\n    public items = new Array< CfgItemDrawItemItem >() ;\n\n}\n\n\nexport class CfgItemDrawItemItem {\n\n    // 物件ID\n    public id : string = null ; \n\n    // 抽取权重\n    public w = 0 ; \n\n}\n\nexport class CfgItemDrawParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgItemDrawItem() ;\n\n            CfgItemDraw.data.set( id , cfgItem ) ;\n\n            cfgItem.id = id ;\n            cfgItem.min = Number(row[\"Min\"]) ; \n            cfgItem.max = Number(row[\"Max\"]) ; \n\n            for( let i = 1 ; ; ++i ) {\n\n                let key = \"Item\" + i ;\n                let str = row[ key ] as string ; \n                if( str == null || str == \"\" ) break ; \n\n                let strs = str.split( \",\" ) ; \n                if( strs.length < 2 ) continue ; \n\n                let cfgItemItem = new CfgItemDrawItemItem() ; \n                cfgItem.items.push( cfgItemItem ) ; \n                cfgItemItem.id = strs[ 0 ].trim() ; \n                cfgItemItem.w = Number( strs[ 1 ] ) ; \n\n            } // end for\n\n        } // end for\n\n    }\n\n}","import { _decorator, Component, Node } from 'cc';\r\nimport { ItemData } from '../Item/ItemData';\r\n\r\n\r\nexport class CfgItemRewardMgr{\r\n\r\n    public static data = new Map< string , CfgItemRewardItem >() ;\r\n\r\n}\r\n\r\nexport class CfgItemRewardItem {\r\n\r\n    // ID \r\n    public id : string;\r\n\r\n    // 物品列表\r\n    public list = new Array< ItemData > ;\r\n\r\n}\r\n\r\n\r\nexport class CfgItemRewardParser{\r\n\r\n    public static parseJson( json : any ) {\r\n\r\n        for( let i = 0 ; i < json.length ; ++i ) {\r\n\r\n            let row = json[ i ] ;\r\n\r\n            let id = row[ \"Id\" ] ;\r\n            if( id == null || id == \"\" ) continue ; \r\n            \r\n            let cfgItem = new CfgItemRewardItem() ;\r\n\r\n            CfgItemRewardMgr.data.set( id , cfgItem ) ;\r\n\r\n            cfgItem.id = id ;\r\n\r\n            let str : string = null ; \r\n\r\n            for( let i = 1 ; i < 20 ; ++i ) {\r\n                \r\n                let key = \"Item\" + i ; \r\n                str = row[ key ] ;\r\n                if( str == \"\" || str == null ) break ;\r\n\r\n                let strs = str.split( \",\" ) ; \r\n                let itemData = new ItemData() ; \r\n                cfgItem.list.push( itemData ) ; \r\n                itemData.id = strs[ 0 ].trim() ; \r\n                itemData.count = Number( strs[ 1 ] ) ; \r\n\r\n            } // end for\r\n\r\n        } // end for\r\n\r\n    }\r\n}\r\n\r\n","\r\n\r\nexport class CfgLevelGeneralMgr {\r\n\r\n    public static data = new Map< string , CfgLevelGeneralItem >() ; \r\n\r\n}\r\n\r\n// 一关的数据\r\nexport class CfgLevelGeneralItem {\r\n\r\n    // 关卡ID\r\n    public id : string ; \r\n\r\n    // 地图ID\r\n    public mapId : string ; \r\n\r\n\r\n}\r\n\r\n// 波数据管理器解析器\r\nexport class CfgLevelGeneralParser {\r\n\r\n    public static parseJson( json : any ) {\r\n\r\n        let data = CfgLevelGeneralMgr.data ; \r\n\r\n        for( let i = 0 ; i < json.length ; ++i ) {\r\n            let row = json[ i ] ;\r\n\r\n            let id = row[ \"Id\" ].toString() ;\r\n            if( id == null || id == \"\" ) continue ; \r\n\r\n            // let levelIdx = Number( levelId ) ; \r\n            let cfgItem = new CfgLevelGeneralItem() ; \r\n            data.set( id , cfgItem ) ;\r\n            cfgItem.id = id ; \r\n\r\n            cfgItem.mapId = row[ \"MapId\" ] ; \r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n}","import { StringUtil } from \"../../../../SL/Common/StringUtil\";\nimport { FrameSecConvert } from \"../../../../Common/Misc/FrameSecConvert\";\n\n// 关卡配置 波次 出怪\nexport class CfgLevelWaveMgr {\n\n    // 所有的关卡数据\n    public static data = new Map< string , LevelData >() ; \n\n    // 主线的关卡数据\n    public static main = Array< LevelData >( null ) ;\n\n}\n\n// 一关的数据\nexport class LevelData {\n\n    public id : string ; \n\n    // 所有波次\n    public waves = new Array< WaveData >( null ) ; \n\n}\n\n// 一波的数据\nexport class WaveData {\n\n    // 一波通过之后的奖励\n    public rewards = new Array< string >() ; \n\n    // 一波所有的事件项\n    public items = new Array< WaveItem >() ; \n \n}\n\n// 波的事件项\nexport class WaveItem {\n\n    // 触发的时间\n    public triggerTime : number ; \n\n    // 要生成的角色的ID\n    public genRoleId : string ; \n\n   \n    // 血量系数\n    public hpMaxFactor = 1 ; \n \n    // 攻击力系数\n    public attackFactor = 1 ; \n\n}\n\n\n// 波数据管理器解析器\nexport class CfgLevelWaveParser {\n\n    public static parseJson( json : any ) {\n\n        let data = CfgLevelWaveMgr.data ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let levelId = row[ \"Id\" ].toString() ;\n            if( levelId == null || levelId == \"\" ) continue ; \n\n            // let levelIdx = Number( levelId ) ; \n\n            let levelData = data.get( levelId ) ;\n            if( levelData == null ) {\n                levelData = new LevelData() ; \n                levelData.id = levelId ; \n                data.set( levelId , levelData );\n            }\n\n            let wave = this.parseWave( row ) ; \n            levelData.waves.push( wave ) ; \n\n        } // end for\n\n        // 选出主线任务的条目\n        for( let i = 1 ; ; ++i ) {\n\n            let id = i.toString() ;\n\n            let levelData = data.get( id ) ;\n            if( levelData == null ) break ; \n\n            CfgLevelWaveMgr.main.push( levelData ) ; \n\n        } // end for\n\n    }\n\n    // 解析一波的数据\n    private static parseWave( row : any ) : WaveData {\n\n        let wave = new WaveData() ; \n\n        let hpMaxFactor = 1 ;\n        let str = row[ \"HpMaxFactor\" ] ; \n        if( str != null && str != \"\" ) {\n            hpMaxFactor = Number( str ) ; \n        }\n\n        let attackFactor = 1 ; \n        str = row[ \"AttackFactor\" ] ; \n        if( str != null && str != \"\" ) {\n            attackFactor = Number( str ) ; \n        }\n\n        for( let i = 1 ; ; ++i ) {\n\n            // 角色ID\n            let keyId = \"G\" + i + \"_Id\" ; \n            let id = row[ keyId ] as string ; \n            if( id == null || id == \"\" ) break ;\n            \n            // 延迟时间\n            let keyDelay = \"G\" + i + \"_Delay\" ; \n            str = row[ keyDelay ] ; \n            let delay = FrameSecConvert.toFrame( Number( str ) ) ;\n\n            // 数量\n            let key = \"G\" + i + \"_Count\" ; \n            str = row[ key ] ; \n            let count = Number( str ) ; \n \n            // 间隔\n            key = \"G\" + i + \"_Interval\" ; \n            str = row[ key ] ; \n            let interval = FrameSecConvert.toFrame( Number( str ) ) ;\n\n            for( let i = 0 ; i < count ; ++i ) {\n\n                let item = new WaveItem() ; \n                wave.items.push( item ) ; \n\n                item.genRoleId = id ; \n                item.triggerTime = delay + i * interval ; \n                item.hpMaxFactor = hpMaxFactor ; \n                item.attackFactor = attackFactor ; \n\n            } // end for\n\n\n        } // end for\n\n        // 按照时间进行排序\n        wave.items.sort( ( a , b )=>{\n            if( a < b ) return -1;\n            else if( a > b  ) return 1 ;\n            return 0 ; \n        } )\n\n        return wave ; \n\n    }\n\n    \n\n}","import { JsonAsset, resources } from \"cc\";\nimport { CfgLevelWaveParser } from \"../../Game/World/2.Td/Level/CfgLevelWaveMgr\";\nimport { CfgArticleParser } from \"./CfgArticle\";\nimport { CfgArticleGradeParser } from \"./CfgArticleGrade\";\nimport { CfgArticleUnlockParser } from \"./CfgArticleUnlock\";\nimport { CfgBuffParser } from \"./CfgBuff\";\nimport { CfgBulletParser } from \"./CfgBullet\";\nimport { CfgDaySignParser } from \"./CfgDaySign\";\nimport { CfgFeatureParser } from \"./CfgFeature\";\nimport { CfgGameBagTrayAricleGenParser } from \"./CfgGameBagTrayAricleGen\";\nimport { CfgGeneralParser } from \"./CfgGeneral\";\nimport { CfgGiftGroupParser } from \"./CfgGiftGroup\";\nimport { CfgInviteConfigParser } from \"./CfgInviteConfig\";\nimport { CfgItemParser } from \"./CfgItem\";\nimport { CfgItemDrawParser } from \"./CfgItemDraw\";\nimport { CfgRoleParser } from \"./CfgRole\";\nimport { CfgShapeParser } from \"./CfgShape\";\nimport { CfgUpgradeParser } from \"./CfgUpgrade\";\nimport { CfgFarmParser } from \"./CfgFarm\";\nimport { CfgMushroomParser } from \"./CfgMushrom\"\nimport { CfgLevelGeneralParser } from \"../../Game/World/2.Td/Level/CfgLevelGeneralMgr\";\nimport { Prefab } from \"cc\";\nimport { LoaderResources } from \"../Loader/LoaderResources\";\nimport { CfgItemRewardParser } from \"./CfgItemReward\";\nimport { CfgDailyCheckinParser } from \"../../Home/Ui/Popup/DailyCheckin/CfgDailyCheckin\";\nimport { CfgShopParser } from \"../../Home/Ui/Main/Page/Shop/CfgShop\";\nimport { assetManager } from \"cc\";\nimport { LoaderRemote } from \"../Loader/LoaderRemote\";\nimport { LoaderBase } from \"../Loader/LoaderBase\";\n\n// 配置载入\nexport class CfgLoad {\n\n    public exe( onComplete : ()=>void ) {\n\n        // 只执行一次\n        if( this.flag == true ) {\n            onComplete() ; \n            return ; \n        }\n        this.flag = false ;        \n\n        // 从 resources 载入\n        // this.pathMode = 1 ; \n        // let loader = new LoaderResources() ; \n        // loader.onComplete = onComplete ;\n        \n        // 从 远程 阿里 oss 载入\n        this.pathMode = 2 ; \n        let loader = new LoaderRemote() ; \n        loader.onComplete = onComplete ;\n\n\n        this.common( loader ) ;\n        this.home( loader ) ;\n        this.game( loader ) ; \n\n        loader.exe( ) ;\n\n    }\n\n    /*\n        1 Resources 路径，\n        2 远程 URL\n    */ \n    private pathMode = 1 ;\n\n    // 取得实际的载入ID\n    private getPath( key : string ) {\n\n        let ret = key ; \n        switch( this.pathMode ) {\n            case 1 : {\n                ret = \"Common/Cfg/\" + key ;\n            }\n            break ; \n\n            case 2 : {\n                ret = \"https://bagtd.oss-cn-beijing.aliyuncs.com/test001/\" + key + \".json\" ;\n            }\n            break ; \n        }\n\n        return ret ; \n        \n\n    }\n\n    // 公共\n    private common( loader : LoaderBase ) {\n\n        loader.add( this.getPath( \"General\" ) , ( data : JsonAsset )=>{\n            CfgGeneralParser.parseJson( data.json ) ;\n        } ) ;\n\n        // 物品 定义\n        loader.add( this.getPath( \"Item\" ) , ( data : JsonAsset )=>{\n            CfgItemParser.parseJson( data.json ) ;\n        } ) ;\n\n        // 物品 抽取\n        loader.add( this.getPath( \"ItemDraw\" ) , ( data : JsonAsset )=>{\n            CfgItemDrawParser.parseJson( data.json ) ;\n        } ) ;\n\n\n    }\n\n    // 大厅\n    private home( loader : LoaderBase ) {\n\n        // 装备解锁\n        loader.add( this.getPath( \"ArticleUnlock\" ) , ( data : JsonAsset )=>{\n            CfgArticleUnlockParser.parseJson( data.json ) ;\n        } ) ;\n\n        // 物品奖励表\n        loader.add( this.getPath( \"ItemReward\" ) , ( data : JsonAsset )=>{\n            CfgItemRewardParser.parseJson( data.json ) ;\n        } ) ;\n        \n        // 签到\n        loader.add( this.getPath( \"DailyCheckin\" ) , ( data : JsonAsset )=>{\n            CfgDailyCheckinParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Shop\" ) , ( data : JsonAsset )=>{\n            CfgShopParser.parseJson( data.json ) ;\n        } ) ;\n\n        \n\n    }\n\n    // 核心玩法\n    private game( loader : LoaderBase ) {\n\n        // 关卡\n        loader.add( this.getPath( \"LevelGeneral\" ) , ( data : JsonAsset )=>{\n            CfgLevelGeneralParser.parseJson( data.json ) ;\n        } ) ;\n\n        // 关卡 波次\n        loader.add( this.getPath( \"LevelWave\" ) , ( data : JsonAsset )=>{\n            CfgLevelWaveParser.parseJson( data.json ) ;\n        } ) ;\n\n        // 装备\n        loader.add( this.getPath( \"Article\" ) , ( data : JsonAsset )=>{\n            CfgArticleParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Bullet\" ) , ( data : JsonAsset )=>{\n            CfgBulletParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Role\" ) , ( data : JsonAsset )=>{\n            CfgRoleParser.parseJson( data.json ) ; \n        } ) ;\n\n        loader.add( this.getPath( \"Upgrade\" ) , ( data : JsonAsset )=>{\n            CfgUpgradeParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Feature\" ), ( data : JsonAsset )=>{\n            CfgFeatureParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Buff\" ) , ( data : JsonAsset )=>{\n            CfgBuffParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"Shape\" ) , ( data : JsonAsset )=>{\n            CfgShapeParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"ArticleGrade\" ) , ( data : JsonAsset )=>{\n            CfgArticleGradeParser.parseJson( data.json ) ;\n        } ) ;\n\n        loader.add( this.getPath( \"GameBagTrayAricleGen\" ) , ( data : JsonAsset )=>{\n            CfgGameBagTrayAricleGenParser.parseJson( data.json ) ;\n        } ) ;\n\n\n    }\n\n    // 执行标记\n    public flag = false ; \n\n}\n\n\n\n","\n\n\nexport class CfgMushroom {\n\n    public static data = new Map<number, CfgMushroomItem >() ; \n\n}\n\nexport class CfgMushroomItem {\n\n    public id : Number ; \n    public name: string;\n}\n\n\nexport class CfgMushroomParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            let name = row[\"Name\"];\n            if (name == null || name == \"\") continue;\n            \n            let cfgItem = new CfgMushroomItem() ;\n            cfgItem.id = id;\n            cfgItem.name = name;\n            CfgMushroom.data.set(id, cfgItem ) ; \n\n            cfgItem.id = id ; \n\n\n        } // endf\n\n\n    }\n\n}","import { FrameSecConvert } from \"../Misc/FrameSecConvert\";\n\nexport class CfgRole {\n\n    public static data = new Map< string , CfgRoleItem >() ;  \n\n}\n\nexport class CfgRoleItem {\n\n    public id : string ; \n\n    // 视图ID\n    public viewId : string ; \n\n    // 原始数据\n    public dataOrig : any ; \n\n    // 攻击相关——————————————————\n\n    // 攻击伤害\n    public attackDamage : number ; \n    // 攻击CD\n    public attackCd : number ; \n\n\n    // 移速\n    public moveSpeed : number ; \n\n    // 携带的经验值\n    public exp : number ; \n\n    // 生命最大值\n    public lifeHpMax : number ; \n\n    // 血条 ID\n    public hpBarId : string = null ; \n\n}\n\nexport class CfgRoleParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            let cfg = new CfgRoleItem() ; \n\n            cfg.id = id ; \n\n            CfgRole.data.set( id , cfg ) ; \n\n            let str = row[ \"View\" ] ;\n            if( str != null && str != \"\" ) {\n                cfg.viewId = str ;\n            }\n\n            cfg.dataOrig = row ; \n            \n            cfg.moveSpeed = FrameSecConvert.toSecond( Number( row[ \"MoveSpeed\" ] ) ) ; \n\n            cfg.exp = Number( row[ \"Exp\" ] ) ;\n\n            cfg.lifeHpMax = Number( row[ \"LifeHpMax\" ] ) ; \n\n            str = row[ \"AttackDamage\" ] ; \n            if( str != null && str != \"\" ) {\n                cfg.attackDamage = Number( str ) ;\n            }\n\n            str = row[ \"AttackCd\" ] ; \n            if( str != null && str != \"\" ) {\n                cfg.attackCd = FrameSecConvert.toFrame( Number( str ) ) ;\n            }\n\n            str = row[ \"HpBarId\" ] ; \n            if( str != null && str != \"\" ) {\n                cfg.hpBarId = str ; \n            }\n\n        } // end for\n\n    }\n\n}","import { Vec2 } from \"cc\";\nimport { TileShapeDataParser } from \"./TileShapeDataParser\";\n\nexport class CfgShape {\n\n    public static data = new Map< string , CfgShapeItem >() ; \n\n}\n\nexport class CfgShapeItem {\n\n    public id : string ; \n\n    // 形状的字符串表示\n    public str : string ; \n\n    // 形状的数据表示\n    public coords : Array< Vec2 > ; \n\n}\n\n// 解析器\nexport class CfgShapeParser {\n\n    public static parseJson( json : any ) {\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n            \n            let cfgItem = new CfgShapeItem() ;\n            CfgShape.data.set( id , cfgItem ) ;\n            cfgItem.id = id ;\n\n            cfgItem.str = row[ \"Shape\" ] ; \n\n            cfgItem.coords = TileShapeDataParser.exe( cfgItem.str ) ; \n\n\n        } // endf\n\n    }\n\n}\n","import { ItemData } from \"db://assets/Script/Common/Item/ItemData\";\nimport { ItemType } from \"db://assets/Script/Common/Item/ItemType\";\n\nexport class CfgShop {\n\n    public static data = new Map< string , CfgShopItem > ; \n\n    // 每日 固定的\n    public static daliyFixed = new Array< CfgShopItem >() ; \n    // 每日 随机池\n    public static daliy = new Array< CfgShopItem >() ; \n\n    // 金币\n    public static money001 = new Array< CfgShopItem >() ; \n\n}\n\nexport class CfgShopItem {\n\n    public id : string ; \n\n    // 条目语言表Key\n    public nameLangId : string ; \n\n    // 目标物品\n    public target : ItemData ; \n\n    // 花费\n    public cost : ItemData ; \n\n    // 广告 每日限制的ID\n    public adDaliyLimitId : string = null ; \n    // 每日限制总数\n    public adDaliyLimitTotal = 0 ; \n\n}\n\nexport class CfgShopParser {\n\n    public static parseJson( json : any ) {\n\n        let data = CfgShop.data ; \n\n        for( let i = 0 ; i < json.length ; ++i ) {\n\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            let item = new CfgShopItem() ; \n            data.set( id , item )  ; \n\n            item.id = id ; \n\n            item.nameLangId = row[ \"NameLangId\" ] ; \n\n            item.target = new ItemData( ) ; \n            item.target.id = row[ \"ItemId\" ] ; \n            item.target.count = Number( row[ \"ItemCount\" ] ) ; \n            \n            item.cost = new ItemData( ) ; \n            item.cost.id = row[ \"CostItemId\" ] ; \n            item.cost.count = Number( row[ \"CostItemCount\" ] ) ; \n\n            let str = row[ \"AdDaliyLimitId\" ] ; \n            if( str != null && str != \"\" ) {\n\n                item.adDaliyLimitId = str ; \n\n                str = row[ \"AdDaliyLimitTotal\" ] ; \n                item.adDaliyLimitTotal = Number( str ) ; \n\n            }\n\n            // 分类\n            if( id.startsWith( \"Money001\" ) ) {\n                CfgShop.money001.push( item ) ;\n            }\n            else if( id.startsWith( \"DaliyFixed\" ) ) {\n                CfgShop.daliyFixed.push( item ) ;\n            }\n            else if( id.startsWith( \"Daliy\" ) ) {\n                CfgShop.daliy.push( item ) ;\n            }\n            \n\n        } // end for\n\n    }\n\n}","\nimport { AttackTargetSelectionType } from \"../../Game/World/1.Base/Tower/Entity/AttackCom\";\nimport { FrameSecConvert } from \"../Misc/FrameSecConvert\";\nimport { SliderJoint2D } from \"cc\";\n\n// 塔的配置\nexport class CfgTowerItem {\n\n    // 子弹ID\n    public atkBulletId : string ; \n\n    // 攻击力\n    public atkDamage : number = 0 ; \n\n    // 攻击CD\n    public atkCd : number = 0 ; \n\n    // 暴击概率\n    public atkCritProbability : number = 0 ; \n    // 暴击倍数。\n    public atkCritMultiple : number = 2 ; \n\n    // 攻击目标\n    public atkTargeSelType = AttackTargetSelectionType.None ; \n\n    // 子弹散射数量\n    public atkBulletScatterCount = 0 ; \n\n    // 附带的Buff\n    public buffs = new Array< string >() ; \n\n\n}\n\n\nexport class CfgTowerParser {\n\n    public static parseTowerItem( cfgItem : CfgTowerItem , row : any ) {\n\n        let str : string ; \n\n        str = row[ \"AttackBulletId\" ] ; \n        if(str != null && str != \"\" ) {\n            cfgItem.atkBulletId = str ; \n        }\n\n        str = row[ \"AttackValue\" ] ; \n        if(str != null && str != \"\" ) {\n            cfgItem.atkDamage = Number( str ) ; \n        }\n        \n        str = row[ \"AttackCd\" ] ; \n        if(str != null && str != \"\" ) {\n            cfgItem.atkCd = FrameSecConvert.toFrame( Number( str ) ) ; \n        }\n        \n        // 目标选择\n        str = row[ \"AttackTargetSelectionType\" ] ; \n        if( str != null && str != \"\" ) {\n            cfgItem.atkTargeSelType = str as AttackTargetSelectionType ; \n        }\n        else {\n            cfgItem.atkTargeSelType = AttackTargetSelectionType.First ; \n        }\n\n        str = row[ \"AttackCritProb\" ] ; \n        if( str != null && str != \"\" ) {\n            cfgItem.atkCritProbability = Number( str ) * 100 ; \n        }\n        str = row[ \"AttackCritMultiple\" ] ; \n        if( str != null && str != \"\" ) {\n            cfgItem.atkCritMultiple = Number( str ) ; \n        }\n        \n        str = row[ \"AttackBulletScatterCount\" ] ; \n        if( str != null && str != \"\" ) {\n            cfgItem.atkBulletScatterCount = Number( str ) ; \n        }\n\n        str = row[ \"Buffs\" ] ; \n        if( str != null && str != \"\" ) {\n            let strs = str.split( /[,\\n]/ ) ;\n            for( let i = 0 ; i < strs.length ; ++i ) {\n                let str2 = strs[ i ] ;\n                cfgItem.buffs.push( str2.trim() ) ;\n            } // end for\n            \n        }\n\n\n\n    }\n\n}","\n// 升级表\nexport class CfgUpgrade {\n\n    public static data = new Array< number >( ) ;   \n\n}\n\nexport class CfgUpgradeParser {\n\n    public static parseJson( json : any ) {\n        \n        // 从1开始\n        CfgUpgrade.data.push( 0 ) ;\n\n        for( let i = 0 ; i < json.length ; ++i ) {\n            let row = json[ i ] ;\n\n            let id = row[ \"Id\" ] ;\n            if( id == null || id == \"\" ) continue ; \n\n            CfgUpgrade.data.push( Number( row[ \"Exp\" ] ) ) ;\n\n        } // end for\n\n    }\n\n}","import { sys } from \"cc\";\nimport { ChannelType } from \"./ChannelType\";\nimport { InitWx } from \"../InitWx\";\nimport { InitTt } from \"../InitTt\";\n\n\nexport class Channel {\n\n    public static type : ChannelType ; \n\n}\n\n// 平台渠道初始化\nexport class ChannelInit {\n\n    public static exe() {\n\n        this.setChannelType() ; \n\n        // 测试\n        // Channel.type = ChannelType.Minigame_ByteDance ; \n        \n        switch( Channel.type ) {\n            case ChannelType.Minigame_ByteDance : {\n                \n                // let appCfg = AppConfig.ins ; \n                // appCfg.addToDesktopEnabled = false ; \n\n            }\n            break ;\n        }\n\n    }\n\n    // 设置渠道值\n    public static setChannelType() {\n\n        Channel.type = ChannelType.None ; \n\n        // switch 先判断平台，防止设置出错。\n        switch( sys.platform ) {\n\n            // 安卓\n            case sys.Platform.ANDROID : {\n\n                Channel.type = ChannelType.XiaoMi ; \n                \n            }\n            break ; \n\n            // 微信\n            case sys.Platform.WECHAT_GAME : {\n\n            }\n            break ; \n\n            // 抖音\n            case sys.Platform.BYTEDANCE_MINI_GAME : {\n\n                Channel.type = ChannelType.Minigame_ByteDance ; \n\n            }\n            break ; \n\n        }\n\n\n    }\n\n}\n\n","\n\nexport enum ChannelType {\n\n    None = \"None\" , \n\n    // 出海 Google Play\n    GooglePlay = \"GooglePlay\" , \n\n    // 国内 安卓 小米\n    XiaoMi = \"XiaoMi\" , \n\n    // 小游戏 抖音\n    Minigame_ByteDance = \"Minigame_ByteDance\" , \n\n    // 小游戏 微信 我的\n    Minigame_Wx_Mine = \"Minigame_Wx_Mine\" , \n\n    // 小游戏 微信 刘会涛的\n    Minigame_Wx_LHT = \"Minigame_Wx_LHT\" , \n\n}\n","import { CircleCollider2D, Collider2D, Contact2DType, director, instantiate, IPhysics2DContact, isValid, randomRangeInt, tween, UITransform, Vec3 } from \"cc\";\nimport { Bullet, Sender } from \"../Bullet/Bullet\";\nimport { Role } from \"../Role/Base/Role\";\nimport { BulletMgr } from \"../Bullet/BulletMgr\";\nimport { DamageValueShow, RoleGetDamage } from \"../Role/Misc/RoleGetDamage\";\nimport { RoleMgr } from \"../Role/Base/RoleMgr\";\nimport { BulletMoveCalc } from \"../Bullet/BulletMoveCalc\";\nimport { BuffOp } from \"../Buff/BuffOp\";\nimport { FrameSecConvert } from \"../../../../Common/Misc/FrameSecConvert\";\nimport { RoleMoveSys } from \"../Role/Misc/RoleMoveSys\";\nimport { PlayerRole } from \"../../2.Td/Player/PlayerRole\";\nimport { AffixType } from \"../Buff/Affix\";\nimport { CfgBuff, CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { BulletFactory } from \"../Bullet/BulletFactory\";\nimport { WorldNode } from \"../Support/Misc/WorldNode\";\nimport { EffectFactory } from \"../../../Bag/Merge/EffectFactory\";\nimport { FrameCall, FrameCallDataItem } from \"../Support/Misc/FrameCall\";\nimport { BulletPfMgr } from \"../Bullet/BulletPfMgr\";\nimport { RoleAttributeUpdate } from \"../Role/Misc/RoleAttributeUpdate\";\nimport { BuffIncreaseCalc, DataIncrease } from \"../Buff/BuffIncreaseCalc\";\n\n\n\n\n// 碰撞 角色 子弹\nexport class CollisionBullet {\n\n    public static onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n\n        let bullet = selfCollider[ \"Bullet\" ] ; \n\n        let role = otherCollider[ \"Role\" ] ; \n        if( role != null ) {\n            this.bulletAndRole( bullet , role ) ;\n        }\n\n    }\n\n    public static bulletAndRole( bullet : Bullet , role : Role ) {\n\n        console.log( \"子弹击中角色\" );\n\n        // 击中目标后，丢失目标\n        if( bullet.target.targetRole == role ) {\n            bullet.target.targetRole = null ; \n        }\n\n        // 添加buff\n        this.buff( bullet , role ) ; \n\n        // 计算伤害值\n        this.damage( bullet , role ) ; \n\n        // 敌人弹射\n        this.bounce( bullet , role ) ; \n\n        // 处理穿透\n        this.pass( bullet ) ; \n\n    }\n\n    // 处理穿透\n    public static pass( bullet : Bullet ) {\n\n        bullet.passCount-- ; \n        if( bullet.passCount < 0 ) {\n            bullet.life.hp.current = 0 ; \n        }\n\n    }\n\n\n    // 造成伤害\n    private static damage( bullet : Bullet , role : Role ) {\n\n        // 计算伤害值\n        let d = bullet.damge ; \n\n        // 暴击属性\n        let d2 = this.crit( bullet ) ;\n        let hasCrit = d2 != d ;\n        d = d2 ; \n\n        // 角色受到伤害\n        RoleGetDamage.exe( role , d , !hasCrit , bullet.sender ) ; \n\n        if( hasCrit ) {\n            // 显示暴击的数值\n            DamageValueShow.crit( role.view.root.worldPosition.clone().add3f( 0 , 50 , 0 ) , d ) ;\n        }\n\n        // \n        this.lifeStealing( bullet , d ) ;\n\n    }\n\n    // 处理暴击。返回伤害值\n    private static crit( bullet : Bullet ) : number {\n\n        let d = bullet.damge ; \n\n        let crit = bullet.crit ;\n        if( crit == null ){\n            // 没有暴击\n            return d ; \n        }\n\n        let prob = bullet.crit.probability ; \n        if( prob <= 0 ) {\n            // 没有暴击\n            return d ; \n        }\n            \n        // 转换成整数\n        prob = prob * 100 ;\n        let n = randomRangeInt( 0 , 100 ) ; \n        if( n < prob ) {\n            // 命中概率\n            d = d * bullet.crit.multiple ; \n        }\n\n        return d ;\n\n    }\n\n    // 吸血\n    private static lifeStealing( bullet : Bullet , damage : number ) {\n\n        let ls = bullet.lifeStealing ;\n        if( ls == null || ls.percent == 0 ) return ; \n\n        let n = damage * ls.percent ;\n\n        PlayerRole.ins.main.life.add( n ) ;\n        PlayerRole.ins.main.view.hpBar.refresh() ; \n\n    }\n\n    // 敌人之间弹射\n    private static bounce( bullet : Bullet , role : Role ) {\n\n         // 敌人之间弹射\n        if( bullet.bounce.bounceBetweenEnemies.count > 0 ) {\n\n            bullet.bounce.bounceBetweenEnemies.count-- ; \n\n            bullet.bounce.bounceBetweenEnemies.record.add( role ) ;\n    \n            // 查找一个最近的敌人进行弹射\n            bullet.target.targetRole = this.findNearest( bullet.view.root.position , bullet.bounce.bounceBetweenEnemies.record ) ; \n            BulletMoveCalc.target( bullet ) ;\n\n            // 弹射不扣穿透\n            bullet.passCount++ ; \n\n            return ; \n\n        } \n\n        if( bullet.bounce.bounceEnemy > 0 ) {\n            bullet.bounce.bounceEnemy-- ;\n        }\n        else if( bullet.bounce.bounceRectEnemy > 0 ) {\n            bullet.bounce.bounceRectEnemy-- ;\n        }\n        else {\n            return ; \n        }\n\n        // 敌人弹射\n        let rect = role.view.main.getComponent( UITransform ).getBoundingBox() ; \n\n        let pos = bullet.view.root.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ; \n        role.view.main.parent.getComponent( UITransform ).convertToNodeSpaceAR( pos , pos ) ; \n\n        // 判断距离 Rect 上下左右 哪条边更近\n        let len1 = Math.abs( pos.y - rect.yMax ) ; \n        let len2 = Math.abs( pos.y - rect.yMin ); \n        let len3 = Math.abs( pos.x - rect.xMin ); \n        let len4 = Math.abs( pos.x - rect.xMax ); \n\n        if( ( len3 < len1 && len3 < len2 && len3 < len4 ) || ( len4 < len1 && len4 < len2 && len4 < len3 ) ) {\n            bullet.move.offset.x *= -1 ; \n            bullet.move.direction.x *= -1 ; \n\n            bullet.bounce.bounceRect-- ; \n\n            // 弹射不扣穿透\n            bullet.passCount++ ; \n\n        }\n        if( ( len1 < len2 && len1 < len3 && len1 < len4 ) || ( len2 < len1 && len2 < len3 && len2 < len4 ) ) {\n            bullet.move.offset.y *= -1 ; \n            bullet.move.direction.y *= -1 ; \n\n            bullet.bounce.bounceRect-- ; \n\n            // 弹射不扣穿透\n            bullet.passCount++ ; \n\n        }\n\n    }\n\n    private static dataIncr = new DataIncrease() ; \n\n    // 处理子弹附带的Buff。给Role添加Buff 等。\n    public static buff( bullet : Bullet , role : Role ) {\n\n        this.dataIncr.reset() ; \n\n        BuffIncreaseCalc.exeBuffs( bullet.buffs , this.dataIncr );\n\n        this.AttackBulletProbabilityAddBuff( bullet , role , this.dataIncr ) ; \n        this.AttackDamageIncreasePercentFullHp( bullet , role , this.dataIncr ) ; \n\n\n        for( let i = 0 ; i < bullet.buffIds.length ; ++i ) {\n\n            let buffId = bullet.buffIds[ i ] ;\n            let cfgBuffItem = CfgBuff.data.get( buffId ) ;\n            if( cfgBuffItem == null ) continue ; \n\n            switch( cfgBuffItem.affixType ) {\n\n                case AffixType.Knockback : {\n                    // 击退\n                    let dir = bullet.move.direction.clone() ; \n                    RoleMoveSys.ins.add( role , 0.2 , 80 , dir ) ;\n                }\n                break ;\n\n                case AffixType.PoisoningPercent : {\n                    this.PoisoningPercent( bullet , role , buffId ) ; \n                }\n                break ;\n\n                case AffixType.Explode : {\n                    this.Explode( bullet , role , cfgBuffItem ) ; \n                }\n                break ; \n\n                case AffixType.AttackBulletAddBuffRadius : {\n                    this.AttackBulletAddBuffRadius( bullet , role , cfgBuffItem ) ; \n                }\n                break ; \n\n                default : {\n\n                    let ret = BuffOp.roleAdd( role , buffId ) ;\n                    ret[1].sender = bullet.sender ; \n\n                }\n                break ; \n\n            }\n\n        } // end for\n\n    }\n\n    // 概率添加Buff\n    private static AttackBulletProbabilityAddBuff( bullet : Bullet , role : Role , dataIncr : DataIncrease ) {\n\n        // 概率添加Buff\n        for( let kv of this.dataIncr.AttackBulletProbabilityAddBuff ) {\n            let prob = kv[ 1 ] ; \n            let id = kv[ 0 ] ; \n\n            let n = randomRangeInt( 0 , 100 ) ;\n            if( n < prob * 100 ) {\n                let ret = BuffOp.roleAdd( role , id ) ;\n                ret[1].sender = bullet.sender ; \n            }\n\n        } // end for\n\n    }\n\n    // 满血伤害加成\n    private static AttackDamageIncreasePercentFullHp( bullet : Bullet , role : Role , dataIncr : DataIncrease ) {\n\n        if( this.dataIncr.AttackDamageIncreasePercentFullHp > 0 && role.life.hp.current == role.life.hp.max ) {\n            let d = bullet.damge ; \n            d *= 1 + this.dataIncr.AttackDamageIncreasePercentFullHp ; \n            bullet.damge = d ; \n\n        }\n\n    }\n\n    // 中毒 百分比\n    private static PoisoningPercent( bullet : Bullet , role : Role , buffId : string ) {\n\n        // 中毒\n        let ret = BuffOp.roleAdd( role , buffId ) ;\n        let isNew = ret[ 0 ] ;\n        let buff = ret[ 1 ] ; \n        if( isNew == false ) return ; \n            \n        buff.sender = bullet.sender ; \n\n        let d = bullet.damge * buff.affix.argN ; \n\n        if( this.dataIncr.AttackBulletPoisoningDamageIncreasePercent > 0 ) {\n            // 伤害增加\n            d *= 1 + this.dataIncr.AttackBulletPoisoningDamageIncreasePercent ; \n        }\n\n        if( this.dataIncr.AttackBulletPoisoningDurationIncreasePercent > 0 ) {\n            // 时长增加\n            let max = buff.duration.max ; \n            max *= 1 + this.dataIncr.AttackBulletPoisoningDurationIncreasePercent ; \n            buff.duration.setCurrentAndMax( max ) ; \n        }\n\n        d = Math.round( d ) ; \n        buff.affix.argN = d ; \n\n    }\n\n    // 爆炸、范围伤害\n    public static Explode( bullet : Bullet , role : Role , cfgBuffItem : CfgBuffItem ) {\n\n        let pos = bullet.view.root.worldPosition ;\n\n        let fn = ()=>{\n\n            let explode = BulletFactory.create( \"Explode\" ) ; \n            explode.view.root.setParent( WorldNode.ins.layer2 , false ) ;\n            explode.view.root.worldPosition = pos ; \n            explode.Lifecycle = FrameSecConvert.toFrame( 0.1 ) ; \n            explode.damge = bullet.damge * cfgBuffItem.affixArgN ; \n            explode.sender = bullet.sender ;\n            BulletMgr.ins.add( explode ) ; \n\n            let collider = explode.view.root.getComponentInChildren( CircleCollider2D ) ; \n\n            // 设置半径\n            if( cfgBuffItem.affixArgNList != null ) {\n                let r = cfgBuffItem.affixArgNList[ 1 ] ;\n                collider.radius = r ;\n            }\n\n            // 半径增加\n            if( this.dataIncr.AttackBulletExplodeRadiusIncreasePercent > 0 ) {\n                collider.radius *= 1 + this.dataIncr.AttackBulletExplodeRadiusIncreasePercent ; \n            }\n\n            // 伤害增加\n            if( this.dataIncr.AttackBulletExplodeDamageIncreasePercent > 0 ) {\n                explode.damge *= 1 + this.dataIncr.AttackBulletExplodeDamageIncreasePercent ; \n            }\n\n            // 播放特效\n            let id = cfgBuffItem.affixArgStr ; \n            if( id == null ) {\n                id = \"Explore\" ; \n            }\n            let effect = EffectFactory.create( id ) ; \n            effect.setParent( WorldNode.ins.layer2 , false ) ;\n            effect.worldPosition = pos ; \n            effect.scale = explode.view.root.scale ; \n\n        } ;\n        FrameCall.ins.once( fn ) ;\n\n    }\n\n    // 在范围内添加 Buff。\n    public static AttackBulletAddBuffRadius( bullet : Bullet , role : Role , cfgBuffItem : CfgBuffItem ) {\n\n        let parent = bullet.view.root.parent ;\n        let pos = bullet.view.root.position.clone() ; \n\n        let fn = ()=>{\n\n            let r = cfgBuffItem.affixArgN ; \n            let buffId = cfgBuffItem.affixArgStr ; \n\n            let pf = BulletPfMgr.ins.root.getChildByPath( \"Collider/Circle\" ) ; \n            let node = instantiate( pf ) ; \n            node.name = \"AttackBulletAddBuffRadius\" ; \n            node.setParent( parent , false ) ; \n            node.position = pos ; \n\n            let onbeginContact = ( selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null )=>{\n\n                let role = otherCollider[ \"Role\" ] ; \n                if( role == null ) return ; \n\n                let ret = BuffOp.roleAdd( role , buffId ) ;\n                if( ret[ 0 ] == false ) return ;\n\n                let buff = ret[ 1 ] ;\n                buff.affix.argN += this.dataIncr.AttackBulletAddBuffRadiusBuffIncreasePercent ;\n\n                buff.sender = bullet.sender ; \n\n                switch( buff.affix.type ) {\n                    case AffixType.PoisoningPercent : {\n                        let d = bullet.damge * buff.affix.argN ; \n                        d = Math.round( d ) ; \n                        buff.affix.argN = d ; \n                    }\n                    break ;\n                }\n\n                RoleAttributeUpdate.exe( role ) ;\n\n            } ;\n\n            // 设置半径\n            if( this.dataIncr.AttackBulletAddBuffRadiusIncreasePercent > 0 ) {\n                r *= 1 + this.dataIncr.AttackBulletAddBuffRadiusIncreasePercent ; \n            }\n            let collider = node.getComponent( CircleCollider2D ) ;\n            collider.radius = r ; \n            collider.on(Contact2DType.BEGIN_CONTACT, onbeginContact );\n\n            FrameCall.ins.once( ()=>{\n\n                node.destroy() ; \n\n            } , 5 ) ; \n\n        } ;\n        FrameCall.ins.once( fn ) ; \n\n    }\n\n    // 查找距离点最近的敌人\n    public static findNearest( pos : Vec3 , ignore : Set< Role > = null ) {\n\n        let len = Number.MAX_VALUE ; \n        let role : Role = null ; \n        for( let role2 of RoleMgr.ins.allEnemies ) {\n\n            if( ignore != null ) {\n                if( ignore.has( role2 ) ) {\n                    continue ; \n                }\n            }\n\n            let v = role2.view.root.position.clone().subtract( pos ) ;\n            let len2 = v.lengthSqr() ;\n            if( len > len2 ) {\n                len = len2 ; \n                role = role2 ; \n            }\n\n        } // end for\n\n        return role ; \n\n    }\n    \n\n}\n\n","import { Collider2D, Contact2DType, IPhysics2DContact, PhysicsSystem2D } from \"cc\";\nimport { Role } from \"../Role/Base/Role\";\nimport { SkillCloseDamageOp } from \"../Skill/SkillCloseDamage/SkillCloseDamage\";\nimport { Bullet } from \"../Bullet/Bullet\";\nimport { CollisionBullet } from \"./CollisionBullet\";\n\n\n// 碰撞处理器\n\n/*\n\n    参考：\n    https://docs.cocos.com/creator/3.2/manual/zh/physics/physics/contact-callback.html\n\n*/\n\nexport class CollisionHandler {\n\n    public static init() {\n\n        return ;\n        PhysicsSystem2D.instance.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n        PhysicsSystem2D.instance.on(Contact2DType.END_CONTACT, this.onEndContact, this);\n\n\n    }\n\n    /**\n     * 只在两个碰撞体开始接触时被调用一次\n     * @param selfCollider 指的是回调脚本的节点上的碰撞体\n     * @param otherCollider 指的是发生碰撞的另一个碰撞体\n     * @param contact 碰撞主要的信息, 位置和法向量, 带有刚体的本地坐标来， \n     */\n    public static onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        // console.log('onBeginContact');\n \n        return ;\n\n        let role1 = selfCollider[ \"Role\" ] ;\n        if( role1 != null ) {\n            let bullet2 = otherCollider[ \"Bullet\" ] ;\n            if( bullet2 != null ) {\n                // CollisionBullet.exe( role1 , bullet2 ) ; \n                return ;\n            }\n\n        }\n\n        let bullet1 = selfCollider[ \"Bullet\" ] ;\n        if( bullet1 != null ) {\n            let role2 = otherCollider[ \"Role\" ] ;\n            if( role2 != null ) {\n                // CollisionBullet.exe( role2 , bullet1 ) ; \n                return ;\n            }\n        }\n\n\n        // contact.getWorldManifold在 Builtin 物理模块这个参数为空\n        // const worldManifold = contact.getWorldManifold();\n        // // 碰撞点数组\n        // const points = worldManifold.points;\n        // // 碰撞点上的法向量\n        // const normal = worldManifold.normal;\n\n    }\n\n    // 只在两个碰撞体结束接触时被调用一次\n    public static onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        \n        console.log('onEndContact');\n\n        let role1 = selfCollider[ \"Role\" ] ;\n        if( role1 != null ) {\n            role1.move.enabled = true ; \n            \n            let role2 = otherCollider[ \"Role\" ] ;\n            if( role2 != null ) {\n                role2.move.enabled = true ; \n\n                SkillCloseDamageOp.tryRemove( role1 , role2 ) ;\n                SkillCloseDamageOp.tryRemove( role2 , role1 ) ;\n\n            }\n\n        }\n        \n\n\n        \n    }\n\n    public static onPreSolve(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        // 每次将要处理碰撞体接触逻辑时被调用\n        console.log('onPreSolve');\n    }\n\n    public static onPostSolve(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        // 每次处理完碰撞体接触逻辑时被调用\n        console.log('onPostSolve');\n    }\n\n\n}\n\n// 角色的互相碰撞\nclass CollisionRoleAndRole {\n\n    public static exe( role1 : Role , role2 : Role ) {\n\n        this.aiStopMove( role1 ) ;\n        this.aiStopMove( role2 ) ;\n\n        SkillCloseDamageOp.tryAdd( role1 , role2 ) ; \n        SkillCloseDamageOp.tryAdd( role2 , role1 ) ; \n\n    }\n\n    public static aiStopMove( role : Role ) {\n        \n        // let ai = role.ai ;\n        // if( ai == null ) return ; \n        // role.move.enabled = false ; \n\n    }\n\n}\n\n\n","\nexport class CurrentMax\n{\n    public current = 0;\n\n    public max = 0;\n\n    // 设置当前值为最大值\n    public setCurrentAsMax() : void \n    {\n        this.current = this.max;\n    }\n\n    public setCurrentAndMax(val : number ) : void\n    {\n        this.current = this.max = val;\n    }\n\n}","import { sys } from \"cc\";\r\n\r\nimport { DateTimeUtil } from \"../../../../SL/Common/Misc/DateTimeUtil\";\r\nimport { DateTimeMgr } from \"../../../../SL/Common/Misc/DateTimeMgr\";\r\n\r\n\r\n// 签到数据持久化\r\nexport class DailyCheckinData {\r\n\r\n    public static ins : DailyCheckinData = new DailyCheckinData() ; \r\n\r\n    // 最后签到的日期\r\n    public lastDate = new Date( 0 ) ;\r\n\r\n    // 签到次数\r\n    public count = 0 ;\r\n\r\n    // 签入\r\n    public checkin() {\r\n        this.lastDate = DateTimeMgr.ins.getNowDateTime() ; \r\n        this.count++ ;\r\n    }\r\n\r\n    // 今日是否已签\r\n    public isTodayCheckin() : boolean {\r\n\r\n        let dtNow = DateTimeMgr.ins.getNowDateTime() ;\r\n        let b = DateTimeUtil.dateEquals( this.lastDate , dtNow ) ; \r\n        return b ; \r\n\r\n    } \r\n\r\n}\r\n\r\nexport class DailyCheckinDataPersist {\r\n\r\n    public static load() {\r\n\r\n        let str = sys.localStorage.getItem( \"DailyCheckin\" ) as string ; \r\n        if( str == null || str == \"\" ) return ; \r\n\r\n        let json = null ; \r\n        try {\r\n            json = JSON.parse( str ) ; \r\n        }\r\n        catch {\r\n            return ; \r\n        }\r\n\r\n        if( json[ \"Date\" ] == null ) return ; \r\n\r\n        let dtLast = new Date( Date.parse( json[ \"Date\" ] ) ) ; \r\n        DailyCheckinData.ins.lastDate = dtLast ; \r\n        DailyCheckinData.ins.count = Number( json[ \"Count\" ] ) ; \r\n\r\n    }\r\n\r\n    public static save() {\r\n\r\n        /*\r\n            因为服务器发来的是本地时间格式，所以保存也用本地时间格式\r\n            用户改本机时区没用，因为服务器设置和读入都是相同时区的数。\r\n        */ \r\n\r\n        let obj = {} ;\r\n        obj[ \"Date\" ] = DateTimeUtil.toDateString( DailyCheckinData.ins.lastDate ) ;\r\n        obj[ \"Count\" ] =  DailyCheckinData.ins.count ; \r\n\r\n        let str = JSON.stringify( obj ) ;\r\n        sys.localStorage.setItem( \"DailyCheckin\" , str ) ; \r\n\r\n    }\r\n\r\n}","import { sys } from \"cc\";\r\nimport { DateTimeUtil } from \"../../SL/Common/Misc/DateTimeUtil\";\r\n\r\n// 每日个数限制\r\nexport class DailyLimit {\r\n\r\n    // 标示ID\r\n    public id : string = \"DailyLimit_XXX\" ;\r\n\r\n    // 最大数\r\n    public max = 0 ; \r\n\r\n    // 当前数\r\n    public current = 0 ; \r\n\r\n    public constructor( id : string , max : number = 10 ) {\r\n\r\n        this.id = id ; \r\n        this.max = max ; \r\n\r\n    }\r\n\r\n    // 递减 1 \r\n    public decrement() {\r\n\r\n        if( this.current <= 0 ) return ; \r\n        this.current-- ; \r\n\r\n        this.save() ; \r\n\r\n    }\r\n\r\n    public load() {\r\n\r\n        let str = sys.localStorage.getItem( this.id );\r\n        if( str == null || str == \"\" ) {\r\n\r\n            this.current = this.max ; \r\n\r\n            return ; \r\n        }\r\n\r\n        let data = JSON.parse( str ) ; \r\n        this.current = Number( data[ \"Current\" ] ) ; \r\n        let dt = new Date( data[ \"Date\" ] ) ;\r\n        let dtNow = new Date( Date.now() ) ; \r\n        if( DateTimeUtil.dateEquals( dt , dtNow ) == false ) {\r\n            this.current = this.max ; \r\n        }\r\n\r\n    }\r\n\r\n    public save() {\r\n\r\n        let data = {} ; \r\n        data[ \"Date\" ] = DateTimeUtil.toDateString( new Date( Date.now() ) )  ;\r\n        data[ \"Current\" ] = this.current ;\r\n\r\n        let str = JSON.stringify( data ) ; \r\n        sys.localStorage.setItem( this.id , str ) ; \r\n\r\n    }\r\n\r\n}","import { director, game, sys, tween } from \"cc\";\n\n\n// 时间设置器\nexport class DateTimeSync {\n\n    // 重试次数\n    public static count = 20 ;\n\n    public static exe( cb : ( ok : boolean )=>void ) {\n\n        DateTimeRequest.getFromSuNing( ( ok : boolean , date : Date )=>{\n\n            if( ok == false ) {\n\n                console.log( \"时间同步失败,1秒后重试\" ) ;\n\n                this.count-- ; \n                if( this.count <= 0 ) {\n                    cb( false ) ; \n                    return ; \n                }\n\n                tween( this ).delay( 1 ).call( ()=>{\n                    this.exe( cb ) ; \n                } ).start() ; \n\n                return ; \n            }\n\n            DateTimeMgr.ins = new DateTimeMgr() ; \n            DateTimeMgr.ins.dtStart = date ; \n\n            cb( true ) ; \n\n        } ) ;\n\n    }\n\n}\n\n// 时间请求\nexport class DateTimeRequest {\n\n    // 从苏宁API获取\n    public static getFromSuNing( cb : ( ok : boolean , date : Date )=>void ) {\n\n        if( sys.platform == sys.Platform.WECHAT_GAME ) {\n            // 微信http请求\n            this.wxRequest( cb ) ;\n            return ; \n\n        }\n        else if( sys.platform == sys.Platform.BYTEDANCE_MINI_GAME )\n        {\n            // 抖音http请求\n            this.ttRequest( cb ) ;\n        }\n        else {\n            this.fetch( cb ) ; \n        }\n        \n        \n\n    }\n\n    // fetch 请求\n    public static fetch( cb : ( ok : boolean , date : Date )=>void ) {\n\n        /*\n            http 请求：\n            https://docs.cocos.com/creator/manual/zh/advanced-topics/http.html?h=http\n\n            fetch 用法\n            https://segmentfault.com/a/1190000008484070?utm_source=tag-newest\n            \n        */ \n        let url = \"https://quan.suning.com/getSysTime.do\" ; \n        fetch( url ).then((response: Response) => {\n            // return response.text() ; \n            return response.json()\n        }).then((value) => {\n            // console.log(value);\n\n            let dt = new Date( value[ \"sysTime2\" ] ) ;\n            console.log( \"获取服务器时间完成：\" + dt.toString() ) ; \n            \n            cb( true , dt ) ; \n\n        }).catch( ( e )=>{\n\n            console.log( \"获取服务器时间出错\" ) ; \n\n            cb( false , null ) ; \n\n        } ) ;\n\n    }\n\n    // 微信请求\n    public static wxRequest( cb : ( ok : boolean , date : Date )=>void ) {\n\n        /*\n            参考：https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html\n        \n        */\n\n        let url = \"https://quan.suning.com/getSysTime.do\" ; \n\n        // @ts-ignore\n        wx.request({\n            url: url , \n            success (res) {\n                console.log(res.data)\n\n                let dt = new Date( res.data[ \"sysTime2\" ] ) ;\n                cb( true , dt ) ; \n                \n            } , \n\n            fail() {\n\n                cb( false , null ) ; \n\n            }\n\n        }) ; \n\n    }\n\n    // 抖音请求\n    public static ttRequest( cb : ( ok : boolean , date : Date )=>void ) {\n\n        /*\n            参考：https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html\n        \n        */\n\n        let url = \"https://quan.suning.com/getSysTime.do\" ; \n\n        // @ts-ignore\n        tt.request({\n            url: url , \n            success (res) {\n                console.log(res.data)\n\n                let dt = new Date( res.data[ \"sysTime2\" ] ) ;\n                cb( true , dt ) ; \n                \n            } , \n\n            fail() {\n\n                cb( false , null ) ; \n\n            }\n\n        }) ; \n\n    }\n\n}\n\n/*\n    时间管理\n\n    使用服务器同步时间，可以防止玩家修改本机时间跳过时间间隔。\n    也可换成使用本机时间。\n\n    本类作用：屏蔽时间服务器和本地时间的使用差异。\n\n*/ \nexport class DateTimeMgr {\n\n    public static ins : DateTimeMgr = null ; \n\n    // 游戏开始时的时间点\n    public dtStart : Date = null ; \n\n    // 取得现在的时间\n    public getNowDateTime() : Date {\n\n        let n = Math.floor( game.totalTime / 1000 ) ; \n        let dt = new Date( this.dtStart ) ; \n        dt.setSeconds( this.dtStart.getSeconds() + n ) ; \n        return dt ; \n\n        // // 时间相加\n        // let dt = new Date( this.dtStart ) ;\n        // dt.setSeconds( this.dtStart.getSeconds() + 100 ) ; \n\n        // 总体秒数\n        // let n = ( dt.valueOf() - this.dtStart.valueOf() ) / 1000 ; \n\n    }\n\n\n}","\n\nexport class DateTimeUtil {\n\n    // 日期部分是否相等\n    public static dateEquals( dt1 : Date , dt2 : Date ) : boolean {\n\n        let y1 = dt1.getFullYear() ;\n        let y2 = dt2.getFullYear() ; \n        let m1 = dt1.getMonth()  ;\n        let m2 = dt2.getMonth() ; \n        let d1 = dt1.getDate() ; \n        let d2 = dt2.getDate()\n\n        let b = y1 == y2 &&\n            m1 == m2 && \n            d1 == d2 ; \n\n        return b ; \n\n    }\n\n\n    public static toString( dt : Date ) {\n\n        /*\n            toLocaleString 不能用的原因，在不同平台会生成不同格式的字符串。\n            比如 cocos 编辑器的字符串就有中文，并且不能用 parse 解析回来。\n\n            iOS 规定日期分割要用 / 不能用 - ，否者会返回 Invalid Date \n            参考：https://blog.csdn.net/qq_38974163/article/details/129039155\n        */\n\n        let str = dt.getFullYear() + \"/\" + \n            ( dt.getMonth() + 1 ) + \"/\" + \n            dt.getDate() + \" \" + \n            dt.getHours() + \":\" + \n            dt.getMinutes() + \":\" + \n            dt.getSeconds() ;\n\n        return str ; \n\n    }\n    \n    public static toDateString( dt : Date ) : string {\n\n        // \"2023-12-18 14:51:28\" \n        let str = dt.getFullYear() + \"/\" + \n            ( dt.getMonth() + 1 ) + \"/\" + \n            dt.getDate() ;\n            // dt.getUTCHours() + \":\" + \n            // dt.getUTCMinutes() + \":\" + \n            // dt.getUTCSeconds() ;\n\n        return str ; \n\n    } \n\n}","import { instantiate, Node, sp } from \"cc\";\nimport { EffectPfMgr } from \"../../World/1.Base/Support/Misc/EffectPfMgr\";\n\nexport class EffectFactory {\n\n    public static create( id : string , destroyIfComplete = true ) : Node {        \n\n        let pf = EffectPfMgr.ins.root.getChildByPath( id ) ;\n        if( pf == null ) return null ; \n        \n        let node = instantiate( pf ) ;\n        let sk = node.getComponent( sp.Skeleton ) ;\n        if( sk == null ) {\n            sk = node.getComponentInChildren( sp.Skeleton ) ; \n        }\n\n        if( destroyIfComplete ) {\n\n            sk?.setCompleteListener( ()=>{\n                node.destroy() ; \n            } ) ;\n\n        }\n\n        return node ; \n\n    }\n\n\n}","import { Node } from \"cc\";\n\n// 效果预制管理器\nexport class EffectPfMgr {\n\n    public static ins = new EffectPfMgr() ; \n\n    public root : Node ; \n\n}","import { UITransform, Vec3 } from \"cc\";\nimport { UiHpBar } from \"../../../Ui/Bar/UiHpBar\";\nimport { RoleFactory } from \"../../1.Base/Role/Base/RoleFactory\";\nimport { RoleMgr } from \"../../1.Base/Role/Base/RoleMgr\";\nimport { WorldNode } from \"../../1.Base/Support/Misc/WorldNode\";\nimport { EnemyMovePath } from \"../Flow/EnemyMovePath\";\nimport { AiCom } from \"../../1.Base/Ai/AiCom\";\nimport { PlayerBuffAffect } from \"../Player/PlayerBuffAffect\";\nimport { RoleAttributeUpdate } from \"../../1.Base/Role/Misc/RoleAttributeUpdate\";\nimport { Role } from \"../../1.Base/Role/Base/Role\";\nimport { PathMove } from \"../../1.Base/Ai/PathMove\";\n\nexport class EnemyGen {\n\n    // 生成一个敌人\n    public static genOne( id : string ) : Role {\n\n        let role = RoleFactory.create( id ) ;\n\n        RoleMgr.ins.add( role ) ; \n\n        // 添加血条\n\n        let hpBarId = role.cfg.hpBarId ;\n        let hpBar = UiHpBar.create( hpBarId ) ;\n        role.view.hpBar = hpBar ; \n        hpBar.role = role ;\n        hpBar.root.setParent( role.view.root , true );\n        let rect = role.view.main.getComponent( UITransform ).getBoundingBox() ; \n        hpBar.root.position = new Vec3( 0 , rect.yMax + 10 ) ;\n        hpBar.refresh() ; \n \n        role.view.root.setParent( WorldNode.ins.layer1 , false ) ;\n        role.view.root.position = EnemyMovePath.ins.data[ 0 ] ;\n\n        role.ai = new AiCom() ; \n        role.ai.pathMoved = new PathMove() ; \n        role.ai.pathMoved.idx = 1 ; \n        role.ai.pathMoved.path = EnemyMovePath.ins.data ; \n\n        // PlayerBuffAffect.affectRole( role ) ; \n\n\n\n        RoleAttributeUpdate.exe( role ) ; \n\n        return role ; \n\n    }\n\n}","import { Vec3 } from \"cc\";\nimport { WorldNode } from \"../../1.Base/Support/Misc/WorldNode\";\n\n\n// 塔防敌人移动路径\nexport class EnemyMovePath {\n\n    public static ins = new EnemyMovePath() ; \n\n    public data = new Array< Vec3 >() ;\n\n    public init( ) {\n\n        this.data.splice( 0 , this.data.length ) ; \n\n        let node = WorldNode.ins.root.getChildByPath( \"Cfg/Path\" ) ; \n        for( let i = 0 ; i < node.children.length ; ++i ) {\n\n            let point = node.children[ i ] ; \n\n            this.data.push( point.position ) ; \n\n        } // end for\n\n        node.destroy() ; \n\n    }\n\n}","import { _decorator, Component, Node } from 'cc';\nimport { Init } from './Init';\nimport { ZOrderCtrl } from '../World/1.Base/Support/Misc/ZOrderCtrl';\nimport { RoleSys } from '../World/1.Base/Role/Misc/RoleSys';\nimport { TowerSys } from '../World/1.Base/Tower/Sys/TowerSys';\nimport { BulletSys } from '../World/1.Base/Bullet/BulletSys';\nimport { AiSys } from '../World/1.Base/Ai/AiSys';\nimport { WaveCtrl } from '../World/2.Td/Level/WaveCtrl';\nimport { LevelCtrl } from '../World/2.Td/Level/LevelCtrl';\nimport { RoleMoveSys } from '../World/1.Base/Role/Misc/RoleMoveSys';\nimport { FrameCall } from '../World/1.Base/Support/Misc/FrameCall';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Entry')\nexport class Entry extends Component {\n    start() {\n\n        Init.exe() ; \n\n    }\n\n    update(deltaTime: number) {\n        \n        ZOrderCtrl.ins.update() ; \n\n        TowerSys.update() ; \n\n        BulletSys.update() ; \n\n        RoleSys.update() ; \n\n        AiSys.update() ; \n        \n        LevelCtrl.ins.update() ; \n        // WaveCtrl.ins.update() ; \n        \n        RoleMoveSys.ins.update() ; \n\n        FrameCall.ins.update() ; \n        \n    }\n\n}\n\n\n","import { _decorator, Component, Node } from 'cc';\nimport { Init } from './Init';\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('Entry')\nexport class Entry extends Component {\n    start() {\n        Init.exe() ; \n    }\n\n    update(deltaTime: number) {\n\n    }\n    \n}\n\n\n","import { _decorator, Component, Node } from 'cc';\nimport { Init } from './Init';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Entry')\nexport class Entry extends Component {\n    start() {\n        Init.exe() ; \n    }\n\n    update(deltaTime: number) {\n        \n    }\n    \n}\n\n\n","import { UITransform, Vec3 } from \"cc\";\nimport { CfgBuff, CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { MoneyFly } from \"../../../../Common/Misc/MoneyFly\";\nimport { AffixType } from \"../../../World/1.Base/Buff/Affix\";\nimport { BuffFactory } from \"../../../World/1.Base/Buff/BuffFactory\";\nimport { TowerAllUpdate } from \"../../../World/1.Base/Tower/Misc/TowerAllUpdate\";\nimport { Player } from \"../../../World/2.Td/Player/Player\";\nimport { PlayerBuffAffect } from \"../../../World/2.Td/Player/PlayerBuffAffect\";\nimport { UiMoney001 } from \"../../Main/UiMoney001\";\nimport { UiMain } from \"../../Main/UiMain\";\nimport { UiFeature } from \"../../Main/Feature/UiFeature\";\nimport { FeatureExtract } from \"./FeatureExtract\";\nimport { MergeDefinition } from \"../../../Bag/Merge/MergeDefinition\";\nimport { PlayerGradeOp } from \"../../../World/2.Td/Player/PlayerGradeOp\";\nimport { Buff_RndArticleMergeGradeUpgrade } from \"../../../World/1.Base/Buff/Specific/Buff_RndArticleMergeGradeUpgrade\";\n\n// 特性获得\nexport class FeatureAcquire {\n\n    public static exe( ids : Array< string > ) {\n\n        for( let i = 0 ; i < ids.length ; ++i ) {\n\n            let id = ids[ i ] ;\n\n            let b = this.now( id ) ;\n            if( b == true ) continue ; \n\n            let buff = BuffFactory.create( id ) ;\n            Player.ins.buff.list.push( buff ) ; \n\n            FeatureExtract.countLimit( id ) ; \n\n        }\n\n\n        // 更新塔\n        TowerAllUpdate.updateAll() ; \n\n        // 作用于现在场上的敌人\n        PlayerBuffAffect.affectAllRoles() ; \n\n        UiFeature.ins.refresh() ; \n\n    }\n\n    /*\n        马上生效的 立即一次性消耗的。\n        返回值：是否需要加入Buff列表中并且显示图标\n    */ \n    public static now( id : string ) {\n\n        let cfg = CfgBuff.data.get( id ) ;\n        if( cfg == null ) return ;\n\n        switch( cfg.affixType ) {\n\n            case AffixType.GetMomeyNow : {\n\n                // 立刻得到金币\n\n                // 飞\n                let pos2 = UiMoney001.ins.icon.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n                UiMain.ins.root.getComponent( UITransform ).convertToNodeSpaceAR( pos2 , pos2 ) ;\n                MoneyFly.money001Fly( UiMain.ins.root , Vec3.ZERO , pos2 ) ; \n\n                // 加数值\n                Player.ins.money001 += cfg.affixArgN ; \n                UiMoney001.ins.refresh() ; \n\n                return true ; \n\n            }\n            break ; \n\n            \n            case AffixType.MergeEnable : {\n                // 合并 启动\n\n                let str = cfg.affixArgStr ; \n                let strs = str.split( \",\" ) ; \n                for( let id of strs ) {\n                    MergeDefinition.ins.allowData.set( id , true ) ; \n                }\n              \n                return true ; \n\n            }\n            break ; \n\n            case AffixType.ExpIncreasePercent : {\n\n                // 经验值获取 增加\n                PlayerGradeOp.expFactor += cfg.affixArgN ; \n\n            }\n            break ;\n\n            case AffixType.RndArticleMergeGradeUpgrade : {\n\n                Buff_RndArticleMergeGradeUpgrade.exe( ) ; \n\n                return true ; \n            }\n            break ; \n\n        }\n\n        return false ;\n\n    }\n\n\n\n}","import { Account } from \"../../../../Common/Account/Account\";\nimport { CfgArticleMgr } from \"../../../../Common/Cfg/CfgArticle\";\nimport { CfgBuff, CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { CfgFeature, CfgFeatureItem } from \"../../../../Common/Cfg/CfgFeature\";\nimport { Shuffle } from \"../../../../SL/Common/Misc/Shuffle\";\nimport { BagArticleGradeHelper } from \"../../../Bag/Article/BagArticleGradeHelper\";\nimport { Buff } from \"../../../World/1.Base/Buff/Buff\";\n\n// 特性抽取池\nexport class FeatureExtractPool {\n\n    public static ins : FeatureExtractPool = null ;\n\n    // 个数限制\n    public count = new Map< string , number >() ;\n\n    public data = new Array< CfgBuffItem >() ; \n\n    public init() {\n\n        let ids1 = this.getCommon() ; \n        let ids2 = this.getDeploy() ; \n        ids2.push( ... ids1 ) ;\n\n        // 测试\n        // ids2 = [ \"General-RndArticleMergeGradeUpgrade\" ] ;\n\n        for( let i = 0 ; i < ids2.length ; ++i ) {\n            let cfgItem = CfgBuff.data.get( ids2[ i ] ) ;\n            this.data.push( cfgItem ) ;\n\n            if( cfgItem.unlockCount > 0 ) {\n                this.count.set( cfgItem.id , cfgItem.unlockCount ) ; \n            }\n\n        } // end for\n\n    }\n\n    // 得到上阵解锁的\n    public getDeploy() : Array< string > {\n\n        let ret = new Array< string >() ;\n\n        let deploy = Account.ins.bag.deploy ;\n        for( let i = 0 ; i < deploy.length ; ++i ) {\n            let id = deploy[ i ] ;\n\n            let items = BagArticleGradeHelper.getCfgCurrentItems( id ) ; \n            for( let item of items ) {\n                ret.push( ... item.unlocked ) ; \n            }\n\n        } // end for\n\n        return ret ;\n\n    }\n\n    // 得到公共的\n    public getCommon() : Array< string > {\n\n        let ret = new Array< string >() ;\n\n        for( let cfgItem of CfgFeature.data ) {\n            ret.push( cfgItem.id ) ; \n        }\n\n        return ret ; \n\n    }\n\n}\n\n// 特性抽取\nexport class FeatureExtract {\n\n    public static exe() : Array< CfgBuffItem > {\n\n        let ret = new Array< CfgBuffItem >() ; \n        \n        // 完全随机\n        this.rnd( ret ) ; \n\n        return ret ; \n\n    }\n   \n    // 全列表完全随机\n    public static rnd( ret : Array< CfgBuffItem > ) {\n\n        let poolData = FeatureExtractPool.ins.data ; \n        let list = new Array< CfgBuffItem >() ; \n        list.push( ... poolData ) ;\n        Shuffle.shuffleArray( list ) ;\n\n        let count = FeatureExtractPool.ins.count ; \n        for( let i = 0 ; i < 3 && i < list.length ; ++i ) {\n            let item = list[ i ] ; \n            ret.push( item ) ; \n            \n        } // end for\n\n\n    }\n\n    // 次数限制\n    public static countLimit( id : string ) {\n\n        let poolData = FeatureExtractPool.ins.data ; \n        let count = FeatureExtractPool.ins.count ; \n\n        let n = count.get( id ) ; \n        if( n == null ) {\n            // 没限制\n            return ;\n        }\n        \n        n-- ; \n        if( n > 0 ) {\n            // 还有出现次数\n            count.set( id , n ) ; \n            return ;\n        }   \n\n        let idx = poolData.findIndex( ( e )=>{ return e.id == id ; } ) ;\n        if( idx == -1 ) return ; \n        poolData.splice( idx , 1 ) ; \n\n        count.delete( id ) ; \n\n    }\n\n}","import { CurrentMax } from \"../SimpleStruct/CurrentMax\";\n\nexport class FrameCall {\n\n    public static ins : FrameCall = null ; \n\n    // 执行一次。delay 为 0 下一帧执行。\n    public once( fn : ()=>void , delay : number = 0 ) {\n\n        let item = new FrameCallDataItem() ; \n        item.interval.setCurrentAndMax( delay ) ; \n        item.times = 1 ;\n        item.fn = fn ; \n        this.items.push( item ) ; \n\n    }\n\n\n    public update() {\n\n        for( let i = this.items.length - 1 ; i >= 0 ; --i ) {\n\n            let item = this.items[ i ] ;\n\n            item.interval.current-- ;\n            if( item.interval.current > 0 ) continue ; \n\n            item.fn?.() ; \n\n            item.times-- ; \n            if( item.times <= 0 ) {\n                // 移除\n                this.items.splice( i , 1 ) ;\n            }\n\n            item.interval.setCurrentAsMax() ; \n\n        } // end for\n\n    }\n\n    public items = new Array< FrameCallDataItem >() ; \n}\n\n// 数据项\nexport class FrameCallDataItem {\n\n    // 间隔\n    public interval = new CurrentMax() ;\n\n    // 调用次数\n    public times = 1 ; \n\n    // 调用函数\n    public fn : ()=>void = null ; \n\n}","import { math } from \"cc\";\n\n    \n    // 帧 秒 时间换算\n    export class FrameSecConvert\n    {\n        // FPS\n        public static fps = 60 ;\n\n        // 秒数转换成帧数\n        public static toFrame( second : number ) : number {\n\n            return Math.floor( this.fps * second ) ;\n\n         }\n\n        /*\n            帧数转换成秒数。\n            速度/秒 转换成 速度/帧。         \n        */ \n        public static toSecond( frame : number ) : number {\n\n            return frame / this.fps ;\n\n        }\n\n        //// 速度每秒 转换成 速度每帧\n        //public static speedPerSecondToSpeedPerFrame( speedPerSecond )\n        //{\n\n        //    return speedPerSecond / this.fps;\n\n        //}\n    }","import { Prefab } from \"cc\";\n\nexport class GameArg {\n\n    public static ins = new GameArg() ; \n\n    // 关卡ID\n    public levelId : string ; \n\n    // 主线关卡索引\n    public mainIdx = -1 ;\n\n\n\n}","import { ItemDraw } from \"../../../../Common/Item/ItemDraw\";\nimport { ItemGet } from \"../../../../Common/Item/ItemGet\";\nimport { GameArg } from \"../../../Init/GameArg\";\nimport { UiMain } from \"../../../Ui/Main/UiMain\";\nimport { UiLose } from \"../../../Ui/Popup/Settle/UiLose\";\nimport { GamePause } from \"./GamePause\";\n\nexport class GameLose {\n\n    public static exe() {\n        console.log( \"死亡\" ) ;\n\n        // 暂停游戏逻辑\n        GamePause.pause() ; \n\n        let uiLose = UiLose.create( UiMain.ins.root );\n        uiLose.show() ; \n        let id = \"Level_\" + GameArg.ins.levelId + \"_Lose\" ; \n        let items = ItemDraw.exe( id ) ; \n        uiLose.itemList.refresh( items ) ; \n        uiLose.itemList.showAnim() ; \n        ItemGet.addList( items ) ; \n        \n    }\n\n}","import { find } from \"cc\";\nimport { Bullet } from \"../../1.Base/Bullet/Bullet\";\nimport { BulletMgr } from \"../../1.Base/Bullet/BulletMgr\";\nimport { RoleMgr } from \"../../1.Base/Role/Base/RoleMgr\";\nimport { WaveCtrl } from \"../Level/WaveCtrl\";\n\n// 暂停 恢复\nexport class GamePause {\n\n    // 暂停\n    public static pause() {\n\n        // 停止逻辑帧\n        find( \"Entry\" ).active = false ; \n\n    }\n\n    // 恢复\n    public static resume() {\n\n        find( \"Entry\" ).active = true ; \n\n    }\n\n}","\nimport { BagArticleReloaded } from \"../Bag/BagArticleReloaded\";\nimport { LevelCtrl } from \"../Level/LevelCtrl\";\nimport { TowerAllUpdate } from \"../../1.Base/Tower/Misc/TowerAllUpdate\";\nimport { TowerMgr } from \"../../1.Base/Tower/Entity/TowerMgr\";\nimport { Buff_HpRegenIncreasePercentBelowPercentPerWave } from \"../../1.Base/Buff/Specific/Buff_HpRegenIncreasePercentBelowPercentPerWave\";\nimport { PlayerRole } from \"../Player/PlayerRole\";\nimport { WorldNode } from \"../../1.Base/Support/Misc/WorldNode\";\nimport { Vec3 } from \"cc\";\nimport { EffectFactory } from \"../../../Bag/Merge/EffectFactory\";\nimport { GamePause } from \"./GamePause\";\n\n// 塔防开始\nexport class GameStart {\n\n    // 开始塔防逻辑\n    public static start() {\n\n        GamePause.resume() ; \n\n        // 开战动画\n        let effect = EffectFactory.create( \"Battle\" ) ;\n        effect.setParent( WorldNode.ins.layer2 , true ) ;\n        effect.position = Vec3.ZERO ; \n\n        // 重新生成塔\n        BagArticleReloaded.exe() ; \n\n        // 计算塔的属性\n        TowerAllUpdate.updateAll() ; \n\n        Buff_HpRegenIncreasePercentBelowPercentPerWave.resetAllTowers() ; \n        Buff_HpRegenIncreasePercentBelowPercentPerWave.tryExe( PlayerRole.ins.main ) ;\n\n        LevelCtrl.ins.start() ; \n        // WaveCtrl.ins.start() ; \n\n    }\n\n}\n\n\n","import { Vec2 } from \"cc\";\n\n/*\n    手势 点击。\n    滑动指定距离后，不再认为是点击\n*/ \nexport class GestureClick {\n\n    public rest() {\n        this.val = true ; \n    }\n\n    public start( pos : Vec2 ) {\n\n        this.posOrig = pos ; \n\n    }\n\n    public move( pos : Vec2 ) {\n\n        if( this.val == false ) return ;\n\n        let v = this.posOrig.clone().subtract( pos ) ;\n        if( v.lengthSqr() > 20 * 20 ) {\n            this.val = false ; \n        } ; \n\n    }\n\n    // 是否是单机的含义\n    public getVal() : boolean {\n        return this.val ;\n    }\n\n    // 拾起时 的坐标 世界空间\n    private posOrig : Vec2 = null ; \n\n    private val = true ; \n\n}","import { Rect, Size, Vec2, Vec3 } from \"cc\";\nimport { UiBagGrid } from \"./UiBagGrid\";\nimport { UiBagCfg } from \"../Main/UiBagCfg\";\n\nexport class GridHelper {\n\n    // 取得已解锁的格子的包围矩形 形状\n    public static getBoundingRectShapeUnlocked() : Rect {\n\n        let rect = new Rect() ; \n\n        // 左下角\n        let coord1 = new Vec2( 9999 , 9999 ) ; \n        // 右上角\n        let coord2 = new Vec2( -1 , -1 ) ; \n\n        let grid = UiBagGrid.ins.grid ;\n        let girdSize = UiBagGrid.ins.gridSize ; \n        for( let y = 0 ; y < girdSize.height ; ++y ) {\n            for( let x = 0 ; x < girdSize.width ; ++x ) {\n\n                let cell = grid[ y ][ x ] ; \n                if( cell.unlocked == false ) continue ; \n\n                if( x < coord1.x ) {\n                    coord1.x = x ;\n                }\n\n                if( y < coord1.y ) {\n                    coord1.y = y ; \n                }\n\n                if( x > coord2.x ) {\n                    coord2.x = x ; \n                }\n\n                if( y > coord2.y ) {\n                    coord2.y = y ;\n                }\n\n            } // end for\n        } // end for\n\n        rect.xMin = coord1.x ; \n        rect.yMin = coord1.y ; \n        rect.xMax = coord2.x ; \n        rect.yMax = coord2.y ; \n\n        return rect ; \n\n    }\n\n    // 取得已解锁的格子的包围矩形 像素\n    public static getBoundingRectUnlocked() : Rect {\n\n        let rect = this.getBoundingRectShapeUnlocked() ;\n\n        let grid = UiBagGrid.ins.grid ;\n        // 左下角\n        let coord1 = new Vec2( rect.xMin , rect.yMin ) ; \n        // 右上角\n        let coord2 = new Vec2( rect.xMax , rect.yMax ) ; \n\n        // 格子大小\n        // let cellSize = new Size( 80 , 80 ) ; \n        let cellSize = UiBagCfg.ins.cellSize ; \n\n        // 确定位置\n        let pos = new Vec2() ; \n        let cell1 = grid[ rect.yMin ][ rect.xMin ] ; \n        let cell2 = grid[ rect.yMax ][ rect.xMax ] ; \n        let pos2 = cell1.root.position.clone().add( cell2.root.position ).divide3f( 2 , 2 , 2 ) ;\n        pos.x = pos2.x ; pos.y = pos2.y ; \n\n        // 确定大小\n        let size = new Size() ;\n        size.width = ( coord2.x - coord1.x + 1 ) * cellSize.width ;\n        size.height = ( coord2.y - coord1.y + 1 ) * cellSize.height ; \n        size.width += 40 ; \n        size.height += 40 ; \n\n        let rectRet = new Rect() ; \n        rectRet.size = size ; \n        rectRet.center = pos ; \n        return rectRet ; \n\n    }\n\n    // 取得全部格子的包围矩形\n    public static getBoundingRectEntirety() : Rect {\n\n        // let cellSize = new Size( 80 , 80 ) ; \n        let cellSize = UiBagCfg.ins.cellSize ; \n\n        // 算出网格总体大小\n        let gridSize = UiBagGrid.ins.gridSize ; \n        let size = new Size() ; \n        size.width = gridSize.width * cellSize.width ; \n        size.height = gridSize.height * cellSize.height ;\n\n        // 边距\n        size.width += 40 ; \n        size.height += 40 ; \n\n        let rectRet = new Rect() ; \n        rectRet.size = size ; \n        rectRet.center = Vec2.ZERO ; \n        return rectRet ; \n\n    }\n}","import { GridTraverse } from \"./GridTraverse\";\nimport { UiBagCell } from \"./UiBagCell\";\n\n\nexport class GridHint {\n\n    // 提示可以放置\n    public static hintPlaceableShow( cells : Array< UiBagCell > ) {\n\n        for( let cell of cells ) {\n            cell.hintPlaceable.active = true ; \n            cell.hintExpandable.active = false ; \n        }\n\n    }\n\n    // 清除可放置\n    public static hintPlaceableClear() {\n\n        GridTraverse.exe( ( cell )=>{\n            \n            cell.hintPlaceable.active = false ; \n\n            cell.hintExpandable.active = !cell.unlocked ;\n            \n\n        } ) ;\n\n    }\n\n}","\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { UiBagBottom } from \"../Main/UiBagBottom\";\nimport { UiBagExpandOp } from \"../Main/UiBagExpandOp\";\nimport { UiBagGrid } from \"./UiBagGrid\";\nimport { UiBagGridBg } from \"./UiBagGridBg\";\n\n// 网格模式转变。模式：普通、扩展\nexport class GridModeTransition {\n\n    public static mode = 1 ;\n\n    // 初始模式\n    public static init() {\n\n        UiBagGridBg.ins.unlocked() ;\n        UiBagGrid.ins.alignBgCenter( 0 ) ; \n        UiBagExpandOp.ins.hide() ; \n        UiBagBottom.ins.show() ; \n\n        this.mode = 1 ; \n    }\n\n    // 扩展模式\n    public static toExpandable() {\n\n        if( this.mode == 2 ) return ;\n        this.mode = 2 ; \n\n        UiBagGrid.ins.showExpandable() ; \n        UiBagGrid.ins.alignBgCenter() ; \n        UiBagExpandOp.ins.show() ; \n        UiBagBottom.ins.hide() ; \n        \n\n    }\n\n\n    // 普通模式\n    public static toNormal() {\n\n        if( this.mode == 1 ) return ;\n        this.mode = 1 ; \n\n        UiBagGrid.ins.showNormal() ; \n        UiBagGrid.ins.alignBgCenter() ; \n        UiBagExpandOp.ins.hide() ; \n        UiBagBottom.ins.show() ; \n\n    }\n\n\n\n}","import { UiBagCell } from \"./UiBagCell\";\nimport { UiBagGrid } from \"./UiBagGrid\";\n\n// 网格遍历器\nexport class GridTraverse {\n\n    public static exe( cb : ( cell : UiBagCell )=>void ) {\n\n        let grid = UiBagGrid.ins.grid ; \n        for( let y = 0 ; y < grid.length ; ++y ) {\n            let row = grid[ y ] ;\n            for( let x = 0 ; x < row.length ; ++x ) {\n                let cell = row[ x ] ;\n\n                cb( cell ) ;\n\n            }\n        }\n\n    }\n\n    public static exe2( cb : ( cell : UiBagCell )=>boolean ) {\n\n        let grid = UiBagGrid.ins.grid ; \n        for( let y = 0 ; y < grid.length ; ++y ) {\n            let row = grid[ y ] ;\n            for( let x = 0 ; x < row.length ; ++x ) {\n                let cell = row[ x ] ;\n\n                if( cb( cell ) == false ) return ;\n\n            }\n        }\n\n    }\n\n}","import { resources } from \"cc\";\r\nimport { BagArticle } from \"../../Bag/Article/BagArticle\";\r\nimport { UiBagBottom } from \"../../Bag/Main/UiBagBottom\";\r\nimport { UiTray } from \"../../Bag/Main/UiTray\";\r\nimport { UiBagTouch } from \"../../Bag/Touch/UiBagTouch\";\r\nimport { GameArg } from \"../GameArg\";\r\nimport { Prefab } from \"cc\";\r\nimport { instantiate } from \"cc\";\r\nimport { UiMain } from \"../../Ui/Main/UiMain\";\r\nimport { UiBagGrid } from \"../../Bag/Grid/UiBagGrid\";\r\nimport { Vec2 } from \"cc\";\r\nimport { tween } from \"cc\";\r\nimport { Vec3 } from \"cc\";\r\nimport { Node } from \"cc\";\r\nimport { UITransform } from \"cc\";\r\nimport { BlockInputEvents } from \"cc\";\r\nimport { Tween } from \"cc\";\r\nimport { UiGuideCover } from \"../../../Common/Guide/UiGuideCover\";\r\nimport { Input } from \"cc\";\r\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\r\nimport { BagArticleGridPlaceByPos } from \"../../Bag/Article/BagArticleGridPlaceByPos\";\r\nimport { UiTextBox } from \"./UiTextBox\";\r\nimport { Lang } from \"../../../Common/Misc/Lang\";\r\nimport { languages } from \"../../../../resources/i18n/en\";\r\nimport { GuideData } from \"./GuideData\";\r\n\r\n\r\n// 引导\r\nexport class Guide {\r\n\r\n    // 预制\r\n    public static pf : Node ; \r\n    public static hand : Node ; \r\n\r\n    public static textBox : UiTextBox = null ;  \r\n\r\n    // 引导 遮挡\r\n    public static cover : UiGuideCover ; \r\n\r\n    public static blockInput : Node ; \r\n\r\n\r\n\r\n    // 开局的显示\r\n    public static exe1() {\r\n\r\n        let b = GameArg.ins.mainIdx == 1 ; \r\n        if( b == false ) return ; \r\n\r\n        GuideData.ins = new GuideData() ; \r\n        GuideData.ins.load() ; \r\n        if( GuideData.ins.hasRecord1() == true ) {\r\n            GuideData.ins = null ; \r\n            return ; \r\n        }\r\n\r\n\r\n        // 不显示底部按钮\r\n        UiBagBottom.ins.hide( ) ; \r\n\r\n        // 生成指定的装备\r\n        UiTray.ins.clear() ; \r\n        // 2格 竖着\r\n        UiTray.ins.addArticleById( \"004_1\" ) ;\r\n        UiTray.ins.addArticleById( \"005_1\" ) ;\r\n        UiTray.ins.addArticleById( \"002_1\" ) ;\r\n        \r\n        // 生成一个节点挡住所有的触摸\r\n        let blockInput = new Node( \"BlockInput\" ) ; \r\n        this.blockInput = blockInput ; \r\n        blockInput.addComponent( UITransform ).setContentSize( 99999 , 99999 ) ; \r\n        blockInput.addComponent( BlockInputEvents ) ; \r\n        blockInput.setParent( UiMain.ins.root , false ) ;\r\n        blockInput.position = Vec3.ZERO ; \r\n\r\n        // 加载引导的\r\n        let list = [ \r\n            \"Game/Misc/Guide\" , \r\n            \"Common/Ui/GuideCover\" , \r\n         ] ;\r\n        resources.load( list , Prefab , ( err , data )=>{\r\n\r\n            // blockInput.destroy() ; \r\n\r\n            // 初始化引导资源\r\n            let root = instantiate( data[ 0 ] ) ; \r\n            this.pf = root ; \r\n            let hand = this.hand = root.getChildByPath( \"Hand\" ) ; \r\n            hand.setParent( UiMain.ins.root , false ) ; \r\n\r\n            let rootCover = instantiate( data[ 1 ] ) ; \r\n            this.cover = new UiGuideCover() ; \r\n            this.cover.init( rootCover ) ; \r\n            this.cover.root.setParent( UiMain.ins.root , false ) ; \r\n            this.cover.root.active = false ; \r\n\r\n            // 文本框\r\n            this.textBox = new UiTextBox() ; \r\n            this.textBox.init( root.getChildByPath( \"Text\" ) ) ; \r\n            this.textBox.root.active = false ; \r\n            this.textBox.root.setParent( UiMain.ins.root , false ) ;\r\n\r\n\r\n            this.guideStep0( root.getChildByPath( \"Ui1\" ) ) ; \r\n\r\n            // this.guideRefresh() ; \r\n            \r\n        } ) ; \r\n\r\n    }\r\n\r\n    // 开始出现的文字\r\n    private static guideStep0( root : Node ) {\r\n\r\n        root.setParent( UiMain.ins.root , false ) ; \r\n        root.position = Vec3.ZERO ; \r\n\r\n        let cover = root.getChildByPath( \"Cover\" ) ; \r\n        cover.getComponent( UITransform ).setContentSize( 9999 , 9999 ) ; \r\n        cover.on( Input.EventType.TOUCH_END , ()=>{\r\n            root.destroy() ; \r\n            this.guideStep1() ; \r\n        } ) ; \r\n\r\n        // 提示字体缩放\r\n        let prompt = root.getChildByPath( \"Prompt\" ) ; \r\n        tween( prompt ).sequence(\r\n            tween( prompt ).to( 0.5 , { scale : new Vec3( 1.2 , 1.2 , 1.2 ) } ) , \r\n            tween( prompt ).to( 0.5 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } )\r\n        ).repeatForever().start() ; \r\n\r\n    }\r\n\r\n    // 第一阶段引导\r\n    private static guideStep1() {\r\n\r\n        this.textBox.root.active = true ; \r\n        this.textBox.root.position = new Vec3( 0 , 600 ) ; \r\n        this.textBox.label.string = Lang.get( \"Game_Guide_3\" ) ; \r\n\r\n        let blockInput = this.blockInput ; \r\n        blockInput.active = false ; \r\n\r\n        // 第一个的引导\r\n        this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 1 , 2 ) , ()=>{\r\n\r\n            // 隔一段时间，正确定位到下一个物件位置。\r\n            blockInput.active = true ; \r\n            tween( UiMain.ins.root ).delay( 0.2 ).call( ()=>{\r\n\r\n                blockInput.active = false ; \r\n                this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 2 , 2 ) , ()=>{\r\n\r\n                    // 隔一段时间，正确定位到下一个物件位置。\r\n                    blockInput.active = true ; \r\n                    tween( UiMain.ins.root ).delay( 0.2 ).call( ()=>{\r\n\r\n                        blockInput.active = false ; \r\n                        this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 2 , 3 ) , ()=>{\r\n    \r\n                            blockInput.active = true ; \r\n                            this.hand.active = false ; \r\n\r\n                            // 不允许拖动\r\n                            UiBagTouch.ins.root.active = false ; \r\n\r\n\r\n                            this.guideBtnRefresh() ; \r\n\r\n                        } ) ; \r\n\r\n                    } ).start() ; \r\n\r\n                } ) ; \r\n\r\n            } ).start() ; \r\n\r\n\r\n        } ) ; \r\n\r\n    }\r\n\r\n    // 引导 刷新装备\r\n    private static guideBtnRefresh() {\r\n\r\n        this.textBox.root.active = true ; \r\n        this.textBox.root.position = new Vec3( 0 , -600 ) ; \r\n        this.textBox.label.string = Lang.get( \"Game_Guide_4\" ) ; \r\n\r\n        // 引导遮罩自带防点击。\r\n        this.blockInput.active = false ; \r\n\r\n        let btn = UiBagBottom.ins.btnRefresh ; \r\n        // btn.active = true ; \r\n\r\n        // 复制一个按钮出来\r\n        let btn2 = instantiate( btn ) ; \r\n        btn2.active = true ; \r\n        btn2.setParent( UiMain.ins.root , true ) ;\r\n        btn2.worldPosition = btn.parent.worldPosition ; \r\n        SoundBtnClickSetter.exe( btn2 ) ;\r\n        btn2.on( Input.EventType.TOUCH_END , ()=>{\r\n            btn2.destroy() ; \r\n            this.cover.root.active = false ; \r\n\r\n            this.textBox.root.active = false ; \r\n\r\n            // 生成指定的装备\r\n            UiTray.ins.clear() ; \r\n            // 2格 竖着\r\n            UiTray.ins.addArticleById( \"004_1\" ) ;\r\n            UiTray.ins.addArticleById( \"006_1\" ) ;\r\n            UiTray.ins.addArticleById( \"003_1\" ) ;\r\n\r\n            this.blockInput.active = true ; \r\n            tween( UiMain.ins.root ).delay( 0.5 ).call( ()=>{\r\n                this.blockInput.active = false ; \r\n                this.guideStep2() ; \r\n\r\n            } ).start() ; \r\n            \r\n\r\n        } ) ; \r\n\r\n        this.coverBtn( btn2 ) ; \r\n\r\n    }\r\n\r\n    // 合成引导\r\n    private static guideStep2() {\r\n\r\n        this.textBox.root.active = true ; \r\n        this.textBox.root.position = new Vec3( 0 , 600 ) ; \r\n        this.textBox.label.string = Lang.get( \"Game_Guide_5\" ) ; \r\n\r\n        let blockInput = this.blockInput ; \r\n        blockInput.active = false ; \r\n\r\n        UiBagTouch.ins.root.active = true ; \r\n\r\n        this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 1 , 2 ) , ()=>{\r\n\r\n            // 隔一段时间，正确定位到下一个物件位置。\r\n            blockInput.active = true ; \r\n            tween( UiMain.ins.root ).delay( 0.2 ).call( ()=>{\r\n\r\n                blockInput.active = false ; \r\n                this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 1 , 4 ) , ()=>{\r\n\r\n                    // 隔一段时间，正确定位到下一个物件位置。\r\n                    blockInput.active = true ; \r\n                    tween( UiMain.ins.root ).delay( 0.2 ).call( ()=>{\r\n\r\n                        blockInput.active = false ; \r\n                        this.guideTrayToGrid( UiTray.ins.articles[ 0 ] , new Vec2( 3 , 2 ) , ()=>{\r\n    \r\n                            blockInput.active = true ; \r\n                            this.hand.active = false ; \r\n                            this.textBox.root.active = false ; \r\n\r\n                            // 不允许拖动\r\n                            UiBagTouch.ins.root.active = false ; \r\n\r\n\r\n                            this.guideBtnStart() ; \r\n\r\n                        } ) ; \r\n\r\n                    } ).start() ; \r\n\r\n                } ) ; \r\n\r\n            } ).start() ; \r\n\r\n        } ) ;\r\n\r\n    }\r\n\r\n    // 引导点击开始游戏\r\n    private static guideBtnStart() {\r\n\r\n        this.textBox.root.active = true ; \r\n        this.textBox.root.position = new Vec3( 0 , -600 ) ; \r\n        this.textBox.label.string = Lang.get( \"Game_Guide_6\" ) ; \r\n\r\n        // 引导遮罩自带防点击。\r\n        this.blockInput.active = false ; \r\n\r\n        let btn = UiBagBottom.ins.btnStart ; \r\n\r\n        // 复制一个按钮出来\r\n        let btn2 = instantiate( btn ) ; \r\n        btn2.active = true ; \r\n        btn2.setParent( UiMain.ins.root , true ) ;\r\n        btn2.worldPosition = btn.parent.worldPosition ; \r\n        SoundBtnClickSetter.exe( btn2 ) ;\r\n        btn2.on( Input.EventType.TOUCH_END , ()=>{\r\n            btn2.destroy() ; \r\n            this.textBox.root.active = false ; \r\n            this.complete() ;\r\n            btn.emit( Input.EventType.TOUCH_END );\r\n            \r\n        } ) ; \r\n\r\n        this.coverBtn( btn2 ) ; \r\n\r\n    }\r\n\r\n    private static complete() {\r\n\r\n        // 还原触摸\r\n        UiBagTouch.ins.onBeforeArticlePlace = null ; \r\n        UiBagTouch.ins.onBeforeArticleSelect = null ; \r\n        UiBagTouch.ins.onCompleteArticlePlace = null ; \r\n\r\n        // 删除多余的\r\n        this.blockInput.destroy() ; \r\n        this.cover.root.destroy() ; \r\n        this.hand.destroy() ; \r\n\r\n        // 记录标记\r\n        GuideData.ins.record1() ; \r\n        GuideData.ins.save() ; \r\n        GuideData.ins = null ; \r\n\r\n    }\r\n\r\n    // 遮罩按钮\r\n    private static coverBtn( btn : Node ) {\r\n\r\n        btn.active = true ; \r\n\r\n        // 目的大小\r\n        let size = btn.getComponent( UITransform ).contentSize.clone() ; \r\n\r\n        // 初始大小\r\n        let size1 = size.clone() ;\r\n        size1.width *= 15 ; size1.height *= 15 ; \r\n        size1.set( 3000 , 3000 ) ; \r\n\r\n        // 动画显示\r\n        this.cover.root.active = true ; \r\n        this.cover.mask.worldPosition = btn.worldPosition ; \r\n        this.cover.maskUiTrans.setContentSize( size1 ) ; \r\n        this.cover.showAnim( btn.worldPosition , size , 0.5 ) ;\r\n\r\n    }\r\n\r\n    // 引导拖放\r\n    private static guideTrayToGrid( article : BagArticle , coordTarget : Vec2 , onComplete : ()=>void ) {\r\n\r\n        let idx = UiTray.ins.articles.indexOf( article ) ; \r\n\r\n        let articleTarget = UiTray.ins.articles[ idx ] ; \r\n        let pos1 = articleTarget.view.root.worldPosition ; \r\n        let cell = UiBagGrid.ins.getCell( coordTarget ) ; \r\n        let pos2 = cell.root.worldPosition ; \r\n        \r\n        this.hand.active = true ; \r\n        this.handMove( this.hand , pos1 , pos2 ) ; \r\n\r\n        // 设置只允许选中\r\n        UiBagTouch.ins.onBeforeArticleSelect = ( article : BagArticle )=>{\r\n            return articleTarget == article ; \r\n        } ;\r\n\r\n        // 设置固定放置\r\n        UiBagTouch.ins.onBeforeArticlePlace = ( article : BagArticle )=>{\r\n\r\n            let cells = BagArticleGridPlaceByPos.getCellsPlace( article ) ; \r\n\r\n            let b = cells != null && \r\n                cells.find( ( e )=>{ return e.coord.equals( coordTarget ) ; } ) != null ;\r\n            if( b == false ) {\r\n\r\n                // 没有放对位置\r\n\r\n                // 放回到托盘中\r\n                UiTray.ins.insertArticleByIndex( article , idx ) ; \r\n                UiBagTouch.ins.towerAuraHint.clear( ) ; \r\n\r\n                return false ;\r\n            }\r\n\r\n            // 此刻还没真正放置完成，后面的逻辑才会，延迟等放置完成后再通知。\r\n            tween( UiMain.ins.root ).delay( 0.01 ).call( onComplete ).start( ) ;\r\n\r\n            return true ;\r\n\r\n        } ;\r\n\r\n    }\r\n\r\n    // 手指运动\r\n    private static handMove( hand : Node , pos1 : Vec3 , pos2 : Vec3  ) {\r\n\r\n        let duration = pos1.clone().subtract( pos2 ).length() / 400 ;\r\n\r\n        // 不复制出来的话，会跟着位置进行设置。\r\n        let pos12 = pos1.clone() ; \r\n\r\n        hand.worldPosition = pos12 ; \r\n\r\n        Tween.stopAllByTarget( hand ) ; \r\n\r\n        tween( hand ).sequence(\r\n\r\n            tween( hand ).call( ()=>{\r\n                hand.worldPosition = pos12 ; \r\n            } ) , \r\n\r\n            tween( hand ).to( duration , { worldPosition : pos2 } ) , \r\n\r\n            tween( hand ).delay( 0.1 ) , \r\n\r\n        ).repeatForever().start() ; \r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n","import { sys } from \"cc\";\r\n\r\n// 引导记录数据\r\nexport class GuideData {\r\n\r\n    public static ins : GuideData = null ; \r\n\r\n    // 记录1\r\n    public record1() {\r\n\r\n        // 用值的原因是，可以换个值，让下次重新执行引导。\r\n        this.data.set( \"Record1\" , \"2024.11.11\" ) ; \r\n\r\n    }\r\n\r\n    // 是否有记录1\r\n    public hasRecord1() {\r\n\r\n        let str = this.data.get( \"Record1\" ) ;\r\n        if( str == null || str == \"\" ) return false ; \r\n        return str == \"2024.11.11\" ; \r\n\r\n    }\r\n\r\n    public load() {\r\n\r\n        let str = sys.localStorage.getItem( \"GameGuide\" ) ;\r\n        if( str == null || str == \"\" ) return ; \r\n        \r\n        let json = JSON.parse( str ) ;\r\n        for( let k in json ) {\r\n            this.data.set( k , json[ k ] ) ; \r\n        } // end for\r\n\r\n    }\r\n\r\n    public save() {\r\n\r\n        let json = {} ; \r\n        for( let kv of this.data ) {\r\n            json[ kv[0] ] = kv[1] ;\r\n        } ;\r\n        let str = JSON.stringify( json ) ;\r\n\r\n        sys.localStorage.setItem( \"GameGuide\" , str ) ;\r\n\r\n    }\r\n\r\n    private data = new Map< string , string >() ; \r\n\r\n}","import { UITransform, Vec2, Vec3 } from \"cc\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { GridTraverse } from \"../Grid/GridTraverse\";\n\n// 击中测试\nexport class HitTest {\n\n    public static hit( posWorld : Vec2 ) {\n\n        let article = HitTest.hitTray( posWorld ) ;\n        if( article != null ) return article ;\n        \n        article = HitTest.hitGrid( posWorld ) ;\n        return article ;\n        \n    }\n\n    // 击中托盘的物品\n    public static hitTray( posWorld : Vec2 ) : BagArticle {\n\n        let pos = new Vec3( posWorld.x , posWorld.y ) ;\n        let pos2 = UiTray.ins.root.getComponent( UITransform ).convertToNodeSpaceAR( pos ) ;\n\n        let articles = UiTray.ins.articles ;\n        for( let a of articles ) {\n            let v = a.view.root.position.clone().subtract( pos2 ) ;\n            if( v.lengthSqr() < 100 * 100 ) {\n                return a ;\n            }\n        }\n\n        return null ;\n\n    }\n\n    // 击中网格的物品\n    public static hitGrid( posWorld : Vec2 ) : BagArticle {\n\n        let lenMin = Number.MAX_VALUE ; ;\n\n        let article : BagArticle = null ; \n        let pos = new Vec3( posWorld.x , posWorld.y ) ; \n        GridTraverse.exe( ( cell )=>{\n\n            // let v = UiTray.ins.root.getComponent( UITransform ).convertToNodeSpaceAR( pos ) ; \n            let v = cell.root.worldPosition.clone().subtract( pos ) ; \n            let len = v.lengthSqr() ; \n            if( Math.abs( v.x ) < 150 && Math.abs( v.y ) < 150 && len < lenMin ) {\n                lenMin = len ;\n                article = cell.article ; \n            }\n\n        } ) ;\n\n        return article ; \n\n    }\n\n}","import { director, find, input, Input, Node, tween, UITransform, Vec2, Vec3 } from \"cc\";\nimport { UiBag } from \"../Bag/Main/UiBag\";\nimport { Player } from \"../World/2.Td/Player/Player\";\nimport { Test } from \"./Test\";\nimport { WorldNode, WorldNodeInit } from \"../World/1.Base/Support/Misc/WorldNode\";\nimport { UiMain } from \"../Ui/Main/UiMain\";\nimport { RoleMgr } from \"../World/1.Base/Role/Base/RoleMgr\";\nimport { LevelLoad } from \"./LevelLoad/LevelLoad\";\nimport { CollisionHandler } from \"../World/1.Base/Collision/CollisionHandler\";\nimport { BagView } from \"../World/2.Td/Bag/BagView\";\nimport { UiBagBottom } from \"../Bag/Main/UiBagBottom\";\nimport { BagTrayAricleGen } from \"../World/2.Td/Bag/BagTrayAricleGen\";\nimport { GameStart } from \"../World/2.Td/Flow/GameStart\";\nimport { EnemyMovePath } from \"../World/2.Td/Flow/EnemyMovePath\";\nimport { CfgLevelWaveMgr } from \"../World/2.Td/Level/CfgLevelWaveMgr\";\nimport { LevelCtrl } from \"../World/2.Td/Level/LevelCtrl\";\nimport { BulletBounceRect } from \"../World/1.Base/Bullet/BulletBounceRect\";\nimport { PlayerRoleInit } from \"../World/2.Td/Player/PlayerRole\";\nimport { FeatureExtractPool } from \"../Ui/Popup/FeatureSel/FeatureExtract\";\nimport { BulletMgr } from \"../World/1.Base/Bullet/BulletMgr\";\nimport { UiTray } from \"../Bag/Main/UiTray\";\nimport { GridModeTransition } from \"../Bag/Grid/GridModeTransition\";\nimport { GridTraverse } from \"../Bag/Grid/GridTraverse\";\nimport { UiToast } from \"../../Common/Ui/UiToast\";\nimport { Lang } from \"../../Common/Misc/Lang\";\nimport { UiBagExpandOp } from \"../Bag/Main/UiBagExpandOp\";\nimport { PlayerInit } from \"../World/2.Td/Player/PlayerInit\";\nimport { UiDialog } from \"../../Common/Ui/UiDialog\";\nimport { Ad } from \"../../Common/Ad/Ad\";\nimport { UiMoney001 } from \"../Ui/Main/UiMoney001\";\nimport { MoneyFly } from \"../../Common/Misc/MoneyFly\";\nimport { GameArg } from \"./GameArg\";\nimport { FrameCall } from \"../World/1.Base/Support/Misc/FrameCall\";\nimport { MergeDefinition } from \"../Bag/Merge/MergeDefinition\";\nimport { Stats } from \"../World/1.Base/Support/Misc/Stats\";\nimport { Music } from \"../../Common/Audio/Music\";\nimport { Guide } from \"./Guide/Guide\";\n\nexport class Init {\n\n    public static exe() {\n\n        LevelLoad.load( ) ;\n\n        WorldNodeInit.exe() ; \n\n        // 载入关卡波数\n        let id = GameArg.ins.levelId ; \n        LevelCtrl.ins = new LevelCtrl() ; \n        LevelCtrl.ins.levelData = CfgLevelWaveMgr.data.get( id ) ; \n      \n        FrameCall.ins = new FrameCall() ; \n\n        FeatureExtractPool.ins = new FeatureExtractPool() ; \n        FeatureExtractPool.ins.init() ; \n\n        PlayerInit.exe() ; \n\n        UiMain.ins = new UiMain() ; \n        UiMain.ins.init() ; \n        \n        CollisionHandler.init() ; \n\n        EnemyMovePath.ins.init() ; \n\n        RoleMgr.ins = new RoleMgr() ; \n\n        BulletMgr.ins = new BulletMgr() ; \n\n        // 初始化家\n        // DenFactory.create( WorldNode.ins.root.getChildByPath( \"Den\" ) ) ;\n        PlayerRoleInit.init() ; \n\n        BulletBounceRect.ins.init() ; \n\n        this.initBag() ; \n\n        Stats.ins = new Stats() ; \n\n        Test.exe() ; \n        \n        Music.ins.game() ; \n\n        Guide.exe1() ; \n\n        // 离开场景清理\n        director.getScene().on( Node.EventType.NODE_DESTROYED , ()=>{\n            console.log( \"销毁\" ) ;\n            Deinit.exe() ; \n        } ) ;\n\n    }\n\n\n    public static initBag() {\n\n        // 初始化背包部分\n        UiBag.createIns( find( \"Canvas/World/Bag\" ) ) ;\n\n        // 初始化按钮\n        UiBagBottom.ins = new UiBagBottom() ; \n        UiBagBottom.ins.init( UiMain.ins.root.getChildByPath( \"Ui/BagBottom\" ) ) ;     \n\n        // 初始化托盘\n        UiTray.ins = new UiTray() ; \n        UiTray.ins.init( UiMain.ins.root.getChildByPath( \"Ui/BagTray\" ) ) ; \n\n        // 初始化扩展操作\n        UiBagExpandOp.ins = new UiBagExpandOp() ; \n        UiBagExpandOp.ins.init( UiMain.ins.root.getChildByPath( \"Ui/BagExpandOp\" ) ) ; \n   \n        // 记录的 不启用合并的，都不启用。合并恢复。\n        for( let kv of MergeDefinition.ins.allowData ) {\n            MergeDefinition.ins.allowData.set( kv[0] , false ) ; \n        }\n\n        GridModeTransition.init() ; \n        \n\n        // 设置为背包整理的视图\n        BagView.enterDirect() ; \n\n        let uiBottom = UiBagBottom.ins ; \n        uiBottom.btnStart.on( Input.EventType.TOUCH_END , ()=>{\n\n            // 判断是否可以开始游戏\n            let hasArticle = false ; \n            GridTraverse.exe2( ( cell )=>{\n                if( cell.article != null ) {\n                    hasArticle = true ; \n                    return false ; \n                }\n                return true ; \n            } ) ;\n            if( hasArticle == false ) {\n                UiToast.show( UiMain.ins.root , Lang.get( \"Game_Prompt_Deploy\" ) ) ; \n                return ; \n            }\n           \n\n            BagView.leave() ; \n\n            GameStart.start() ; \n\n        } ) ;\n        \n\n        // uiBottom.btnRefresh.off( Input.EventType.TOUCH_END ) ; \n        uiBottom.btnRefresh.on( Input.EventType.TOUCH_END , ()=>{\n\n            let m = Player.ins.money001 - 15 ; \n            if( m < 0 ) {\n                // 货币不足的提示\n\n                let dial = UiDialog.create( UiMain.ins.root ) ; \n                dial.txt.string = \"阳光不足，\\n是否观看广告，获得30阳光\" ; \n                dial.show() ; \n                dial.btnOK.on( Input.EventType.TOUCH_END , ()=>{\n                    // 看广告\n\n                    Ad.ins.rewardShow( ()=>{\n\n                        Player.ins.money001 += 30 ;\n                        UiMoney001.ins.refresh() ; \n\n                        // 货币飞\n                        MoneyFly.money001Fly2( UiMain.ins.root , Vec3.ZERO , UiMoney001.ins.icon ) ; \n\n                    } ) ;\n\n\n                } ) ;\n\n                return ; \n            }\n            Player.ins.money001 = m ;\n            UiMoney001.ins.refresh() ; \n\n            BagTrayAricleGen.ins.gen() ; \n\n        } ) ; \n        \n\n    }\n\n}\n\n\n\nexport class Deinit {\n\n    public static exe() {\n\n        RoleMgr.ins = null ; \n\n        BulletMgr.ins = null ; \n\n    }\n\n}","\nimport { AccountPersist } from '../../Common/Account/AccountPersist';\nimport { ResLoad } from './ResLoad';\nimport { director, find, Label } from 'cc';\nimport { Lang } from '../../Common/Misc/Lang';\nimport { UiKeyboard } from './UiKeyboard';\nimport { Account } from '../../Common/Account/Account';\nimport { UiToast } from '../../Common/Ui/UiToast';\nimport { UiWin } from '../../Game/Ui/Popup/Settle/UiWin';\nimport { UiLose } from '../../Game/Ui/Popup/Settle/UiLose';\nimport { AdInit } from '../../Common/Ad/Misc/AdInit';\nimport { WxHelper } from '../../SL/Cocos/Wx/WxHelper';\nimport { UiBar } from '../../Game/Ui/Bar/UiBar';\nimport { PlatformInit } from '../../Common/Platform/PlatformInit';\nimport { StaminaRecoveryPersist } from '../../Common/Misc/StaminaRecovery';\nimport { AudioSettingsPersist } from '../../Common/Audio/AudioSettingsPersist';\nimport { DateTimeMgr } from '../../SL/Common/Misc/DateTimeMgr';\nimport { DailyCheckinDataPersist } from '../../Home/Ui/Popup/DailyCheckin/DailyCheckinData';\nimport { assetManager } from 'cc';\nimport { log } from 'cc';\nimport { TextAsset } from 'cc';\nimport { JsonAsset } from 'cc';\nimport { Test } from './Test';\n\n\nexport class Init {\n\n    public static exe() {\n\n        /*\n            开启动态合图\n            https://docs.cocos.com/creator/3.8/manual/zh/advanced-topics/dynamic-atlas.html\n        */\n        // macro.CLEANUP_IMAGE_CACHE = false;\n        // DynamicAtlasManager.instance.enabled = true;\n        \n        // 时间\n        DateTimeMgr.ins = new  DateTimeMgr() ; \n        DateTimeMgr.ins.dtStart = new Date( Date.now() ) ;\n\n        Lang.init() ;   \n\n        let _wxHelper=new WxHelper();\n        WxHelper.enableShareMenu() ; \n        _wxHelper.initShare();\n        _wxHelper.CheckIsShare();\n\n        UiKeyboard.ins = new UiKeyboard() ; \n        UiKeyboard.ins.init() ; \n\n        // 进度条\n        let ProgressBar = new UiBar() ;\n        ProgressBar.init( find( \"Canvas/Progress\" ) );\n        ProgressBar.bar.fillRange = 0 ;\n        let txt = ProgressBar.root.getComponentInChildren( Label ) ; \n\n        // 载入资源\n        ResLoad.onProgress = ( val : number )=>{\n\n            // 文字更新\n            let val2 = Math.floor( val * 100 ) ;\n            txt.string = val2 + \" %\" ; \n            \n            // 进度条\n            ProgressBar.bar.fillRange = val / 1 ; \n            \n        } ;\n        ResLoad.exe( this.onCompleteResLoad.bind( this ) ) ;\n        \n        /*\n            加载一些核心玩法的内容。\n            不占用第一次启动的时间。\n        */ \n        UiWin.loadPf() ; \n        UiLose.loadPf() ; \n        UiToast.loadPf() ; \n\n        PlatformInit.exe() ; \n\n        Test.exe() ; \n        \n    }\n\n    private static onCompleteResLoad() {\n\n        AdInit.exe() ; \n\n        director.loadScene( \"Home\" );\n\n        Account.ins.init() ;\n        AccountPersist.load() ; \n        StaminaRecoveryPersist.load() ; \n        AudioSettingsPersist.load() ; \n        DailyCheckinDataPersist.load() ; \n\n    }\n\n\n}","import { UiMain } from \"../Ui/Main/UiMain\";\nimport { World } from \"../World/World\";\nimport { ArticleUnlockLevel } from \"../Misc/ArticleUnlockLevel\";\nimport { Music } from \"../../Common/Audio/Music\";\n\nexport class Init {\n\n    public static exe() {\n\n        Music.ins.home() ; \n\n        UiMain.ins.init() ; \n        \n        // World.ins = new World() ; \n        // World.ins.init() ; \n\n        ArticleUnlockLevel.exe() ; \n        \n    }\n\n}\n\n","import { randomRangeInt, sys } from \"cc\";\n// import { UiTtSidebarReward } from \"../../Home/TtSidebarReward/UiTtSidebarReward\";\n// import { TtSidebarRewardInit } from \"../../Home/TtSidebarReward/TtSidebarRewardInit\";\n\n\n\n\n// 分享设置\nexport class InitTt {\n\n    public static exe() {\n\n        // TtSidebarRewardInit.exe() ; \n\n        this.enableShareMenu() ;\n\n        // // @ts-ignore\n        // let info = tt.getSystemInfoSync();\n        // console.log( info ) ;\n        \n    }\n\n    // 开启分享按钮\n    public static enableShareMenu() {\n\n        // @ts-ignore\n        tt.showShareMenu({\n            success(res) {\n              console.log(\"已成功显示转发按钮\");\n            },\n            fail(err) {\n              console.log(\"showShareMenu 调用失败\", err.errMsg);\n            },\n            complete(res) {\n              console.log(\"showShareMenu 调用完成\");\n            },\n          });\n\n          \n    }\n\n\n}","import { randomRangeInt, sys } from \"cc\";\n\n\n\n// 分享设置\nexport class InitWx {\n\n    public static exe() {\n        this.enableShareMenu() ;\n        // this.setShareAppMessage() ;\n\n    }\n\n    // 开启分享按钮\n    public static enableShareMenu() {\n\n        // @ts-ignore\n        wx.showShareMenu({\n            withShareTicket: true,\n            menus: ['shareAppMessage', 'shareTimeline'] \n          }) ;\n\n    }\n\n    // 设置分享的图片\n    public static setShareAppMessage() {\n\n        let id = \"YI8fyUsLSca1KjLA7jWVMw==\" ;\n        let url = \"https://mmocgame.qpic.cn/wechatgame/aEQNKrkEbHicZunEoHAWKw65HtBMlPVXhicgoAQxHrESKeeuOk4naCcB7pMMicYXxia5/0\" ;\n\n        // @ts-ignore\n        wx.onShareAppMessage(function () {\n            return {\n                title: '消除方块，智力大挑战！',\n                imageUrlId: id,\n                imageUrl: url\n            }\n        }) ;        \n\n    }\n\n\n}","import { CfgItem } from \"../Cfg/CfgItem\";\n\n\n// 物品数据\nexport class ItemData {\n\n    // 物品 ID \n    public id : string ; \n\n    // 数量\n    public count = 0 ; \n\n    // 物品配置\n    public cfg : CfgItem ; \n\n    public constructor( id : string = null , count : number = 0 ) {\n        this.id = id ;\n        this.count = count ; \n    }\n\n}","import { randomRangeInt } from \"cc\";\nimport { WeightProbability } from \"../../SL/Common/Misc/WeightProbability\";\nimport { CfgItemDraw } from \"../Cfg/CfgItemDraw\";\nimport { ItemData } from \"./ItemData\";\nimport { CfgItem, CfgItemMgr } from \"../Cfg/CfgItem\";\nimport { ItemType } from \"./ItemType\";\n\n\n\n// 物品抽取\nexport class ItemDraw {\n\n    public static exe( id : string ) : Array< ItemData > {\n\n        let ret = new Array< ItemData >() ; \n\n        let cfgItem = CfgItemDraw.data.get( id ) ;\n        if( cfgItem == null ) {\n            return ret ; \n        }\n\n        let w = new WeightProbability() ; \n\n        for( let i = 0 ; i < cfgItem.items.length ; ++i ) {\n            let cfgItemItem = cfgItem.items[ i ] ; \n            w.add( cfgItemItem.id , cfgItemItem.w ) ;\n        } // end for\n\n        let n = randomRangeInt( cfgItem.min , cfgItem.max + 1 ) ; \n        for( let i = 0 ; i < n ; ++i ) {\n            let id = w.get( ) ; \n\n            let item = ret.find( ( e )=>{ return e.id == id ; } ) ; \n            if( item == null ) {\n                item = new ItemData() ; \n                item.id = id ;\n                item.cfg = CfgItemMgr.data.get( id ) ; \n                ret.push( item ) ; \n            }\n            item.count++ ;\n\n        } // end for\n        \n        this.sort( ret ) ;\n\n        return ret ; \n\n    }\n\n    // 排序 品质\n    public static sort( items : Array< ItemData > ) {\n\n        let mapping = new Map< string , number >() ; \n        mapping.set( ItemType.Money001 , 1 ) ;\n        mapping.set( ItemType.Money002 , 2 ) ;\n        // mapping.set( ItemType.Fragment , 4 ) ;\n\n        items.sort( ( a , b )=>{\n\n            // 按照类型排序\n            let p1 = mapping.has( a.id ) ? mapping.get( a.id ) : 10 ; \n            let p2 = mapping.has( b.id ) ? mapping.get( b.id ) : 10 ; \n            if( p1 < p2 ) {\n                return -1 ;\n            }\n            else if( p1 > p2 ) {\n                return 1 ;\n            }\n\n            // 同类型。按照品质排序\n\n            if( a.cfg.quality < b.cfg.quality ) {\n                return 1 ;\n            }\n            else if( a.cfg.quality > b.cfg.quality ) {\n                return -1 ;\n            }\n\n            return 0 ; \n\n        } ) ;\n\n    }\n\n}\n\n","import { isValid } from \"cc\";\r\nimport { UiStamina } from \"../../Home/Ui/Main/Margin/UiStamina\";\r\nimport { Account } from \"../Account/Account\";\r\nimport { AccountPersist } from \"../Account/AccountPersist\";\r\nimport { ItemData } from \"./ItemData\";\r\nimport { ItemType } from \"./ItemType\";\r\nimport { UiMoney002 } from \"../../Home/Ui/Main/Margin/UiMoney002\";\r\nimport { UiMoney001 } from \"../../Home/Ui/Main/Margin/UiMoney001\";\r\n\r\n// 得到物件\r\nexport class ItemGet {\r\n\r\n    // 加入数据\r\n    public static addList( items : Array< ItemData > ) {\r\n\r\n        for( let item of items ) {\r\n\r\n            let id = item.id ; \r\n            switch( id ) {\r\n\r\n                case ItemType.Money001 : {\r\n\r\n                    Account.ins.money.money001 += item.count ; \r\n\r\n                    if( isValid( UiMoney001.ins.root ) ) {\r\n                        UiMoney001.ins.refresh() ; \r\n                    }\r\n                }\r\n                break ; \r\n\r\n                case ItemType.Money002 : {\r\n\r\n                    Account.ins.money.money002 += item.count ; \r\n\r\n                    if( isValid( UiMoney002.ins.root ) ) {\r\n                        UiMoney002.ins.refresh() ; \r\n                    }\r\n\r\n                }\r\n                break ; \r\n\r\n                case ItemType.Stamina : {\r\n\r\n                    Account.ins.stamina.current += item.count ; \r\n\r\n                    if( isValid( UiStamina.ins.root ) ) {\r\n                        UiStamina.ins.refresh() ; \r\n                    }\r\n\r\n                }\r\n                break ; \r\n\r\n                default : {\r\n\r\n                    let n = Account.ins.items.get( id ) ; \r\n                    if( n == null ) {\r\n                        n = 0 ;\r\n                    }\r\n                    n += item.count ; \r\n                    Account.ins.items.set( id , n ) ;  \r\n\r\n                }\r\n                break ; \r\n\r\n            }\r\n\r\n        } // end for\r\n        AccountPersist.save() ; \r\n\r\n    }\r\n\r\n\r\n    \r\n}","import { Account } from \"db://assets/Script/Common/Account/Account\";\nimport { ItemData } from \"db://assets/Script/Common/Item/ItemData\";\nimport { ItemType } from \"db://assets/Script/Common/Item/ItemType\";\nimport { UiToast } from \"db://assets/Script/Common/Ui/UiToast\";\nimport { UiMain } from \"../../Home/Ui/Main/UiMain\";\nimport { AccountPersist } from \"db://assets/Script/Common/Account/AccountPersist\";\nimport { isValid } from \"cc\";\nimport { UiMoney001 } from \"../../Home/Ui/Main/Margin/UiMoney001\";\nimport { UiMoney002 } from \"../../Home/Ui/Main/Margin/UiMoney002\";\nimport { UiStamina } from \"../../Home/Ui/Main/Margin/UiStamina\";\nimport { Lang } from \"../Misc/Lang\";\n\n// 物品扣减\nexport class ItemSub {\n\n    public static exe( data : Array< ItemData > ) {\n\n        let toastStayDuration = 1.5 ; \n\n        let a = Account.ins ; \n\n        for( let i = 0 ; i < data.length ; ++i ) {\n\n            let item = data[ i ] ;\n\n            switch( item.id ) {\n\n                case ItemType.Money001 : {\n\n                    if( a.money.money001 < item.count ) {\n                        UiToast.show( UiMain.ins.root , Lang.get( \"Home_Money001NotEnough\" ) , toastStayDuration ) ; \n                        return false ; \n                    }\n\n                }\n                break ; \n\n                case ItemType.Money002 : {\n\n                    if( a.money.money002 < item.count ) {\n                        UiToast.show( UiMain.ins.root , Lang.get( \"Home_Money002NotEnough\" ) , toastStayDuration ) ; \n                        return false ; \n                    }\n\n                }\n                break ; \n\n                case ItemType.Stamina : {\n\n                    if( a.stamina.current < item.count ) {\n                        UiToast.show( UiMain.ins.root , Lang.get( \"Home_SiaminaNotEnough\" ) , toastStayDuration ) ; \n                        return false ; \n                    }\n\n                }\n                break ; \n\n                default : {\n\n                    // 碎片\n                    if( item.id.startsWith( \"Fragment\" ) ) {\n\n                        let itemCount = a.items.get( item.id ) ; \n                        if( itemCount == null ) { itemCount = 0 ; } ; \n                        if( itemCount < item.count ) {\n    \n                            // 碎片不足\n                            UiToast.show( UiMain.ins.root , Lang.get( \"Home_FragmentNotEnough\" ) , toastStayDuration ) ; \n    \n                            return false ; \n\n                        }\n\n                    }\n\n\n                }\n                break ; \n\n            }\n\n\n        } // end for\n\n\n        // 实际扣减物品\n\n        for( let i = 0 ; i < data.length ; ++i ) {\n\n            let item = data[ i ] ;\n\n            switch( item.id ) {\n\n                case ItemType.Money001 : {\n                    a.money.money001 -= item.count ; \n\n                    if( isValid( UiMoney001.ins.root ) ) {\n                        UiMoney001.ins.refresh() ; \n                    }\n                }\n                break ; \n\n                case ItemType.Money002 : {\n                    a.money.money002 -= item.count ; \n\n                    if( isValid( UiMoney002.ins.root ) ) {\n                        UiMoney002.ins.refresh() ; \n                    }\n                }\n                break ; \n\n                case ItemType.Stamina : {\n                    a.stamina.current -= item.count ; \n\n                    if( isValid( UiStamina.ins.root ) ) {\n                        UiStamina.ins.refresh() ; \n                    }\n                }\n                break ; \n\n                default : {\n\n                    // 碎片\n                    if( item.id.startsWith( \"Fragment\" ) ) {\n\n                        let itemCount = a.items.get( item.id ) ; \n                        itemCount -= item.count ; \n                        a.items.set( item.id , itemCount ) ; \n\n                    }\n\n\n                }\n                break ; \n\n            }\n\n\n        } // end for\n\n        AccountPersist.save() ;\n\n\n        return true ; \n\n    }\n    \n}","\n// 物品类型\nexport enum ItemType {\n\n    None = \"None\" ,\n\n    // 货币 1。1 级货币。金币\n    Money001 = \"Money001\" , \n\n    // 货币 2。2 级货币。\n    Money002 = \"Money002\" , \n\n    // 体力\n    Stamina = \"Stamina\" , \n\n    // 装备碎片。\n    // Fragment = \"Fragment\" , \n\n}\n\n","\nimport * as i18n from 'db://i18n/LanguageData';\n\n// 语言\nexport class Lang {\n\n    public static init() {\n\n        i18n.init('zh') ; \n\n    }\n\n    public static get( key : string ) : string {\n\n        let str = i18n.t( key ) ;\n        return str ; \n\n    }\n\n}","import { director } from 'cc';\n\nexport let _language = 'zh';\n\nexport let ready: boolean = false;\n\n/**\n * 初始化\n * @param language \n */\nexport function init(language: string) {\n    ready = true;\n    _language = language;\n}\n\n/**\n * 翻译数据\n * @param key \n */\nexport function t(key: string) {\n    const win: any = window;\n    \n    if (!win.languages) {\n        return key;\n    }\n    const searcher = key.split('.');\n    \n    let data = win.languages[_language];\n    for (let i = 0; i < searcher.length; i++) {\n        data = data[searcher[i]];\n        if (!data) {\n            return '';\n        }\n    }\n    return data || '';\n}\n\nexport function updateSceneRenderers() { // very costly iterations\n    const rootNodes = director.getScene()!.children;\n    // walk all nodes with localize label and update\n    const allLocalizedLabels: any[] = [];\n    for (let i = 0; i < rootNodes.length; ++i) {\n        let labels = rootNodes[i].getComponentsInChildren('LocalizedLabel');\n        Array.prototype.push.apply(allLocalizedLabels, labels);\n    }\n    for (let i = 0; i < allLocalizedLabels.length; ++i) {\n        let label = allLocalizedLabels[i];\n        if(!label.node.active)continue;\n        label.updateLabel();\n    }\n    // walk all nodes with localize sprite and update\n    const allLocalizedSprites: any[] = [];\n    for (let i = 0; i < rootNodes.length; ++i) {\n        let sprites = rootNodes[i].getComponentsInChildren('LocalizedSprite');\n        Array.prototype.push.apply(allLocalizedSprites, sprites);\n    }\n    for (let i = 0; i < allLocalizedSprites.length; ++i) {\n        let sprite = allLocalizedSprites[i];\n        if(!sprite.node.active)continue;\n        sprite.updateSprite();\n    }\n}\n\n// 供插件查询当前语言使用\nconst win = window as any;\nwin._languageData = {\n    get language() {\n        return _language;\n    },\n    init(lang: string) {\n        init(lang);\n    },\n    updateSceneRenderers() {\n        updateSceneRenderers();\n    },\n};\n","import { RoleMgr } from \"../../1.Base/Role/Base/RoleMgr\";\nimport { LevelData } from \"./CfgLevelWaveMgr\";\nimport { WaveCtrl } from \"./WaveCtrl\";\nimport { WaveSettle } from \"./WaveSettle\";\n\n\n// 关卡级的波控制器。控制波的集合\nexport class LevelCtrl {\n\n    public static ins : LevelCtrl = null ; \n\n    // 关卡数据\n    public levelData : LevelData = null ; \n\n    // 当前运行到的波索引。从 1 开始\n    public currentWaveIdx = 1 ; \n\n    // 开始\n    public start() {\n\n        this.startWave() ; \n\n    }\n\n    public reset() {\n        this.currentWaveIdx = 1 ; \n    }\n\n    // 启动一波\n    public startWave() {\n\n        let wave = this.levelData.waves[ this.currentWaveIdx ] ; \n\n        WaveCtrl.ins.data = wave ; \n        WaveCtrl.ins.onComplete = this.onCompleted_Wave.bind( this ) ; \n        WaveCtrl.ins.start() ; \n\n        this.state = 1 ; \n\n    }\n\n    // 一波控制出兵完成\n    private onCompleted_Wave() {\n\n        this.currentWaveIdx++ ; \n        \n        this.state = 2 ; \n\n    }\n\n    public update() {\n\n        switch( this.state ) {\n\n            case 1 : {\n                // 执行出兵控制\n                WaveCtrl.ins.update() ; \n            }\n            break ; \n\n            case 2 : {\n                // 检测一波的怪是否打完\n                this.updateWaveEnemy() ; \n            }\n            break ; \n\n        }\n\n    }\n\n    private updateWaveEnemy() {\n\n        if( RoleMgr.ins.allEnemies.length > 0 ) return ; \n\n        this.state = 0 ; \n\n        // 清完了一波的怪\n        this.onClearWaveAllEnemies() ; \n\n    }\n\n    // 清完一波的所有敌人\n    private onClearWaveAllEnemies() {\n\n        WaveSettle.exe() ; \n\n    }\n\n    private state = 0 ; \n\n}\n\n","import { find, instantiate, Prefab, resources, Vec3 } from \"cc\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\nimport { World } from \"../../../Home/World/World\";\n\n// 关卡载入\nexport class LevelLoad {\n\n    // 关卡地图预制\n    public static pfMap : Prefab ;\n\n    public static load( ) {\n\n        this.load2() ; \n\n    }\n\n    // 替换地面图。纯换图做法\n    public static load2() {\n\n        // 删除之前的 替换\n        let layer0 = find( \"Canvas/World/Layer0\" ) ; \n        if( layer0 != null ) {\n            layer0.destroy() ; \n        }\n\n        let node = instantiate( this.pfMap ) ;\n        node.name = \"Layer0\" ; \n        node.setParent( find( \"Canvas/World\" ) , false ) ; \n        node.position = Vec3.ZERO ; \n        node.setSiblingIndex( 0 ) ;\n\n    }\n\n}","import { Lang } from \"../../../../Common/Misc/Lang\";\n\n\nexport class LevelString {\n\n    public static getName( id : string ) : string {\n\n        let key = \"MainLevel_Name_\" + id ; \n        let str = Lang.get( key ) ; \n        return str ; \n\n    }\n\n    public static getMainLevelName( idx : number ) : string {\n\n        let key = \"MainLevel_Name_\" + ( idx + 1 ) ; \n        let str = Lang.get( key ) ; \n        return str ; \n\n    }\n\n}","import { CurrentMax } from \"../../Support/SimpleStruct/CurrentMax\";\n\nexport class Life\n{\n    // 是否是活着的。\n    public get isAlive() : boolean { return this.hp.current > 0 ; }\n\n    // 是否是死亡的。\n    public get isDead() : boolean { return this.hp.current <= 0 ; }\n\n    // 血量\n    public hp = new CurrentMax();\n\n    public add( n : number ) {\n\n        // 只能加入整数\n        n = Math.floor( n ) ;\n\n        this.hp.current += n ; \n\n        // 不能超过最大值\n        if( this.hp.current > this.hp.max ) {\n            this.hp.current = this.hp.max ; \n        }\n\n    }\n\n    //// 恢复\n    //public Recovery recovery = new Recovery();\n\n    // 防御\n    // public Defense defense = new Defense();\n\n\n}","\r\n\r\nexport class ListHelper {\r\n\r\n    // 添加元素。如果列表已经存在，则不重复添加。\r\n    public static addUniquely< T >( list : Array< T > , e : T ) {\r\n\r\n        let idx = list.indexOf( e ) ; \r\n        if( idx != -1 ) return ; \r\n\r\n        list.push( e ) ; \r\n\r\n    }\r\n\r\n    // 删除指定元素\r\n    public static remove< T >( list : Array< T > , e : T ) {\r\n\r\n        let idx = list.indexOf( e ) ; \r\n        if( idx == -1 ) return ; \r\n        list.splice( idx , 1 ) ; \r\n\r\n    }\r\n\r\n    public static clear< T >( list : Array< T > ) {\r\n        list.splice( 0 , list.length ) ; \r\n    }\r\n\r\n}","import { Asset } from \"cc\";\r\n\r\n// 载入器基类\r\nexport class LoaderBase {\r\n\r\n    // 完成\r\n    public onComplete : ()=>void = null ;\r\n\r\n    // 进度\r\n    public onProgress: (val: number) => void = null ;\r\n\r\n    public add( path : string , handler : ( data : Asset )=>void ) {\r\n\r\n    }\r\n\r\n    public exe( ) {\r\n        \r\n    }\r\n\r\n}","import { JsonAsset } from \"cc\";\r\nimport { assetManager } from \"cc\";\r\nimport { Asset } from \"cc\";\r\nimport { LoaderBase } from \"./LoaderBase\";\r\n\r\n// 远程载入\r\nexport class LoaderRemote extends LoaderBase {\r\n\r\n    // 完成\r\n    public onComplete : ()=>void = null ;\r\n\r\n    // 进度\r\n    public onProgress: (val: number) => void = null ;\r\n\r\n    public list = new Array< any >() ;\r\n\r\n    public add( path : string , handler : ( data : Asset )=>void ) {\r\n\r\n        let item = {} ;\r\n        item[ \"path\" ] = path ;\r\n        item[ \"handler\" ] = handler ;\r\n        this.list.push( item ) ;\r\n\r\n    }\r\n\r\n    public exe() {\r\n\r\n        let count = this.list.length ; \r\n        let counter = 0 ; \r\n\r\n        for( let i = 0 ; i < this.list.length ; ++i ) {\r\n\r\n            let item = this.list[ i ] ;\r\n            let path = item[ \"path\" ] ; \r\n            let handler = item[ \"handler\" ] ;\r\n\r\n            let url = path ;\r\n\r\n            // assetManager 要设置跨域。不能访问 hfs 服务器。\r\n            assetManager.loadRemote( url , ( err , data : JsonAsset )=>{\r\n\r\n                if( err != null ) {\r\n                    console.error( \"读取配置出错：\" + url ) ;\r\n                    return ; \r\n                }\r\n\r\n                handler( data ) ;\r\n\r\n                ++counter ;\r\n                if( counter == count ) {\r\n                    // 完成\r\n                    this.onComplete() ; \r\n                    \r\n                }\r\n\r\n            } ) ;\r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n}","import { assetManager } from \"cc\";\r\nimport { Asset } from \"cc\";\r\nimport { resources } from \"cc\";\r\nimport { LoaderBase } from \"./LoaderBase\";\r\n\r\n\r\n// Resources 资源载入器\r\nexport class LoaderResources extends LoaderBase {\r\n\r\n    // 完成\r\n    public onComplete : ()=>void = null ;\r\n\r\n    // 进度\r\n    public onProgress: (val: number) => void = null ;\r\n\r\n    public list = new Array< any >() ;\r\n\r\n    public add( path : string , handler : ( data : Asset )=>void ) {\r\n\r\n        let item = {} ;\r\n        item[ \"path\" ] = path ;\r\n        item[ \"handler\" ] = handler ;\r\n        this.list.push( item ) ;\r\n\r\n    }\r\n\r\n    public exe( ) {\r\n\r\n        // 转换成cocos接口的列表\r\n        let list2 = new Array< string >() ; \r\n        for( let i = 0 ; i < this.list.length ; ++i ) {\r\n            list2.push( this.list[ i ][ \"path\" ] ) ;\r\n        } // end for \r\n\r\n        resources.load( list2 , this._onProgress.bind(this) , ( err , data )=>{\r\n\r\n            if( err != null ) {\r\n                // 出错\r\n            }\r\n\r\n            for( let i = 0 ; i < data.length ; ++i ) {\r\n\r\n                let dataItem = data[ i ] ; \r\n\r\n                let item = this.list[ i ] ;\r\n                let handler = item[ \"handler\" ] ;\r\n                handler( dataItem ) ;\r\n\r\n            } // end for\r\n\r\n            this.onComplete?.() ;\r\n\r\n        } ) ;\r\n\r\n    }\r\n\r\n    private _onProgress(finished: number, total: number, item: RequestInit) {\r\n\r\n        // 进度百分比计算。参考：https://forum.cocos.org/t/topic/147629\r\n\r\n        let val = finished / total;\r\n        if (val < this.val) return;\r\n\r\n        this.val = val;\r\n        this.onProgress?.(this.val);\r\n\r\n    }\r\n\r\n    // 进度值\r\n    private val = 0;\r\n\r\n\r\n\r\n}","\nimport * as i18n from './LanguageData';\n\nimport { _decorator, Component, Label } from 'cc';\nconst { ccclass, property, executeInEditMode } = _decorator;\n\n@ccclass('LocalizedLabel')\n@executeInEditMode\nexport class LocalizedLabel extends Component {\n    label: Label | null = null;\n\n    @property({ visible: false })\n    key: string = '';\n\n    @property({ displayName: 'Key', visible: true })\n    get _key() {\n        return this.key;\n    }\n    set _key(str: string) {\n        this.updateLabel();\n        this.key = str;\n    }\n\n    onLoad() {\n        if (!i18n.ready) {\n            i18n.init('zh');\n        }\n        this.fetchRender();\n    }\n\n    fetchRender () {\n        let label = this.getComponent('cc.Label') as Label;\n        if (label) {\n            this.label = label;\n            this.updateLabel();\n            return;\n        } \n    }\n\n    updateLabel () {\n        this.label && (this.label.string = i18n.t(this.key));\n    }\n}\n","\nimport * as i18n from './LanguageData';\n\nimport { _decorator, Component, SpriteFrame, Sprite } from 'cc';\nconst { ccclass, property, executeInEditMode } = _decorator;\n\n@ccclass('LocalizedSpriteItem')\nclass LocalizedSpriteItem {\n    @property\n    language: string = 'zh';\n    @property({\n        type: SpriteFrame,\n    })\n    spriteFrame: SpriteFrame | null = null;\n}\n\n@ccclass('LocalizedSprite')\n@executeInEditMode\nexport class LocalizedSprite extends Component {\n    sprite: Sprite | null = null;\n\n    @property({\n        type: LocalizedSpriteItem,\n    })\n    spriteList = [];\n\n    onLoad() {\n        if (!i18n.ready) {\n            i18n.init('zh');\n        }\n        this.fetchRender();\n    }\n\n    fetchRender () {\n        let sprite = this.getComponent('cc.Sprite') as Sprite;\n        if (sprite) {\n            this.sprite = sprite;\n            this.updateSprite();\n            return;\n        } \n    }\n\n    updateSprite () {\n        for (let i = 0; i < this.spriteList.length; i++) {\n            const item = this.spriteList[i];\n            // @ts-ignore\n            if (item.language === i18n._language) {\n                // @ts-ignore\n                this.sprite.spriteFrame = item.spriteFrame;\n                break;\n            }\n        }\n    }\n}\n","\n// 合成定义数据\nexport class MergeDefinition {\n\n    public static ins : MergeDefinition = null ; \n\n    // 增加合成定义\n    public addDefinition( id1 : string , id2 : string , id3 : string , isHybrid = false ) {\n\n        let orig = new MergeDataItem( id1 , id2 , id3 , isHybrid ) ; \n        this.orig.push( orig ) ; \n\n        if( id1 == id2 ) {\n            this.addDefinitionSingle( id1 , id2 , id3 , this.data ) ; \n            return ;\n        }\n\n        // 对于不同的合成 增加2条双向\n        let data = isHybrid == false ? this.data : this.hybrid ; \n        this.addDefinitionSingle( id1 , id2 , id3 , data ) ; \n        this.addDefinitionSingle( id2 , id1 , id3 , data ) ; \n\n    }\n\n    // 增加合成定义 单向\n    private addDefinitionSingle( id1 : string , id2 : string , id3 : string , \n        data : Map< string , Map< string , string > > ) {\n\n        let mapping2 = data.get( id1 ) ;\n        if( mapping2 == null ) {\n            mapping2 = new Map< string , string >() ; \n            data.set( id1 , mapping2 ) ;\n        }\n\n        mapping2.set( id2 , id3 ) ; \n\n    }\n\n    // 取得合成的实体ID\n    public getMergedId( id1 : string , id2 : string ) : string {\n\n        let mapping2 = this.data.get( id1 ) ;\n        if( mapping2 == null ) return null ; \n\n        return mapping2.get( id2 ) ;\n\n    }\n\n    // 取得合成的实体ID 杂交的\n    public getMergedIdhybrid( id1 : string , id2 : string ) {\n\n        // 是否允许合成\n        let ret = this.allowData.get( id1 ) ; \n        if( ret == false ) return null ; \n\n        ret = this.allowData.get( id2 ) ; \n        if( ret == false ) return null ; \n\n        let mapping2 = this.hybrid.get( id1 ) ;\n        if( mapping2 == null ) return null ; \n\n        return mapping2.get( id2 ) ;\n\n    }\n\n    // 原始数据\n    public orig = new Array< MergeDataItem >() ; \n\n    // 合成 普通 双向数据\n    public data = new Map< string , Map< string , string > >() ; \n\n    // 合成 杂交 双向数据，包括 id1 -> id2 , id2 -> id1 \n    public hybrid = new Map< string , Map< string , string > >() ; \n\n    // 是否允许合成。没有记录的，默认是允许。\n    public allowData = new Map< string , boolean >() ;  \n\n}\n\n// 合成的原始数据\nexport class MergeDataItem {\n\n    public id1 : string ; \n\n    public id2 : string ; \n\n    public id3 : string ; \n\n    public isHybrid = false ; \n\n    public constructor( id1 : string = null , id2 : string = null , id3 : string = null , isHybrid = false ) {\n        this.id1 = id1 ; \n        this.id2 = id2 ; \n        this.id3 = id3 ; \n        this.isHybrid = isHybrid ; \n    }\n\n}","import { tween, Vec3 } from \"cc\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { EffectFactory } from \"./EffectFactory\";\n\n\nexport class MergeEffect {\n\n    public static merge( article : BagArticle ) {\n\n        // 效果\n        let effect = EffectFactory.create( \"Merge\" ) ;\n        effect.setParent( article.view.root , false ) ;\n        effect.position = Vec3.ZERO ; \n\n        // 缩放\n        let root = article.view.root ; \n        tween( root )\n            .to( 0.2 , { scale : new Vec3( 1.3 , 1.3 , 1.3 ) } )\n            .to( 0.2 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } )\n            .start() ; \n\n    }\n\n}","import { instantiate, Node, SkeletalAnimation, sp, Vec3 } from \"cc\";\nimport { EffectPfMgr } from \"../../World/1.Base/Support/Misc/EffectPfMgr\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { BagArticleFactory } from \"../Article/BagArticleFactory\";\nimport { BagArticleGridPlace } from \"../Article/BagArticleGridPlace\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { MergeDefinition } from \"./MergeDefinition\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\nimport { MergeGridHybrid } from \"./MergeGridHybrid\";\nimport { MergeEffect } from \"./MergeEffect\";\n\n// 在触摸中的合成操作\nexport class MergeGrid {\n\n    // 格子 尝试合并\n    public static tryMerge( article : BagArticle , cells : Array< UiBagCell > ) : boolean {\n\n        if( MergeGridHybrid.tryMerge( article , cells ) == true ) {\n            return true ;\n        }\n\n        if( this.canMerge( article , cells ) == false ) return false ;\n            \n        this.merge( article , cells[ 0 ].article ) ;\n\n        return true ; \n  \n    }\n\n    /*\n        是否可以合成\n\n        article 拖拽的\n    */ \n    public static canMerge( article : BagArticle , cells : Array< UiBagCell > ) {\n\n        let article2 = cells[ 0 ].article ;\n        if( article2 == null ) return false ;\n\n        if( article == article2 ) return false ; \n\n        // 形状匹配\n        if( article2.cells[ 0 ] != cells[ 0 ] ) return false ;\n\n        console.log( \"合成 全重叠\" ) ;\n\n        // \n\n        let id = MergeDefinition.ins.getMergedId( article.cfg.id , article2.cfg.id ) ;\n        return id != null ? true : false ; \n\n\n    }\n    \n\n    /*\n        article 拖曳的，\n        article2 在网格中的。\n    */ \n    public static merge( article : BagArticle , article2 : BagArticle ) {\n\n        // 删除拖曳的\n        BagArticleGridPlace.unbind( article ) ; \n        UiTray.ins.removeAndArrange( article ) ;\n        article.view.root.destroy() ; \n\n        // 删除目标\n        let cells = article2.cells.slice( 0 , article2.cells.length ) ; \n        BagArticleGridPlace.unbind( article2 ) ; \n        article2.view.root.destroy() ; \n\n        // 生成新的实体\n        let id = MergeDefinition.ins.getMergedId( article.cfg.id , article2.cfg.id ) ;\n        let articleNew = BagArticleFactory.create( id ) ;\n        BagArticleGridPlace.exe( articleNew , cells , false ) ; \n        \n        MergeEffect.merge( articleNew );\n\n\n        // let pf = EffectPfMgr.ins.root.getChildByPath( \"Merge\" ) ;\n        // let node = instantiate( pf ) ;\n        // node.setParent( WorldNode.ins.layer2 , false ) ;\n        // node.worldPosition = articleNew.view.root.worldPosition ; \n        // let sk = node.getComponent( sp.Skeleton ) ;\n        // sk.setCompleteListener( ()=>{\n        //     node.destroy() ; \n        // } ) ;\n\n    }\n\n}\n\n\n\n\n","import { Vec3 } from \"cc\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { BagArticleFactory } from \"../Article/BagArticleFactory\";\nimport { BagArticleGridPlace } from \"../Article/BagArticleGridPlace\";\nimport { BagArticleGridPlaceByPos } from \"../Article/BagArticleGridPlaceByPos\";\nimport { UiBagCell } from \"../Grid/UiBagCell\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { MergeDefinition } from \"./MergeDefinition\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { MergeEffect } from \"./MergeEffect\";\n\n// 杂交的合并\nexport class MergeGridHybrid {\n\n    public static tryMerge( article : BagArticle , cells : Array< UiBagCell > ) : boolean {\n\n        let ret = this.canMerge( article , cells ) ; \n        if( ret == null ) return false ; \n\n        this.merge( article , ret[ 1 ] , ret[ 0 ] ) ; \n\n        return true ; \n\n    }\n\n    public static canMerge( article : BagArticle , cells : Array< UiBagCell > ) : [ string , BagArticle ] {\n\n        for( let i = 0 ; i < cells.length ; ++i ) {\n\n            let article2 = cells[ i ].article ;\n            if( article2 == null ) continue ; \n            if( article == article2 ) continue ; \n\n            // 判断是否杂交\n            let id = MergeDefinition.ins.getMergedIdhybrid( article.cfg.id , article2.cfg.id ) ; \n            if( id != null ) {\n\n                return [ id , article2 ] ; \n            }\n\n        } // end for\n\n        return null ; \n\n    }\n\n    public static merge( article : BagArticle , article2 : BagArticle , id : string ) {\n\n        let parent = article2.view.root.parent ; \n\n        // 决定新生成的物品在哪里出现\n        let shapeId = CfgArticleMgr.data.get( id ).bagShapeId ;\n        let pos = shapeId == article.cfg.bagShapeId ? article.view.root.worldPosition : article2.view.root.worldPosition ; \n\n        // 删除拖曳的\n        BagArticleGridPlace.unbind( article ) ; \n        UiTray.ins.removeAndArrange( article ) ;\n        article.view.root.destroy() ; \n\n        // 删除目标\n        BagArticleGridPlace.unbind( article2 ) ; \n        article2.view.root.destroy() ; \n\n        // 生成新的实体\n        let articleNew = BagArticleFactory.create( id ) ;\n        articleNew.view.root.setParent( parent , false ) ;\n        articleNew.view.root.worldPosition = pos ; \n        BagArticleGridPlaceByPos.exe( articleNew ) ; \n        \n        // 效果\n        MergeEffect.merge( articleNew ) ; \n\n    }\n    \n}","import { Tween, tween, Vec3 } from \"cc\";\nimport { GridTraverse } from \"../Grid/GridTraverse\";\nimport { MergeDefinition } from \"./MergeDefinition\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { ArticleHelper } from \"../Grid/BagArticleHelper\";\nimport { UiTray } from \"../Main/UiTray\";\n\n// 合并提示\nexport class MergeHint {\n\n    // 可以合并的\n    public static mergeable( a : BagArticle ) {\n\n        let all = ArticleHelper.getAllAriclesInGrid() ;\n\n        // 托盘的也考虑\n        all.push( ... UiTray.ins.articles ) ; \n\n        let id = a.cfg.id ; \n\n        for( let a2 of all ) {\n\n            if( a == a2 ) continue ; \n\n            let id2 = MergeDefinition.ins.getMergedId( id , a2.cfg.id ) ; \n            if( id2 == null ) continue ; \n\n            // 播放动画\n            this.anim( a2 ) ;\n\n        }\n\n    }\n\n    public static anim( a : BagArticle ) {\n\n        let node = a.view.root ;\n        let t = tween( node ).sequence(\n            tween( node ).to( 0.5 , { scale : new Vec3( 0.9 , 0.9 , 0.9 ) } ) , \n            tween( node ).to( 0.5 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } ) , \n\n        ).repeatForever().start() ;\n        a.view.tweenMergeHint = t ; \n\n    }\n\n    // 恢复\n    public static restore() {\n\n        Tween.stopAllByTag( 10001 ) ; \n\n        // 恢复\n        let all = ArticleHelper.getAllAriclesInGrid() ;\n\n        all.push( ... UiTray.ins.articles ) ; \n\n        for( let a of all ) {\n\n            if( a.view.tweenMergeHint == null ) continue ;\n\n            a.view.tweenMergeHint.stop() ; \n            a.view.tweenMergeHint = null ; \n\n            // 恢复\n            // a.view.root.scale = Vec3.ONE ; \n            tween( a.view.root ).to( 0.1 , { scale : Vec3.ONE } ).start() ; \n\n\n\n        } // end for\n\n    }\n\n}","import { math, Node, UITransform, Vec3 } from \"cc\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { GridTraverse } from \"../Grid/GridTraverse\";\nimport { MergeDefinition } from \"./MergeDefinition\";\nimport { EffectFactory } from \"./EffectFactory\";\n\n\n\n// 杂交提示管理\nexport class MergeHybridHintMgr {\n\n    public static ins : MergeHybridHintMgr = null ; \n\n    // 记录显示过的，不再显示\n    public record = new Set< string >() ;\n\n    public effect = new Array< Node >() ; \n\n    public exe() {\n\n        let all = new Array< BagArticle >() ; \n        // 提示\n        GridTraverse.exe( ( cell )=>{\n\n            let a = cell.article ;\n            if( a == null ) return ; \n\n            if( all.indexOf( a ) == -1 ) {\n                all.push( a ) ; \n            }\n\n        } ) ; \n\n        for( let a of all ) {\n            this.hideShape( a ) ; \n        }\n\n        for( let i = 0 ; i < all.length ; ++i ) {\n            let a = all[ i ] ;\n\n            for( let k = i + 1 ; k < all.length ; ++k ) {\n\n                let b = all[ k ] ;\n                let id = MergeDefinition.ins.getMergedIdhybrid( a.cfg.id , b.cfg.id ) ;\n                if( id == null ) continue ;\n\n                this.showShape( a ) ;\n                this.showShape( b ) ;\n\n                if( this.record.has( id ) == true ) continue ; \n\n                this.record.add( id ) ;\n\n                let effect = MergeHybridHint.show( a , b ) ; \n                this.effect.push( effect ) ;\n\n            } // end for\n        } // end for\n\n    }\n\n    public showShape( a : BagArticle ) {\n\n        if( a.view.effectMergeHintShape == null ) {\n            \n            let id = \"MergeHintShape_\" + a.cfg.bagShapeId ; \n            let effect = EffectFactory.create( id , false ) ;\n            if( effect == null ) return ;\n    \n            effect.setParent( a.view.root , false ) ; \n            effect.position = Vec3.ZERO ; \n            effect.setSiblingIndex( 0 ) ;\n            a.view.effectMergeHintShape = effect ; \n\n        }\n\n        a.view.effectMergeHintShape.active = true ; \n\n    }\n\n    public hideShape( a : BagArticle ) {\n\n        let effect = a.view.effectMergeHintShape ; \n        if( effect == null ) return ; \n        \n        effect.active = false ; \n        // a.view.effectMergeHintShape = null ; \n\n\n    }\n\n    // 清除连线\n    public clearAllLines() {\n\n        for( let node of this.effect ) {\n            node.destroy() ; \n        }\n        this.effect.splice( 0 , this.effect.length ) ; \n\n    }\n\n}\n\n// 杂交提示\nexport class MergeHybridHint {\n\n    public static show( article1 : BagArticle , article2 : BagArticle ) : Node {\n\n        // 组合成一个节点\n        let root = new Node( \"MergeHint1\" ) ; \n        root.addComponent( UITransform );\n        root.setParent( WorldNode.ins.layer2 , false ) ;\n\n        let pos = article1.view.root.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ; \n        WorldNode.ins.layer2.getComponent( UITransform ).convertToNodeSpaceAR( pos , pos ) ; \n        root.position = pos ; \n\n        let effect = EffectFactory.create( \"MergeHint1\" , false ) ; \n        effect.setParent( root , false ) ;\n        effect.position = Vec3.ZERO ; \n        // effect.worldPosition = article1.view.root.worldPosition ; \n\n\n        // 缩放\n        // 动画本身的长度\n        let len = 320 ;\n        let v = article2.view.root.position.clone().subtract( article1.view.root.position ) ;\n        let lenTarget = v.length() ; \n        let f = lenTarget / len ; \n        effect.scale = new Vec3( f , 1 , 1 ) ; \n\n        // 旋转\n        let y = math.toDegree( Math.atan2( v.y , v.x ) ) ;\n        effect.eulerAngles = new Vec3( 0 , 0 , y ) ;\n\n        // 合字\n        let v2 = v.multiplyScalar( 0.5 ) ;\n        // let pos2 = pos.clone().add( v2 ) ;\n        let effect2 = EffectFactory.create( \"MergeHint2\" , false ) ; \n        effect2.setParent( root , false ) ;\n        effect2.position = v2 ; \n\n        return root ; \n        \n    }\n\n}\n","import { Vec3 } from \"cc\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { BagArticleGridPlace } from \"../Article/BagArticleGridPlace\";\nimport { MergeDefinition } from \"./MergeDefinition\";\nimport { BagArticleFactory } from \"../Article/BagArticleFactory\";\nimport { MergeEffect } from \"./MergeEffect\";\n\n\nexport class MergeTray {\n\n    // 尝试合并\n    public static tryMerge( article : BagArticle ) : boolean {\n\n        let article2 = this.getTarget( article ) ; \n        if( article2 == null ) return false ; \n\n        let id = MergeDefinition.ins.getMergedId( article.cfg.id , article2.cfg.id ) ;\n        if( id == null ) {\n            id = MergeDefinition.ins.getMergedIdhybrid( article.cfg.id , article2.cfg.id ) ;\n            if( id == null ) {\n                return false ; \n            }\n            \n        }\n        let articleNew = BagArticleFactory.create( id ) ; \n        articleNew.view.root.setParent( article2.view.root , false );\n        articleNew.view.root.worldPosition = article2.view.root.worldPosition ; \n\n        // 删除\n        BagArticleGridPlace.unbind( article2 ) ; \n        UiTray.ins.remove( article2 ) ;\n        article2.view.root.destroy() ; \n\n        // 删除\n        BagArticleGridPlace.unbind( article ) ; \n        UiTray.ins.remove( article ) ;\n        article.view.root.destroy() ; \n\n        UiTray.ins.insertArticle( articleNew ) ; \n\n        MergeEffect.merge( articleNew ) ;\n        \n        // 放大缩小\n\n        return true ; \n\n    }\n\n    // 取得在合并距离范围内的物体\n    public static getTarget( article : BagArticle ) : BagArticle {\n\n        for( let article2 of UiTray.ins.articles ) {\n\n            if( article == article2 ) continue ; \n\n            let v = article2.view.root.worldPosition.clone().subtract( article.view.root.worldPosition ) ;\n            let len = v.lengthSqr() ; \n            if( len <= 150 * 150 ) {\n\n                return article2 ;\n            }\n        }\n\n        return null ; \n\n    }    \n\n\n}","import { instantiate, Node, randomRangeInt, tween, UITransform, Vec3 } from \"cc\";\nimport { PfMgrMoney } from \"../PfMgr/PfMgrMoney\";\n\n\n// 货币飞的控制\nexport class MoneyFly {\n\n    // 局内货币飞\n    public static money001Fly( parent : Node , pos1 : Vec3 , pos2 : Vec3 , count = 10 , onComplete : ()=>void = null ) {\n\n        this.fly( \"Money001\" , parent , pos1 , pos2 , count , onComplete ) ; \n\n    }\n\n    public static money001Fly2( parent : Node , pos1 : Vec3 , nodeTarget : Node , count = 10 , onComplete : ()=>void = null ) {\n\n        let pos2 = nodeTarget.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n        parent.getComponent( UITransform ).convertToNodeSpaceAR( pos2 , pos2 ) ;\n        this.money001Fly( parent , pos1 , pos2 , count , onComplete ) ;\n\n    }\n\n    public static fly( id : string , parent : Node , pos1 : Vec3 , pos2 : Vec3 , count = 10 , onComplete : ()=>void = null ) {\n\n        let pf = PfMgrMoney.ins.root.getChildByPath( id ) ;\n\n        for( let i = 0 ; i < count ; ++i ) {\n\n            let node = instantiate( pf ) ;\n            node.setParent( parent , false ) ;\n\n            // 随机偏移量出现\n            let offset = new Vec3() ; \n            offset.x = randomRangeInt( -150 , 150 ) ; \n            offset.y = randomRangeInt( -150 , 150 ) ; \n\n            offset.add( pos1 ) ;\n\n            node.position = pos1 ; \n\n            // 运动\n            tween( node ).sequence(\n                tween( node ).to( 0.3 , { position : offset } ) , \n                tween( node ).delay( 0.2 ) , \n                tween( node ).to( 0.8 , { position : pos2 } ) , \n                tween( node ).call( ()=>{\n\n                    node.destroy() ; \n\n                    onComplete?.() ; \n\n                } )\n            ).start() ;\n            \n        } // end for\n\n    }\n\n}","import { Vec3 } from \"cc\";\n\n\n// 移动组件\nexport class MoveCom\n{\n    public enabled : boolean  = true;\n\n    // 锁定计数器。\n    public lockCount : number = 0 ; \n\n    // 移动速率。单位：距离/每帧\n    public speed = 1;\n    \n    // 是否能推\n    // public bool shoveEnable = true;\n\n    // 限制计数。为0时可移动，每帧递减。\n    // 用来攻击时阻塞移动\n    // public int limitCount = 0;\n\n    // 以下临时计算变量\n    // ————————————————————————————————————\n\n    // 移动方向。值归一化\n    public direction = new Vec3() ; \n\n    /*\n        移动偏移量。移动量 / 每帧\n\n        移动系统用这个变量实现移动。\n        避免每帧都计算步长（方向 * 速度），简化移动系统，移动系统只需要做一次加法。\n        \n    */\n    public offset = new Vec3() ; \n\n    // 每帧移动后的位置\n    public positionTest = new Vec3() ;\n\n}","import { Vec3 } from \"cc\";\n\nimport { RoleMoveView } from \"./RoleMoveView\";\nimport { Role } from \"../Base/Role\";\n\n    // 移动玩家\n    export class MoveRole\n    {\n        /*\n            尝试移动\n\n            是否执行移动，由多个控制变量共同决定：\n            移动命令，硬直，眩晕，生命状态\n\n        */\n        public static exe( role : Role , v : Vec3 ) : void\n        {\n            var move = role.move;\n\n            this.preCalc(role, v);\n\n            // if ( this.MoveShove.exe(role) == false) return;\n\n            this.translate( role , move.offset , move.speed );\n\n\n        }\n\n        // 预计算\n        public static preCalc( role : Role , v : Vec3 ) : void\n        {\n            // 方向\n            var vNormal = v.clone().normalize() ;\n            role.move.direction = vNormal;\n\n            // 移动步长。移动量/帧 = 归一化的方向 * 速度/帧\n            let step = vNormal.multiplyScalar( role.move.speed ) ;\n            role.move.offset = step ;\n            //role.presentation.root.localPosition += v;\n\n            // 移动后的位置\n            role.move.positionTest = role.view.root.position.clone().add( step ) ;\n\n        }\n\n        // 位移角色。只处理位移的逻辑和表现，不是行走。\n        public static translate( role : Role , step : Vec3 , stepLen : number ) : boolean\n        {\n            // var ret = MoveCalc.exe(role, step, stepLen);\n            // if (ret.ok == false) return false;\n\n            //role.presentation.root.GetComponentInChildren<Rigidbody>().AddForce(role.move.step );\n\n            // 移动成功。\n            // role.transform.position = ret.pos;\n            // 更新包围盒\n            // RectSetter.setCenter(ref role.boundingShape.rect, ret.pos);\n\n            // 移动表现\n            //CtrlMovePresentation.moveTo( role.presentation.node.root.transform , ret.pos , role.presentation.moveTweeners );\n            role.view.root.position = role.move.positionTest ;\n\n            return true;\n\n        }\n\n\n\n    }","import { AudioClip, AudioSource, Node, resources } from \"cc\";\n\n\n/*\n    背景音乐播放控制。\n    从 resources 中读取\n*/ \nexport class Music {\n\n    public set enabled(val: boolean) {\n\n        this.m_enabled = val;\n\n        if (val == false) {\n            this.stop();\n        }\n    }\n\n    public get enabled() : boolean {\n        return this.m_enabled;\n    }\n\n    private m_enabled = true;\n\n    public play(key: string, isLoop: boolean = true): void {\n\n        if( this.enabled == false ) return ;\n\n        /*\n            3.8.1 bug 微信小游戏真机出现。如果 AudioSource 生成后没播放音频就stop，会导致第一次play无法播放。\n            所以 stop 放在前面来。\n        */ \n        this.stop() ; \n\n        if( this.audioSrc == null ) {\n\n            var node = new Node() ; \n            this.audioSrc = node.getComponent( AudioSource ) ;\n            if( this.audioSrc == null ){\n                this.audioSrc = node.addComponent( AudioSource ) ;\n            }\n\n        }\n\n        resources.load( key , AudioClip , (err, audio) =>\n        { \n            this.audioSrc.clip = audio ; \n            this.audioSrc.loop = isLoop ; \n            this.audioSrc.play( ) ; \n\n        } );\n\n    }\n\n    public stop(): void {\n\n        if( this.audioSrc == null ) return ;\n        this.audioSrc.stop() ; \n\n    }\n\n    private audioSrc : AudioSource = null ; \n\n\n\n}","import { Music as MusicBase } from \"../../SL/Cocos/Audio/Ver1/Music\";\n\n// 背景音乐\nexport class Music extends MusicBase {\n\n    public static ins = new Music() ;\n\n    public home(): void {\n        this.play( \"Common/Audio/Bgm/Guitalele's Happy Place\" ) ; \n    }\n\n    public game() : void {\n        this.play( \"Common/Audio/Bgm/game\" ) ; \n    }\n\n}","import { Node, Size, Sprite, UITransform } from \"cc\";\n\n\n/*\n    节点大小适配。\n    用于等比例显示图标\n\n*/ \nexport class NodeSizeFit {\n\n    // Node 大小设置为指定大小的比例。不大于 Node 当前的大小。\n    public static set( node : Node , size : Size ) {\n\n        let f = size.width / size.height ; \n\n        let uiTrans = node.getComponent( UITransform ) ; \n        let size2 = uiTrans.contentSize.clone() ; \n        if( f > 1 ) {\n            size2.height = size2.width / f ; \n        }\n        else if( f < 1 ) {\n            size2.width = size2.height * f ;\n        }\n        uiTrans.setContentSize( size2 ) ;        \n\n    }\n\n    /*\n        Node 要设置大小的节点\n        nodeSize 目标节点的大小\n        sizeOrig 原始尺寸。\n    */ \n    public static set2( node : Node , nodeSize : Size , sizeOrig : Size ) {\n\n        nodeSize = nodeSize.clone() ; \n\n        let f = sizeOrig.width / sizeOrig.height ; \n\n        let uiTrans = node.getComponent( UITransform ) ; \n        if( f > 1 ) {\n            nodeSize.height = nodeSize.width / f ; \n        }\n        else if( f < 1 ) {\n            nodeSize.width = nodeSize.height * f ;\n        }\n        uiTrans.setContentSize( nodeSize ) ;        \n\n    }\n\n    /*\n        先设置 Sprite SizeMode 为 Trimmed，获得剔除透明区域的大小比例。用这个比例设置大小\n        使用场景：希望剔除透明区域后的最大化显示\n    */ \n    public static trimmed( spr : Sprite , size : Size ) {\n\n        spr.trim = true ; \n        spr.sizeMode = Sprite.SizeMode.TRIMMED ; \n        let size2 = spr.node.getComponent( UITransform ).contentSize ; \n        NodeSizeFit.set2( spr.node , size , size2 ) ; \n\n    }\n\n}","\n/*\n    SL Library | Author : Siliphen | Creation Date : 2018.09 | Modification Date : | \n*/\n\nimport { Component, Label } from \"cc\";\n\n// 数字滚动\nexport class NumberRolling {\n\n    public static exe(label: Label, duration: number, num1: number, num2: number ) : void \n    {\n\n        let com: NumberRollingCom = null;\n\n        com = label.getComponent(NumberRollingCom);\n        if (com == null) {\n            com = label.addComponent(NumberRollingCom);\n        }\n\n        com.enabled = true;\n        com.label = label;\n        com.num1 = num1;\n        com.num2 = num2;\n        com.setValue = this.setVal;\n        com.duration = duration;\n\n        com.onComplete = () => {\n            com.enabled = false;\n        };\n        com.init();\n\n    }\n\n    private static setVal( n : Number ) : string \n    {\n        return n.toString() ; \n    }\n\n}\n\n\nclass NumberRollingCom extends Component {\n\n\n    // 要控制的文本\n    public label: Label = null;\n\n    public num1: number = 0;\n\n    public num2: number = 0;\n\n    public duration: number = 0;\n\n    public onComplete: () => void = null;\n\n    public setValue: (val: number) => string = null;\n\n    init(): void {\n\n        this.diff = this.num2 - this.num1;\n        this.timeCount = 0;\n\n        this.update(0);\n\n    }\n\n    update(dt: number): void {\n\n        this.timeCount += dt;\n        let f = this.timeCount / this.duration;\n\n        if (f >= 1) {\n            this.showNumber(this.num2);\n            this.enabled = false;\n            if (this.onComplete != null) this.onComplete();\n            return;\n        }\n\n        let n = this.diff * f;\n        n = this.num1 + n;\n        n = Math.floor(n);\n        // this.label.string = n.toString();\n        this.showNumber(n);\n\n    }\n\n    showNumber(n: number) {\n\n        this.label.string = this.setValue(n);\n\n    }\n\n    private diff = 0;\n    private timeCount = 0;\n\n}","\n\n// 运行环境判断\n// 参考：https://www.jianshu.com/p/8e8bccd1123e\nexport class OsJudge {\n\n    public static isWx() {\n        return (/MicroMessenger/i.test(window.navigator.userAgent) ) ;\n    }\n\n}","import { Vec3 } from \"cc\";\n\n// 路径移动\nexport class PathMove {\n\n    // 路径\n    public path = new Array< Vec3 >() ;\n\n    // 当前目标点索引\n    public idx = 0 ;\n\n    // 经过的路径的长度\n    public lenMoved = 0 ; \n\n}","import { Node } from \"cc\";\r\n\r\nexport class PfLevelThumbnail {\r\n\r\n    public static ins = new PfLevelThumbnail() ; \r\n\r\n    public root : Node ; \r\n\r\n    public init( node : Node ) {\r\n        this.root = node ; \r\n    }\r\n    \r\n}","import { instantiate, Prefab, resources } from \"cc\";\nimport { UiBag } from \"../../Game/Bag/Main/UiBag\";\nimport { UiHpBar } from \"../../Game/Ui/Bar/UiHpBar\";\nimport { UiFeatureSel } from \"../../Game/Ui/Popup/FeatureSel/UiFeatureSel\";\nimport { BulletPfMgr } from \"../../Game/World/1.Base/Bullet/BulletPfMgr\";\nimport { PfMgrRole } from \"../../Game/World/1.Base/Role/Misc/PfMgrRole\";\nimport { EffectPfMgr } from \"../../Game/World/1.Base/Support/Misc/EffectPfMgr\";\nimport { UiBagArticleDetail } from \"../../Home/Ui/Bag/ArticleDetail/UiBagArticleDetail\";\nimport { UiBag as HomeUiBag } from \"../../Home/Ui/Bag/UiBag\";\nimport { UiDialog } from \"../Ui/UiDialog\";\nimport { UiLoadingScene } from \"../Ui/UiLoadingScene\";\nimport { PfMgrBagArticle } from \"./PfMgr\";\nimport { PfMgrIcon } from \"./PfMgrIcon\";\nimport { PfMgrIconBuff } from \"./PfMgrIconBuff\";\nimport { PfMgrMoney } from \"./PfMgrMoney\";\nimport { PfMgrNumber } from \"./PfMgrNumber\";\nimport { UiBubble } from \"../Ui/UiBubble\";\nimport { UiSettings } from \"../Ui/UiSettings\";\nimport { PfLevelThumbnail } from \"../../Home/Ui/Main/Page/Battle/PfLevelThumbnail\";\nimport { UiStaminaBuy } from \"../../Home/Ui/Popup/UiStaminaBuy\";\nimport { UiGet } from \"../../Home/Ui/Popup/UiGet\";\nimport { UiDailyCheckin } from \"../../Home/Ui/Popup/DailyCheckin/UiDailyCheckin\";\nimport { UiHybridGuide } from \"../../Home/Ui/Popup/UiHybridGuide\";\n\n\n// 预制载入\nexport class PfLoad {\n\n    public static onProgress: (val: number) => void;\n\n    public static exe(onComplete: () => void) {\n\n        // 只执行一次\n        if (this.flag == true) {\n            onComplete();\n            return;\n        }\n        this.flag = false;\n\n        let list = [ \n\n            // 公共\n            \"Common/Ui/Money\",\n            \"Common/Ui/LoadingScene\",\n            \"Common/Ui/Dialog\",\n            \"Common/Ui/Icon\", \n            \"Common/Ui/Bubble\",\n            \"Common/Ui/Settings\" , \n\n            // 大厅\n            \"Home/Ui/ArticleDetail\",\n            \"Home/Ui/Bag\",\n            \"Home/Ui/LevelThumbnail\",\n            \"Home/Ui/StaminaBuy\" , \n            \"Home/Ui/Get\" , \n            \"Home/Ui/DailyCheckin\" , \n            \"Home/Ui/HybridGuide\" , \n\n            // 背包\n            \"Bag/Bag\",\n            \"Bag/Article\",\n\n            // 核心玩法\n            \"Game/Role/Role\",\n            \"Game/Ui/Number\",\n            \"Game/Ui/Bar\",\n            \"Game/Bullet/Bullet\",\n            \"Game/Ui/FeatureSel\",\n            \"Game/Ui/Icon\",\n            \"Game/Misc/Effect\",\n\n        ];\n        resources.load(list, Prefab, this._onProgress.bind(this) , (err, data) => {\n\n            for( let i = 0 ; i < data.length ; ++i ) {\n\n                let path = list[ i ] ;\n                let pf = data[ i ] ;\n                this.handlePf( path , pf ) ; \n\n            } // end for\n\n            onComplete?.() ;\n\n        } ) ;\n\n    }\n\n    // 处理预制\n    private static handlePf( path : string , pf : Prefab ) {\n\n        switch( path ) {\n\n            // 公共\n\n            case \"Common/Ui/Money\" : {\n                PfMgrMoney.ins.init(instantiate( pf ) ) ;\n            }\n            break ; \n\n            case \"Common/Ui/LoadingScene\" : {\n                UiLoadingScene.ins.init(instantiate( pf ));\n            }\n            break ; \n\n            case \"Common/Ui/Dialog\" : {\n                UiDialog.pf = pf ;\n            }\n            break ; \n\n            case \"Common/Ui/Icon\" : {\n                PfMgrIcon.ins.init(instantiate( pf ));\n            }\n            break ; \n\n            case \"Common/Ui/Bubble\" : {\n                UiBubble.pf = pf ; \n            }\n            break ; \n\n            case \"Common/Ui/Settings\" : {\n                UiSettings.pf = pf ; \n            }\n            break ; \n            \n            // 大厅\n            \n            case \"Home/Ui/ArticleDetail\" : {\n                UiBagArticleDetail.pf = pf ;\n            }\n            break ; \n\n            case \"Home/Ui/Bag\" : {\n                HomeUiBag.pf = pf ;\n            }\n            break ; \n\n            case \"Home/Ui/LevelThumbnail\" : {\n                PfLevelThumbnail.ins.init( instantiate( pf ) ) ;\n            }\n            break ;\n\n            case \"Home/Ui/StaminaBuy\" : {\n                UiStaminaBuy.pf = pf ; \n            }\n            break ; \n\n            case \"Home/Ui/Get\" : {\n                UiGet.pf = pf ; \n            }\n            break ;\n\n            case \"Home/Ui/DailyCheckin\" : {\n                UiDailyCheckin.pf = pf ; \n            }\n            break ; \n\n            case \"Home/Ui/HybridGuide\" : {\n                UiHybridGuide.pf = pf ; \n            }\n            break ; \n\n            // 背包\n\n            case \"Bag/Bag\" : {\n                UiBag.pf = pf ;\n            }\n            break ;\n\n            case \"Bag/Article\" : {\n                PfMgrBagArticle.bagArticle = instantiate( pf ) ;\n            }\n            break ; \n\n            // 核心玩法\n\n            case \"Game/Role/Role\" : {\n                PfMgrRole.pf = instantiate( pf );\n            }\n            break ; \n\n            case \"Game/Ui/Number\" : {\n                PfMgrNumber.ins.init( instantiate( pf ) );\n            }\n            break ; \n\n            case \"Game/Ui/Bar\" : {\n                UiHpBar.pf = instantiate( pf );\n            }\n            break ; \n\n            case \"Game/Bullet/Bullet\" : {\n                BulletPfMgr.ins.root = instantiate( pf );\n            }\n            break ; \n\n            case \"Game/Ui/FeatureSel\" : {\n                UiFeatureSel.pf = pf ;\n            }\n            break ; \n\n            case \"Game/Ui/Icon\" : {\n                PfMgrIconBuff.ins.root = instantiate( pf );\n            }\n            break ; \n\n            case \"Game/Misc/Effect\" : {\n                EffectPfMgr.ins.root = instantiate( pf );\n            }\n            break ; \n\n\n            case \"\" : {\n                \n            }\n            break ; \n\n        }\n\n    }\n\n    private static _onProgress(finished: number, total: number, item: RequestInit) {\n\n        // 进度百分比计算。参考：https://forum.cocos.org/t/topic/147629\n\n        let val = finished / total;\n        if (val < this.val) return;\n\n        this.val = val;\n        this.onProgress?.(this.val);\n\n    }\n\n    // 进度值\n    private static val = 0;\n\n    // 执行标记\n    public static flag = false;\n\n}","import { Asset, instantiate, Node, resources } from \"cc\";\nimport { UiBag } from \"../../Game/Bag/Main/UiBag\";\nimport { Prefab } from \"cc\";\nimport { PfMgrRole } from \"../../Game/World/1.Base/Role/Misc/PfMgrRole\";\n\n// 预制管理器 背包物件\nexport class PfMgrBagArticle {\n\n    public static bagArticle : Node ; \n\n    public static getPf( id : string ) : Node {\n\n        let strs = id.split( '_' ) ;\n        if( strs.length >= 2 ) {\n\n            let id2 = strs[ 0 ] + \"/\" + id ;\n            let pf = PfMgrBagArticle.bagArticle.getChildByPath( id2 ) ;\n            return pf ; \n\n        }\n\n        // 直接查找\n        let pf = PfMgrBagArticle.bagArticle.getChildByPath( id ) ; \n        return pf ; \n\n    }\n\n}\n\n","import { Node, Sprite } from \"cc\";\n\nexport class PfMgrHeroUp {\n\n    public static ins = new PfMgrHeroUp() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n        this.root = node ; \n    }\n\n    public getSprite(number){\n        return this.root.getChildByPath(number.toString()).getComponent( Sprite ) ; \n    }\n\n}","import { Node, Sprite } from \"cc\";\n\nexport class PfMgrIcon {\n\n    public static ins = new PfMgrIcon() ; \n\n    public root : Node ; \n\n    // 货币 001\n    public money001 : Sprite ; \n\n    // 货币 001\n    public money002 : Sprite ; \n\n    // 体力\n    public stamina : Sprite ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.money001 = this.root.getChildByPath( \"Money/Money001\" ).getComponent( Sprite ) ; \n        this.money002 = this.root.getChildByPath( \"Money/Money002\" ).getComponent( Sprite ) ; \n\n        this.stamina = this.root.getChildByPath( \"Stamina\" ).getComponent( Sprite ) ; \n\n    }\n\n}","import { Node, Sprite, SpriteFrame } from \"cc\";\n\n// Buff 图标\nexport class PfMgrIconBuff {\n\n    public static ins = new PfMgrIconBuff() ; \n\n    public root : Node ; \n\n    public getIconById( id : string ) : Sprite {\n\n        let strs = id.split( \"-\" ) ; \n        if( strs.length >= 2 ) {\n\n            let id2 = strs[ 0 ] + \"/\" + id ; \n            let pfIcon = this.root.getChildByPath( id2 ) ; \n            let spr = pfIcon?.getComponent( Sprite ) ;\n            if( spr != null ) { \n                return spr ; \n            }\n\n        }\n\n        \n\n\n        let spr = this.root.getChildByPath( id )?.getComponent( Sprite ) ; \n        if( spr != null ) {\n            return spr ; \n        }\n\n        spr = this.root.getChildByPath( \"Default\" ).getComponent( Sprite ) ;\n        return spr ; \n\n        return spr ; \n\n    }\n\n}","import { Node, Sprite } from \"cc\";\n\n// 和货币相关的UI\nexport class PfMgrMoney {\n\n    public static ins = new PfMgrMoney() ; \n\n    public root : Node ; \n\n    // 货币 1 局内货币\n    public money001 : Node ; \n    public meat : Sprite ; \n    public heroSpiece1: Sprite;\n\n    // 货币 2 \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.money001 = this.root.getChildByPath( \"Money001\" ) ;\n        this.meat = this.root.getChildByPath( \"Meat\" ).getComponent(Sprite) ;\n        this.heroSpiece1 = this.root.getChildByPath(\"HeroPiece1\").getComponent(Sprite);\n\n    }\n\n    public get_sprite_by_id(id:string) {\n        return this.root.getChildByPath( id ).getComponent(Sprite) ;\n    }\n}","import { Node, Sprite } from \"cc\";\n\nexport class PfMgrMushroom {\n\n    public static ins = new PfMgrMushroom() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n        this.root = node ; \n    }\n\n    public getSprite(number){\n        return this.root.getChildByPath(number.toString()).getComponent( Sprite ) ; \n    }\n\n}","import { Node } from \"cc\";\n\n// 数字预制管理器\nexport class PfMgrNumber {\n\n    public static ins = new PfMgrNumber() ; \n\n    public root : Node ; \n    \n    public damage : Node ;  \n\n    public damageCrit : Node ;  \n    \n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.damage = this.root.getChildByPath( \"Damage\" ) ;\n\n        this.damageCrit = this.root.getChildByPath( \"DamageCrit\" ) ;\n\n    }\n    \n}","import { Node } from \"cc\";\n\nexport class PfMgrRole {\n\n    public static pf : Node ; \n\n}\n\n","import { randomRangeInt, sys } from \"cc\";\nimport { InitWx } from \"./InitWx\";\nimport { InitTt } from \"./InitTt\";\n\n\n\n// 平台初始化\nexport class PlatformInit {\n\n    public static exe() {\n\n        switch( sys.platform ) {\n\n            // 微信小游戏\n            case sys.Platform.WECHAT_GAME : {\n\n                InitWx.exe() ; \n\n                // let appCfg = AppConfig.ins ; \n                // appCfg.addToDesktopEnabled = true ; \n                // appCfg.shareEnabled = true ; \n                // appCfg.vibrateEnabled = true ; \n\n\n            }\n            break ; \n\n            // 抖音小游戏\n            case sys.Platform.BYTEDANCE_MINI_GAME : {\n\n                InitTt.exe() ; \n\n            }\n            break ; \n\n            // 安卓\n            case sys.Platform.ANDROID : {\n\n                // let appCfg = AppConfig.ins ; \n                // appCfg.addToDesktopEnabled = false ; \n                // appCfg.shareEnabled = false ; \n                // appCfg.vibrateEnabled = false ; \n\n            }\n            break ; \n\n        }\n\n        // InitTt.exe() ; \n\n\n    }\n\n\n}","import { Vec2 } from \"cc\";\nimport { BuffCom } from \"../../1.Base/Buff/BuffCom\";\n\n\n// 玩家数据\nexport class Player {\n\n    public static ins : Player = null ; \n\n    public bag = new PlayerBag() ; \n\n    public grade = new PlayerGrade() ; \n\n    public buff = new BuffCom() ; \n    \n    // 局内货币\n    public money001 = 0 ; \n    \n    // 获得格子扩展物的个数\n    public getGridExpandCount = 3 ; \n    \n}\n\n// 背包数据\nexport class PlayerBag {\n\n    // 已经获得的格子\n    public cells = new Array< Vec2 >() ; \n\n}\n\n// 等级\nexport class PlayerGrade {\n\n    // 等级\n    public grade = 1 ;\n\n    // 当前经验值\n    public exp = 0 ; \n\n}","import { AffixType } from \"../../1.Base/Buff/Affix\";\nimport { Role } from \"../../1.Base/Role/Base/Role\";\nimport { RoleMgr } from \"../../1.Base/Role/Base/RoleMgr\";\nimport { RoleAttributeUpdate } from \"../../1.Base/Role/Misc/RoleAttributeUpdate\";\nimport { Player } from \"./Player\";\n\n// 角色 Buff 作用\nexport class PlayerBuffAffect {\n\n    // 影响现在场上的所有角色\n    public static affectAllRoles() {\n\n        for( let role of RoleMgr.ins.allEnemies ) {\n            // this.affectRole( role ) ;\n            RoleAttributeUpdate.exe( role ) ; \n        }\n\n    }\n\n    // 影响 角色\n    public static affectRole( role : Role ) {\n\n        let buffList = Player.ins.buff.list ; \n\n        for( let buff of buffList ) {\n\n            switch( buff.affix.type ) {\n                case AffixType.MoveSpeedDecreasePercent : \n                {\n                    role.buff.add( buff ) ;\n                }\n                break ; \n            }\n\n        } // end for\n\n        RoleAttributeUpdate.exe( role ) ;\n\n    }\n\n\n\n}","import { CfgUpgrade } from \"../../../../Common/Cfg/CfgUpgrade\";\nimport { UiMain } from \"../../../Ui/Main/UiMain\";\nimport { UiPlayerGrade } from \"../../../Ui/Main/UiPlayerGrade\";\nimport { UiFeatureSel } from \"../../../Ui/Popup/FeatureSel/UiFeatureSel\";\nimport { GamePause } from \"../Flow/GamePause\";\nimport { Player } from \"./Player\";\n\n// 玩家等级操作\nexport class PlayerGradeOp {\n\n    // 经验值因子\n    public static expFactor = 1.0 ; \n\n    // 增加经验值\n    public static addExp( val : number ) {\n\n        let g = Player.ins.grade ;\n        g.exp += val * this.expFactor ; \n\n        // 判断是否升级\n        this.upgrade() ; \n\n        // 更新UI\n        UiPlayerGrade.ins.refresh() ; \n\n    }\n\n    // 尝试升级\n    public static upgrade() {\n\n        let g = Player.ins.grade ;\n\n        if( g.grade > CfgUpgrade.data.length ) {\n            // 已经到最高级\n            return ;\n        }\n\n        let expNeeded = CfgUpgrade.data[ g.grade ] ; \n        if( g.exp < expNeeded ) {\n            // 没升级\n            return ;\n\n        }\n\n        \n        g.grade++ ; \n        g.exp = g.exp - expNeeded ; \n\n        let uiFeatureSel = UiFeatureSel.ins ;\n        uiFeatureSel.refresh() ; \n        uiFeatureSel.show() ; \n\n\n\n    }\n\n\n}\n\n\n","import { Vec2 } from \"cc\";\nimport { Player } from \"./Player\";\n\nexport class PlayerInit {\n\n    public static exe() {\n\n        let player = Player.ins = new Player() ; \n        \n        // 初始背包解锁格子\n        let pos = new Vec2( 1 , 2 ) ;\n        for( let y = 0 ; y < 3 ; ++y ) {\n            for( let x = 0 ; x < 3 ; ++x ) {\n                player.bag.cells.push( pos.clone().add2f( x , y ) ) ;\n            }\n        } // end for\n\n        // 测试网格全满\n        // let pos = new Vec2( 0 , 0 ) ;\n        // for( let y = 0 ; y < 7 ; ++y ) {\n        //     for( let x = 0 ; x < 5 ; ++x ) {\n        //         player.bag.cells.push( pos.clone().add2f( x , y ) ) ;\n        //     }\n        // }\n\n        // 金币\n        player.money001 = 15 ; \n\n    }\n\n}","import { UITransform, Vec3 } from \"cc\";\nimport { UiHpBar } from \"../../../Ui/Bar/UiHpBar\";\nimport { Life } from \"../../1.Base/Role/Base/Life\";\nimport { Role, RoleView } from \"../../1.Base/Role/Base/Role\";\nimport { RoleCfgSet, RoleFactory } from \"../../1.Base/Role/Base/RoleFactory\";\nimport { WorldNode } from \"../../1.Base/Support/Misc/WorldNode\";\nimport { RoleMgr } from \"../../1.Base/Role/Base/RoleMgr\";\n\n// 玩家角色\nexport class PlayerRole {\n\n    public static ins = new PlayerRole() ; \n\n    public main : Role ; \n\n}\n\n// 玩家角色 初始化\nexport class PlayerRoleInit {\n\n    public static init() {\n\n        // 定位点\n        let node = WorldNode.ins.root.getChildByPath( \"Cfg/PlayerRole\" ) ; \n\n        let role = RoleFactory.create( \"G1#Player001\" ) ; \n        PlayerRole.ins.main = role ; \n        role.view.root.setParent( WorldNode.ins.layer1 , false ) ;\n        role.view.root.worldPosition = node.worldPosition ; \n\n        // 测试 血量回复\n        // role.life.hp.current = 20 ;\n\n        let rect = role.view.main.getComponent( UITransform ).getBoundingBox() ; \n\n        // 添加血条\n        let hpBar = UiHpBar.create( \"HpBarPlayerRole\" ) ;\n        role.view.hpBar = hpBar ; \n        hpBar.role = role ;\n        hpBar.root.setParent( role.view.root , false );\n        hpBar.root.position = new Vec3( 0 , rect.yMax + 20 ) ;\n        hpBar.refresh() ; \n\n    }\n\n}","\n/*\n    SL Library | Author : Siliphen | Creation Date : 2018.09 | Modification Date : | \n*/\n\nexport class Random\n{\n    // min inclusive , max inclusive\n    public static rangeInt(min : number , max : number ) : number\n    {\n        return Math.floor(Math.random() * ( max + 1 - min  ) ) + min ;\n\n    }\n\n}","import { Input, instantiate, Node, tween, Vec3 } from \"cc\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { AccountPersist } from \"../../../Common/Account/AccountPersist\";\nimport { UiBag } from \"./UiBag\";\n\n// 上阵替换模式进入\nexport class ReplaceModeEnter {\n\n    // 进入替换模式\n    public static enter( idUnlocked : string ) {\n\n        // 切换模式\n        UiBag.ins.sv.active = false ; \n        UiBag.ins.replace.root.active = true ; \n\n        // 设置替换UI的显示\n        let uiItem = UiBag.ins.unlocked.items.find( ( e )=>{ return e.articleId == idUnlocked ; } ) ; \n        let node = instantiate( uiItem.root ) ; \n        node.setParent( UiBag.ins.replace.root , false ) ;\n        UiBag.ins.replace.item.active = false ; \n        node.position = UiBag.ins.replace.item.position ; \n\n        // 上阵条目处理 \n        let items = UiBag.ins.deploy.items ; \n        for( let i = 0 ; i < items.length ; ++i ) {\n            let uiItem = items[ i ] ;\n            let root = uiItem.root ;\n            this.deployItemAnim( root ) ;\n\n             let idDeploy = uiItem.articleId ; \n\n             uiItem.root.off( Input.EventType.TOUCH_END ) ; \n             uiItem.root.on( Input.EventType.TOUCH_END , ()=>{\n                this.swap( idUnlocked , idDeploy ) ; \n             } ) ;\n\n        } // end for\n\n    }\n\n    private static deployItemAnim( root : Node ) {\n\n        // 缩放动画\n        // z 不能为0，否者 点击事件不响应\n        let val1 = 1.1 ;\n        let val2 = 0.9 ; \n        tween( root ).sequence( \n            tween( root ).to( 0.8 , { scale : new Vec3( val1 , val1 , val1 ) } ) , \n            tween( root ).to( 0.8 , { scale : new Vec3( val2 , val2 , val2 ) } ) , \n         ).repeatForever().start() ;\n\n    }\n\n    // 交换\n    private static swap(  idUnlocked : string , idDeploy : string ) {\n\n        // 上阵的\n        let idx = Account.ins.bag.deploy.indexOf( idDeploy ) ; \n        Account.ins.bag.deploy[ idx ] = idUnlocked ; \n\n        // 解锁的。交换位置。为了在显示上替换原来的未知\n        let unlocked = Account.ins.bag.unlocked ;\n        let idx1 = unlocked.indexOf( idUnlocked ) ;\n        let idx2 = unlocked.indexOf( idDeploy ) ;\n        let t = unlocked[ idx1 ] ;\n        unlocked[ idx1 ] = unlocked[ idx2 ] ; \n        unlocked[ idx2 ] = t ; \n\n        AccountPersist.save() ; \n\n        // 恢复\n        UiBag.ins.sv.active = true ; \n        UiBag.ins.replace.root.active = false ; \n\n        // 刷新\n        UiBag.ins.deploy.refresh() ; \n        UiBag.ins.unlocked.refresh() ; \n\n    }\n\n}","\nimport { CfgLoad } from \"../../Common/Cfg/CfgLoad\";\nimport { PfLoad } from \"../../Common/PfMgr/PfLoad\";\n\n// 资源载入器。预制、配置表 \nexport class ResLoad {\n\n    public static onProgress: (val: number) => void;\n\n    public static exe(onComplete: () => void) {\n\n        let cfgLoader = new CfgLoad() ; \n        cfgLoader.exe(() => {\n            PfLoad.onProgress = this.onProgress;\n            PfLoad.exe(() => {\n                onComplete();\n            }); \n        });\n\n    }\n\n}","import { Collider2D, Node, Skeleton, sp, Vec3 } from \"cc\";\nimport { Life } from \"./Life\";\nimport { SkillCom } from \"../../Skill/SkillCom\";\nimport { UiHpBar } from \"../../../../Ui/Bar/UiHpBar\";\nimport { MoveCom } from \"../Move/MoveCom\";\nimport { AiCom } from \"../../Ai/AiCom\";\nimport { BuffCom } from \"../../Buff/BuffCom\";\nimport { CfgRoleItem } from \"../../../../../Common/Cfg/CfgRole\";\nimport { AttackCom } from \"../../Tower/Entity/AttackCom\";\n\n\nexport class Role {\n\n    public id : string ; \n\n    // 角色配置\n    public cfg : CfgRoleItem ; \n\n    public attack : AttackCom = null ; \n\n    public move : MoveCom = null ; \n\n    public life : Life = null;\n\n    public view : RoleView = null ;\n\n    public skill : SkillCom = null ; \n\n    public exp : Exp = null ; \n\n    public ai : AiCom = null ; \n\n    public buff : BuffCom = null ; \n\n    \n}\n\n\n\n// 角色视图\nexport class RoleView {\n\n    public root : Node ; \n\n    public main : Node ; \n    \n    // 骨骼动画\n    public skeleton : sp.Skeleton = null ; \n\n    // 血条\n    public hpBar : UiHpBar = null ; \n    \n    // 碰撞器\n    public collider : Collider2D = null ; \n\n}\n\n// 击杀获得的经验值\nexport class Exp {\n\n    public val = 0 ; \n\n}","import { sp } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\n\n// spine动画控制\nexport class RoleAnimSpine {\n\n    // 待机\n    public static playIdle( sk : sp.Skeleton ) {\n        this.play( sk , \"idle\" ) ; \n    }\n\n    // 移动\n    public static playMove( sk : sp.Skeleton ) {\n        this.play( sk , \"move\" ) ; \n    }\n\n    public static playAttack( sk : sp.Skeleton ) {\n\n        if( sk == null ) return ; \n\n        let name = \"attack\" ; \n        if( sk.getCurrent( 0 ).animation.name == name ) return ; \n        let te = sk.setAnimation( 0 , name , false ) ;\n        // te.timeScale = 0.5 ;\n        sk.addAnimation( 0 , \"idle\" , true ) ; \n\n        // sk.skeletonData.\n\n    }\n\n    public static play( sk : sp.Skeleton , name : string ) {\n\n        if( sk == null ) return ; \n\n        let te = sk.getCurrent( 0 ) ; \n        if( te == null ) {\n            // 当前没有动画在播放\n            sk.setAnimation( 0 , name , true ) ;    \n            return ; \n        }\n\n        if( te.animation.name == name ) return ; \n        sk.setAnimation( 0 , name , true ) ;\n\n    }\n\n}\n\n// 角色动画 攻击 时间缩放 更新\nexport class RoleAnimSpineAttackTimeScaleUpdate {\n\n    public static update( role : Role ) {\n\n        let duration = FrameSecConvert.toSecond( role.attack.cd.max ) ; \n       \n        let sk = role.view.skeleton ; \n        let anim = sk.getState().data.skeletonData.findAnimation( \"attack\" ) ; \n        let timeScale = anim.duration / duration ;\n\n        // 攻击缩放速度\n\n    }\n\n}","import { Vec3 } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { BulletFactory } from \"../../Bullet/BulletFactory\";\nimport { WorldNode } from \"../../Support/Misc/WorldNode\";\nimport { RoleAnimSpine } from \"./RoleAnimSpine\";\nimport { RoleGetDamage } from \"./RoleGetDamage\";\n\nexport class RoleAttack {\n\n    // \n    public static exe( role : Role , dir : Vec3 ) {\n\n        if( this.canAttack( role ) == false ) return ;\n\n        // dir.normalize() ; \n\n        // let pos = this.getBulletEmitPos( role , dir ) ; \n\n        // let bullet = BulletFactory.create( \"004_1\" ) ;\n        // bullet.view.root.setParent( WorldNode.ins.layer2 , false ) ;\n        // bullet.view.root.position = pos ;\n\n        role.attack.cd.setCurrentAsMax() ; \n\n        RoleAnimSpine.playAttack( role.view.skeleton ) ;\n\n        // 简单处理 直接扣血\n        this.targetGetDamage( role ) ;\n        \n\n    }\n\n    public static canAttack( role : Role ) : boolean {\n\n        let atk = role.attack ; \n\n        if( atk.lockCount > 0 ) return false ; \n\n        // 是否允许攻击\n        if( role.attack.cd.current > 0 ) return false ; \n\n        return true ; \n\n    }\n\n    // 取得子弹发射位置。dir 已经归一化\n    public static getBulletEmitPos( role : Role , dir : Vec3 ) : Vec3 {\n\n        // 方向偏移量\n        let len = 100 ; \n        let offset = dir.clone().multiply3f( len , len , 1 ) ; \n        // 加上角色发射点的高度\n        offset.y += 100 ;\n\n        offset.add( role.view.root.position ) ; \n\n        return offset ;\n\n    }\n\n     // 简单处理 直接扣血\n    public static targetGetDamage( role : Role ) {\n\n        let target = role.ai.target ; \n        if( target == null ) return ; \n\n        RoleGetDamage.exe( target , role.attack.damage );\n\n        // if( target )\n\n    }\n\n\n}","import { CfgRole } from \"../../../../../Common/Cfg/CfgRole\";\nimport { Player } from \"../../../2.Td/Player/Player\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { BuffIncreaseCalc, DataIncrease } from \"../../Buff/BuffIncreaseCalc\";\nimport { Role } from \"../Base/Role\";\n\n// 角色属性计算\nexport class RoleAttributeUpdate {\n\n    public static dataIncr = new DataIncrease() ; \n\n    public static exe( role : Role ) {\n\n        this.buff( role ) ;\n        \n    }\n\n    public static buff( role : Role ) {\n\n        /*\n            Player buff 怎么参与计算？有2种做法：\n                Player Buff 也添加到 Role 中，由 Role 的系统去处理。\n                Player Buff 单独计算。\n\n            如果放到 Role 中，可能容易出Bug。所有 Role 处理都是同一个 Buff 对象。\n            Player Buff 的生命周期应该在 Player 中处理，通常是用久生命周期。\n        \n        */\n\n        this.setRoleAsOrig( role ) ; \n\n        this.dataIncr.reset() ; \n\n        // 处理全局 Buff\n        BuffIncreaseCalc.exeBuffs( Player.ins.buff.list , this.dataIncr ) ;\n\n        // 处理 role 上的Buff\n        BuffIncreaseCalc.exeBuffs( role.buff.list , this.dataIncr ) ;\n\n        this.handleIncr( role , this.dataIncr ) ; \n\n        // // 处理全局 Buff\n        // this.buffList( role , Player.ins.buff.list ) ; \n\n        // // 处理 role 上的Buff\n        // this.buffList( role , role.buff.list ) ; \n\n    }\n\n    // 设置为原始值\n    public static setRoleAsOrig( role : Role ) {\n\n        let cfg = CfgRole.data.get( role.id ) ;\n\n        // 移速\n        role.move.speed = cfg.moveSpeed ; \n\n        // 攻速\n        role.attack.cd.max = cfg.attackCd ; \n\n    }\n\n    // 处理增量\n    public static handleIncr( role : Role , dataIncr : DataIncrease ) {\n\n        if( dataIncr.moveSpeedIncreasePercent != 0 ) {\n            role.move.speed += role.move.speed * dataIncr.moveSpeedIncreasePercent ; \n        }\n\n        let val = dataIncr.attackSpeedIncreasePercent ; \n        if( val != 0 ) {\n            let atk = role.attack ;\n            let max = atk.cd.max ; \n            if( val > 0 ) {\n                // 增加攻速\n                atk.cd.max = Math.round( max / ( 1 + val ) ) ; \n            }\n            else {\n                // 降低攻速\n                atk.cd.max += Math.round( max * Math.abs( val ) ) ; \n            }\n\n        }\n        \n\n    }\n\n    public static buffList( role : Role , list : Array< Buff > ) {\n        \n        let cfg = CfgRole.data.get( role.id ) ;\n\n        let moveSpeedOrig = cfg.moveSpeed ; \n\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let buff = list[ i ] ; \n\n            switch( buff.affix.type ) {\n                case AffixType.MoveSpeedDecreasePercent : \n                {\n                    role.move.speed += moveSpeedOrig * buff.affix.argN ; \n                }\n                break ; \n\n            }\n            \n\n        } // end for\n\n    }\n\n}\n\n","import { EffectFactory } from \"../../../../Bag/Merge/EffectFactory\";\nimport { PlayerGradeOp } from \"../../../2.Td/Player/PlayerGradeOp\";\nimport { BulletMgr } from \"../../Bullet/BulletMgr\";\nimport { WorldNode } from \"../../Support/Misc/WorldNode\";\nimport { Role } from \"../Base/Role\";\nimport { RoleMgr } from \"../Base/RoleMgr\";\n\n\nexport class RoleDie {\n\n    public static exe( role : Role ) {\n\n        // 播放特效\n        let effect = EffectFactory.create( \"RoleDie\" ) ; \n        effect.setParent( WorldNode.ins.layer2 , false ) ; \n        effect.worldPosition = role.view.root.worldPosition ; \n\n        RoleMgr.ins.remove( role ) ; \n\n        role.view.root.destroy() ; \n\n        PlayerGradeOp.addExp( role.exp.val ) ;\n\n        this.bullet( role ) ; \n\n\n    }\n\n    // 销毁锁定这个目标的子弹\n    public static bullet( role : Role ) {\n\n        for( let i = BulletMgr.ins.data.length - 1 ; i >= 0 ; --i ) {\n\n            let bullet = BulletMgr.ins.data[ i ] ;\n            if( bullet.target.targetRole == role ) {\n\n                bullet.target.targetRole = null ; \n                // BulletMgr.ins.remove( bullet ) ;\n                // bullet.view.root.destroy() ; \n\n            }\n\n        } // end for\n\n    }\n\n}","import { BoxCollider2D, Collider2D, Contact2DType, instantiate, Node, Skeleton, sp } from \"cc\";\nimport { PfMgrRole } from \"../Misc/PfMgrRole\";\nimport { Exp, Role, RoleView } from \"./Role\";\nimport { Life } from \"./Life\";\nimport { CfgRole, CfgRoleItem } from \"../../../../../Common/Cfg/CfgRole\";\nimport { SkillCom } from \"../../Skill/SkillCom\";\nimport { MoveCom } from \"../Move/MoveCom\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\nimport { BuffCom } from \"../../Buff/BuffCom\";\nimport { AttackCom } from \"../../Tower/Entity/AttackCom\";\nimport { RoleAnimSpine } from \"../Misc/RoleAnimSpine\";\n\n\nexport class RoleFactory {\n\n    public static create( id : string ) : Role {\n\n        let role = new Role() ;\n\n        role.id = id ;\n\n        RoleCfgSet.exe( role ) ;\n\n        RoleViewSet.exe( role ) ;\n\n        return role ; \n\n    }\n\n\n}\n\n\n// 角色配置设置\nexport class RoleCfgSet {\n\n    public static exe( role : Role ) {\n\n        let cfg = CfgRole.data.get( role.id ) ; \n\n        role.cfg = cfg ; \n\n        this.attack( role , cfg ) ; \n        this.life( role , cfg ) ; \n        this.move( role , cfg ) ;\n        this.skill( role , cfg ) ;\n        this.exp( role , cfg ) ;\n\n        role.buff = new BuffCom() ; \n\n    }\n\n    private static attack( role : Role , cfg : CfgRoleItem ) {\n\n        role.attack = new AttackCom() ;\n\n        role.attack.damage = cfg.attackDamage ; \n\n        role.attack.cd.current = 0 ; \n        role.attack.cd.max = cfg.attackCd ;\n\n    }\n\n    private static exp( role : Role , cfg : CfgRoleItem ) {\n\n        role.exp = new Exp() ; \n        role.exp.val = cfg.exp ;\n\n    }\n\n    private static life( role : Role , cfg : CfgRoleItem ) {\n\n        role.life = new Life() ; \n        role.life.hp.setCurrentAndMax( cfg.lifeHpMax ) ; \n\n    }\n\n    private static move( role : Role , cfg : CfgRoleItem ) {\n\n        role.move = new MoveCom() ; \n        role.move.speed = cfg.moveSpeed ; \n\n    }\n\n    private static skill( role : Role , cfg : CfgRoleItem ) {\n\n        role.skill = new SkillCom() ; \n\n    }\n    \n}\n\n\n// 角色视图设置\nexport class RoleViewSet {\n\n    public static exe( role : Role ) {\n\n\n        let root = this.createView( role.cfg ) ; \n        role.view = new RoleView() ; \n        role.view.root = root ; \n        role.view.main = root.getChildByPath( \"Main\" );\n\n        // 动画\n        role.view.skeleton = role.view.main.getComponent( sp.Skeleton ) ; \n\n        this.collsion( role ) ;  \n       \n    }\n\n    // 创建视图\n    public static createView( cfg : CfgRoleItem ) : Node {\n\n        let path : string = null ;         \n\n        if( cfg.viewId == null ) {\n            \n            let id = cfg.id ;\n            let strs = id.split( \"#\" ) ; \n            path = strs[ 0 ] + \"/\" + strs[ 1 ] ;\n\n        }\n        else {\n            path = cfg.viewId ; \n        }\n\n        let pf = PfMgrRole.pf.getChildByPath( path ) ;\n\n        let root = instantiate( pf ) ;\n        return root ; \n\n\n    }\n\n    // 碰撞器绑定\n    public static collsion( role : Role ) {\n\n        let root = role.view.root ; \n\n        let collider = root.getComponentInChildren(Collider2D);\n        if( collider == null ) return ;\n\n        role.view.collider = collider ; \n        collider[ \"Role\" ] = role ; \n        // collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this)\n        // CollisionHandler\n\n    }\n\n    static onBeginContact(BEGIN_CONTACT: string, onBeginContact: any, arg2: typeof RoleViewSet) {\n        console.log( \"碰撞\" ) ;\n    }\n\n\n\n}","import { color, Color, instantiate, Label, Node, randomRangeInt, Tween, tween, Vec3 } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { PfMgrNumber } from \"../../../../../Common/PfMgr/PfMgrNumber\";\nimport { WorldNode } from \"../../Support/Misc/WorldNode\";\nimport { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { Buff_HpRegenIncreasePercentBelowPercentPerWave } from \"../../Buff/Specific/Buff_HpRegenIncreasePercentBelowPercentPerWave\";\nimport { Sender } from \"../../Bullet/Bullet\";\nimport { Stats } from \"../../Support/Misc/Stats\";\n\n// 角色受到伤害\nexport class RoleGetDamage {\n\n    public static exe( role : Role , damage : number , showDamageValue = true , sender : Sender = null ) {\n\n        // 扣减数值\n        role.life.hp.current -= damage ; \n\n        role.view.hpBar?.refresh() ;\n\n        if( showDamageValue ) {\n            DamageValueShow.normal( role.view.root.worldPosition.clone().add3f( 0 , 50 , 0 ) , damage ) ;\n        }\n\n        this.view( role ) ;\n\n        RoleGetDamageLocal.exe( role ) ; \n\n        // 统计\n        if( sender != null ) {\n            Stats.ins.damage( sender.id , damage ) ; \n        }\n\n    }\n\n    // 受伤的表现\n    public static view( role : Role ) {\n\n        if( role.view.skeleton == null ) return ;\n\n        Tween.stopAllByTarget( role.view.skeleton ) ; \n        role.view.skeleton.color = Color.RED ; \n        tween(role.view.skeleton).delay( 0.1 ).call( ()=>{ \n            role.view.skeleton.color = Color.WHITE ; \n        } ).start() ;\n\n    }\n\n}\n\nexport class RoleGetDamageLocal {\n\n    public static exe( role : Role ) {\n\n        if( role != PlayerRole.ins.main ) return ; \n\n        Buff_HpRegenIncreasePercentBelowPercentPerWave.tryExe( role ) ; \n\n    }\n\n}\n\n\n// 伤害值显示\nexport class DamageValueShow {\n\n    public static crit( pos : Vec3 , n : number ) {\n\n        //\n        this.show( PfMgrNumber.ins.damageCrit , pos , n ) ;\n\n    }\n\n    // 普通\n    public static normal( pos : Vec3 , n : number ) {\n\n        this.show( PfMgrNumber.ins.damage , pos , n ) ;\n\n    }\n\n    // 随机位置\n    private static rndPos( pos : Vec3 ) {\n\n        pos.x += randomRangeInt( -50 , 50 ) ; \n        pos.y += randomRangeInt( -20 , 20 ) ; \n\n    }\n\n    public static show( pf : Node , pos : Vec3 , n : number ) {\n\n        let node = instantiate( pf );\n\n        let txt = node.getComponent( Label );\n        if( txt == null ) {\n            txt = node.getComponentInChildren( Label );\n        }\n        txt.string = \"-\" + n.toString() ;\n\n        var parent = WorldNode.ins.layer2 ; \n        node.setParent(parent , false ) ;\n        node.worldPosition = pos ; \n\n        // 运动到的终点位置\n        let pos2 = new Vec3( 0 , 200 ) ; \n        this.rndPos( pos2 ) ;\n\n        node.scale = new Vec3( 0.5 , 0.5 , 0.5 ) ; \n        // 向上移动\n        tween( node ).sequence(\n\n            tween( node ).parallel(\n                tween( node ).by( 0.3 , { position : pos2 } ) , \n                tween( node ).to( 0.3 , { scale : new Vec3( 1 , 1 , 1 ) } )\n            ) , \n            tween( node ).delay( 0.2 ) , \n            tween( node ).parallel(\n                tween( node ).by( 0.3 , { position : new Vec3( 0 , 50 ) } ) , \n                tween( node ).to( 0.3 , { scale : new Vec3( 0.5 , 0.5 , 0.5 ) } )\n            ) , \n            tween( node ).call( ()=>{\n                node.destroy() ; \n            } )\n\n        ).start() ;         \n\n    }\n\n}","import { Role } from \"./Role\";\n\n// 角色管理器\nexport class RoleMgr\n{\n    public static ins : RoleMgr = null ;\n\n    public local : Role = null;\n\n    // 所有的敌人\n    public allEnemies = new Array<Role>();\n\n    public add( role : Role ) : void \n    {\n        if ( this.allEnemies.indexOf(role) != -1 ) return;\n        this.allEnemies.push(role);\n\n    }\n\n    public remove( role : Role ) {\n\n        let idx = this.allEnemies.indexOf(role) ;\n        if( idx == -1 ) return ; \n\n        this.allEnemies.splice( idx , 1 ) ; \n\n    }\n\n}","import { Vec3 } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { RoleAnimSpine } from \"./RoleAnimSpine\";\nimport { RoleMoveView } from \"../Move/RoleMoveView\";\nimport { MoveRole } from \"../Move/MoveRole\";\n\n\nexport class RoleMove\n{\n    public static exe( role : Role , v : Vec3 ) : boolean \n    {\n        if ( this.canMove(role) == false) return false ;\n\n        // 原地表现：旋转，行走动画\n        RoleMoveView.exe(role , v );\n\n        MoveRole.exe( role , v );\n\n        // 移动轨迹\n        //role.view.effectMoveTrack?.Play();\n        // var moveTack = role.view.effectMoveTrack;\n        // if ( moveTack != null && moveTack.isStopped == true )\n        // {\n        //     moveTack.Play();\n        // }\n\n        return true ; \n\n    }\n\n    public static stop( role : Role ) : void \n    {\n        if ( this.canMove(role) == false) return;\n        RoleAnimSpine.playIdle(role.view.skeleton);\n        // RoleAnimSa.playIdle( role.view.sa );\n\n        // 停止移动轨迹\n        // role.view.effectMoveTrack?.Stop();\n\n    }\n\n    // 更新限制计数器\n    // public static void updateLimit( Role role , int n )\n    // {\n    //     if ( n < role.move.limitCount ) return;\n    //     role.move.limitCount = n;\n    // }\n\n    public static canMove( role : Role ) : boolean\n    {\n        if (role.life.isDead == true) return false;\n\n        let move = role.move ; \n        if ( move == null || move.enabled == false ) return false ;\n\n        if( move.lockCount > 0 ) return false ;\n\n\n        // 是否硬直\n        // if (role.stiffness.current > 0) return false;\n\n        // 移动限制\n        // if (role.move.limitCount > 0) return false;\n\n        // 是否眩晕\n        //if (role.logicData.stun.cd.current >= 0) return false;\n\n        // 是否攻击CD中。提前可以行动，实现 hit & run。\n        //var atk = role.attack;\n        //if (atk != null )\n        //{\n        //    // Hit & Run\n        //    //if (atk.cd.current > atk.act) return false;\n\n        //    if(atk.cd.current > 0)\n        //    {\n        //        return false;\n        //    }\n\n        //}\n\n        // 是否在移动阻塞中\n        //if (role.logicData.move.blockCount > 0) return false;\n\n        // 技能执行中\n        //if ( role.logicData.skillExecute.count.current >= 0 ) return false;\n\n        return true;\n\n    }\n\n}","import { isValid, Vec3 } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\n\n/*\n    用于击退等位移控制\n\n*/ \nexport class RoleMoveSys {\n\n    public static ins = new RoleMoveSys() ; \n\n    public add( role : Role , second : number , len : number , dir : Vec3 , onComplete : ()=>void = null ) {\n\n        let item = new RoleMoveSysItem() ; \n        this.items.push( item ) ; \n\n        item.role = role ; \n        item.frame = FrameSecConvert.toFrame( second ) ; \n        item.offset = dir.clone().multiplyScalar( len / item.frame ) ;  \n        item.onComplete = onComplete ; \n\n    }\n\n    public clear() {\n        this.items.splice( 0 , this.items.length ) ; \n    }\n\n    public update() {\n\n        for( let i = this.items.length - 1 ; i >= 0 ; --i ) {\n\n            let item = this.items[ i ] ; \n\n            item.frame-- ; \n            if( item.frame < 0 || isValid( item.role.view.root ) == false ){\n                item.onComplete?.() ; \n                this.items.splice( i , 1 ) ; \n                continue ; \n            }\n\n            // 移动\n            let pos = item.role.view.root.position.clone() ;\n            pos.add( item.offset ) ;\n            item.role.view.root.position = pos ; \n\n        } // end for\n\n    }\n\n    public items = new Array< RoleMoveSysItem >() ; \n\n}\n\nexport class RoleMoveSysItem {\n\n    public role : Role ; \n\n    // 帧数\n    public frame = 0 ; \n\n    // 每帧的偏移量\n    public offset : Vec3 ; \n\n    public onComplete : ()=>void = null ; \n\n}","import { Vec3 } from \"cc\";\nimport { Role } from \"../Base/Role\";\nimport { RoleAnimSpine } from \"../Misc/RoleAnimSpine\";\n\n// import { RoleAnimSpine } from \"../Role/Misc/RoleAnimSpine\";\n\n    // 移动表现处理\n    export class RoleMoveView\n    {\n        public static exe( role : Role , v : Vec3 ) : void\n        {\n            this.orien( role , v );\n            RoleAnimSpine.playMove(role.view.skeleton);\n            // RoleAnimSa.playWalk( role.view.sa );\n        }\n\n        // 朝向\n        public static orien( role : Role , v : Vec3 ) : void\n        {\n            if( v.x == 0 )\n            {\n                // 垂直向上，保持原先的朝向。\n                return;\n            }\n\n            var main = role.view.main;\n            var s = main.getScale() ;\n            let sign = v.x < 0 ? -1 : 1;\n            s.x = Math.abs( s.x ) * sign;\n            main.setScale( s ) ;\n\n        }\n\n        // // 角色旋转\n        // public static void rotate(Role role, Vector3 dir)\n        // {\n        //     var degree = Math.Atan2(dir.x, dir.z) * 180 / Math.PI;\n        //     var eulerAngles = new Vector3(0, (float)degree, 0);\n            \n        //     role.view.main.localEulerAngles = eulerAngles;\n\n        // }\n\n\n    }","\nimport { GameLose } from \"../../../2.Td/Flow/GameLose\";\nimport { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { BuffOp } from \"../../Buff/BuffOp\";\nimport { SkillType } from \"../../Skill/SkillBase\";\nimport { SkillCloseDamage, SkillCloseDamageOp } from \"../../Skill/SkillCloseDamage/SkillCloseDamage\";\nimport { Stats } from \"../../Support/Misc/Stats\";\nimport { Role } from \"../Base/Role\";\nimport { RoleMgr } from \"../Base/RoleMgr\";\nimport { RoleDie } from \"./RoleDie\";\nimport { RoleGetDamage } from \"./RoleGetDamage\";\n\nexport class RoleSys {\n\n    public static update() {\n\n        let all = RoleMgr.ins.allEnemies ; \n        for( let i = all.length - 1 ; i >= 0 ; --i ) {\n\n            let role = all[ i ] ;\n\n            if( role.life.hp.current <= 0 ) {\n                RoleDie.exe( role ) ;\n                continue ; \n            }\n\n            let atkCd = role.attack.cd ;\n            if( atkCd.current > 0 ) { atkCd.current-- ; } \n\n            this.skill( role ) ;\n\n            RoleBuffSys.update( role ) ; \n\n        } // end for\n\n\n        // 判断玩家角色是否死亡\n        if( PlayerRole.ins.main.life.hp.current <= 0 ) {\n            GameLose.exe() ; \n        }\n\n    }\n\n    public static skill( role : Role ) {\n\n        let skillCom = role.skill ;\n        if( skillCom == null ) return ; \n\n        for( let skill of skillCom.list ) {\n\n            if( skill.cd.current > 0 ) {\n                skill.cd.current-- ; \n            }\n            if( skill.cd.current != 0 ) continue ;\n\n            switch( skill.type ) {\n                case SkillType.CloseDamage : {\n\n                    let closeDamage = skill as SkillCloseDamage ;\n\n                    // 伤害\n                    SkillCloseDamageOp.exe( closeDamage ) ;\n\n\n                }\n                break ;\n\n            }\n\n        }\n\n    }\n\n}\n\nexport class RoleBuffSys {\n\n    public static update( role : Role ) {\n\n        let list = role.buff.list ; \n        for( let i = list.length - 1 ; i >= 0 ; --i ) {\n\n            let buff = list[ i ] ;\n\n            buff.duration.current-- ; \n            if( buff.duration.current < 0 ) {\n                // 生命周期到，移除\n                BuffOp.roleRemove( role , i ) ; \n                continue ; \n            }\n\n            if( buff.interval.max >= 0 ) {\n                buff.interval.current-- ; \n                if( buff.interval.current == -1 ) {\n\n                    buff.interval.setCurrentAsMax() ; \n\n                    // 触发\n                    this.trigger( role , buff ) ; \n\n                }\n            }\n\n        } // end for\n\n    }\n\n    public static trigger( role : Role , buff : Buff ) {\n\n        switch( buff.affix.type ) {\n\n            case AffixType.Burn : {\n                RoleGetDamage.exe( role , buff.affix.argN ) ;\n                Stats.ins.damage( buff.sender.id , buff.affix.argN ) ; \n            }\n            break ; \n\n            case AffixType.Poisoning :\n            case AffixType.PoisoningPercent :\n            {\n                RoleGetDamage.exe( role , buff.affix.argN ) ;\n                Stats.ins.damage( buff.sender.id , buff.affix.argN ) ; \n            }\n            break ; \n\n        }\n\n    }\n\n\n\n\n\n}","import { ResolutionPolicy, game, screen, view } from \"cc\";\n\n\n// 屏幕适配 分辨率策略\nexport class ScreenAdaptResolutionPolicy {\n\n    /*\n        ratio 宽高比\n\n        当前屏幕是：\n            长屏幕时，固定宽，延伸高。\n            非长屏幕，iPad，固定高，延伸宽。\n\n        适用范围：\n            竖屏游戏，横屏游戏\n\n    */ \n    public static exeRatio( ratio : number = 720 / 1280 ) {\n\n        // view.getVisibleSize\n        \n        let size = screen.resolution ;\n        let ratio2 = size.width / size.height ;\n        if( ratio >= ratio2 ) {\n            // 长屏幕\n            view.setResolutionPolicy( ResolutionPolicy.FIXED_WIDTH ) ;\n            // console.log( \"固定宽\" ) ;\n        }\n        else {\n            view.setResolutionPolicy( ResolutionPolicy.FIXED_HEIGHT ) ;\n            // console.log( \"固定高\" ) ;\n        }\n        \n        // console.log( \"screen.resolution：\" + screen.resolution.width + \",\" + screen.resolution.height ) ;\n        // console.log( \"screen.windowSize：\" + screen.windowSize.width + \",\" + screen.windowSize.height ) ;\n\n    }\n\n    public static exeDesignResolution() {\n\n        let size = view.getDesignResolutionSize() ;\n        this.exeRatio( size.width / size.height ) ;\n    }\n\n}","import { Node, Tween, tween, Vec3 } from \"cc\";\n\n// 顺序缩放显示\nexport class SeqScaleShow {\n\n    public static exe( nodes : Array< Node > , interval : number = 0.1 ) : Tween< Node > {\n\n        this.stop( nodes ) ;\n\n        let t = tween( nodes[ 0 ] ) ;\n        for( let i = 0 ; i < nodes.length ; ++i ) {\n\n            let node = nodes[ i ] ;\n\n            // 全部设置为0缩放\n            node.scale = Vec3.ZERO ; \n\n            t.call( ()=>{\n                this.scale( node ) ;\n            } );\n            t.delay( interval ) ;\n\n        } // end for\n\n        t.start() ;\n\n        return t ; \n\n    }\n\n    public static scale( node : Node ) {\n\n        node.active = true ; \n\n        node.scale = new Vec3( 0.2 , 0.2 , 0.2 ) ;\n        tween( node ).sequence(\n            tween( node ).to( 0.2 , { scale : new Vec3( 1.2 , 1.2 , 1.2 ) } ) , \n            tween( node ).to( 0.1 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } ) , \n        ).start() ;\n\n    }\n\n    private static stop( nodes : Array< Node > ) {\n\n        for( let node of nodes ) {\n            Tween.stopAllByTarget( node ) ; \n        } // end for\n\n    }\n\n}","import { Node, Tween, Vec2, Vec3, tween } from \"cc\";\n\n// 抖动\nexport class Shake\n{\n    public static exePreset( node : Node , id : string , scalePos : number = 1 ){\n\n        let item = this.genData(id) ;\n\n        // 修改坐标\n        for( let t of item ) {\n            let pos = t[ 0 ] ;\n            pos.multiply3f( scalePos , scalePos , scalePos ) ;\n            pos.add( node.position ) ;\n        }\n\n        this.exe( node , item ) ;\n\n    }\n\n    public static exe( node : Node , data : Array< [ Vec3 , number ] > )\n    {\n        let seq = tween( node ) ;\n        for( let i = 0 ; i < data.length ; ++i ){\n            let item = data[ i ]\n            let pos = item[ 0 ] ;\n            let duration = item[ 1 ] ;\n            let t = tween( node ).to( duration , { position : pos} ) ;\n            seq.then( t ) ;\n        }\n        seq.start() ;\n\n    }\n\n    // 生成预设抖动移动数据\n    public static genData( id : string ) : Array< [ Vec3 , number ] > {\n\n        let list : Array< [ Vec3 , number ] > = null ;\n\n        if( id == \"1\" ) {\n            list = new Array< [ Vec3 , number ] >() ;\n            list.push( [ new Vec3( 10,-10 ) , 0.1 ] ) ;\n            list.push( [ new Vec3( 0 , 0  ) , 0.05 ] ) ;\n        }\n        else if( id == \"2\" ) {\n            list = new Array< [ Vec3 , number ] >() ;\n            list.push( [ new Vec3( 6,10 ) , 0.1 ] ) ;\n            list.push( [ new Vec3( 10,-7 ) , 0.1 ] ) ;\n            list.push( [ new Vec3( -5,-4 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( 5,5 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( 0 , 0 ) , 0.05 ] ) ;\n        }\n        else if( id == \"3\" ) {\n            list = new Array< [ Vec3 , number ] >() ;\n            list.push( [ new Vec3( 10,1 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( -9,-7 ) , 0.1 ] ) ;\n            list.push( [ new Vec3( 13,5 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( 2,-7 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( 9,-1 ) , 0.05 ] ) ;\n            list.push( [ new Vec3( 5,1) , 0.05 ] ) ;\n            list.push( [ new Vec3( 0 , 0 ) , 0.05 ] ) ;\n        }\n\n        return list ;\n\n    }\n\n}","\n// 随机打乱\nexport class Shuffle {\n\n    // 随机打乱数组\n    public static shuffleArray<T>( list : Array< T > ) {\n\n        for( let i = 0 ; i < list.length ; ++i ) {\n            let idx = this.rangeInt( 0 , list.length - 1 )  ;\n            let t = list[ i ] ;\n            list[ i ] = list[ idx ] ;\n            list[ idx ] = t ;\n\n        } // end for\n\n    }\n\n    // min inclusive , max inclusive\n    public static rangeInt(min : number , max : number ) : number\n    {\n        return Math.floor(Math.random() * ( max + 1 - min  ) ) + min ;\n\n    }\n\n}","import { CurrentMax } from \"../Support/SimpleStruct/CurrentMax\";\n\n\nexport class SkillBase {\n\n    public type = SkillType.None ; \n\n    // 间隔\n    public cd = new CurrentMax() ; \n    \n}\n\nexport enum SkillType {\n\n    None , \n\n    // 靠近伤害目标\n    CloseDamage, \n    Fist, \n\n}","\nimport { Role } from \"../../Role/Base/Role\";\nimport { RoleGetDamage } from \"../../Role/Misc/RoleGetDamage\";\nimport { SkillBase, SkillType } from \"../SkillBase\";\n\n// 靠近就造成伤害\nexport class SkillCloseDamage extends SkillBase {\n\n    public constructor() {\n        \n        super();\n\n        this.type =  SkillType.CloseDamage;\n        this.cd.setCurrentAndMax( 60 ) ;\n\n    }\n\n    // 伤害值\n    public damageVal = 1 ;\n\n    // 作用的角色\n    public targets = new Array< Role >() ; \n\n}\n\n// \nexport class SkillCloseDamageOp {\n\n    // 加入标记伤害\n    public static tryAdd( role1 : Role , role2 : Role ) {\n\n        let skillbase = role1.skill?.list.find( ( e )=>{ return e.type == SkillType.CloseDamage } ) ;\n        if( skillbase == null ) return ;\n        let skill = skillbase as SkillCloseDamage ; \n\n        if( skill.targets.indexOf( role2 ) != -1 ) return ;\n\n        skill.targets.push( role2 ) ;\n\n    }\n\n    // 移除标记伤害\n    public static tryRemove( role1 : Role , role2 : Role ) {\n\n        let skillbase = role1.skill?.list.find( ( e )=>{ return e.type == SkillType.CloseDamage } ) ;\n        if( skillbase == null ) return ;\n        let skill = skillbase as SkillCloseDamage ; \n\n        let idx = skill.targets.indexOf( role2 ) ;\n        if( idx == -1 ) return ; \n        skill.targets.splice( idx , 1 ) ;\n\n    }\n\n    // 执行伤害\n    public static exe( skill : SkillCloseDamage ) {\n\n        if( skill.targets.length == 0 ) return ; \n\n        for( let roleTarget of skill.targets ) {\n\n            console.log( \"造成伤害\" ) ;\n            RoleGetDamage.exe( roleTarget , skill.damageVal ) ;\n\n        }\n\n        // 造成伤害后才重新开始CD\n        skill.cd.setCurrentAsMax() ; \n\n    }\n\n}","import { SkillBase } from \"./SkillBase\";\n\nexport class SkillCom {\n\n    public list = new Array< SkillBase >() ;\n\n}\n\n","import { AudioClip, AudioSource, Node, Tween, instantiate, resources, sys, tween } from \"cc\";\n\nimport { UiMain } from \"../../Game/Ui/Main/UiMain\";\nimport { Sound as SoundBase  } from \"../../SL/Cocos/Audio/Ver1/Sound\";\n\n\n\n// 音效播放\nexport class Sound extends SoundBase {\n\n    public static ins = new Sound() ;\n\n    // 是否开启\n    public enabled = true ; \n\n    // 按钮点击音效\n    public btnClick() {\n        this.play( \"Common/Audio/Sound/btnClick\" ) ;\n    }\n \n    // 获得物品\n    public getReward() {\n        this.play( \"Common/Audio/Sound/获得奖励\" ) ;\n    }\n\n}\n\n","import { AudioClip, AudioSource, Node, resources, sys, tween } from \"cc\";\n\n/*\n    音效播放控制\n    从 resources 中读取\n\n    如果不用对象池，在微信小游戏 微信开发者工具，会出现 warning：Too many (200) InnerAudioContext\n*/ \nexport class Sound {\n\n    public enabled = true ; \n    \n    public constructor() {\n\n        let node = new Node ;\n        this.audioSrc = node.addComponent( AudioSource ) ;\n\n    }\n\n    public play( key : string , volume : number = 1.0) {\n\n        if( this.enabled == false ) return ;\n\n        resources.load( key , AudioClip , (err, audio) =>\n        { \n            this.audioSrc.playOneShot( audio , volume ) ; \n        } );\n\n    }\n\n    public audioSrc : AudioSource = null ; \n\n}\n\n","import { Input } from \"cc\";\nimport { Button } from \"cc\";\nimport { Node } from \"cc\";\nimport { Sound } from \"./Sound\";\n\n// 音效按钮单击设置器 \nexport class SoundBtnClickSetter {\n\n    public static exe( root : Node ) {\n\n        let btns = root.getComponentsInChildren( Button ) ;\n        // let t = root.getComponent( Button ) ; \n        // if( t != null ) { btns.push( t ) ; }\n        for( let btn of btns ) {\n\n            // 避免重复添加\n            btn.node.off( Input.EventType.TOUCH_END , this.play , this ) ; \n            btn.node.on( Input.EventType.TOUCH_END , this.play , this ) ; \n\n            // btn.node.off( Input.EventType.TOUCH_END , Sound.ins.btnClick , Sound.ins ) ; \n            // btn.node.on( Input.EventType.TOUCH_END , Sound.ins.btnClick , Sound.ins ) ; \n\n        } // end for\n\n        // this.remove( root ) ; \n\n    }\n\n    public static remove( root : Node ) {\n\n        let btns = root.getComponentsInChildren( Button ) ;\n        // let t = root.getComponent( Button ) ; \n        // if( t != null ) { btns.push( t ) ; }\n        for( let btn of btns ) {\n            btn.node.off( Input.EventType.TOUCH_END , this.play , this ) ; \n\n            // btn.node.off( Input.EventType.TOUCH_END , Sound.ins.btnClick , Sound.ins ) ; \n\n        } // end for\n\n    }\n\n    public static play() {\n\n        Sound.ins.btnClick() ; \n        \n    }\n\n}","import { sys } from \"cc\";\r\nimport { Account } from \"../Account/Account\";\r\nimport { AccountPersist } from \"../Account/AccountPersist\";\r\n\r\n// 体力恢复器\r\nexport class StaminaRecovery\r\n{\r\n    public static ins = new StaminaRecovery();\r\n\r\n\r\n    /*\r\n        恢复一个的周期。单位秒\r\n        1800，30分钟。\r\n    */\r\n    public cycle = 20 * 60 ; \r\n\r\n\r\n    // 记录的时间点\r\n    public time = -1 ;\r\n\r\n    // 状态。\r\n    public state = 0;\r\n\r\n    // 倒计时：秒\r\n    public countdown = 0;\r\n\r\n\r\n    public exe() : void\r\n    {\r\n        //Debug.Log( \"状态：\" + state );\r\n\r\n        let stamina = Account.ins.stamina ; \r\n\r\n        switch( this.state )\r\n        {\r\n            case 0:\r\n            {\r\n                // 检查是否要开始恢复\r\n                if ( stamina.current >= stamina.max )\r\n                {\r\n                    // 满\r\n                    return;\r\n                }\r\n\r\n                // 记录当前时间点\r\n                this.time = Math.floor( Date.now() / 1000 ) ;\r\n                this.state = 1;\r\n\r\n                StaminaRecoveryPersist.save();\r\n\r\n            }\r\n            break;\r\n\r\n            case 1:\r\n            {\r\n                // 恢复\r\n\r\n                var now = Math.floor( Date.now() / 1000 ) ;\r\n                var diff = now - this.time;\r\n                var diffSce = diff ;\r\n\r\n                this.countdown = this.cycle - diffSce;\r\n                if ( this.countdown < 0 ) this.countdown = 0; \r\n\r\n                if ( diffSce < this.cycle )\r\n                {\r\n                    //Debug.Log( \"体力恢复倒计时：\" + this.cooldown );\r\n                    return;\r\n                }\r\n\r\n                // 恢复一个\r\n                var n = Math.floor( diffSce / this.cycle ) ;\r\n                stamina.current += n;\r\n                // 限制不超过最大值\r\n                if ( stamina.current > stamina.max ) stamina.current = stamina.max;\r\n                AccountPersist.save();\r\n\r\n                if ( stamina.current >= stamina.max )\r\n                {   // 全部恢复完成\r\n                    this.state = 0 ; \r\n                }\r\n                else\r\n                {   // 未恢复完\r\n                    this.time = now ;\r\n                }\r\n\r\n                StaminaRecoveryPersist.save();\r\n\r\n            }\r\n            break;\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n// 体力恢复器持久化\r\nexport class StaminaRecoveryPersist\r\n{\r\n    public static load() : void \r\n    {\r\n        let recovery = StaminaRecovery.ins ; \r\n\r\n        let str = sys.localStorage.getItem( \"StaminaRecovery\" ) ; \r\n        if( str == null || str == \"\" ) return ;\r\n        let json = JSON.parse( str ) ;\r\n        let str2 = json[ \"State\" ] ;\r\n        recovery.state = Number( str2 ) ; \r\n        str2 = json[ \"Time\" ] ;\r\n        recovery.time = Number( str2 ) ; \r\n\r\n    }\r\n\r\n    public static save() : void\r\n    {\r\n        let recovery = StaminaRecovery.ins;\r\n\r\n        let json = {} ;\r\n        json[ \"State\" ] = recovery.state ; \r\n        json[ \"Time\" ] = recovery.time ; \r\n        let str = JSON.stringify( json ) ;\r\n        sys.localStorage.setItem( \"StaminaRecovery\" , str ) ; \r\n\r\n    }\r\n\r\n}","\n// 统计\nexport class Stats {\n\n    public static ins : Stats = null ; \n\n    // 数据。key 实体ID，造成的伤害总数\n    public data = new Map< string , StatsItem >() ;\n\n    // 统计伤害\n    public damage( id : string , d : number ) {\n\n        // 转换到1级的实体统计\n        let strs = id.split( \"_\" ) ; \n        if( strs.length >= 2 ) {\n            id = strs[ 0 ] + \"_1\" ; \n        }\n\n        let item = this.data.get( id ) ; \n        if( item == null ) {\n            item = new StatsItem() ; \n            item.id = id ; \n            Stats.ins.data.set( id , item ) ; \n        }\n        item.damage += d ; \n\n    }\n\n    // 取得排序后\n    public sort() : Array< StatsItem > {\n\n        this.list.splice( 0 , this.list.length ) ; \n\n        for( let kv of this.data ) {\n            let item = kv[1] ;\n            this.list.push( item ) ; \n        } // end for\n\n        this.list.sort( ( a , b )=>{\n            if( a.damage < b.damage ) return 1 ;\n            else if( a.damage > b.damage ) return -1 ; \n            return 0 ; \n        } ) ;\n\n        return this.list ;\n\n    }\n\n    private list = new Array< StatsItem >() ;\n\n}\n\nexport class StatsItem {\n\n    public id : string ; \n\n    public damage = 0 ; \n\n}","\n\nexport class StringUtil {\n\n    // 数字字符串填充前导0\n    public static fillZero(num : number , length : number ) {\n        return (Array(length).join('0') + num).slice(-length);\n    } \n     \n}","import { Director, director, find, tween, UITransform, Vec3 } from \"cc\";\nimport { UiBag } from \"../Bag/Main/UiBag\";\nimport { UiTray } from \"../Bag/Main/UiTray\";\nimport { MoneyFly } from \"../../Common/Misc/MoneyFly\";\nimport { UiMain } from \"../Ui/Main/UiMain\";\nimport { UiMoney001 } from \"../Ui/Main/UiMoney001\";\nimport { DataIncrease } from \"../World/1.Base/Buff/BuffIncreaseCalc\";\nimport { BuffString } from \"../World/1.Base/Buff/BuffString\";\nimport { ItemDraw } from \"../../Common/Item/ItemDraw\";\nimport { UiBubble } from \"../../Common/Ui/UiBubble\";\n\nexport class Test {\n\n    public static exe() {\n\n        // this.test1() ; \n        // this.testBag() ; \n\n        // this.test2() ; \n        // this.test4() ; \n\n    }\n\n    static test4() {\n\n        let ui = UiBubble.create() ; \n        let parent = UiMain.ins.root ; \n        ui.root.setParent( parent , false ) ; \n        ui.root.position = Vec3.ZERO ; \n        ui.setString( \"test测试测测\\nsfsdf\\n测试\" ) ;\n\n    }\n\n    static test3() {\n\n\n        BuffString.getDescription( \"005-AttackBulletBounceBetweenEnemiesIncrease1\" ) ; \n\n        let di = new DataIncrease() ; \n        di.attackCritMultipleIncreasePercent = 10 ;\n        di.reset() ;\n        di.hpMaxIncrease = 20 ; \n        di.reset() ; \n\n        let ret = ItemDraw.exe( \"MainLevel_001\" ) ; \n\n\n    }\n\n    static test2() {\n\n        // 时间倍数运行\n        let oldTick = director.tick;\n        director.tick = (dt: number) => {\n            oldTick.call(director, dt * 3) ; \n        }\n        \n    }\n\n    public static test1() {\n\n        let pos2 = UiMoney001.ins.root.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n        UiMain.ins.root.getComponent( UITransform ).convertToNodeSpaceAR( pos2 , pos2 ) ;\n        MoneyFly.money001Fly( UiMain.ins.root , Vec3.ZERO , pos2 ) ; \n\n \n    }\n\n    public static testBag() {\n\n        UiBag.create( find( \"Canvas\" ) ) ; \n\n        UiTray.ins.addArticleById( \"001\" ) ;\n        UiTray.ins.addArticleById( \"001\" ) ;\n        // UiTray.ins.addArticleById( \"002\" ) ;\n        // UiTray.ins.addArticleById( \"003\" ) ;\n\n        UiTray.ins.addArticleById( \"001\" ) ;\n        UiTray.ins.addArticleById( \"BagExpand_002\" ) ;\n\n        // tween( this )\n        // .delay( 0.5 )\n        // .call( ()=>{\n        //     UiBagGrid.ins.showExpandable() ; \n        // } )\n        // .delay( 0.8 )\n        // .call( ()=>{\n        //     UiBagGrid.ins.showNormal() ; \n        // } )\n        // .start() ;\n\n    }\n\n}","import { Node } from \"cc\";\n\nexport class Test1 {\n\n    public static ins = new Test1() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n    }\n\n}","import { JsonAsset } from \"cc\";\r\nimport { assetManager } from \"cc\";\r\n\r\nexport class Test {\r\n\r\n    public static exe() {\r\n\r\n        // this.exe1() ; \r\n\r\n    }\r\n\r\n    public static exe1() {\r\n\r\n        let url = \"https://bagtd.oss-cn-beijing.aliyuncs.com/test001/Article.json\" ; \r\n        let url2 = \"http://192.168.22.225/Cfg/Article.json\" ;\r\n\r\n\r\n        // assetManager 要设置跨域。不能访问 hfs 服务器。\r\n        assetManager.loadRemote( url2 , ( err , data : JsonAsset )=>{\r\n\r\n            console.log( data.json ) ; \r\n\r\n        } ) ;\r\n\r\n        // fetch 不能访问 hfs 服务器。\r\n        fetch( url2 ).then((response: Response) => {\r\n            return response.text()\r\n        }).then((value) => {\r\n            console.log(value);\r\n        })\r\n\r\n    }\r\n\r\n}","import { Node } from \"cc\";\n\nexport class Test2 {\n\n    public static ins = new Test2() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n    }\n\n}","import { Size, Sprite, UITransform } from \"cc\";\n\n// 按照纹理原始比例设置 Sprite 大小\nexport class TextureOriginalRatioSprite {\n\n    public static exe( spr : Sprite , sizeSpr : Size = null ) {\n\n        let trans = spr.getComponent( UITransform ) ;\n\n        if( sizeSpr == null ) {\n            sizeSpr = trans.contentSize.clone() ;\n        }\n        else{\n            sizeSpr = sizeSpr.clone() ;\n        }\n\n        let sizeOrig = spr.spriteFrame.originalSize ;\n\n        let f = sizeOrig.width / sizeOrig.height ; \n        if( sizeOrig.width > sizeOrig.height ) {\n            // 改变高度\n            sizeSpr.height = sizeSpr.width / f ;\n        }\n        else if( sizeOrig.height > sizeOrig.width ) {\n            sizeSpr.width = sizeSpr.height * f ;\n        }\n        trans.setContentSize( sizeSpr ) ;\n\n    }\n\n}","import { Vec2 } from \"cc\";\n\n// 瓦片形状数据解析器\nexport class TileShapeDataParser {\n\n    // 从下开始解析。[ 0 ] 元素是原点\n    public static exe( str : string ) : Array< Vec2 > {\n\n        let coords = new Array< Vec2 >() ;\n        let lines = str.split( \"\\n\" ) ;\n        for( let y = lines.length - 1 ; y >= 0 ; --y ) {\n            let line = lines[ y ] ;\n            for( let x = 0 ; x < line.length ; ++x ) {\n                if( line.charAt( x ) == \"0\" ) continue ;\n                let coord = new Vec2( x , lines.length - y - 1 ) ;\n                coords.push( coord ) ;\n            }\n            \n        } // end for\n\n        return coords ;\n\n    }\n\n}","import { Node } from \"cc\";\nimport { CurrentMax } from \"../../Support/SimpleStruct/CurrentMax\";\nimport { AttackCom } from \"./AttackCom\";\nimport { BagArticle } from \"../../../../Bag/Article/BagArticle\";\nimport { BuffCom } from \"../../Buff/BuffCom\";\nimport { AuraCom } from \"../../Buff/AuraCom\";\n\n// 塔\nexport class Tower {\n\n    // 绑定的背包物品\n    public article : BagArticle = null ; \n\n    // 攻击\n    public attack : AttackCom = null ; \n\n    public view = new TowerView() ; \n\n    public buff : BuffCom = null ; \n    \n    public aura : AuraCom = null ; \n    \n    public hpMaxIncrease : HpMaxIncrease = null ; \n\n    public hpRegen : HpRegen = null ; \n\n}\n\nexport class TowerView {\n\n    public root : Node ; \n\n}\n\n// 增加宿主血量\nexport class HpMaxIncrease {\n \n    public val : number = 0 ; \n}\n\n// 血量恢复\nexport class HpRegen {\n\n    public cd = new CurrentMax() ;\n\n    // 恢复百分比\n    public percent : number = 0 ; \n\n}","import { Player } from \"../../../2.Td/Player/Player\";\nimport { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { TowerMgr } from \"../Entity/TowerMgr\";\nimport { TowerAttributeUpdate } from \"./TowerAttributeUpdate\";\nimport { TowerAuraHandler as TowerAuraEmit } from \"./TowerAuraEmit\";\nimport { DataIncrease } from \"../../Buff/BuffIncreaseCalc\";\nimport { TowerCfgSet } from \"../Entity/TowerFactory\";\nimport { BuffFactory } from \"../../Buff/BuffFactory\";\nimport { BuffResetMergeGrade } from \"../../Buff/BuffResetMergeGrade\";\n\n// 塔整体计算\nexport class TowerAllUpdate {\n\n    public static updateAll() {\n\n        // PlayerRoleAttribute.ins.reset() ; \n\n        // buff 还原到初始状态\n        this.resetBuff() ; \n\n        // 等级 Buff 添加\n        // for( let i = 0 ; i < TowerMgr.ins.data.length ; ++i ) {\n        //     let tower = TowerMgr.ins.data[ i ] ;\n        //     this.grade( tower ) ; \n        // }\n\n        // 特性 Buff 添加\n        this.playerBuff() ; \n        \n        // 光环 Buff 添加\n        TowerAuraEmit.aura() ; \n\n        // 计算\n        let dataIncr = new DataIncrease() ; \n        for( let i = 0 ; i < TowerMgr.ins.data.length ; ++i ) {\n            let tower = TowerMgr.ins.data[ i ] ;\n            TowerAttributeUpdate.exe( tower ) ;\n            let dataIncr2 = TowerAttributeUpdate.dataIncrease ; \n\n            // \n            dataIncr.hpMaxIncrease += dataIncr2.hpMaxIncrease + dataIncr2.hpMaxIncrease * dataIncr2.hpMaxIncreaseIncreasePercent ; \n\n        }\n\n        \n\n        this.role( dataIncr ) ;\n\n\n    }\n\n    // 特性 Buff 添加\n    private static playerBuff() {\n\n        for( let i = 0 ; i < TowerMgr.ins.data.length ; ++i ) {\n            let tower = TowerMgr.ins.data[ i ] ;\n            for( let buff of Player.ins.buff.list ) {\n\n                let cfg = buff.cfg ; \n\n                // 判作用域\n                if( this.isSpecified( cfg.specified , tower.article.cfg.id ) == false ) continue ; \n\n                // 生成新的Buff对象\n                let buffNew = BuffFactory.create( cfg.id ) ;\n\n                // 处理 解锁的Buff 合成等级系数\n                BuffResetMergeGrade.exe( buff , tower.article.cfg.mergeGrade ) ;\n\n                if( cfg.isAura == false ) {\n                    tower.buff.list.push( buffNew ) ;\n                }\n                else {\n                    tower.aura.list.push( buffNew ) ;\n                }\n\n            } // end for\n        }\n\n    }\n\n    // buff 删除非天生的Buff。\n    private static resetBuff() {\n\n        // 删除非天生的Buff\n        let remove = ( list : Array< Buff > )=>{\n            for( let i = list.length - 1 ; i >= 0 ; --i ) {\n                if( list[ i ].isNative == true ) continue ;\n                list.splice( i , 1 ) ;\n            } // end for\n        } ;\n\n        for( let i = 0 ; i < TowerMgr.ins.data.length ; ++i ) {\n\n            let tower = TowerMgr.ins.data[ i ] ;\n\n            remove( tower.buff.list ) ;\n            remove( tower.aura.list ) ;\n\n            TowerCfgSet.buff( tower , tower.article.cfg.tower ) ; \n\n            // 重新加入升级线的Buff\n            TowerCfgSet.buffGrade( tower ) ; \n\n        }\n\n    }\n\n    // 作用到角色上\n    private static role( dataIncr : DataIncrease ) {\n\n        let role = PlayerRole.ins.main ; \n        let life = role.life ;\n        let hp = life.hp ; \n        // 当前血量比\n        let f = hp.current / hp.max ; \n\n        if( dataIncr.hpMaxIncrease > 0 ) {\n            hp.max = role.cfg.lifeHpMax + Math.round( dataIncr.hpMaxIncrease ) ; \n            hp.current = Math.round( hp.max * f ) ;\n            role.view.hpBar.refresh() ; \n        }\n        else {\n            // 设置到最初的值\n            hp.max = role.cfg.lifeHpMax ;\n            hp.current = Math.round( hp.max * f ) ;\n            role.view.hpBar.refresh() ; \n        }\n\n    }\n\n    // 是否作用于指定实体\n    private static isSpecified( specified : Set< string > , idEntity : string ) : boolean {\n\n        if( specified == null || specified.size == 0 ) {\n            // 全局\n            return true ; \n        }\n        \n        if( specified.has( idEntity ) == true ){\n            // 指定实体\n            return true ; \n        }\n\n        return false ; \n\n    }\n\n\n\n}\n\n\n","import { randomRangeInt, tween, Vec3 } from \"cc\";\nimport { Tower } from \"../Entity/Tower\";\nimport { BulletFactory } from \"../../Bullet/BulletFactory\";\nimport { WorldNode } from \"../../Support/Misc/WorldNode\";\nimport { BulletMgr } from \"../../Bullet/BulletMgr\";\nimport { RoleMgr } from \"../../Role/Base/RoleMgr\";\nimport { Bullet, BulletRotationType } from \"../../Bullet/Bullet\";\nimport { AttackTargetSelectionType } from \"../Entity/AttackCom\";\nimport { Role } from \"../../Role/Base/Role\";\nimport { BulletMoveCalc } from \"../../Bullet/BulletMoveCalc\";\nimport { TowerBulletEmit as TowerBulletEmit } from \"./TowerBulletEmit\";\nimport { FrameCall, FrameCallDataItem } from \"../../Support/Misc/FrameCall\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\n\n// 发起攻击\nexport class TowerAttack {\n\n    public static exe( tower : Tower ) {\n\n        this.attackAnim( tower ) ;\n\n        tower.attack.count++ ; \n\n        // 发射子弹\n        TowerBulletEmit.exe( tower ) ; \n\n\n    }\n\n    public static canAttack( tower : Tower ) {\n\n        let allEnmeies = RoleMgr.ins.allEnemies ; \n        if( allEnmeies.length == 0 ) {\n            // 没有敌人\n            return false ;\n        }\n\n        let atk = tower.attack ; \n        if( atk == null ) return false ; \n\n        if( atk.bulletId == null ) return false ; \n\n        return true ; \n\n    }\n\n    // 塔的攻击动画\n    public static attackAnim( tower : Tower ) {\n\n        // 攻击表现\n        let root = tower.article.view.root ; \n\n        tween( root ).sequence(\n\n            tween( root ).to( 0.2 , {scale : new Vec3( 1.2 , 1.2 , 1.2 ) } ) , \n            tween( root ).to( 0.2 , {scale : new Vec3( 1.0 , 1.0 , 1.0 ) } ) , \n\n        ).start() ;\n\n    }\n\n\n\n}\n\n\n","import { randomRangeInt } from \"cc\";\nimport { Bullet } from \"../../Bullet/Bullet\";\nimport { BulletMoveCalc } from \"../../Bullet/BulletMoveCalc\";\nimport { Role } from \"../../Role/Base/Role\";\nimport { RoleMgr } from \"../../Role/Base/RoleMgr\";\nimport { AttackTargetSelectionType } from \"../Entity/AttackCom\";\nimport { Tower } from \"../Entity/Tower\";\n\n\n\n// 攻击目标选择\nexport class TowerAttackTargetSelect {\n\n    public static exe( tower : Tower , bullet : Bullet ) {\n\n        let atk = tower.attack ;\n\n        switch( atk.targeSelType ) {\n            case AttackTargetSelectionType.First : {\n                bullet.target.targetRole = this.first() ; \n            }\n            break ; \n\n            case AttackTargetSelectionType.Rnd : {\n                bullet.target.targetRole = this.rnd() ;\n            }\n            break ;\n\n        }\n\n        // 朝向目标\n        BulletMoveCalc.target( bullet ) ;\n\n    }\n\n    public static first() : Role {\n\n        let role : Role = null ; \n        let len = -Number.MIN_VALUE ; \n        for( let role2 of RoleMgr.ins.allEnemies ) {\n            let len2 = role2.ai.pathMoved.lenMoved ; \n            if( len2 > len ) {\n                len = len2 ; \n                role = role2 ; \n            }\n\n        } // end for\n\n        return role ; \n\n    }\n\n    public static rnd() : Role {\n\n        let list = RoleMgr.ins.allEnemies ; \n        let idx = randomRangeInt( 0 , list.length ) ; \n        return list[ idx ] ;\n\n    }\n\n}","import { BagArticleGradeHelper } from \"../../../../Bag/Article/BagArticleGradeHelper\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { Tower } from \"../Entity/Tower\";\nimport { BuffIncreaseCalc, DataIncrease } from \"../../Buff/BuffIncreaseCalc\";\n\n// 属性设置\nexport class TowerAttributeUpdate {\n\n    // 增量数据\n    public static dataIncrease = new DataIncrease() ; \n\n    public static exe( tower : Tower ) {\n\n        this.setAsOrig( tower ) ; \n\n        this.grade( tower ) ;\n\n        this.buff( tower ) ;\n\n        this.buff2( tower ) ; \n\n    }\n\n    // 设置为配置表原始值\n    public static setAsOrig( tower : Tower ) {\n\n        let cfgTower = tower.article.cfg.tower ; \n\n        // 攻击力会被局外升级表的数值覆盖\n        let atk = tower.attack ; \n        atk.damage = cfgTower.atkDamage ; \n        atk.cd.max = cfgTower.atkCd ; \n        atk.crit.probability = cfgTower.atkCritProbability ; \n        atk.crit.multiple = cfgTower.atkCritMultiple ; \n        atk.lifeStealing.percent = 0 ; \n\n    }\n\n    // 设置为等级数值。局外升级 + 局内合成等级。\n    public static grade( tower : Tower ) {\n\n        let cfgAricle = tower.article.cfg ; \n        let cfgGrade = BagArticleGradeHelper.getCfgCurrent( tower.article.cfg.id ) ;\n        if( cfgGrade == null ) return ;\n\n        // 增加 攻击力\n        tower.attack.damage = cfgGrade.attackDamage * cfgAricle.mergeGrade ; \n\n        // 增加 血量\n\n        // 增加 回血\n\n\n    }\n\n    // 处理 Buff 的增量\n    public static buff( tower : Tower ) {\n\n\n        this.dataIncrease.reset() ; \n        BuffIncreaseCalc.exeBuffs( tower.buff.list , this.dataIncrease ) ; \n        let dataIncr = this.dataIncrease ; \n        \n        // 攻击力\n        if( dataIncr.attackDamageIncreasePercent != 0 ) {\n\n            tower.attack.damage += Math.round( tower.attack.damage * dataIncr.attackDamageIncreasePercent ) ;\n        }\n        \n        // 攻速。\n        if( dataIncr.attackSpeedIncreasePercent > 0 ) {\n\n            let max = tower.attack.cd.max ; \n            tower.attack.cd.max = Math.round( max / ( 1 + dataIncr.attackSpeedIncreasePercent ) ) ; \n            \n        }\n\n        // 暴击概率\n        tower.attack.crit.probability += dataIncr.attackCritProbabilityIncreasePercent ; \n\n        // 暴击倍数\n        tower.attack.crit.multiple += dataIncr.attackCritMultipleIncreasePercent ; \n\n        // 吸血 按照百分比\n        tower.attack.lifeStealing.percent += dataIncr.attackLifeStealingPercent ; \n\n        // 回血\n        if( dataIncr.hpRegenIncreasePercent > 0 ) {\n\n            let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.HpRegenIncreasePercent && e.isNative == true ; } ) ;\n            buff.affix.argN += buff.affix.argN * dataIncr.hpRegenIncreasePercent ; \n\n        }\n\n        // 回血速度\n        if( dataIncr.hpRegenSpeedIncreasePercent > 0 ) {\n\n            let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.HpRegenIncreasePercent && e.isNative == true ; } ) ;\n            let max = buff.interval.max ; \n            buff.interval.max = Math.round( max / ( 1 + dataIncr.hpRegenSpeedIncreasePercent ) ) ; \n\n            // 重置当前CD\n            buff.interval.current = buff.interval.max ; \n\n        }\n\n    }\n\n    // 处理 Buff\n    public static buff2( tower : Tower ) {\n\n        let buffs = tower.buff.list ; \n        for( let i = 0 ; i < buffs.length ; ++i ) {\n            \n            let buff = buffs[ i ] ;\n            switch( buff.affix.type ) {\n                case AffixType.AttackCritPerAttackNTimesIncrease : {\n                    let buff2 = buffs.find( ( e )=>{ return e.affix.type == AffixType.AttackCritPerAttackNTimes ; } ) ;\n                    if( buff2 != null ) {\n                        buff2.affix.argN += buff.affix.argN ; \n                        if( buff2.affix.argN < 1 ) {\n                            buff2.affix.argN = 1 ; \n                        }\n                    }\n                }\n                break ; \n            }\n            \n        } // end for\n\n    }\n\n}","\nimport { AffixType } from \"../../Buff/Affix\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { BuffFactory } from \"../../Buff/BuffFactory\";\nimport { Tower } from \"../Entity/Tower\";\nimport { TowerMgr } from \"../Entity/TowerMgr\";\nimport { TowerAuraScopeExpand } from \"./TowerAuraScopeExpand\";\n\n\n// 光环的处理，光环发射Buff。\nexport class TowerAuraHandler {\n\n    // 光环发射 所有的\n    public static aura() {\n\n        for( let i = 0 ; i < TowerMgr.ins.data.length ; ++i ) {\n            let tower = TowerMgr.ins.data[ i ] ;\n            this.auraEmit( tower ) ;\n        } // end for\n\n    }\n\n    // 光环发射\n    private static auraEmit( tower : Tower ) {\n\n        // 是否有重叠解锁\n        let buffOverlapEnable = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.OverlapEnable ; } ) ;\n\n\n        for( let buff of tower.aura.list ) {\n\n            /*\n                复制一个 buff 出来。\n                \n                因为光环是天生的，把光环本身的buff对象加到被影响的实体上，需要修改buff的天生属性，\n                以便于下次清除掉。\n            */ \n\n            let buff2 = BuffFactory.create( buff.cfg.id ) ;\n            buff2.isNative = false ; \n\n            switch( buff.affix.type ) {\n                case AffixType.AuraAttackDamageIncreasePercent : \n                case AffixType.AuraAttackSpeedIncreasePercent : \n                case AffixType.AuraAttackCritProbabilityIncrease : \n                {\n\n                    let ret = TowerAuraScopeExpand.exe( buff.cfg.auraScopeType , tower.article.cells ) ; \n                    this.buffAdd( ret.towers , buff2 , tower , buffOverlapEnable ) ;\n\n                }\n                break ; \n\n                case AffixType.AuraAttackDamageIncreaseAllPercent : \n                {\n\n                    // 全体类型的\n                    let towers = TowerMgr.ins.data ; \n                    this.buffAdd( towers , buff2 , tower ) ;\n\n                }\n                break ;\n\n            }\n\n        } // end for\n\n    }\n\n    private static buffAdd( towers : Array< Tower > , buff : Buff , tower : Tower , buffOverlapEnable : Buff = null ) {\n\n        for( let tower2 of towers ) {\n\n            if( buff.cfg.auraOverlay == false ) {\n                // 不能叠加\n\n                if( buffOverlapEnable != null ) {\n                    // 有重叠启用Buff\n\n\n                }\n                else {\n\n                    let buff2 = tower2.buff.list.find( ( e )=>{ return e.cfg.id == buff.cfg.id ; } ) ; \n                    if( buff2 != null ) {\n                        continue ; \n                    }\n\n                }\n\n            }\n\n            // 加Buff\n            tower2.buff.list.push( buff ) ; \n\n            let str = tower2.article.cfg.id + \" 增加Buff \" + \"来源：\" + tower.article.cfg.id ; \n            console.log( str )  ;\n\n        }\n\n    }\n\n\n}\n\n","import { Vec2 } from \"cc\";\nimport { BagArticle } from \"../../../../Bag/Article/BagArticle\";\nimport { UiBagCell } from \"../../../../Bag/Grid/UiBagCell\";\nimport { UiBagGrid } from \"../../../../Bag/Grid/UiBagGrid\";\nimport { Tower } from \"../Entity/Tower\";\nimport { TowerMgr } from \"../Entity/TowerMgr\";\nimport { CellExpand } from \"../../../../Bag/Grid/CellExpand\";\nimport { AuraScopeType } from \"../../Buff/AuraScopeType\";\nimport { GridTraverse } from \"../../../../Bag/Grid/GridTraverse\";\n\n\nexport class TowerAuraScopeExpandRet {\n\n    // 覆盖的 cell\n    public cells = new Set< UiBagCell >() ;\n\n    // 影响的 物件\n    public article = new Set< BagArticle >() ;\n\n    // 影响的 塔\n    public towers = new Array< Tower >() ;\n\n}\n\n// 光环作用域扩展\nexport class TowerAuraScopeExpand {\n\n    public static exe( type : AuraScopeType ,  cells : Array< UiBagCell > ) : TowerAuraScopeExpandRet {\n\n        switch( type ) {\n            case AuraScopeType.Dir8 : {\n                return this.dir8( cells ) ;\n            }\n            break ; \n\n            case AuraScopeType.HV : {\n                return this.hv( cells ) ; \n            }\n            break ; \n\n            case AuraScopeType.All : {\n                return this.all() ; \n            }\n            break ; \n        }\n\n    }\n\n    public static all() : TowerAuraScopeExpandRet {\n\n        let ret = new TowerAuraScopeExpandRet() ; \n        ret.towers.push( ... TowerMgr.ins.data ) ;\n\n        GridTraverse.exe( ( cell )=>{\n\n            if( cell.unlocked == false ) return ; \n\n            ret.cells.add( cell ) ;\n\n            if( cell.article != null ) {\n                ret.article.add( cell.article ) ;\n            }\n            \n\n        } ) ;\n\n        return ret ; \n\n    }\n\n    // 8 方向扩展\n    public static dir8( cells : Array< UiBagCell > ) : TowerAuraScopeExpandRet {\n\n        let ret = new TowerAuraScopeExpandRet() ; \n\n        for( let i = 0 ; i < cells.length ; ++i ) {\n            let cell = cells[ i ] ; \n            let cells2 = CellExpand.exe8( cell.coord ) ; \n\n            for( let cell2 of cells2 ) {\n\n                ret.cells.add( cell2 ) ;\n\n                let article = cell2.article ; \n                if( article != null && ret.article.has( article ) == false ) {\n                    ret.article.add( article ) ; \n\n                    // 找到对应的 Tower\n                    let tower = TowerMgr.ins.data.find( ( e )=>{ return e.article == article ; } ) ; \n                    if( tower == null ) {\n                        // 不应该出现这种情况\n                        continue ; \n                    }\n\n                    ret.towers.push( tower ) ; \n\n                }\n\n            }\n\n        }\n        \n        \n        return ret ; \n\n    }\n\n    // 同行同列\n    public static hv( cells : Array< UiBagCell > ) : TowerAuraScopeExpandRet {\n\n        let ret = new TowerAuraScopeExpandRet() ; \n\n        let size = UiBagGrid.ins.gridSize ;\n\n        let getTower = ( coord : Vec2 )=>{\n\n            let cell = UiBagGrid.ins.getCell( coord ) ;\n            if( cell == null ) return ; \n\n            ret.cells.add( cell ) ;\n\n            let article = cell.article ; \n            if( article == null || ret.article.has( article ) == true ) return ; \n\n            ret.article.add( article ) ; \n            \n            let tower = TowerMgr.ins.data.find( ( e )=>{ return e.article == article ; } ) ; \n            ret.towers.push( tower ) ;\n\n        } ;\n\n        let coordTemp = new Vec2() ; \n        for( let i = 0 ; i < cells.length ; ++i ) {\n\n            let cell = cells[ i ] ;\n            let coord = cell.coord ; \n\n            // 横\n            coordTemp.x = coord.x ; \n            coordTemp.y = coord.y ; \n            for( coordTemp.x = 0 ; coordTemp.x < size.width ; ++coordTemp.x ) {\n                getTower( coordTemp ) ; \n            } // end for\n            \n            // 竖\n            coordTemp.x = coord.x ; \n            coordTemp.y = coord.y ; \n            for( coordTemp.y = 0 ; coordTemp.y < size.height ; ++coordTemp.y ) {\n                getTower( coordTemp ) ; \n            } // end for\n\n\n        } // end for\n\n        return ret ; \n\n    }\n\n\n\n}","import { bezier, instantiate, math, randomRangeInt, tween, Vec3 } from \"cc\";\nimport { Bullet, BulletMoveType, BulletRotationType, Sender } from \"../../Bullet/Bullet\";\nimport { BulletFactory } from \"../../Bullet/BulletFactory\";\nimport { BulletMgr } from \"../../Bullet/BulletMgr\";\nimport { WorldNode } from \"../../Support/Misc/WorldNode\";\nimport { Tower } from \"../Entity/Tower\";\nimport { RoleMgr } from \"../../Role/Base/RoleMgr\";\nimport { Role } from \"../../Role/Base/Role\";\nimport { BulletMoveCalc } from \"../../Bullet/BulletMoveCalc\";\nimport { AttackCrit, AttackTargetSelectionType } from \"../Entity/AttackCom\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { TowerAttackTargetSelect } from \"./TowerAttackTargetSelect\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { Vec2dHelper } from \"../../Support/Misc/Vec2dHelper\";\nimport { BezierCalc } from \"../../../../../SL/Cocos/Misc/BezierCalc\";\nimport { PathMove } from \"../../Ai/PathMove\";\n\n\n\nexport class TowerBulletEmit {\n\n    public static exe( tower : Tower ) {\n\n        // 保存原始值\n        let scatterCount = tower.attack.scatterCount ; \n\n        // 生成子弹\n        let bullet = this.bulletGen( tower ) ; \n\n        this.buff( tower , bullet ) ; \n\n        TowerAttackTargetSelect.exe( tower , bullet ) ;\n\n        // 子弹表现形式 \n        this.view( bullet ) ; \n        \n        // 散射\n        this.scatter( tower , bullet ) ; \n\n        // 还原原始值\n        tower.attack.scatterCount = scatterCount ; \n        \n        // 曲线运动\n        if( bullet.target.moveType == BulletMoveType.Boomerang ) {\n            this.boomerang( bullet ) ;\n        }\n\n    }\n\n    // 回旋\n    private static boomerang( bullet : Bullet ) {\n\n        let role = bullet.target.targetRole ; \n\n        let pos1 = bullet.view.root.position.clone() ; \n        let pos2 = role.view.root.position.clone() ; \n\n        let v = pos2.clone().subtract( pos1 ) ; \n        // 往前走一段距离，子弹会稍稍运动到后面一点\n        let vn = v.clone().normalize() ;\n        pos2.add( vn.clone().multiplyScalar( 50 ) ) ;\n        \n\n        v = pos2.clone().subtract( pos1 ) ; \n\n        // 计算中点\n        let posM = v.clone().multiplyScalar( 0.5 ).add( pos1 ) ; \n\n        // 计算 bezier 的控制点\n        let t = v.x ; \n        v.x = v.y ; v.y = t ;\n\n        let n = randomRangeInt( 0 , 2 ) ; \n        if( n == 0 )  {\n            // 顺时针\n            v.y *= -1 ;\n        }\n        else {\n            // 逆时针\n            v.x *= -1 \n        }\n\n\n        v.normalize() ;\n        v.multiplyScalar( 500 ) ;\n        let pos11 = posM.clone().add( v ) ;\n        let pos12 = posM.clone().add( v.multiplyScalar( -1) ) ;\n        // let node = instantiate( bullet.view.root ) ; \n        // node.setParent( bullet.view.root.parent ) ; \n        // node.position = pos11 ; \n\n        let path = BezierCalc.bezier2Path( pos1 , pos2 , pos11 , 5 ) ; \n        let path2 = BezierCalc.bezier2Path( pos2 , pos1 , pos12 , 5 ) ; \n        path.push( ... path2 ) ;\n        path.splice(0, 0, pos1) ; \n\n        // for( let pos of path ) {\n\n        //     let node = instantiate( bullet.view.root ) ; \n        //     node.setParent( bullet.view.root.parent ) ; \n        //     node.position = pos ; \n\n        // } // end for\n\n        bullet.pathMove = new PathMove() ; \n        bullet.pathMove.path = path ; \n\n    }\n\n    // 子弹表现形式 \n    private static view( bullet : Bullet ) {\n\n        switch( bullet.view.rotationType ) {\n            case BulletRotationType.Forever : {\n                tween( bullet.view.root ).by( 0.5 , { eulerAngles : new Vec3( 0 , 0 , 360 ) } ).repeatForever().start() ; \n            }\n            break ; \n        }\n\n    }\n\n    // 生成子弹\n    private static bulletGen( tower : Tower ) : Bullet {\n     \n        let pos = tower.article.view.root.worldPosition ; \n        let bullet = BulletFactory.create( tower.attack.bulletId ) ;\n        bullet.view.root.setParent( WorldNode.ins.layer2 , false ) ;\n        bullet.view.root.worldPosition = pos ; \n        BulletMgr.ins.add( bullet ) ;\n\n        // 设置攻击数值\n\n        bullet.damge = tower.attack.damage ; \n\n        // 暴击\n        bullet.crit = new AttackCrit() ; \n        bullet.crit.multiple = tower.attack.crit.multiple ; \n        bullet.crit.probability = tower.attack.crit.probability ; \n\n\n        bullet.lifeStealing = tower.attack.lifeStealing ; \n\n        // 发送者\n        bullet.sender = new Sender() ; \n        bullet.sender.id = tower.article.cfg.id ; \n\n        return bullet ; \n\n    }\n\n    // 散射\n    public static scatter( tower : Tower , bullet : Bullet ) {\n\n        let dir = bullet.move.direction ; \n\n        let atk = tower.attack ; \n        if( atk.scatterCount == 0 ) return ; \n\n        // 间隔角度\n        let interval = 15 ; \n        let degree = interval ; \n\n        for( let i = 0 ; i < atk.scatterCount ; ++i ) {\n\n            // 切换角度\n            degree = Math.floor( ( i + 2 ) / 2 ) * interval ; \n            if( i % 2 == 1 ) degree *= -1 ; \n\n            let bullet2 = this.bulletGen( tower ) ; \n            let dir2 = dir.clone() ; \n            Vec2dHelper.rotate( dir2 , degree ) ; \n    \n            BulletMoveCalc.exe( bullet2.move , dir2 ) ; \n\n        } // end for\n\n\n    }\n\n    // 考虑 Buff \n    public static buff( tower : Tower , bullet : Bullet ) {\n\n        let AttackBulletSizeIncrease = 0 ; \n\n        for( let buff of tower.buff.list ) {\n\n            switch( buff.affix.type ) {\n\n                case AffixType.AttackCritPerAttackNTimes : {\n                    let n = buff.affix.argN ;\n                    if( tower.attack.count % n == 0 ) {\n\n                        bullet.crit.probability = 1 ;\n\n                    }\n                }\n                break ; \n\n                case AffixType.AttackBulletMoveSpeedIncreasePercent : {\n\n                    // 增加子弹飞行速度\n                    let n = bullet.cfg.moveSpeed * buff.affix.argN ; \n                    bullet.move.speed += n ; \n\n                }\n                break ; \n\n                case AffixType.AttackBulletBounceRectEnemyIncrease : {\n\n                    bullet.bounce.bounceRectEnemy += buff.affix.argN ; \n\n                }\n                break ;\n\n                case AffixType.AttackBulletBounceBetweenEnemiesIncrease : \n                {\n                    bullet.bounce.bounceBetweenEnemies.count += buff.affix.argN ; \n                }\n                break ;\n\n                case AffixType.AttackBulletBounceRectIncrease : {\n                    bullet.bounce.bounceRect += buff.affix.argN ; \n                }\n                break;\n\n                case AffixType.AttackBulletPassIncrease : {\n                    bullet.passCount+= buff.affix.argN ; \n                }   \n                break ; \n\n                case AffixType.AttackBulletPassInfiniteAndBounceRectIncrease : {\n                    bullet.passCount+= 9999 ; \n                    bullet.bounce.bounceRect += buff.affix.argN ; \n                } \n                break ;\n\n                case AffixType.AttackBulletScatterIncrease : {\n                    tower.attack.scatterCount += buff.affix.argN ; \n                }\n                break ;\n\n                case AffixType.AttackBulletScatterIncreaseProbability : {\n\n                    let count = buff.affix.argNList[ 0 ] ;\n                    let p = buff.affix.argNList[ 1 ] ;\n                    p = p * 100 ;\n                    if( randomRangeInt( 0, 100 ) < p ) {\n                        tower.attack.scatterCount += count ; \n                    }\n\n                }\n                break ;\n\n                case AffixType.AttackBulletAddBuff : \n                {\n                    bullet.buffIds.push( buff.affix.argStr ) ;\n                }\n                break ; \n\n                case AffixType.AttackBulletAddBuffRadius : \n                {\n                    bullet.buffIds.push( buff.cfg.id ) ;\n                }\n                break ; \n\n                case AffixType.AttackBulletProbabilityAddBuff : \n                case AffixType.AttackDamageIncreasePercentFullHp : \n                case AffixType.AttackBulletExplodeRadiusIncreasePercent : \n                case AffixType.AttackBulletExplodeDamageIncreasePercent : \n                case AffixType.AttackBulletAddBuffRadiusIncreasePercent : \n                case AffixType.AttackBulletAddBuffRadiusBuffIncreasePercent : \n                case AffixType.AttackBulletPoisoningDamageIncreasePercent :\n                case AffixType.AttackBulletPoisoningDurationIncreasePercent :\n                {\n                    bullet.buffs.push( buff ) ;\n                }\n                break ; \n\n                case AffixType.AttackBulletSizeIncreasePercent : {\n                    AttackBulletSizeIncrease += buff.affix.argN ; \n                }\n                break ;\n                \n                \n\n            }\n\n\n        } // end for\n\n        if( AttackBulletSizeIncrease > 0 ) {\n            // 子弹体积重增大\n            let s = bullet.view.root.scale ;\n            s.multiplyScalar( 1 + AttackBulletSizeIncrease ) ; \n            bullet.view.root.scale = s ; \n\n        } \n\n    }\n\n\n}\n\n\n","\nimport { CfgBuff, CfgBuffItem } from \"../../../../../Common/Cfg/CfgBuff\";\nimport { CfgTowerItem } from \"../../../../../Common/Cfg/CfgTower\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\nimport { BagArticle } from \"../../../../Bag/Article/BagArticle\";\nimport { BagArticleGradeHelper } from \"../../../../Bag/Article/BagArticleGradeHelper\";\nimport { Affix, AffixType } from \"../../Buff/Affix\";\nimport { AuraCom } from \"../../Buff/AuraCom\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { BuffCom } from \"../../Buff/BuffCom\";\nimport { BuffFactory } from \"../../Buff/BuffFactory\";\nimport { BuffResetMergeGrade } from \"../../Buff/BuffResetMergeGrade\";\nimport { CurrentMax } from \"../../Support/SimpleStruct/CurrentMax\";\nimport { TowerAttributeUpdate } from \"../Misc/TowerAttributeUpdate\";\nimport { AttackCom, AttackTargetSelectionType } from \"./AttackCom\";\nimport { Tower } from \"./Tower\";\n\n\nexport class TowerFactory {\n\n    public static create( article : BagArticle ) : Tower {\n\n        let tower = new Tower() ; \n        tower.article = article ; \n        article.tower = tower ; \n\n        TowerCfgSet.exe( tower ) ;\n\n        return tower ; \n\n    }\n\n}\n\n\nexport class TowerCfgSet {\n\n    public static exe( tower : Tower ) {\n\n        let cfg = tower.article.cfg.tower ;\n\n        this.attack( tower , cfg ) ;\n\n        this.buff( tower , cfg ) ; \n\n        this.buffGrade( tower ) ; \n\n        TowerAttributeUpdate.grade( tower ) ; \n\n    }\n\n    public static attack( tower : Tower , cfg : CfgTowerItem ) {\n\n        let atk = tower.attack ; \n        if( atk == null ) {\n            atk = tower.attack = new AttackCom() ; \n        }\n\n        atk.bulletId = cfg.atkBulletId ; \n\n        // 攻击CD\n        atk.cd.current = 0 ; \n        atk.cd.max = cfg.atkCd ; \n\n        // 攻击力\n        atk.damage = cfg.atkDamage ; \n\n        // 目标选择\n        atk.targeSelType = cfg.atkTargeSelType ; \n\n        // 暴击\n        atk.crit.probability = cfg.atkCritProbability ; \n        atk.crit.multiple = cfg.atkCritMultiple ; \n\n        // 散射\n        atk.scatterCount = cfg.atkBulletScatterCount ; \n        \n\n    }\n\n    // 处理 Buff\n    public static buff( tower : Tower , cfg : CfgTowerItem ) {\n\n        if( tower.buff == null ) {\n            tower.buff = new BuffCom() ; \n        }\n        \n        if( tower.aura == null ) {\n            tower.aura = new AuraCom() ; \n        }\n        \n        for( let id of cfg.buffs ) {\n            this.handeBuff( tower , id ) ;\n        } // end for\n\n    }\n\n\n    // 处理 Buff 升级线指定的\n    public static buffGrade( tower : Tower ) {\n\n        let cfgItems = BagArticleGradeHelper.getCfgCurrentItems( tower.article.cfg.id ) ; \n        if( cfgItems == null ) return ; \n\n        for( let k = 0 ; k < cfgItems.length ; ++k ) {\n            let cfg = cfgItems[ k ] ;\n            let buffIds = cfg.buffIds ; \n            // 天生的Buff。按照类型来查找，更新。\n            for( let i = 0 ; i < buffIds.length ; ++i ) {\n                let id = buffIds[ i ] ;\n                this.handeBuff( tower , id ) ;\n            } // end for\n\n        } // end for\n\n\n\n    }\n\n    // 处理一个 Buff\n    private static handeBuff( tower : Tower , id : string ) {\n\n        let cfgBuff = CfgBuff.data.get( id ) ;\n\n        if( cfgBuff.isAura == false ) {\n\n            // buff\n            let buff = tower.buff.list.find( ( e )=>{ return e.cfg.id == id ; } ) ;\n            if( buff == null ) {\n                buff = BuffFactory.create( id ) ;\n                tower.buff.list.push( buff ) ; \n                buff.isNative = true ; \n            }\n\n            // 处理合成等级系数\n            BuffResetMergeGrade.exe( buff , tower.article.cfg.mergeGrade ) ;\n\n            return ;\n        }\n        else {\n            // aura\n\n            let buff = tower.aura.list.find( ( e )=>{ return e.cfg.id == id ; } ) ;\n            if( buff == null ) {\n                buff = BuffFactory.create( id ) ;\n                tower.aura.list.push( buff ) ; \n                buff.isNative = true ; \n            }\n\n            // 处理合成等级系数\n            BuffResetMergeGrade.exe( buff , tower.article.cfg.mergeGrade ) ;\n\n        }\n\n    }\n\n    public static grade2( tower : Tower ) {\n\n\n        let cfg = BagArticleGradeHelper.getCfgCurrent( tower.article.cfg.id ) ; \n        if( cfg == null ) return ; \n\n        let multiple = 1 ;\n        switch( tower.article.cfg.mergeGrade ) {\n            case 1 : { multiple = 1 ; } break ; \n            case 2 : { multiple = 2 ; } break ; \n            case 3 : { multiple = 4 ; } break ; \n            case 4 : { multiple = 8 ; } break ; \n        }\n\n        if( cfg.hpMaxIncrease > 0 ) {\n            // 增加血量最大值\n\n            let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.HpMaxIncrease && e.isNative == true ; } ) ;\n            if( buff == null ) {\n                buff = new Buff() ;\n                tower.buff.list.push( buff ) ; \n                buff.isNative = true ; \n                buff.affix = new Affix() ;\n                buff.affix.type = AffixType.HpMaxIncrease ;\n            }\n            \n            buff.affix.argN = cfg.hpMaxIncrease * multiple ; \n\n        }\n\n        // if( cfg.getMomeyPerWave > 0 ) {\n        //     // 每波加钱\n\n        //     let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.GetMomeyPerWave && e.isNative == true ; } ) ;\n        //     if( buff == null ) {\n        //         buff = new Buff() ;\n        //         tower.buff.list.push( buff ) ; \n        //         buff.isNative = true ; \n        //         buff.affix = new Affix() ;\n        //         buff.affix.type = AffixType.GetMomeyPerWave ;\n        //     }\n\n        //     buff.affix.arg1 = cfg.getMomeyPerWave * multiple ; \n\n        // }\n\n        if( cfg.hpRegenIncreasePercent > 0 ) {\n\n            // 回血 百分比\n\n            let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.HpRegenIncreasePercent && e.isNative == true ; } ) ;\n            if( buff == null ) {\n                buff = new Buff() ;\n                tower.buff.list.push( buff ) ; \n                buff.interval = new CurrentMax() ; \n                buff.isNative = true ; \n                buff.affix = new Affix() ;\n                buff.affix.type = AffixType.HpRegenIncreasePercent ;\n            }\n            \n            buff.interval.setCurrentAndMax( FrameSecConvert.toFrame( 3 ) );\n            buff.affix.argN = cfg.hpRegenIncreasePercent * tower.article.cfg.mergeGrade ; \n            \n        }\n\n        if( cfg.hpRegenIncrease > 0 ) {\n            // 回血 具体指\n\n            let buff = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.HpRegenIncrease && e.isNative == true ; } ) ;\n            if( buff == null ) {\n                buff = new Buff() ;\n                tower.buff.list.push( buff ) ; \n                buff.interval = new CurrentMax() ; \n                buff.isNative = true ; \n                buff.affix = new Affix() ;\n                buff.affix.type = AffixType.HpRegenIncrease ;\n            }\n\n            buff.interval.setCurrentAndMax( FrameSecConvert.toFrame( 3 ) );\n            buff.affix.argN = cfg.hpRegenIncrease * multiple ; \n            \n\n        }\n\n    }\n\n\n}\n\n","import { ListHelper } from \"../../../../../SL/Common/Misc/ListHelper\";\nimport { Tower } from \"./Tower\";\n\nexport class TowerMgr {\n\n    public static ins = new TowerMgr() ; \n\n    public data = new Array< Tower >() ;\n\n    public add( tower : Tower ) {\n        ListHelper.addUniquely( this.data , tower ) ; \n    }\n\n    public remove( tower : Tower ) {\n        ListHelper.remove( this.data , tower  ) ; \n    }\n\n    public clear() {\n        ListHelper.clear( this.data ) ; \n    }\n\n}","import { Tower } from \"../Entity/Tower\";\nimport { TowerMgr } from \"../Entity/TowerMgr\";\nimport { TowerAttack } from \"../Attack/TowerAttack\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { TowerSysBuff } from \"./TowerSysBuff\";\nimport { FrameCall, FrameCallDataItem } from \"../../Support/Misc/FrameCall\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\n\n\nexport class TowerSys {\n\n    public static update() {\n\n        for( let t of TowerMgr.ins.data ) {\n            this.updateTower( t ) ;\n        }\n\n    }\n\n    public static updateTower( tower : Tower ) {\n\n        // 攻击\n        this.attack( tower ) ;\n\n        // buff\n        TowerSysBuff.update( tower ) ;\n\n    }\n\n    public static attack( tower : Tower ) {\n\n        // 递减CD\n        let atk = tower.attack ; \n        if( atk.cd.current > 0 ) {\n            atk.cd.current-- ;\n            if( atk.cd.current > 0 ) return ;\n        }\n\n        if( TowerAttack.canAttack( tower ) == false ) return ;\n\n        // 触发攻击\n        TowerAttack.exe( tower ) ; \n\n        // 执行后，开始CD\n        atk.cd.setCurrentAsMax() ;\n\n        let buffAttackContinuous = tower.buff.list.find( ( e )=>{ return e.affix.type == AffixType.AttackContinuous ; } ) ; \n        if( buffAttackContinuous != null ) {\n\n            let item = new FrameCallDataItem() ; \n            item.interval.setCurrentAndMax( FrameSecConvert.toFrame( 0.3 ) ) ; \n            item.times = buffAttackContinuous.affix.argN ;\n            item.fn = ()=>{\n                if( TowerAttack.canAttack( tower ) == false ) return ;\n                TowerAttack.exe( tower ) ;\n            } ;\n            FrameCall.ins.items.push( item ) ; \n\n        }\n\n\n    }\n\n\n}\n\n\n","import { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { AffixType } from \"../../Buff/Affix\";\nimport { Buff } from \"../../Buff/Buff\";\nimport { Tower } from \"../Entity/Tower\";\n\nexport class TowerSysBuff {\n\n    public static update( tower : Tower ) {\n\n        let list = tower.buff.list ; \n        for( let i = list.length - 1 ; i >= 0 ; --i ) {\n\n            let buff = list[ i ] ;\n\n            // buff.duration.current-- ; \n            // if( buff.duration.current < 0 ) {\n            //     // 生命周期到，移除\n            //     BuffOp.roleRemove( tower , i ) ; \n            //     continue ; \n            // }\n\n            let interval = buff.interval ;\n            if( interval != null && interval.max >= 0 ) {\n                interval.current-- ; \n                if( interval.current == -1 ) {\n\n                    interval.setCurrentAsMax() ; \n\n                    // 触发\n                    this.trigger( tower , buff ) ; \n\n                }\n            }\n\n        } // end for\n\n    }\n\n    public static trigger( tower : Tower , buff : Buff ) {\n\n        switch( buff.affix.type ) {\n\n            case AffixType.HpRegenIncrease : {\n                // 回血 具体指\n                let role = PlayerRole.ins.main ; \n                role.life.add( buff.affix.argN ) ;\n                role.view.hpBar.refresh() ; \n            }\n            break ; \n\n            case AffixType.HpRegenIncreasePercent : {\n                \n                // 回血。按照百分比\n                let role = PlayerRole.ins.main ; \n                let hp = role.life.hp ; \n                let val = hp.max * buff.affix.argN ; \n                role.life.add( val ) ;\n                role.view.hpBar.refresh() ; \n\n            }\n            break ; \n\n        }\n\n    }\n\n\n}","import { Size, Tween, tween, UITransform } from \"cc\";\n\n\nexport class TweenHelper {\n\n    // 动画重置大小\n    public static contentSize( uitrans : UITransform , size : Size , duration : number ) {\n\n        let sizeOrig = uitrans.contentSize ;\n\n        let t = { } ;\n        t[ \"size\" ] = sizeOrig ;\n        let tw = tween( t ).to( duration , { size : size } , {\n            onUpdate : (target ?: object, ratio ?: number): void => {\n                let size = target[ \"size\" ] ;\n                // console.log( target[ \"size\" ] ) ;\n                uitrans.setContentSize( size ) ;\n            }\n        } ).start() ;\n\n        // tw.call( ()=>{\n        //     console.log( \"测试回调\" ) ; \n        // } ) ;\n\n        // return tw ;\n\n    }\n\n}","import { Size, tween, UITransform } from \"cc\";\n\n\nexport class TweenHelper {\n\n    // 动画重置大小\n    public static contentSize( uitrans : UITransform , size : Size , duration : number ) {\n\n        let sizeOrig = uitrans.contentSize ;\n\n        let t = { } ;\n        t[ \"size\" ] = sizeOrig ;\n        tween( t ).to( duration , { size : size } , {\n            onUpdate : (target ?: object, ratio ?: number): void => {\n                let size = target[ \"size\" ] ;\n                // console.log( target[ \"size\" ] ) ;\n                uitrans.setContentSize( size ) ;\n            }\n        } ).start() ;\n\n    }\n\n\n\n}","import { _decorator, Component, Node, tween, v3, director, Label } from 'cc';\nconst { ccclass, property } = _decorator;\n \n@ccclass('TweenSpeed')\nexport class TweenSpeed extends Component {\n\n    @property(Node) cocos1: Node;\n    @property(Label) label: Label;\n\n    speedFlag = false ;\n    // 缓存 director 的 tick 方法\n    oldTick = director.tick;\n\n    start() {\n        // 重写 tick 方法\n        director.tick = (dt: number) => {\n            this.oldTick.call(director, dt * (this.speedFlag ? 1 : 3));\n        }\n\n        // tween(this.cocos1)\n        //     .to(1.5, { position: v3(250, 100, 0) })\n        //     .to(1.5, { position: v3(-250, 100, 0) })\n        //     .union()\n        //     .repeatForever()\n        //     .start();\n\n        // this.label.string = '当前为正常速度，物体 3 秒往复运动'\n        // // 当用修改 dt 的方式进入慢动作后，实际累计时间也会变慢，慢动作下的 3 秒实际会是 9 秒\n        // // 想计时器不受 dt 控制，可以用 setInterval\n        // this.schedule(() => {\n        //     // 在 1 和 0.33 之间切换\n        //     this.speedFlag = !this.speedFlag;\n        //     if (this.speedFlag) {\n        //         this.label.string = '当前为正常速度，物体 3 秒往复运动'\n        //     } else {\n        //         this.label.string = '当前为正常的 0.33 倍速度，游戏中所有 dt 数值受到影响'\n        //     }\n        // }, 3);\n    }\n\n    onDestroy() {\n        director.tick = this.oldTick;\n    }\n}","import { Input, Label, Node, RichText } from \"cc\";\nimport { ArticleString } from \"../../../Common/String/ArticleString\";\nimport { UiEffectScale } from \"../../../SL/Cocos/Ui/UiEffect\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { UiArticleDetailAttribute } from \"./UiArticleDetailAttribute\";\nimport { UiArticleDetailIcon } from \"./UiArticleDetailIcon\";\n\n// 物品信息\nexport class UiArticleDetail {\n\n    public static ins = new UiArticleDetail() ; \n\n    public root : Node\n\n    public name : Label ; \n\n    public icon : UiArticleDetailIcon ; \n\n\n    public gradeMerge : Label ; \n\n    public intro : RichText ; \n\n    public attribute : UiArticleDetailAttribute ; \n\n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.root.active = false ; \n\n        let btnClose = this.root.getChildByPath( \"btnClose\" ) ;\n        btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.active = false ; \n        } ) ; \n\n        this.name = this.root.getChildByPath( \"Name/val\" ).getComponent( Label ) ;\n\n        this.gradeMerge = this.root.getChildByPath( \"MergeGrade\" ).getComponent( Label ) ;\n\n        this.icon = new UiArticleDetailIcon() ; \n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ;\n\n        this.intro = this.root.getChildByPath( \"Intro\" ).getComponent( RichText ) ;\n\n        this.attribute = new UiArticleDetailAttribute() ; \n        this.attribute.init( this.root.getChildByPath( \"Info/Attribute\" ) ) ;\n        \n    }\n\n    public show() {\n\n        this.root.active = true ; \n\n        UiEffectScale.show( this.root ) ;\n\n    }\n\n    public refresh( article : BagArticle ) {\n\n        let cfg = article.cfg ; \n        let id = cfg.id ; \n\n        // 名字\n        this.name.string = ArticleString.getName( id ) ;  \n\n        // 图标\n        this.icon.refresh( article ) ; \n\n        // 合成等级\n        this.gradeMerge.string = \"合成 lv.\" + cfg.mergeGrade ;\n\n        // 描述\n        this.intro.string = \"<br>\" + ArticleString.getDescription( id ) + \"</br>\" ;  \n\n        // this.attribute.cfgArtile = cfg ; \n        this.attribute.article = article ;\n        this.attribute.refresh() ; \n\n    }\n\n}\n\n\n","import { Label, Node, RichText, Sprite } from \"cc\";\nimport { FrameSecConvert } from \"../../../Common/Misc/FrameSecConvert\";\nimport { Lang } from \"../../../Common/Misc/Lang\";\nimport { CfgArticle } from \"../../../Common/Cfg/CfgArticle\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { Affix, AffixType } from \"../../World/1.Base/Buff/Affix\";\nimport { Buff } from \"../../World/1.Base/Buff/Buff\";\n\n// 属性\nexport class UiArticleDetailAttribute {\n\n    // public cfgArtile : CfgArticle = null ; \n\n    public article : BagArticle = null ; \n\n    public root : Node ; \n\n    public cd = new UiArticleDetailAttributeItem() ; \n    public target = new UiArticleDetailAttributeItem() ; \n    public attackDamage = new UiArticleDetailAttributeItem() ; \n    public hpMaxIncrease =  new UiArticleDetailAttributeItem() ; \n    public HpRegen =  new UiArticleDetailAttributeItem() ; \n    public Money001 =  new UiArticleDetailAttributeItem() ; \n\n    public AuraAttackDamage = new UiArticleDetailAttributeItem() ; \n    public AuraAttackSpeed = new UiArticleDetailAttributeItem() ; \n    public AuraAttackCritProbability = new UiArticleDetailAttributeItem() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.target.init( this.root.getChildByPath( \"Target\" ) ); \n\n        this.cd.init( this.root.getChildByPath( \"Cd\" ) ) ;\n\n        this.attackDamage.init( this.root.getChildByPath( \"Attack\" ) ) ;\n\n        this.hpMaxIncrease.init( this.root.getChildByPath( \"HpMaxIncrease\" ) ) ;\n\n        this.HpRegen.init( this.root.getChildByPath( \"HpRegen\" ) ) ;\n\n        this.Money001.init( this.root.getChildByPath( \"Money001\" ) ) ;\n\n        this.AuraAttackDamage.init( this.root.getChildByPath( \"AuraAttackDamage\" ) ) ;\n\n        this.AuraAttackSpeed.init( this.root.getChildByPath( \"AuraAttackSpeed\" ) ) ;\n\n        this.AuraAttackCritProbability.init( this.root.getChildByPath( \"AuraAttackCritProbability\" ) ) ;\n\n        this.hideAll() ; \n\n    }\n\n    public refresh() {\n\n        this.hideAll() ; \n\n        // 攻击力\n        this.refreshAttack() ; \n\n        this.refreshMisc() ; \n\n    }\n\n    public hideAll() {\n\n        this.target.root.active = false ; \n        this.cd.root.active = false ; \n        this.attackDamage.root.active = false ; \n        this.hpMaxIncrease.root.active = false ; \n        this.HpRegen.root.active = false ; \n        this.Money001.root.active = false ; \n\n        this.AuraAttackDamage.root.active = false ; \n        this.AuraAttackSpeed.root.active = false ; \n        this.AuraAttackCritProbability.root.active = false ; \n\n    }\n    \n    public refreshAttack() {\n\n        if( this.article.tower.attack.damage <= 0 ) return ; \n\n        // 攻击力\n        this.attackDamage.root.active = true ; \n        this.attackDamage.val.string = \"<b>\" + this.article.tower.attack.damage.toString() + \"</b>\" ; \n\n        // 目标\n        this.target.root.active = true ; \n        this.target.val.string = \"<b>\" + Lang.get( \"AttackTargeSelType_\" + this.article.cfg.tower.atkTargeSelType ) + \"</b>\" ; \n\n        // 攻击 CD \n        this.cd.root.active = true ; \n        let val = FrameSecConvert.toSecond( this.article.tower.attack.cd.max ) ; \n        val = Math.round( val * 100 ) / 100 ; // 保留2位小数\n        this.cd.val.string = \"<b>\" + val.toString() + \"</b>\" ; \n\n    }\n\n    public refreshMisc() {\n\n        let str1 = \"<b>{1}</b>\" ; \n        let str2 = \"<b>{1}%</b>\" ; \n\n        // 显示Buff\n        for( let buff of this.article.tower.buff.list ) {\n\n            switch( buff.affix.type ) {\n                \n                case AffixType.HpMaxIncrease : {\n                    this.hpMaxIncrease.root.active = true ; \n                    this.hpMaxIncrease.val.string = str1.replace( \"{1}\" , buff.affix.argN.toString() ) ; \n                }\n                break ;\n\n                case AffixType.HpRegenIncrease : {\n                    this.HpRegen.root.active = true ; \n                    this.HpRegen.val.string = str1.replace( \"{1}\" , buff.affix.argN.toString() ) ; \n                }\n                break ;\n\n                case AffixType.HpRegenIncreasePercent : {\n                    this.HpRegen.root.active = true ; \n                    let n = buff.affix.argN * 100 ;\n                    this.HpRegen.val.string = str2.replace( \"{1}\" , n.toString() ) ; \n                }\n                break ;\n\n                case AffixType.GetMomeyPerWave : {\n                    this.Money001.root.active = true ; \n                    this.Money001.val.string = str1.replace( \"{1}\" , buff.affix.argN.toString() ) ; \n                }\n                break ;\n\n            }\n\n        } // end for\n\n        // 显示光环\n        for( let buff of this.article.tower.aura.list ) {\n\n            switch( buff.affix.type ) {\n                \n                // 攻击力\n                case AffixType.AuraAttackDamageIncreasePercent : {\n                    this.AuraAttackDamage.root.active = true ; \n                    let n = buff.affix.argN * 100 ;\n                    this.AuraAttackDamage.val.string = str2.replace( \"{1}\" , \"+\" + n.toString() ) ; \n                }\n                break ; \n\n                // 攻速\n                case AffixType.AuraAttackSpeedIncreasePercent : {\n                    let item = this.AuraAttackSpeed ; \n                    item.root.active = true ; \n                    let n = buff.affix.argN * 100 ;\n                    item.val.string = str2.replace( \"{1}\" , \"+\" + n.toString() ) ; \n                }\n                break ; \n\n                // 暴击概率\n                case AffixType.AuraAttackCritProbabilityIncrease : {\n                    let item = this.AuraAttackCritProbability ; \n                    item.root.active = true ; \n                    let n = buff.affix.argN * 100 ;\n                    item.val.string = str2.replace( \"{1}\" , \"+\" + n.toString() ) ; \n                }\n                break ; \n\n            }\n\n        }\n\n    }\n\n}\n\n// 条目\nclass UiArticleDetailAttributeItem {\n\n    public root : Node ; \n\n    public name : Label ; \n\n    public icon : Sprite ; \n\n    public val : RichText ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n\n        this.val = this.root.getChildByPath( \"Val\" ).getComponent( RichText ) ;\n\n    }\n\n}","import { Node, Size, sp, Sprite, UITransform, Vec3 } from \"cc\";\nimport { NodeSizeFit } from \"../../../SL/Cocos/Ui/NodeSizeFit\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { BagArticle } from \"../Article/BagArticle\";\n\n// 图标\nexport class UiArticleDetailIcon {\n\n    public root : Node ;\n    public icon : Sprite ; \n    public iconSk : sp.Skeleton ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = this.root.getChildByPath( \"Icon\" ).getComponent( Sprite ) ;\n        this.iconSize = this.icon.getComponent( UITransform ).contentSize.clone() ; \n        this.iconSk = this.root.getChildByPath( \"IconSk\" ).getComponent( sp.Skeleton ) ;\n\n    }\n\n    public refresh( article : BagArticle ) {\n\n        this.icon.node.active = false ; \n        this.iconSk.node.active = false ; \n\n        let id = article.cfg.id ; \n\n        // 静态图片\n        let pf = PfMgrBagArticle.getPf( id ) ;\n        let main = pf.getChildByPath( \"Main\" ) ; \n        let spr = main.getComponent( Sprite ) ; \n        if( spr != null ) {\n            this.icon.node.active = true ; \n            this.icon.spriteFrame = spr.spriteFrame ; \n            NodeSizeFit.set2( this.icon.node , this.iconSize , this.icon.spriteFrame.originalSize ) ;\n            return ; \n        }\n\n        this.refreshSkeleton( main ) ; \n\n    }\n\n    public refreshSkeleton( main : Node ) {\n\n        let sk = main.getComponent( sp.Skeleton ) ; \n        if( sk == null ) return ; \n\n        this.iconSk.node.active = true ; \n\n        // 设置动画\n        this.iconSk.skeletonData = sk.skeletonData ; \n\n        // 播放一个动画\n        let name = this.iconSk.skeletonData.getRuntimeData().animations[ 0 ].name ; \n        this.iconSk.setAnimation( 0 , name , true );\n\n        // 设置大小\n        let node = this.iconSk.node ; \n        // let node = instantiate( main ) ;\n        // node.scale = Vec3.ONE ; \n        let rect = node.getComponent( UITransform ).getBoundingBox() ; \n        node.setParent( this.icon.node.parent ) ; \n        NodeSizeFit.set2( node , this.iconSize , this.icon.spriteFrame.originalSize ) ; \n\n        // 设置位置\n        node.position = new Vec3( 0 , -rect.height / 2 , 0 ) ; \n\n    }\n\n    private iconSize : Size ; \n\n}\n","import { Node, Size, sp, Sprite, UITransform, Vec3 } from \"cc\";\nimport { PfMgrBagArticle } from \"../PfMgr/PfMgr\";\nimport { NodeSizeFit } from \"../../SL/Cocos/Ui/NodeSizeFit\";\nimport { CfgArticleMgr } from \"../Cfg/CfgArticle\";\n\n\n// 物件图标\nexport class UiArticleIcon {\n\n    public root : Node ;\n    public icon : Sprite ; \n    public iconSk : sp.Skeleton ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = this.root.getChildByPath( \"Icon\" ).getComponent( Sprite ) ;\n        this.iconSize = this.icon.getComponent( UITransform ).contentSize.clone() ; \n        this.iconSk = this.root.getChildByPath( \"IconSk\" ).getComponent( sp.Skeleton ) ;\n\n    }\n\n    public refresh( id : string ) {\n\n        this.icon.node.active = false ; \n\n        this.iconSk.node.active = false ; \n\n        // 静态图片\n        let pf = PfMgrBagArticle.getPf( id ) ;\n        let main = pf.getChildByPath( \"Main\" ) ; \n        let spr = main.getComponent( Sprite ) ; \n        if( spr != null ) {\n            this.icon.node.active = true ; \n            this.icon.spriteFrame = spr.spriteFrame ; \n            NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n            return ; \n        }\n\n        this.refreshSkeleton( main ) ; \n\n    }\n\n    // spine 动画\n    public refreshSkeleton( main : Node ) {\n\n        let sk = main.getComponent( sp.Skeleton ) ; \n        if( sk == null ) return ; \n\n        this.iconSk.node.active = true ; \n\n        // 设置动画\n        if( this.iconSk.skeletonData == sk.skeletonData ) return ; \n        this.iconSk.skeletonData = sk.skeletonData ; \n\n        // 播放一个动画\n        let name = this.iconSk.skeletonData.getRuntimeData().animations[ 0 ].name ; \n        this.iconSk.setAnimation( 0 , name , true );\n\n        // 设置大小\n        let node = this.iconSk.node ; \n        // let node = instantiate( main ) ;\n        // node.scale = Vec3.ONE ; \n        let rect = node.getComponent( UITransform ).contentSize ; \n        node.setParent( this.icon.node.parent ) ; \n        // NodeSizeFit.set2( node , this.iconSize , new Size( 1 , 1 ) ) ; \n\n        // 用设置缩放的方式做适配\n        let f2 = rect.width / rect.height ; \n        if( f2 > 1 ) {\n            let f = this.iconSize.width / rect.width ;\n            node.setScale( new Vec3( f , f , f ) ) ;\n\n        }\n        else if( f2 < 1 || f2 == 1 ) {\n            let f = this.iconSize.height / rect.height ;\n            node.setScale( new Vec3( f , f , f ) ) ;\n        }\n        \n        // let f = this.iconSize.width / rect.width ;\n        // node.setScale( new Vec3( f , f , f ) ) ;\n\n\n        rect = node.getComponent( UITransform ).getBoundingBox() ; \n        // 设置位置\n        node.position = new Vec3( 0 , -rect.height / 2 , 0 ) ; \n\n    }\n\n    private iconSize : Size ; \n\n}\n\n// 图标背景\nexport class UiArticleIconBg {\n\n    public root : Node ; \n\n    public init( node : Node ) {\n        this.root = node ;\n    }\n\n    public refresh( id : string ) {\n\n        for( let i = 0 ; i < this.root.children.length ; ++i ) {\n            this.root.children[ i ].active = false ; \n        }\n\n        let q = CfgArticleMgr.data.get( id ).quality ; \n        let idx = q - 1 ;\n\n        if( idx >= this.root.children.length ) {\n            idx = this.root.children.length ; \n        }\n\n        this.root.children[ idx ].active = true ; \n\n    }\n\n}","import { Input, instantiate, Node, Prefab, resources, RichText, Sprite } from \"cc\";\nimport { UiArticleIcon } from \"../../../Common/Ui/UiArticleIcon\";\nimport { ArticleString } from \"../../../Common/String/ArticleString\";\nimport { Lang } from \"../../../Common/Misc/Lang\";\nimport { UiEffectPopup } from \"../../../SL/Cocos/Ui/UiEffect\";\n\n// UI 物件解锁 告知\nexport class UiArticleUnlock {\n\n    public static loadAndCreate( cb : ( ui : UiArticleUnlock )=>void ) {\n\n        resources.load( \"Home/Ui/ArticleUnlock\" , Prefab , ( err , data )=>{\n\n            let root = instantiate( data ) ;\n            let ui = new UiArticleUnlock() ;\n            ui.init( root ) ; \n            cb( ui ) ;\n\n        } ) ; \n\n    }\n\n    public root : Node ; \n\n    public mask : Node ; \n\n    public icon = new UiArticleIcon() ; \n\n    public description : RichText ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.mask = this.root.getChildByPath( \"mask\" ) ; \n        this.mask.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n        } ) ;\n\n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ;\n\n        this.description = this.root.getChildByPath( \"Description\" ).getComponent( RichText ) ;\n\n    }\n\n    public refresh( ids : Array< string > ) {\n\n        // 图标\n        this.icon.refresh( ids[ 0 ] ) ;\n\n        // 描述\n        let id = ids[ 0 ] ;\n        let name = ArticleString.getName( id ) ;\n        let str = Lang.get( \"Home_AricleUnlock_Description\" ) ;\n        str = str.replace( \"{name}\" , name ) ;\n        this.description.string = str ; \n\n    }\n\n    public show() {\n\n        UiEffectPopup.show( this.root ) ;\n\n    }\n\n}","import { find, Input, instantiate, Node, Prefab } from \"cc\";\nimport { UiBagGrid } from \"../Grid/UiBagGrid\";\nimport { UiBagTouch } from \"../Touch/UiBagTouch\";\nimport { UiArticleDetail } from \"../ArticleDetail/UiArticleDetail\";\n\n\n\n// 背包 UI\nexport class UiBag {\n\n    public static ins : UiBag ; \n\n    public static createIns( node : Node ) {\n\n        let ui = new UiBag() ; \n        this.ins = ui ; \n        ui.init( node ) ;\n\n    }\n\n\n    public static pf : Prefab ;\n\n    public static create( parent : Node = null ) : UiBag {\n\n        let root = instantiate( this.pf ) ;\n\n        let ui = new UiBag() ; \n        ui.init( root ) ;\n        ui.root.setParent( parent , false ) ; \n\n        return ui ; \n\n    }\n\n \n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        UiBagGrid.ins = new UiBagGrid() ; \n        UiBagGrid.ins.init( this.root.getChildByPath( \"Grid\" ) ) ;\n\n        UiBagTouch.ins = new UiBagTouch() ; \n        UiBagTouch.ins.init( this.root.getChildByPath( \"Touch\" ) ) ; \n\n        // UiTray.ins = new UiTray() ; \n        // UiTray.ins.init( this.root.getChildByPath( \"Tray\" ) ) ; \n\n        // UiBagBottom.ins = new UiBagBottom() ; \n        // UiBagBottom.ins.init( this.root.getChildByPath( \"Bottom\" ) ) ;\n\n        UiArticleDetail.ins = new UiArticleDetail() ; \n        UiArticleDetail.ins.init( this.root.getChildByPath( \"ArticleInfo\" ) ) ; \n        \n        // UiBagExpandOp.ins = new UiBagExpandOp() ; \n        // UiBagExpandOp.ins.init( this.root.getChildByPath( \"BagExpandOp\" ) ) ; \n\n        // GridModeTransition.init() ; \n        \n    }\n\n}\n\n","import { Input, instantiate, Node, Prefab } from \"cc\";\nimport { UiBagDeploy } from \"./UiBagDeploy\";\nimport { UiBagUnlocked } from \"./UiBagUnlocked\";\nimport { UiBagLocked } from \"./UiBagLocked\";\nimport { UiBagPrefab } from \"./UiBagPrefab\";\nimport { UiBagReplace } from \"./UiBagReplace\";\n\nexport class UiBag {\n\n    public static ins = new UiBag() ; \n\n    public static pf : Prefab ; \n\n    public static create() {\n\n        let root = instantiate( this.pf ) ; \n        this.ins.init( root ) ;\n\n    }\n\n\n    public root : Node ; \n\n    public deploy : UiBagDeploy ; \n    public unlocked : UiBagUnlocked ; \n    public locked : UiBagLocked ; \n    public replace : UiBagReplace ; \n\n    public sv : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnBack = this.root.getChildByPath( \"btnBack\" ) ;\n        btnBack.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.active = false ; \n        } ) ;\n\n        UiBagPrefab.ins = new UiBagPrefab() ; \n        UiBagPrefab.ins.init( this.root.getChildByPath( \"Prefab\" ) ) ;\n\n        // 上阵的\n        this.deploy = new UiBagDeploy() ; \n        this.deploy.init( this.root.getChildByPath( \"Deploy\" ) ) ;\n        \n        this.sv = this.root.getChildByPath( \"sv\" ) ; \n        this.sv.active = true ; \n\n        // 解锁的/获得的\n        this.unlocked = new UiBagUnlocked() ; \n        this.unlocked.init( this.root.getChildByPath( \"sv/view/content/Unlocked\" ) ) ;\n     \n        // 未解锁的/未获得的\n        this.locked = new UiBagLocked() ; \n        this.locked.init( this.root.getChildByPath( \"sv/view/content/Locked\" ) ) ;\n\n        this.replace = new UiBagReplace() ; \n        this.replace.init( this.root.getChildByPath( \"Replace\" ) ) ;\n        this.replace.root.active = false ; \n\n    }\n\n    public show() {\n\n        this.root.active = true ; \n\n        this.deploy.refresh() ; \n        this.unlocked.refresh() ; \n        this.locked.refresh() ; \n\n        \n\n    }\n\n}\n\n","import { Input, instantiate, Label, Node, Prefab, resources, RichText, tween, Vec3 } from \"cc\";\nimport { CfgArticle, CfgArticleMgr } from \"../../../../Common/Cfg/CfgArticle\";\nimport { CfgArticleGrade } from \"../../../../Common/Cfg/CfgArticleGrade\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { ArticleString } from \"../../../../Common/String/ArticleString\";\nimport { UiBagArticleDetailBaseAttribute } from \"./UiBagArticleDetailBaseAttribute\";\nimport { UiBagArticleDetailUnlocked } from \"./UiBagArticleDetailUnlocked\";\nimport { UiBagArticleDetailBtnList } from \"./UiBagArticleDetailBtnList\";\nimport { UiBagItem } from \"../UiBagItem\";\nimport { UiEffectPopup } from \"../../../../SL/Cocos/Ui/UiEffect\";\nimport { SoundBtnClickSetter } from \"../../../../Common/Audio/SoundBtnClickSetter\";\n\nexport class UiBagArticleDetail {\n\n    public static pf : Prefab ; \n\n    public static create( parent : Node ) : UiBagArticleDetail {\n\n        let root = instantiate( this.pf ) ; \n        let ui = new UiBagArticleDetail() ; \n        ui.init( root ) ;\n        ui.root.setParent( parent , false ) ;\n\n        return ui ; \n\n    }\n\n    public articleId : string = null ; \n\n    public root : Node ; \n\n    public name : Label ; \n\n    public intro : Label ; \n\n    public btnList = new UiBagArticleDetailBtnList() ; \n\n    public attribute = new UiBagArticleDetailBaseAttribute() ; \n\n    public unlocked = new UiBagArticleDetailUnlocked() ; \n\n    public item : UiBagItem ; \n\n    public unlockedInfo : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        SoundBtnClickSetter.exe( this.root ) ;\n\n        let btnClose = this.root.getChildByPath( \"btnClose\" ) ;\n        btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n        } ) ;\n\n        this.btnList.detail = this ; \n        this.btnList.init( this.root.getChildByPath( \"btnList\" ) ) ;\n        this.btnList.setShowModeAsDeploy() ;\n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n        \n        this.intro = this.root.getChildByPath( \"Intro/val\" ).getComponent( Label ) ;\n\n        this.attribute.init( this.root.getChildByPath( \"Attribute\" ) ) ;\n\n        this.unlocked.detail = this ; \n        this.unlocked.init( this.root.getChildByPath( \"Unlocked\" ) ) ; \n\n        this.unlockedInfo = this.root.getChildByPath( \"UnlockedInfo\" ).getComponent( Label ) ; \n        this.unlockedInfo.node.active = false ; \n        \n    }\n\n    public show() {\n        this.root.active = true ; \n        UiEffectPopup.show( this.root ) ; \n        \n    }\n\n    public refresh() {\n        \n        let cfgArctileItem = CfgArticleMgr.data.get( this.articleId ) ; \n        let glId = cfgArctileItem.gradeLineId ; \n        let cfgGrade = CfgArticleGrade.data.get( glId ) ; \n        // 取得当前物品的等级\n        let grade = Account.ins.bag.grade.get( glId ) ; \n        if( grade == null ) {\n            grade = 1 ; \n        }\n        \n        if( grade > cfgGrade.length ) {\n            // 达到最高级\n            this.btnList.btnUpgrade.root.active = false ; \n        }\n        else {\n            this.btnList.btnUpgrade.refresh() ; \n        }\n\n        this.attribute.cfgArctile = cfgArctileItem ; \n        this.attribute.refresh() ; \n        \n        // 描述\n        this.intro.string = ArticleString.getDescription( this.articleId ) ;  \n\n        this.unlocked.cfgArctile = cfgArctileItem ; \n        this.unlocked.refresh() ; \n\n    }\n\n}\n\n\n\n\n\n\n\n","import { Label, Node, RichText, Sprite } from \"cc\";\nimport { FrameSecConvert } from \"../../../../Common/Misc/FrameSecConvert\";\nimport { BagArticleGradeHelper } from \"../../../../Game/Bag/Article/BagArticleGradeHelper\";\nimport { CfgArticle } from \"../../../../Common/Cfg/CfgArticle\";\nimport { Lang } from \"../../../../Common/Misc/Lang\";\nimport { CfgArticleGradeItem } from \"../../../../Common/Cfg/CfgArticleGrade\";\nimport { CfgBuff } from \"../../../../Common/Cfg/CfgBuff\";\nimport { AffixType } from \"../../../../Game/World/1.Base/Buff/Affix\";\n\n// 基础属性\nexport class UiBagArticleDetailBaseAttribute {\n\n    public cfgArctile : CfgArticle = null ; \n\n    public root : Node ; \n\n    public cd = new UiBagArticleDetailBaseAttributeItem() ; \n    public target = new UiBagArticleDetailBaseAttributeItem() ; \n    public attackDamage = new UiBagArticleDetailBaseAttributeItem() ; \n    public hpMaxIncrease =  new UiBagArticleDetailBaseAttributeItem() ; \n    public HpRegen =  new UiBagArticleDetailBaseAttributeItem() ; \n    public AttackDamageAura =  new UiBagArticleDetailBaseAttributeItem() ; \n    public Money001 =  new UiBagArticleDetailBaseAttributeItem() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.target.init( this.root.getChildByPath( \"Target\" ) ); \n        this.target.root.active = false ; \n\n        this.cd.init( this.root.getChildByPath( \"Cd\" ) ) ;\n        this.cd.root.active = false ; \n\n        this.attackDamage.init( this.root.getChildByPath( \"Attack\" ) ) ;\n        this.attackDamage.root.active = false ; \n\n        this.hpMaxIncrease.init( this.root.getChildByPath( \"HpMaxIncrease\" ) ) ;\n        this.hpMaxIncrease.root.active = false ; \n\n        this.HpRegen.init( this.root.getChildByPath( \"HpRegen\" ) ) ;\n        this.HpRegen.root.active = false ; \n\n        this.AttackDamageAura.init( this.root.getChildByPath( \"AttackAura\" ) ) ;\n        this.AttackDamageAura.root.active = false ; \n\n        this.Money001.init( this.root.getChildByPath( \"Money001\" ) ) ;\n        this.Money001.root.active = false ; \n\n    }\n\n    private cfgCurrent : CfgArticleGradeItem = null ; \n    private cfgNext : CfgArticleGradeItem = null ; \n\n    public refresh() {\n\n        this.cfgCurrent = BagArticleGradeHelper.getCfgCurrent( this.cfgArctile.id ) ;\n        this.cfgNext = BagArticleGradeHelper.getCfgNext( this.cfgArctile.id ) ; \n\n        this.refreshAttack() ; \n        this.refreshMisc() ; \n\n    }\n\n    public refreshAttack() {\n\n        let val = this.cfgCurrent.attackDamage ; \n        if( val == 0 ) return ; \n\n        this.attackDamage.root.active = true ; \n\n        // 攻击力\n        this.attackDamage.val.string = \"<b>\" + val.toString() + \"</b>\" ; \n\n        // 攻击力 下一级增加的\n        if( this.cfgNext != null ) {\n            let diff = this.cfgNext.attackDamage - this.cfgCurrent.attackDamage ; \n            if( diff > 0 ) {\n                this.attackDamage.val.string += \"<b><color=Green>+\" + diff + \"</color></b>\" ; \n            }\n        }\n\n        // 目标\n        this.target.root.active = true ; \n        this.target.val.string = \"<b>\" + Lang.get( \"AttackTargeSelType_\" + this.cfgArctile.tower.atkTargeSelType ) + \"</b>\" ; \n\n        // 攻击 CD \n        this.cd.root.active = true ; \n        this.cd.val.string = \"<b>\" + FrameSecConvert.toSecond( this.cfgArctile.tower.atkCd ).toString() + \"</b>\" ; \n\n    }\n\n    // 刷新其他的杂项\n    public refreshMisc() {\n     \n        let str1 = \"<b>{1}</b>\" ; \n        let str2 = \"<b>{1}%</b>\" ; \n\n        let cfgItems = BagArticleGradeHelper.getCfgCurrentItems( this.cfgArctile.id ) ;\n\n        for( let cfg of cfgItems ) {\n\n            let ids = cfg.buffIds ; \n            for( let id of ids ) {\n                let cfgBuffItem = CfgBuff.data.get( id ) ;\n                \n                switch( cfgBuffItem.affixType ) {\n                    \n                    case AffixType.HpMaxIncrease : {\n                        this.hpMaxIncrease.root.active = true ; \n                        this.hpMaxIncrease.val.string = str1.replace( \"{1}\" , cfgBuffItem.affixArgN.toString() ) ; \n                    }\n                    break ;\n\n                    case AffixType.HpRegenIncrease : {\n                        this.HpRegen.root.active = true ; \n                        this.HpRegen.val.string = str1.replace( \"{1}\" , cfgBuffItem.affixArgN.toString() ) ; \n                    }\n                    break ;\n\n                    case AffixType.HpRegenIncreasePercent : {\n                        this.HpRegen.root.active = true ; \n                        let n = cfgBuffItem.affixArgN * 100 ;\n                        this.HpRegen.val.string = str2.replace( \"{1}\" , n.toString() ) ; \n                    }\n                    break ;\n\n                    case AffixType.GetMomeyPerWave : {\n                        this.Money001.root.active = true ; \n                        this.Money001.val.string = str1.replace( \"{1}\" , cfgBuffItem.affixArgN.toString() ) ; \n                    }\n                    break ;\n\n                    case AffixType.AuraAttackDamageIncreasePercent : {\n                        this.AttackDamageAura.root.active = true ; \n                        let n = cfgBuffItem.affixArgN * 100 ;\n                        this.AttackDamageAura.val.string = str2.replace( \"{1}\" , n.toString() ) ; \n                    }\n                    break ; \n\n                }\n\n            } // end for\n\n        } // end for\n\n    }\n\n}\n\n// 条目\nclass UiBagArticleDetailBaseAttributeItem {\n\n    public root : Node ; \n\n    public name : Label ; \n\n    public icon : Sprite ; \n\n    public val : RichText ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n\n        this.val = this.root.getChildByPath( \"Val\" ).getComponent( RichText ) ;\n\n    }\n\n}","import { Input, Label, Node } from \"cc\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { AccountPersist } from \"../../../../Common/Account/AccountPersist\";\nimport { CfgArticleMgr } from \"../../../../Common/Cfg/CfgArticle\";\nimport { CfgArticleGrade, CfgArticleGradeItem } from \"../../../../Common/Cfg/CfgArticleGrade\";\nimport { ReplaceModeEnter } from \"../ReplaceModeEnter\";\nimport { UiBag } from \"../UiBag\";\nimport { UiBagArticleDetail } from \"./UiBagArticleDetail\";\nimport { BagArticleGradeHelper } from \"../../../../Game/Bag/Article/BagArticleGradeHelper\";\nimport { UiToast } from \"../../../../Common/Ui/UiToast\";\nimport { UiMain } from \"../../Main/UiMain\";\nimport { UiMoney001 } from \"../../Main/Margin/UiMoney001\";\n\n\n// 底部的按钮列表\nexport class UiBagArticleDetailBtnList {\n\n    public detail : UiBagArticleDetail = null ; \n\n\n    public root : Node ; \n\n    public btnUpgrade : UiBagArticleDetailUpgrade ; \n\n    public btnRemove : Node ; \n\n    public btnDeploy : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.btnUpgrade = new UiBagArticleDetailUpgrade() ; \n        this.btnUpgrade.detail = this.detail ; \n        this.btnUpgrade.init( this.root.getChildByPath( \"btnUpgrade\" ) ) ;\n\n        this.btnRemove = this.root.getChildByPath( \"btnRemove\" ) ;\n        this.btnRemove.on( Input.EventType.TOUCH_END , this.onClick_btnRemove , this ) ; \n\n        this.btnDeploy = this.root.getChildByPath( \"btnDeploy\" ) ;\n        this.btnDeploy.on( Input.EventType.TOUCH_END , this.onClick_btnDeploy , this ) ; \n\n    }\n\n    public setShowModeAsDeploy( ) {\n\n        this.btnRemove.active = true ;\n        this.btnDeploy.active = false ; \n    }\n\n    public setShowModeAsUnlocked( ) {\n        this.btnRemove.active = false ;\n        this.btnDeploy.active = true ; \n    }\n\n    private onClick_btnRemove() {\n\n        // this.root.destroy() ; \n\n        let id = this.detail.articleId ;\n\n        // 操作数据。从 上阵表 中删除\n        let idx = Account.ins.bag.deploy.indexOf( id ) ; \n        Account.ins.bag.deploy.splice( idx , 1 ) ; \n        AccountPersist.save() ; \n\n        // 刷新\n        UiBag.ins.deploy.refresh() ; \n        UiBag.ins.unlocked.refresh() ; \n\n        // 关闭页面\n        this.detail.root.destroy() ; \n\n    }\n\n    private onClick_btnDeploy() {\n\n        // this.root.destroy() ; \n\n        let deploy = Account.ins.bag.deploy ;\n        if( deploy.length < 8 ) {\n            // 有空位\n\n            let id = this.detail.articleId ;\n\n            Account.ins.bag.deploy.push( id ) ;\n            AccountPersist.save() ; \n    \n            // 刷新\n            UiBag.ins.deploy.refresh() ; \n            UiBag.ins.unlocked.refresh() ; \n\n            // 关闭页面\n            this.detail.root.destroy() ; \n\n            return ; \n\n        }\n\n        // 替换模式\n\n        // 关闭页面\n        this.detail.root.destroy() ; \n\n        ReplaceModeEnter.enter( this.detail.articleId ) ;\n\n    }\n\n\n}\n\n\nexport class UiBagArticleDetailUpgrade {\n\n    public detail : UiBagArticleDetail = null ; \n\n    public root : Node ; \n\n    public upgradeCost : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \n\n        this.upgradeCost = this.root.getChildByPath( \"Cost/val\" ).getComponent( Label ) ; \n\n    }\n\n    public refresh() {\n \n        let cfg = BagArticleGradeHelper.getCfgCurrent( this.detail.articleId ) ;\n        this.upgradeCost.string = cfg.upgrade.money1.toString() ; \n\n    }\n\n    private onClick() {\n\n        let id = this.detail.articleId ;\n\n        if( this.check( ) == false ) return ;  \n\n        // 取得升级线ID\n        let cfgArctileItem = CfgArticleMgr.data.get( id ) ; \n        let glId = cfgArctileItem.gradeLineId ; \n\n        let grade = Account.ins.bag.grade.get( glId ) ; \n        if( grade == null ) {\n            grade = 1 ; \n        }\n\n        grade++ ;\n\n        Account.ins.bag.grade.set( glId , grade ) ; \n\n        AccountPersist.save() ; \n\n\n        // 刷新页面\n\n        UiBag.ins.deploy.refresh() ; \n        UiBag.ins.unlocked.refresh() ; \n        this.detail.unlocked.refresh() ; \n        this.detail.refresh() ; \n        this.detail.item.refresh() ; \n        UiMoney001.ins.refresh() ; \n\n    }\n\n    // 检查是否能升级\n    private check( ) : boolean {\n\n        let a = Account.ins ; \n\n        let cfgGrade = BagArticleGradeHelper.getCfgCurrent( this.detail.articleId ) ;\n        if( a.money.money001 < cfgGrade.upgrade.money1 ) \n        {\n            // 钱不够\n            UiToast.show( UiMain.ins.root , \"金币不足\" ) ; \n\n            return false ;\n        }\n\n        // 物品不够\n        let itemCount = a.items.get( cfgGrade.upgrade.itemId ) ; \n        if( itemCount == null ) { itemCount = 0 ; } ; \n        if( itemCount < cfgGrade.upgrade.itemCount ) {\n\n            // 碎片不足\n            UiToast.show( UiMain.ins.root , \"碎片不足\" , 1.5 ) ; \n\n            return false ; \n        }\n\n        // 扣减数值\n        a.money.money001 -= cfgGrade.upgrade.money1 ; \n        itemCount -= cfgGrade.upgrade.itemCount ; \n        a.items.set( cfgGrade.upgrade.itemId , itemCount ) ; \n        AccountPersist.save() ;\n\n\n        return true ; \n\n    }\n\n}","import { instantiate, Node, RichText, Size, Sprite, UITransform } from \"cc\";\nimport { CfgArticleGrade, CfgArticleGradeItem } from \"../../../../Common/Cfg/CfgArticleGrade\";\nimport { BuffString } from \"../../../../Game/World/1.Base/Buff/BuffString\";\nimport { CfgArticle } from \"../../../../Common/Cfg/CfgArticle\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { BagArticleGradeHelper } from \"../../../../Game/Bag/Article/BagArticleGradeHelper\";\nimport { CfgBuff } from \"../../../../Common/Cfg/CfgBuff\";\nimport { UiBagArticleDetail } from \"./UiBagArticleDetail\";\nimport { PfMgrIconBuff } from \"../../../../Common/PfMgr/PfMgrIconBuff\";\nimport { NodeSizeFit } from \"../../../../SL/Cocos/Ui/NodeSizeFit\";\n\n// 解锁的\nexport class UiBagArticleDetailUnlocked {\n\n    public detail : UiBagArticleDetail = null ; \n    public cfgArctile : CfgArticle = null ; \n\n    public root : Node ; \n\n    public content : Node ; \n\n    public items = new Array< UiBagArticleDetailUnlockedItem >() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.content = this.root.getChildByPath( \"sv/view/content\" ) ;\n\n        this.pfItem = this.content.children[ 0 ] ;\n        this.pfItem.active = false ; \n\n        this.pfItem2 = this.content.children[ 1 ] ;\n        this.pfItem2.active = false ; \n\n        // 删除多余的\n        for( let i = this.content.children.length ; i > 2 ; --i ) {\n            this.content.children[ i ].destroy() ; \n        } // end for\n\n    }\n\n    public refresh() {\n\n        for( let uiItem of this.items ) {\n            uiItem.root.destroy() ; \n        }\n        this.items.splice( 0 , this.items.length ) ; \n\n        let grade = BagArticleGradeHelper.getGradeByLineId( this.cfgArctile.gradeLineId ) ;\n\n        let line = CfgArticleGrade.data.get( this.cfgArctile.gradeLineId ) ;\n        for( let i = 0 ; i < line.length ; ++i ) {\n            let cfgGradeItem = line[ i ] ;\n            if( cfgGradeItem.unlocked.length == 0 && cfgGradeItem.buffIds.length == 0 ) continue ; \n\n            let isUnlocked = cfgGradeItem.grade <= grade ; \n            \n            if( isUnlocked == true ) {\n                // 判断是否解锁。因为未解锁的等级返回都是1级，需要再判断一次\n                isUnlocked = Account.ins.bag.unlocked.findIndex( ( e )=>{ return e == this.cfgArctile.id ; } ) != -1 ; \n            }\n\n            let pfItem = isUnlocked ? this.pfItem : this.pfItem2 ; \n\n            let root = instantiate( pfItem ) ;\n            root.active = true ; \n            root.setParent( this.content , false );\n\n            let item = new UiBagArticleDetailUnlockedItem() ; \n            this.items.push( item ) ; \n            item.init( root ) ;\n            item.cfgGradeItem = cfgGradeItem ; \n            item.isUnlocked = isUnlocked ; \n            item.refresh() ; \n\n        } // end for\n\n        if( grade == line.length ) {\n            // 到达了最高级\n            this.detail.btnList.btnUpgrade.root.active = false ; \n        }\n\n    }\n\n    public pfItem : Node ; \n    public pfItem2 : Node ; \n\n}\n\nexport class UiBagArticleDetailUnlockedItem {\n\n    public isUnlocked = true ; \n    public cfgGradeItem : CfgArticleGradeItem = null ;\n\n    public root : Node ; \n\n    public txt : RichText ; \n\n    public icon = new UiBagArticleDetailUnlockedItemIcon() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.txt = this.root.getComponentInChildren( RichText ) ; \n\n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ; \n\n\n    }\n\n    public refresh() {\n\n        let buffId : string = null ; \n        if( this.cfgGradeItem.unlocked.length > 0 ) {\n            buffId = this.cfgGradeItem.unlocked[ 0 ] ; \n        }\n        else {\n            // 显示天生能力，杂交\n            buffId = this.cfgGradeItem.buffIds.find( ( e )=>{ return e.indexOf( \"MergeEnable\" ) != -1 ; } ) ; \n        }\n        if( buffId == null ) return ; \n\n        let str = BuffString.getDescription( buffId ) ;\n\n        if( this.isUnlocked ) {\n            // 加粗体\n            str = \"<outline color=black width=4><b>\" + str + \"</b></outline>\" ;\n        }\n        else {\n            let str2 = \"<color=#AFFBFA>Lv.{1}解锁：</color>\".replace( \"{1}\" , this.cfgGradeItem.grade.toString() ) ;\n            str = \"<outline color=black width=4><b>\" + str2 + str + \"</b></outline>\" ;\n        }\n\n        this.txt.string = str ; \n\n        this.icon.refresh( buffId ) ; \n\n\n    }\n\n}\n\n// 图标\nclass UiBagArticleDetailUnlockedItemIcon {\n\n    public root : Node ; \n\n    public iconBgList = Array< Node >() ;\n    public icon : Sprite ; \n    private iconSize : Size ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = node.getChildByPath( \"val\" ).getComponent( Sprite ) ;\n        this.iconSize = this.icon.getComponent( UITransform ).contentSize.clone() ;\n\n        for( let i = 1 ; ; i++ ) {\n\n            let key = \"bg\" + i ;\n            let t = this.root.getChildByPath( key ) ; \n            if( t == null ) break ;\n            this.iconBgList.push( t ) ; \n\n        } // end for\n\n    }\n\n    public refresh( buffId : string ) {\n\n        // 图标\n        let spr = PfMgrIconBuff.ins.getIconById( buffId ) ;\n        this.icon.spriteFrame = spr.spriteFrame ; \n\n        // 设置图标Size。去掉透明区域的大小比例，会最大化显示\n        NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n\n        // 技能品质。底板显示\n        let cfgBuffItem = CfgBuff.data.get( buffId ) ;\n        for( let t of this.iconBgList ){ t.active = false } ;\n        let idx = cfgBuffItem.grade - 1 ; \n        if( this.iconBgList.length <= idx ) return ; \n        this.iconBgList[ idx ].active = true ; \n\n\n\n    }\n\n    \n\n}","import { Input, Label, Node, randomRangeInt } from \"cc\";\nimport { UiTray } from \"./UiTray\";\nimport { BagTrayAricleGen } from \"../../World/2.Td/Bag/BagTrayAricleGen\";\nimport { Ad } from \"../../../Common/Ad/Ad\";\nimport { Player } from \"../../World/2.Td/Player/Player\";\n\n// 底部按钮\nexport class UiBagBottom {\n\n    public static ins : UiBagBottom = null ;\n\n    public root : Node ; \n\n    // 开战\n    public btnStart : Node ; \n\n    // 刷新\n    public btnRefresh : Node ; \n\n    // 必出2级\n    public btnRefreshGrade2 : Node ; \n\n    // 获取格子扩展\n    public btnGetGridExpand : UiBtnGetGridExpand ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.btnStart = this.root.getChildByPath( \"BtnList/btnStart\" ) ;\n        this.btnStart.on( Input.EventType.TOUCH_END , this.onClick_Start , this ) ; \n\n        this.btnRefresh = this.root.getChildByPath( \"BtnList/btnRefresh\" ) ;\n        // this.btnRefresh.on( Input.EventType.TOUCH_END , this.onClick_Refresh , this ) ; \n\n        this.btnRefreshGrade2 = this.root.getChildByPath( \"BtnList/btnRefreshGrade2\" ) ;\n        this.btnRefreshGrade2.on( Input.EventType.TOUCH_END , this.onClick_btnRefreshGrade2 , this ) ; \n\n        this.btnGetGridExpand = new UiBtnGetGridExpand() ; \n        this.btnGetGridExpand.init( this.root.getChildByPath( \"btnGetGridExpand\" ) ) ;\n\n    }\n\n\n\n    public show() {\n        this.root.active = true ; \n        this.showAllBtns( true ) ; \n    }\n\n    public hide() {\n        this.root.active = false ; \n    }\n\n\n    // 隐藏所有的按钮\n    public showAllBtns( val : boolean = true ) {\n\n        this.btnStart.active = val ; \n        this.btnRefresh.active = val ; \n        this.btnRefreshGrade2.active = val ; \n        this.btnGetGridExpand.root.active = val ; \n\n    }\n\n    private onClick_Start() {\n\n    }\n\n    private onClick_Refresh() {\n\n\n    }\n\n\n    private onClick_btnRefreshGrade2() {\n\n        Ad.ins.rewardShow( ()=>{\n\n            BagTrayAricleGen.ins.genGrade2() ; \n            this.refreshGrade2Count++ ;\n            if( this.refreshGrade2Count >= 2 ) {\n                this.btnRefreshGrade2.active = false ; \n            }\n\n        } ) ;\n\n    }\n\n    private refreshGrade2Count = 0 ; \n\n}\n\n// 获取格子扩展物 \nexport class UiBtnGetGridExpand {\n\n    public root : Node ; \n\n    public count : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick_btnGetGridExpand , this ) ; \n\n        this.count = this.root.getChildByPath( \"Count\" ).getComponent( Label ) ;\n        this.count.string = \"x3\" ;\n\n        this.refresh() ; \n\n    }\n\n    private refresh() {\n\n        let count = Player.ins.getGridExpandCount ; \n        if( count <= 0 ) {\n            this.root.destroy() ; \n            return ; \n        }\n        this.count.string = \"x\" + count ;\n\n    }\n\n    private onClick_btnGetGridExpand() {\n\n        Ad.ins.rewardShow( ()=> {\n\n            // 随机格子\n            let list = [ \"BagExpand_H2\" , \"BagExpand_V2\" ] ; \n            let id = list[ randomRangeInt( 0 , list.length ) ] ;\n\n            UiTray.ins.addArticleById( id , 2 ) ;\n\n            Player.ins.getGridExpandCount-- ; \n            this.refresh() ; \n\n        } ) ; \n\n    }\n\n}","import { Node, Vec2 } from \"cc\";\nimport { BagArticle } from \"../Article/BagArticle\";\n\n// 背包单元格\nexport class UiBagCell {\n\n    // 是否是可用的，解锁的\n    public unlocked = false ; \n\n    // 坐标\n    public coord : Vec2 ; \n\n    // 占用的物品\n    public article: BagArticle = null ; \n\n\n    public root : Node ; \n\n    public bg : Node ; \n\n    // 可放置提示\n    public hintPlaceable : Node ; \n\n    // 可被扩展的\n    public hintExpandable : Node ; \n\n    public init( root : Node ) {\n\n        this.root = root ; \n\n        this.bg = root.getChildByPath( \"bg\" ) ;\n\n        this.hintPlaceable = root.getChildByPath( \"HintPlaceable\" ) ;\n        this.hintPlaceable.active = false ; \n\n        this.hintExpandable = root.getChildByPath( \"HintExpandable\" ) ;\n        this.hintExpandable.active = false ; \n\n    }\n\n}","import { Size } from \"cc\";\n\n// 背包UI配置\nexport class UiBagCfg {\n\n    public static ins : UiBagCfg = null ; \n\n    // 单元格大小。用于 绘制、计算放置位置 等、\n    public cellSize : Size = null ; \n\n}","import { Input, instantiate, Label, Node, Vec3 } from \"cc\";\nimport { UiBagItem } from \"./UiBagItem\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { UiBagArticleDetail } from \"./ArticleDetail/UiBagArticleDetail\";\nimport { UiMain } from \"../Main/UiMain\";\nimport { UiBagPrefab } from \"./UiBagPrefab\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\nimport { UiHybridGuide } from \"../Popup/UiHybridGuide\";\n\n// 上阵的\nexport class UiBagDeploy {\n\n    public root : Node ; \n\n    public items = new Array< UiBagItem >() ;\n\n    public count : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.count = this.root.getChildByPath( \"Title/Count\" ).getComponent( Label ) ; \n\n        this.list = this.root.getChildByPath( \"List\" ) ; \n\n        let btnHybridGuide = this.root.getChildByPath( \"btnHybridGuide\" ) ;\n        btnHybridGuide.on( Input.EventType.TOUCH_END , ()=>{\n            UiHybridGuide.create( UiMain.ins.root ).show() ;\n        } ) ;\n\n        this.refresh() ; \n\n    }\n\n    public refresh() {\n\n        this.items.splice( 0 , this.items.length ) ; \n        this.list.removeAllChildren() ; \n\n        // let list = [ \"001_1\" , \"010_1\" , \"013_1\" ] ;\n        let list = Account.ins.bag.deploy ; \n\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let id = list[ i ] ; \n\n            // 品质对应的预制条目\n            let q = CfgArticleMgr.data.get( id ).quality ; \n            let pf = UiBagPrefab.ins.items[ q - 1 ] ; \n            let uiItem = new UiBagItem() ; \n            this.items.push( uiItem ) ;\n            uiItem.init( instantiate( pf ) ) ;\n            uiItem.root.active = true ; \n            uiItem.root.setParent( this.list , false ) ;\n            uiItem.articleId = id ;\n            uiItem.refresh() ; \n\n            uiItem.root.on( Input.EventType.TOUCH_END , ()=>{\n                this.onClick_Item( uiItem ) ;\n            } ) ;\n\n        } // end for\n        \n        // 显示空位\n        for( let i = list.length ; i < 8 ; ++i ) {\n\n            let empty = instantiate( UiBagPrefab.ins.itemEmpty ) ; \n            empty.setParent( this.list , false ) ;\n\n        }\n\n        this.count.string = list.length + \"/8\" ;\n\n        SoundBtnClickSetter.exe( this.root ) ;\n\n    }\n\n    private onClick_Item( uiItem : UiBagItem ) {\n\n        let uiDetail = UiBagArticleDetail.create( UiMain.ins.root ) ;\n        uiDetail.articleId = uiItem.articleId ; \n        uiDetail.name.string = uiItem.name.string ; \n        uiDetail.refresh() ; \n        uiDetail.show() ; \n        uiDetail.btnList.setShowModeAsDeploy() ; \n\n        let item = uiDetail.root.getChildByPath( \"Item\" ) ; \n        let itemRoot = instantiate( uiItem.root ) ;\n        itemRoot.scale = new Vec3( 1.2 , 1.2 , 1.2 ) ; \n        itemRoot.setParent( item.parent , false ) ;\n        itemRoot.position = item.position ; \n        item.destroy() ; \n        let uiItem2 = new UiBagItem() ; \n        uiDetail.item = uiItem2 ; \n        uiItem2.init( itemRoot ) ; \n        uiItem2.name.node.active = false ; \n        uiItem2.articleId = uiItem.articleId ; \n        uiItem2.refresh() ; \n        \n\n    }\n\n    private list : Node ; \n\n}\n\n","import { Input, Node, tween, Vec3 } from \"cc\";\nimport { BagArticleGridPlace } from \"../Article/BagArticleGridPlace\";\nimport { GridModeTransition } from \"../Grid/GridModeTransition\";\nimport { GridTraverse } from \"../Grid/GridTraverse\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { CellExpand } from \"../Grid/CellExpand\";\nimport { UiTray } from \"./UiTray\";\nimport { UiToast } from \"../../../Common/Ui/UiToast\";\nimport { UiMain } from \"../../Ui/Main/UiMain\";\nimport { Lang } from \"../../../Common/Misc/Lang\";\nimport { UiBagTouch } from \"../Touch/UiBagTouch\";\n\n// 背包扩展操作\nexport class UiBagExpandOp {\n\n    public static ins = new UiBagExpandOp() ;\n\n    public root : Node ; \n\n    public btnOK : Node ; \n\n    public prompt : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.root.active = true ; \n\n        this.btnOK = this.root.getChildByPath( \"btnOK\" ) ;\n        // this.btnOK.active = false ; \n        this.btnOK.on( Input.EventType.TOUCH_END , this.onClick_OK , this ) ; \n\n        this.prompt = this.root.getChildByPath( \"Prompt\" ) ;\n        tween( this.prompt ).sequence(\n            tween( this.prompt ).to( 0.9 , { scale : new Vec3( 1.2 , 1.2 , 1.2 ) } ) , \n            tween( this.prompt ).to( 0.9 , { scale : new Vec3( 1.0 , 1.0 , 1.0 ) } ) , \n        ).repeatForever().start() ;\n\n\n    }\n\n    public show() {\n        this.root.active = true ; \n    }\n\n    public hide() {\n        this.root.active = false ; \n    }\n\n    private onClick_OK() {\n\n        GirdExpandCtrl.exe() ; \n\n        UiBagTouch.ins.limit.clear() ; \n\n    }\n\n\n}\n\n// 网格扩展控制\nexport class GirdExpandCtrl {\n\n    // 执行扩展\n    public static exe() {\n\n        this.exe2() ; \n\n    }\n\n    private static exe1() {\n\n        GridTraverse.exe( ( cell )=>{\n\n            let a = cell.article ;\n            if( a == null ) return ; \n\n            if( a.isBagExpand == false ) return ;\n\n            for( let cell of a.cells ) {\n                cell.unlocked = true ; \n\n                cell.bg.active = true ; \n                cell.hintPlaceable.active = false ; \n                cell.hintExpandable.active = false ; \n\n            }\n\n            a.view.root.destroy() ; \n            BagArticleGridPlace.unbind( a ) ;\n\n        } ) ;\n\n        // 退出扩展模式\n        GridModeTransition.toNormal() ; \n\n    }\n\n    private static exe2() {\n\n        GridTraverse.exe( ( cell )=>{\n\n            let a = cell.article ;\n            if( a == null ) return ; \n\n            if( a.isBagExpand == false ) return ;\n\n            if( this.isNextToUnlocked( a ) == true ) {\n                this.articleToUnlocked( a ) ;\n            }\n            else {\n                // 退回到托盘\n                BagArticleGridPlace.unbind( a ) ;\n                UiTray.ins.insertArticle( a ) ; \n\n                UiToast.show( UiMain.ins.root , Lang.get( \"Game_Prompt_CannotPlaceBagExpand\" ) ) ; \n            }\n\n        } ) ;\n\n        // 退出扩展模式\n        GridModeTransition.toNormal() ; \n\n    }\n\n    // 物件转换成解锁单元格\n    private static articleToUnlocked( a : BagArticle ) {\n\n        for( let cell of a.cells ) {\n            cell.unlocked = true ; \n\n            cell.bg.active = true ; \n            cell.hintPlaceable.active = false ; \n            cell.hintExpandable.active = false ; \n\n        }\n\n        a.view.root.destroy() ; \n        BagArticleGridPlace.unbind( a ) ;\n\n    }\n\n    // 物件是否紧靠着解锁单元格\n    private static isNextToUnlocked( a : BagArticle ) : boolean {\n\n        for( let cell of a.cells ) {\n            let list = CellExpand.exe4( cell.coord ) ; \n            let idx = list.findIndex( ( e )=>{ return e.unlocked == true } ) ;\n            if( idx != -1 ) {\n                return true ; \n            }\n\n        } // end for\n\n        return false ; \n\n    }\n\n\n}","import { find, Node, Size, size, Tween, tween, UITransform, Vec2, Vec3 } from \"cc\";\nimport { BagGridDraw as BagGridDraw } from \"./BagGridDraw\";\nimport { UiBagGridBg } from \"./UiBagGridBg\";\nimport { Player } from \"../../World/2.Td/Player/Player\";\nimport { GridTraverse } from \"./GridTraverse\";\nimport { UiBagCell } from \"./UiBagCell\";\nimport { UiEffectFade } from \"../../../SL/Cocos/Ui/UiEffect\";\nimport { UiBagCfg } from \"../Main/UiBagCfg\";\nimport { BagArticle } from \"../Article/BagArticle\";\n\n\n// 背包网格\nexport class UiBagGrid {\n\n    public static ins = new UiBagGrid() ; \n\n    public root : Node ; \n\n    // 网格大小\n    public gridSize = new Size( 5 , 7 ) ;\n\n    // 网格\n    public grid = new Array< Array< UiBagCell > >() ;\n\n    // 单元格预制\n    public cellPf : Node ; \n\n    // 原先的位置\n    public posOrig : Vec3 ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.posOrig = this.root.position.clone() ; \n\n        this.cellPf = find( \"Cell\" , node ) ; \n\n        UiBagCfg.ins = new UiBagCfg() ; \n        UiBagCfg.ins.cellSize = this.cellPf.getComponent( UITransform ).contentSize ; \n\n        this.initGrid() ; \n\n        BagGridDraw.exe() ; \n\n        UiBagGridBg.ins.init( this.root.getChildByPath( \"bg\" ) ) ; \n\n    }\n\n    // 初始化网格\n    public initGrid() {\n\n        // 初始化数据结构\n        let size = this.gridSize ; \n        let grid = this.grid ;\n        for( let yCoord = 0 ; yCoord < size.height ; ++yCoord ) {\n\n            let row = new Array< UiBagCell >() ;\n            grid.push( row ) ;\n\n            for( let xCoord = 0 ; xCoord < size.width ; ++xCoord ) {\n\n                let cell = new UiBagCell() ; \n                row.push( cell ) ;\n                cell.unlocked = false ; \n                cell.coord = new Vec2( xCoord , yCoord ) ; \n\n            } // end for\n\n        } // end for\n\n\n        // 设置已经解锁的\n        for( let coord of Player.ins.bag.cells ) {\n            let cell = grid[ coord.y ][ coord.x ] ;\n            cell.unlocked = true ; \n        }\n\n\n    }\n\n    public getCell( coord : Vec2 ) : UiBagCell {\n\n        // 验证坐标是否合法\n        if( coord.x < 0 || coord.y < 0 || \n            coord.x >= this.gridSize.width || coord.y >= this.gridSize.height ) { \n            return null ; \n        }\n\n        return this.grid[ coord.y ][ coord.x ] ; \n\n    }\n\n    // 显示可扩展的\n    public showExpandable() {\n\n        // if( this.showMode == 2 ) return ; \n        // this.showMode = 2 ;\n\n        // 背景扩展\n        UiBagGridBg.ins.entiretyAnim( 0.2 ) ; \n\n        tween( this.root ).delay( 0.2 ).call( ()=>{\n\n            GridTraverse.exe( ( cell : UiBagCell )=>{ \n\n                if( cell.unlocked == false ) {\n                    cell.root.active = true ; \n                    cell.bg.active = false ; \n                    cell.hintExpandable.active = true ; \n                    UiEffectFade.fade( cell.hintExpandable , 0.2 , 0 , 255 ) ;\n                }\n                // cell.hintPlaceable.active = true ; \n\n            } ) ; \n\n        } ).start() ;\n\n        // 物件透明\n        GridTraverse.exe( ( cell : UiBagCell )=>{\n            let a = cell.article ; \n            if( a == null ) return ; \n            UiEffectFade.fade( a.view.root , 0.4 , 255 , 255 * 0.5 ) ; \n\n        } ) ;\n\n    }\n\n    // 显示普通形态\n    public showNormal() {\n\n        // if( this.showMode == 1 ) return ; \n        // this.showMode = 1 ;\n\n        // 停止之前的显示\n        Tween.stopAllByTarget( this.root ) ;\n\n        GridTraverse.exe( ( cell : UiBagCell )=>{ \n\n            if( cell.unlocked == false ) {\n                // 未解锁的\n                cell.root.active = false ; \n            }\n            else {\n                // 解锁的\n                cell.root.active = true ; \n                cell.bg.active = true ; \n                cell.hintExpandable.active = false ; \n                cell.hintPlaceable.active = false ; \n            }\n            // cell.hintPlaceable.active = true ; \n\n            // 物件恢复正常显示\n            let a = cell.article ;\n            if( a != null ) {\n                UiEffectFade.fade( a.view.root , 0.4 , 255 * 0.5 , 255 ) ;\n            }\n\n        } ) ; \n\n        UiBagGridBg.ins.unlockedAnim( 0.2 ) ; \n\n    }\n\n    // 位置对其到背景中心\n    public alignBgCenter( duration = 0.2 ) {\n\n        let pos1 = UiBagGridBg.ins.rect.center ; \n        let offset = new Vec3( pos1.x , pos1.y ) ; \n        let pos = this.posOrig.clone().subtract( offset ) ;\n\n        if( duration == 0 ) {\n            this.root.position = pos ; \n        }\n        else {\n            tween( this.root ).to( duration , { position : pos } ).start() ;\n        }\n        \n\n    }\n\n    // 显示模式\n    private showMode = 1 ; \n}\n\n\n\n\n\n\n\n\n\n","import { math, Node, Rect, size, Size, Tween, tween, UITransform, Vec2, Vec3, Widget } from \"cc\";\nimport { UiBagGrid } from \"./UiBagGrid\";\nimport { GridHelper } from \"./GridHelper\";\nimport { TweenHelper } from \"../../../Common/Misc/TweenHelper\";\n\n// 网格背景\nexport class UiBagGridBg {\n\n    public static ins = new UiBagGridBg() ;\n\n    public rect : Rect ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n    }\n\n    // 包围整体\n    public entirety( duration = 0 ) {\n\n        let rect = GridHelper.getBoundingRectEntirety() ; \n        this.setBg( rect , duration ) ; \n\n    }\n\n    public entiretyAnim( duration = 0.5 ) {\n        this.entirety( duration ) ;\n    }\n\n    // 包围解锁的\n    public unlocked( duration = 0 ) {\n\n        let rect = GridHelper.getBoundingRectUnlocked() ; \n        this.setBg( rect , duration ) ; \n\n    }\n\n    public unlockedAnim( duration = 0.5 ) {\n        this.unlocked( duration ) ;\n    }\n\n    // 设置背景 用包围矩形\n    private setBg( rect : Rect , duration = 0 ) {\n\n        this.rect = rect ; \n\n        let pos = new Vec3( rect.center.x , rect.center.y ) ; \n        let uitrans = this.root.getComponent( UITransform ) ;\n        if( duration == 0 ) {\n            // 直接设置\n            this.root.position = pos ; \n            this.setBgChildrenAlignMode( Widget.AlignMode.ALWAYS ) ;\n            uitrans.setContentSize( rect.size ) ;\n            this.setBgChildrenAlignMode( Widget.AlignMode.ON_WINDOW_RESIZE ) ;\n            \n        }\n        else {\n            // 动画渐变\n\n            this.setBgChildrenAlignMode( Widget.AlignMode.ALWAYS ) ;\n            TweenHelper.contentSize( uitrans , rect.size , duration ) ; \n\n            Tween.stopAllByTarget( this.root ) ;\n            tween( this.root ).to( duration , { position : pos } ).call( ()=>{\n                // console.log( \"测试回调\" ) ; \n                this.setBgChildrenAlignMode( Widget.AlignMode.ON_WINDOW_RESIZE ) ;\n            } ).start() ;\n            \n            \n        }\n\n    }\n\n    private setBgChildrenAlignMode( mode = Widget.AlignMode.ON_WINDOW_RESIZE ) {\n        let list = this.root.getComponentsInChildren( Widget ) ;\n        for( let w of list ) {\n            w.alignMode = mode ; \n        }\n    }\n\n}\n\n","import { instantiate, Label, Node, Size, Sprite, Tween, tween, UITransform, Vec3 } from \"cc\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { NodeSizeFit } from \"../../../SL/Cocos/Ui/NodeSizeFit\";\nimport { ArticleString } from \"../../../Common/String/ArticleString\";\nimport { CfgArticle, CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { UiBagPrefab } from \"./UiBagPrefab\";\nimport { BagArticleGradeHelper } from \"../../../Game/Bag/Article/BagArticleGradeHelper\";\n\nexport class UiBagItem {\n\n    public articleId : string ; \n\n    public root : Node ; \n\n    // 名字\n    public name : Label ; \n\n    // 图标\n    public icon : Sprite ; \n\n    // 等级\n    public grade : Label ; \n\n    // 背包形状\n    public shape : Node ; \n\n    public updateFragment : UiBagItemUpgradeFragment ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n\n        this.icon = this.root.getChildByPath( \"Icon\" ).getComponent( Sprite ) ; \n\n        this.grade = this.root.getChildByPath( \"Grade/val\" ).getComponent( Label ) ; \n\n        this.shape = this.root.getChildByPath( \"Shape\" ) ; \n\n        let node2 = this.root.getChildByPath( \"Fragment\" ) ; \n        if( node2 != null ) {\n            this.updateFragment = new UiBagItemUpgradeFragment() ; \n            this.updateFragment.init( node2 );\n        }\n\n\n    }\n\n    public refresh() {\n\n        // 名字\n        this.name.string = ArticleString.getName( this.articleId ) ;  \n\n        // 图标\n        let pf = PfMgrBagArticle.getPf( this.articleId ) ;\n        this.icon.spriteFrame = pf.getChildByPath( \"Main\" ).getComponent( Sprite ).spriteFrame ; \n        NodeSizeFit.set( this.icon.node , this.icon.spriteFrame.originalSize ) ;\n        \n        // 等级\n        let cfg = CfgArticleMgr.data.get( this.articleId ) ; \n        let n = 1 ;\n        if( Account.ins.bag.grade.has( cfg.gradeLineId ) == true ) {\n            n = Account.ins.bag.grade.get( cfg.gradeLineId ) ; \n        }\n        this.grade.string = \"等级\" + n.toString() ; \n\n        // 形状\n        let pfShape = UiBagPrefab.ins.root.getChildByPath( \"Shape/\" + cfg.bagShapeId ) ; \n        if( pfShape != null )  {\n\n            let node = instantiate( pfShape ) ; \n            node.name = \"Shape\" ; \n            node.setParent( this.shape , false ) ;\n            node.position = Vec3.ZERO ; \n\n        }\n\n        if( this.updateFragment != null ) {\n            this.updateFragment.articleId = this.articleId ; \n            this.updateFragment.refresh() ; \n        }\n\n    }\n\n}\n\n// 升级所需碎片\nexport class UiBagItemUpgradeFragment {\n\n    public articleId : string ; \n\n    public root : Node ; \n\n    // 进度条\n    public bar : Sprite ; \n\n    // 拥有个数\n    public count : Label ; \n\n    public icon : Node ; \n\n    // 可升级标志\n    public upgradeable : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.bar = this.root.getChildByPath( \"bar\" ).getComponent( Sprite ) ; \n        this.bar.fillRange = 0 ;\n\n        this.count = this.root.getChildByPath( \"val\" ).getComponent( Label ) ;\n        this.count.string = \"0/0\" ; \n\n        this.upgradeable = this.root.getChildByPath( \"Upgradeable\" ) ; \n        this.upgradeable.active = false ; \n\n        this.icon = this.root.getChildByPath( \"Icon\" ) ; \n        \n\n    }\n\n    public refresh() {\n \n        let cfgGradeItem = BagArticleGradeHelper.getCfgCurrent( this.articleId ) ;\n\n        // 个数数字\n        let n = Account.ins.items.get( cfgGradeItem.upgrade.itemId ) ; \n        if( n == null ) { n = 0 ; }\n        this.count.string = n + \"/\" + cfgGradeItem.upgrade.itemCount ; \n        \n        // 进度条\n        this.bar.fillRange = n / cfgGradeItem.upgrade.itemCount ; \n\n        if( n >= cfgGradeItem.upgrade.itemCount ) {\n            // 可升级\n            this.upgradeable.active = true ; \n            this.playAnimUpgradeable() ; \n        }\n        else {\n            this.upgradeable.active = false ; \n            // this.icon.active = true ; \n        }\n\n    }\n\n    // 播放动画\n    public playAnimUpgradeable() {\n\n        let node = this.upgradeable ; \n\n        if( node[ \"tween\" ] == true ) { return ; }\n        node[ \"tween\" ] = true ; \n\n        Tween.stopAllByTarget( node ) ; \n\n        let pos1 = node.position.clone().add3f( 0 , 10 , 0 ) ; \n        let pos2 = node.position.clone().add3f( 0 , -10 , 0 ) ; \n        tween( node ).sequence(\n            tween( node ).to( 0.5 , { position : pos1 } ) , \n            tween( node ).to( 0.5 , { position : pos2 } ) , \n        ).repeatForever().start() ;         \n\n    }\n\n}","import { Label, Node, Sprite } from \"cc\";\nimport { UiBagItem } from \"./UiBagItem\";\nimport { CfgArticleUnlock } from \"../../../Common/Cfg/CfgArticleUnlock\";\n\n// 锁定的背包项\nexport class UiBagItemLocked extends UiBagItem {\n\n    // 解锁信息\n    public unlockInfo : Label ; \n\n    public override init( node : Node ) : void {\n\n        super.init( node ) ; \n\n        this.unlockInfo = this.root.getChildByPath( \"UnlockInfo\" ).getComponent( Label ) ;\n\n    }\n\n    public override refresh() : void {\n        super.refresh() ;\n\n        // 形状设置灰色\n        let shape = this.shape.getChildByPath( \"Shape\" ) ; \n        for( let node of shape.children ) {\n            node.getComponent( Sprite ).grayscale = true ; \n            \n        }\n\n        this.refreshUnlockInfo() ; \n\n    }\n\n    public refreshUnlockInfo() {\n\n        // 通过关卡解锁\n        let cfgArticleUnlockItem = CfgArticleUnlock.data.get( this.articleId ) ; \n        if( cfgArticleUnlockItem != null ) {\n\n            let str = \"通过章节{1}解锁\" ; \n            str = str.replace( \"{1}\" , cfgArticleUnlockItem.levelIdx.toString() ) ; \n            this.unlockInfo.string = str ; \n\n            return ;\n\n\n        }\n\n    }\n\n    \n}","import { Input, instantiate, Node, Sprite, Vec3 } from \"cc\";\nimport { UiBagItem } from \"./UiBagItem\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { UiBagPrefab } from \"./UiBagPrefab\";\nimport { UiBagArticleDetail } from \"./ArticleDetail/UiBagArticleDetail\";\nimport { UiMain } from \"../Main/UiMain\";\nimport { CfgGeneral } from \"../../../Common/Cfg/CfgGeneral\";\nimport { UiBagItemLocked } from \"./UiBagItemLocked\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\n\n// 已获得的。显示的是 已经获得的，并且未上阵的。\nexport class UiBagLocked {\n\n    public root : Node ; \n\n    public items = new Array< UiBagItem >() ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        // this.list = this.root.getChildByPath( \"List\" ) ; \n        \n\n        this.refresh() ; \n\n    }\n\n    public refresh() {\n\n        this.items.splice( 0 , this.items.length ) ; \n        this.root.removeAllChildren() ; \n        \n        let all = CfgGeneral.ins.BagAllArticleIds.slice() ; \n\n        // 剔除 获得的\n        let unlocked = Account.ins.bag.unlocked ; \n        let list = all.filter( item => !unlocked.includes(item) ) ;\n        // 剔除 上阵的\n        let deploy = Account.ins.bag.deploy ; \n        list = list.filter( item => !deploy.includes(item) )\n\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let uiItem = new UiBagItemLocked() ; \n            this.items.push( uiItem ) ;\n            uiItem.init( instantiate( UiBagPrefab.ins.itemLocked ) ) ;\n            uiItem.root.active = true ; \n            uiItem.root.setParent( this.root , false ) ;\n            uiItem.articleId = list[ i ] ;\n            uiItem.refresh() ; \n\n            uiItem.root.on( Input.EventType.TOUCH_END , ()=>{\n                this.onClick_Item( uiItem ) ;\n            } ) ;\n\n        } // end for\n\n        SoundBtnClickSetter.exe( this.root ) ;\n        \n    }\n\n    private onClick_Item( uiItem : UiBagItemLocked ) {\n\n        let uiDetail = UiBagArticleDetail.create( UiMain.ins.root ) ;\n        uiDetail.articleId = uiItem.articleId ; \n        uiDetail.name.string = uiItem.name.string ; \n        uiDetail.refresh() ; \n        uiDetail.show() ; \n        uiDetail.btnList.setShowModeAsUnlocked() ; \n\n        let item = uiDetail.root.getChildByPath( \"Item\" ) ; \n        let itemRoot = instantiate( uiItem.root ) ;\n        itemRoot.scale = new Vec3( 1.2 , 1.2 , 1.2 ) ; \n        itemRoot.setParent( item.parent , false ) ;\n        itemRoot.position = item.position ; \n        item.destroy() ; \n        let uiItem2 = new UiBagItem() ; \n        uiDetail.item = uiItem2 ; \n        uiItem2.init( itemRoot ) ; \n        uiItem2.name.node.active = false ; \n        uiItem2.articleId = uiItem.articleId ; \n        uiItem2.refresh() ; \n\n        // 不显示按钮，显示解锁条件\n        uiDetail.btnList.root.active = false ; \n        uiDetail.unlockedInfo.node.active = true ; \n        uiDetail.unlockedInfo.string = uiItem.unlockInfo.string ;\n\n    }\n\n}","import { Node } from \"cc\";\n\nexport class UiBagPrefab {\n\n    public static ins : UiBagPrefab = null ; \n\n    public root : Node ; \n\n    // 品质1-4\n    // public item1 : Node ; \n    // public item2 : Node ; \n    // public item3 : Node ; \n    // public item4 : Node ; \n    public items = new Array< Node >() ;\n\n    public itemLocked : Node ; \n\n    public itemEmpty : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        for( let i = 1 ; i <=4 ; ++i ) {\n            let node = this.root.getChildByPath( \"Item\" + i ) ;\n            this.items.push( node ) ;\n        }\n\n        // this.item1 = this.root.getChildByPath( \"Item1\" ) ;\n        // this.item2 = this.root.getChildByPath( \"Item2\" ) ;\n        // this.item3 = this.root.getChildByPath( \"Item3\" ) ;\n        // this.item4 = this.root.getChildByPath( \"Item4\" ) ;\n        this.itemLocked = this.root.getChildByPath( \"ItemLocked\" ) ;\n\n        this.itemEmpty = this.root.getChildByPath( \"ItemEmpty\" ) ;\n\n    }\n\n\n\n}","import { Node } from \"cc\";\n\nexport class UiBagReplace {\n\n    public root : Node ; \n\n    public item : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.item = this.root.getChildByPath( \"Item\" ) ;\n\n    }\n\n}","import { EventTouch, Input, instantiate, Node, UIOpacity, UITransform, Vec2, Vec3 } from \"cc\";\nimport { UiTray } from \"../Main/UiTray\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { HitTest } from \"./HitTest\";\nimport { GridHint } from \"../Grid/GridHint\";\nimport { GestureClick } from \"./GestureArticleInfo\";\nimport { GridModeTransition } from \"../Grid/GridModeTransition\";\nimport { UiMain } from \"../../Ui/Main/UiMain\";\nimport { BagArticleGridPlaceByPos } from \"../Article/BagArticleGridPlaceByPos\";\nimport { MergeHybridHint, MergeHybridHintMgr } from \"../Merge/MergeHybridHint\";\nimport { MergeHint } from \"../Merge/MergeHint\";\nimport { TowerAuraHint } from \"./AuraHint\";\nimport { WorldNode } from \"../../World/1.Base/Support/Misc/WorldNode\";\nimport { UiDialog } from \"../../../Common/Ui/UiDialog\";\nimport { Ad } from \"../../../Common/Ad/Ad\";\nimport { UiArticleDetail } from \"../ArticleDetail/UiArticleDetail\";\n\n// 触摸\nexport class UiBagTouch {\n\n    public static ins : UiBagTouch = null ; \n\n    // 在即将选中物品，返回值 false 取消选择。\n    public onBeforeArticleSelect : ( article : BagArticle )=>boolean = null ; \n\n    // 放置之前。返回值 false 终止操作\n    public onBeforeArticlePlace : ( article : BagArticle )=>boolean = null ; \n\n    // 放置完成\n    public onCompleteArticlePlace : ( article : BagArticle )=>void = null ; \n\n\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.root.on( Input.EventType.TOUCH_START , this.onTouchStart , this ) ;\n        this.root.on( Input.EventType.TOUCH_MOVE , this.onTouchMove , this ) ;\n        this.root.on( Input.EventType.TOUCH_END , this.onTouchEnd , this ) ;\n        this.root.on( Input.EventType.TOUCH_CANCEL , this.onTouchEnd , this ) ;\n\n        MergeHybridHintMgr.ins = new MergeHybridHintMgr() ; \n\n    }\n\n    private onTouchStart( event : EventTouch ) {\n\n        let pos = event.getUILocation() ;\n\n        let article = HitTest.hit( pos ) ;\n        if( article == null ) {\n            return ;\n        }\n\n        if( this.onBeforeArticleSelect != null ) {\n            if( this.onBeforeArticleSelect( article ) == false ) return ; \n        }\n\n        // 操作限制\n        if( this.limit.article != null ) {\n            if( this.limit.article != article ) return ; \n        }\n\n        if( article.isBagExpand == true ) {\n            GridModeTransition.toExpandable() ; \n            this.limit.limit( article ) ;\n        }\n\n        this.gestureClick.rest() ;\n        this.gestureClick.start( pos ) ; \n\n        this.articleSel = article ; \n\n        // 在最上层显示\n        if( article.view.root.parent == UiTray.ins.root ) {\n            // 在托盘上的\n            article.view.root.setSiblingIndex( 999 ) ;\n        }\n        else {\n            // 在网格中的\n            article.view.root.setParent( WorldNode.ins.layer2 , true ) ; \n        }\n\n        MergeHybridHintMgr.ins.clearAllLines() ; \n\n        MergeHybridHintMgr.ins.hideShape( article ) ; \n\n        MergeHint.mergeable( article ) ;\n\n    }\n\n    private onTouchMove( event : EventTouch ) {\n\n        if( this.articleSel == null ) return ; \n\n        // 移动\n        let pos = event.getUILocation() ; \n        let pos2 = new Vec3( pos.x , pos.y ) ;\n        this.articleSel.view.root.worldPosition = pos2 ; \n\n        // 清除提示\n        GridHint.hintPlaceableClear() ; \n        // 匹配网格单元格\n        let cells = BagArticleGridPlaceByPos.getCellsPlace( this.articleSel ) ;\n        if( cells != null ) {\n            // 可放置\n            GridHint.hintPlaceableShow( cells ) ;\n\n        }\n\n        // 光环影响提示\n        this.towerAuraHint.exe( this.articleSel , cells ) ; \n\n        this.gestureClick.move( pos ) ;\n\n    }\n\n    private onTouchEnd( event : EventTouch ) {\n\n        if( this.articleSel == null ) return ; \n\n        // 如论什么情况，选中的最终都要释放\n        let articleSel = this.articleSel ; \n        this.articleSel = null ;\n\n        if( articleSel.view.adTag != null ) {\n            // 广告解锁\n            this.adGet( articleSel ) ;\n            return ; \n        }\n\n        if( this.onBeforeArticlePlace?.( articleSel ) == false ) {\n            return ; \n        } \n\n        this.articlePlace( articleSel ) ; \n\n        this.onCompleteArticlePlace?.( articleSel ) ; \n\n    }\n\n    // 放置物件\n    private articlePlace( articleSel : BagArticle ) {\n\n        if( this.gestureClick.getVal() ) {\n            this.showArticleInfo( articleSel ) ; \n        }\n\n        BagArticleGridPlaceByPos.exe( articleSel ) ; \n\n        MergeHybridHintMgr.ins.exe() ; \n\n        this.towerAuraHint.place( ) ; \n\n        MergeHint.restore( ) ;\n\n    }\n\n    // 物件返回托盘\n    private articleGotoTray( articleSel : BagArticle ) {\n\n        UiTray.ins.insertArticle( articleSel ) ; \n        \n        // 清除可放置提示\n        GridHint.hintPlaceableClear() ; \n\n        MergeHybridHintMgr.ins.exe() ; \n\n        // 清除光环提示\n        this.towerAuraHint.clear( ) ; \n\n        MergeHint.restore( ) ;\n\n    }\n\n    // 看广告获得物件\n    private adGet( articleSel : BagArticle ) {\n\n        let uiDialog = UiDialog.create( UiMain.ins.root , \"是否观看视频获得该物品\" ) ; \n        uiDialog.btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.articleGotoTray( articleSel ) ; \n        } ) ; \n        uiDialog.btnOK.on( Input.EventType.TOUCH_END , ()=>{\n\n            let cancel = ()=>{\n                this.articleGotoTray( articleSel ) ; \n            } ;\n\n            let complete = ()=>{\n                articleSel.view.adTag.destroy() ; \n                articleSel.view.adTag = null ; \n\n                this.articlePlace( articleSel ) ; \n\n            } ;\n\n            Ad.ins.rewardShow( complete , cancel , cancel ) ;\n\n        } ) ;\n\n    }\n\n    private showArticleInfo( article : BagArticle ) {\n\n        // 扩展格子 不显示详情\n        if( article.isBagExpand ) return ; \n\n        let uiAricleDetail = UiArticleDetail.ins ;\n        uiAricleDetail.root.setParent( UiMain.ins.root );\n        uiAricleDetail.show() ; \n        uiAricleDetail.refresh( article ) ;\n\n    }\n\n    public limit = new TouchLimit() ; \n\n    // 当前操作的物品\n    private articleSel : BagArticle = null ; \n\n    private gestureClick = new GestureClick() ; \n    \n    public towerAuraHint = new TowerAuraHint() ;\n\n}\n\n\nexport class TouchLimit {\n\n    public limit( a : BagArticle ) {\n        this.article = a ;\n\n        // 托盘物品设置透明度\n        let list = UiTray.ins.articles ; \n        for( let a2 of list ) {\n            if( a2 == a ) continue ; \n            let opa = a2.view.root.getComponent( UIOpacity ) ;\n            if( opa == null ) {\n                opa = a2.view.root.addComponent( UIOpacity ) ;\n            }\n            opa.opacity = 150 ; \n        }\n\n    }\n\n    // 解除限制\n    public clear() {\n\n        this.article = null ; \n\n        let list = UiTray.ins.articles ; \n        for( let a2 of list ) {\n            let opa = a2.view.root.getComponent( UIOpacity ) ;\n            if( opa == null ) continue ; \n            opa.destroy() ; \n        }\n\n    }\n\n    public article : BagArticle = null ; \n\n}","import { Input, instantiate, Node, Vec3 } from \"cc\";\nimport { UiBagItem } from \"./UiBagItem\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { UiBagPrefab } from \"./UiBagPrefab\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { UiBagArticleDetail } from \"./ArticleDetail/UiBagArticleDetail\";\nimport { UiMain } from \"../Main/UiMain\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\n\n// 已获得的。显示的是 已经获得的，并且未上阵的。\nexport class UiBagUnlocked {\n\n    public root : Node ; \n\n    public items = new Array< UiBagItem >() ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        // this.list = this.root.getChildByPath( \"List\" ) ; \n        \n\n        this.refresh() ; \n\n    }\n\n    public refresh() {\n\n        this.items.splice( 0 , this.items.length ) ; \n\n        this.root.removeAllChildren() ; \n        \n        let ready = Account.ins.bag.deploy ; \n        let unlocked = Account.ins.bag.unlocked ; \n        let list = unlocked.filter( item => !ready.includes(item) ) ;\n\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let id = list[ i ] ; \n\n            let q = CfgArticleMgr.data.get( id ).quality ; \n            let pf = UiBagPrefab.ins.items[ q - 1 ] ; \n            \n            let uiItem = new UiBagItem() ; \n            this.items.push( uiItem ) ; \n            uiItem.init( instantiate( pf ) ) ;\n            uiItem.root.active = true ; \n            uiItem.root.setParent( this.root , false ) ;\n            uiItem.articleId = list[ i ] ;\n            uiItem.refresh() ; \n            \n            uiItem.root.on( Input.EventType.TOUCH_END , ()=>{\n                this.onClick_Item( uiItem ) ;\n            } ) ;\n\n        } // end for\n\n        SoundBtnClickSetter.exe( this.root ) ;\n        \n    }\n\n    private onClick_Item( uiItem : UiBagItem ) {\n\n        let uiDetail = UiBagArticleDetail.create( UiMain.ins.root ) ;\n        uiDetail.articleId = uiItem.articleId ; \n        uiDetail.name.string = uiItem.name.string ; \n        uiDetail.refresh() ; \n        uiDetail.show() ; \n        uiDetail.btnList.setShowModeAsUnlocked() ; \n\n        let item = uiDetail.root.getChildByPath( \"Item\" ) ; \n        let itemRoot = instantiate( uiItem.root ) ;\n        itemRoot.scale = new Vec3( 1.2 , 1.2 , 1.2 ) ; \n        itemRoot.setParent( item.parent , false ) ;\n        itemRoot.position = item.position ; \n        item.destroy() ; \n        let uiItem2 = new UiBagItem() ; \n        uiDetail.item = uiItem2 ; \n        uiItem2.init( itemRoot ) ; \n        uiItem2.name.node.active = false ; \n        uiItem2.articleId = uiItem.articleId ; \n        uiItem2.refresh() ; \n\n    }\n\n}","import { Node, Sprite } from \"cc\";\n\nexport class UiBar {\n\n    public root : Node ; \n\n    public bar : Sprite ; \n\n    public init( root : Node ) {\n        \n        this.root = root ;\n        this.bar = this.root.getChildByPath( \"bar\" ).getComponent( Sprite ) ;\n\n    }\n\n    // 设置进度\n    public setProgress( current : number , max : number ) {\n        this.bar.fillRange = current / max ;\n    }\n\n}","import { Node, Sprite, Tween, tween } from \"cc\";\n\n\n\n// 条。根节点本身就是 bar。\nexport class UiBar2 {\n\n    public root : Node ; \n\n    public bar : Sprite ; \n\n    public init( root : Node ) {\n        \n        this.root = root ;\n        this.bar = this.root.getComponent( Sprite ) ;\n\n    }\n\n    // 设置进度 0-1的值\n    public setProgress( val : number ) {\n        this.bar.fillRange = val ;\n    }\n\n    // 动画显示\n    public anim( val : number , duration : number ) {\n\n        Tween.stopAllByTarget( this.bar ) ; \n        tween( this.bar ).to( duration , { fillRange : val } ).start() ;\n\n    }\n\n}","import { director, Input, Node } from \"cc\";\nimport { UiLevel } from \"./UiLevel\";\nimport { UiLeft } from \"./UiLeft\";\nimport { UiRight } from \"./UiRight\";\n\n// 战斗页面\nexport class UiBattle {\n\n    public static ins = new UiBattle() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        UiLevel.ins = new UiLevel() ; \n        UiLevel.ins.init( this.root.getChildByPath( \"Level\" ) ) ;\n\n        UiLeft.ins.init(this.root.getChildByPath( \"Left\" ));\n\n        UiRight.ins.init(this.root.getChildByPath(\"Right\"));\n\n    }\n\n}","import { Node } from \"cc\";\r\n\r\n// 背景 用于表达品质\r\nexport class UiBgQuality {\r\n\r\n    public root : Node ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n    }\r\n\r\n    // 品质 从1开始。1最低级\r\n    public show( val : number ) {\r\n\r\n        let children = this.root.children ; \r\n        for( let child of children ) {\r\n            child.active = false ; \r\n        } // end for\r\n\r\n        let idx = val - 1 ; \r\n        if( children.length <= idx ) {\r\n            // 超出下标\r\n            console.log( \"UiBgQuality.show 超出下标\" ) ;\r\n            return ; \r\n        }\r\n        children[ idx ].active = true ; \r\n\r\n    }\r\n\r\n}","import { Node } from \"cc\";\nimport { UiTabHeaderBottom } from \"../../../SL/Cocos/Ui/UiTabHeader\";\nimport { UiBag } from \"../Bag/UiBag\";\nimport { UiBattle } from \"./Page/Battle/UiBattle\";\nimport { UiShop } from \"./Page/Shop/UiShop\";\nimport { Test1 } from \"./Page/Test1/Test1\";\nimport { Test2 } from \"./Page/Test2/Test2\";\n\n// Tab页 \nexport class UiBottomTabPage {\n\n    public static ins : UiBottomTabPage = null ; \n\n    public root : Node ; \n\n    public thb = new UiTabHeaderBottom() ; \n\n    // 各个页面的根节点\n    public page : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.initPage() ; \n\n        this.initTabHeader() ; \n\n        // 初始显示的页面\n        this.thb.show( \"Battle\" ) ; \n        UiBattle.ins.root.active = true ; \n\n    }\n\n    private initPage() {\n\n        this.page = this.root.getChildByPath( \"Page\" ) ;\n\n        UiBag.create() ;\n        UiBag.ins.root.setParent( this.page , false ) ; \n        UiBag.ins.root.active = false ; \n\n        UiBattle.ins.init( this.root.getChildByPath( \"Page/Battle\" ) ) ;\n        UiBattle.ins.root.active = false ; \n        // console.log( \"UiBattle\" ) ;\n\n        UiShop.ins.init( this.root.getChildByPath( \"Page/Shop\" ) ) ; \n        UiShop.ins.root.active = false ; \n        // console.log( \"UiShop\" ) ;\n\n        Test1.ins.init( this.root.getChildByPath( \"Page/Test001\" ) ) ; \n        Test1.ins.root.active = false ; \n        // console.log( \"Test1\" ) ;\n\n        Test2.ins.init( this.root.getChildByPath( \"Page/Test002\" ) ) ; \n        Test2.ins.root.active = false ; \n        // console.log( \"Test2\" ) ;\n\n    }\n\n    private initTabHeader() {\n\n        let thb = this.thb = new UiTabHeaderBottom() ; \n        thb.init( this.root.getChildByPath( \"BottomTabHeader\" ) ) ; \n        thb.onSelectChange = ( item )=>{\n\n            let name = item.root.name ;\n            switch( name ) {\n\n                case \"Battle\" : {\n                    // hideAll() ; \n                    UiBattle.ins.root.active = true ; \n                    UiBattle.ins.root.setSiblingIndex( 10 ) ; \n                }\n                break ; \n\n                case \"Bag\" : {\n                    // hideAll() ; \n                    UiBag.ins.root.active = true ; \n                    UiBag.ins.root.setSiblingIndex( 10 ) ; \n                    // UiBag.ins.show();\n                }   \n                break ;\n\n                case \"Shop\" : {\n                    // hideAll() ; \n                    UiShop.ins.root.active = true ; \n                    UiShop.ins.root.setSiblingIndex( 10 ) ; \n                }\n                break ; \n\n                case \"Test001\" : {\n                    this.hideAllPages() ; \n                    Test1.ins.root.active = true ; \n                }\n                break ; \n\n                case \"Test002\" : {\n                    this.hideAllPages() ; \n                    Test2.ins.root.active = true ; \n                }\n                break ; \n            }\n\n        } ;\n\n    }\n\n    private hideAllPages() {\n\n        UiBattle.ins.root.active = false ; \n        UiBag.ins.root.active = false ; \n        UiShop.ins.root.active = false ; \n        Test1.ins.root.active = false ; \n        Test2.ins.root.active = false ; \n\n    }\n\n}","import { Input, input, instantiate, Node, Prefab, Rect, resources, RichText, Size, UITransform } from \"cc\";\n\n\nexport class UiBubble {\n\n    public static pf : Prefab ; \n\n    public static loadAndCreate( cb : ( ui : UiBubble )=>void ) {\n\n        resources.load( \"Common/Ui/Bubble\" , Prefab , ( err , data )=>{\n\n            let ui = new UiBubble() ; \n            ui.init( instantiate( data ) ) ;\n            // ui.root.setParent( parent ) ;\n            // ui.txt.string = str ; \n            cb?.( ui ) ;\n\n        } ) ;\n\n    }\n\n    public static create() : UiBubble {\n\n        let ui = new UiBubble() ; \n        ui.init( instantiate( this.pf ) ) ;\n        return ui ; \n\n    }\n\n    public root : Node ;\n\n    public bg : Node ; \n\n    public txt : RichText ; \n\n    public init( node : Node )  {\n\n        this.root = node ; \n\n        this.bg = this.root.getChildByPath( \"bg\" ) ;\n        this.bgTrans = this.bg.getComponent( UITransform ) ; \n\n        this.txt = this.root.getComponentInChildren( RichText ) ; \n        this.txtTrans = this.txt.getComponent( UITransform ) ; \n\n        this.hDiff = this.bgTrans.contentSize.height - this.txtTrans.contentSize.height ; \n\n    }\n\n    // 点击就销毁\n    public clickToDestroy() {\n\n        this.root.getComponent( UITransform ).setContentSize( new Size( 5000 , 5000 ) ) ;\n        this.root.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n        } ) ;\n\n    }\n\n    public setString( str : string ) {\n\n        this.txt.string = str ; \n        this.refreshSize() ; \n\n    }\n\n    // 刷新高度\n    public refreshSize() {\n\n        let h = this.txtTrans.contentSize.height + this.hDiff ;\n        let size = this.bgTrans.contentSize.clone() ;\n        size.height = h ; \n        this.bgTrans.contentSize = size ; \n\n    }\n\n    private bgTrans : UITransform ; \n    private txtTrans : UITransform ; \n\n    private hDiff : number ; \n\n}","import { Input, input, instantiate, Node, Prefab, Sprite, resources, RichText, Size, UITransform, _decorator,Component } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('UiBubbleWithIcon')\nexport class UiBubbleWithIcon  extends Component {\n\n    public static pf : Prefab ; \n\n    public static loadAndCreate( cb : ( ui : UiBubbleWithIcon )=>void ) {\n\n        resources.load( \"Common/Ui/BubbleWithIcon\" , Prefab , ( err , data )=>{\n\n            let ui = new UiBubbleWithIcon() ; \n            ui.init( instantiate( data ) ) ;\n           \n            // ui.root.setParent( parent ) ;\n            // ui.txt.string = str ; \n            cb?.( ui ) ;\n\n        } ) ;\n\n    }\n\n\n    public root : Node ;\n\n    public bg : Node ; \n\n    @property(Sprite)\n    public sp: Sprite\n\n    @property(RichText)\n    public txt : RichText ; \n\n    public init( node : Node )  {\n        this.root = node ; \n\n    }\n\n    public set_text(template: string, values: any[]|undefined = undefined) {\n        let tp = '<outline color=#000000 width=5><color=#00ff00>{}</color></outline>'\n        \n        let outer = '<b><outline color=#000000 width=5><color=#ffffff>{}</color></outline></b>'\n\n        let result = template\n        if (values) {\n            result = values.reduce((acc, value) => {\n                let p = tp.replace('{}', value)\n                return acc.replace('{}', p)\n                \n            }, template);\n        }\n        \n        result = outer.replace('{}', result)\n        this.txt.string = result;\n    }\n\n\n\n}","import { instantiate } from \"cc\";\r\nimport { UiPopupBase } from \"../../../../Common/Ui/UiPopupBase\";\r\nimport { Node } from \"cc\";\r\nimport { Label } from \"cc\";\r\nimport { Lang } from \"../../../../Common/Misc/Lang\";\r\nimport { UiItemList } from \"../../../../Common/Item/UiItemList\";\r\nimport { ItemData } from \"../../../../Common/Item/ItemData\";\r\nimport { Sprite } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { DailyCheckinData, DailyCheckinDataPersist } from \"./DailyCheckinData\";\r\nimport { UiGet } from \"../UiGet\";\r\nimport { CfgDailyCheckin } from \"./CfgDailyCheckin\";\r\nimport { UiMain } from \"../../Main/UiMain\";\r\nimport { ItemGet } from \"../../../../Common/Item/ItemGet\";\r\nimport { UiStamina } from \"../../Main/Margin/UiStamina\";\r\nimport { UiMoney001 } from \"../../Main/Margin/UiMoney001\";\r\nimport { UiMoney002 } from \"../../Main/Margin/UiMoney002\";\r\nimport { Ad } from \"db://assets/Script/Common/Ad/Ad\";\r\n\r\nexport class UiDailyCheckin extends UiPopupBase {\r\n\r\n    public static create( parent : Node ) : UiDailyCheckin {\r\n\r\n        let root = instantiate( this.pf ) ;\r\n        let ui = new UiDailyCheckin() ;\r\n        ui.init( root ) ; \r\n        ui.root.setParent( parent , false ) ; \r\n        return ui ; \r\n\r\n    }\r\n\r\n    public items = new Array< UiDailyCheckinItem >() ; \r\n\r\n    public btnGet : Node ; \r\n    public btnGetAd : Node ;\r\n    public claimedToday : Node ; \r\n\r\n    public override init( node : Node ) {\r\n\r\n        super.init( node ) ;\r\n\r\n        // 领取按钮 \r\n\r\n        this.btnGet = this.root.getChildByPath( \"BtnList/btnGet\" ) ;\r\n        this.btnGet.on( Input.EventType.TOUCH_END , this.onClick_Get , this ) ;\r\n\r\n        this.btnGetAd = this.root.getChildByPath( \"BtnList/btnGetAd\" ) ;\r\n        this.btnGetAd.active = false ; \r\n        this.btnGetAd.on( Input.EventType.TOUCH_END , this.onClick_GetAd , this ) ;\r\n\r\n        this.claimedToday = this.root.getChildByPath( \"BtnList/ClaimedToday\" ) ;\r\n        this.claimedToday.active = false ; \r\n\r\n\r\n        let list = this.root.getChildByPath( \"List\" ) ;\r\n        for( let i = 0 ; i < list.children.length ; ++i ) {\r\n\r\n            let uiItem = new UiDailyCheckinItem() ; \r\n            uiItem.init( list.children[ i ] ) ;\r\n            this.items.push( uiItem ) ; \r\n\r\n            // 显示天数\r\n            uiItem.title.string = Lang.get( \"DailyCheckin_DayX\" ).replace( \"{1}\" , ( i + 1 ).toString() ) ;\r\n\r\n            // 显示奖励图标\r\n            let rewardData = CfgDailyCheckin.data[ i ] ; \r\n            uiItem.refreshReward( rewardData ) ; \r\n\r\n        } // end for\r\n\r\n        this.refresh() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        this.refreshBtn() ; \r\n\r\n        this.refreshListClaimState() ; \r\n\r\n    }\r\n\r\n    // 刷新按钮状态\r\n    public refreshBtn() {\r\n\r\n        this.btnGet.active = false ; \r\n        this.btnGetAd.active = false ; \r\n        this.claimedToday.active = false ; \r\n\r\n        let isTodayCheckin = DailyCheckinData.ins.isTodayCheckin() ; \r\n        if( isTodayCheckin ) {\r\n            this.claimedToday.active = true ; \r\n            return ; \r\n        }\r\n\r\n        this.btnGet.active = true ; \r\n        this.btnGetAd.active = true ; \r\n\r\n    }\r\n\r\n    // 刷新列表领取状态\r\n    public refreshListClaimState() {\r\n\r\n        let isTodayCheckin = DailyCheckinData.ins.isTodayCheckin() ; \r\n        let n1 = 0 , n2 = 0 ; \r\n        if( isTodayCheckin ) {\r\n            // 今日已签\r\n            n1 = DailyCheckinData.ins.count % 7 ;\r\n            if( n1 == 0 ) {\r\n                n1 = 7 ;\r\n            }\r\n            n2 = n1 ; \r\n\r\n        }\r\n        else {\r\n            // 今日未签\r\n            n1 = DailyCheckinData.ins.count % 7 ; \r\n            n2 = n1 + 1 ; \r\n\r\n            // 可签部分\r\n            this.items[ n1 ].setClaimable() ; \r\n\r\n        }\r\n\r\n        // 已签的部分\r\n        for( let i = 0 ; i < n1 ; ++i ) {\r\n            this.items[ i ].setClaimed() ; \r\n        } // end for\r\n\r\n        // 不能签的部分\r\n        for( let i = n2 ; i < this.items.length ; ++i ) {\r\n            this.items[ i ].setNotClaimable() ; \r\n        }\r\n\r\n    }\r\n\r\n    // 领取\r\n    private onClick_Get() {\r\n        this.get( 1 ) ; \r\n    }\r\n\r\n    private onClick_GetAd() {\r\n\r\n        let onSuccess = ()=>{\r\n            this.get( 2 ) ; \r\n        } ;\r\n        Ad.ins.rewardShow( onSuccess ) ;\r\n\r\n    }\r\n\r\n    // 得到物品\r\n    private get( multiple : number = 1 ) {\r\n\r\n        let item = this.items.find( ( e )=>{ return e.claimType == ClaimType.Claimable ; } ) ; \r\n        if( item == null ) return ; \r\n        let rewardData = item.rewardData ; \r\n        if( multiple > 1 ) {\r\n            // 2倍以上。复制一个列表处理，不影响之前的数据。\r\n            rewardData = rewardData.slice() ;\r\n            for( let i = 0 ; i < rewardData.length ; ++i ) {\r\n                rewardData[ i ].count *= 2 ; \r\n            } // end for\r\n\r\n        }\r\n\r\n        // 显示领取\r\n        let uiGet = UiGet.create( UiMain.ins.root ) ; \r\n        uiGet.show() ; \r\n        uiGet.itemList.refresh( rewardData ) ; \r\n        // 实际到账\r\n        ItemGet.addList( rewardData ) ; \r\n        \r\n        DailyCheckinData.ins.checkin() ; \r\n        DailyCheckinDataPersist.save() ; \r\n\r\n        // 刷新列表领取状态\r\n        this.refresh() ; \r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport class UiDailyCheckinItem {\r\n\r\n    // 奖励数据\r\n    public rewardData : Array< ItemData > = null ; \r\n\r\n    public claimType = ClaimType.None ; \r\n\r\n    public root : Node ; \r\n\r\n    public title : Label ; \r\n\r\n    public claimableFlag : Node ; \r\n\r\n    public claimedFlag : Node ; \r\n\r\n    public tick : Node ; \r\n\r\n    public list = new UiItemList() ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.title = this.root.getChildByPath( \"Title\" ).getComponent( Label ) ; \r\n\r\n        this.claimableFlag = this.root.getChildByPath( \"ClaimableFlag\" ) ; \r\n\r\n        this.claimedFlag = this.root.getChildByPath( \"ClaimedFlag\" ) ; \r\n\r\n        this.tick = this.root.getChildByPath( \"Tick\" ) ; \r\n        this.tick.active = false ; \r\n\r\n        this.list.init( this.root.getChildByPath( \"Reward\" ) ) ;\r\n\r\n\r\n    }\r\n\r\n    // 显示奖励数据\r\n    public refreshReward( data : Array< ItemData > ) {\r\n\r\n        this.rewardData = data ; \r\n        this.list.refresh( data ) ;\r\n\r\n    }\r\n\r\n    // 已领取\r\n    public setClaimed() {\r\n\r\n        this.claimType = ClaimType.Claimed ; \r\n\r\n        this.tick.active = true ; \r\n        this.claimedFlag.active = true ; \r\n        this.claimableFlag.active = false ; \r\n\r\n\r\n    }\r\n\r\n    // 可领取\r\n    public setClaimable() {\r\n\r\n        this.claimType = ClaimType.Claimable ; \r\n\r\n        this.tick.active = false ; \r\n        this.claimedFlag.active = false ; \r\n        this.claimableFlag.active = true ; \r\n\r\n\r\n    }\r\n\r\n    // 不可领取的\r\n    public setNotClaimable() {\r\n\r\n        this.claimType = ClaimType.NotClaimable ; \r\n\r\n        this.tick.active = false ; \r\n        this.claimedFlag.active = false ; \r\n        this.claimableFlag.active = false ; \r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nenum ClaimType {\r\n\r\n    None , \r\n\r\n    // 已领取\r\n    Claimed , \r\n\r\n    // 可领取\r\n    Claimable , \r\n\r\n    // 不可领取的\r\n    NotClaimable\r\n\r\n}","import { EditBox, find, Input, instantiate, Node, Prefab, resources, sys, Vec3 } from \"cc\";\nimport { UiTray } from \"../../Game/Bag/Main/UiTray\";\nimport { UiFeatureSel } from \"../../Game/Ui/Popup/FeatureSel/UiFeatureSel\";\nimport { UiMain } from \"../../Game/Ui/Main/UiMain\";\nimport { TowerMgr } from \"../../Game/World/1.Base/Tower/Entity/TowerMgr\";\nimport { WaveSettle } from \"../../Game/World/2.Td/Level/WaveSettle\";\nimport { LevelCtrl } from \"../../Game/World/2.Td/Level/LevelCtrl\";\nimport { WaveCtrl } from \"../../Game/World/2.Td/Level/WaveCtrl\";\nimport { RoleMgr } from \"../../Game/World/1.Base/Role/Base/RoleMgr\";\nimport { RoleGetDamage } from \"../../Game/World/1.Base/Role/Misc/RoleGetDamage\";\nimport { PlayerRole } from \"../../Game/World/2.Td/Player/PlayerRole\";\nimport { Account } from \"../Account/Account\";\nimport { CfgGeneral } from \"../Cfg/CfgGeneral\";\nimport { AccountPersist } from \"../Account/AccountPersist\";\nimport { CfgArticle, CfgArticleMgr } from \"../Cfg/CfgArticle\";\nimport { UiLevel } from \"../../Home/Ui/Main/Page/Battle/UiLevel\";\nimport { GameArg } from \"../../Game/Init/GameArg\";\nimport { SceneTransition } from \"./UiLoadingScene\";\nimport { GridTraverse } from \"../../Game/Bag/Grid/GridTraverse\";\nimport { GridModeTransition } from \"../../Game/Bag/Grid/GridModeTransition\";\nimport { EnemyGen } from \"../../Game/World/2.Td/Level/EnemyGen\";\nimport { BagTrayAricleGen } from \"../../Game/World/2.Td/Bag/BagTrayAricleGen\";\nimport { GameLose } from \"../../Game/World/2.Td/Flow/GameLose\";\nimport { EffectFactory } from \"../../Game/Bag/Merge/EffectFactory\";\nimport { UiStamina } from \"../../Home/Ui/Main/Margin/UiStamina\";\nimport { UiMoney001 } from \"../../Home/Ui/Main/Margin/UiMoney001\";\nimport { UiMoney002 } from \"../../Home/Ui/Main/Margin/UiMoney002\";\n\n\n\nexport class UiDebug {\n\n    public static loadAndCreateIns( ) {\n\n        if( UiDebug.ins != null ){\n\n            UiDebug.ins.root.active = true ; \n            return ;\n        } \n\n        resources.load( \"Common/Ui/Debug\" , Prefab , ( err , data )=>{\n\n            let root  = instantiate( data ) ; \n\n            let ui = new UiDebug() ; \n            ui.init( root ) ; \n            ui.root.setParent( find( \"Canvas\" ) ) ;\n\n            UiDebug.ins = ui ; \n\n            UiDebugPersist.load() ; \n\n        } ) ;\n\n\n    }\n\n    public static destroyIns() {\n        this.ins.root.destroy() ;\n        this.ins = null ; \n    }\n\n    public static ins : UiDebug = null ; \n\n    public root : Node ; \n\n    public content : Node ; \n\n    public GameTrayArticleGen : UiDebug_GameTrayArticleGen ; \n\n    public GameFeatureSel : UiDebug_GameFeatureSel ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnClose = this.root.getChildByPath( \"btnClose\" ) ;\n        btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n            UiDebug.ins = null ; \n\n        } ) ;\n\n        this.content = this.root.getChildByPath( \"sv/view/content\" ) ;\n\n        this.GameTrayArticleGen = new UiDebug_GameTrayArticleGen() ; \n        this.GameTrayArticleGen.init( this.content.getChildByPath( \"GameTrayArticleGen\" ) ) ; \n        \n        this.GameFeatureSel = new UiDebug_GameFeatureSel() ; \n        this.GameFeatureSel.init( this.content.getChildByPath( \"GameFeatureSel\" ) ) ;\n\n\n        let GameArticleInfo = new UiDebug_GameArticleInfo() ; \n        GameArticleInfo.init( this.content.getChildByPath( \"GameArticleInfo\" ) ) ; \n\n        new UiDebug_GameFlow().init( this.content.getChildByPath( \"GameFlow\" ) ) ;\n\n        new UiDebug_BagArticle().init( this.content.getChildByPath( \"BagArticle\" ) ) ;\n\n        new UiDebug_Level().init( this.content.getChildByPath( \"Level\" ) ) ; \n\n        new UiDebug_EnemyGen().init( this.content.getChildByPath( \"EnemyGen\" ) ) ; \n\n        new UiDebug_Economic().init( this.content.getChildByPath( \"Economic\" ) ) ; \n\n    }\n\n\n}\n\nclass UiDebugPersist {\n\n    public static save() {\n\n        let json = {} ; \n\n        let ui = UiDebug.ins ; \n\n        {\n\n            let jGameTrayArticleGen = {} ;\n            json[ \"GameTrayArticleGen\" ] = jGameTrayArticleGen ; \n    \n            let edList = Array< string >() ;\n            jGameTrayArticleGen[ \"edList\" ] = edList ; \n\n            for( let i = 0 ; i < ui.GameTrayArticleGen.edList.length ; ++i ) {\n                let ed = ui.GameTrayArticleGen.edList[ i ] ;\n                edList.push( ed.string ) ; \n            } // end for\n\n        }\n\n        let str = JSON.stringify( json );\n\n        sys.localStorage.setItem( \"UiDebug\" , str ) ;\n\n    }\n\n    public static load() {\n\n        let str = sys.localStorage.getItem( \"UiDebug\" ) ;\n        if( str == null || str == \"\" ) return ;\n\n        let json = JSON.parse( str ) ;\n\n        let ui = UiDebug.ins ; \n\n        let jGameTrayArticleGen = json[ \"GameTrayArticleGen\" ] ; \n        if( jGameTrayArticleGen )  {\n\n            let edList = jGameTrayArticleGen[ \"edList\" ] ; \n            for( let i = 0 ; i < edList.length && i < ui.GameTrayArticleGen.edList.length ; ++i ) {\n\n                ui.GameTrayArticleGen.edList[ i ].string = edList[ i ] ;\n\n            }\n\n        }\n\n    }\n\n}\n\nclass UiDebug_GameTrayArticleGen {\n\n    public root : Node ; \n\n    public edList = new Array<EditBox>() ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        for( let i = 1 ; i <= 5 ; ++i ) {\n\n            let eb = this.root.getChildByPath( \"EditBox-00\" + i )?.getComponent( EditBox ) ;\n            if( eb == null ) break ; \n\n            this.edList.push( eb ) ;\n\n        } // end for\n\n        let btnGen = this.root.getChildByPath( \"btnGen\" );\n        btnGen.on( Input.EventType.TOUCH_END , ()=>{\n\n            UiDebugPersist.save() ; \n\n            let strs = this.edList[ 0 ].string.split( /[, ]/ );\n\n            UiTray.ins.clear() ; \n\n            for( let i = 0 ; i < strs.length ; ++i ) {\n\n                let str = strs[ i ] ;\n\n                UiTray.ins.addArticleById( str ) ;\n\n            } // end for\n\n            \n        } ) ;\n\n        let btn = this.root.getChildByPath( \"btnAdTag\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            BagTrayAricleGen.ins.addAdTag() ; \n\n            \n        } ) ;\n\n        // 所有4级可以杂交的\n        // 003_4 009_4 004_4 018_4 012_4 013_4 014_4 016_4 017_4 019_4\n\n\n    }\n\n\n}\n\nclass UiDebug_GameFeatureSel {\n\n    public root : Node ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnShow = this.root.getChildByPath( \"btnShow\" );\n        btnShow.on( Input.EventType.TOUCH_END , ()=>{\n\n            let ui = UiFeatureSel.ins ; \n            ui.refresh() ; \n            ui.show() ; \n\n            UiDebug.ins.root.destroy() ;\n            UiDebug.ins = null ; \n\n        } );\n\n    }\n\n\n}\n\n\nclass UiDebug_GameArticleInfo {\n\n    public root : Node ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnShow = this.root.getChildByPath( \"btnShow\" );\n        btnShow.on( Input.EventType.TOUCH_END , ()=>{\n\n            let str = \"物件信息：\\n\" ;\n            for( let tower of TowerMgr.ins.data ) {\n\n                str += tower.article.cfg.id + \" Buff: \" ; \n\n                for( let buff of tower.buff.list ) {\n                    if( buff.cfg == null ) continue ; \n                    str += buff.cfg.id + \" \" ;\n                }\n\n                str += \"\\n\" ;\n            }\n\n            console.log( str ) ;\n\n        } );\n\n    }\n\n\n}\n\n\nclass UiDebug_GameFlow {\n\n    public root : Node ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btn = this.root.getChildByPath( \"btnWin\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            UiDebug.destroyIns() ; \n            \n            LevelCtrl.ins.currentWaveIdx = LevelCtrl.ins.levelData.waves.length ; \n            WaveSettle.exe() ; \n\n        } );\n\n        btn = this.root.getChildByPath( \"btnLose\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            UiDebug.destroyIns() ; \n            \n            GameLose.exe() ; \n\n        } );\n\n\n        btn = this.root.getChildByPath( \"btnWinWave\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            // 终止波控制器，死亡所有敌人\n\n            WaveCtrl.ins.idx = WaveCtrl.ins.data.items.length + 1 ; \n            WaveCtrl.ins.onComplete?.() ; \n           \n            for( let role of RoleMgr.ins.allEnemies ) {\n                role.life.hp.current = 0 ; \n            }\n\n            UiDebug.destroyIns() ; \n\n        } );\n\n\n        btn = this.root.getChildByPath( \"btnPlayerRoleGetDamage\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            // 终止波控制器，死亡所有敌人\n            RoleGetDamage.exe( PlayerRole.ins.main , 50 );\n\n        } );\n\n        btn = this.root.getChildByPath( \"btnGridMax\" );\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            // 终止波控制器，死亡所有敌人\n            GridTraverse.exe( ( cell )=>{\n                cell.unlocked = true ; \n            } ) ;\n\n            \n            GridModeTransition.mode = 2 ; \n            GridModeTransition.toNormal() ; \n            \n\n        } );\n\n\n        \n\n    }\n\n\n}\n\nclass UiDebug_BagArticle {\n\n    public root : Node ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let edit = this.root.getChildByPath( \"EditBox\" ).getComponent( EditBox ) ;\n \n        let btn = this.root.getChildByPath( \"btnArticleGet\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let str = edit.string ;\n            let strs = str.split( /[, ]/ );\n\n            for( let str of strs ) {\n                if( Account.ins.bag.unlocked.indexOf( str ) != -1 ) continue ; \n                Account.ins.bag.unlocked.push( str ) ; \n            } // end for\n            AccountPersist.save() ; \n\n        } );\n\n        btn = this.root.getChildByPath( \"btnArticleGetAll\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let all = CfgGeneral.ins.BagAllArticleIds ;\n\n            Account.ins.bag.unlocked.splice( 0 , Account.ins.bag.unlocked.length ) ;\n            Account.ins.bag.unlocked.push( ... all ) ;\n            AccountPersist.save() ; \n\n        } );\n\n        btn = this.root.getChildByPath( \"btnArticleDefault\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            Account.ins.bag.unlocked.splice( 0 , Account.ins.bag.unlocked.length ) ;\n            Account.ins.bag.unlocked.push( ... CfgGeneral.ins.BagInitUnlockedIds ) ;\n\n            Account.ins.bag.deploy.splice( 0 , Account.ins.bag.deploy.length ) ;\n            Account.ins.bag.deploy.push( ... CfgGeneral.ins.BagInitDeployedIds ) ;\n            AccountPersist.save() ; \n\n        } );\n\n\n        btn = this.root.getChildByPath( \"btnSetGrade1\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            Account.ins.bag.unlocked.splice( 0 , Account.ins.bag.unlocked.length ) ;\n            Account.ins.bag.unlocked.push( ... CfgGeneral.ins.BagInitUnlockedIds ) ;\n\n            for( let id of Account.ins.bag.deploy ) {\n                let gId = CfgArticleMgr.data.get( id ).gradeLineId ;\n                Account.ins.bag.grade.set( gId , 1 ) ;\n            } \n\n        } );\n\n    }\n\n}\n\n\n\nclass UiDebug_Level {\n\n    public root : Node ; \n\n    // 托盘物件生成\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let edit = this.root.getChildByPath( \"EditBox\" ).getComponent( EditBox ) ;\n        edit.string = Account.ins.mainLevel.levelIdx.toString() ;\n\n        let btn = this.root.getChildByPath( \"btnSetCurrentLevelIdx\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let str = edit.string ;\n            let idx = Number( str )\n            Account.ins.mainLevel.levelIdx = idx ;\n            AccountPersist.save() ; \n\n            // 刷新界面\n            UiLevel.ins.setSelLevelIdx( idx ) ; \n            UiLevel.ins.refresh() ; \n\n        } );\n\n\n        let EditBoxLevelId = this.root.getChildByPath( \"EditBoxLevelId\" ).getComponent( EditBox ) ;\n\n        btn = this.root.getChildByPath( \"btnEnter\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let id = EditBoxLevelId.string ; \n            GameArg.ins.levelId = id ; \n            GameArg.ins.mainIdx = -1 ; \n    \n            SceneTransition.exe( \"Game\" ) ;\n\n        } );\n\n        // 波索引\n        let EditBoxWaveIdx = this.root.getChildByPath( \"EditBoxWaveIdx\" ).getComponent( EditBox ) ;\n        btn = this.root.getChildByPath( \"btnSetCurrentWaveIdx\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let idx = Number( EditBoxWaveIdx.string ) ; \n            Account.ins.mainLevel.waveIdx = idx ;\n            AccountPersist.save() ; \n    \n            // 刷新界面\n            UiLevel.ins.refresh() ; \n\n        } );\n\n        // 清除波奖励领取记录\n        btn = this.root.getChildByPath( \"btnClearWaveRewardRecord\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let idx = Number( EditBoxWaveIdx.string ) ; \n            Account.ins.waveReward.clear() ; \n            AccountPersist.save() ; \n    \n            // 刷新界面\n            UiLevel.ins.refresh() ; \n\n        } );\n\n    }\n\n}\n\nclass UiDebug_EnemyGen {\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let edit = this.root.getChildByPath( \"EditBox\" ).getComponent( EditBox ) ;\n\n        let btn = this.root.getChildByPath( \"btnGen\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n\n            let role = EnemyGen.genOne( edit.string ) ; \n\n            if( role.cfg.hpBarId == \"HpBarBoss\" ) {\n                let effect = EffectFactory.create( \"BossIncoming\" ) ; \n                effect.setParent( UiMain.ins.root , false ) ; \n                effect.position = Vec3.ZERO ; \n                \n            }\n\n        } );\n\n    }\n\n}\n\nclass UiDebug_Economic {\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.initStamina() ; \n\n        this.initMoney001() ; \n        this.initMoney002() ; \n\n    }\n\n    private initStamina() {\n\n        let ed = this.root.getChildByPath( \"Stamina/EditBox\" ).getComponent( EditBox ) ;\n        let btn = this.root.getChildByPath( \"Stamina/btnSet\" )\n\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n            let n = Number( ed.string ) ; \n            Account.ins.stamina.current = n ; \n            UiStamina.ins.refresh() ; \n\n        } ) ;\n\n    }\n\n    private initMoney001() {\n\n        let ed = this.root.getChildByPath( \"Money001/EditBox\" ).getComponent( EditBox ) ;\n        let btn = this.root.getChildByPath( \"Money001/btnSet\" )\n\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n            let n = Number( ed.string ) ; \n            Account.ins.money.money001 = n ; \n            UiMoney001.ins.refresh() ; \n            AccountPersist.save() ; \n        } ) ;\n\n    }\n\n\n    private initMoney002() {\n\n        let ed = this.root.getChildByPath( \"Money002/EditBox\" ).getComponent( EditBox ) ;\n        let btn = this.root.getChildByPath( \"Money002/btnSet\" )\n\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n            let n = Number( ed.string ) ; \n            Account.ins.money.money002 = n ; \n            UiMoney002.ins.refresh() ; \n            AccountPersist.save() ; \n        } ) ;\n\n    }\n\n\n}","import { Input, instantiate, Label, Node, Prefab } from \"cc\";\nimport { UiEffectScale } from \"../../SL/Cocos/Ui/UiEffect\";\n\nexport class UiDialog {\n\n    public static pf : Prefab ; \n\n    public static create( parent : Node , str : string = null ) : UiDialog {\n\n        let root = instantiate( this.pf ) ; \n        let ui = new UiDialog() ; \n        ui.init( root ) ;\n        ui.root.setParent( parent , false ) ; \n        ui.txt.string = str ; \n        return ui ; \n\n\n    }\n\n    public root : Node ;\n\n    public title : Label ; \n    public txt : Label ; \n    public btnOK : Node ; \n    public btnClose : Node ; \n\n    public init( node : Node )  {\n\n        this.root = node ; \n\n        this.btnClose = this.root.getChildByPath( \"btnClose\" ) ; \n        this.btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n        } ) ;\n\n        this.title = this.root.getChildByPath( \"Title\" ).getComponent( Label ) ; \n        this.title.string = \"\" ; \n\n        this.txt = this.root.getChildByPath( \"Text\" ).getComponent( Label ) ; \n        this.txt.string = \"\" ; \n\n        this.btnOK = this.root.getChildByPath( \"btnOK\" ) ; \n        this.btnOK.on( Input.EventType.TOUCH_END , ()=>{\n            this.root.destroy() ; \n        } ) ;\n\n    }\n\n    public show() {\n\n        UiEffectScale.show( this.root ) ; \n\n    }\n\n}","\nimport { find , Node, Tween, tween, UIOpacity, Vec3 } from \"cc\";\n\nexport class UiEffectFade {\n\n    // 开始显示。valStart 初始值 -1 不设置初始值\n    public static fade( node : Node , duration : number , valStart : number , valEnd : number , cb : ()=>void = null ) : void {\n\n        let opacity = node.getComponent( UIOpacity ) ;\n        if( opacity == null ) {\n            opacity = node.addComponent( UIOpacity ) ;\n        }\n\n        if( valStart >= 0 ) {\n            opacity.opacity = valStart ;\n        }\n        \n\n        let t = tween( opacity ).to( duration , { opacity : valEnd } ) ;\n        if( cb != null ) {\n            t.call( ()=>{ cb() ; } ) ; \n        }\n        t.start() ; \n\n    }\n\n    // public static fadeIn( node : Node , duration : number , val : number ): void {\n\n    //     let opacity = node.getComponent( UIOpacity ) ;\n    //     if( opacity == null ) {\n    //         opacity = node.addComponent( UIOpacity ) ;\n    //     }\n    //     opacity.opacity = 0 ;\n    //     tween( opacity ).to( duration , { opacity : val } ).start() ;\n\n    // }\n\n    // 开始消失\n    public static fadeOut(): void {\n\n        // let seq = cc.sequence(\n        //     cc.fadeTo(0.5, 0),\n        //     cc.callFunc(() => { this.node.active = false; }) ,\n        // );\n        // this.node.runAction(seq);\n    }\n\n}\n\nexport class UiEffectScale {\n\n    public static show( node : Node ) : void {\n\n        node.active = true ; \n        node.scale = new Vec3( 0.6 , 0.6 ) ; \n        tween( node )\n        .to( 0.2 , { scale : new Vec3( 1.1 , 1.1 , 1.1 ) } )\n        .to( 0.1 , { scale : new Vec3( 1 , 1 , 1 ) } )\n        .start()  ; \n\n    }\n\n}\n\n// 弹出\nexport class UiEffectPopup\n{\n    // 显示\n    public static show( node : Node ) : void \n    {\n        node.active = true ; \n        node.scale = new Vec3( 0.6 , 0.6 ) ; \n        tween( node )\n        .to( 0.2 , { scale : new Vec3( 1.1 , 1.1 , 1.1 ) } )\n        .to( 0.1 , { scale : new Vec3( 1 , 1 , 1 ) } )\n        .start()  ; \n\n        var opa = node.getComponent( UIOpacity ) ;\n        if( opa == null )\n        {\n            opa = node.addComponent( UIOpacity ) ;\n        }\n        opa.opacity = 0 ; \n        tween( opa ).to( 0.3 , { opacity : 255 } ).start() ; \n\n    }\n\n    // 隐藏\n    public static hide( node : Node ) : void \n    {\n        tween( node )\n        .to( 0.2 , { scale : new Vec3( 1.1 , 1.1 , 1.1 ) } )\n        .to( 0.1 , { scale : new Vec3( 0.6 , 0.6 , 0.6 ) } )\n        .start()  ; \n\n        var opa = node.getComponent( UIOpacity ) ;\n        if( opa == null )\n        {\n            opa = node.addComponent( UIOpacity ) ;\n        }\n        tween( opa ).to( 0.3 , { opacity : 0 } ).call( ()=>{ opa.opacity = 255 ; node.active = false ; } ).start() ; \n\n    }\n\n}","import { Input, instantiate, Label, Node, Size, Sprite, UITransform, Vec3 } from \"cc\";\nimport { Player } from \"../../../World/2.Td/Player/Player\";\nimport { CfgBuff, CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { UiBubble } from \"../../../../Common/Ui/UiBubble\";\nimport { UiMain } from \"../UiMain\";\nimport { BuffString } from \"../../../World/1.Base/Buff/BuffString\";\nimport { PfMgrIconBuff } from \"../../../../Common/PfMgr/PfMgrIconBuff\";\nimport { NodeSizeFit } from \"../../../../SL/Cocos/Ui/NodeSizeFit\";\n\n// 获得的特性\nexport class UiFeature {\n\n    public static ins : UiFeature ; \n\n    public root : Node ; \n\n    public content : Node ; \n\n    public items = new Array< UiFeatureItem >() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.root.active = true ; \n\n        this.content = this.root.getChildByPath( \"sv/view/content\" ) ;\n\n        // 预制\n        for( let i = 0 ; i < this.content.children.length ; ++i ) {\n            let pfItem = this.content.children[ i ] ;\n            this.pfItems.push( pfItem ) ;\n            pfItem.active = false ;\n        } // end for\n\n    }\n\n    public refresh() {\n\n        this.refresh2() ; \n\n    }\n\n    // 合并显示\n    public refresh2() {\n\n        this.clear() ; \n\n        let list = new Array< [ CfgBuffItem , number ] >() ;\n\n        // 统计同类个数 按照列表顺序\n        let buffList = Player.ins.buff.list ; \n        for( let i = 0 ; i < buffList.length ; ++i ) {\n\n            let buff = buffList[ i ] ;\n            let cfgBuffItem = buff.cfg ;\n\n            let item = list.find( ( e )=>{ return e[ 0 ].id == cfgBuffItem.id ; } ) ; \n            if( item == null ) {\n                item = [ cfgBuffItem , 1 ] ;\n                list.push( item ) ;\n            }\n            else {\n                item[ 1 ]++ ; \n            }\n\n        } // end for\n\n        // 显示\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let item = list[ i ] ;\n\n            let cfg = item[ 0 ] ; \n            let count = item[ 1 ] ;\n\n            let root = instantiate( this.pfItems[ cfg.grade - 1 ] ) ;\n            root.setParent( this.content , false ) ;\n            root.active = true ; \n\n            let uiItem = new UiFeatureItem() ; \n            uiItem.cfg = cfg ; \n            uiItem.init( root ) ; \n            this.items.push( uiItem ) ;\n            uiItem.refresh() ; \n            uiItem.refreshCount( count ) ; \n\n        } // end for\n\n\n    }\n\n    // 显示每一个Buff图标\n    public refresh1() {\n\n        this.clear() ; \n\n        let buffList = Player.ins.buff.list ; \n        for( let i = 0 ; i < buffList.length ; ++i ) {\n\n            let buff = buffList[ i ] ;\n\n            let grade = buff.cfg.grade ; \n\n            let root = instantiate( this.pfItems[ grade - 1 ] ) ;\n            root.setParent( this.content , false ) ;\n            root.active = true ; \n\n            let uiItem = new UiFeatureItem() ; \n            uiItem.cfg = buff.cfg ; \n            uiItem.init( root ) ; \n            this.items.push( uiItem ) ;\n            uiItem.refresh() ; \n\n        } // end for\n\n    }\n\n    public clear() {\n\n        for( let ui of this.items ) {\n            ui.root.destroy() ; \n        }\n        this.items.splice( 0 , this.items.length ) ; \n\n    }\n\n    private pfItems = Array< Node >() ;\n\n}\n\nexport class UiFeatureItem {\n\n    public cfg : CfgBuffItem ; \n\n    public root : Node ; \n\n    public icon : Sprite ; \n\n    public count : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = node.getChildByPath( \"Icon\" ).getComponent( Sprite ) ;\n        this.iconSize = this.icon.getComponent( UITransform ).contentSize.clone() ;\n\n        this.count = this.root.getChildByPath( \"Count\" ).getComponentInChildren( Label ) ;\n        this.count.node.parent.active = false ; \n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\n\n    }\n\n    private onClick() {\n\n        UiBubble.loadAndCreate( ( ui )=>{\n\n            ui.clickToDestroy() ; \n\n            let parent = UiMain.ins.root ; \n            let pos = this.root.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n            parent.getComponent( UITransform ).convertToNodeSpaceAR( pos , pos ) ;\n            pos.y += 80 ;\n\n            ui.root.setParent( parent , false ) ; \n\n            ui.root.position = pos ; \n            ui.setString( BuffString.getDescription( this.cfg.id ) ) ;\n            \n        } ) ;\n\n    }\n\n    public refresh() {\n\n        let buffId = this.cfg.id ; \n\n        // 图标\n        let spr = PfMgrIconBuff.ins.getIconById( buffId ) ;\n        this.icon.spriteFrame = spr.spriteFrame ; \n\n        // 去掉透明区域的大小比例，会最大化显示\n        NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n\n    }\n\n    public refreshCount( n : number ) {\n\n        this.count.node.parent.active = n > 1 ; \n\n        this.count.string = \"x \" + n ; \n\n    }\n\n    private iconSize : Size ; \n\n}","import { Input, instantiate, Label, Node, Prefab, RichText, Sprite, tween, Vec3 } from \"cc\";\nimport { GamePause } from \"../../../World/2.Td/Flow/GamePause\";\nimport { UiFeatureSelItemList } from \"./UiFeatureSelItemList\";\nimport { UiFeatureSelBtnList } from \"./UiFeatureSelBtnList\";\nimport { FrameCall } from \"../../../World/1.Base/Support/Misc/FrameCall\";\nimport { SoundBtnClickSetter } from \"../../../../Common/Audio/SoundBtnClickSetter\";\nimport { SeqScaleShow } from \"../../../../Common/Misc/SeqScaleShow\";\n\n// 特性选择\nexport class UiFeatureSel {\n\n    public static pf : Prefab ; \n\n    public static ins : UiFeatureSel = null ; \n\n    public static create( parent : Node ) : UiFeatureSel {\n\n        let ui = new UiFeatureSel() ; \n        ui.init( instantiate( this.pf ) ) ;\n\n        ui.root.setParent( parent , false ) ;\n\n        return ui ; \n\n    }\n\n    public root : Node ; \n\n    public title : Node ; \n\n    // 列表节点\n    public list : Node ; \n\n    // 条目列表\n    public itemList = new UiFeatureSelItemList() ; \n\n    // 按钮列表\n    public btnList = new UiFeatureSelBtnList() ; \n    \n    public prompt : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.title = this.root.getChildByPath( \"Title\" ) ;\n\n        this.prompt = this.root.getChildByPath( \"Prompt\" ) ;\n\n        this.btnList.featureSel = this ;\n        this.btnList.init( this.root.getChildByPath( \"BtnList\" ) ) ;\n\n        this.itemList.featureSel = this ; \n        this.itemList.init( this.root.getChildByPath( \"List\" ) ) ;\n\n        \n\n    }\n\n    public show() {\n\n        this.root.active = true ;\n\n        // 暂停游戏逻辑\n        GamePause.pause() ; \n\n        FrameCall.ins.once( ()=>{\n            this.showAnim() ; \n        } , 2 ) ;\n        \n\n    }\n\n    // 显示动画\n    public showAnim() {\n\n        let nodes = new Array< Node >() ; \n        for( let item of this.itemList.items ) {\n            nodes.push( item.root ) ; \n        }\n        nodes.push( this.btnList.root ) ; \n        nodes.push( this.prompt ) ; \n        SeqScaleShow.exe( nodes ) ; \n        \n    }\n\n    public refresh() {\n        \n        this.itemList.refresh() ; \n\n        this.showAnim() ; \n\n    }\n    \n\n}\n\n\n\n\n\n","import { Input, Node } from \"cc\";\nimport { UiFeatureSel } from \"./UiFeatureSel\";\nimport { GamePause } from \"../../../World/2.Td/Flow/GamePause\";\nimport { FeatureAcquire } from \"./FeatureAcquire\";\nimport { FeatureExtract } from \"./FeatureExtract\";\nimport { Ad } from \"../../../../Common/Ad/Ad\";\nimport { Vec3 } from \"cc\";\n\n// 按钮列表\nexport class UiFeatureSelBtnList {\n\n    public featureSel : UiFeatureSel = null ;\n\n\n    // 按钮\n    public root : Node ; \n\n    public btnRefresh : Node ; \n\n    public btnGetAll : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ;\n\n        this.btnRefresh = this.root.getChildByPath( \"btnRefresh\" ) ;\n        this.btnRefresh.on( Input.EventType.TOUCH_END , this.onClick_Refresh , this ) ; \n\n        this.btnGetAll = this.root.getChildByPath( \"btnGetAll\" ) ;\n        this.btnGetAll.on( Input.EventType.TOUCH_END , this.onClick_GetAll , this ) ; \n\n    }\n\n    // 换一批\n    private onClick_Refresh() {\n\n        let onSuccess = ()=>{\n            this.featureSel.refresh() ; \n        };\n\n        Ad.ins.rewardShow( onSuccess ) ; \n\n    }\n\n    private onClick_GetAll() {\n\n        let onSuccess = ()=>{\n\n            // this.FeatureSel.root.destroy() ; \n            this.featureSel.root.active = false ; \n\n            let ids = new Array< string >() ;\n            for( let uiItem of this.featureSel.itemList.items ) {\n                let id = uiItem.cfgItem.id ; \n                ids.push( id ) ; \n                FeatureExtract.countLimit( id ) ; \n            } // end for\n    \n            FeatureAcquire.exe( ids ) ; \n    \n            // 恢复游戏逻辑\n            GamePause.resume() ; \n        };\n\n        Ad.ins.rewardShow( onSuccess ) ; \n\n    }\n\n}\n","import { Input, Layout, Node, RichText, Size, Sprite, tween, UITransform, Vec3 } from \"cc\";\nimport { Lang } from \"../../../../Common/Misc/Lang\";\nimport { PfMgrIconBuff } from \"../../../../Common/PfMgr/PfMgrIconBuff\";\nimport { CfgFeatureItem } from \"../../../../Common/Cfg/CfgFeature\";\nimport { GamePause } from \"../../../World/2.Td/Flow/GamePause\";\nimport { UiFeatureSel } from \"./UiFeatureSel\";\nimport { FeatureAcquire } from \"./FeatureAcquire\";\nimport { BuffString } from \"../../../World/1.Base/Buff/BuffString\";\nimport { CfgBuff, CfgBuffItem } from \"../../../../Common/Cfg/CfgBuff\";\nimport { NodeSizeFit } from \"../../../../SL/Cocos/Ui/NodeSizeFit\";\nimport { UiBgQuality } from \"../../../../Common/Ui/UiBgQuality\";\nimport { Button } from \"cc\";\n\n// 条目\nexport class UiFeatureSelItem {\n\n    public grade = 1 ; \n\n    public featureSel : UiFeatureSel = null ; \n\n    public cfgItem : CfgFeatureItem ; \n\n    public root : Node ; \n\n    public icon : Sprite ; \n    private iconSize : Size ; \n    \n    public descr : RichText ; \n    \n    public bg = new UiBgQuality() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = this.root.getChildByPath( \"Icon/val\" ).getComponent( Sprite ) ; \n        this.iconSize = this.icon.getComponent( UITransform ).contentSize.clone() ;\n        \n\n        this.descr = this.root.getChildByPath( \"Descr\" ).getComponent( RichText ) ;\n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \n        \n        this.bg.init( this.root.getChildByPath( \"bg\" ) ) ;\n\n    }\n\n    public refresh( item : CfgBuffItem ) {\n\n        this.cfgItem = item ; \n\n        // 刷新图标\n        this.refreshIcon( item ) ; \n\n        // 刷新描述\n        this.refreshDescr( item ) ; \n\n        // 背景\n        this.bg.show( item.grade ) ;\n\n    }\n\n    private refreshIcon( item : CfgBuffItem ) {\n\n        // this.icon.node.active = false ; return ;\n\n        this.icon.node.active = true ; \n\n        // 刷新图标\n        let spr = PfMgrIconBuff.ins.getIconById( item.id ) ;\n        this.icon.spriteFrame = spr.spriteFrame ; \n        \n        // 设置图标Size。去掉透明区域的大小比例，会最大化显示\n        NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n        \n    }\n\n    private refreshDescr( item : CfgBuffItem ) {\n\n        let str = BuffString.getDescription( item.id ) ;\n        // 加粗体\n        str = \"<outline color=black width=4> <b>\" + str + \"</b> </outline>\" ;\n        this.descr.string = str ; \n\n    }\n\n\n    private onClick( ) {\n\n        // 防止按钮重复点击\n        let btn = this.root.getComponent( Button ) ; \n        if( btn.enabled == false ) return ; \n        btn.enabled = false ; \n\n        this.playAnimSel( ()=>{\n\n            // 关闭UI\n            // this.featureSel.root.destroy() ; \n            this.featureSel.root.active = false ; \n\n            // 恢复游戏逻辑\n            GamePause.resume() ; \n\n            FeatureAcquire.exe( [ this.cfgItem.id ] ) ;\n\n        } ) ;\n\n        \n    }\n\n    // 播放选择条目动画\n    private playAnimSel( onComplete : ()=>void ) {\n\n        this.featureSel.title.active = false ; \n        this.featureSel.btnList.root.active = false ; \n\n        // 关闭布局。为了保持条目的位置\n        this.featureSel.itemList.root.getComponent( Layout ).enabled = false ; \n\n        // 不显示其他的条目\n        for( let item of this.featureSel.itemList.items ) {\n            if( item == this ) { \n                continue ; \n            }\n            item.root.active = false ; \n        }\n\n        // 本身缩放\n        tween( this.root ).sequence(\n            tween( this.root ).to( 0.2 , { scale : new Vec3( 1.2 , 1.2 , 1.2 ) } ) , \n            tween( this.root ).to( 0.1 , { scale : new Vec3( 0 , 0 , 0 ) } ) , \n            tween( this.root ).call( ()=>{\n\n                onComplete?.() ;\n\n                // 关闭UI\n                // this.featureSel.root.destroy() ; \n                this.featureSel.root.active = false ; \n\n                // 暂停游戏逻辑\n                GamePause.resume() ; \n\n            } ) ,\n        ).start() ;\n\n    }\n    \n}","import { instantiate, Layout, Node } from \"cc\";\nimport { UiFeatureSelItem } from \"./UiFeatureSelItem\";\nimport { FeatureExtract } from \"./FeatureExtract\";\nimport { UiFeatureSel } from \"./UiFeatureSel\";\nimport { SoundBtnClickSetter } from \"../../../../Common/Audio/SoundBtnClickSetter\";\nimport { Button } from \"cc\";\n\n// 选择条目列表\nexport class UiFeatureSelItemList {\n\n    public featureSel : UiFeatureSel = null ; \n\n    public root : Node ; \n\n    public items = new Array< UiFeatureSelItem >() ;\n\n    private layout : Layout ; \n\n    private pfItem : Node = null ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.layout = this.root.getComponent( Layout ) ; \n\n        this.pfItem = this.root.getChildByName( \"Item\" ) ; \n\n        // 预先加入一个。利用好预制的条目\n        let uiItem = new UiFeatureSelItem() ; \n        uiItem.init( this.pfItem ) ;\n        this.items.push( uiItem ) ; \n\n    }\n\n    public refresh() {\n\n        let list = FeatureExtract.exe() ; \n\n        this.setItemCount( list.length ) ; \n        \n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let cfgItem = list[ i ] ;\n\n            let uiItem = this.items[ i ] ; \n            uiItem.featureSel = this.featureSel ; \n            uiItem.refresh( cfgItem ) ;\n            uiItem.root.setSiblingIndex( i ) ;\n\n            // 设置可以点击\n            uiItem.root.getComponent( Button ).enabled = true ; \n\n        } // end for\n\n        this.layout.enabled = true ; \n        this.layout.updateLayout( true ) ; \n\n        SoundBtnClickSetter.exe( this.root ) ;\n\n\n    }\n\n    public setItemCount( n : number ) {\n\n        let diff = n - this.items.length ; \n\n        // 创建不够的\n        for( let i = 0 ; i < diff ; ++i ) {\n\n            let node = instantiate( this.pfItem ) ; \n            node.active = true ; \n            node.setParent( this.root ) ;\n            let uiItem = new UiFeatureSelItem() ; \n            uiItem.init( node ) ;\n            this.items.push( uiItem ) ; \n\n        } // end for\n\n        // 多余的隐藏\n        for( let i = this.items.length + diff ; i < this.items.length ; ++i ) {\n            this.items[ i ].root.active = false ; \n        } // end for\n\n    }\n\n\n\n}\n","import { Node } from \"cc\";\r\nimport { UiPopupBase } from \"../../../Common/Ui/UiPopupBase\";\r\nimport { UiItemList } from \"../../../Common/Item/UiItemList\";\r\nimport { instantiate } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { Sound } from \"../../../Common/Audio/Sound\";\r\n\r\n// 获得物品\r\nexport class UiGet extends UiPopupBase {\r\n\r\n    public static create( parent : Node ) : UiGet {\r\n\r\n        let root = instantiate( this.pf ) ;\r\n        let ui = new UiGet() ;\r\n        ui.init( root ) ; \r\n        ui.root.setParent( parent , false ) ; \r\n        return ui ; \r\n\r\n    }\r\n\r\n    public itemList = new UiItemList() ; \r\n\r\n    public override init( node : Node ) {\r\n\r\n        super.init( node ) ;\r\n\r\n        this.itemList.init( this.root.getChildByPath( \"List\" ) ) ; \r\n\r\n        this.root.on( Input.EventType.TOUCH_END , ()=>{\r\n            this.root.destroy() ; \r\n        } ) ;\r\n\r\n        // 音效\r\n        Sound.ins.getReward() ; \r\n\r\n    }\r\n\r\n}","import { UITransform } from \"cc\";\r\nimport { Size } from \"cc\";\r\nimport { BlockInputEvents } from \"cc\";\r\nimport { tween } from \"cc\";\r\nimport { Vec3 } from \"cc\";\r\nimport { Rect } from \"cc\";\r\nimport { Node } from \"cc\";\r\n\r\nexport class UiGuideCover {\r\n\r\n    public root : Node ; \r\n\r\n    public rootBlockInput : BlockInputEvents ; \r\n\r\n    public mask : Node ; \r\n    public maskUiTrans : UITransform ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        // 根结点占据整个屏幕\r\n        this.root.getComponent( UITransform ).setContentSize( 9999 , 9999 ) ;\r\n        this.root.position = Vec3.ZERO ; \r\n\r\n        // 根结点阻碍点击\r\n        this.rootBlockInput = this.root.getComponent( BlockInputEvents ) ; \r\n        if( this.rootBlockInput == null ) {\r\n            this.rootBlockInput = this.root.addComponent( BlockInputEvents ) ; \r\n        }\r\n\r\n        this.mask = this.root.getChildByPath( \"Mask\" ) ; \r\n        this.maskUiTrans = this.mask.getComponent( UITransform ) ;\r\n\r\n    }\r\n\r\n    // 动画显示\r\n    public showAnim( posWorld : Vec3 , size : Size , duration = 0.5 ) {\r\n\r\n        this.rootBlockInput.enabled = true ; \r\n\r\n        tween( this.mask ).parallel( \r\n\r\n            tween( this.mask ).to( duration , { worldPosition : posWorld } ) , \r\n            tween( this.maskUiTrans ).to( duration , { contentSize : size } ) , \r\n\r\n         )\r\n         .call( ()=>{\r\n            this.rootBlockInput.enabled = false ; \r\n         } )\r\n         .start() ;\r\n\r\n    }\r\n\r\n}","import { instantiate, Label, Node, Prefab, Sprite } from \"cc\";\nimport { UiBar } from \"./UiBar\";\nimport { Role } from \"../../World/1.Base/Role/Base/Role\";\nimport { UiBar2 } from \"./UiBar2\";\n\n// 血条\nexport class UiHpBar {\n\n    public static pf : Node ; \n\n    public static create( id : string = null ) : UiHpBar {\n\n        if( id == null ) id = \"HpBar\" ;\n\n        let ui = new UiHpBar() ; \n\n        let root = instantiate( this.pf.getChildByPath( id ) );\n        ui.init( root ) ;\n\n        return ui ; \n\n    }\n\n    // 绑定的角色\n    public role : Role ; \n\n    public root : Node ; \n\n    // 血条上的文本\n    public label : Label ; \n\n    // 血条 第 1 层\n    public bar = new UiBar2() ; \n\n    // 血条 第 2 层\n    public bar2 : UiBar2 = null ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.bar.init( this.root.getChildByPath( \"bar\" ) );\n\n        let rootBar2 = this.root.getChildByPath( \"bar2\" ) ;\n        if( rootBar2 ) {\n\n            this.bar2 = new UiBar2() ; \n            this.bar2.init( rootBar2 ) ;\n        }\n        \n        this.label = this.root.getComponentInChildren( Label ) ; \n\n    }\n\n    // 更新\n    public refresh() {\n        \n        let hp = this.role.life.hp ; \n        let val = hp.current / hp.max ; \n\n        let diff = this.bar.bar.fillRange - val ;\n        this.bar.bar.fillRange = val ; \n\n        // 第二层血条动画显示\n        if( this.bar2 != null ) {\n\n            if( diff > 0.02 ) {\n                this.bar2.anim( val , 0.8 ) ; \n            }\n            else {\n                // 波动太小没必要动画显示\n                this.bar2.bar.fillRange = val ; \n            }\n\n        }\n        \n        // 血量数字显示\n        if( this.label != null ) {\n            this.label.string = hp.current + \" / \" + hp.max ; \n        }\n\n    }\n\n}\n\n","import { instantiate } from \"cc\";\nimport { UiPopupBase } from \"../../../Common/Ui/UiPopupBase\";\nimport { Node } from \"cc\";\nimport { UiArticleIcon, UiArticleIconBg } from \"../../../Common/Ui/UiArticleIcon\";\nimport { CfgArticle, CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { MergeDefinition } from \"../../../Game/Bag/Merge/MergeDefinition\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\nimport { sp } from \"cc\";\nimport { tween } from \"cc\";\nimport { Label } from \"cc\";\nimport { ArticleString } from \"../../../Common/String/ArticleString\";\n\nexport class UiHybridGuide extends UiPopupBase {\n\n    // 这个方法不能继承，子类要重写。原因是不能用泛型类new\n    public static create( parent : Node ) : UiHybridGuide {\n\n        let root = instantiate( this.pf ) ;\n        let ui = new UiHybridGuide() ; \n        ui.init( root ) ;\n        ui.root.setParent( parent , false ) ; \n        return ui ; \n\n    }\n\n    public override init( node : Node ) {\n        \n        super.init( node ) ;\n\n        this.pfItem = this.root.getChildByPath( \"sv/view/content/Item\" ) ; \n        this.pfItem.active = false ; \n        \n        for( let i = 0 ; i < MergeDefinition.ins.orig.length ; ++i ) {\n            let cfgItem = MergeDefinition.ins.orig[ i ] ;\n            if( cfgItem.isHybrid == false ) continue ; \n\n            let uiItem = new UiHybridGuideItem() ; \n            let node = instantiate( this.pfItem ) ; \n            node.active = true ; \n            node.setParent( this.pfItem.parent , false ) ; \n            uiItem.init( node ) ; \n            uiItem.item1.refresh( cfgItem.id1 ) ; \n            uiItem.item2.refresh( cfgItem.id2 ) ; \n            uiItem.item3.refresh( cfgItem.id3 ) ; \n            let sks = uiItem.root.getComponentsInChildren( sp.Skeleton ) ;\n            // 要下一帧Spine才能播放。\n            tween( uiItem.root ).delay( 0.01 ).call( ()=>{\n                for( let sk of sks ) {\n                    // let animations = sk.skeletonData.getRuntimeData().animations;\n                    sk.addAnimation( 0 , \"donghua\" , true ) ; \n                }\n            } ).start() ; \n\n\n        } // end for\n\n\n    }\n\n    private pfItem : Node ; \n\n}\n\n// \nexport class UiHybridGuideItem {\n\n    public root : Node = null ; \n\n    public item1 = new UiItem() ; \n    public item2 = new UiItem() ; \n    public item3 = new UiItem() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.item1.init( this.root.getChildByPath( \"Item1\" ) ) ;\n        this.item2.init( this.root.getChildByPath( \"Item2\" ) ) ;\n        this.item3.init( this.root.getChildByPath( \"Item3\" ) ) ;\n\n    } \n\n\n}\n\n// 装备条目\nexport class UiItem {\n\n    public root : Node ; \n\n    public icon = new UiArticleIcon() ; \n\n    public bg = new UiArticleIconBg()  ;\n\n    public name : Label = null ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ; \n\n        this.bg.init( this.root.getChildByPath( \"bg\" ) ) ;\n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n        this.name.string = \"\" ; \n\n    }\n\n    public refresh( id : string ) {\n\n        this.icon.refresh( id ) ;\n        this.bg.refresh( id ) ;\n\n        this.name.string = ArticleString.getName( id ) ; \n\n    }\n\n}","import { Label, Node, Size, Sprite, UITransform } from \"cc\";\nimport { ItemData } from \"./ItemData\";\nimport { CfgItem, CfgItemMgr } from \"../Cfg/CfgItem\";\nimport { UiItemIcon } from \"./UiItemIcon\";\n\n// UI 物品条目。矩形\n\n/*\n    结构\n\n    root \n    |- bg\n    |- Count\n    |- Icon\n    |- FragmentFlag\n    \n*/\nexport class UiItem {\n\n    public root : Node ; \n\n    public bg : Node ; \n\n    // 物品图标\n    public icon : UiItemIcon ;\n\n    // 物品数量\n    public count : Label ; \n\n\n    public init( node : Node ) {\n\n        this.root = node ; \n        \n        this.count = this.root.getChildByPath( \"Count\" ).getComponent( Label ) ;\n\n        this.icon = new UiItemIcon() ; \n        this.icon.init( this.root ) ;\n\n        // // 停止停靠。\n        // let w = this.icon.node.getComponent( Widget ) ; \n        // w.enabled = false ; w.destroy() ; \n\n        this.bg = this.root.getChildByPath( \"bg\" ) ; \n        this.refreshBg( 1 ) ; \n\n    }\n\n    // 用物品数据刷新 UI \n    public refreshByItemData( item : ItemData ) {\n\n        this.count.string = \"x\" + item.count ; \n\n        let cfg = item.cfg ; \n        if( cfg == null ) {\n            cfg = CfgItemMgr.data.get( item.id ) ; \n        }\n\n        this.icon.refresh( item.id ) ; \n\n        this.refreshBg( cfg.quality ) ;\n\n    }\n\n    public refreshBg( n : number ) {\n\n        if( this.bg == null ) return ; \n\n        for( let node of this.bg.children ) {\n            node.active = false ; \n        } // end for\n\n        let idx = n - 1 ; \n        if( idx < 0 || idx >= this.bg.children.length ) return ; \n\n        this.bg.children[ idx ].active = true ; \n\n    }\n\n}","import { UITransform } from \"cc\";\nimport { Size } from \"cc\";\nimport { Sprite } from \"cc\";\nimport { Node } from \"cc\";\nimport { PfMgrBagArticle } from \"../PfMgr/PfMgr\";\nimport { NodeSizeFit } from \"../../SL/Cocos/Ui/NodeSizeFit\";\nimport { PfMgrIcon } from \"../PfMgr/PfMgrIcon\";\nimport { ItemType } from \"./ItemType\";\n\n// 物品图标\n/*\n    结构\n\n    root \n    |- Icon\n    |- FragmentFlag\n    \n*/\nexport class UiItemIcon {\n\n    public root : Node ; \n\n    // 物品图标\n    public icon : Sprite ;\n\n    // 碎片标志\n    public flagmentFlag : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = this.root.getChildByPath( \"Icon\" )?.getComponent( Sprite ) ; \n        if( this.icon != null ) {\n            this.iconSize = this.icon.node.getComponent( UITransform ).contentSize.clone() ;\n        }\n\n        this.flagmentFlag = this.root.getChildByPath( \"FragmentFlag\" ) ;\n        if( this.flagmentFlag != null ) {\n            this.flagmentFlag.active = false ; \n        }\n\n    }\n\n    public refresh( id : string ) {\n\n        if( this.icon == null ) return ; \n\n        // 普通图标\n        switch( id ) {\n\n            case ItemType.Money001 : {\n\n                this.icon.spriteFrame = PfMgrIcon.ins.money001.spriteFrame ;\n                NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n\n            }\n            break ; \n\n            case ItemType.Money002 : {\n\n                this.icon.spriteFrame = PfMgrIcon.ins.money002.spriteFrame ;\n                NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n\n            }\n            break ; \n\n            case ItemType.Stamina : {\n\n                this.icon.spriteFrame = PfMgrIcon.ins.stamina.spriteFrame ;\n                NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n\n            }\n            break ; \n\n            default : {\n\n                if( id.startsWith( \"Fragment\" ) ) {\n                    // 碎片\n\n                    this.flagmentFlag.active = true ; \n\n                    // 显示物件图标\n\n                    // 转换成1级的物件\n                    let id2 = id.replace( \"Fragment\" , \"\" ) + \"_1\" ; \n        \n                    let pf = PfMgrBagArticle.getPf( id2 ) ; \n        \n                    let main = pf.getChildByPath( \"Main\" ) ; \n                    let spr = main.getComponent( Sprite ) ; \n                    if( spr != null ) {\n                        this.icon.node.active = true ; \n                        this.icon.spriteFrame = spr.spriteFrame ; \n                        NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n                    }\n\n                }\n\n            }\n            break ;\n\n            // case ItemType.Fragment : \n            // {\n            //     this.flagmentFlag.active = true ; \n\n            //     // 转换成1级的物件\n            //     let id2 = cfg.type2 + \"_1\" ; \n    \n            //     let pf = PfMgrBagArticle.getPf( id2 ) ; \n    \n            //     let main = pf.getChildByPath( \"Main\" ) ; \n            //     let spr = main.getComponent( Sprite ) ; \n            //     if( spr != null ) {\n            //         this.icon.node.active = true ; \n            //         this.icon.spriteFrame = spr.spriteFrame ; \n            //         NodeSizeFit.trimmed( this.icon , this.iconSize ) ;\n            //     }\n\n            // }\n            // break ; \n\n        }\n\n        \n\n    }\n\n   \n    private iconSize : Size ; \n    \n}","import { instantiate, Label, Node, Size, Sprite, UITransform, Widget } from \"cc\";\r\nimport { ItemData } from \"./ItemData\";\r\nimport { SeqScaleShow } from \"../Misc/SeqScaleShow\";\r\nimport { UiItem } from \"./UiItem\";\r\n\r\n// 结算奖励\r\nexport class UiItemList {\r\n\r\n    public root : Node ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.pfItem = this.root.getChildByPath( \"Item\" ) ; \r\n        this.pfItem.active = false ; \r\n        // 停止拉伸，因为图标尺寸都不一样。\r\n        /*\r\n            3.8.3 设置 widget.enabled = false , destroy 都无效。还是会拉伸。\r\n            这样设置只是让复制的节点 enabled = false 不起效，复制的节点，还是有 Widget 组件。\r\n        */ \r\n        let ws = this.pfItem.getComponentsInChildren( Widget ) ; \r\n        for( let w of ws ) {\r\n            w.enabled = false ; \r\n            w.destroy() ; \r\n        }\r\n\r\n        // 删除界面多余的\r\n        for( let i = this.root.children.length - 1 ; i > 0 ; --i ) {\r\n            this.root.children[ i ].destroy()  ; \r\n        } // end for\r\n\r\n    }\r\n\r\n\r\n    public refresh( items : Array< ItemData > ) {\r\n\r\n        for( let i = 0 ; i < items.length ; ++i ) {\r\n\r\n            let root = instantiate( this.pfItem ) ;\r\n            root.setParent( this.pfItem.parent , false ) ; \r\n            root.active = true ; \r\n\r\n            let uiItem = new UiItem() ; \r\n            uiItem.init( root ) ;\r\n            uiItem.refreshByItemData( items[ i ] ) ; \r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n    // 显示\r\n    public showAnim( Interval = 0.2 ) {\r\n\r\n        let list = this.root.children.slice( 1 ) ;\r\n        if( list.length == 0 ) return ; \r\n        SeqScaleShow.exe( list , Interval ) ;\r\n\r\n    }\r\n\r\n    private pfItem : Node ; \r\n\r\n}\r\n\r\n","import { EventKeyboard, input, Input, KeyCode, Node, tween, Vec2, Vec3 } from \"cc\";\nimport { UiMain } from \"../UiMain\";\nimport { RoleMove } from \"../../../World/1.Base/Role/Misc/RoleMove\";\nimport { RoleMgr } from \"../../../World/1.Base/Role/Base/RoleMgr\";\nimport { BagView } from \"../../../World/2.Td/Bag/BagView\";\nimport { UiFeatureSel } from \"../../Popup/FeatureSel/UiFeatureSel\";\nimport { PlayerGradeOp } from \"../../../World/2.Td/Player/PlayerGradeOp\";\nimport { UiDebug } from \"../../../../Common/Ui/UiDebug\";\n\n// 键盘输入\nexport class UiKeyboard {\n\n    public static ins : UiKeyboard = null ; \n\n    public init() {\n\n        // let root = new Node( \"Keyboard\" ) ; \n        // root.setParent( UiMain.ins.root ) ;\n\n        // 只能用这种全局的方式\n        input.on( Input.EventType.KEY_DOWN, this.onKeyDown, this ) ; \n        input.on( Input.EventType.KEY_UP, this.onKeyUp, this ) ; \n\n    }\n    \n    private onKeyDown (event: EventKeyboard) {\n\n        switch(event.keyCode) {\n\n            case KeyCode.KEY_A: {\n\n            }\n            break;\n\n            case KeyCode.KEY_D : {\n\n                if( UiDebug.ins == null ) {\n                    UiDebug.loadAndCreateIns() ; \n                }\n                else {\n                    UiDebug.ins.root.destroy() ;\n                    UiDebug.ins = null ; \n\n                }\n                \n            }\n            break ;\n\n            case KeyCode.KEY_W : {\n\n            }\n            break ; \n\n            case KeyCode.KEY_S : {\n\n            }\n            break ; \n            \n        }\n\n\n\n    }\n\n    private onKeyUp (event: EventKeyboard) {\n\n        switch(event.keyCode) {\n\n            case KeyCode.KEY_Q : {\n                this.onClick_Q() ; \n            }\n            break ;\n\n            case KeyCode.KEY_A: {\n                this.onClick_A() ; \n            }\n            break;\n            \n        }\n\n    }\n\n    private onClick_Q() {\n\n        PlayerGradeOp.addExp( 150 ) ;\n\n    }\n\n    private onClick_A() {\n\n        BagView.enter() ; \n\n    }\n\n\n}","import { EventKeyboard, Input, input, KeyCode } from \"cc\";\nimport { UiDebug } from \"../../Common/Ui/UiDebug\";\n\n// 键盘输入\nexport class UiKeyboard {\n\n    public static ins : UiKeyboard = null ; \n\n    public init() {\n\n        // 只能用这种全局的方式\n        input.on( Input.EventType.KEY_DOWN, this.onKeyDown, this ) ; \n        input.on( Input.EventType.KEY_UP, this.onKeyUp, this ) ; \n\n    }\n    \n    private onKeyDown (event: EventKeyboard) {\n\n        switch(event.keyCode) {\n\n            case KeyCode.KEY_D : {\n\n                if( UiDebug.ins == null ) {\n                    UiDebug.loadAndCreateIns() ; \n                }\n                else {\n                    UiDebug.ins.root.destroy() ;\n                    UiDebug.ins = null ; \n                }\n                \n            }\n            break ;\n            \n        }\n\n    }\n\n    private onKeyUp (event: EventKeyboard) {\n\n        switch(event.keyCode) {\n\n            case KeyCode.KEY_Q : {\n\n            }\n            break ;\n\n            case KeyCode.KEY_A: {\n\n            }\n            break;\n            \n        }\n\n    }\n\n}","import { _decorator, Component, Node, Input } from 'cc';\n\n\nexport class UiLeft {\n\n    public static ins = new UiLeft() ; \n\n    public root : Node ; \n\n    //排行榜按钮\n    public btnRanking:Node;\n    //邀请有礼按钮\n    public btnInvite:Node;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.btnInvite=this.root.getChildByPath(\"btnInvite\");\n\n        this.btnRanking=this.root.getChildByPath(\"btnRanking\");\n\n        this.btnInvite.on(Input.EventType.TOUCH_END,()=>{\n\n        });\n\n    }\n}\n\n\n","import { Input, Label, Node } from \"cc\";\nimport { Account } from \"../../../../../Common/Account/Account\";\nimport { CfgLevelWaveMgr } from \"../../../../../Game/World/2.Td/Level/CfgLevelWaveMgr\";\nimport { UiLevelThumbnail } from \"./UiLevelThumbnail\";\nimport { UiLevelBtnList } from \"./UiLevelBtnList\";\nimport { UiLevelArrow } from \"./UiLevelArrow\";\nimport { UiWaveReward } from \"./UiWaveReward\";\nimport { UiLevelInfo } from \"./UiLevelInfo\";\n\n\nexport class UiLevel {\n\n    public static ins : UiLevel = null ; \n\n    // 当前选择的关卡索引\n    public selLevelIdx = 0 ; \n\n    public root : Node ; \n\n    public info = new UiLevelInfo() ; \n\n    // 箭头\n    public arrow = new UiLevelArrow() ; \n\n    // 按钮列表\n    public btnList = new UiLevelBtnList() ; \n\n    // 关卡缩略图\n    public thumbnail = new UiLevelThumbnail() ; \n\n    public waveReward = new UiWaveReward() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.btnList.uiLevel = this ; \n        this.btnList.init( this.root.getChildByPath( \"BtnList\" ) ) ;\n\n        this.info.uiLevel = this ; \n        this.info.init( this.root.getChildByPath( \"Info\" ) ) ; \n\n        this.arrow.uiLevel = this ; \n        this.arrow.init( this.root.getChildByPath( \"Arrow\" ) ) ;\n        \n        this.thumbnail.init( this.root.getChildByPath( \"Thumbnail\" ) ) ; \n\n        this.waveReward.init( this.root.getChildByPath( \"WaveReward\" ) ) ; \n\n        this.setSelLevelIdx( Account.ins.mainLevel.levelIdx ) ;\n        this.refresh() ; \n\n    }\n\n    public setSelLevelIdx( idx : number ) {\n\n        if( idx >= CfgLevelWaveMgr.main.length ) {\n            // 打完了最后一关。选择停留在最后一关\n            idx = CfgLevelWaveMgr.main.length - 1 ; \n        }\n\n        this.selLevelIdx = idx ; \n\n    }\n\n    public refresh() {\n\n        this.arrow.refresh() ; \n\n        this.info.refresh() ; \n\n        // 按钮显示\n        this.btnList.refresh( this.selLevelIdx ) ;\n\n        // 缩略图显示\n        this.thumbnail.refresh( this.selLevelIdx ) ; \n\n        // 波次奖励\n        this.waveReward.refresh( this.selLevelIdx ) ; \n        \n    }\n\n\n}\n\n\n\n","import { Input } from \"cc\";\r\nimport { CfgLevelWaveMgr } from \"../../../../../Game/World/2.Td/Level/CfgLevelWaveMgr\";\r\nimport { UiLevel } from \"./UiLevel\";\r\nimport { Node } from \"cc\";\r\n\r\n// 箭头的控制\r\nexport class UiLevelArrow {\r\n\r\n    public uiLevel : UiLevel = null ; \r\n\r\n    public root : Node ; \r\n\r\n    // 左箭头、右箭头\r\n    public btnArrowLeft : Node ; \r\n    public btnArrowRight : Node ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.btnArrowLeft = this.root.getChildByPath( \"btnArrowLeft\" ) ; \r\n        this.btnArrowLeft.on( Input.EventType.TOUCH_END , this.onClick_btnArrowLeft , this ) ;\r\n\r\n        this.btnArrowRight = this.root.getChildByPath( \"btnArrowRight\" ) ; \r\n        this.btnArrowRight.on( Input.EventType.TOUCH_END , this.onClick_btnArrowRight , this ) ;\r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        let main = CfgLevelWaveMgr.main ; \r\n        this.btnArrowLeft.active = this.uiLevel.selLevelIdx > 1 ; \r\n        this.btnArrowRight.active = this.uiLevel.selLevelIdx < main.length - 1 ; \r\n\r\n    }\r\n\r\n    private onClick_btnArrowLeft() {\r\n        if( this.uiLevel.thumbnail.isMoveCompleted == false ) return ; \r\n        this.uiLevel.selLevelIdx-- ; \r\n        this.uiLevel.refresh() ; \r\n    }\r\n\r\n    private onClick_btnArrowRight() {\r\n        if( this.uiLevel.thumbnail.isMoveCompleted == false ) return ; \r\n        this.uiLevel.selLevelIdx++ ; \r\n        this.uiLevel.refresh() ; \r\n        \r\n    }\r\n\r\n}","import { Input } from \"cc\";\r\nimport { SceneTransition } from \"../../../../../Common/Ui/UiLoadingScene\";\r\nimport { GameArg } from \"../../../../../Game/Init/GameArg\";\r\nimport { CfgLevelWaveMgr } from \"../../../../../Game/World/2.Td/Level/CfgLevelWaveMgr\";\r\nimport { Label } from \"cc\";\r\nimport { UiLevel } from \"./UiLevel\";\r\nimport { Node } from \"cc\";\r\nimport { Account } from \"../../../../../Common/Account/Account\";\r\nimport { UiStamina } from \"../../Margin/UiStamina\";\r\nimport { UiStaminaBuy } from \"../../../Popup/UiStaminaBuy\";\r\nimport { UiMain } from \"../../UiMain\";\r\nimport { UiToast } from \"../../../../../Common/Ui/UiToast\";\r\nimport { Lang } from \"../../../../../Common/Misc/Lang\";\r\nimport { DailyLimit } from \"../../../../../Common/Misc/DailyLimit\";\r\nimport { Ad } from \"../../../../../Common/Ad/Ad\";\r\nimport { UiWin } from \"../../../../../Game/Ui/Popup/Settle/UiWin\";\r\nimport { ItemDraw } from \"../../../../../Common/Item/ItemDraw\";\r\nimport { ItemGet } from \"../../../../../Common/Item/ItemGet\";\r\nimport { SoundBtnClickSetter } from \"../../../../../Common/Audio/SoundBtnClickSetter\";\r\nimport { Sound } from \"../../../../../Common/Audio/Sound\";\r\nimport { UiMoney001 } from \"../../Margin/UiMoney001\";\r\nimport { UiMoney002 } from \"../../Margin/UiMoney002\";\r\nimport { tween } from \"cc\";\r\nimport { Tween } from \"cc\";\r\nimport { Vec2 } from \"cc\";\r\nimport { Vec3 } from \"cc\";\r\n\r\n\r\n// 按钮列表部分\r\nexport class UiLevelBtnList {\r\n\r\n    public uiLevel : UiLevel ; \r\n\r\n    public root : Node ; \r\n\r\n    public btnStart = new UiBtnStart() ; \r\n\r\n    public lock : Node ; \r\n    public lockTxt : Label ; \r\n\r\n    public btnGrinding = new UiBtnGrinding() ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ;\r\n\r\n        this.btnStart.init( this.root.getChildByPath( \"btnStart\" ) ) ;\r\n        this.btnStart.refresh() ; \r\n\r\n        this.lock = this.root.getChildByPath( \"Lock\" ) ; \r\n        this.lockTxt = this.lock.getComponentInChildren( Label ) ;\r\n\r\n        this.btnGrinding.init( this.root.getChildByPath( \"btnGrinding\" ) ) ; \r\n\r\n    }\r\n\r\n    public refresh( currentLevelIdx : number ) {\r\n\r\n        if( currentLevelIdx < Account.ins.mainLevel.levelIdx ) {\r\n            // 打过的关\r\n            this.btnStart.root.active = true ; \r\n\r\n            this.lock.active = false ; \r\n\r\n            this.btnGrinding.root.active = true ; \r\n            this.btnGrinding.refresh() ; \r\n\r\n        }\r\n        else if( currentLevelIdx == Account.ins.mainLevel.levelIdx ) {\r\n            // 当前关\r\n            this.btnStart.root.active = true ; \r\n\r\n            this.lock.active = false ; \r\n\r\n            this.btnGrinding.root.active = false ; \r\n        }\r\n        else {\r\n            // 未打过的关\r\n            this.btnStart.root.active = false ; \r\n\r\n            this.lock.active = true ; \r\n            let str = \"通过章节{1}后解锁\" ;\r\n            str = str.replace( \"{1}\" , currentLevelIdx.toString() ) ;\r\n            this.lockTxt.string = str  ;\r\n\r\n            this.btnGrinding.root.active = false ; \r\n\r\n        }\r\n        \r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n// 按钮 开始游戏\r\nexport class UiBtnStart {\r\n\r\n    public root : Node ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\r\n\r\n        this.refresh() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        this.animScale() ; \r\n\r\n    }\r\n\r\n    // 播放缩放动画\r\n    private animScale() {\r\n\r\n        Tween.stopAllByTarget( this.root ) ; \r\n        \r\n        let d = 0.5 ; \r\n\r\n        tween( this.root ).sequence(\r\n            tween( this.root ).to( d , { scale : new Vec3( 1.1 , 1.1 , 1.1 ) } ) , \r\n            tween( this.root ).to( d , { scale : Vec3.ONE } ) ,\r\n            tween( this.root ).delay( 0.5 ) , \r\n        ).repeatForever().start() ;  \r\n\r\n    }\r\n\r\n    public onClick() {\r\n\r\n        // 扣体力\r\n        let s = Account.ins.stamina ;\r\n        let t = s.current - 5 ;\r\n        if( t < 0 ) {\r\n            // 体力不足\r\n\r\n            UiStaminaBuy.create( UiMain.ins.root ).show() ; \r\n\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_SiaminaNotEnough\" ) ) ;\r\n\r\n            return ;\r\n        }\r\n        s.current = t ;\r\n        // 刷新显示\r\n        UiStamina.ins.refresh() ; \r\n\r\n        let uiLevel = UiLevel.ins ; \r\n\r\n        let cfgLevel = CfgLevelWaveMgr.main[ uiLevel.selLevelIdx ] ; \r\n\r\n        GameArg.ins.levelId = cfgLevel.id ; \r\n        GameArg.ins.mainIdx = uiLevel.selLevelIdx ; \r\n\r\n        SceneTransition.exe( \"Game\" ) ;\r\n\r\n    }\r\n\r\n}\r\n\r\n// 扫荡按钮\r\nexport class UiBtnGrinding {\r\n\r\n    public root : Node ; \r\n\r\n    // 今日剩余次数\r\n    public leftToday : Label ;\r\n\r\n    // 广告标志\r\n    public adFlag : Node ; \r\n\r\n    public dailyLimit = new DailyLimit( \"DailyLimit_Grinding\" , 5 ) ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.dailyLimit.load() ; \r\n\r\n        this.root = node ; \r\n\r\n        this.leftToday = this.root.getChildByPath( \"LeftToday\" ).getComponent( Label ) ;\r\n\r\n        this.adFlag = this.root.getChildByPath( \"AdFlag\" ) ; \r\n\r\n        this.refresh() ; \r\n        \r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \r\n\r\n    }\r\n\r\n\r\n    public refresh() {\r\n\r\n        this.leftToday.node.active = false ; \r\n        this.adFlag.active = false ; \r\n\r\n        if( this.dailyLimit.current <= 0 ) {\r\n\r\n            this.adFlag.active = true ; \r\n\r\n            return ; \r\n        }\r\n\r\n        this.leftToday.node.active = true ; \r\n        let str = Lang.get( \"Home_LeftToday\" ).replace( \"{1}\" , this.dailyLimit.current.toString() ) ;\r\n        this.leftToday.string = str ; \r\n\r\n    }\r\n\r\n    private onClick() {\r\n\r\n        if( this.dailyLimit.current > 0 ) {\r\n            this.dailyLimit.decrement() ; \r\n            this.dailyLimit.save() ; \r\n\r\n            this.refresh() ; \r\n\r\n            // 获得奖励\r\n            this.rewardGet() ; \r\n\r\n            return ; \r\n\r\n        }\r\n\r\n        // 看广告\r\n\r\n        let onSuccess = ()=>{\r\n            this.rewardGet() ; \r\n        } ;\r\n        let onCancel = ()=>{\r\n\r\n        } ;\r\n        let onError = ()=>{\r\n\r\n        } ; \r\n        Ad.ins.rewardShow( onSuccess , onCancel , onError ) ;\r\n\r\n    }\r\n\r\n    // 得到奖励\r\n    private rewardGet() {\r\n\r\n        let levelId = UiLevel.ins.selLevelIdx.toString() ;\r\n\r\n        let uiWin = UiWin.create( UiMain.ins.root ) ; \r\n        uiWin.show() ; \r\n        let id = \"Level_\" + levelId + \"_Win\" ; \r\n        let items = ItemDraw.exe( id ) ; \r\n        uiWin.itemList.refresh( items ) ; \r\n        uiWin.itemList.showAnim( 0.1 ) ; \r\n        // uiWin.itemList.showAnim() ; \r\n        ItemGet.addList( items ) ; \r\n\r\n        // 重写按钮 确定\r\n        uiWin.btnOK.off( Input.EventType.TOUCH_END ) ; \r\n        uiWin.btnOK.on( Input.EventType.TOUCH_END , ()=>{\r\n            Sound.ins.btnClick() ; \r\n            uiWin.root.destroy() ; \r\n        } ) ; \r\n\r\n        // 重写按钮 分享双倍\r\n        uiWin.btnShare.off( Input.EventType.TOUCH_END ) ; \r\n\r\n        // 刷新界面数值\r\n        UiMoney001.ins.refresh() ; \r\n        UiMoney002.ins.refresh() ; \r\n\r\n    }\r\n\r\n}","import { Label } from \"cc\";\r\nimport { Account } from \"../../../../../Common/Account/Account\";\r\nimport { CfgLevelWaveMgr } from \"../../../../../Game/World/2.Td/Level/CfgLevelWaveMgr\";\r\nimport { LevelString } from \"../../../../../Game/World/2.Td/Level/LevelString\";\r\nimport { UiLevel } from \"./UiLevel\";\r\nimport { Node } from \"cc\";\r\n\r\n// 关卡信息\r\nexport class UiLevelInfo {\r\n\r\n    public uiLevel : UiLevel = null ; \r\n\r\n    public root : Node ; \r\n\r\n    // 关卡名\r\n    public levelName : Label ; \r\n\r\n    // 最高记录\r\n    public best : Label ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.levelName = this.root.getChildByPath( \"LevelName\" ).getComponent( Label ) ; \r\n\r\n        this.best = this.root.getChildByPath( \"Best\" ).getComponent( Label ) ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        this.refreshLevelName() ; \r\n\r\n        this.refreshBest() ; \r\n\r\n    }\r\n\r\n    public refreshLevelName() {\r\n\r\n        let main = CfgLevelWaveMgr.main ; \r\n\r\n        let selLevelIdx = this.uiLevel.selLevelIdx ;\r\n\r\n        // 关卡名字\r\n        let levelData = main[ selLevelIdx ] ; \r\n        let str = LevelString.getName( levelData.id ) ;\r\n        // 加上序号前缀\r\n        str = selLevelIdx.toString() + \".\" + str ; \r\n        this.levelName.string = str ; \r\n\r\n    }\r\n\r\n\r\n    public refreshBest() {\r\n\r\n        let selLevelIdx = this.uiLevel.selLevelIdx ;\r\n\r\n        // 最高记录\r\n        this.best.node.active = true ; \r\n        if( selLevelIdx < Account.ins.mainLevel.levelIdx ) {\r\n            // 打过的关\r\n            this.best.string = \"已通关\" ; \r\n        }\r\n        else if( selLevelIdx == Account.ins.mainLevel.levelIdx ) {\r\n            // 当前关\r\n            let main = CfgLevelWaveMgr.main ; \r\n            let levelData = main[ selLevelIdx ] ; \r\n            let str = \"最高记录：{1}/{2}\" ; \r\n            str = str.replace( \"{1}\" , Account.ins.mainLevel.waveIdx.toString() ) ; \r\n            str = str.replace( \"{2}\" , ( levelData.waves.length - 1 ).toString() ) ; \r\n            this.best.string = str ; \r\n        }\r\n        else {\r\n            // 未打过的关\r\n            this.best.node.active = false ; \r\n        }\r\n\r\n    }\r\n\r\n}","import { Vec3 } from \"cc\";\r\nimport { PfLevelThumbnail } from \"./PfLevelThumbnail\";\r\nimport { Sprite } from \"cc\";\r\nimport { Account } from \"../../../../../Common/Account/Account\";\r\nimport { Color } from \"cc\";\r\nimport { Node } from \"cc\";\r\nimport { instantiate } from \"cc\";\r\nimport { CfgLevelGeneralMgr } from \"db://assets/Script/Game/World/2.Td/Level/CfgLevelGeneralMgr\";\r\nimport { tween } from \"cc\";\r\n\r\n// 关卡缩略图\r\nexport class UiLevelThumbnail {\r\n\r\n    // 是否移动完成\r\n    public isMoveCompleted = false ; \r\n\r\n    // 关卡索引\r\n    public idx = -1 ; \r\n\r\n    public root : Node ;\r\n\r\n    // 当前的\r\n    public current : Node = null ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n    }\r\n\r\n    public refresh( idx : number ) {\r\n\r\n        if( this.idx == idx ) return ; \r\n\r\n        if( this.idx == -1 ) {\r\n            // 第一次 直接显示\r\n\r\n            // 清除掉之前的\r\n            this.root.removeAllChildren() ; \r\n            this.current = this.create( idx ) ; \r\n            this.isMoveCompleted = true ; \r\n        }\r\n        else if( this.idx < idx  ) {\r\n            this.isMoveCompleted = false ; \r\n            let node2 = this.create( idx ) ; \r\n            this.move( node2 , true ) ;\r\n        }\r\n        else {\r\n            this.isMoveCompleted = false ; \r\n            let node2 = this.create( idx ) ; \r\n            this.move( node2 , false ) ; \r\n\r\n        }\r\n\r\n        this.idx = idx ; \r\n\r\n    }\r\n\r\n    // 创建缩略图节点\r\n    private create( idx : number ) : Node {\r\n\r\n        // 缩略图ID和地图ID配对。\r\n        let cfg = CfgLevelGeneralMgr.data.get( idx.toString() ) ;\r\n        if( cfg == null ) return ; \r\n        let id = cfg.mapId ; \r\n\r\n        // 显示图标\r\n        let pf = PfLevelThumbnail.ins.root.getChildByPath( id ) ;\r\n        if( pf == null ) return ; \r\n        let node = instantiate( pf ) ;\r\n        node.setParent( this.root , false ) ; \r\n        node.position = Vec3.ZERO ; \r\n\r\n\r\n        let sprites = node.getComponentsInChildren( Sprite ) ; \r\n        // 图标\r\n        if( idx < Account.ins.mainLevel.levelIdx ) {\r\n            // 打过的关\r\n            for( let spr of sprites ) {\r\n                spr.color = Color.WHITE ; \r\n            } // end for\r\n        }\r\n        else if( idx == Account.ins.mainLevel.levelIdx ) {\r\n            // 当前关\r\n            for( let spr of sprites ) {\r\n                spr.color = Color.WHITE ; \r\n            } // end for\r\n        }\r\n        else {\r\n            // 未打过的关\r\n            for( let spr of sprites ) {\r\n                spr.color = Color.GRAY ; \r\n            } // end for\r\n\r\n        }\r\n\r\n        return node ; \r\n\r\n    }\r\n\r\n    public move( target : Node , isLeft : boolean ) {\r\n\r\n        if( this.current == null && target == null ) {\r\n            // 这种情况是 移走和移入都没节点，在正式版一般不会出现。\r\n            this.isMoveCompleted = true ; \r\n            return ; \r\n        }\r\n\r\n        // 决定运动的方向\r\n        let len = 1200 ; \r\n        let pos1 = new Vec3() ; \r\n        let pos2 = new Vec3() ; \r\n        if( isLeft ) {\r\n            pos1.x = -len ; \r\n            \r\n            pos2.x = len ;\r\n        }\r\n        else {\r\n            pos1.x = len ; \r\n            pos2.x = -len ;\r\n        }\r\n\r\n        let d = 0.3 ; \r\n\r\n        // 移走\r\n        let current = this.current ;\r\n        if( current != null ) {\r\n            tween( current ).to( d , { position : pos1 } ).call( ()=>{\r\n                this.isMoveCompleted = true ; \r\n                current.destroy() ; \r\n                current = null ; \r\n            } ).start() ;\r\n        }\r\n\r\n        // 移入\r\n        this.current = target ; \r\n        if( target != null ) {\r\n            target.position = pos2 ; \r\n            // 移入\r\n            tween( target ).to( d , { position : Vec3.ZERO } ).call( ()=>{\r\n                this.current = target ; \r\n                this.isMoveCompleted = true ; \r\n            } ).start() ; \r\n    \r\n        }\r\n\r\n    }\r\n\r\n}","import { instantiate } from \"cc\";\nimport { Node } from \"cc\";\n\n\n/*\n    Ui 列表节点条目生成管理\n\n    复用条目节点，不足的生成。多余的隐藏。\n\n*/ \nexport class UiListItemGenMgr {\n\n    // 生成父节点\n    public root : Node ; \n\n    // 预制\n    public pf : Node ; \n\n    // 列表\n    public list = new Array< Node >() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.pf = this.root.children[ 0 ] ; \n\n        // 预先加入一个。利用好预制的条目\n        this.list.push( this.pf ) ; \n\n    }\n\n    // 设置条目总数\n    public setItemCount( n : number ) {\n\n        let diff = n - this.list.length ; \n        for( let i = 0 ; i < diff ; ++i ){\n\n            let node = instantiate( this.pf ) ;\n            node.setParent( this.pf.parent ) ;\n            node.active = true ; \n            this.list.push( node ) ;\n\n        } // end for\n\n        // 不显示多余的\n        for( let i = this.list.length + diff ; i < this.list.length ; ++i ) {\n            this.list[ i ].active = false ; \n        }\n\n    }\n\n}","import { director, Game, game, Node, Prefab, resources, Tween, tween, UIOpacity } from \"cc\";\nimport { GameArg } from \"../../Game/Init/GameArg\";\nimport { StringUtil } from \"../../SL/Common/StringUtil\";\nimport { LevelLoad } from \"../../Game/Init/LevelLoad/LevelLoad\";\nimport { CfgLevelGeneralMgr } from \"../../Game/World/2.Td/Level/CfgLevelGeneralMgr\";\n\nexport class UiLoadingScene {\n\n    public static ins = new UiLoadingScene() ; \n\n    public root : Node ; \n\n    public opa : UIOpacity ; \n\n    // 显示载入的节点\n    public loading : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.root.active = false ; \n\n        this.loading = this.root.getChildByPath( \"Loading\" ) ; \n\n        this.opa = this.root.getComponent( UIOpacity ) ; \n        this.opa.opacity = 0 ; \n\n        director.addPersistRootNode( this.root ) ; \n\n    }\n\n    public fadeIn( onComplete : ()=>void = null ) {\n\n        this.loading.active = false ; \n\n        this.root.active = true ; \n        this.opa.opacity = 0 ; \n        tween( this.opa ).to( 0.2 , { opacity : 255 } ).call( ()=>{\n            onComplete?.() ; \n\n            // 延迟一段时间后显示。如果载入很快，渐变完就载入，就不用显示这个\n            tween( this.loading ).delay( 0.3 ).call( ()=>{\n                this.loading.active = true ; \n            } ).start() ;\n\n        } ).start() ; \n\n    }\n\n    public fadeOut() {\n\n        tween( this.opa ).to( 0.2 , { opacity : 0 } ).call( ()=>{\n            this.root.active = false ; \n\n            Tween.stopAllByTarget( this.loading ) ; \n            this.loading.active = false ; \n\n        } ).start() ; \n\n    }\n\n}\n\n// 场景切换控制\nexport class SceneTransition {\n\n    public static sceneName : string = null ; \n\n    public static exe( name : string ) {\n\n        this.sceneName = name ; \n\n        this.preloadComplete = false ; \n\n        UiLoadingScene.ins.fadeIn( ()=>{\n            this.startCheck() ; \n        } ) ; \n        \n        // 预先载入场景\n        director.preloadScene( name , ( err )=>{\n\n            if( name == \"Game\" ) {\n                this.loadGameLevel() ;\n                return ; \n            }\n\n            this.preloadComplete = true ; \n\n        } ) ;\n\n    }\n\n    // 开始检查场景载入完成\n    private static startCheck() {\n\n        // 检测场景载入完成\n        let t = tween( UiLoadingScene.ins.root ).sequence(\n\n            tween( UiLoadingScene.ins.root ).delay( 0.01 ) , \n            tween( UiLoadingScene.ins.root ).call( ()=>{\n\n                if( this.preloadComplete == true ) {\n                    t.stop() ; \n                    director.loadScene( this.sceneName , ()=>{\n                        UiLoadingScene.ins.fadeOut() ; \n                    } );\n                    \n                }\n\n            } )\n\n        ).repeatForever().start() ; \n\n    }\n\n    // 载入关卡地图\n    private static loadGameLevel() {\n\n        let id = GameArg.ins.mainIdx.toString() ;\n        let cfg = CfgLevelGeneralMgr.data.get( id ) ;\n        let path = \"Game/Level/\" + cfg.mapId ;\n        resources.load( path , Prefab , ( err , data )=>{\n\n            if( err != null ) {\n\n                console.error( \"没有配置关卡地图\" ) ;\n\n                // path = \"Game/Level/0001_Layer0\" ;\n                // resources.load( path , Prefab , ( err , data )=>{\n                //     LevelLoad.pfLayer0 = data ; \n                //     this.preloadComplete = true ; \n                // } ) ;\n\n                return ;\n            }\n\n            LevelLoad.pfMap = data ; \n            this.preloadComplete = true ; \n\n        } ) ; \n\n    }\n\n    public static preloadComplete = false ; \n\n}","import { director, Input, instantiate, Node, Prefab, resources } from \"cc\";\nimport { SceneTransition } from \"../../../../Common/Ui/UiLoadingScene\";\nimport { UiItemList } from \"../../../../Common/Item/UiItemList\";\n\n// 失败UI\nexport class UiLose {\n\n    public static pf : Prefab ; \n\n    public static loadPf() {\n\n        if( this.pf != null ) return ; \n\n        resources.load( \"Game/Ui/Settle/Lose\" , Prefab , ( err , data )=>{\n            this.pf = data ;\n        } ) ;\n\n    }\n\n    public static create( parent : Node ) : UiLose {\n\n        let root = instantiate( this.pf ) ;\n        let ui = new UiLose() ;\n        ui.init( root ) ; \n        ui.root.setParent( parent , false ) ; \n        return ui ; \n\n    }\n\n\n    public root : Node ;\n\n    // 物品列表\n    public itemList = new UiItemList() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnOK = this.root.getChildByPath( \"BtnList/btnOK\" ) ;\n        btnOK.on( Input.EventType.TOUCH_END , this.onClick_btnOK , this ) ;\n\n        let btnShare = this.root.getChildByPath( \"BtnList/btnShare\" ) ;\n        btnShare.on( Input.EventType.TOUCH_END , this.onClick_btnShare , this ) ;\n\n        this.itemList.init( this.root.getChildByPath( \"Reward\" ) ) ; \n        \n    }\n\n    public show() {\n        this.root.active = true ; \n    }\n\n    private onClick_btnOK() {\n\n        // director.loadScene( \"Home\" ) ; \n        SceneTransition.exe( \"Home\" ) ; \n    }\n\n    private onClick_btnShare() {\n\n    }\n\n}","import { find, Node } from \"cc\";\nimport { UiBag } from \"../Bag/UiBag\";\nimport { UiBattle } from \"./Page/Battle/UiBattle\";\nimport { UiTop } from \"./Margin/UiTop\";\nimport { UiTabHeaderBottom } from \"../../../SL/Cocos/Ui/UiTabHeader\";\nimport { UiShop } from \"./Page/Shop/UiShop\";\nimport { Test1 } from \"./Page/Test1/Test1\";\nimport { Test2 } from \"./Page/Test2/Test2\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\nimport { UiBottomTabPage } from \"./UiBottomTab\";\n\n\nexport class UiMain {\n\n    public static ins = new UiMain() ; \n\n    public root : Node ; \n\n    public init() {\n\n        this.root = find( \"Canvas\" ) ;\n\n        UiBottomTabPage.ins = new UiBottomTabPage() ; \n        UiBottomTabPage.ins.init( this.root ) ;\n\n        UiTop.ins = new UiTop() ; \n        UiTop.ins.init( this.root.getChildByPath( \"Top\" ) ) ;\n\n        // 添加按钮音效\n        SoundBtnClickSetter.exe( this.root ) ; \n        \n    }\n\n\n\n}","import { find, Node } from \"cc\";\nimport { UiTop } from \"./UiTop\";\nimport { UiPlayerGrade } from \"./UiPlayerGrade\";\nimport { UiFeature } from \"./Feature/UiFeature\";\nimport { UiFeatureSel } from \"../Popup/FeatureSel/UiFeatureSel\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\n\nexport class UiMain {\n\n    public static ins : UiMain = null ; \n\n    public root : Node ; \n\n    public init() {\n\n        this.root = find( \"Canvas\" ) ; \n\n        // UiKeyboard.ins = new UiKeyboard() ; \n        // UiKeyboard.ins.init() ; \n\n        UiFeatureSel.ins = UiFeatureSel.create( UiMain.ins.root ) ; \n        UiFeatureSel.ins.root.active = false ; \n\n        new UiTop().init( this.root.getChildByPath( \"Ui/Top\" ) );\n        \n        UiPlayerGrade.ins = new UiPlayerGrade() ; \n        UiPlayerGrade.ins.init( find( \"Canvas/Ui/Bottom/Grade\" ) ) ; \n        UiPlayerGrade.ins.refresh() ; \n        \n        UiFeature.ins = new UiFeature() ; \n        UiFeature.ins.init( find( \"Canvas/Ui/Bottom/Feature\" ) ) ; \n        UiFeature.ins.refresh() ; \n\n        // 添加按钮音效\n        SoundBtnClickSetter.exe( this.root ) ; \n\n    }\n\n}","import { Label, Node } from \"cc\";\nimport { Player } from \"../../World/2.Td/Player/Player\";\n\n// 局内货币UI\nexport class UiMoney001 {\n\n    public static ins : UiMoney001 = null ; \n\n    public root : Node ; \n\n    public icon : Node ;\n\n    public val : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ; \n        this.val.string = \"\" ; \n\n        this.icon = this.root.getChildByPath( \"Icon\" ) ; \n\n        this.refresh() ; \n\n    }\n\n    public refresh() {\n\n        this.val.string = Player.ins.money001.toString() ; \n\n    }\n\n}","import { Label, Node } from \"cc\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { Input } from \"cc\";\nimport { UiBottomTabPage } from \"../UiBottomTab\";\nimport { UiShop } from \"../Page/Shop/UiShop\";\nimport { ScrollView } from \"cc\";\n\n// 货币1级\nexport class UiMoney001 {\n\n    public static ins : UiMoney001 = null ; \n\n    public root : Node ; \n\n    public val : Label ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ;\n        this.val.string = \"0\" ; \n\n        this.refresh() ; \n        \n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \n    }\n\n    public refresh() {\n\n        let a = Account.ins ; \n        this.val.string = a.money.money001.toString() ; \n\n    }\n\n    private onClick() {\n\n        let headerItem = UiBottomTabPage.ins.thb.items.find( ( e )=>{ return e.root.name == \"Shop\" ; } ) ;\n        headerItem.root.emit( Input.EventType.TOUCH_END ) ; \n\n        let sv = UiShop.ins.root.getComponentInChildren( ScrollView ) ;\n        sv.scrollToBottom() ; \n\n    }\n\n}","\r\nimport { Label, Node } from \"cc\";\r\nimport { Account } from \"../../../../Common/Account/Account\";\r\nimport { UiBottomTabPage } from \"../UiBottomTab\";\r\nimport { Input } from \"cc\";\r\nimport { ScrollView } from \"cc\";\r\nimport { UiShop } from \"../Page/Shop/UiShop\";\r\n\r\n// 局内货币UI\r\nexport class UiMoney002 {\r\n\r\n    public static ins : UiMoney002 = null ; \r\n\r\n    public root : Node ; \r\n\r\n    public icon : Node ;\r\n\r\n    public val : Label ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ; \r\n        this.val.string = \"\" ; \r\n\r\n        this.icon = this.root.getChildByPath( \"Icon\" ) ; \r\n\r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \r\n\r\n        this.refresh() ; \r\n\r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        this.val.string = Account.ins.money.money002.toString() ; \r\n\r\n    }\r\n\r\n    private onClick() {\r\n\r\n        let headerItem = UiBottomTabPage.ins.thb.items.find( ( e )=>{ return e.root.name == \"Shop\" ; } ) ;\r\n        headerItem.root.emit( Input.EventType.TOUCH_END ) ; \r\n\r\n        let sv = UiShop.ins.root.getComponentInChildren( ScrollView ) ;\r\n        sv.scrollToTop() ; \r\n\r\n    }\r\n\r\n}","import { Input, Label, Node, Prefab, Sprite, UITransform, Vec3, instantiate, resources } from \"cc\";\nimport { OsJudge } from \"../../../../SL/Cocos/Misc/OsJudge\";\n\n\n// 更多游戏\nexport class UiMoreGames {\n\n    // 创建 resources 载入机制\n    public static createRes( path : string , cb : ( ui : UiMoreGames )=>void ) {\n\n        resources.load( path , Prefab , ( err , data )=>{\n\n            let root = instantiate( data ) ; \n\n            let ui = new UiMoreGames() ;\n            ui.init( root ) ;\n\n            cb( ui ) ;\n\n        } ) ;\n\n    }\n\n    public root : Node ;\n\n    // 关闭按钮\n    public btnClose : Node ; \n\n    // 条目项\n    public items = new Array< UiMoreGamesItem >() ; \n\n    // 预设的图标\n    private icons : Node ; \n\n    // 条目预制\n    private pfItem : Node ; \n\n    // 关闭处理器。决定如何关闭UI\n    public closeHandler : ()=>void = null ; \n\n    // 点击条目\n    public onClickItem : ()=>void = null ;\n\n    public init( node : Node ) {\n\n        this.root = node ;\n\n        this.root.position = Vec3.ZERO ; \n\n        // 点击后销毁\n        this.closeHandler = ()=>{ this.root.destroy() ; } ;\n\n        // 关闭按钮\n        this.btnClose = this.root.getChildByPath(\"btnClose\") ; \n        this.btnClose.on( Input.EventType.TOUCH_END , ()=>{\n            this.closeHandler() ;\n        } , this ) ;\n\n        // 遮罩\n        let mask = this.root.getChildByPath(\"mask\") ; \n        mask.getComponent( UITransform ).setContentSize( 2000 , 2000 ) ;\n        mask.on( Input.EventType.TOUCH_END , ()=>{\n            this.closeHandler() ;\n        } , this ) ;\n        \n        this.icons = this.root.getChildByPath( \"Icons\" ) ;\n        this.icons.active = false ; \n\n        this.initItems() ; \n\n    }\n\n    private initItems() {\n\n        let itemsNode = this.root.getChildByPath( \"Items\" ) ; \n        let c = itemsNode.children ;\n\n        // 删除多余的\n        for( let i = c.length - 1 ; i > 0 ; --i ) {\n            c[ i ].destroy() ;\n        }\n\n        this.pfItem = c[ 0 ] ;\n        this.pfItem.active = false ;\n        \n    }\n\n    public refresh( cfg : UiMoreGamesCfg ) {\n\n        this.clear() ; \n\n        for( let i = 0 ;i < cfg.items.length ; ++i ) {\n            let cfgItem = cfg.items[ i ] ;\n\n            // 本机APP跳过\n            if( cfg.thisAppId == cfgItem.appId ) continue ;\n\n            this.addItem( cfgItem ) ;\n\n        } // end for\n\n    }\n\n    // 清除\n    public clear() {\n\n        for( let i = 0 ; i < this.items.length ; ++i ) {\n            this.items[ i ].root.destroy() ;\n        }\n\n        this.items.splice( 0 , this.items.length ) ;\n\n    }\n\n    public addItem( cfgItem : UiMoreGamesCfgItem ) {\n\n        let parent = this.pfItem.parent ; \n\n        let node = instantiate( this.pfItem ) ;\n        node.active = true ; \n        node.setParent( parent ) ;\n        let uiItem = new UiMoreGamesItem() ; \n        this.items.push( uiItem ) ;\n        uiItem.init( node ) ;\n\n        // 名字\n        uiItem.name.string = cfgItem.name ;\n\n        // 图标\n        let spr = this.icons.children.find( ( e )=>{ return e.name == cfgItem.iconId ; } ).getComponent( Sprite ) ;\n        uiItem.icon.spriteFrame = spr.spriteFrame ;\n\n        // 点击\n        node.on( Input.EventType.TOUCH_END , ()=>{\n\n            this.navigateToMiniProgram( cfgItem.appId ) ;\n\n            if( this.onClickItem != null ){ this.onClickItem() ; }\n            \n        } ) ;\n\n    }\n\n    private navigateToMiniProgram( appId ) {\n\n        // // @ts-ignore\n        if( OsJudge.isWx() == false ) return ;\n\n        // @ts-ignore\n        wx.navigateToMiniProgram({\n            appId: appId ,\n            path: '',\n            extraData: null ,\n            envVersion: '',\n            success(res) {\n                // 打开成功\n                console.log( \"跳转成功\" ) ;\n            }\n        })\n\n    }\n\n}\n\nexport class UiMoreGamesItem {\n\n    public root : Node ;\n\n    // 图标\n    public icon : Sprite ; \n\n    // 名称\n    public name : Label ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = this.root.getChildByPath( \"Icon/val\" ).getComponent( Sprite ) ;\n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n\n    }\n\n    \n\n}\n\n// 配置\nexport class UiMoreGamesCfg {\n    \n    public static create( thisAppId : string ) : UiMoreGamesCfg {\n\n        let ins = new UiMoreGamesCfg() ;\n\n        let item = new UiMoreGamesCfgItem() ;\n        ins.items.push( item ) ;\n        item.appId = \"wx1eead536288187e6\" ;\n        item.iconId = \"BlockBlast\" ;\n        item.name = \"方块爆破\" ; \n\n        // item = new UiMoreGamesCfgItem() ;\n        // ins.items.push( item ) ;\n        // item.appId = \"wxe5ceb461d21a27dc\" ;\n        // item.iconId = \"PopStar\" ;\n        // item.name = \"消灭星星\" ; \n\n        item = new UiMoreGamesCfgItem() ;\n        ins.items.push( item ) ;\n        item.appId = \"wxdaca7b7b61c07cd6\" ;\n        item.iconId = \"Snake\" ;\n        item.name = \"拖尾乱斗\" ; \n\n        ins.thisAppId = \"wx1eead536288187e6\" ;\n        ins.thisAppId = thisAppId ;\n\n        return ins ; \n\n    }\n\n    // 本APP ID\n    public thisAppId : string ;\n\n    // 所有 APP\n    public items = new Array<UiMoreGamesCfgItem>() ;\n\n}\n\nexport class UiMoreGamesCfgItem {\n\n    // 应用ID\n    public appId : string ; \n\n    // 图标ID\n    public iconId : string ;\n\n    // 名称\n    public name : string ;\n\n}","import { director, Input, instantiate, Node, Prefab, resources } from \"cc\";\nimport { GamePause } from \"../../World/2.Td/Flow/GamePause\";\nimport { SceneTransition } from \"../../../Common/Ui/UiLoadingScene\";\nimport { SoundBtnClickSetter } from \"../../../Common/Audio/SoundBtnClickSetter\";\nimport { UiSettings } from \"../../../Common/Ui/UiSettings\";\nimport { UiMain } from \"../Main/UiMain\";\nimport { UiFeature } from \"../Main/Feature/UiFeature\";\n\n\nexport class UiPause {\n\n    public static pf : Prefab ;\n\n    public static loadAndCreate( parent : Node , cb : ( ui : UiPause )=>void ) {\n\n        resources.load( \"Game/Ui/Pause\" , Prefab , ( err , data )=>{\n\n            this.pf = data ;\n\n            let root = instantiate( this.pf ) ;\n            let ui = new UiPause() ; \n            ui.init( root ) ;\n            ui.root.setParent( parent , false ) ;\n            cb( ui ) ;\n\n        } ) ;\n\n    }\n\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let btnHome = this.root.getChildByPath( \"BtnList/btnHome\" ) ;\n        btnHome.on( Input.EventType.TOUCH_END , ()=>{\n            // director.loadScene( \"Home\" ) ; \n            SceneTransition.exe( \"Home\" ) ; \n        } ) ; \n\n        let btnContinue = this.root.getChildByPath( \"BtnList/btnContinue\" ) ;\n        btnContinue.on( Input.EventType.TOUCH_END , ()=>{\n            GamePause.resume() ; \n            this.root.destroy() ; \n        } ) ; \n\n        let btnSettings = this.root.getChildByPath( \"BtnList/btnSettings\" ) ;\n        btnSettings.on( Input.EventType.TOUCH_END , ()=>{\n            UiSettings.create( UiMain.ins.root ).show() ; \n        } ) ; \n\n\n        SoundBtnClickSetter.exe( this.root ) ; \n\n    }\n\n    public refresh() {\n\n        let content = this.root.getChildByPath( \"Feature/sv/view/content\" ) ;\n\n        // 从特性面板中复制显示\n        for( let item of UiFeature.ins.items ) {\n            let node = instantiate( item.root ) ; \n            node.setParent( content ) ; \n        }\n\n    }\n\n}","import { Label, Node } from \"cc\";\nimport { Player } from \"../../World/2.Td/Player/Player\";\nimport { CfgUpgrade } from \"../../../Common/Cfg/CfgUpgrade\";\nimport { UiBar } from \"../Bar/UiBar\";\n\n// 玩家等级\nexport class UiPlayerGrade {\n\n    public static ins : UiPlayerGrade ; \n\n    public root : Node ; \n\n    public val : Label ; \n\n    public bar = new UiBar() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ; \n\n        this.bar.init( this.root.getChildByPath( \"Bar\" ) ) ; \n\n    }\n\n    public refresh() {\n\n        let g = Player.ins.grade ; \n\n        this.val.string = \"Lv.\" + g.grade ; \n\n        let expNeeded = CfgUpgrade.data[ g.grade ] ; \n        this.bar.setProgress( g.exp , expNeeded ) ; \n\n\n    }\n\n}","import { instantiate } from \"cc\";\r\nimport { Prefab } from \"cc\";\r\nimport { UiEffectPopup } from \"../../SL/Cocos/Ui/UiEffect\";\r\nimport { Node } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { Sprite } from \"cc\";\r\nimport { SpriteFrame } from \"cc\";\r\nimport { UITransform } from \"cc\";\r\nimport { SoundBtnClickSetter } from \"../Audio/SoundBtnClickSetter\";\r\nimport { BlockInputEvents } from \"cc\";\r\n\r\n// 弹出式UI基类\r\nexport class UiPopupBase {\r\n\r\n    public static pf : Prefab ; \r\n\r\n    // 这个方法不能继承，子类要重写。原因是不能用泛型类new\r\n    public static create( parent : Node ) : UiPopupBase {\r\n\r\n        let root = instantiate( this.pf ) ;\r\n        let ui = new UiPopupBase() ; \r\n        ui.init( root ) ;\r\n        ui.root.setParent( parent , false ) ; \r\n        return ui ; \r\n\r\n    }\r\n\r\n    public root : Node ; \r\n\r\n    public btnClose : Node ; \r\n\r\n    public cover : Sprite ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        SoundBtnClickSetter.exe( this.root ) ; \r\n        \r\n        // 关闭按钮\r\n        this.initBtnClose() ; \r\n\r\n        // 遮挡\r\n        this.initCover() ; \r\n\r\n    }\r\n\r\n    private initBtnClose() {\r\n        this.btnClose = this.root.getChildByPath( \"btnClose\" ) ;\r\n        this.btnClose?.on( Input.EventType.TOUCH_END , ()=>{\r\n            this.root.destroy() ; \r\n        } ) ;\r\n    }\r\n\r\n    // 初始化遮挡\r\n    private initCover() {\r\n\r\n        let coverNode = this.root.getChildByPath( \"Cover\" ) ;\r\n        if( coverNode == null ) {\r\n            // this.cover = new Node() ; \r\n            // let spr = this.cover.addComponent( Sprite ) ; \r\n            // spr.spriteFrame = SpriteFrame.createWithImage()\r\n            return ; \r\n        }\r\n\r\n        // 阻止点击穿透\r\n        if( coverNode.getComponent( BlockInputEvents ) == null ) {\r\n            coverNode.addComponent( BlockInputEvents ) ; \r\n        }\r\n\r\n        // 大小。考虑弹出显示缩放，足够覆盖其他\r\n        coverNode.getComponent( UITransform ).setContentSize( 9999 , 9999 ) ; \r\n\r\n        // 透明度\r\n        let spr = coverNode.getComponent( Sprite ) ; \r\n        let cr = spr.color.clone() ;\r\n        cr.a = 150 ; \r\n        spr.color = cr ; \r\n\r\n        this.cover = spr ; \r\n\r\n    }\r\n\r\n    public show() {\r\n\r\n        UiEffectPopup.show( this.root ) ; \r\n\r\n    }\r\n\r\n}","import { Input, Node } from 'cc';\nimport { UiSettings } from '../../../../../Common/Ui/UiSettings';\nimport { UiMain } from '../../UiMain';\nimport { UiDialog } from '../../../../../Common/Ui/UiDialog';\nimport { UiDailyCheckin } from '../../../Popup/DailyCheckin/UiDailyCheckin';\n\nexport class UiRight {\n\n    public static ins=new UiRight();\n\n    public root:Node;\n\n    //签到奖励按钮\n    public btnDailyCheckin:Node;\n\n    //设置按钮\n    public btnSettings:Node;\n\n    public init(node:Node){\n\n        this.root = node;\n\n        this.btnDailyCheckin = this.root.getChildByPath(\"btnDailyCheckin\");\n\n        this.btnSettings = this.root.getChildByPath(\"btnSettings\");\n        this.btnSettings.on( Input.EventType.TOUCH_END , ()=>{\n            UiSettings.create( UiMain.ins.root ).show() ;\n        } );\n\n        this.btnDailyCheckin.on(Input.EventType.TOUCH_END,()=>{\n            // UiDialog.create( UiMain.ins.root , \"正在开发...\" ).show() ;\n            UiDailyCheckin.create( UiMain.ins.root ).show() ;\n        });\n    }\n\n}\n\n\n\n","import { Input, Node, director } from \"cc\";\nimport { UiSwitch } from \"../../SL/Cocos/Ui/UiSwitch\";\nimport { AudioSettingsPersist } from \"../Audio/AudioSettingsPersist\";\nimport { Music } from \"../Audio/Music\";\nimport { Sound } from \"../Audio/Sound\";\nimport { Prefab } from \"cc\";\nimport { instantiate } from \"cc\";\nimport { SoundBtnClickSetter } from \"../Audio/SoundBtnClickSetter\";\nimport { UiEffectPopup } from \"../../SL/Cocos/Ui/UiEffect\";\n// import { Vibrate, VibratePersist } from \"../Misc/Vibrate\";\n// import { AppConfig } from \"../Misc/AppConfig\";\n\n// 设置的公共部分\nexport class UiSettings {\n\n    public static pf : Prefab ; \n\n    // 载入创建\n    public static create( parent : Node ) : UiSettings {\n\n        let root = instantiate( this.pf ) ; \n        let ui = new UiSettings() ; \n        ui.init( root ) ;\n        ui.root.setParent( parent , false ) ;\n        return ui ; \n\n    }\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        SoundBtnClickSetter.exe( this.root ) ;\n\n        let btnClose = this.root.getChildByPath(\"btnClose\") ; \n        btnClose?.on( Input.EventType.TOUCH_END , ()=>{ \n            this.root.destroy() ; \n        } ) ;\n\n        this.initVibrate() ; \n        this.initAudio() ; \n\n    }\n\n    public show() {\n        UiEffectPopup.show( this.root ) ;\n    }\n\n    public initVibrate() {\n\n        // // 音效\n        // let sound = new UiSwitch() ;\n        // sound.init( this.root.getChildByPath( \"Vibrate/Switch\" ) ) ;\n        // sound.isOn = Vibrate.ins.enabled ; \n        // sound.root.on( Input.EventType.TOUCH_END , ()=>{\n\n        //     Sound.ins.btnClick() ;\n\n        //     Vibrate.ins.enabled = sound.isOn;\n        //     VibratePersist.save() ; \n\n        //     if( Vibrate.ins.enabled == true ) {\n        //         Vibrate.ins.exe( 1 ) ;\n        //     }\n\n        // } ) ;\n\n        // let root = this.root.getChildByPath( \"Vibrate\" ) ;\n        // root.active = AppConfig.ins.vibrateEnabled ;\n\n    }\n\n    public initAudio() {\n\n        // 音效\n        let sound = new UiSwitch() ;\n        sound.init( this.root.getChildByPath( \"Sound/Switch\" ) ) ;\n        sound.isOn = Sound.ins.enabled ; \n        sound.root.on( Input.EventType.TOUCH_END , ()=>{\n            Sound.ins.enabled = sound.isOn ;\n            AudioSettingsPersist.save() ;\n            Sound.ins.btnClick() ;\n\n        } ) ;\n\n        // 音乐\n        let music = new UiSwitch() ;\n        music.init( this.root.getChildByPath( \"Music/Switch\" ) ) ;\n        music.isOn = Music.ins.enabled ; \n        music.root.on( Input.EventType.TOUCH_END , ()=>{\n\n            Music.ins.enabled = music.isOn ;\n            AudioSettingsPersist.save() ;\n            Sound.ins.btnClick() ;\n\n            if( music.isOn == false ) return ; \n\n            if( director.getScene().name == \"Home\" ) {\n\n            }\n            else {\n                Music.ins.home() ; \n            }\n\n        } ) ;\n\n    }\n\n}\n\n","import { Mask } from \"cc\";\nimport { Node } from \"cc\";\nimport { UiShopDaily } from \"./UiShopDaily\";\nimport { instantiate } from \"cc\";\nimport { UiShopMoney001 } from \"./UiShopMoney001\";\n\nexport class UiShop {\n\n    public static ins : UiShop = new UiShop() ; \n\n    public root : Node ; \n\n    public sv \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let sv = this.root.getChildByPath( \"sv\" ) ;\n        let svView = sv.getChildByPath( \"view\" );\n        svView.getComponent( Mask ).enabled = true ; \n        let content = svView.getChildByPath( \"content\" ) ;\n\n        let shopDaily = new UiShopDaily() ; \n        shopDaily.init( content.getChildByPath( \"Daily\" ) ) ; \n\n        let shopMoney001 = new UiShopMoney001() ; \n        shopMoney001.init( content.getChildByPath( \"Money001\" ) ) ; \n\n    }\n\n}\n\n","import { Input } from \"cc\";\nimport { Label } from \"cc\";\nimport { Node } from \"cc\";\nimport { UiListItemGenMgr } from \"./UiListItemGenMgr\";\nimport { Sprite } from \"cc\";\nimport { DateTimeMgr } from \"db://assets/Script/SL/Common/Misc/DateTimeMgr\";\nimport { StringUtil } from \"db://assets/Script/SL/Common/StringUtil\";\nimport { tween } from \"cc\";\nimport { UiItem } from \"db://assets/Script/Common/Item/UiItem\";\nimport { CfgShop, CfgShopItem } from \"./CfgShop\";\nimport { Lang } from \"db://assets/Script/Common/Misc/Lang\";\nimport { Shuffle } from \"db://assets/Script/SL/Common/Misc/Shuffle\";\nimport { UiShopItem } from \"./UiShopItem\";\nimport { UiToast } from \"db://assets/Script/Common/Ui/UiToast\";\nimport { UiMain } from \"../../UiMain\";\nimport { DateTimeUtil } from \"db://assets/Script/SL/Common/Misc/DateTimeUtil\";\nimport { sys } from \"cc\";\nimport { SoundBtnClickSetter } from \"db://assets/Script/Common/Audio/SoundBtnClickSetter\";\nimport { DailyLimit } from \"db://assets/Script/Common/Misc/DailyLimit\";\nimport { Ad } from \"db://assets/Script/Common/Ad/Ad\";\n\n\n\n// 每日商店\nexport class UiShopDaily {\n\n    public data = new ShopDailyData() ; \n\n    public root : Node ; \n\n    // 倒计时\n    public countdown : Label ; \n\n    public items = new Array< UiShopItem >() ; \n\n    public btnRefresh : UiShopDailyBtnRefresh = null ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let countdown = new UiShopDailyCountdown() ; \n        countdown.init( this.root.getChildByPath( \"Refresh/Countdown\" ) ) ; \n\n        this.btnRefresh = new UiShopDailyBtnRefresh() ; \n        this.btnRefresh.init( this.root.getChildByPath( \"Refresh/btnRefresh\" ) ) ; \n        this.btnRefresh.shopDaily = this ; \n\n        // 测试\n        // SoundBtnClickSetter.remove( this.root ) ; \n        // this.root.getChildByPath( \"List/Item\" ).off( Input.EventType.TOUCH_END ) ; \n\n        // 生成 8 个条目\n        let list = this.root.getChildByPath( \"List\" ) ; \n        let gen = new UiListItemGenMgr() ; \n        gen.init( list ) ; \n        gen.setItemCount( 8 ) ;\n        for( let i = 0 ; i < CfgShop.daliyFixed.length ; ++i ) {\n\n            let uiItem = new UiShopItem() ; \n            this.items.push( uiItem ) ; \n            uiItem.init( gen.list[ i ] ) ; \n\n        } // end for\n\n        for( let i = CfgShop.daliyFixed.length ; i < 8 ; ++i ) {\n\n            let uiItem = new UiShopDailyItem() ; \n            this.items.push( uiItem ) ; \n            uiItem.init( gen.list[ i ] ) ; \n            uiItem.shopDaily = this ; \n\n        } // end for\n\n        this.data.load() ; \n\n        this.refreshFixed() ; \n        this.refreshRnd() ; \n\n        this.startCheckReset() ; \n\n    }\n\n    // 检查重置\n    private startCheckReset() {\n\n        tween( this.root ).sequence(\n            tween( this.root ).delay( 2 ) , \n            tween( this.root ).call( ()=>{\n                if( this.data.checkGen() == true ) {\n\n                    for( let uiItem of this.items ) {\n                        uiItem.adDl?.load() ;\n                    }\n                    this.refreshFixed() ; \n                    this.refreshRnd() ; \n                    \n                    this.btnRefresh.dl.load() ; \n                    this.btnRefresh.refreshLeft() ; \n\n                }\n            } ) , \n        ).repeatForever().start() ;\n\n    }\n\n    // 刷新固定的\n    public refreshFixed() {\n\n        let list = CfgShop.daliyFixed ; \n        for( let i = 0 ; i < list.length ; ++i ) {\n            let uiItem = this.items[ i ] ;\n            uiItem.cfg = list[ i ] ; \n            uiItem.refresh() ; \n        } // end for\n\n    }\n\n    // 刷新随机的\n    public refreshRnd() {\n\n        let list = this.data.data ;\n        for( let i = 0 ; i < list.length ; ++i ) {\n\n            let dataItem = list[ i ] ; \n            let id = dataItem.id ; \n            let cfg = CfgShop.data.get( id ) ; \n\n            let idx = CfgShop.daliyFixed.length + i ; \n            if( idx >= this.items.length ) break ; \n\n            let uiItem = this.items[ idx ] ;\n            uiItem.cfg = cfg ; \n            uiItem.refresh() ; \n\n        } // end for\n\n    }\n\n}\n\n\nclass UiShopDailyItem extends UiShopItem {\n\n    public shopDaily : UiShopDaily = null ; \n\n    public override init( node : Node ) {\n\n        super.init( node ) ; \n\n        // 还原回默认的按钮点击事件\n        /*\n            为什么 off 后还有音效，因为 UiMain 会在之后添加音效。\n        */\n        this.root.off( Input.EventType.TOUCH_END ) ; \n        this.root.on( Input.EventType.TOUCH_END , ()=>{ this.onClick( ) ; } ) ; \n\n        this.onGetItems = ()=>{ this.onGetItems_( ) ; } ;\n\n    }\n\n    public override refresh() {\n\n        super.refresh() ; \n\n        this.soldOut.active = false ; \n\n        let dataItem = this.shopDaily.data.data.find( ( e )=>{ return e.id == this.cfg.id ; } ) ;\n        if( dataItem.left <= 0 ) {\n            // 售空\n            this.setSoldOut( ) ;\n        }\n        else {\n            \n\n        }\n\n    }\n\n    public override onClick( ) {\n\n        let dataItem = this.shopDaily.data.data.find( ( e )=>{ return e.id == this.cfg.id ; } ) ;\n        if( dataItem.left <= 0 ) {\n            UiToast.show( UiMain.ins.root , Lang.get( \"Shop_SoldOut\" ) , 1 ) ; \n            return ; \n        }\n\n        super.onClick() ; \n\n    }\n\n    // 设置售空\n    public setSoldOut( ) {\n\n        this.cost.root.active = false ; \n        this.costAd.active = false ; \n        this.soldOut.active = true ; \n\n    }\n\n    // 获得物品\n    public onGetItems_( ) {\n\n        let dataItem = this.shopDaily.data.data.find( ( e )=>{ return e.id == this.cfg.id ; } ) ;\n        dataItem.left-- ;\n        if( dataItem.left <= 0 ) {\n            this.setSoldOut( ) ; \n        }\n        this.shopDaily.data.save() ; \n\n    }\n\n}\n\n\n// 每日商店数据\nclass ShopDailyData {\n\n    // 配置项ID，是否领过\n    public data = new Array< ShopDailyDataItem >() ; \n\n    // 生成时候的日期\n    public dt : Date = null ; \n\n    // 检查是否要重新生成\n    public checkGen() : boolean {\n\n        let dtNow = DateTimeMgr.ins.getNowDateTime() ; \n        if( DateTimeUtil.dateEquals( this.dt , dtNow ) == false ) {\n            // 日期不等\n            // 重新刷新\n            this.gen() ; \n            return true ; \n        }\n\n        return false ; \n\n    }\n\n    public load() {\n\n        let str = sys.localStorage.getItem( \"ShopDaliy\" ) ;\n        if( str == null || str == \"\" ) {\n            this.gen() ; \n            return ; \n        }\n\n        let j = JSON.parse( str ) ; \n        this.dt = new Date( j[ \"Date\" ] ) ; \n        let dtNow = DateTimeMgr.ins.getNowDateTime() ; \n\n        if( DateTimeUtil.dateEquals( this.dt , dtNow ) == false ) {\n            // 日期不等\n            // 重新刷新\n            this.gen() ; \n            return ; \n        }\n\n        // 解析数据\n        let rnd = j[ \"Rnd\" ] ; \n        for( let i = 0 ; i < rnd.length ; ++i ) {\n            let j3 = rnd[ i ] ;\n\n            let item = new ShopDailyDataItem() ; \n            let id = j3[ \"Id\" ] ;\n            // 如果有找不到的配置项\n            if( CfgShop.data.get( id ) == null ) {\n                // 重新生成\n                this.gen() ; \n                return ; \n            }\n\n            this.data.push( item ) ;\n            item.id = id ;\n            item.left = Number( j3[ \"Left\" ] ) ; \n        }\n\n\n    }\n\n    // 生成数据\n    public gen() {\n\n        this.data.splice( 0 , this.data.length ) ; \n\n        let list = ShopDailyExtract.exe( 8 - CfgShop.daliyFixed.length ) ; \n        for( let i = 0 ; i < list.length ; ++i ) {\n            let cfg = list[ i ] ;\n            let dataItem = new ShopDailyDataItem() ;\n            dataItem.id = cfg.id ; \n            dataItem.left = 1 ; \n            this.data.push( dataItem ) ; \n        }\n\n        this.save() ; \n\n    }\n\n    public save() {\n\n        let j = {} ; \n\n        this.dt = DateTimeMgr.ins.getNowDateTime() ; \n        j[ \"Date\" ] = DateTimeUtil.toDateString( this.dt ) ; \n        let rnd = [] ;\n        j[ \"Rnd\" ] = rnd ; \n        \n        for( let i = 0 ; i < this.data.length ; ++i ) {\n            let dataItem = this.data[ i ] ;\n\n            let j3 = {} ;\n            rnd.push( j3 ) ;\n            j3[ \"Id\" ] = dataItem.id ; \n            j3[ \"Left\" ] = dataItem.left ; \n\n        } // end for\n\n        let str = JSON.stringify( j ) ; \n        sys.localStorage.setItem( \"ShopDaliy\" , str ) ;\n\n    }\n   \n\n}\n\nclass ShopDailyDataItem {\n\n    // 配置项的ID\n    public id : string ; \n\n    // 剩余购买次数\n    public left : number ; \n\n}\n\n\n// 每日商店抽取\nclass ShopDailyExtract {\n\n    public static exe( n : number ) : Array< CfgShopItem > {\n\n        let data = CfgShop.daliy.slice( ) ; \n        Shuffle.shuffleArray( data ) ; \n\n        return data.slice( 0 , n ) ; \n\n    }\n\n\n\n}\n\n\n\n// 倒计时\nexport class UiShopDailyCountdown {\n\n    public root : Node ; \n\n    public val : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ; \n        this.refresh() ; \n        this.startAutoRefresh() ; \n\n    }\n\n    public refresh() {\n\n        let dt = DateTimeMgr.ins.getNowDateTime() ;\n        // 今天流逝的秒数\n        let s = dt.getMinutes() * 60 + dt.getHours() * 60 * 60 + dt.getSeconds() ; \n\n        // 倒计时秒数\n        let s2 = 24 * 60 * 60 - s ;\n        this.val.string = this.secondToString( s2 ) ; \n\n    }\n\n    // 秒数转成 hh:mm:ss 字符串\n    public secondToString( s : number ) : string {\n\n        let h = Math.floor( s / ( 60 * 60 ) ) ; \n        let left = s % ( 60 * 60 ) ;\n        let m = Math.floor( left / 60 ) ;\n        left = left % 60 ;\n\n        let str = StringUtil.fillZero( h , 2 ) + \":\" + \n            StringUtil.fillZero( m , 2 ) + \":\" + \n            StringUtil.fillZero( left , 2 ) ; \n        return str ; \n\n    }\n\n    public startAutoRefresh() {\n\n        tween( this.root ).sequence(\n\n            tween( this.root ).delay( 1 ) , \n            tween( this.root ).call( ()=>{\n                this.refresh() ; \n            } )\n\n        ).repeatForever().start() ;\n\n    }\n\n}\n\n// 刷新按钮\nexport class UiShopDailyBtnRefresh {\n\n    public shopDaily : UiShopDaily ; \n\n    public root : Node ; \n\n    // 剩余次数\n    public left : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\n\n        this.left = this.root.getChildByPath( \"Left\" ).getComponent( Label ) ; \n\n        this.dl.load() ; \n\n        this.refreshLeft() ; \n\n\n    }\n\n    // 刷新剩余次数\n    public refreshLeft() {\n\n        let str = Lang.get( \"Home_LeftToday\" ).replace( \"{1}\" , this.dl.current.toString() ) ;\n        this.left.string = str ; \n\n    }\n\n    private onClick() {\n\n        if( this.dl.current <= 0 ) {\n            // 次数用完\n            let str = Lang.get( \"Home_NotEnoughForToday\" ) ; \n            UiToast.show( UiMain.ins.root , str ) ; \n            return ;\n        }\n\n        let onSuccess = ()=>{\n\n            this.dl.decrement() ; \n            this.dl.save() ; \n    \n            this.refreshLeft() ; \n    \n            this.shopDaily.data.gen() ; \n            this.shopDaily.refreshRnd() ; \n\n        } ;\n        let onCancel = ()=>{\n\n        } ;\n        let onError = ()=>{\n\n        } ; \n        Ad.ins.rewardShow( onSuccess , onCancel , onError ) ;\n\n    }\n\n    public dl = new DailyLimit( \"DailyLimit_ShopDailyBtnRefresh\" , 20 ) ;\n\n}","import { Node } from \"cc\";\nimport { Label } from \"cc\";\nimport { UiItemIcon } from \"db://assets/Script/Common/Item/UiItemIcon\";\nimport { Lang } from \"db://assets/Script/Common/Misc/Lang\";\nimport { CfgShopItem } from \"./CfgShop\";\nimport { ItemData } from \"db://assets/Script/Common/Item/ItemData\";\nimport { Input } from \"cc\";\nimport { UiGet } from \"../../../Popup/UiGet\";\nimport { UiMain } from \"../../UiMain\";\nimport { ItemSub } from \"db://assets/Script/Common/Item/ItemSub\";\nimport { ItemGet } from \"db://assets/Script/Common/Item/ItemGet\";\nimport { Ad } from \"db://assets/Script/Common/Ad/Ad\";\nimport { UiBgQuality } from \"db://assets/Script/Common/Ui/UiBgQuality\";\nimport { CfgItem, CfgItemMgr } from \"db://assets/Script/Common/Cfg/CfgItem\";\nimport { DailyLimit } from \"db://assets/Script/Common/Misc/DailyLimit\";\nimport { UiToast } from \"db://assets/Script/Common/Ui/UiToast\";\nimport { SoundBtnClickSetter } from \"db://assets/Script/Common/Audio/SoundBtnClickSetter\";\n\nexport class UiShopItem {\n\n    public cfg : CfgShopItem = null ; \n\n    public onGetItems : ()=>void = null ; \n\n    public root : Node ; \n\n    // 图标\n    public icon : UiItemIcon ; \n\n    // 数量\n    public count : Label ; \n\n    // 品质背景\n    public bg : UiBgQuality ; \n\n    // 名字\n    public name : Label ; \n    \n    // 花费\n    public cost : UiCost ; \n\n    // 广告\n    public costAd : Node ; \n    public costAdLabel : Label ; \n\n    // 售空标志\n    public soldOut : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        // SoundBtnClickSetter.exe( this.root ) ; \n        \n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ; \n\n        this.icon = new UiItemIcon() ; \n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ; \n\n        this.count = this.root.getChildByPath( \"Count\" ).getComponent( Label ) ; \n\n        let t = this.root.getChildByPath( \"Icon/bg\" ) ; \n        if( t != null ) {\n            this.bg = new UiBgQuality() ; \n            this.bg.init( t ) ;\n        }\n\n        this.cost = new UiCost() ; \n        this.cost.init( this.root.getChildByPath( \"Cost\" ) ) ; \n\n        this.costAd = this.root.getChildByPath( \"CostAd\" ) ; \n        this.costAd.active = false ; \n\n        this.costAdLabel = this.costAd.getChildByPath( \"val\" ).getComponent( Label ) ; \n\n        this.soldOut = this.root.getChildByPath( \"SoldOut\" ) ;\n        if( this.soldOut ) {\n            this.soldOut.active = false ; \n        }\n        \n\n    }\n\n    public refresh() {\n\n        this.refreshGeneral() ; \n\n        this.refreshCost() ; \n\n    }\n\n    // 刷新一般性信息\n    private refreshGeneral() {\n\n        // 条目名字\n        this.name.string = Lang.get( this.cfg.nameLangId ) ; \n\n        // 物品图标\n        this.icon.refresh( this.cfg.target.id ) ; \n\n        // 物品数量\n        this.count.string = \"x\" + this.cfg.target.count ; \n\n        // 物品背景 品质\n        if( this.bg != null ) {\n            let cfg2 = CfgItemMgr.data.get( this.cfg.target.id ) ;\n            if( cfg2 != null ) {\n                this.bg.show( cfg2.quality ) ;\n            }\n        }\n\n    }\n\n    // 刷新获取代价信息\n    private refreshCost() {\n\n        let isAd = this.cfg.adDaliyLimitId != null ; \n\n        this.cost.root.active = !isAd ; \n        this.costAd.active = isAd ; \n\n        if( isAd ) {\n            // 广告获取\n\n            if( this.adDl == null ) {\n                let id = \"DailyLimit_\" + this.cfg.adDaliyLimitId ; \n                this.adDl = new DailyLimit( id , this.cfg.adDaliyLimitTotal ) ; \n                this.adDl.load() ; \n            }\n\n            // 刷新次数\n            this.refreshAdLeft() ; \n\n        }\n        else {\n            // 消耗物品\n            this.cost.refresh( this.cfg.cost ) ;\n\n        }\n\n    }\n\n    // 刷新广告剩余次数\n    public refreshAdLeft() {\n\n        // 刷新次数\n        let str = Lang.get( \"Shop_Free\" ) + \"(\" + this.adDl.current + \")\" ; \n        this.costAdLabel.string = str ; \n\n    }\n\n    public onClick() {\n\n        if( this.cfg.adDaliyLimitId ) {\n\n            // 广告获取\n            this.ad( ) ; \n            return ; \n\n        }\n\n        if( ItemSub.exe( [ this.cfg.cost ] ) == false ) return ; \n\n        this.getItems() ; \n\n    }\n\n    // 广告获取\n    private ad() {\n\n        // 判断次数\n        if( this.adDl.current <= 0 ) {\n\n            UiToast.show( UiMain.ins.root , Lang.get( \"AdLeftNotEnough\" ) ) ; \n            return ; \n        }\n\n\n        let onSuccess = ()=>{\n\n            this.getItems() ; \n\n            this.adDl.decrement() ; \n            this.adDl.save() ; \n            this.refreshAdLeft() ; \n\n        } ;\n        let onCancel = ()=>{\n\n        } ;\n        let onError = ()=>{\n\n        } ; \n        Ad.ins.rewardShow( onSuccess , onCancel , onError ) ;\n\n    }\n\n    private getItems() {\n\n        // 提示\n        let uiGet = UiGet.create( UiMain.ins.root ) ; \n        uiGet.itemList.refresh( [ this.cfg.target ] ) ;\n        uiGet.itemList.showAnim() ; \n\n        // 到账\n        ItemGet.addList( [ this.cfg.target ] ) ; \n\n        this.onGetItems?.() ;\n\n    }\n\n    // 广告每日次数限制\n    public adDl : DailyLimit = null ;\n\n}\n\n\n\n// 花费\nexport class UiCost {\n\n    public root : Node ; \n\n    public icon : UiItemIcon ; \n\n    public count : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.icon = new UiItemIcon() ; \n        this.icon.init( this.root ) ; \n\n        this.count = this.root.getChildByPath( \"Count\" ).getComponent( Label ) ;\n\n    }\n\n    public refresh( itemData : ItemData ) {\n\n        this.icon.refresh( itemData.id ) ;\n        this.count.string = itemData.count.toString() ; \n\n    }\n\n\n\n}\n\n\n","import { Node } from \"cc\";\nimport { UiListItemGenMgr } from \"./UiListItemGenMgr\";\nimport { CfgShop } from \"./CfgShop\";\nimport { UiShopItem } from \"./UiShopItem\";\nimport { instantiate } from \"cc\";\nimport { random } from \"cc\";\nimport { Vec3 } from \"cc\";\nimport { randomRangeInt } from \"cc\";\n\nexport class UiShopMoney001 {\n\n    public root : Node ; \n\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        let cfg = CfgShop.money001 ; \n\n        let list = new UiListItemGenMgr() ; \n        list.init( this.root.getChildByPath( \"List\" ) ) ; \n        list.setItemCount( cfg.length ) ;\n\n        // 金币图标数量\n        let t = [ 3 , 10 , 45 ] ; \n        for( let i = 0 ; i < cfg.length ; ++i ) {\n\n            let uiItem = new UiShopItem() ; \n            uiItem.init( list.list[ i ] ) ; \n            \n            let cfgItem = cfg[ i ] ; \n            uiItem.cfg = cfgItem ; \n            uiItem.refresh() ; \n\n            // 随机生成图标\n            this.rndIcon( uiItem.icon.root.children[ 0 ] , t[ i ] ) ; \n\n        } // end for\n\n\n\n    }\n\n    private rndIcon( node : Node , n : number ) {\n\n        for( let i = 0 ; i < n ; ++i ) {\n\n            let node2 = instantiate( node ) ;\n            node2.setParent( node.parent , false ) ;\n            node2.position = new Vec3( randomRangeInt( -80 , 80 ) , randomRangeInt( -80 , 80 ) ) ;\n\n        }\n\n    }\n\n}","import { Node } from \"cc\";\r\nimport { Label } from \"cc\";\r\nimport { Account } from \"../../../../Common/Account/Account\";\r\nimport { StaminaRecovery } from \"../../../../Common/Misc/StaminaRecovery\";\r\nimport { StringUtil } from \"../../../../SL/Common/StringUtil\";\r\nimport { tween } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { UiStaminaBuy } from \"../../Popup/UiStaminaBuy\";\r\nimport { UiMain } from \"../UiMain\";\r\n\r\n// 体力\r\nexport class UiStamina {\r\n\r\n    public static ins : UiStamina = null ; \r\n\r\n    public root : Node ; \r\n\r\n    public val : Label ;\r\n\r\n    public countdown : Label ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.val = this.root.getChildByPath( \"val\" ).getComponent( Label ) ;\r\n        this.val.string = \"0\" ; \r\n\r\n        this.countdown = this.root.getChildByPath( \"Countdown\" ).getComponent( Label ) ;\r\n        this.countdown.string = \"0\" ; \r\n\r\n        this.refresh() ; \r\n        \r\n        this.autoRefreshStart() ; \r\n\r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\r\n\r\n    }\r\n\r\n    private onClick() {\r\n        \r\n        UiStaminaBuy.create( UiMain.ins.root ).show() ; \r\n\r\n    }\r\n\r\n    public autoRefreshStart() {\r\n\r\n        tween( this.root ).sequence(\r\n\r\n            tween( this.root ).call( ()=>{\r\n                this.refresh() ; \r\n            } ) , \r\n\r\n            tween( this.root ).delay( 1 ) , \r\n\r\n        ).repeatForever().start() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        let a = Account.ins ; \r\n        let str = a.stamina.current + \"/\" + a.stamina.max ; \r\n        this.val.string = str ; \r\n\r\n        // 倒计时\r\n        this.refreshCountdown() ; \r\n\r\n    }\r\n\r\n    // 倒计时\r\n    public refreshCountdown() {\r\n\r\n        // 判断是否已满\r\n        let stamina = Account.ins.stamina ; \r\n        if( stamina.current >= stamina.max ) {\r\n            this.countdown.node.active = false ; \r\n            return ;\r\n        }\r\n\r\n        StaminaRecovery.ins.exe() ; \r\n        this.countdown.node.active = true ; \r\n\r\n        let countdown = StaminaRecovery.ins.countdown ; \r\n        let m = Math.floor( countdown / 60 ) ;\r\n        let s = countdown % 60 ;\r\n        let str = StringUtil.fillZero( m , 2 ) + \":\" + StringUtil.fillZero( s , 2 ) ; \r\n        this.countdown.string = str ; \r\n\r\n    }\r\n\r\n\r\n    \r\n}","\r\nimport { Node } from \"cc\";\r\nimport { Input } from \"cc\";\r\nimport { Label } from \"cc\";\r\nimport { Ad } from \"../../../Common/Ad/Ad\";\r\nimport { UiDialog } from \"../../../Common/Ui/UiDialog\";\r\nimport { UiMain } from \"../Main/UiMain\";\r\nimport { UiStamina } from \"../Main/Margin/UiStamina\";\r\nimport { Account } from \"../../../Common/Account/Account\";\r\nimport { UiToast } from \"../../../Common/Ui/UiToast\";\r\nimport { UiMoney002 } from \"../Main/Margin/UiMoney002\";\r\nimport { Lang } from \"../../../Common/Misc/Lang\";\r\nimport { UiPopupBase } from \"../../../Common/Ui/UiPopupBase\";\r\nimport { DailyLimit } from \"../../../Common/Misc/DailyLimit\";\r\nimport { instantiate } from \"cc\";\r\nimport { UiGet } from \"./UiGet\";\r\nimport { ItemData } from \"../../../Common/Item/ItemData\";\r\nimport { input } from \"cc\";\r\nimport { ItemType } from \"../../../Common/Item/ItemType\";\r\n\r\n// 体力兑换\r\nexport class UiStaminaBuy extends UiPopupBase {\r\n\r\n    public static override create( parent : Node ) : UiPopupBase {\r\n\r\n        let root = instantiate( this.pf ) ;\r\n        let ui = new UiStaminaBuy() ; \r\n        ui.init( root ) ;\r\n        ui.root.setParent( parent , false ) ; \r\n        return ui ; \r\n\r\n    }\r\n\r\n    public itemAd = new UiStaminaBuyItem() ; \r\n    public itemMoney002 = new UiStaminaBuyItem() ; \r\n\r\n    public override init( node : Node ) {\r\n\r\n        super.init( node ) ; \r\n\r\n        this.itemAd.dailyLimit = new DailyLimit( \"DailyLimit_StaminaBuy_Ad\" , 5 ) ; \r\n        this.itemAd.init( this.root.getChildByPath( \"List/Ad\" ) ) ; \r\n        this.itemAd.root.on( Input.EventType.TOUCH_END , this.onClick_Ad , this ) ;\r\n\r\n        this.itemMoney002.dailyLimit = new DailyLimit( \"DailyLimit_Money002_Ad\" , 5 ) ;  \r\n        this.itemMoney002.init( this.root.getChildByPath( \"List/Money002\" ) ) ;\r\n        this.itemMoney002.root.on( Input.EventType.TOUCH_END , this.onClick_Money002 , this ) ;\r\n\r\n\r\n    }\r\n\r\n    private onClick_Ad() {\r\n        \r\n        // 次数判断\r\n        if( this.itemAd.dailyLimit.current <= 0 ) {\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_NotEnoughForToday\" ) , 1.5 ) ;\r\n            return ; \r\n        }\r\n\r\n        // 广告播放完成\r\n        let onSuccess = ()=>{\r\n\r\n            // 获得体力\r\n            Account.ins.stamina.current += 10 ; \r\n            UiStamina.ins.refresh() ; \r\n\r\n            // 获得物件 UI\r\n            let uiGet = UiGet.create( UiMain.ins.root ) ;\r\n            uiGet.show() ; \r\n            uiGet.itemList.refresh( [ new ItemData( ItemType.Stamina , 10 ) ] ) ;\r\n            uiGet.root.on( Input.EventType.TOUCH_END , ()=>{\r\n                // 提示获得\r\n                let str = Lang.get( \"Home_SiaminaAdd\" ).replace( \"{1}\" , \"10\" ) ; \r\n                UiToast.show( UiMain.ins.root , str , 1.5 ) ;\r\n            } ) ;\r\n\r\n            // 限制次数递减\r\n            this.itemAd.dailyLimit.decrement() ; \r\n            this.itemAd.dailyLimit.save() ; \r\n            this.itemAd.refresh( ) ;\r\n\r\n        } ;\r\n        let onCancel = ()=>{\r\n            UiDialog.create( UiMain.ins.root , \"要看完广告才能领取奖励呢~\" ).show() ;\r\n        } ; \r\n        let onError = ( err )=>{\r\n            UiDialog.create( UiMain.ins.root , \"广告播放错误：\" + err ).show() ;\r\n        } ; \r\n        Ad.ins.rewardShow( onSuccess , onCancel , onError ) ; \r\n\r\n    }\r\n\r\n    private onClick_Money002() {\r\n\r\n        if( this.itemMoney002.dailyLimit.current <= 0 ) {\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_NotEnoughForToday\" ) , 1.5 ) ;\r\n            return ; \r\n        }\r\n\r\n        let m002 = Account.ins.money.money002 ;\r\n        m002 -= 100 ;\r\n        if( m002 < 0 ) {\r\n            // 不足\r\n\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_Money002NotEnough\" ) , 1.5 ) ;\r\n\r\n            return ;\r\n        }\r\n        Account.ins.money.money002 = m002 ; \r\n        UiMoney002.ins.refresh() ; \r\n\r\n        // 获得物件 UI\r\n        let uiGet = UiGet.create( UiMain.ins.root ) ;\r\n        uiGet.show() ; \r\n        uiGet.itemList.refresh( [ new ItemData( ItemType.Stamina , 10 ) ] ) ;\r\n        uiGet.root.on( Input.EventType.TOUCH_END , ()=>{\r\n            // 提示获得\r\n            let str = Lang.get( \"Home_SiaminaAdd\" ).replace( \"{1}\" , \"10\" ) ; \r\n            UiToast.show( UiMain.ins.root , str , 1.5 ) ;\r\n        } ) ;\r\n\r\n        // 获得体力\r\n        Account.ins.stamina.current += 10 ; \r\n        UiStamina.ins.refresh() ; \r\n\r\n        // 限制次数递减\r\n        this.itemMoney002.dailyLimit.decrement() ; \r\n        this.itemMoney002.dailyLimit.save() ; \r\n        this.itemMoney002.refresh( ) ;\r\n\r\n    }\r\n    \r\n    \r\n}\r\n\r\n\r\nexport class UiStaminaBuyItem {\r\n\r\n    public root : Node ; \r\n\r\n    public left : Label ; \r\n\r\n    // 每日限制\r\n    public dailyLimit : DailyLimit = null ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.left = this.root.getChildByPath( \"Left\" ).getComponent( Label ) ; \r\n\r\n        this.dailyLimit.load() ; \r\n        this.refresh() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        this.refreshLeft( this.dailyLimit.current ) ;\r\n\r\n    }\r\n\r\n    public refreshLeft( n : number ) {\r\n\r\n        let str = Lang.get( \"Home_LeftToday\" ).replace( \"{1}\" , n.toString() ) ; \r\n        // let str = \"今日剩余{1}次\".replace( \"{1}\" , n.toString() ) ; \r\n        this.left.string = str ; \r\n\r\n    }\r\n\r\n}","import { Input, instantiate, Label, Node, Prefab, resources, Sprite, Tween, tween, Vec3 } from \"cc\";\nimport { UiBar } from \"../Bar/UiBar\";\nimport { Stats, StatsItem } from \"../../World/1.Base/Support/Misc/Stats\";\nimport { ArticleString } from \"../../../Common/String/ArticleString\";\nimport { CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { UiArticleIcon, UiArticleIconBg } from \"../../../Common/Ui/UiArticleIcon\";\n\n// 统计 按钮\nexport class UiStateBtn {\n\n    public root : Node ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ; \n\n    }\n\n    public onClick( ) {\n\n        if( this.stats == null ) {\n         \n            UiStats.loadAndCreate( ( ui )=>{\n                this.stats = ui ; \n                this.stats.root.setParent( this.root , false ) ;\n                this.stats.root.position = new Vec3( 20 , -370 ) ;\n    \n                this.stats.autoRefreshStart() ;\n                \n            } ) ;\n\n            return ;\n\n        }\n\n        let b = !this.stats.root.active ; \n        this.stats.root.active = b ; \n        if( b == true ) {\n            this.stats.autoRefreshStart() ;\n        }\n        else {\n            this.stats.autoRefreshStop() ;\n        }\n\n    }\n\n    public stats : UiStats = null ; \n\n}\n\n\n// 统计\nexport class UiStats {\n\n    public static loadAndCreate( cb : ( ui : UiStats )=>void ) {\n\n        resources.load( \"Game/Ui/Stats\" , Prefab , ( err , data )=>{\n\n            let root = instantiate( data ) ; \n            \n            let ui = new UiStats() ; \n            ui.init( root ) ;\n\n            cb( ui ) ;\n\n        } ) ; \n\n    }\n\n    public root : Node ; \n\n    public pfItem : Node ; \n\n    public items = new Array< UiStatsItem >() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.pfItem = this.root.getChildByPath( \"List/Item\" ) ;\n        this.pfItem.active = false ; \n\n    }\n\n    public autoRefreshStart() {\n\n        tween( this.root ).sequence(\n            tween( this.root ).call( ()=>{\n                this.refresh() ; \n            } ) , \n            tween( this.root ).delay( 0.5 ) , \n        ).repeatForever().start() ;\n\n    }\n\n    public autoRefreshStop() {\n        Tween.stopAllByTarget( this.root ) ;\n    }\n\n    public refresh() {\n\n        let list = Stats.ins.sort() ; \n\n        this.setItemCount( list.length ) ; \n\n        // 取得总体伤害\n        let total = 0 ;\n        for( let item of list ) {\n            total += item.damage ; \n        }\n\n        for( let i = 0 ; i < list.length && i < 5 ; ++i ) {\n\n            let item = list[ i ] ;\n            let uiItem = this.items[ i ] ;\n            uiItem.refresh( item ) ; \n\n            // 伤害百分比\n            let val = item.damage / total ;\n\n            // 条\n            uiItem.bar.fillRange = val ; \n\n            // 数值。保留1位小数\n            let val2 = Math.floor( val * 1000 ) / 10 ;\n            uiItem.info.string = val2 + \" %\" ;\n\n        } // end for\n\n    }\n\n    private setItemCount( n : number ) {\n\n        let diff = n - this.items.length ; \n        for( let i = 0 ; i < diff ; ++i ){\n\n            let node = instantiate( this.pfItem ) ;\n            node.setParent( this.pfItem.parent ) ;\n            node.active = true ; \n\n            let uiItem = new UiStatsItem() ; \n            uiItem.init( node ) ; \n            this.items.push( uiItem ) ;\n\n        } // end for\n\n        // 不显示多余的\n        for( let i = this.items.length + diff ; i < this.items.length ; ++i ) {\n            this.items[ i ].root.active = false ; \n        }\n\n    }\n    \n}\n\n// 统计条目\nexport class UiStatsItem {\n\n    public item : StatsItem = null ; \n\n    public root : Node ;\n\n    public icon = new UiArticleIcon() ; \n    public iconBg = new UiArticleIconBg() ; \n\n    public name : Label ; \n\n    public info : Label ; \n\n    public bar : Sprite ; \n\n    public init( node : Node ) {\n\n        this.root = node ;  \n\n        this.icon.init( this.root.getChildByPath( \"Icon\" ) ) ;\n        this.iconBg.init( this.root.getChildByPath( \"Icon/bg\" ) ) ;\n\n        this.name = this.root.getChildByPath( \"Name\" ).getComponent( Label ) ;\n\n        this.info = this.root.getChildByPath( \"Info\" ).getComponent( Label ) ;\n\n        this.bar = this.root.getChildByPath( \"Bar/bar\" ).getComponent( Sprite ) ;\n        this.bar.fillRange = 0 ; \n\n\n    }\n\n    public refresh( item : StatsItem ) {\n\n        if( this.item == item ) return ; \n        this.item = item ; \n\n        this.name.string = ArticleString.getName( item.id ) ;\n\n        this.icon.refresh( item.id ) ;\n        this.iconBg.refresh( item.id ) ;\n\n    }\n\n}\n\n\n\n\n","import { Input, Node } from \"cc\";\n\n/*\n    开关。实现节点显示切换。\n    在 root 上注册点击事件，然后获取 isOn 的值\n*/ \nexport class UiSwitch {\n\n    public root : Node ; \n\n    public on : Node ;\n    public off : Node ;\n\n    public init( node : Node ) {\n\n        this.root = node ; \n        this.on = this.root.getChildByPath( \"On\" ) ;\n        this.off = this.root.getChildByPath( \"Off\" ) ;\n\n        this.isOn = true ; \n\n        this.root.on( Input.EventType.TOUCH_END , ()=>{\n            this.isOn = !this.isOn ; \n        } , this ) ;\n\n    }\n\n    public set isOn( val : boolean ) {\n        this.on.active = val ;\n        this.off.active = !val ;\n    }\n\n    public get isOn(){\n        return this.on.active ;\n    }\n\n}","import { Label } from \"cc\";\nimport { Input } from \"cc\";\nimport { Node } from \"cc\";\n\n\n/*\n    底部Tab页\n    选中的条目向上移动\n*/ \nexport class UiTabHeaderBottom\n{\n\n    // 选择改变\n    public onSelectChange : ( item : UiTabHeaderItem )=>void = null ; \n\n    public root : Node ;\n\n    // 当前标志\n    public currentFlag : Node = null ; \n\n    // 所有的条目\n    public get items() : Array< UiTabHeaderItem > {\n        return this.header.items ; \n    }\n\n    public init(node : Node ) : void \n    {\n        this.root = node;\n\n        this.currentFlag = this.root.getChildByPath( \"CurrentFlag\" ) ;\n\n        this.header.init( this.root.getChildByPath( \"TabHeader\" ) ) ;\n        for( let i = 0 ; i < this.header.items.length ; ++i ) {\n            let item = this.header.items[ i ] ; \n            // let idx = i ; \n            let name = item.root.name ; \n            item.root.off( Input.EventType.TOUCH_END ) ;\n            item.root.on( Input.EventType.TOUCH_END , ()=>{ this.show( name ); } ) ; \n        } // end for\n\n    }\n\n    public show( name : string ) {\n\n        if( this.header.currentItem?.root.name == name ) return ;\n\n        this.header.showByName( name ) ;\n\n        // 设置选中标志\n        let currentItem = this.header.currentItem ;\n        let pos = this.currentFlag.worldPosition.clone() ; \n        pos.x = currentItem.root.worldPosition.x ; \n        this.currentFlag.worldPosition = pos ; \n\n        this?.onSelectChange( currentItem ) ;\n\n    }\n\n    private header = new UiTabHeader() ; \n\n}\n\n\nexport class UiTabHeader\n{\n    // 当前选中的\n    public currentItem : UiTabHeaderItem = null ; \n\n    public root : Node ;\n\n    public items = new Array< UiTabHeaderItem >();\n\n    public init(node : Node ) : void \n    {\n        this.root = node;\n        let children = this.root.children;\n        for ( let i = 0; i < children.length ; ++i)\n        {\n            let uiItem = new UiTabHeaderItem();\n            let trans = children[ i ];\n            uiItem.init( trans );\n            this.items.push( uiItem ) ; \n\n            let idx = i;\n            uiItem.root.on( Input.EventType.TOUCH_END , ()=>{ this.showByIndex(idx); } ) ; \n\n        } // end for\n\n    }\n\n    public showByName( name : string ) {\n\n        let item = this.items.find( ( e )=>{ return e.root.name == name ; } ) ;\n        if( item == null ) return ; \n\n        if( item == this.currentItem ) return ; \n\n        for ( let i = 0; i < this.items.length; ++i)\n        {\n            let itemTemp = this.items[i] ;\n            if( itemTemp == item ) continue ; \n            itemTemp.show(false);\n\n        } // end for\n    \n        this.currentItem = item ;\n        this.currentItem.show(true);\n\n    }\n\n    // 显示指定的 Tab 按钮\n    public showByIndex( idx : number ) : void\n    {\n        for ( let i = 0; i < this.items.length; ++i)\n        {\n            let item = this.items[i] ;\n            item.show(false);\n\n        } // end for\n\n        this.currentItem = this.items[idx] ;\n        this.currentItem.show(true);\n\n    }\n\n}\n\nexport class UiTabHeaderItem\n{\n\n    public root : Node ; \n\n    // 按钮图标\n    public icon : Node ; \n\n    // 文字\n    public txt : Label ; \n\n    public init( node : Node ) : void\n    {\n        this.root = node;\n        this.icon = this.root.getChildByPath( \"Icon\" ) ;\n        this.txt = this.root.getChildByPath( \"Label\" ).getComponent( Label ) ;\n\n        this.show(false);\n\n    }\n\n    // 显示\n    public show( val : boolean ) : void\n    {\n        // 选中的 图标向上移动\n        let pos = this.icon.position.clone() ;\n        pos.y = val == true ? 30 : 0 ;\n        this.icon.position = pos ; \n\n    }\n\n}","import { Node } from \"cc\";\r\nimport { Label } from \"cc\";\r\n\r\nexport class UiTextBox {\r\n\r\n    public root : Node ; \r\n\r\n    public label : Label ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.label = this.root.getComponentInChildren( Label ) ; \r\n        this.label.string = \"\" ; \r\n\r\n    }\r\n\r\n    \r\n\r\n}","import { instantiate, Label, Node, Prefab, resources, tween, UITransform, Vec3 } from \"cc\";\n\nexport class UiToast {\n\n    public static pf : Prefab ; \n\n    public static loadPf() {\n\n        if( this.pf != null ) return ; \n\n        resources.load( \"Common/Ui/Toast\" , Prefab , ( err , data )=>{\n            this.pf = data ;\n        } ) ;\n\n    }\n\n    public static create( parent : Node ) : UiToast {\n\n        let root = instantiate( this.pf ) ;\n        let ui = new UiToast() ;\n        ui.init( root ) ; \n        ui.root.setParent( parent , false ) ; \n        return ui ; \n\n    }\n\n    public static show( parent : Node , str : string , stayDuration = 2 ) : UiToast {\n\n        let ui = this.create( parent ) ;\n        ui.txt.string = str ;\n        ui.show( stayDuration ) ; \n        return ui ; \n\n    }\n\n\n    public root : Node ;\n\n    public txt : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.txt = this.root.getComponentInChildren( Label ) ; \n    }\n\n    public show( stayDuration = 2 ) {\n\n        // 根据文字宽度设置节点宽度\n\n        this.txt.updateRenderData(true);\n        let w = this.txt.getComponent( UITransform ).contentSize.width ; \n        let uitrans = this.root.getComponent( UITransform ) ; \n        let size = uitrans.contentSize.clone() ;\n        if( size.width < w ) {\n            size.width = w + 60 ; \n            uitrans.setContentSize( size ) ;\n        }\n\n\n        tween( this.root ).by( 0.5 , { position : new Vec3( 0 , 100 , 0 ) } ).delay( stayDuration ).call( ()=>{\n            this.root.destroy() ; \n        } ).start();\n\n    }\n\n}","import { Node } from \"cc\";\nimport { UiMoney001 } from \"./UiMoney001\";\nimport { UiStamina } from \"./UiStamina\";\nimport { UiMoney002 } from \"./UiMoney002\";\n\nexport class UiTop {\n\n    public static ins : UiTop = null ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        // 顶部\n        UiMoney001.ins = new UiMoney001() ; \n        UiMoney001.ins.init( this.root.getChildByPath( \"Money001\" ) ) ;\n\n        UiMoney002.ins = new UiMoney002() ; \n        UiMoney002.ins.init( this.root.getChildByPath( \"Money002\" ) ) ;\n\n        UiStamina.ins = new UiStamina() ; \n        UiStamina.ins.init( this.root.getChildByPath( \"Stamina\" ) ) ; \n\n    }\n\n}","import { Input, Node } from \"cc\";\nimport { UiMoney001 as UiMoney001 } from \"./UiMoney001\";\nimport { UiPause } from \"../Popup/UiPause\";\nimport { UiMain } from \"./UiMain\";\nimport { GamePause } from \"../../World/2.Td/Flow/GamePause\";\nimport { UiWaveInfo } from \"./UiWaveInfo\";\nimport { UiStateBtn } from \"../Popup/UiStats\";\nimport { UiHybridGuide } from \"../../../Home/Ui/Popup/UiHybridGuide\";\n\nexport class UiTop {\n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        UiMoney001.ins = new UiMoney001() ; \n        UiMoney001.ins.init( this.root.getChildByPath( \"Money001\" ) );\n\n        UiWaveInfo.ins = new UiWaveInfo() ; \n        UiWaveInfo.ins.init( this.root.getChildByPath( \"WaveInfo\" ) ) ; \n        UiWaveInfo.ins.refresh() ; \n\n        let btnPause = this.root.getChildByPath( \"btnPause\" ) ;\n        btnPause.on( Input.EventType.TOUCH_END , ()=>{\n\n            GamePause.pause() ; \n            UiPause.loadAndCreate( UiMain.ins.root , ( uiPause : UiPause )=>{\n                uiPause.refresh() ; \n            } ) ;\n            \n\n        } ) ;\n\n        new UiStateBtn().init( this.root.getChildByPath( \"btnStats\" ) ) ;\n\n        let btn = this.root.getChildByPath( \"btnHybridGuide\" ) ;\n        btn.on( Input.EventType.TOUCH_END , ()=>{\n            UiHybridGuide.create( UiMain.ins.root ).show() ;\n        } ) ; \n\n        \n    }\n\n}\n\n","import { instantiate, Node, Size, Tween, tween, UITransform, Vec2, Vec3 } from \"cc\";\nimport { CfgArticle, CfgArticleMgr } from \"../../../Common/Cfg/CfgArticle\";\nimport { PfMgrBagArticle } from \"../../../Common/PfMgr/PfMgr\";\nimport { BagArticle } from \"../Article/BagArticle\";\nimport { BagArticleGridPlace } from \"../Article/BagArticleGridPlace\";\nimport { BagArticleFactory } from \"../Article/BagArticleFactory\";\n\n// 托盘，物品栏，物品出现的地方\nexport class UiTray {\n\n    public static ins : UiTray = null ; \n\n    public articles = new Array< BagArticle >() ; \n\n    public root : Node ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n    }\n\n    public addArticleById( id : string , idx = -1 ) {\n\n        let article = BagArticleFactory.create( id );\n\n        article.view.root.setParent( this.root , false ) ;\n        article.view.root.position = Vec3.ZERO ; \n\n        if( idx == -1 ) {\n            this.articles.push( article ) ;\n        }\n        else {\n            this.articles.splice( idx , 0 , article ) ;\n        }\n        \n        \n        this.arrange() ; \n\n    }\n\n    // 插入物品，位置 pos 决定。\n    public insertArticle( article : BagArticle ) {\n\n        // 解绑和棋盘的关系\n        BagArticleGridPlace.unbind( article ) ;\n\n        article.view.root.setParent( this.root , true ) ;\n\n        let idx = this.articles.indexOf( article ) ; \n        if( idx == -1 ) {\n            this.articles.push( article ) ;\n        }\n\n        // 按照 X 位置排序\n        this.articles.sort( ( a , b )=>{\n            let x1 = a.view.root.worldPosition.x ;\n            let x2 = b.view.root.worldPosition.x ;\n            // if( x1 < x2 ) return -1 ;\n            // else if( x1 > x2 ) return 1 ;\n            // else return 0 ;\n            return x1 - x2 ;\n        } ) ;\n\n\n        this.arrange() ; \n\n    }\n\n    // 插入物品，在指定的位置\n    public insertArticleByIndex( article : BagArticle , idx : number ) {\n\n        // 解绑和棋盘的关系\n        BagArticleGridPlace.unbind( article ) ;\n\n        article.view.root.setParent( this.root , true ) ;\n\n        let idx2 = this.articles.indexOf( article ) ; \n        if( idx2 != -1 ) {\n            this.articles.splice( idx2 , 1 ) ; \n        }\n\n        // 插入指定位置\n        this.articles.splice( idx , 0 , article ) ; \n\n\n        this.arrange() ; \n\n    }\n\n    public removeAndArrange( article ) {\n\n        this.remove( article ) ; \n\n        this.arrange() ;\n\n    }\n\n    public remove( article ) {\n\n        let idx = this.articles.indexOf( article );\n        if( idx == -1 ) return ; \n        this.articles.splice( idx , 1 ) ; \n\n    }\n\n\n    // 排列显示\n    public arrange() {\n\n        let interval = 20 ; \n        // 取得整体排列的宽度\n        let w = 0 ; \n        for( let article of this.articles ) {\n\n            // let size = article.view.root.getComponent( UITransform ).contentSize ; \n            // let w2 = article.view.main.getComponent( UITransform ).getBoundingBox().width ; \n            // let w2 = article.view.root.getComponent( UITransform ).getBoundingBoxToWorld().width ; \n            let w2 = article.view.size.width ; \n            w += w2 ; \n        }\n        // 加上间隔\n        w += ( this.articles.length - 1 ) * interval ; \n\n\n        // 排列显示\n        let xStart = w / 2 * -1 ; \n        for( let article of this.articles ) {\n\n            // let w2 = article.view.root.getComponent( UITransform ).contentSize.width ; \n            // let w2 = article.view.main.getComponent( UITransform ).getBoundingBox().width ; \n            // let w2 = article.view.root.getComponent( UITransform ).getBoundingBoxToWorld().width ; \n            let w2 = article.view.size.width ; \n            let pos = article.view.root.position.clone() ;\n            pos.x = xStart + w2 / 2 ;\n            pos.y = 0 ; \n\n            xStart += w2 + interval ; \n\n            // 直接设置\n            // article.root.position = pos ; \n            // 缓动移动\n            Tween.stopAllByTarget( article.view.root ) ;\n            tween( article.view.root ).to( 0.2 , { position : pos } ).start() ; \n\n        } // end for\n\n    }\n\n    public clear() {\n\n        for( let article of this.articles ) {\n            article.view.root.destroy() ; \n        }\n        this.articles.splice( 0 , this.articles.length ) ;\n\n    }\n\n    \n}\n\n\n\n\n","import { Label, Node } from \"cc\";\nimport { LevelCtrl } from \"../../World/2.Td/Level/LevelCtrl\";\n\n\nexport class UiWaveInfo {\n\n    public static ins : UiWaveInfo = null ; \n\n    public root : Node ; \n\n    public txt : Label ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        this.txt = this.root.getComponent( Label ) ; \n\n    }\n\n    public refresh() {\n\n        let max = LevelCtrl.ins.levelData.waves.length - 1 ; \n\n        let current = LevelCtrl.ins.currentWaveIdx ; \n\n        let str = \"第 {current}/{max} 波\" ; \n        str = str.replace( \"{current}\" , current.toString() ) ;\n        str = str.replace( \"{max}\" , max.toString() ) ;\n        this.txt.string = str ;\n\n    }\n\n}","import { Node } from \"cc\";\r\nimport { CfgItemRewardItem, CfgItemRewardMgr } from \"../../../../../Common/Cfg/CfgItemReward\";\r\nimport { Account } from \"../../../../../Common/Account/Account\";\r\nimport { Label } from \"cc\";\r\nimport { Lang } from \"../../../../../Common/Misc/Lang\";\r\nimport { AccountPersist } from \"../../../../../Common/Account/AccountPersist\";\r\nimport { Input } from \"cc\";\r\nimport { UiGet } from \"../../../Popup/UiGet\";\r\nimport { UiMain } from \"../../UiMain\";\r\nimport { ItemGet } from \"../../../../../Common/Item/ItemGet\";\r\nimport { UiStamina } from \"../../Margin/UiStamina\";\r\nimport { UiMoney001 } from \"../../Margin/UiMoney001\";\r\nimport { UiMoney002 } from \"../../Margin/UiMoney002\";\r\nimport { UiToast } from \"../../../../../Common/Ui/UiToast\";\r\nimport { instantiate } from \"cc\";\r\nimport { tween } from \"cc\";\r\nimport { Vec3 } from \"cc\";\r\n\r\n// 波奖励\r\nexport class UiWaveReward {\r\n\r\n    public root : Node ; \r\n\r\n    public items = new Array< UiWaveRewardItem >() ; \r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        let list = this.root.getChildByPath( \"List\" ) ; \r\n\r\n        let pfItem = list.children[ 0 ] ; \r\n\r\n        // 删除多余的\r\n        for( let i = list.children.length - 1 ; i > 0 ; --i ) { list.children[ i ].destroy() ; }\r\n\r\n        let uiItem = new UiWaveRewardItem() ; \r\n        this.items.push( uiItem ) ; \r\n        uiItem.init( pfItem ) ;\r\n\r\n        for( let i = 0 ; i < 3 ; ++i ) {\r\n\r\n            let root = instantiate( pfItem ) ;\r\n            root.setParent( pfItem.parent , false ) ; \r\n\r\n            let uiItem = new UiWaveRewardItem() ; \r\n            this.items.push( uiItem ) ; \r\n            uiItem.init( root ) ;\r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n    public refresh( levelIdx : number ) {\r\n\r\n        let cfgList = new Array< CfgItemRewardItem >() ; \r\n        let mapping = new Map< CfgItemRewardItem , number >() ; \r\n\r\n        // 取得 20波内的3个配置。\r\n        for( let i = 0 ; i < 20 ; ++i ) {\r\n\r\n            let id = \"LevelWave_\" + levelIdx + \"_\" + i ; \r\n            let cfg = CfgItemRewardMgr.data.get( id ) ;\r\n            if( cfg == null ) continue ; \r\n            cfgList.push( cfg ) ; \r\n\r\n            mapping.set( cfg , i ) ;\r\n\r\n        } // end for\r\n\r\n        // 不显示多余的\r\n        for( let i = cfgList.length ; i < this.items.length ; ++i ){\r\n            this.items[ i ].root.active = false ; \r\n        }\r\n\r\n        for( let i = 0 ; i < cfgList.length && i < this.items.length ; ++i ) {\r\n\r\n            let cfg = cfgList[ i ] ; \r\n            let waveIdx = mapping.get( cfg ) ; \r\n\r\n            let uiItem = this.items[ i ] ;\r\n            uiItem.cfg = cfg ; \r\n            uiItem.root.active = true ; \r\n\r\n            // 关卡 波次 信息\r\n            uiItem.levelIdx = levelIdx ; \r\n            uiItem.waveIdx = waveIdx ; \r\n            uiItem.refresh() ; \r\n\r\n        } // end for\r\n\r\n    }\r\n\r\n}\r\n\r\n// 奖励条目\r\nexport class UiWaveRewardItem {\r\n\r\n    // 当前对象表示的关卡索引、波数。\r\n    public levelIdx = 0 ;\r\n    public waveIdx = 0 ;  \r\n    public cfg : CfgItemRewardItem = null ; \r\n\r\n    // 状态：1 已经领取，2 可领取，3 未解锁、不能领取\r\n    public state = 0 ;\r\n\r\n    public root : Node ; \r\n\r\n    // 波次信息\r\n    public waveInfo : Label ; \r\n\r\n    // 已领取的\r\n    public claimed : Node ; \r\n    // 可领取的\r\n    public claimable : Node ; \r\n    // 不可领取的\r\n    public unclaimable : Node ; \r\n\r\n\r\n    public init( node : Node ) {\r\n\r\n        this.root = node ; \r\n\r\n        this.claimed = this.root.getChildByPath( \"Claimed\" ) ; \r\n        this.unclaimable = this.root.getChildByPath( \"Unclaimable\" ) ; \r\n        this.claimable = this.root.getChildByPath( \"Claimable\" ) ; \r\n        this.initClaimable() ; \r\n\r\n        this.waveInfo = this.root.getChildByPath( \"Wave\" ).getComponent( Label ) ; \r\n        this.waveInfo.string = \"\" ; \r\n\r\n        this.root.on( Input.EventType.TOUCH_END , this.onClick , this ) ;\r\n\r\n\r\n    }\r\n\r\n    public initClaimable() {\r\n\r\n        // 背景光旋转\r\n        let light = this.claimable.getChildByPath( \"bg_light\" ) ; \r\n        tween( light ).by( 5 , { eulerAngles : new Vec3( 0 , 0 , -360 ) } ).repeatForever().start() ; \r\n\r\n        // 图标摆动\r\n        let icon = this.claimable.getChildByPath( \"Icon\" ) ; \r\n        tween( icon ).sequence(\r\n            tween( icon ).to( 0.3 , { eulerAngles : new Vec3( 0 , 0 , 10 ) } ) , \r\n            tween( icon ).to( 0.3 , { eulerAngles : new Vec3( 0 , 0 , -10 ) } ) , \r\n            tween( icon ).to( 0.3 , { eulerAngles : new Vec3( 0 , 0 , 10 ) } ) , \r\n            tween( icon ).to( 0.3 , { eulerAngles : new Vec3( 0 , 0 , -10 ) } ) , \r\n            tween( icon ).to( 0.3 , { eulerAngles : new Vec3( 0 , 0 , 0 ) } ) , \r\n            tween( icon ).delay( 1 ) , \r\n        ).repeatForever().start() ; \r\n\r\n    }\r\n\r\n    public refresh() {\r\n\r\n        // 波次信息信息\r\n        let str = Lang.get( \"Home_Battle_WaveReward_WaveInfo\" ).replace( \"{1}\" , this.waveIdx.toString() ) ;\r\n        this.waveInfo.string = str ; \r\n\r\n        \r\n        this.state = this.getState() ; \r\n        this.unclaimable.active = this.claimable.active = this.claimed.active = false ; \r\n        if( this.state == 1 ) {\r\n            this.claimed.active = true ; \r\n        }\r\n        else if( this.state == 2 ) {\r\n            this.claimable.active = true ; \r\n        }\r\n        else if( this.state == 3 ) {\r\n            this.unclaimable.active = true ; \r\n        }\r\n\r\n\r\n    }\r\n\r\n    // 确定状态\r\n    private getState() : number {\r\n\r\n        // 对比进度。玩家的进度 是否 超越本条目进度。\r\n        let isOver = false ; \r\n        let levelIdx = Account.ins.mainLevel.levelIdx ; \r\n        let waveIdx = Account.ins.mainLevel.waveIdx ; \r\n        if( this.levelIdx < levelIdx ) { isOver = true ; }\r\n        else if( this.levelIdx > levelIdx ){ isOver = false ; }\r\n        else { isOver = this.waveIdx <= waveIdx ; }\r\n\r\n        if( isOver ) {\r\n\r\n            // 领过，没领过\r\n            let wave = Account.ins.waveReward.get( this.levelIdx ) ; \r\n            if( wave == null ) return 2 ;   // 没有记录数据，没有领过\r\n            return wave.has( this.waveIdx ) == true ? 1 : 2 ;\r\n\r\n        }\r\n\r\n        return 3 ; \r\n\r\n    }\r\n\r\n    public onClick() {\r\n\r\n        if( this.state == 1 ){\r\n            // 领过\r\n            UiToast.show( UiMain.ins.root , Lang.get( \"Home_Battle_WaveReward_Claimed\" ) ) ; \r\n\r\n            return ; \r\n        } \r\n\r\n        if( this.state == 3 ) {\r\n            UiToast.show( UiMain.ins.root , \"尚未能领取哦\" ) ; \r\n            //  本条目绑定的波次 大于 当前关卡的波次\r\n            return ;\r\n        }\r\n\r\n        this.get() ; \r\n\r\n\r\n    }\r\n\r\n    // 领取\r\n    private get() {\r\n\r\n        // 显示获得的物品\r\n        let uiGet = UiGet.create( UiMain.ins.root ) ;\r\n        // uiGet.show() ; \r\n        uiGet.itemList.refresh( this.cfg.list ) ; \r\n        uiGet.itemList.showAnim( 0.1 ) ; \r\n        ItemGet.addList( this.cfg.list ) ;\r\n\r\n        // 刷新界面\r\n        UiStamina.ins.refresh() ; \r\n        UiMoney001.ins.refresh() ; \r\n        UiMoney002.ins.refresh() ; \r\n\r\n\r\n        // 记录\r\n        let item = Account.ins.waveReward.get( this.levelIdx ) ;\r\n        if( item == null ) {\r\n            item = new Set< number >() ;\r\n            Account.ins.waveReward.set( this.levelIdx , item ) ; \r\n        }\r\n        item.add( this.waveIdx ) ;\r\n        AccountPersist.save() ; \r\n\r\n        // 刷新本条目\r\n        this.refresh( ) ; \r\n\r\n    }\r\n\r\n}","import { director, Input, instantiate, Node, Prefab, resources } from \"cc\";\nimport { SceneTransition } from \"../../../../Common/Ui/UiLoadingScene\";\nimport { UiEffectPopup } from \"../../../../SL/Cocos/Ui/UiEffect\";\nimport { UiItemList } from \"../../../../Common/Item/UiItemList\";\nimport { SoundBtnClickSetter } from \"../../../../Common/Audio/SoundBtnClickSetter\";\n\n// 胜利UI\nexport class UiWin {\n\n    public static pf : Prefab ; \n\n    public static loadPf() {\n\n        if( this.pf != null ) return ; \n\n        resources.load( \"Game/Ui/Settle/Win\" , Prefab , ( err , data )=>{\n            this.pf = data ;\n        } ) ;\n\n    }\n\n    public static create( parent : Node ) : UiWin {\n\n        let root = instantiate( this.pf ) ;\n        let ui = new UiWin() ;\n        ui.init( root ) ; \n        ui.root.setParent( parent , false ) ; \n        return ui ; \n\n    }\n\n\n    public root : Node ;\n\n    public btnOK : Node ; \n\n    public btnShare : Node ; \n\n    // 物品列表\n    public itemList = new UiItemList() ; \n\n    public init( node : Node ) {\n\n        this.root = node ; \n\n        SoundBtnClickSetter.exe( this.root ) ;\n\n        this.btnOK = this.root.getChildByPath( \"BtnList/btnOK\" ) ;\n        this.btnOK.on( Input.EventType.TOUCH_END , this.onClick_btnOK , this ) ;\n\n        this.btnShare = this.root.getChildByPath( \"BtnList/btnShare\" ) ;\n        this.btnShare.on( Input.EventType.TOUCH_END , this.onClick_btnShare , this ) ;\n\n        this.itemList.init( this.root.getChildByPath( \"Reward\" ) ) ; \n        \n\n    }\n\n    public show() {\n        this.root.active = true ; \n        UiEffectPopup.show( this.root ) ;\n        \n    }\n\n    private onClick_btnOK() {\n\n        SceneTransition.exe( \"Home\" ) ; \n\n    }\n\n    private onClick_btnShare() {\n\n    }\n\n}","import { math, Vec3 } from \"cc\";\n\n\n// 2D 向量 旋转\nexport class Vec2dHelper {\n\n    // 旋转一个向量\n    public static rotate( v : Vec3 , degree : number ) {\n\n        let rad = math.toRadian( degree ) ; \n\n        let cosVal = Math.cos( rad ) ; \n        let sinVal = Math.sin( rad ) ; \n\n        // [x*cosA-y*sinA  x*sinA+y*cosA]\n        v.x = v.x * cosVal - v.y * sinVal ; \n        v.y = v.x * sinVal + v.y * cosVal ; \n\n    }\n\n}\n","\nimport { EnemyGen } from \"./EnemyGen\";\nimport { LevelData, WaveData } from \"./CfgLevelWaveMgr\";\nimport { EffectFactory } from \"../../../Bag/Merge/EffectFactory\";\nimport { UiMain } from \"../../../Ui/Main/UiMain\";\nimport { Vec3 } from \"cc\";\n\n\n// 波控制器，控制一波内的事件\nexport class WaveCtrl {\n\n    public static ins = new WaveCtrl() ; \n\n    public onComplete : ()=>void = null ; \n\n    // 波数据\n    public data : WaveData = null ; \n\n    // 执行到的条目索引\n    public idx : number = null ; \n\n    // 已经流逝的帧数\n    private frames : number = 0 ; \n\n    // 是否启用\n    private enable = false ; \n\n    public reset() {\n        this.idx = 0 ; \n        this.frames = 0 ; \n        this.enable = false ; \n    }\n\n    public start() {\n        this.reset() ;\n\n        this.enable = true ; \n\n    }\n\n    public update() {\n\n        if( this.enable == false ) { return ; }\n\n        let items = this.data.items ;\n        if( this.idx >= items.length ) {\n            return ; \n        }\n\n        let item = items[ this.idx ] ; \n        if( this.frames >= item.triggerTime ) {\n            this.idx++ ;\n\n            let role = EnemyGen.genOne( item.genRoleId ) ;\n            role.life.hp.setCurrentAndMax( role.life.hp.max * item.hpMaxFactor ) ; \n            role.attack.damage = role.attack.damage * item.attackFactor ; \n\n            if( this.idx >= items.length ) {\n                // 完成\n                this.onComplete?.() ; \n            }\n\n            if( role.cfg.hpBarId == \"HpBarBoss\" ) {\n                let effect = EffectFactory.create( \"BossIncoming\" ) ; \n                effect.setParent( UiMain.ins.root , false ) ; \n                effect.position = Vec3.ZERO ; \n            }\n\n        }\n\n        this.frames++ ;\n\n    }\n\n\n\n}\n\n","import { Game, UITransform, Vec3 } from \"cc\";\nimport { UiMoney001 } from \"../../../Ui/Main/UiMoney001\";\nimport { AffixType } from \"../../1.Base/Buff/Affix\";\nimport { TowerMgr } from \"../../1.Base/Tower/Entity/TowerMgr\";\nimport { BagView } from \"../Bag/BagView\";\nimport { Player } from \"../Player/Player\";\nimport { LevelCtrl } from \"./LevelCtrl\";\nimport { UiMain } from \"../../../Ui/Main/UiMain\";\nimport { MoneyFly } from \"../../../../Common/Misc/MoneyFly\";\nimport { UiWin } from \"../../../Ui/Popup/Settle/UiWin\";\nimport { UiWaveInfo } from \"../../../Ui/Main/UiWaveInfo\";\nimport { GameArg } from \"../../../Init/GameArg\";\nimport { Account } from \"../../../../Common/Account/Account\";\nimport { AccountPersist } from \"../../../../Common/Account/AccountPersist\";\nimport { GamePause } from \"../Flow/GamePause\";\nimport { BulletMgr } from \"../../1.Base/Bullet/BulletMgr\";\nimport { MergeHybridHintMgr } from \"../../../Bag/Merge/MergeHybridHint\";\nimport { BagArticleSpeak } from \"../../../Bag/Article/BagArticleSpeak\";\nimport { ItemDraw } from \"../../../../Common/Item/ItemDraw\";\nimport { ItemGet } from \"../../../../Common/Item/ItemGet\";\n\n// 每波完成后的结算\nexport class WaveSettle {\n\n    public static exe() {\n\n        GamePause.pause() ; \n\n        this.bulletClear() ; \n\n        UiWaveInfo.ins.refresh() ; \n\n        this.towerBuff() ; \n\n        if( LevelCtrl.ins.currentWaveIdx >= LevelCtrl.ins.levelData.waves.length ) {\n            // 过关\n            this.levelSettle() ; \n            return ; \n        }\n\n        // 进入到背包视图\n        BagView.enter() ; \n\n        // 如果之前出现了可以杂交的，但是没有解锁，一局后显示提示。\n        MergeHybridHintMgr.ins.exe() ; \n        \n        // 装备再次可以气泡说话\n        BagArticleSpeak.clearMemory() ; \n\n    }\n\n    // 清空子弹\n    private static bulletClear() {\n\n        let data = BulletMgr.ins.data ; \n        for( let i = 0 ; i < data.length ; ++i ) {\n            let bullet = data[ i ] ;\n            bullet.view.root.destroy() ; \n        }\n        data.splice( 0 , data.length ) ; \n\n    }\n\n    // 过关\n    public static levelSettle() {\n\n        let uiWin = UiWin.create( UiMain.ins.root ) ; \n        uiWin.show() ; \n        let id = \"Level_\" + GameArg.ins.levelId + \"_Win\" ; \n        let items = ItemDraw.exe( id ) ; \n        uiWin.itemList.refresh( items ) ; \n        uiWin.itemList.showAnim() ; \n        ItemGet.addList( items ) ; \n\n        if( GameArg.ins.mainIdx >= 0 ) {\n            // 主线关卡。不判断是否超出边界。超出边界在外部有处理\n            let idxNext = GameArg.ins.mainIdx + 1 ;\n            Account.ins.mainLevel.levelIdx = idxNext ; \n            Account.ins.mainLevel.waveIdx = 0 ; \n\n            AccountPersist.save() ; \n\n        }\n\n    }\n\n    // 处理 Tower 结算时触发的Buff\n    public static towerBuff() {\n\n        for( let tower of TowerMgr.ins.data ) {\n\n            // 加钱\n            let moneyAdded = 0 ; \n\n            for( let buff of tower.buff.list ) {\n                switch( buff.affix.type ) {\n                    case AffixType.GetMomeyPerWave : {\n                        moneyAdded += buff.affix.argN ; \n                    }\n                }\n\n            } // end for\n\n            if( moneyAdded > 0 ) {\n\n                Player.ins.money001 += moneyAdded ; \n                UiMoney001.ins.refresh() ; \n\n                let parent = UiMain.ins.root ; \n\n                let pos1 = tower.article.view.root.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n                parent.getComponent( UITransform ).convertToNodeSpaceAR( pos1 , pos1 ) ;\n\n                // 钱飞\n                let pos2 = UiMoney001.ins.icon.getComponent( UITransform ).convertToWorldSpaceAR( Vec3.ZERO ) ;\n                parent.getComponent( UITransform ).convertToNodeSpaceAR( pos2 , pos2 ) ;\n\n                MoneyFly.money001Fly( parent , pos1 , pos2 ) ; \n\n            }\n\n        } // end for\n\n    }\n\n}","\n/*\n    SL Library | Author : Siliphen | Creation Date : 2018.09 | Modification Date : | \n*/\n\nimport { Random } from \"./Random\";\n\n\nexport class WeightProbabilityItem {\n\n    // 名字\n    public name: string;\n\n    // 概率权重\n    public probability: number;\n\n}\n\n// 权重概率抽取器\nexport class WeightProbability {\n\n    // 初始化。\n    public init(probabilities: Array<WeightProbabilityItem>): void {\n        \n        // 把概率权重配置转换为区间数据。\n        this.weightCount = 0;\n        this.data.splice(0, this.data.length);\n\n        for (let i = 0; i < probabilities.length; ++i) {\n            let item = probabilities[i];\n\n            let item2 = {};\n            item2[\"min\"] = this.weightCount;\n            item2[\"max\"] = this.weightCount + item.probability;\n            item2[\"id\"] = item.name ;\n            this.data.push(item2);\n\n            this.weightCount += item.probability;\n\n        } // end for\n\n    }\n\n    public add( id : string , w : number ) {\n\n        let item = {};\n        item[\"min\"] = this.weightCount;\n        item[\"max\"] = this.weightCount + w ;\n        item[\"id\"] = id ;\n        this.data.push(item);\n\n        this.weightCount += w ;\n\n    }\n\n    // 抽取\n    public get(): string {\n\n        let ret: string = null;\n\n        let n = WeightProbability.rangeInt(0, this.weightCount - 1);\n        // 查找命中区间\n        for (let i = 0; i < this.data.length; ++i) {\n\n            let item = this.data[i];\n            if (item[\"min\"] <= n && n < item[\"max\"]) {\n                ret = item[\"id\"] ;\n            }\n\n        } // end for\n\n        return ret;\n\n    }\n\n    // 清空数据\n    public clear() {\n        this.data.splice( 0 , this.data.length ) ;\n        this.weightCount = 0;\n    }\n\n    public static rangeInt(min : number , max : number ) : number\n    {\n        return Math.floor(Math.random() * ( max + 1 - min  ) ) + min ;\n\n    }\n\n    private weightCount = 0;\n\n    private data = new Array();\n\n}","import { find, Input, Node } from \"cc\";\nimport { UiBag } from \"../Ui/Bag/UiBag\";\n\n\nexport class World {\n\n    public static ins: World;\n\n    public root: Node;\n\n    public init() {\n\n        this.root = find(\"Canvas/World\");\n\n        let bag = this.root.getChildByPath(\"Bag\");\n        bag.on(Input.EventType.TOUCH_END, () => {\n\n            UiBag.ins.show();\n\n        });\n\n        let shop = this.root.getChildByPath(\"Shop\");\n        shop.on(Input.EventType.TOUCH_END, () => {\n            //    UiDialog.create( UiMain.ins.root , \"正在开发中...\" ).show() ; \n\n        });\n\n        let Jewel = this.root.getChildByPath(\"Jewel\");\n        Jewel.on(Input.EventType.TOUCH_END, () => {\n\n            //UiDialog.create(UiMain.ins.root, \"正在开发中...\").show();\n\n        });\n\n\n        let Farmland = this.root.getChildByPath( \"Farmland\" ) ;\n        Farmland.on( Input.EventType.TOUCH_END , ()=>{\n            //UiDialog.create( UiMain.ins.root , \"正在开发中...\" ).show() ; \n        } ) ;\n    }\n}","import { find, Node } from \"cc\";\n\n// 游戏世界节点引用\nexport class WorldNode {\n\n    public static ins = new WorldNode() ; \n\n    public root : Node ; \n\n    // 地表层\n    public layer0 : Node ; \n    // 地上层\n    public layer1 : Node ; \n    // 天空层\n    public layer2 : Node ; \n\n    // 道路\n    public layer0_Road : Node ; \n\n    // 出怪口\n    public layer0_Spawn : Node ; \n\n}\n\nexport class WorldNodeInit {\n\n    public static exe() {\n\n        let root = WorldNode.ins.root = find( \"Canvas/World\" ) ;\n\n        let ins = WorldNode.ins ;\n        ins.layer0 = find( \"Layer0\" , root ) ;\n        ins.layer1 = find( \"Layer1\" , root ) ;\n        ins.layer2 = find( \"Layer2\" , root ) ;\n\n        ins.layer0_Road = ins.layer0.getChildByPath( \"Road\" ) ;\n        ins.layer0_Spawn = ins.layer0.getChildByPath( \"Spawn\" ) ;\n\n    }\n\n}","import { sys } from \"cc\";\nimport { OsJudge } from \"../Misc/OsJudge\";\nimport { math } from \"cc\";\nimport { Account } from \"../../../Common/Account/Account\";\nimport { director } from \"cc\";\nimport { game } from \"cc\";\nimport { Game } from \"cc\";\n\n// 微信环境初始化\nexport class WxHelper {\n\n    // public static _instance=new WxHelper() ; \n    // 开启分享菜单\n    public static enableShareMenu() {\n\n        \n        if( OsJudge.isWx() == false ) return ;\n\n        // @ts-ignore\n        wx.showShareMenu({\n            withShareTicket: true,\n            menus: ['shareAppMessage', 'shareTimeline']\n          }) ;\n\n    }\n\n    // 震动  15 ms n 强度：1-3\n    public static vibrateShort( n : number ) {\n\n        if( OsJudge.isWx() == false ) return ;\n\n        let str = \"light\" ;\n        if( n == 1 ) str = \"light\" ;\n        else if( n == 2 ) str = \"medium\" ;\n        else if( n >= 3 ) str = \"heavy\" ;\n\n        // @ts-ignore\n        wx.vibrateShort({\n            type : str ,\n          }) ;\n\n    }\n    \n    // 震动 400 ms\n    public static vibrateLong( ) {\n\n        if( OsJudge.isWx() == false ) return ;\n\n        // @ts-ignore\n        wx.vibrateLong() ;\n\n    }\n\n    readonly s_ShareImage1:ShareImage = new ShareImage(\"UdUAXFVBS3yw7fbDuAvMcQ==\", \"https://mmocgame.qpic.cn/wechatgame/hed25SrAztwkv2L6PYGhFKrRZ2BRk71PhaKB2iaINew54fKlbGqd0746DFlnXCbXR/0\");\n    readonly s_ShareImage2:ShareImage = new ShareImage(\"QEB8rJY7TBaS5/cWh0YMcQ==\", \"https://mmocgame.qpic.cn/wechatgame/IUv9yibo7sgJJVbT1asGE5QJiabkkM57opkqRmYjmFynJAWK0AYRgbqcItGT7OE3iam/0\");\n    readonly s_ShareImage3:ShareImage = new ShareImage(\"rPaH9z2LRDeDbAXo7Dml0A==\", \"https://mmocgame.qpic.cn/wechatgame/cNhQ7XC07LgmmlVw89ibl5mpEaibuAOIudF2k0mFQZPX9rLKnjH9Ml8hzA880wuV30/0\");\n    \n    private ShareImages:Array<ShareImage>;\n\n    \n    //右上角分享信息初始化\n    public initShare():void{\n        if( OsJudge.isWx() == false ) return ;\n        this.ShareImages = [this.s_ShareImage1, this.s_ShareImage2, this.s_ShareImage3];\n        console.log(\"WxShare 初始化\");\n        let image_s  =this.GetRandomParamShare();\n         // @ts-ignore\n         wx.onShareAppMessage(function(){            \n            return{                \n                // imageUrlId: image_s.ShareImageId,\n                // imageUrl:image_s.ShareImageUrl,\n            }\n         } )       \n    }\n\n    //通过游戏中的功能进行分享\n    public OpenShare():void{\n        \n        if( OsJudge.isWx() == false ) return ;\n\n        this.ShareImages = [this.s_ShareImage1, this.s_ShareImage2, this.s_ShareImage3];\n        console.log(\"WxShare 初始化\");\n        let image_s  =this.GetRandomParamShare();\n        //@ts-ignore\n        wx.ShareAppMessage(function(){\n            return{\n                // imageUrlId: image_s.ShareImageId,\n                // imageUrl:image_s.ShareImageUrl,\n                query:Account.ins.accuntInfo.Uid,\n            }\n        })\n    }\n\n    //是不是通过分享页面进入的\n    public CheckIsShare():void{\n \n        if( OsJudge.isWx() == false ) return ;\n        //@ts-ignore\n        let Lanuchinfo=wx.getLaunchOptionsSync();\n        if(typeof(Lanuchinfo)!==\"undefined\"&&Object.keys(Lanuchinfo).length>0){\n\n            //如果是新用户\n            console.log(\"邀请用户的ID:\"+Lanuchinfo.query);\n\n        }\n\n    }\n\n    public GetRandomParamShare():ShareImage\n    {\n        let s_Share = this.ShareImages[math.randomRangeInt(0, this.ShareImages.length)];\n\n        return s_Share;\n    }\n\n}\n\nexport class ShareImage\n{\n    public ShareImageId:string\n    public ShareImageUrl:string\n\n    constructor( shareImageId:string,shareImageUrl:string)\n    {\n        this.ShareImageId = shareImageId;\n        this.ShareImageUrl = shareImageUrl;\n    }\n}","import { Node } from \"cc\";\nimport { RoleMgr } from \"../../Role/Base/RoleMgr\";\nimport { PlayerRole } from \"../../../2.Td/Player/PlayerRole\";\nimport { CurrentMax } from \"../SimpleStruct/CurrentMax\";\nimport { FrameSecConvert } from \"../../../../../Common/Misc/FrameSecConvert\";\n\n// 遮挡控制器\nexport class ZOrderCtrl {\n\n    public static ins = new ZOrderCtrl() ; \n\n    public interval = new CurrentMax() ;\n\n    public constructor() {\n        // this.interval.max = FrameSecConvert.toFrame( 0.5 ) ;\n        this.interval.max = 2 ;\n    }\n\n    public update() {\n\n        // 降低频率\n        this.interval.current-- ;\n        if( this.interval.current > 0 ) return ; \n        this.interval.setCurrentAsMax() ; \n\n        // 清空\n        this.list.splice( 0 , this.list.length ) ; \n        \n        // 加入要排序的节点\n        let allenemies = RoleMgr.ins.allEnemies ;\n        for( let i = 0 ; i < allenemies.length ; ++i ) {\n            let role = allenemies[ i ] ;\n            this.list.push( role.view.root ) ;\n        }\n        this.list.push( PlayerRole.ins.main.view.root ) ;\n\n        // 按照 Y 排序\n        this.list.sort( ( a , b )=>{\n            let y1 = a.position.y ; \n            let y2 = b.position.y ;\n            if( y1 < y2 ) return 1 ;\n            else if ( y1 > y2 ) return -1 ;\n            return 0 ;\n        } ) ;\n\n        // 设置遮挡\n        for( let i = 0 ; i < this.list.length ; ++i ) {\n            let node = this.list[ i ] ;\n            node.setSiblingIndex( i ) ;\n\n        }\n\n    }\n\n    private list = new Array< Node >() ;\n\n}"]}